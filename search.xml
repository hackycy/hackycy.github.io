<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>æ·±å…¥ç†è§£Javaæ³›å‹</title>
    <url>/2020/07/23/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E6%B3%9B%E5%9E%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="æ³›å‹çš„å®šä¹‰"><a href="#æ³›å‹çš„å®šä¹‰" class="headerlink" title="æ³›å‹çš„å®šä¹‰"></a>æ³›å‹çš„å®šä¹‰</h1><p><strong>æ³›å‹</strong>ï¼Œå³<code>å‚æ•°åŒ–ç±»å‹</code>ã€‚å°±æ˜¯å°†ç±»å‹ç”±åŸæ¥çš„å…·ä½“çš„ç±»å‹å‚æ•°åŒ–ï¼Œç±»ä¼¼äºæ–¹æ³•ä¸­çš„å˜é‡å‚æ•°ï¼Œæ­¤æ—¶ç±»å‹ä¹Ÿå®šä¹‰æˆå‚æ•°å½¢å¼ï¼ˆå¯ä»¥ç§°ä¹‹ä¸ºç±»å‹å½¢å‚ï¼‰ï¼Œç„¶ååœ¨ä½¿ç”¨/è°ƒç”¨æ—¶ä¼ å…¥å…·ä½“çš„ç±»å‹ï¼ˆç±»å‹å®å‚ï¼‰ã€‚<br>ä¾‹å¦‚ï¼š<code>GenericClass**&lt;T&gt;**{}</code></p>
<a id="more"></a>
<blockquote>
<p>ä¸€äº›å¸¸ç”¨çš„æ³›å‹ç±»å‹å˜é‡ï¼š<br>Eï¼šå…ƒç´ ï¼ˆElementï¼‰ï¼Œå¤šç”¨äºjavaé›†åˆæ¡†æ¶<br>Kï¼šå…³é”®å­—ï¼ˆKeyï¼‰<br>Nï¼šæ•°å­—ï¼ˆNumberï¼‰<br>Tï¼šç±»å‹ï¼ˆTypeï¼‰<br>Vï¼šå€¼ï¼ˆValueï¼‰</p>
</blockquote>
<p>å…ˆæ¥çœ‹ä¸ªç®€å•çš„ä¾‹å­ï¼Œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">list.add(<span class="string">"1"</span>);</span><br><span class="line">list.add(<span class="string">"2"</span>);</span><br><span class="line">list.add(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œåä¼šå‘ç°æŠ¥äº†ä¸€ä¸ªé”™è¯¯</p>
<p><img src="https://github.static.si-yee.com/posts/generic/1.png" alt></p>
<p>è¿™é‡Œå¯ä»¥çœ‹å‡ºæ¥åœ¨ä»£ç ç¼–å†™é˜¶æ®µå°±å·²ç»æŠ¥é”™äº†ï¼Œä¸èƒ½å¾€stringç±»å‹çš„é›†åˆä¸­æ·»åŠ intç±»å‹çš„æ•°æ®ã€‚</p>
<p>é‚£å¯ä¸å¯ä»¥å¾€Listé›†åˆä¸­æ·»åŠ å¤šä¸ªç±»å‹çš„æ•°æ®å‘¢ï¼Œç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥æŠŠlisté›†åˆå½“æˆæ™®é€šçš„ç±»ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œé‚£ä¹ˆå°±æœ‰ä¸‹é¢çš„ä»£ç :</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">list.add(<span class="string">"1"</span>);</span><br><span class="line">list.add(<span class="string">"2"</span>);</span><br><span class="line">list.add(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">	System.out.println(list.get(<span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸å®šä¹‰æ³›å‹ä¹Ÿæ˜¯å¯ä»¥å¾€é›†åˆä¸­æ·»åŠ æ•°æ®çš„ï¼Œ<strong>æ‰€ä»¥è¯´æ³›å‹åªæ˜¯ä¸€ç§ç±»å‹çš„è§„èŒƒï¼Œåœ¨ä»£ç ç¼–å†™é˜¶æ®µèµ·ä¸€ç§é™åˆ¶ã€‚</strong></p>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¾‹å­æ¥ä»‹ç»æ³›å‹èƒŒåæ•°æ®æ˜¯ä»€ä¹ˆç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo01</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BaseBean&lt;String&gt; bean = <span class="keyword">new</span> BaseBean&lt;&gt;();</span><br><span class="line">        bean.setValue(<span class="string">"China"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Field value = bean.getClass().getDeclaredField(<span class="string">"value"</span>);</span><br><span class="line">            Class&lt;?&gt; type = value.getType();</span><br><span class="line">            String name = type.getName();</span><br><span class="line">            System.out.println(<span class="string">"type: "</span> + name);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·å–æ–¹æ³•ä¸Šçš„æ³›å‹ç±»å‹</span></span><br><span class="line">            Method getValue = bean.getClass().getDeclaredMethod(<span class="string">"getValue"</span>);</span><br><span class="line">            Object invoke = getValue.invoke(bean);</span><br><span class="line">            String methodName = invoke.getClass().getName();</span><br><span class="line">            System.out.println(<span class="string">"methodName: "</span> + methodName);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseBean</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    T value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; Task :Demo01.main()</span><br><span class="line"><span class="built_in">type</span>: java.lang.Object</span><br><span class="line">methodName: java.lang.String</span><br></pre></td></tr></table></figure>
<p>ä»æ—¥å¿—ä¸Šçœ‹åˆ°é€šè¿‡åå°„è·å–åˆ°çš„å±æ€§æ˜¯<code>Object</code>ç±»å‹çš„ï¼Œåœ¨æ–¹æ³•ä¸­è¿”å›çš„æ˜¯<code>String</code>ç±»å‹ï¼Œå› æ­¤å¯ä»¥æ€è€ƒåœ¨<code>getValue</code>æ–¹æ³•é‡Œé¢å®é™…æ˜¯åšäº†ä¸ªå¼ºè½¬çš„åŠ¨ä½œï¼Œå°†<code>Object</code>ç±»å‹çš„valueå¼ºè½¬æˆ<code>String</code>ç±»å‹ã€‚</p>
<p>å› ä¸ºæ³›å‹åªæ˜¯ä¸ºäº†çº¦æŸæˆ‘ä»¬è§„èŒƒä»£ç ï¼Œè€Œå¯¹äºç¼–è¯‘å®Œä¹‹åçš„classäº¤ç»™è™šæ‹Ÿæœºåï¼Œå¯¹äºè™šæ‹Ÿæœºå®ƒæ˜¯æ²¡æœ‰æ³›å‹çš„è¯´æ³•çš„ï¼Œæ‰€æœ‰çš„æ³›å‹åœ¨å®ƒçœ‹æ¥éƒ½æ˜¯<code>Object</code>ç±»å‹ï¼Œå› æ­¤<strong>æ³›å‹æ“¦é™¤</strong>æ˜¯å¯¹äºè™šæ‹Ÿæœºè€Œè¨€çš„ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹ä¸€ç§æ³›å‹ç»“æ„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseBean2</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">    T value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°†æ³›å‹åŠ äº†ä¸ªå…³é”®å­—<code>extends</code>ï¼Œå¯¹äºæ³›å‹å†™å¾—å¤šçš„ä¼™ä¼´ä»¬æ¥è¯´ï¼Œ<code>extends</code>æ˜¯çº¦æŸäº†æ³›å‹æ˜¯å‘ä¸‹ç»§æ‰¿çš„ï¼Œæœ€åæˆ‘ä»¬é€šè¿‡åå°„è·å–valueçš„ç±»å‹æ˜¯Stringç±»å‹çš„ï¼Œå› æ­¤è¿™é‡Œä¹Ÿä¸éš¾çœ‹å‡ºï¼ŒåŠ <code>extends</code>å…³é”®å­—å…¶å®æœ€ç»ˆç›®çš„æ˜¯çº¦æŸæ³›å‹æ˜¯å±äºå“ªä¸€ç±»çš„ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™å¦‚æœæ²¡æœ‰å‘ä¸‹å…¼å®¹ç±»å‹ï¼Œä¼šè­¦å‘Šé”™è¯¯çš„ï¼š</p>
<p><img src="https://github.static.si-yee.com/posts/generic/2.png" alt></p>
<p>æ—¢ç„¶è¯´äº†æ³›å‹å…¶å®å¯¹äºjvmæ¥è¯´éƒ½æ˜¯Objectç±»å‹çš„ï¼Œé‚£å’±ä»¬ç›´æ¥å°†ç±»å‹å®šä¹‰æˆ<code>Object</code>ä¸å°±æ˜¯çš„äº†ï¼Œè¿™ç§åšæ³•æ˜¯å¯ä»¥ï¼Œä½†æ˜¯åœ¨æ‹¿åˆ°<code>Object</code>ç±»å‹å€¼ä¹‹åï¼Œè‡ªå·±è¿˜å¾—å¼ºè½¬ï¼Œå› æ­¤æ³›å‹å‡å°‘äº†ä»£ç çš„å¼ºè½¬å·¥ä½œï¼Œè€Œå°†è¿™äº›å·¥ä½œäº¤ç»™äº†è™šæ‹Ÿæœºã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢æˆ‘ä»¬æ²¡æœ‰å®šä¹‰æ³›å‹çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseBean3</span> </span>&#123;</span><br><span class="line">    Object value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(Object value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŠ¿å¿…åœ¨getValueçš„æ—¶å€™ä»£ç æœ‰ä¸ªå¼ºè½¬çš„è¿‡ç¨‹ï¼Œå› æ­¤åœ¨èƒ½ç”¨æ³›å‹çš„æ—¶å€™ï¼Œå°½é‡ç”¨æ³›å‹æ¥å†™ï¼Œè€Œä¸”æˆ‘è®¤ä¸ºä¸€ä¸ªå¥½çš„æ¶æ„å¸ˆï¼Œä¸šåŠ¡çš„æŠ½å–æ˜¯ç¦»ä¸å¼€æ³›å‹çš„å®šä¹‰ã€‚</p>
<blockquote>
<p>å¸¸è§çš„æ³›å‹ä¸»è¦æœ‰ä½œç”¨åœ¨æ™®é€šç±»ä¸Šé¢ï¼Œä½œç”¨åœ¨æŠ½è±¡ç±»ã€æ¥å£ã€é™æ€æˆ–éé™æ€æ–¹æ³•ä¸Šã€‚</p>
</blockquote>
<h1 id="ç±»ä¸Šé¢çš„æ³›å‹"><a href="#ç±»ä¸Šé¢çš„æ³›å‹" class="headerlink" title="ç±»ä¸Šé¢çš„æ³›å‹"></a><strong>ç±»ä¸Šé¢çš„æ³›å‹</strong></h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseBean</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String errMsg;</span><br><span class="line">    <span class="keyword">public</span> T data;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> status;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æŠ½è±¡ç±»æˆ–æ¥å£ä¸Šçš„æ³›å‹"><a href="#æŠ½è±¡ç±»æˆ–æ¥å£ä¸Šçš„æ³›å‹" class="headerlink" title="æŠ½è±¡ç±»æˆ–æ¥å£ä¸Šçš„æ³›å‹"></a><strong>æŠ½è±¡ç±»æˆ–æ¥å£ä¸Šçš„æ³›å‹</strong></h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseAdapter</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    List&lt;T&gt; DATAS;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Factory</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">T <span class="title">create</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">getData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¤šå…ƒæ³›å‹"><a href="#å¤šå…ƒæ³›å‹" class="headerlink" title="å¤šå…ƒæ³›å‹"></a><strong>å¤šå…ƒæ³›å‹</strong></h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Base</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setKey</span><span class="params">(K k)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">V <span class="title">getValue</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ³›å‹äºŒçº§æŠ½è±¡ç±»æˆ–æ¥å£"><a href="#æ³›å‹äºŒçº§æŠ½è±¡ç±»æˆ–æ¥å£" class="headerlink" title="æ³›å‹äºŒçº§æŠ½è±¡ç±»æˆ–æ¥å£"></a><strong>æ³›å‹äºŒçº§æŠ½è±¡ç±»æˆ–æ¥å£</strong></h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BaseCommon</span>&lt;<span class="title">K</span> <span class="keyword">extends</span> <span class="title">Common1</span>, <span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">Base</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseCommon</span>&lt;<span class="title">K</span> <span class="keyword">extends</span> <span class="title">Common1</span>, <span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Base</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æŠ½è±¡é‡Œé¢åŒ…å«æŠ½è±¡"><a href="#æŠ½è±¡é‡Œé¢åŒ…å«æŠ½è±¡" class="headerlink" title="æŠ½è±¡é‡Œé¢åŒ…å«æŠ½è±¡"></a><strong>æŠ½è±¡é‡Œé¢åŒ…å«æŠ½è±¡</strong></h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Base</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">void</span> <span class="title">addNode</span><span class="params">(Map&lt;K, V&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line">   <span class="function">Map&lt;K, V&gt; <span class="title">getNode</span><span class="params">(<span class="keyword">int</span> index)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseCommon</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Base</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">   </span><br><span class="line">   LinkedList&lt;Map&lt;K, V&gt;&gt; DATAS = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addNode</span><span class="params">(Map&lt;K, V&gt; map)</span> </span>&#123;</span><br><span class="line">       DATAS.addLast(map);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Map&lt;K, V&gt; <span class="title">getNode</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> DATAS.get(index);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="lt-gt-é€šé…ç¬¦"><a href="#lt-gt-é€šé…ç¬¦" class="headerlink" title="&lt;?&gt;é€šé…ç¬¦"></a><strong>&lt;?&gt;é€šé…ç¬¦</strong></h1><p><code>&lt;?&gt;é€šé…ç¬¦</code>å’Œ <code>&lt;T&gt;</code> åŒºåˆ«æ˜¯<code>&lt;?&gt;</code>åœ¨ä½ ä¸çŸ¥é“æ³›å‹ç±»å‹çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨<code>&lt;?&gt;</code>é€šé…ç¬¦æ¥å®šä¹‰ï¼Œä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥çœ‹çœ‹<code>&lt;?&gt;</code>çš„ç”¨å¤„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseBean</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    T value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Common</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Common1</span> <span class="keyword">extends</span> <span class="title">Common</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://github.static.si-yee.com/posts/generic/3.png" alt></p>
<p>åœ¨å®šä¹‰çš„æ—¶å€™å°†<code>Common</code>çš„æ³›å‹æŒ‡å‘<code>Common1</code>çš„æ³›å‹ï¼Œå¯ä»¥çœ‹åˆ°ç›´æ¥æç¤ºæœ‰é—®é¢˜ï¼Œè¿™é‡Œå¯ä»¥æƒ³ï¼Œè™½ç„¶<code>Common1</code>æ˜¯ç»§æ‰¿è‡ª<code>Common</code>çš„ï¼Œä½†æ˜¯å¹¶ä¸ä»£è¡¨<code>BaseBean</code>ä¹‹é—´æ˜¯ç­‰é‡çš„ï¼Œåœ¨å¼€ç¯‡ä¹Ÿè®²è¿‡ï¼Œå¦‚æœæ³›å‹ä¼ å…¥çš„æ˜¯ä»€ä¹ˆç±»å‹ï¼Œé‚£ä¹ˆåœ¨<code>BaseBean</code>ä¸­çš„<code>getValue</code>è¿”å›çš„ç±»å‹å°±æ˜¯ä»€ä¹ˆï¼Œå› æ­¤å¯ä»¥æƒ³ä¸¤ä¸ªä¸åŒçš„æ³›å‹ç±»è‚¯å®šæ˜¯ä¸ç­‰ä»·çš„ï¼Œä½†æ˜¯å¦‚æœæˆ‘è¿™é‡Œå†™å‘¢ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    BaseBean&lt;Common&gt; commonBaseBean = <span class="keyword">new</span> BaseBean&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    BaseBean&lt;?&gt; common1BaseBean = commonBaseBean;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        </span><br><span class="line">        Method setValue = common1BaseBean.getClass().getDeclaredMethod(<span class="string">"setValue"</span>, Object<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        setValue.invoke(common1BaseBean, <span class="string">"123"</span>);</span><br><span class="line">        Object value = common1BaseBean.getValue();</span><br><span class="line">        System.out.println(<span class="string">"result:"</span> + value);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢å¦‚æœå®šä¹‰çš„æ³›å‹æ˜¯é€šé…ç¬¦æ˜¯å¯ä»¥ç­‰ä»·çš„ï¼Œå› ä¸ºæ­¤æ—¶çš„setValueçš„å‚æ•°æ˜¯Objectç±»å‹ï¼Œæ‰€ä»¥èƒ½ç›´æ¥å°†ä¸Šé¢å®šä¹‰çš„æ³›å‹èµ‹ç»™é€šé…ç¬¦çš„BaseBeanã€‚</p>
<p><strong>é€šé…ç¬¦ä¸èƒ½å®šä¹‰åœ¨ç±»ä¸Šé¢ã€æ¥å£æˆ–æ–¹æ³•ä¸Šï¼Œåªèƒ½ä½œç”¨åœ¨æ–¹æ³•çš„å‚æ•°ä¸Š</strong></p>
<p><img src="https://github.static.si-yee.com/posts/generic/4.png" alt></p>
<p>å…¶ä»–çš„å‡ ç§æƒ…å†µè‡ªå·±å»å°è¯•ï¼Œæ­£ç¡®çš„ä½¿ç”¨é€šé…ç¬¦:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setClass</span><span class="params">(Class&lt;?&gt; class)</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä¸Šé™ä»¥åŠä¸‹é™æ³›å‹"><a href="#ä¸Šé™ä»¥åŠä¸‹é™æ³›å‹" class="headerlink" title="ä¸Šé™ä»¥åŠä¸‹é™æ³›å‹"></a>ä¸Šé™ä»¥åŠä¸‹é™æ³›å‹</h1><p><strong><code>&lt;T extends &gt;</code>ã€<code>&lt;T super &gt;</code>ã€<code>&lt;? extends &gt;</code>ã€<code>&lt;? super &gt;</code></strong></p>
<p><code>&lt;T extends **&gt;</code>è¡¨ç¤ºä¸Šé™æ³›å‹ã€<code>&lt;T super **&gt;</code>è¡¨ç¤ºä¸‹é™æ³›å‹<br>ä¸ºäº†æ¼”ç¤ºè¿™ä¸¤ä¸ªé€šé…ç¬¦çš„ä½œç”¨ï¼Œå¢åŠ äº†ä¸€ä¸ªç±»:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo01</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BaseBean&lt;Common&gt; beanCommon = <span class="keyword">new</span> BaseBean();</span><br><span class="line">        BaseBean&lt;BaseCommon&gt; baseCommonBaseBean = beanCommon;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseBean</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Common</span>&gt; </span>&#123;</span><br><span class="line">    T value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseCommon</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Common</span> <span class="keyword">extends</span> <span class="title">BaseCommon</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>ä¼šçœ‹åˆ°å‡ºç°ä»¥ä¸‹é”™è¯¯</p>
<p><code>Type parameter &#39;BaseCommon&#39; is not within its bound; should extend &#39;Common&#39;</code></p>
<p>ç¬¬äºŒä¸ªå®šä¹‰çš„æ³›å‹æ˜¯ä¸åˆæ³•çš„ï¼Œå› ä¸º<code>BaseCommon</code>æ˜¯<code>Common</code>çš„çˆ¶ç±»ï¼Œè¶…å‡ºäº†<code>Common</code>çš„ç±»å‹èŒƒå›´ã€‚</p>
<p><strong><code>&lt;T super &gt;</code>ä¸èƒ½ä½œç”¨åœ¨ç±»ã€æ¥å£ã€æ–¹æ³•ä¸Šï¼Œåªèƒ½é€šè¿‡æ–¹æ³•ä¼ å‚æ¥å®šä¹‰æ³›å‹</strong><br>åœ¨BaseBeané‡Œé¢å®šä¹‰äº†ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo01</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BaseBean&lt;Common&gt; beanCommon = <span class="keyword">new</span> BaseBean();</span><br><span class="line">        beanCommon.add(Common<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        beanCommon.add(Common1<span class="class">.<span class="keyword">class</span>)</span>; <span class="comment">//å‡ºç°æŠ¥é”™</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseBean</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Common</span>&gt; </span>&#123;</span><br><span class="line">    T value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Class&lt;? <span class="keyword">super</span> Common&gt; clazz)</span> </span>&#123;</span><br><span class="line">      <span class="comment">// å¢åŠ çš„æ–¹æ³•</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseCommon</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Common</span> <span class="keyword">extends</span> <span class="title">BaseCommon</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Common1</span> <span class="keyword">extends</span>  <span class="title">Common</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°å½“ä¼ è¿›å»çš„æ˜¯<code>Common1.class</code>çš„æ—¶å€™æ˜¯ä¸åˆæ³•çš„ï¼Œå› ä¸ºåœ¨<code>add</code>æ–¹æ³•ä¸­éœ€è¦ä¼ å…¥<code>Common</code>çˆ¶ç±»çš„å­—èŠ‚ç å¯¹è±¡ï¼Œè€Œ<code>Common1</code>æ˜¯ç»§æ‰¿è‡ª<code>Common</code>ï¼Œæ‰€ä»¥ç›´æ¥ä¸åˆæ³•ã€‚</p>
<blockquote>
<p>åœ¨å®é™…å¼€å‘ä¸­å…¶å®çŸ¥é“ä»€ä¹ˆæ—¶å€™å®šä¹‰ä»€ä¹ˆç±»å‹çš„æ³›å‹å°±okï¼Œåœ¨mvpå®é™…æ¡ˆä¾‹ä¸­æ³›å‹ç”¨å¾—æ¯”è¾ƒå¹¿æ³›ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®å®é™…é¡¹ç›®æ¥æ‰¾æ‰¾æ³›å‹çš„æ„Ÿè§‰ï¼Œåªæ˜¯é¢è¯•çš„æ—¶å€™éœ€è¦ç†è§£ç±»å‹æ“¦é™¤æ˜¯é’ˆå¯¹è°è€Œè¨€çš„ã€‚</p>
</blockquote>
<h1 id="ç±»å‹æ“¦é™¤"><a href="#ç±»å‹æ“¦é™¤" class="headerlink" title="ç±»å‹æ“¦é™¤"></a>ç±»å‹æ“¦é™¤</h1><p>å…¶å®åœ¨å¼€ç¯‡çš„æ—¶å€™å·²ç»é€šè¿‡ä¾‹å­è¯´æ˜äº†ï¼Œé€šè¿‡åå°„ç»•å¼€æ³›å‹çš„å®šä¹‰ï¼Œä¹Ÿè¯´æ˜äº†ç±»ä¸­å®šä¹‰çš„æ³›å‹æœ€ç»ˆæ˜¯ä»¥Objectè¢«jvmæ‰§è¡Œã€‚</p>
<p>æ‰€æœ‰çš„æ³›å‹åœ¨jvmä¸­æ‰§è¡Œçš„æ—¶å€™ï¼Œéƒ½æ˜¯ä»¥<code>Object</code>å¯¹è±¡å­˜åœ¨çš„ï¼ŒåŠ æ³›å‹åªæ˜¯ä¸ºäº†ä¸€ç§ä»£ç çš„è§„èŒƒï¼Œé¿å…äº†å¼€å‘è¿‡ç¨‹ä¸­å†æ¬¡å¼ºè½¬ã€‚<br><strong>æ³›å‹ä¿¡æ¯åªå­˜åœ¨äºä»£ç ç¼–è¯‘é˜¶æ®µï¼Œåœ¨è¿›å…¥ JVM ä¹‹å‰ï¼Œä¸æ³›å‹ç›¸å…³çš„ä¿¡æ¯ä¼šè¢«æ“¦é™¤æ‰ï¼Œä¸“ä¸šæœ¯è¯­å«åšç±»å‹æ“¦é™¤ã€‚</strong></p>
<p><strong>æ‘˜å½•è‡ª</strong>ï¼š</p>
<p><a href="http://www.jianshu.com/p/dd34211f2565" target="_blank" rel="noopener">www.jianshu.com/p/dd34211f2565</a></p>
]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
      </tags>
  </entry>
  <entry>
    <title>Flutterå¼•å…¥ç¬¬ä¸‰æ–¹Iconå›¾æ ‡</title>
    <url>/2020/07/02/Flutter%E5%BC%95%E5%85%A5%E7%AC%AC%E4%B8%89%E6%96%B9Icon%E5%9B%BE%E6%A0%87/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>Flutterè™½ç„¶å†…ç½®äº†å¾ˆå¤šIconå›¾æ ‡ï¼Œä½†æ˜¯è¿˜æ˜¯éœ€è¦å¼•å…¥è‡ªå·±æˆ–ç¬¬ä¸‰æ–¹å›¾æ ‡åº“æä¾›çš„Iconã€‚ä¸‹é¢æ˜¯è§£å†³åŠæ³•ã€‚æœ¬æ–‡ä»¥<a href="http://iconfont.cn/" target="_blank" rel="noopener">é˜¿é‡Œå·´å·´å›¾æ ‡åº“</a>ä¸ºä¾‹ã€‚</strong></p>
<a id="more"></a>
<p>1ã€åœ¨é˜¿é‡Œå›¾æ ‡åº“é€‰å¥½éœ€è¦ç”¨çš„å›¾æ ‡ï¼Œæ·»åŠ è¿›è´­ç‰©è½¦å°†é€‰å¥½çš„å›¾æ ‡æ‰“åŒ…ä¸‹è½½åˆ°æœ¬åœ°ï¼ˆä¸‹è½½ä»£ç ï¼‰ï¼Œå¤åˆ¶<code>iconfont.ttf</code>æ–‡ä»¶åˆ°é¡¹ç›®ä¸­ã€‚</p>
<p>2ã€å°†è¯¥æ–‡ä»¶æ”¾ç½®äºä½ çš„flutteré¡¹ç›®ä¸‹çš„<code>assets/fonts/</code>ä¸‹ã€‚</p>
<p>3ã€æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸­çš„pubspec.yamlæ–‡ä»¶ï¼Œåœ¨flutterä¸­å¢åŠ é…ç½®</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># The following section is specific to Flutter.</span></span><br><span class="line"><span class="attr">flutter:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># The following line ensures that the Material Icons font is</span></span><br><span class="line">  <span class="comment"># included with your application, so that you can use the icons in</span></span><br><span class="line">  <span class="comment"># the material Icons class.</span></span><br><span class="line">  <span class="attr">uses-material-design:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># An image asset can refer to one or more resolution-specific "variants", see</span></span><br><span class="line">  <span class="comment"># https://flutter.dev/assets-and-images/#resolution-aware.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># For details regarding adding assets from package dependencies, see</span></span><br><span class="line">  <span class="comment"># https://flutter.dev/assets-and-images/#from-packages</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># To add custom fonts to your application, add a fonts section here,</span></span><br><span class="line">  <span class="comment"># in this "flutter" section. Each entry in this list should have a</span></span><br><span class="line">  <span class="comment"># "family" key with the font family name, and a "fonts" key with a</span></span><br><span class="line">  <span class="comment"># list giving the asset and other descriptors for the font. For</span></span><br><span class="line">  <span class="comment"># example:</span></span><br><span class="line">  <span class="attr">fonts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">family:</span> <span class="string">Iconfont</span></span><br><span class="line">      <span class="attr">fonts:</span></span><br><span class="line">         <span class="bullet">-</span> <span class="attr">asset:</span> <span class="string">assets/fonts/iconfont.ttf</span></span><br></pre></td></tr></table></figure>
<p><code>Iconfont</code>ä¸ºè‡ªå®šä¹‰åç§°ï¼Œå¯è‡ªå·±å®šä¹‰ã€‚</p>
<p>4ã€åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ï¼š</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line">Icon(IconData(<span class="number">0xe621</span>, fontFamily: <span class="string">'iconfont'</span>));</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼š<code>IconData()</code>é‡Œé¢ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºcodePointï¼Œä»£è¡¨å›¾æ ‡å­—ä½“å­˜å‚¨çš„<code>Unicode</code>ï¼Œè¿™ä¸ªå¯ä»¥åœ¨æ‰“å¼€é˜¿é‡Œå·´å·´åº“æ ‡é¢˜çš„ä¸‹è½½æ–‡ä»¶ä¸­çš„HTMLæ–‡ä»¶æŸ¥çœ‹ï¼Œ<strong>å°† &amp;# å­—ç¬¦æ›¿æ¢ä¸º 0 å³å¯ï¼ŒfontFamilyï¼šåé¢è·Ÿè‡ªå®šä¹‰çš„å­—ä½“å›¾æ ‡åç§°ï¼Œæˆ‘è¿™é‡Œæ˜¯Iconfont</strong></p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://blog.csdn.net/shuaizi96/article/details/88550217" target="_blank" rel="noopener">https://blog.csdn.net/shuaizi96/article/details/88550217</a></p>
]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³Mac flutter runæŠ¥é”™ï¼šFileSystemException</title>
    <url>/2020/06/05/%E8%A7%A3%E5%86%B3Mac-flutter-run%E6%8A%A5%E9%94%99%EF%BC%9AFileSystemException/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨æ­£å¼å­¦ä¹ å®ŒDartçš„è·¯ç¨‹ä¸‹ï¼Œå…´å¥‹çš„é…ç½®å®ŒæˆFlutterçš„ç¯å¢ƒåï¼Œæƒ³è¦è·‘ä¸€ä¸ªdemoçš„æ—¶å€™å‘åˆæ¥äº†ä¸€ä¸ªã€‚</p>
<a id="more"></a>
<h1 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h1><p><strong>flutter doctor</strong>æ— é—®é¢˜</p>
<p><img src="https://github.static.si-yee.com/posts/flutterrunFileSystemExceptionError/20200605104644.png" alt></p>
<p>ä½†æ˜¯åœ¨<strong>flutter run</strong>åå‡ºç°äº†è¯¥é”™è¯¯ï¼š</p>
<p><img src="https://github.static.si-yee.com/posts/flutterrunFileSystemExceptionError/20200605104915.png" alt></p>
<p>å‡ºç°è¿™äº›é—®é¢˜ï¼ŒæŸ¥çœ‹äº†Flutterçš„å¾ˆå¤šissuesï¼Œæœ‰çš„è¯´æƒé™ï¼Œæœ‰çš„è¯´é…ç½®å›½å†…æºã€‚çš„ç¡®å¦‚æ­¤ï¼Œä½†æ˜¯å…ˆç¡®è®¤å¥½æ­¥éª¤ã€‚</p>
<h1 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h1><p>å¦‚æœå®‰è£…å¥½äº†SDKå…ˆåˆ é™¤é‡æ–°é…ç½®å§ã€‚ç¯å¢ƒé…ç½®çš„å˜é‡å¯ä»¥ä¸ç”¨åˆ é™¤ã€‚é‡å¤å®‰è£…sdkçš„æ­¥éª¤å°±å¯ä»¥äº†ã€‚<strong>è®°å¾—å…ˆé…å¥½ç¯å¢ƒå˜é‡å†è¿è¡ŒFlutterçš„ç›¸å…³å‘½ä»¤</strong>ã€‚ç‰¹åˆ«æ˜¯é…ç½®å›½å†…æºã€‚<a href="https://flutter.dev/docs/get-started/install/macos" target="_blank" rel="noopener">å®˜æ–¹æ•™ç¨‹</a></p>
<p>é…ç½®<code>.bash_profile</code>ï¼Œå¦‚æœæ˜¯ä½¿ç”¨<code>zsh</code>ä¸‹ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ‰“å¼€ç»ˆç«¯åè¾“å…¥<code>source ~/.bash_profile</code>ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯åœ¨<code>.zshrc</code>æ–‡ä»¶é…ç½®<code>source ~/.bash_profile</code>å‘½ä»¤å³å¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> PUB_HOSTED_URL=https://mirrors.tuna.tsinghua.edu.cn/dart-pub</span><br><span class="line"><span class="built_in">export</span> FLUTTER_STORAGE_BASE_URL=https://mirrors.tuna.tsinghua.edu.cn/flutter</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">"<span class="variable">$PATH</span>:/Users/zjyzy/Library/Flutter/bin"</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚æœä½ æœ‰ç§‘å­¦ä¸Šç½‘ï¼Œå¯ä»¥é…ç½®ä»£ç†ï¼š</p>
<p><code>export http_proxy=http://127.0.0.1:1087</code>å’Œ<code>export https_proxy=http://127.0.0.1:1087</code></p>
</blockquote>
<p>é‡æ–°é…ç½®å¥½SDKåï¼Œé…ç½®å¥½<code>flutter precache</code>å’Œ<code>flutter doctor</code>æ— è¯¯åï¼Œé…ç½®Flutter SDKçš„ç›®å½•æƒé™ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo chmod -R 777 /Users/zjyzy/Library/Flutter/bin</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>flutter create</code>å‘½ä»¤åˆ›å»ºé¡¹ç›®ï¼Œ<strong>è¿™é‡Œè¦è®°ä½ï¼Œä¸€å®šä¸è¦ä½¿ç”¨sudoåˆ›å»ºé¡¹ç›®</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ flutter create flutterdemo</span><br><span class="line">Creating project flutterdemo...</span><br><span class="line">  flutterdemo/ios/Runner.xcworkspace/contents.xcworkspacedata (created)</span><br><span class="line">  flutterdemo/ios/Runner.xcworkspace/xcshareddata/IDEWorkspaceChecks.plist (created)</span><br><span class="line">  flutterdemo/ios/Runner.xcworkspace/xcshareddata/WorkspaceSettings.xcsettings (created)</span><br><span class="line">  flutterdemo/ios/Runner/Info.plist (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/LaunchImage.imageset/LaunchImage@2x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/LaunchImage.imageset/LaunchImage@3x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/LaunchImage.imageset/README.md (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/LaunchImage.imageset/Contents.json (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/LaunchImage.imageset/LaunchImage.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-76x76@2x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-29x29@1x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-40x40@1x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-20x20@1x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-1024x1024@1x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-83.5x83.5@2x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-20x20@3x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Contents.json (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-20x20@2x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-29x29@3x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-40x40@2x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-60x60@3x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-60x60@2x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-76x76@1x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-40x40@3x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Assets.xcassets/AppIcon.appiconset/Icon-App-29x29@2x.png (created)</span><br><span class="line">  flutterdemo/ios/Runner/Base.lproj/LaunchScreen.storyboard (created)</span><br><span class="line">  flutterdemo/ios/Runner/Base.lproj/Main.storyboard (created)</span><br><span class="line">  flutterdemo/ios/Runner.xcodeproj/project.xcworkspace/contents.xcworkspacedata (created)</span><br><span class="line">  flutterdemo/ios/Runner.xcodeproj/project.xcworkspace/xcshareddata/IDEWorkspaceChecks.plist (created)</span><br><span class="line">  flutterdemo/ios/Runner.xcodeproj/project.xcworkspace/xcshareddata/WorkspaceSettings.xcsettings (created)</span><br><span class="line">  flutterdemo/ios/Runner.xcodeproj/xcshareddata/xcschemes/Runner.xcscheme (created)</span><br><span class="line">  flutterdemo/ios/Flutter/Debug.xcconfig (created)</span><br><span class="line">  flutterdemo/ios/Flutter/Release.xcconfig (created)</span><br><span class="line">  flutterdemo/ios/Flutter/AppFrameworkInfo.plist (created)</span><br><span class="line">  flutterdemo/ios/.gitignore (created)</span><br><span class="line">  flutterdemo/<span class="built_in">test</span>/widget_test.dart (created)</span><br><span class="line">  flutterdemo/flutterdemo.iml (created)</span><br><span class="line">  flutterdemo/.gitignore (created)</span><br><span class="line">  flutterdemo/.metadata (created)</span><br><span class="line">  flutterdemo/android/app/src/profile/AndroidManifest.xml (created)</span><br><span class="line">  flutterdemo/android/app/src/main/res/mipmap-mdpi/ic_launcher.png (created)</span><br><span class="line">  flutterdemo/android/app/src/main/res/mipmap-hdpi/ic_launcher.png (created)</span><br><span class="line">  flutterdemo/android/app/src/main/res/drawable/launch_background.xml (created)</span><br><span class="line">  flutterdemo/android/app/src/main/res/mipmap-xxxhdpi/ic_launcher.png (created)</span><br><span class="line">  flutterdemo/android/app/src/main/res/mipmap-xxhdpi/ic_launcher.png (created)</span><br><span class="line">  flutterdemo/android/app/src/main/res/values/styles.xml (created)</span><br><span class="line">  flutterdemo/android/app/src/main/res/mipmap-xhdpi/ic_launcher.png (created)</span><br><span class="line">  flutterdemo/android/app/src/main/AndroidManifest.xml (created)</span><br><span class="line">  flutterdemo/android/app/src/debug/AndroidManifest.xml (created)</span><br><span class="line">  flutterdemo/android/gradle/wrapper/gradle-wrapper.properties (created)</span><br><span class="line">  flutterdemo/android/gradle.properties (created)</span><br><span class="line">  flutterdemo/android/.gitignore (created)</span><br><span class="line">  flutterdemo/android/settings.gradle (created)</span><br><span class="line">  flutterdemo/android/app/build.gradle (created)</span><br><span class="line">  flutterdemo/android/app/src/main/kotlin/com/example/flutterdemo/MainActivity.kt (created)</span><br><span class="line">  flutterdemo/android/build.gradle (created)</span><br><span class="line">  flutterdemo/android/flutterdemo_android.iml (created)</span><br><span class="line">  flutterdemo/pubspec.yaml (created)</span><br><span class="line">  flutterdemo/README.md (created)</span><br><span class="line">  flutterdemo/ios/Runner/Runner-Bridging-Header.h (created)</span><br><span class="line">  flutterdemo/ios/Runner/AppDelegate.swift (created)</span><br><span class="line">  flutterdemo/ios/Runner.xcodeproj/project.pbxproj (created)</span><br><span class="line">  flutterdemo/lib/main.dart (created)</span><br><span class="line">  flutterdemo/.idea/runConfigurations/main_dart.xml (created)</span><br><span class="line">  flutterdemo/.idea/libraries/Flutter_for_Android.xml (created)</span><br><span class="line">  flutterdemo/.idea/libraries/Dart_SDK.xml (created)</span><br><span class="line">  flutterdemo/.idea/libraries/KotlinJavaRuntime.xml (created)</span><br><span class="line">  flutterdemo/.idea/modules.xml (created)</span><br><span class="line">  flutterdemo/.idea/workspace.xml (created)</span><br><span class="line">Running <span class="string">"flutter pub get"</span> <span class="keyword">in</span> flutterdemo...                         3.0s</span><br><span class="line">Wrote 72 files.</span><br><span class="line"></span><br><span class="line">All <span class="keyword">done</span>!</span><br><span class="line"></span><br><span class="line">[âœ“] Flutter: is fully installed. (Channel stable, v1.17.3, on Mac OS X 10.15.4 19E287, locale zh-Hans-CN)</span><br><span class="line">[âœ“] Android toolchain - develop <span class="keyword">for</span> Android devices: is fully installed. (Android SDK version 29.0.3)</span><br><span class="line">[âœ“] Xcode - develop <span class="keyword">for</span> iOS and macOS: is fully installed. (Xcode 11.4.1)</span><br><span class="line">[âœ“] Android Studio: is fully installed. (version 3.2)</span><br><span class="line">[!] Android Studio: is partially installed; more components are available. (version 3.0)</span><br><span class="line">[!] Android Studio: is partially installed; more components are available. (version 3.6)</span><br><span class="line">[!] IntelliJ IDEA Community Edition: is partially installed; more components are available. (version 2019.3.1)</span><br><span class="line">[âœ“] VS Code: is fully installed. (version 1.45.1)</span><br><span class="line">[âœ“] Connected device: is fully installed. (1 available)</span><br><span class="line"></span><br><span class="line">Run <span class="string">"flutter doctor"</span> <span class="keyword">for</span> information about installing additional components.</span><br><span class="line"></span><br><span class="line">In order to run your application, <span class="built_in">type</span>:</span><br><span class="line"></span><br><span class="line">  $ <span class="built_in">cd</span> flutterdemo</span><br><span class="line">  $ flutter run</span><br><span class="line"></span><br><span class="line">Your application code is <span class="keyword">in</span> flutterdemo/lib/main.dart.</span><br></pre></td></tr></table></figure>
<p>éšåè¿æ¥ä¸Šæ¨¡æ‹Ÿå™¨ï¼Œä½¿ç”¨<code>flutter run</code>è¿è¡Œé¡¹ç›®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ flutter run</span><br><span class="line">Launching lib/main.dart on iPhone SE (2nd generation) <span class="keyword">in</span> debug mode...</span><br><span class="line">Running Xcode build...                                                  </span><br><span class="line">                                                   </span><br><span class="line"> â””â”€Compiling, linking and signing...                         5.8s</span><br><span class="line">Xcode build <span class="keyword">done</span>.                                           17.3s</span><br><span class="line">Syncing files to device iPhone SE (2nd generation)...              135ms</span><br><span class="line"></span><br><span class="line">Flutter run key commands.</span><br><span class="line">r Hot reload. ğŸ”¥ğŸ”¥ğŸ”¥</span><br><span class="line">R Hot restart.</span><br><span class="line">h Repeat this <span class="built_in">help</span> message.</span><br><span class="line">d Detach (terminate <span class="string">"flutter run"</span> but leave application running).</span><br><span class="line">c Clear the screen</span><br><span class="line">q Quit (terminate the application on the device).</span><br><span class="line">An Observatory debugger and profiler on iPhone SE (2nd generation) is available at:</span><br><span class="line">http://127.0.0.1:50997/0_E-14-WAWg=/</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œå°±å®Œæˆå•¦ï¼</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://book.flutterchina.club/chapter1/install_flutter.html" target="_blank" rel="noopener">https://book.flutterchina.club/chapter1/install_flutter.html</a></p>
<p><a href="https://blog.csdn.net/MugWorld/article/details/100033262" target="_blank" rel="noopener">https://blog.csdn.net/MugWorld/article/details/100033262</a></p>
<p><a href="https://github.com/flutter/flutter/issues/57744" target="_blank" rel="noopener">https://github.com/flutter/flutter/issues/57744</a></p>
]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³Macé€šè¿‡Brewå®‰è£…DartæŠ¥é”™ï¼šFailed to download resource dart</title>
    <url>/2020/06/03/%E8%A7%A3%E5%86%B3Mac%E9%80%9A%E8%BF%87Brew%E5%AE%89%E8%A3%85Dart%E6%8A%A5%E9%94%99%EF%BC%9AFailed-to-download-resource-dart/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨å­¦ä¹ Flutterçš„ç¬¬ä¸€æ­¥ä»å®‰è£…å°±å¼€å§‹è¸©å‘äº†ã€‚å®‰è£…Dartç¡¬æ˜¯å®‰è£…ä¸ä¸Šã€‚ç§‘å­¦ä¸Šç½‘ä¹Ÿæœ‰å°±æ˜¯å®‰ä¸ä¸Šã€‚æ‰¾äº†äº›èµ„æ–™ï¼Œè®°å½•äº†ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p>
<a id="more"></a>
<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>é¦–å…ˆæ˜¯dartå®˜ç½‘æ¨èä½¿ç”¨brewå‘½ä»¤å®‰è£…dartï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://github.static.si-yee.com/posts/fixmacinstalldart/20200604141048.png" alt></p>
<p>ä½†æ˜¯å‡ºç°äº†ä»¥ä¸‹çš„é”™è¯¯ï¼š</p>
<p><img src="https://github.static.si-yee.com/posts/fixmacinstalldart/20200604141008.png" alt></p>
<p>è¯¦ç»†æŠ¥é”™å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install dart</span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Installing dart from dart-lang/dart</span><br><span class="line">==&gt; Downloading https://storage.googleapis.com/dart-archive/channels/stable/release/2.8.3/sdk/dartsdk-macos-x64-release.zip</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-=O=-               <span class="comment">#    #     #     #                                        </span></span><br><span class="line">curl: (7) Failed to connect to storage.googleapis.com port 443: Operation timed out</span><br><span class="line">Error: An exception occurred within a child process:</span><br><span class="line">  DownloadError: Failed to download resource <span class="string">"dart"</span></span><br><span class="line">Download failed: https://storage.googleapis.com/dart-archive/channels/stable/release/2.8.3/sdk/dartsdk-macos-x64-release.zip</span><br></pre></td></tr></table></figure>
<h1 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h1><p>æŠ¥é”™ä¸­æœ‰å›æ˜¾èµ„æºçš„åœ°å€é“¾æ¥ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå·±æµè§ˆå™¨æˆ–è€…è¿…é›·å»ä¸‹è½½åˆ°æœ¬åœ°ã€‚</p>
<p>ç„¶åä½¿ç”¨ç»ˆç«¯æŸ¥çœ‹Homebrewçš„ç¼“å­˜åœ°å€ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew --cache</span><br><span class="line">/Users/zjyzy/Library/Caches/Homebrew</span><br></pre></td></tr></table></figure>
<p>æœ€åå°†ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶ æ‹·è´åˆ° ä¸Šé¢ç¼“å­˜åœ°å€ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ cp ~/Downloads/dartsdk-macos-x64-release.zip /Users/zjyzy/Library/Caches/Homebrew</span><br></pre></td></tr></table></figure>
<p>æ¥ç€å†æ‰§è¡Œå‘½ä»¤å°±å¯ä»¥æ­£å¸¸å®‰è£…æˆåŠŸ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install dart</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ²¡æœ‰æ„å¤–ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥è§£å†³é—®é¢˜äº†ã€‚ä½†æ˜¯ä¸å¹¸ï¼Œæˆ‘è¿˜æ˜¯ä¸èƒ½è§£å†³é—®é¢˜ã€‚ç»§ç»­æŸ¥æ‰¾äº†ä¸€äº›èµ„æ–™ï¼š</p>
<p>å®‰è£…æ—¶ç»™å‘½ä»¤åŠ ä¸ª <code>-v</code> æ‰“å°å‘½ä»¤çš„è¯¦ç»†æ—¥å¿—çœ‹çœ‹:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install dart -v</span><br><span class="line">==&gt; Installing dart from dart-lang/dart</span><br><span class="line">/usr/bin/sandbox-exec -f /private/tmp/homebrew20200603-12459-1ulm7yo.sb nice ruby -W0 -I <span class="variable">$LOAD_PATH</span> -- /usr/<span class="built_in">local</span>/Homebrew/Library/Homebrew/build.rb /usr/<span class="built_in">local</span>/Homebrew/Library/Taps/dart-lang/homebrew-dart/dart.rb --verbose</span><br><span class="line">==&gt; Downloading https://storage.googleapis.com/dart-archive/channels/stable/release/2.8.3/sdk/dartsdk-macos-x64-release.zip</span><br><span class="line">/usr/bin/curl -q --globoff --show-error --user-agent Homebrew/2.2.2\ \(Macintosh\;\ Intel\ Mac\ OS\ X\ 10.15.4\)\ curl/7.64.1 --fail --location --remote-time --<span class="built_in">continue</span>-at 0 --output /Users/zjyzy/Library/Caches/Homebrew/downloads/a21b0f967308afab39b415842adf710f903b479ccb472feb7f13960160733911--dartsdk-macos-x64-release.zip.incomplete https://storage.googleapis.com/dart-archive/channels/stable/release/2.8.3/sdk/dartsdk-macos-x64-release.zip</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">  0     0    0     0    0     0      0      0 --:--:--  0:01:15 --:--:--     0</span><br><span class="line">curl: (7) Failed to connect to storage.googleapis.com port 443: Operation timed out</span><br><span class="line">Error: An exception occurred within a child process:</span><br><span class="line">  DownloadError: Failed to download resource <span class="string">"dart"</span></span><br><span class="line">Download failed: https://storage.googleapis.com/dart-archive/channels/stable/release/2.8.3/sdk/dartsdk-macos-x64-release.zip</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„çœ‹è¿™æ¡ä¿¡æ¯</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/bin/curl -q --globoff --show-error --user-agent Homebrew/2.2.2\ \(Macintosh\;\ Intel\ Mac\ OS\ X\ 10.15.4\)\ curl/7.64.1 --fail --location --remote-time --<span class="built_in">continue</span>-at 0 --output /Users/zjyzy/Library/Caches/Homebrew/downloads/a21b0f967308afab39b415842adf710f903b479ccb472feb7f13960160733911--dartsdk-macos-x64-release.zip.incomplete https://storage.googleapis.com/dart-archive/channels/stable/release/2.8.3/sdk/dartsdk-macos-x64-release.zip</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çœ‹åˆ° Homebrew ä¸‹è½½ dart çš„ç¼“å­˜åœ°å€ä¸º:<code>/Users/zjyzy/Library/Caches/Homebrew/downloads/a21b0f967308afab39b415842adf710f903b479ccb472feb7f13960160733911--dartsdk-macos-x64-release.zip.incomplete</code></p>
<p><code>XXX.incomplete</code> è¡¨ç¤ºä¸‹è½½æœªå®Œæˆï¼Œä½†è¿™æ˜¯ Homebrew æœŸæœ›çš„ä¸‹è½½æ–‡ä»¶è·¯å¾„ã€‚é‚£ä¹ˆæˆ‘ä»¬å°†ä»æµè§ˆå™¨ä¸‹è½½å¥½çš„åŒ…æ”¾åˆ°è¯¥ç›®å½•ä¸‹ï¼Œå¹¶å»é™¤<code>.incomplete</code>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ cp ~/Downloads/dartsdk-macos-x64-release.zip /Users/zjyzy/Library/Caches/Homebrew/downloads/a21b0f967308afab39b415842adf710f903b479ccb472feb7f13960160733911--dartsdk-macos-x64-release.zip</span><br></pre></td></tr></table></figure>
<p><strong>å…ˆå»ä¸‹è½½æ–‡ä»¶è·¯å¾„åˆ é™¤æ‰æœªä¸‹è½½å¥½çš„åŒ…</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /Users/zjyzy/Library/Caches/Homebrew/downloads</span><br><span class="line">$ rm -rf a21b0f967308afab39b415842adf710f903b479ccb472feb7f13960160733911--dartsdk-macos-x64-release.zip.incomplete</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶åœ¨å®‰è£…æŸ¥çœ‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install dart -v</span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Installing dart from dart-lang/dart</span><br><span class="line">/usr/bin/sandbox-exec -f /private/tmp/homebrew20200603-14161-iaxt0b.sb nice ruby -W0 -I <span class="variable">$LOAD_PATH</span> -- /usr/<span class="built_in">local</span>/Homebrew/Library/Homebrew/build.rb /usr/<span class="built_in">local</span>/Homebrew/Library/Taps/dart-lang/homebrew-dart/dart.rb --verbose</span><br><span class="line">==&gt; Downloading https://storage.googleapis.com/dart-archive/channels/stable/release/2.8.3/sdk/dartsdk-macos-x64-release.zip</span><br><span class="line">Already downloaded: /Users/zjyzy/Library/Caches/Homebrew/downloads/a21b0f967308afab39b415842adf710f903b479ccb472feb7f13960160733911--dartsdk-macos-x64-release.zip</span><br><span class="line">==&gt; Verifying a21b0f967308afab39b415842adf710f903b479ccb472feb7f13960160733911--dartsdk-macos-x64-release.zip checksum</span><br><span class="line">unzip -o /Users/zjyzy/Library/Caches/Homebrew/downloads/a21b0f967308afab39b415842adf710f903b479ccb472feb7f13960160733911--dartsdk-macos-x64-release.zip -d /private/tmp/d20200603-14162-sr2oas</span><br><span class="line">cp -pR /private/tmp/d20200603-14162-sr2oas/dart-sdk/. /private/tmp/dart-20200603-14162-bg4o22/dart-sdk</span><br><span class="line">chmod -Rf +w /private/tmp/d20200603-14162-sr2oas</span><br><span class="line">==&gt; Cleaning</span><br><span class="line">==&gt; Finishing up</span><br><span class="line">ln -s ../Cellar/dart/2.8.3/bin/dart dart</span><br><span class="line">ln -s ../Cellar/dart/2.8.3/bin/dart2js dart2js</span><br><span class="line">ln -s ../Cellar/dart/2.8.3/bin/dart2native dart2native</span><br><span class="line">ln -s ../Cellar/dart/2.8.3/bin/dartanalyzer dartanalyzer</span><br><span class="line">ln -s ../Cellar/dart/2.8.3/bin/dartaotruntime dartaotruntime</span><br><span class="line">ln -s ../Cellar/dart/2.8.3/bin/dartdevc dartdevc</span><br><span class="line">ln -s ../Cellar/dart/2.8.3/bin/dartdoc dartdoc</span><br><span class="line">ln -s ../Cellar/dart/2.8.3/bin/dartfmt dartfmt</span><br><span class="line">ln -s ../Cellar/dart/2.8.3/bin/pub pub</span><br><span class="line">/usr/bin/sandbox-exec -f /private/tmp/homebrew20200603-14268-12qkciz.sb nice ruby -W0 -I <span class="variable">$LOAD_PATH</span> -- /usr/<span class="built_in">local</span>/Homebrew/Library/Homebrew/postinstall.rb /usr/<span class="built_in">local</span>/Homebrew/Library/Taps/dart-lang/homebrew-dart/dart.rb -v</span><br><span class="line">==&gt; Caveats</span><br><span class="line">Please note the path to the Dart SDK:</span><br><span class="line">  /usr/<span class="built_in">local</span>/opt/dart/libexec</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/<span class="built_in">local</span>/Cellar/dart/2.8.3: 502 files, 486MB, built <span class="keyword">in</span> 7 seconds</span><br><span class="line">==&gt; `brew cleanup` has not been run <span class="keyword">in</span> 30 days, running now...</span><br><span class="line">Removing: /Users/zjyzy/Library/Caches/Homebrew/openssl@1.1--1.1.1d.mojave.bottle.tar.gz... (5.2MB)</span><br><span class="line">Removing: /Users/zjyzy/Library/Caches/Homebrew/python--3.7.4_1.mojave.bottle.tar.gz... (14.6MB)</span><br><span class="line">Removing: /Users/zjyzy/Library/Caches/Homebrew/readline--8.0.1.mojave.bottle.tar.gz... (517.9KB)</span><br><span class="line">Removing: /Users/zjyzy/Library/Caches/Homebrew/sqlite--3.29.0.mojave.bottle.tar.gz... (1.9MB)</span><br><span class="line">Removing: /Users/zjyzy/Library/Caches/Homebrew/watchman--4.9.0_3.mojave.bottle.tar.gz... (536.8KB)</span><br><span class="line">Removing: /Users/zjyzy/Library/Caches/Homebrew/Cask/motrix--1.4.1.dmg... (63MB)</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man5/npm-folders.5</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man5/npm-global.5</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man5/npm-json.5</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man5/npm-package-locks.5</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man5/npm-shrinkwrap.json.5</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man5/package-lock.json.5</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man5/package.json.5</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man7/npm-coding-style.7</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man7/npm-config.7</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man7/npm-developers.7</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man7/npm-disputes.7</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man7/npm-index.7</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man7/npm-orgs.7</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man7/npm-registry.7</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man7/npm-scope.7</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man7/npm-scripts.7</span><br><span class="line">rm /usr/<span class="built_in">local</span>/share/man/man7/removing-npm.7</span><br><span class="line">rmdir /usr/<span class="built_in">local</span>/lib/node_modules/@vue/cli/node_modules/@apollo/protobufjs/cli/node_modules</span><br><span class="line">Pruned 17 symbolic links and 1 directories from /usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure>
<p>å‘½ä»¤éªŒè¯dartå®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew info dart</span><br><span class="line">dart-lang/dart/dart: stable 2.8.3, devel 2.9.0-13.0.dev</span><br><span class="line">The Dart SDK</span><br><span class="line">https://dart.dev</span><br><span class="line">Conflicts with:</span><br><span class="line">  dart-beta (because dart-beta ships the same binaries)</span><br><span class="line">/usr/<span class="built_in">local</span>/Cellar/dart/2.8.3 (502 files, 486MB) *</span><br><span class="line">  Built from <span class="built_in">source</span> on 2020-06-03 at 13:04:47</span><br><span class="line">From: https://github.com/dart-lang/homebrew-dart/blob/master/dart.rb</span><br><span class="line">==&gt; Options</span><br><span class="line">--devel</span><br><span class="line">	Install development version 2.9.0-13.0.dev</span><br><span class="line">==&gt; Caveats</span><br><span class="line">Please note the path to the Dart SDK:</span><br><span class="line">  /usr/<span class="built_in">local</span>/opt/dart/libexec</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼ŒdartSDKå·²ç»å®‰è£…æˆåŠŸã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://shockerli.net/post/homebrew-install-download-error/" target="_blank" rel="noopener">https://shockerli.net/post/homebrew-install-download-error/</a></p>
<p><a href="https://www.cnblogs.com/lmyupupblogs/p/12785753.html" target="_blank" rel="noopener">https://www.cnblogs.com/lmyupupblogs/p/12785753.html</a></p>
]]></content>
      <categories>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Dart</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScriptå·¥å…·å‡½æ•°å¤§å…¨</title>
    <url>/2020/06/01/JavaScript%E5%B7%A5%E5%85%B7%E5%87%BD%E6%95%B0%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æŠ„å½•ä¸€äº›JavaScriptå·¥å…·å‡½æ•°å¤§å…¨<br><a id="more"></a></p>
<h1 id="æ£€æµ‹æ•°æ®æ˜¯ä¸æ˜¯é™¤äº†symbolå¤–çš„åŸå§‹æ•°æ®"><a href="#æ£€æµ‹æ•°æ®æ˜¯ä¸æ˜¯é™¤äº†symbolå¤–çš„åŸå§‹æ•°æ®" class="headerlink" title="æ£€æµ‹æ•°æ®æ˜¯ä¸æ˜¯é™¤äº†symbolå¤–çš„åŸå§‹æ•°æ®"></a>æ£€æµ‹æ•°æ®æ˜¯ä¸æ˜¯é™¤äº†symbolå¤–çš„åŸå§‹æ•°æ®</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isStatic</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">        <span class="keyword">typeof</span> value === <span class="string">'string'</span> ||</span><br><span class="line">        <span class="keyword">typeof</span> value === <span class="string">'number'</span> ||</span><br><span class="line">        <span class="keyword">typeof</span> value === <span class="string">'boolean'</span> ||</span><br><span class="line">        <span class="keyword">typeof</span> value === <span class="string">'undefined'</span> ||</span><br><span class="line">        value === <span class="literal">null</span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ£€æµ‹æ•°æ®æ˜¯ä¸æ˜¯åŸå§‹æ•°æ®"><a href="#æ£€æµ‹æ•°æ®æ˜¯ä¸æ˜¯åŸå§‹æ•°æ®" class="headerlink" title="æ£€æµ‹æ•°æ®æ˜¯ä¸æ˜¯åŸå§‹æ•°æ®"></a>æ£€æµ‹æ•°æ®æ˜¯ä¸æ˜¯åŸå§‹æ•°æ®</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPrimitive</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> isStatic(value) || <span class="keyword">typeof</span> value === <span class="string">'symbol'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­æ•°æ®æ˜¯ä¸æ˜¯å¼•ç”¨ç±»å‹çš„æ•°æ®-ä¾‹å¦‚ï¼š-arrays-functions-objects-regexes-new-Number-0-ä»¥åŠ-new-String-â€˜â€™"><a href="#åˆ¤æ–­æ•°æ®æ˜¯ä¸æ˜¯å¼•ç”¨ç±»å‹çš„æ•°æ®-ä¾‹å¦‚ï¼š-arrays-functions-objects-regexes-new-Number-0-ä»¥åŠ-new-String-â€˜â€™" class="headerlink" title="åˆ¤æ–­æ•°æ®æ˜¯ä¸æ˜¯å¼•ç”¨ç±»å‹çš„æ•°æ® (ä¾‹å¦‚ï¼š arrays, functions, objects, regexes, new Number(0),ä»¥åŠ new String(â€˜â€™))"></a>åˆ¤æ–­æ•°æ®æ˜¯ä¸æ˜¯å¼•ç”¨ç±»å‹çš„æ•°æ® (ä¾‹å¦‚ï¼š arrays, functions, objects, regexes, new Number(0),ä»¥åŠ new String(â€˜â€™))</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObject</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> type = <span class="keyword">typeof</span> value;</span><br><span class="line">      <span class="keyword">return</span> value != <span class="literal">null</span> &amp;&amp; (type == <span class="string">'object'</span> || type == <span class="string">'function'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ£€æŸ¥-value-æ˜¯å¦æ˜¯-ç±»å¯¹è±¡ã€‚-å¦‚æœä¸€ä¸ªå€¼æ˜¯ç±»å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä¸åº”è¯¥æ˜¯-nullï¼Œè€Œä¸”-typeof-åçš„ç»“æœæ˜¯-â€œobjectâ€"><a href="#æ£€æŸ¥-value-æ˜¯å¦æ˜¯-ç±»å¯¹è±¡ã€‚-å¦‚æœä¸€ä¸ªå€¼æ˜¯ç±»å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä¸åº”è¯¥æ˜¯-nullï¼Œè€Œä¸”-typeof-åçš„ç»“æœæ˜¯-â€œobjectâ€" class="headerlink" title="æ£€æŸ¥ value æ˜¯å¦æ˜¯ ç±»å¯¹è±¡ã€‚ å¦‚æœä¸€ä¸ªå€¼æ˜¯ç±»å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä¸åº”è¯¥æ˜¯ nullï¼Œè€Œä¸” typeof åçš„ç»“æœæ˜¯ â€œobjectâ€"></a>æ£€æŸ¥ value æ˜¯å¦æ˜¯ ç±»å¯¹è±¡ã€‚ å¦‚æœä¸€ä¸ªå€¼æ˜¯ç±»å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä¸åº”è¯¥æ˜¯ nullï¼Œè€Œä¸” typeof åçš„ç»“æœæ˜¯ â€œobjectâ€</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObjectLike</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> value != <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> value == <span class="string">'object'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–æ•°æ®ç±»å‹ï¼Œè¿”å›ç»“æœä¸º-Numberã€Stringã€Objectã€Arrayç­‰"><a href="#è·å–æ•°æ®ç±»å‹ï¼Œè¿”å›ç»“æœä¸º-Numberã€Stringã€Objectã€Arrayç­‰" class="headerlink" title="è·å–æ•°æ®ç±»å‹ï¼Œè¿”å›ç»“æœä¸º Numberã€Stringã€Objectã€Arrayç­‰"></a>è·å–æ•°æ®ç±»å‹ï¼Œè¿”å›ç»“æœä¸º Numberã€Stringã€Objectã€Arrayç­‰</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRawType</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(value).slice(<span class="number">8</span>, <span class="number">-1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//getoRawType([]) ==&gt; Array</span></span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­æ•°æ®æ˜¯ä¸æ˜¯Objectç±»å‹çš„æ•°æ®"><a href="#åˆ¤æ–­æ•°æ®æ˜¯ä¸æ˜¯Objectç±»å‹çš„æ•°æ®" class="headerlink" title="åˆ¤æ–­æ•°æ®æ˜¯ä¸æ˜¯Objectç±»å‹çš„æ•°æ®"></a>åˆ¤æ–­æ•°æ®æ˜¯ä¸æ˜¯Objectç±»å‹çš„æ•°æ®</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPlainObject</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">'[object Object]'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­-value-æ˜¯ä¸æ˜¯æµè§ˆå™¨å†…ç½®å‡½æ•°"><a href="#åˆ¤æ–­-value-æ˜¯ä¸æ˜¯æµè§ˆå™¨å†…ç½®å‡½æ•°" class="headerlink" title="åˆ¤æ–­ value æ˜¯ä¸æ˜¯æµè§ˆå™¨å†…ç½®å‡½æ•°"></a>åˆ¤æ–­ value æ˜¯ä¸æ˜¯æµè§ˆå™¨å†…ç½®å‡½æ•°</h1><p>å†…ç½®å‡½æ•°toStringåçš„ä¸»ä½“ä»£ç å—ä¸º [native code] ï¼Œè€Œéå†…ç½®å‡½æ•°åˆ™ä¸ºç›¸å…³ä»£ç ï¼Œæ‰€ä»¥éå†…ç½®å‡½æ•°å¯ä»¥è¿›è¡Œæ‹·è´(toStringåæå¤´å»å°¾å†ç”±Functionè½¬)</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isNative</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> value === <span class="string">'function'</span> &amp;&amp; <span class="regexp">/native code/</span>.test(value.toString())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ£€æŸ¥-value-æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ç±»æ•°ç»„é•¿åº¦"><a href="#æ£€æŸ¥-value-æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ç±»æ•°ç»„é•¿åº¦" class="headerlink" title="æ£€æŸ¥ value æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ç±»æ•°ç»„é•¿åº¦"></a>æ£€æŸ¥ value æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ç±»æ•°ç»„é•¿åº¦</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isLength</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">typeof</span> value == <span class="string">'number'</span> &amp;&amp; value &gt; <span class="number">-1</span> &amp;&amp; value % <span class="number">1</span> == <span class="number">0</span> &amp;&amp; value &lt;= <span class="built_in">Number</span>.MAX_SAFE_INTEGER;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ£€æŸ¥-value-æ˜¯å¦æ˜¯ç±»æ•°ç»„"><a href="#æ£€æŸ¥-value-æ˜¯å¦æ˜¯ç±»æ•°ç»„" class="headerlink" title="æ£€æŸ¥ value æ˜¯å¦æ˜¯ç±»æ•°ç»„"></a>æ£€æŸ¥ value æ˜¯å¦æ˜¯ç±»æ•°ç»„</h1><p>å¦‚æœä¸€ä¸ªå€¼è¢«è®¤ä¸ºæ˜¯ç±»æ•°ç»„ï¼Œé‚£ä¹ˆå®ƒä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”value.lengthæ˜¯ä¸ªæ•´æ•°ï¼Œå¤§äºç­‰äº 0ï¼Œå°äºæˆ–ç­‰äº Number.MAX_SAFE_INTEGERã€‚è¿™é‡Œå­—ç¬¦ä¸²ä¹Ÿå°†è¢«å½“ä½œç±»æ•°ç»„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArrayLike</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> value != <span class="literal">null</span> &amp;&amp; isLength(value.length) &amp;&amp; !isFunction(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ£€æŸ¥-value-æ˜¯å¦ä¸ºç©º"><a href="#æ£€æŸ¥-value-æ˜¯å¦ä¸ºç©º" class="headerlink" title="æ£€æŸ¥ value æ˜¯å¦ä¸ºç©º"></a>æ£€æŸ¥ value æ˜¯å¦ä¸ºç©º</h1><p>å¦‚æœæ˜¯nullï¼Œç›´æ¥è¿”å›trueï¼›å¦‚æœæ˜¯ç±»æ•°ç»„ï¼Œåˆ¤æ–­æ•°æ®é•¿åº¦ï¼›å¦‚æœæ˜¯Objectå¯¹è±¡ï¼Œåˆ¤æ–­æ˜¯å¦å…·æœ‰å±æ€§ï¼›å¦‚æœæ˜¯å…¶ä»–æ•°æ®ï¼Œç›´æ¥è¿”å›false(ä¹Ÿå¯æ”¹ä¸ºè¿”å›true)</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isEmpty</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (value == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (isArrayLike(value)) &#123;</span><br><span class="line">        <span class="keyword">return</span> !value.length;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(isPlainObject(value))&#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> value) &#123;</span><br><span class="line">            <span class="keyword">if</span> (hasOwnProperty.call(value, key)) &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è®°å¿†å‡½æ•°ï¼šç¼“å­˜å‡½æ•°çš„è¿ç®—ç»“æœ"><a href="#è®°å¿†å‡½æ•°ï¼šç¼“å­˜å‡½æ•°çš„è¿ç®—ç»“æœ" class="headerlink" title="è®°å¿†å‡½æ•°ï¼šç¼“å­˜å‡½æ•°çš„è¿ç®—ç»“æœ"></a>è®°å¿†å‡½æ•°ï¼šç¼“å­˜å‡½æ•°çš„è¿ç®—ç»“æœ</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cached</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> cache = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">cachedFn</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> hit = cache[str];</span><br><span class="line">        <span class="keyword">return</span> hit || (cache[str] = fn(str))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ¨ªçº¿è½¬é©¼å³°å‘½å"><a href="#æ¨ªçº¿è½¬é©¼å³°å‘½å" class="headerlink" title="æ¨ªçº¿è½¬é©¼å³°å‘½å"></a>æ¨ªçº¿è½¬é©¼å³°å‘½å</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> camelizeRE = <span class="regexp">/-(\w)/g</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">camelize</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str.replace(camelizeRE, <span class="function"><span class="keyword">function</span>(<span class="params">_, c</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> c ? c.toUpperCase() : <span class="string">''</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ab-cd-ef ==&gt; abCdEf</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨è®°å¿†å‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> _camelize = cached(camelize)</span><br></pre></td></tr></table></figure>
<h1 id="é©¼å³°å‘½åè½¬æ¨ªçº¿å‘½åï¼šæ‹†åˆ†å­—ç¬¦ä¸²ï¼Œä½¿ç”¨-ç›¸è¿ï¼Œå¹¶ä¸”è½¬æ¢ä¸ºå°å†™"><a href="#é©¼å³°å‘½åè½¬æ¨ªçº¿å‘½åï¼šæ‹†åˆ†å­—ç¬¦ä¸²ï¼Œä½¿ç”¨-ç›¸è¿ï¼Œå¹¶ä¸”è½¬æ¢ä¸ºå°å†™" class="headerlink" title="é©¼å³°å‘½åè½¬æ¨ªçº¿å‘½åï¼šæ‹†åˆ†å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ - ç›¸è¿ï¼Œå¹¶ä¸”è½¬æ¢ä¸ºå°å†™"></a>é©¼å³°å‘½åè½¬æ¨ªçº¿å‘½åï¼šæ‹†åˆ†å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ - ç›¸è¿ï¼Œå¹¶ä¸”è½¬æ¢ä¸ºå°å†™</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> hyphenateRE = <span class="regexp">/\B([A-Z])/g</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hyphenate</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str.replace(hyphenateRE, <span class="string">'-$1'</span>).toLowerCase()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//abCd ==&gt; ab-cd</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨è®°å¿†å‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> _hyphenate = cached(hyphenate);</span><br></pre></td></tr></table></figure>
<h1 id="å­—ç¬¦ä¸²é¦–ä½å¤§å†™"><a href="#å­—ç¬¦ä¸²é¦–ä½å¤§å†™" class="headerlink" title="å­—ç¬¦ä¸²é¦–ä½å¤§å†™"></a>å­—ç¬¦ä¸²é¦–ä½å¤§å†™</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">capitalize</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str.charAt(<span class="number">0</span>).toUpperCase() + str.slice(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// abc ==&gt; Abc</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨è®°å¿†å‡½æ•°</span></span><br><span class="line"><span class="keyword">let</span> _capitalize = cached(capitalize)</span><br></pre></td></tr></table></figure>
<h1 id="å°†å±æ€§æ··åˆåˆ°ç›®æ ‡å¯¹è±¡ä¸­"><a href="#å°†å±æ€§æ··åˆåˆ°ç›®æ ‡å¯¹è±¡ä¸­" class="headerlink" title="å°†å±æ€§æ··åˆåˆ°ç›®æ ‡å¯¹è±¡ä¸­"></a>å°†å±æ€§æ··åˆåˆ°ç›®æ ‡å¯¹è±¡ä¸­</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">to, _from</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> _from) &#123;</span><br><span class="line">        to[key] = _from[key];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> to</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¯¹è±¡å±æ€§å¤åˆ¶ï¼Œæµ…æ‹·è´"><a href="#å¯¹è±¡å±æ€§å¤åˆ¶ï¼Œæµ…æ‹·è´" class="headerlink" title="å¯¹è±¡å±æ€§å¤åˆ¶ï¼Œæµ…æ‹·è´"></a>å¯¹è±¡å±æ€§å¤åˆ¶ï¼Œæµ…æ‹·è´</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign = <span class="built_in">Object</span>.assign || <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">arguments</span>.length == <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Cannot convert undefined or null to object'</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> target = <span class="built_in">arguments</span>[<span class="number">0</span>],</span><br><span class="line">        args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>),</span><br><span class="line">        key</span><br><span class="line">    args.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(key <span class="keyword">in</span> item)&#123;</span><br><span class="line">            item.hasOwnProperty(key) &amp;&amp; ( target[key] = item[key] )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>Object.assign</code>å¯ä»¥æµ…å…‹éš†ä¸€ä¸ªå¯¹è±¡ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> clone = <span class="built_in">Object</span>.assign(&#123;&#125;, target)</span><br></pre></td></tr></table></figure>
<p>ç®€å•çš„æ·±å…‹éš†å¯ä»¥ä½¿ç”¨<code>JSON.parse()</code>å’Œ<code>JSON.stringify()</code>ï¼Œè¿™ä¸¤ä¸ªapiæ˜¯è§£æjsonæ•°æ®çš„ï¼Œæ‰€ä»¥åªèƒ½è§£æé™¤symbolå¤–çš„åŸå§‹ç±»å‹åŠæ•°ç»„å’Œå¯¹è±¡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> clone = <span class="built_in">JSON</span>.parse( <span class="built_in">JSON</span>.stringify(target) )</span><br></pre></td></tr></table></figure>
<h1 id="å…‹éš†æ•°æ®ï¼Œå¯æ·±åº¦å…‹éš†"><a href="#å…‹éš†æ•°æ®ï¼Œå¯æ·±åº¦å…‹éš†" class="headerlink" title="å…‹éš†æ•°æ®ï¼Œå¯æ·±åº¦å…‹éš†"></a>å…‹éš†æ•°æ®ï¼Œå¯æ·±åº¦å…‹éš†</h1><p>è¿™é‡Œåˆ—å‡ºäº†åŸå§‹ç±»å‹ï¼Œæ—¶é—´ã€æ­£åˆ™ã€é”™è¯¯ã€æ•°ç»„ã€å¯¹è±¡çš„å…‹éš†è§„åˆ™ï¼Œå…¶ä»–çš„å¯è‡ªè¡Œè¡¥å……</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">value, deep</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(isPrimitive(value))&#123;</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (isArrayLike(value)) &#123; <span class="comment">//æ˜¯ç±»æ•°ç»„</span></span><br><span class="line">        value = <span class="built_in">Array</span>.prototype.slice.call(value)</span><br><span class="line">        <span class="keyword">return</span> value.map(<span class="function"><span class="params">item</span> =&gt;</span> deep ? clone(item, deep) : item)</span><br><span class="line">       &#125;<span class="keyword">else</span> <span class="keyword">if</span>(isPlainObject(value))&#123; <span class="comment">//æ˜¯å¯¹è±¡</span></span><br><span class="line">           <span class="keyword">let</span> target = &#123;&#125;, key;</span><br><span class="line">          <span class="keyword">for</span> (key <span class="keyword">in</span> value) &#123;</span><br><span class="line">            value.hasOwnProperty(key) &amp;&amp; ( target[key] = deep ? clone(value[key], deep) : value[key] )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> type = getRawType(value)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">switch</span>(type)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'Date'</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'RegExp'</span>: </span><br><span class="line">        <span class="keyword">case</span> <span class="string">'Error'</span>: value = <span class="keyword">new</span> <span class="built_in">window</span>[type](value); <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è¯†åˆ«å„ç§æµè§ˆå™¨åŠå¹³å°"><a href="#è¯†åˆ«å„ç§æµè§ˆå™¨åŠå¹³å°" class="headerlink" title="è¯†åˆ«å„ç§æµè§ˆå™¨åŠå¹³å°"></a>è¯†åˆ«å„ç§æµè§ˆå™¨åŠå¹³å°</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿è¡Œç¯å¢ƒæ˜¯æµè§ˆå™¨</span></span><br><span class="line"><span class="keyword">let</span> inBrowser = <span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">'undefined'</span>;</span><br><span class="line"><span class="comment">//è¿è¡Œç¯å¢ƒæ˜¯å¾®ä¿¡</span></span><br><span class="line"><span class="keyword">let</span> inWeex = <span class="keyword">typeof</span> WXEnvironment !== <span class="string">'undefined'</span> &amp;&amp; !!WXEnvironment.platform;</span><br><span class="line"><span class="keyword">let</span> weexPlatform = inWeex &amp;&amp; WXEnvironment.platform.toLowerCase();</span><br><span class="line"><span class="comment">//æµè§ˆå™¨ UA åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">let</span> UA = inBrowser &amp;&amp; <span class="built_in">window</span>.navigator.userAgent.toLowerCase();</span><br><span class="line"><span class="keyword">let</span> isIE = UA &amp;&amp; <span class="regexp">/msie|trident/</span>.test(UA);</span><br><span class="line"><span class="keyword">let</span> isIE9 = UA &amp;&amp; UA.indexOf(<span class="string">'msie 9.0'</span>) &gt; <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> isEdge = UA &amp;&amp; UA.indexOf(<span class="string">'edge/'</span>) &gt; <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> isAndroid = (UA &amp;&amp; UA.indexOf(<span class="string">'android'</span>) &gt; <span class="number">0</span>) || (weexPlatform === <span class="string">'android'</span>);</span><br><span class="line"><span class="keyword">let</span> isIOS = (UA &amp;&amp; <span class="regexp">/iphone|ipad|ipod|ios/</span>.test(UA)) || (weexPlatform === <span class="string">'ios'</span>);</span><br><span class="line"><span class="keyword">let</span> isChrome = UA &amp;&amp; <span class="regexp">/chrome\/\d+/</span>.test(UA) &amp;&amp; !isEdge;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–æµè§ˆå™¨ä¿¡æ¯"><a href="#è·å–æµè§ˆå™¨ä¿¡æ¯" class="headerlink" title="è·å–æµè§ˆå™¨ä¿¡æ¯"></a>è·å–æµè§ˆå™¨ä¿¡æ¯</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getExplorerInfo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> t = navigator.userAgent.toLowerCase();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> &lt;= t.indexOf(<span class="string">"msie"</span>) ? &#123; <span class="comment">//ie &lt; 11</span></span><br><span class="line">        type: <span class="string">"IE"</span>,</span><br><span class="line">        version: <span class="built_in">Number</span>(t.match(<span class="regexp">/msie ([\d]+)/</span>)[<span class="number">1</span>])</span><br><span class="line">    &#125; : !!t.match(<span class="regexp">/trident\/.+?rv:(([\d.]+))/</span>) ? &#123; <span class="comment">// ie 11</span></span><br><span class="line">        type: <span class="string">"IE"</span>,</span><br><span class="line">        version: <span class="number">11</span></span><br><span class="line">    &#125; : <span class="number">0</span> &lt;= t.indexOf(<span class="string">"edge"</span>) ? &#123;</span><br><span class="line">        type: <span class="string">"Edge"</span>,</span><br><span class="line">        version: <span class="built_in">Number</span>(t.match(<span class="regexp">/edge\/([\d]+)/</span>)[<span class="number">1</span>])</span><br><span class="line">    &#125; : <span class="number">0</span> &lt;= t.indexOf(<span class="string">"firefox"</span>) ? &#123;</span><br><span class="line">        type: <span class="string">"Firefox"</span>,</span><br><span class="line">        version: <span class="built_in">Number</span>(t.match(<span class="regexp">/firefox\/([\d]+)/</span>)[<span class="number">1</span>])</span><br><span class="line">    &#125; : <span class="number">0</span> &lt;= t.indexOf(<span class="string">"chrome"</span>) ? &#123;</span><br><span class="line">        type: <span class="string">"Chrome"</span>,</span><br><span class="line">        version: <span class="built_in">Number</span>(t.match(<span class="regexp">/chrome\/([\d]+)/</span>)[<span class="number">1</span>])</span><br><span class="line">    &#125; : <span class="number">0</span> &lt;= t.indexOf(<span class="string">"opera"</span>) ? &#123;</span><br><span class="line">        type: <span class="string">"Opera"</span>,</span><br><span class="line">        version: <span class="built_in">Number</span>(t.match(<span class="regexp">/opera.([\d]+)/</span>)[<span class="number">1</span>])</span><br><span class="line">    &#125; : <span class="number">0</span> &lt;= t.indexOf(<span class="string">"Safari"</span>) ? &#123;</span><br><span class="line">        type: <span class="string">"Safari"</span>,</span><br><span class="line">        version: <span class="built_in">Number</span>(t.match(<span class="regexp">/version\/([\d]+)/</span>)[<span class="number">1</span>])</span><br><span class="line">    &#125; : &#123;</span><br><span class="line">        type: t,</span><br><span class="line">        version: <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ£€æµ‹æ˜¯å¦ä¸ºPCç«¯æµè§ˆå™¨æ¨¡å¼"><a href="#æ£€æµ‹æ˜¯å¦ä¸ºPCç«¯æµè§ˆå™¨æ¨¡å¼" class="headerlink" title="æ£€æµ‹æ˜¯å¦ä¸ºPCç«¯æµè§ˆå™¨æ¨¡å¼"></a>æ£€æµ‹æ˜¯å¦ä¸ºPCç«¯æµè§ˆå™¨æ¨¡å¼</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPCBroswer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> e = navigator.userAgent.toLowerCase()</span><br><span class="line">        , t = <span class="string">"ipad"</span> == e.match(<span class="regexp">/ipad/i</span>)</span><br><span class="line">        , i = <span class="string">"iphone"</span> == e.match(<span class="regexp">/iphone/i</span>)</span><br><span class="line">        , r = <span class="string">"midp"</span> == e.match(<span class="regexp">/midp/i</span>)</span><br><span class="line">        , n = <span class="string">"rv:1.2.3.4"</span> == e.match(<span class="regexp">/rv:1.2.3.4/i</span>)</span><br><span class="line">        , a = <span class="string">"ucweb"</span> == e.match(<span class="regexp">/ucweb/i</span>)</span><br><span class="line">        , o = <span class="string">"android"</span> == e.match(<span class="regexp">/android/i</span>)</span><br><span class="line">        , s = <span class="string">"windows ce"</span> == e.match(<span class="regexp">/windows ce/i</span>)</span><br><span class="line">        , l = <span class="string">"windows mobile"</span> == e.match(<span class="regexp">/windows mobile/i</span>);</span><br><span class="line">    <span class="keyword">return</span> !(t || i || r || n || a || o || s || l)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ•°ç»„å»é‡ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„"><a href="#æ•°ç»„å»é‡ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„" class="headerlink" title="æ•°ç»„å»é‡ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„"></a>æ•°ç»„å»é‡ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!isArrayLink(arr))&#123; <span class="comment">//ä¸æ˜¯ç±»æ•°ç»„å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> arr</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> result = []</span><br><span class="line">    <span class="keyword">let</span> objarr = []</span><br><span class="line">    <span class="keyword">let</span> obj = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</span><br><span class="line">    </span><br><span class="line">    arr.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(isStatic(item))&#123;<span class="comment">//æ˜¯é™¤äº†symbolå¤–çš„åŸå§‹æ•°æ®</span></span><br><span class="line">            <span class="keyword">let</span> key = item + <span class="string">'_'</span> + getRawType(item);</span><br><span class="line">            <span class="keyword">if</span>(!obj[key])&#123;</span><br><span class="line">                obj[key] = <span class="literal">true</span></span><br><span class="line">                result.push(item)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">//å¼•ç”¨ç±»å‹åŠsymbol</span></span><br><span class="line">            <span class="keyword">if</span>(!objarr.includes(item))&#123;</span><br><span class="line">                objarr.push(item)</span><br><span class="line">                result.push(item)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> resulte</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç”Ÿæˆä¸€ä¸ªé‡å¤çš„å­—ç¬¦ä¸²ï¼Œæœ‰nä¸ªstrç»„æˆï¼Œå¯ä¿®æ”¹ä¸ºå¡«å……ä¸ºæ•°ç»„ç­‰"><a href="#ç”Ÿæˆä¸€ä¸ªé‡å¤çš„å­—ç¬¦ä¸²ï¼Œæœ‰nä¸ªstrç»„æˆï¼Œå¯ä¿®æ”¹ä¸ºå¡«å……ä¸ºæ•°ç»„ç­‰" class="headerlink" title="ç”Ÿæˆä¸€ä¸ªé‡å¤çš„å­—ç¬¦ä¸²ï¼Œæœ‰nä¸ªstrç»„æˆï¼Œå¯ä¿®æ”¹ä¸ºå¡«å……ä¸ºæ•°ç»„ç­‰"></a>ç”Ÿæˆä¸€ä¸ªé‡å¤çš„å­—ç¬¦ä¸²ï¼Œæœ‰nä¸ªstrç»„æˆï¼Œå¯ä¿®æ”¹ä¸ºå¡«å……ä¸ºæ•°ç»„ç­‰</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">repeat</span>(<span class="params">str, n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">while</span>(n) &#123;</span><br><span class="line">        <span class="keyword">if</span>(n % <span class="number">2</span> === <span class="number">1</span>) &#123;</span><br><span class="line">            res += str;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(n &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            str += str;</span><br><span class="line">        &#125;</span><br><span class="line">        n &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//repeat('123',3) ==&gt; 123123123</span></span><br></pre></td></tr></table></figure>
<h1 id="æ ¼å¼åŒ–æ—¶é—´"><a href="#æ ¼å¼åŒ–æ—¶é—´" class="headerlink" title="æ ¼å¼åŒ–æ—¶é—´"></a>æ ¼å¼åŒ–æ—¶é—´</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dateFormater</span>(<span class="params">formater, t</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> date = t ? <span class="keyword">new</span> <span class="built_in">Date</span>(t) : <span class="keyword">new</span> <span class="built_in">Date</span>(),</span><br><span class="line">        Y = date.getFullYear() + <span class="string">''</span>,</span><br><span class="line">        M = date.getMonth() + <span class="number">1</span>,</span><br><span class="line">        D = date.getDate(),</span><br><span class="line">        H = date.getHours(),</span><br><span class="line">        m = date.getMinutes(),</span><br><span class="line">        s = date.getSeconds();</span><br><span class="line">    <span class="keyword">return</span> formater.replace(<span class="regexp">/YYYY|yyyy/g</span>,Y)</span><br><span class="line">        .replace(<span class="regexp">/YY|yy/g</span>,Y.substr(<span class="number">2</span>,<span class="number">2</span>))</span><br><span class="line">        .replace(<span class="regexp">/MM/g</span>,(M&lt;<span class="number">10</span>?<span class="string">'0'</span>:<span class="string">''</span>) + M)</span><br><span class="line">        .replace(<span class="regexp">/DD/g</span>,(D&lt;<span class="number">10</span>?<span class="string">'0'</span>:<span class="string">''</span>) + D)</span><br><span class="line">        .replace(<span class="regexp">/HH|hh/g</span>,(H&lt;<span class="number">10</span>?<span class="string">'0'</span>:<span class="string">''</span>) + H)</span><br><span class="line">        .replace(<span class="regexp">/mm/g</span>,(m&lt;<span class="number">10</span>?<span class="string">'0'</span>:<span class="string">''</span>) + m)</span><br><span class="line">        .replace(<span class="regexp">/ss/g</span>,(s&lt;<span class="number">10</span>?<span class="string">'0'</span>:<span class="string">''</span>) + s)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// dateFormater('YYYY-MM-DD HH:mm', t) ==&gt; 2019-06-26 18:30</span></span><br><span class="line"><span class="comment">// dateFormater('YYYYMMDDHHmm', t) ==&gt; 201906261830</span></span><br></pre></td></tr></table></figure>
<h1 id="dateStrFormaï¼šå°†æŒ‡å®šå­—ç¬¦ä¸²ç”±ä¸€ç§æ—¶é—´æ ¼å¼è½¬åŒ–ä¸ºå¦ä¸€ç§"><a href="#dateStrFormaï¼šå°†æŒ‡å®šå­—ç¬¦ä¸²ç”±ä¸€ç§æ—¶é—´æ ¼å¼è½¬åŒ–ä¸ºå¦ä¸€ç§" class="headerlink" title="dateStrFormaï¼šå°†æŒ‡å®šå­—ç¬¦ä¸²ç”±ä¸€ç§æ—¶é—´æ ¼å¼è½¬åŒ–ä¸ºå¦ä¸€ç§"></a>dateStrFormaï¼šå°†æŒ‡å®šå­—ç¬¦ä¸²ç”±ä¸€ç§æ—¶é—´æ ¼å¼è½¬åŒ–ä¸ºå¦ä¸€ç§</h1><p>fromçš„æ ¼å¼åº”å¯¹åº”strçš„ä½ç½®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dateStrForma</span>(<span class="params">str, from, to</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//'20190626' 'YYYYMMDD' 'YYYYå¹´MMæœˆDDæ—¥'</span></span><br><span class="line">    str += <span class="string">''</span></span><br><span class="line">    <span class="keyword">let</span> Y = <span class="string">''</span></span><br><span class="line">    <span class="keyword">if</span>(~(Y = <span class="keyword">from</span>.indexOf(<span class="string">'YYYY'</span>)))&#123;</span><br><span class="line">        Y = str.substr(Y, <span class="number">4</span>)</span><br><span class="line">        to = to.replace(<span class="regexp">/YYYY|yyyy/g</span>,Y)</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(~(Y = <span class="keyword">from</span>.indexOf(<span class="string">'YY'</span>)))&#123;</span><br><span class="line">        Y = str.substr(Y, <span class="number">2</span>)</span><br><span class="line">        to = to.replace(<span class="regexp">/YY|yy/g</span>,Y)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> k,i</span><br><span class="line">    [<span class="string">'M'</span>,<span class="string">'D'</span>,<span class="string">'H'</span>,<span class="string">'h'</span>,<span class="string">'m'</span>,<span class="string">'s'</span>].forEach(<span class="function"><span class="params">s</span> =&gt;</span>&#123;</span><br><span class="line">        i = <span class="keyword">from</span>.indexOf(s+s)</span><br><span class="line">        k = ~i ? str.substr(i, <span class="number">2</span>) : <span class="string">''</span></span><br><span class="line">        to = to.replace(s+s, k)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> to</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// dateStrForma('20190626', 'YYYYMMDD', 'YYYYå¹´MMæœˆDDæ—¥') ==&gt; 2019å¹´06æœˆ26æ—¥</span></span><br><span class="line"><span class="comment">// dateStrForma('121220190626', '----YYYYMMDD', 'YYYYå¹´MMæœˆDDæ—¥') ==&gt; 2019å¹´06æœˆ26æ—¥</span></span><br><span class="line"><span class="comment">// dateStrForma('2019å¹´06æœˆ26æ—¥', 'YYYYå¹´MMæœˆDDæ—¥', 'YYYYMMDD') ==&gt; 20190626</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€èˆ¬çš„ä¹Ÿå¯ä»¥ä½¿ç”¨æ­£åˆ™æ¥å®ç°</span></span><br><span class="line"><span class="comment">//'2019å¹´06æœˆ26æ—¥'.replace(/(\d&#123;4&#125;)å¹´(\d&#123;2&#125;)æœˆ(\d&#123;2&#125;)æ—¥/, '$1-$2-$3') ==&gt; 2019-06-26</span></span><br></pre></td></tr></table></figure>
<h1 id="æ ¹æ®å­—ç¬¦ä¸²è·¯å¾„è·å–å¯¹è±¡å±æ€§-â€˜obj-0-countâ€™"><a href="#æ ¹æ®å­—ç¬¦ä¸²è·¯å¾„è·å–å¯¹è±¡å±æ€§-â€˜obj-0-countâ€™" class="headerlink" title="æ ¹æ®å­—ç¬¦ä¸²è·¯å¾„è·å–å¯¹è±¡å±æ€§ : â€˜obj[0].countâ€™"></a>æ ¹æ®å­—ç¬¦ä¸²è·¯å¾„è·å–å¯¹è±¡å±æ€§ : â€˜obj[0].countâ€™</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPropByPath</span>(<span class="params">obj, path, strict</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> tempObj = obj;</span><br><span class="line">      path = path.replace(<span class="regexp">/\[(\w+)\]/g</span>, <span class="string">'.$1'</span>); <span class="comment">//å°†[0]è½¬åŒ–ä¸º.0</span></span><br><span class="line">      path = path.replace(<span class="regexp">/^\./</span>, <span class="string">''</span>); <span class="comment">//å»é™¤å¼€å¤´çš„.</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> keyArr = path.split(<span class="string">'.'</span>); <span class="comment">//æ ¹æ®.åˆ‡å‰²</span></span><br><span class="line">      <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> len = keyArr.length; i &lt; len - <span class="number">1</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!tempObj &amp;&amp; !strict) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">let</span> key = keyArr[i];</span><br><span class="line">        <span class="keyword">if</span> (key <span class="keyword">in</span> tempObj) &#123;</span><br><span class="line">            tempObj = tempObj[key];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (strict) &#123;<span class="comment">//å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ²¡æ‰¾åˆ°å¯¹åº”keyå€¼ï¼ŒæŠ›å‡ºé”™è¯¯</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'please transfer a valid prop path to form item!'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        o: tempObj, <span class="comment">//åŸå§‹æ•°æ®</span></span><br><span class="line">        k: keyArr[i], <span class="comment">//keyå€¼</span></span><br><span class="line">        v: tempObj ? tempObj[keyArr[i]] : <span class="literal">null</span> <span class="comment">// keyå€¼å¯¹åº”çš„å€¼</span></span><br><span class="line">      &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–Urlå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡"><a href="#è·å–Urlå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡" class="headerlink" title="è·å–Urlå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡"></a>è·å–Urlå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GetUrlParam</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> url = <span class="built_in">document</span>.location.toString();</span><br><span class="line">    <span class="keyword">let</span> arrObj = url.split(<span class="string">"?"</span>);</span><br><span class="line">    <span class="keyword">let</span> params = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">if</span> (arrObj.length &gt; <span class="number">1</span>)&#123;</span><br><span class="line">        arrObj = arrObj[<span class="number">1</span>].split(<span class="string">"&amp;"</span>);</span><br><span class="line">        arrObj.forEach(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">            item = item.split(<span class="string">"="</span>);</span><br><span class="line">            params[item[<span class="number">0</span>]] = item[<span class="number">1</span>]</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> params;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ?a=1&amp;b=2&amp;c=3 ==&gt; &#123;a: "1", b: "2", c: "3"&#125;</span></span><br></pre></td></tr></table></figure>
<h1 id="base64æ•°æ®å¯¼å‡ºæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸‹è½½"><a href="#base64æ•°æ®å¯¼å‡ºæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸‹è½½" class="headerlink" title="base64æ•°æ®å¯¼å‡ºæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸‹è½½"></a>base64æ•°æ®å¯¼å‡ºæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸‹è½½</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">downloadFile</span>(<span class="params">filename, data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> DownloadLink = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ( DownloadLink )&#123;</span><br><span class="line">        <span class="built_in">document</span>.body.appendChild(DownloadLink);</span><br><span class="line">        DownloadLink.style = <span class="string">'display: none'</span>;</span><br><span class="line">        DownloadLink.download = filename;</span><br><span class="line">        DownloadLink.href = data;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ( <span class="built_in">document</span>.createEvent )&#123;</span><br><span class="line">            <span class="keyword">let</span> DownloadEvt = <span class="built_in">document</span>.createEvent(<span class="string">'MouseEvents'</span>);</span><br><span class="line"></span><br><span class="line">            DownloadEvt.initEvent(<span class="string">'click'</span>, <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">            DownloadLink.dispatchEvent(DownloadEvt);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ( <span class="built_in">document</span>.createEventObject )</span><br><span class="line">            DownloadLink.fireEvent(<span class="string">'onclick'</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> DownloadLink.onclick == <span class="string">'function'</span> )</span><br><span class="line">            DownloadLink.onclick();</span><br><span class="line"></span><br><span class="line">        <span class="built_in">document</span>.body.removeChild(DownloadLink);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…¨å±"><a href="#å…¨å±" class="headerlink" title="å…¨å±"></a>å…¨å±</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toFullScreen</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> elem = <span class="built_in">document</span>.body;</span><br><span class="line">    elem.webkitRequestFullScreen</span><br><span class="line">    ? elem.webkitRequestFullScreen()</span><br><span class="line">    : elem.mozRequestFullScreen</span><br><span class="line">    ? elem.mozRequestFullScreen()</span><br><span class="line">    : elem.msRequestFullscreen</span><br><span class="line">    ? elem.msRequestFullscreen()</span><br><span class="line">    : elem.requestFullScreen</span><br><span class="line">    ? elem.requestFullScreen()</span><br><span class="line">    : alert(<span class="string">"æµè§ˆå™¨ä¸æ”¯æŒå…¨å±"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é€€å‡ºå…¨å±"><a href="#é€€å‡ºå…¨å±" class="headerlink" title="é€€å‡ºå…¨å±"></a>é€€å‡ºå…¨å±</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exitFullscreen</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> elem = parent.document;</span><br><span class="line">    elem.webkitCancelFullScreen</span><br><span class="line">    ? elem.webkitCancelFullScreen()</span><br><span class="line">    : elem.mozCancelFullScreen</span><br><span class="line">    ? elem.mozCancelFullScreen()</span><br><span class="line">    : elem.cancelFullScreen</span><br><span class="line">    ? elem.cancelFullScreen()</span><br><span class="line">    : elem.msExitFullscreen</span><br><span class="line">    ? elem.msExitFullscreen()</span><br><span class="line">    : elem.exitFullscreen</span><br><span class="line">    ? elem.exitFullscreen()</span><br><span class="line">    : alert(<span class="string">"åˆ‡æ¢å¤±è´¥,å¯å°è¯•Escé€€å‡º"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="windowåŠ¨ç”»"><a href="#windowåŠ¨ç”»" class="headerlink" title="windowåŠ¨ç”»"></a>windowåŠ¨ç”»</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.requestAnimationFrame = <span class="built_in">window</span>.requestAnimationFrame ||</span><br><span class="line">    <span class="built_in">window</span>.webkitRequestAnimationFrame ||</span><br><span class="line">    <span class="built_in">window</span>.mozRequestAnimationFrame ||</span><br><span class="line">    <span class="built_in">window</span>.msRequestAnimationFrame ||</span><br><span class="line">    <span class="built_in">window</span>.oRequestAnimationFrame ||</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//ä¸ºäº†ä½¿setTimteoutçš„å°½å¯èƒ½çš„æ¥è¿‘æ¯ç§’60å¸§çš„æ•ˆæœ</span></span><br><span class="line">        <span class="built_in">window</span>.setTimeout(callback, <span class="number">1000</span> / <span class="number">60</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">window</span>.cancelAnimationFrame = <span class="built_in">window</span>.cancelAnimationFrame ||</span><br><span class="line">    Window.webkitCancelAnimationFrame ||</span><br><span class="line">    <span class="built_in">window</span>.mozCancelAnimationFrame ||</span><br><span class="line">    <span class="built_in">window</span>.msCancelAnimationFrame ||</span><br><span class="line">    <span class="built_in">window</span>.oCancelAnimationFrame ||</span><br><span class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">id</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//ä¸ºäº†ä½¿setTimteoutçš„å°½å¯èƒ½çš„æ¥è¿‘æ¯ç§’60å¸§çš„æ•ˆæœ</span></span><br><span class="line">        <span class="built_in">window</span>.clearTimeout(id);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ£€æŸ¥æ•°æ®æ˜¯å¦æ˜¯éæ•°å­—å€¼"><a href="#æ£€æŸ¥æ•°æ®æ˜¯å¦æ˜¯éæ•°å­—å€¼" class="headerlink" title="æ£€æŸ¥æ•°æ®æ˜¯å¦æ˜¯éæ•°å­—å€¼"></a>æ£€æŸ¥æ•°æ®æ˜¯å¦æ˜¯éæ•°å­—å€¼</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_isNaN</span>(<span class="params">v</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !(<span class="keyword">typeof</span> v === <span class="string">'string'</span> || <span class="keyword">typeof</span> v === <span class="string">'number'</span>) || <span class="built_in">isNaN</span>(v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è¿”å›ä¸€ä¸ªlower-upperä¹‹é—´çš„éšæœºæ•°"><a href="#è¿”å›ä¸€ä¸ªlower-upperä¹‹é—´çš„éšæœºæ•°" class="headerlink" title="è¿”å›ä¸€ä¸ªlower - upperä¹‹é—´çš„éšæœºæ•°"></a>è¿”å›ä¸€ä¸ªlower - upperä¹‹é—´çš„éšæœºæ•°</h1><p>lowerã€upperæ— è®ºæ­£è´Ÿä¸å¤§å°ï¼Œä½†å¿…é¡»æ˜¯éNaNçš„æ•°æ®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">random</span>(<span class="params">lower, upper</span>)</span>&#123;</span><br><span class="line">    lower = +lower || <span class="number">0</span></span><br><span class="line">    upper = +upper || <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.random() * (upper - lower) + lower;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//random(0, 0.5) ==&gt; 0.3567039135734613</span></span><br><span class="line"><span class="comment">//random(2, 1) ===&gt; 1.6718418553475423</span></span><br><span class="line"><span class="comment">//random(-2, -1) ==&gt; -1.4474325452361945</span></span><br></pre></td></tr></table></figure>
<h1 id="åˆ©ç”¨performance-timingè¿›è¡Œæ€§èƒ½åˆ†æ"><a href="#åˆ©ç”¨performance-timingè¿›è¡Œæ€§èƒ½åˆ†æ" class="headerlink" title="åˆ©ç”¨performance.timingè¿›è¡Œæ€§èƒ½åˆ†æ"></a>åˆ©ç”¨performance.timingè¿›è¡Œæ€§èƒ½åˆ†æ</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> t = performance.timing</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'DNSæŸ¥è¯¢è€—æ—¶ ï¼š'</span> + (t.domainLookupEnd - t.domainLookupStart).toFixed(<span class="number">0</span>))</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'TCPé“¾æ¥è€—æ—¶ ï¼š'</span> + (t.connectEnd - t.connectStart).toFixed(<span class="number">0</span>))</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'requestè¯·æ±‚è€—æ—¶ ï¼š'</span> + (t.responseEnd - t.responseStart).toFixed(<span class="number">0</span>))</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'è§£ædomæ ‘è€—æ—¶ ï¼š'</span> + (t.domComplete - t.domInteractive).toFixed(<span class="number">0</span>))</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ç™½å±æ—¶é—´ ï¼š'</span> + (t.responseStart - t.navigationStart).toFixed(<span class="number">0</span>))</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'domreadyæ—¶é—´ ï¼š'</span> + (t.domContentLoadedEventEnd - t.navigationStart).toFixed(<span class="number">0</span>))</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'onloadæ—¶é—´ ï¼š'</span> + (t.loadEventEnd - t.navigationStart).toFixed(<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(t = performance.memory)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'jså†…å­˜ä½¿ç”¨å æ¯” ï¼š'</span> + (t.usedJSHeapSize / t.totalJSHeapSize * <span class="number">100</span>).toFixed(<span class="number">2</span>) + <span class="string">'%'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç¦æ­¢æŸäº›é”®ç›˜äº‹ä»¶"><a href="#ç¦æ­¢æŸäº›é”®ç›˜äº‹ä»¶" class="headerlink" title="ç¦æ­¢æŸäº›é”®ç›˜äº‹ä»¶"></a>ç¦æ­¢æŸäº›é”®ç›˜äº‹ä»¶</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'keydown'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !(</span><br><span class="line">        <span class="number">112</span> == event.keyCode || <span class="comment">//F1</span></span><br><span class="line">        <span class="number">123</span> == event.keyCode || <span class="comment">//F12</span></span><br><span class="line">        event.ctrlKey &amp;&amp; <span class="number">82</span> == event.keyCode || <span class="comment">//ctrl + R</span></span><br><span class="line">        event.ctrlKey &amp;&amp; <span class="number">78</span> == event.keyCode || <span class="comment">//ctrl + N</span></span><br><span class="line">        event.shiftKey &amp;&amp; <span class="number">121</span> == event.keyCode || <span class="comment">//shift + F10</span></span><br><span class="line">        event.altKey &amp;&amp; <span class="number">115</span> == event.keyCode || <span class="comment">//alt + F4</span></span><br><span class="line">        <span class="string">"A"</span> == event.srcElement.tagName &amp;&amp; event.shiftKey <span class="comment">//shift + ç‚¹å‡»aæ ‡ç­¾</span></span><br><span class="line">    ) || (event.returnValue = <span class="literal">false</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="ç¦æ­¢å³é”®ã€é€‰æ‹©ã€å¤åˆ¶"><a href="#ç¦æ­¢å³é”®ã€é€‰æ‹©ã€å¤åˆ¶" class="headerlink" title="ç¦æ­¢å³é”®ã€é€‰æ‹©ã€å¤åˆ¶"></a>ç¦æ­¢å³é”®ã€é€‰æ‹©ã€å¤åˆ¶</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[<span class="string">'contextmenu'</span>, <span class="string">'selectstart'</span>, <span class="string">'copy'</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(ev, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> event.returnValue = <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="æ•°ç»„æ‰å¹³åŒ–"><a href="#æ•°ç»„æ‰å¹³åŒ–" class="headerlink" title="æ•°ç»„æ‰å¹³åŒ–"></a>æ•°ç»„æ‰å¹³åŒ–</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flattenDepth</span>(<span class="params">array, depth = <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">let</span> result = []</span><br><span class="line">   array.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">let</span> d = depth</span><br><span class="line">     <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(item) &amp;&amp; d &gt; <span class="number">0</span>) &#123;</span><br><span class="line">       result.push(...(flattenDepth(item, --d)))</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       result.push(item)</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(flattenDepth([<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>]], <span class="number">5</span>]])) <span class="comment">// [ 1, 2, [ 3, [ 4 ] ], 5 ]</span></span><br><span class="line"><span class="built_in">console</span>.log(flattenDepth([<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>]], <span class="number">5</span>]], <span class="number">2</span>)) <span class="comment">// [ 1, 2, 3, [ 4 ], 5 ]</span></span><br><span class="line"><span class="built_in">console</span>.log(flattenDepth([<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>]], <span class="number">5</span>]], <span class="number">3</span>)) <span class="comment">// [ 1, 2, 3, 4, 5 ]</span></span><br></pre></td></tr></table></figure>
<h1 id="æŸ¯é‡ŒåŒ–"><a href="#æŸ¯é‡ŒåŒ–" class="headerlink" title="æŸ¯é‡ŒåŒ–"></a>æŸ¯é‡ŒåŒ–</h1><p>ä¸€å¥è¯è§£é‡Šå°±æ˜¯<strong>å‚æ•°å¤Ÿäº†å°±æ‰§è¡Œï¼Œå‚æ•°ä¸å¤Ÿå°±è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä¹‹å‰çš„å‚æ•°å­˜èµ·æ¥ï¼Œç›´åˆ°å¤Ÿäº†ä¸ºæ­¢</strong> ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">func</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> l = func.length</span><br><span class="line">   <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">curried</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span> args = [].slice.call(<span class="built_in">arguments</span>)</span><br><span class="line">     <span class="keyword">if</span>(args.length &lt; l) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">         <span class="keyword">var</span> argsInner = [].slice.call(<span class="built_in">arguments</span>)</span><br><span class="line">         <span class="keyword">return</span> curried.apply(<span class="keyword">this</span>, args.concat(argsInner))</span><br><span class="line">       &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> func.apply(<span class="keyword">this</span>, args)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">console</span>.log([a, b, c])</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> curried = curry(f)</span><br><span class="line">curried(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>) <span class="comment">// =&gt; [1, 2, 3]</span></span><br><span class="line">curried(<span class="number">1</span>, <span class="number">2</span>)(<span class="number">3</span>) <span class="comment">// =&gt; [1, 2, 3]</span></span><br><span class="line">curried(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) <span class="comment">// =&gt; [1, 2, 3]</span></span><br></pre></td></tr></table></figure>
<h1 id="ä¸ºå…ƒç´ æ·»åŠ onæ–¹æ³•"><a href="#ä¸ºå…ƒç´ æ·»åŠ onæ–¹æ³•" class="headerlink" title="ä¸ºå…ƒç´ æ·»åŠ onæ–¹æ³•"></a>ä¸ºå…ƒç´ æ·»åŠ onæ–¹æ³•</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">Element.prototype.on = Element.prototype.addEventListener;</span><br><span class="line"></span><br><span class="line">NodeList.prototype.on = <span class="function"><span class="keyword">function</span> (<span class="params">event, fn</span>) </span>&#123;ã€</span><br><span class="line">    [][<span class="string">'forEach'</span>].call(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">        el.on(event, fn);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="ä¸ºå…ƒç´ æ·»åŠ triggeræ–¹æ³•"><a href="#ä¸ºå…ƒç´ æ·»åŠ triggeræ–¹æ³•" class="headerlink" title="ä¸ºå…ƒç´ æ·»åŠ triggeræ–¹æ³•"></a>ä¸ºå…ƒç´ æ·»åŠ triggeræ–¹æ³•</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">Element.prototype.trigger = <span class="function"><span class="keyword">function</span>(<span class="params">type, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> event = <span class="built_in">document</span>.createEvent(<span class="string">"HTMLEvents"</span>);</span><br><span class="line">  event.initEvent(type, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line">  event.data = data || &#123;&#125;;</span><br><span class="line">  event.eventName = type;</span><br><span class="line">  event.target = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">this</span>.dispatchEvent(event);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">NodeList.prototype.trigger = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  [][<span class="string">"forEach"</span>].call(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">    el[<span class="string">"trigger"</span>](event);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="è½¬ä¹‰htmlæ ‡ç­¾"><a href="#è½¬ä¹‰htmlæ ‡ç­¾" class="headerlink" title="è½¬ä¹‰htmlæ ‡ç­¾"></a>è½¬ä¹‰htmlæ ‡ç­¾</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">HtmlEncode</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> text</span><br><span class="line">    .replace(<span class="regexp">/&amp;/g</span>, <span class="string">"&amp;"</span>)</span><br><span class="line">    .replace(<span class="regexp">/\"/g</span>, <span class="string">'"'</span>)</span><br><span class="line">    .replace(<span class="regexp">/&lt;/g</span>, <span class="string">"&lt;"</span>)</span><br><span class="line">    .replace(<span class="regexp">/&gt;/g</span>, <span class="string">"&gt;"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="HTMLæ ‡ç­¾è½¬ä¹‰"><a href="#HTMLæ ‡ç­¾è½¬ä¹‰" class="headerlink" title="HTMLæ ‡ç­¾è½¬ä¹‰"></a>HTMLæ ‡ç­¾è½¬ä¹‰</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// HTML æ ‡ç­¾è½¬ä¹‰</span></span><br><span class="line"><span class="comment">// @param &#123;Array.&lt;DOMString&gt;&#125; templateData å­—ç¬¦ä¸²ç±»å‹çš„tokens</span></span><br><span class="line"><span class="comment">// @param &#123;...&#125; ..vals è¡¨è¾¾å¼å ä½ç¬¦çš„è¿ç®—ç»“æœtokens</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SaferHTML</span>(<span class="params">templateData</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> s = templateData[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> arg = <span class="built_in">String</span>(<span class="built_in">arguments</span>[i]);</span><br><span class="line">    <span class="comment">// Escape special characters in the substitution.</span></span><br><span class="line">    s += arg</span><br><span class="line">      .replace(<span class="regexp">/&amp;/g</span>, <span class="string">"&amp;amp;"</span>)</span><br><span class="line">      .replace(<span class="regexp">/&lt;/g</span>, <span class="string">"&amp;lt;"</span>)</span><br><span class="line">      .replace(<span class="regexp">/&gt;/g</span>, <span class="string">"&amp;gt;"</span>);</span><br><span class="line">    <span class="comment">// Don't escape special characters in the template.</span></span><br><span class="line">    s += templateData[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line"><span class="keyword">var</span> html = SaferHTML<span class="string">`&lt;p&gt;è¿™æ˜¯å…³äºå­—ç¬¦ä¸²æ¨¡æ¿çš„ä»‹ç»&lt;/p&gt;`</span>;</span><br></pre></td></tr></table></figure>
<h1 id="è·¨æµè§ˆå™¨ç»‘å®šäº‹ä»¶"><a href="#è·¨æµè§ˆå™¨ç»‘å®šäº‹ä»¶" class="headerlink" title="è·¨æµè§ˆå™¨ç»‘å®šäº‹ä»¶"></a>è·¨æµè§ˆå™¨ç»‘å®šäº‹ä»¶</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEventSamp</span>(<span class="params">obj, evt, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!oTarget) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (obj.addEventListener) &#123;</span><br><span class="line">    obj.addEventListener(evt, fn, <span class="literal">false</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (obj.attachEvent) &#123;</span><br><span class="line">    obj.attachEvent(<span class="string">"on"</span> + evt, fn);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    oTarget[<span class="string">"on"</span> + sEvtType] = fn;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åŠ å…¥æ”¶è—å¤¹"><a href="#åŠ å…¥æ”¶è—å¤¹" class="headerlink" title="åŠ å…¥æ”¶è—å¤¹"></a>åŠ å…¥æ”¶è—å¤¹</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addFavorite</span>(<span class="params">sURL, sTitle</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.external.addFavorite(sURL, sTitle);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.sidebar.addPanel(sTitle, sURL, <span class="string">""</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      alert(<span class="string">"åŠ å…¥æ”¶è—å¤±è´¥ï¼Œè¯·ä½¿ç”¨Ctrl+Dè¿›è¡Œæ·»åŠ "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æå–é¡µé¢ä»£ç ä¸­æ‰€æœ‰ç½‘å€"><a href="#æå–é¡µé¢ä»£ç ä¸­æ‰€æœ‰ç½‘å€" class="headerlink" title="æå–é¡µé¢ä»£ç ä¸­æ‰€æœ‰ç½‘å€"></a>æå–é¡µé¢ä»£ç ä¸­æ‰€æœ‰ç½‘å€</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> aa = <span class="built_in">document</span>.documentElement.outerHTML</span><br><span class="line">  .match(</span><br><span class="line">    /(url\(|src=|href=)[\<span class="string">"\']*([^\"\'\(\)\&lt;\&gt;\[\] ]+)[\"\'\)]*|(http:\/\/[\w\-\.]+[^\"\'\(\)\&lt;\&gt;\[\] ]+)/gi</span></span><br><span class="line"><span class="string">  )</span></span><br><span class="line"><span class="string">  .join("</span>\r\n<span class="string">")</span></span><br><span class="line"><span class="string">  .replace(/^(src=|href=|url\()[\"\']*|[\"\'\&gt;\) ]*$/gim, "</span><span class="string">");</span></span><br><span class="line"><span class="string">alert(aa);</span></span><br></pre></td></tr></table></figure>
<h1 id="åŠ¨æ€åŠ è½½è„šæœ¬æ–‡ä»¶"><a href="#åŠ¨æ€åŠ è½½è„šæœ¬æ–‡ä»¶" class="headerlink" title="åŠ¨æ€åŠ è½½è„šæœ¬æ–‡ä»¶"></a>åŠ¨æ€åŠ è½½è„šæœ¬æ–‡ä»¶</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">appendscript</span>(<span class="params">src, text, reload, charset</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> id = hash(src + text);</span><br><span class="line">  <span class="keyword">if</span> (!reload &amp;&amp; in_array(id, evalscripts)) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">if</span> (reload &amp;&amp; $(id)) &#123;</span><br><span class="line">    $(id).parentNode.removeChild($(id));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  evalscripts.push(id);</span><br><span class="line">  <span class="keyword">var</span> scriptNode = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">  scriptNode.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">  scriptNode.id = id;</span><br><span class="line">  scriptNode.charset = charset</span><br><span class="line">    ? charset</span><br><span class="line">    : BROWSER.firefox</span><br><span class="line">    ? <span class="built_in">document</span>.characterSet</span><br><span class="line">    : <span class="built_in">document</span>.charset;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (src) &#123;</span><br><span class="line">      scriptNode.src = src;</span><br><span class="line">      scriptNode.onloadDone = <span class="literal">false</span>;</span><br><span class="line">      scriptNode.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        scriptNode.onloadDone = <span class="literal">true</span>;</span><br><span class="line">        JSLOADED[src] = <span class="number">1</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">      scriptNode.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">          (scriptNode.readyState == <span class="string">"loaded"</span> ||</span><br><span class="line">            scriptNode.readyState == <span class="string">"complete"</span>) &amp;&amp;</span><br><span class="line">          !scriptNode.onloadDone</span><br><span class="line">        ) &#123;</span><br><span class="line">          scriptNode.onloadDone = <span class="literal">true</span>;</span><br><span class="line">          JSLOADED[src] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (text) &#123;</span><br><span class="line">      scriptNode.text = text;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(scriptNode);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è¿”å›é¡¶éƒ¨çš„é€šç”¨æ–¹æ³•"><a href="#è¿”å›é¡¶éƒ¨çš„é€šç”¨æ–¹æ³•" class="headerlink" title="è¿”å›é¡¶éƒ¨çš„é€šç”¨æ–¹æ³•"></a>è¿”å›é¡¶éƒ¨çš„é€šç”¨æ–¹æ³•</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">backTop</span>(<span class="params">btnId</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(btnId);</span><br><span class="line">  <span class="keyword">var</span> d = <span class="built_in">document</span>.documentElement;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="built_in">document</span>.body;</span><br><span class="line">  <span class="built_in">window</span>.onscroll = <span class="keyword">set</span>;</span><br><span class="line">  btn.style.display = "none";</span><br><span class="line">  btn.onclick = function() &#123;</span><br><span class="line">    btn.style.display = <span class="string">"none"</span>;</span><br><span class="line">    <span class="built_in">window</span>.onscroll = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">this</span>.timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      d.scrollTop -= <span class="built_in">Math</span>.ceil((d.scrollTop + b.scrollTop) * <span class="number">0.1</span>);</span><br><span class="line">      b.scrollTop -= <span class="built_in">Math</span>.ceil((d.scrollTop + b.scrollTop) * <span class="number">0.1</span>);</span><br><span class="line">      <span class="keyword">if</span> (d.scrollTop + b.scrollTop == <span class="number">0</span>)</span><br><span class="line">        clearInterval(btn.timer, (<span class="built_in">window</span>.onscroll = <span class="keyword">set</span>));</span><br><span class="line">    &#125;, 10);</span><br><span class="line">  &#125;;</span><br><span class="line">  function <span class="keyword">set</span>() &#123;</span><br><span class="line">    btn.style.display = d.scrollTop + b.scrollTop &gt; <span class="number">100</span> ? <span class="string">"block"</span> : <span class="string">"none"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">backTop(<span class="string">"goTop"</span>);</span><br></pre></td></tr></table></figure>
<h1 id="å®ç°base64è§£ç "><a href="#å®ç°base64è§£ç " class="headerlink" title="å®ç°base64è§£ç "></a>å®ç°base64è§£ç </h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">base64_decode</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b64 = <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="</span>;</span><br><span class="line">  <span class="keyword">var</span> o1,</span><br><span class="line">    o2,</span><br><span class="line">    o3,</span><br><span class="line">    h1,</span><br><span class="line">    h2,</span><br><span class="line">    h3,</span><br><span class="line">    h4,</span><br><span class="line">    bits,</span><br><span class="line">    i = <span class="number">0</span>,</span><br><span class="line">    ac = <span class="number">0</span>,</span><br><span class="line">    dec = <span class="string">""</span>,</span><br><span class="line">    tmp_arr = [];</span><br><span class="line">  <span class="keyword">if</span> (!data) &#123;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;</span><br><span class="line">  data += <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">do</span> &#123;</span><br><span class="line">    h1 = b64.indexOf(data.charAt(i++));</span><br><span class="line">    h2 = b64.indexOf(data.charAt(i++));</span><br><span class="line">    h3 = b64.indexOf(data.charAt(i++));</span><br><span class="line">    h4 = b64.indexOf(data.charAt(i++));</span><br><span class="line">    bits = (h1 &lt;&lt; <span class="number">18</span>) | (h2 &lt;&lt; <span class="number">12</span>) | (h3 &lt;&lt; <span class="number">6</span>) | h4;</span><br><span class="line">    o1 = (bits &gt;&gt; <span class="number">16</span>) &amp; <span class="number">0xff</span>;</span><br><span class="line">    o2 = (bits &gt;&gt; <span class="number">8</span>) &amp; <span class="number">0xff</span>;</span><br><span class="line">    o3 = bits &amp; <span class="number">0xff</span>;</span><br><span class="line">    <span class="keyword">if</span> (h3 == <span class="number">64</span>) &#123;</span><br><span class="line">      tmp_arr[ac++] = <span class="built_in">String</span>.fromCharCode(o1);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (h4 == <span class="number">64</span>) &#123;</span><br><span class="line">      tmp_arr[ac++] = <span class="built_in">String</span>.fromCharCode(o1, o2);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      tmp_arr[ac++] = <span class="built_in">String</span>.fromCharCode(o1, o2, o3);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">while</span> (i &lt; data.length);</span><br><span class="line">  dec = tmp_arr.join(<span class="string">""</span>);</span><br><span class="line">  dec = utf8_decode(dec);</span><br><span class="line">  <span class="keyword">return</span> dec;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç¡®è®¤æ˜¯å¦æ˜¯é”®ç›˜æœ‰æ•ˆè¾“å…¥å€¼"><a href="#ç¡®è®¤æ˜¯å¦æ˜¯é”®ç›˜æœ‰æ•ˆè¾“å…¥å€¼" class="headerlink" title="ç¡®è®¤æ˜¯å¦æ˜¯é”®ç›˜æœ‰æ•ˆè¾“å…¥å€¼"></a>ç¡®è®¤æ˜¯å¦æ˜¯é”®ç›˜æœ‰æ•ˆè¾“å…¥å€¼</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkKey</span>(<span class="params">iKey</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (iKey == <span class="number">32</span> || iKey == <span class="number">229</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="comment">/*ç©ºæ ¼å’Œå¼‚å¸¸*/</span></span><br><span class="line">  <span class="keyword">if</span> (iKey &gt; <span class="number">47</span> &amp;&amp; iKey &lt; <span class="number">58</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="comment">/*æ•°å­—*/</span></span><br><span class="line">  <span class="keyword">if</span> (iKey &gt; <span class="number">64</span> &amp;&amp; iKey &lt; <span class="number">91</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="comment">/*å­—æ¯*/</span></span><br><span class="line">  <span class="keyword">if</span> (iKey &gt; <span class="number">95</span> &amp;&amp; iKey &lt; <span class="number">108</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="comment">/*æ•°å­—é”®ç›˜1*/</span></span><br><span class="line">  <span class="keyword">if</span> (iKey &gt; <span class="number">108</span> &amp;&amp; iKey &lt; <span class="number">112</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="comment">/*æ•°å­—é”®ç›˜2*/</span></span><br><span class="line">  <span class="keyword">if</span> (iKey &gt; <span class="number">185</span> &amp;&amp; iKey &lt; <span class="number">193</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="comment">/*ç¬¦å·1*/</span></span><br><span class="line">  <span class="keyword">if</span> (iKey &gt; <span class="number">218</span> &amp;&amp; iKey &lt; <span class="number">223</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="comment">/*ç¬¦å·2*/</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…¨è§’åŠè§’è½¬æ¢"><a href="#å…¨è§’åŠè§’è½¬æ¢" class="headerlink" title="å…¨è§’åŠè§’è½¬æ¢"></a>å…¨è§’åŠè§’è½¬æ¢</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//iCase: 0å…¨åˆ°åŠï¼Œ1åŠåˆ°å…¨ï¼Œå…¶ä»–ä¸è½¬åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">chgCase</span>(<span class="params">sStr, iCase</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    <span class="keyword">typeof</span> sStr != <span class="string">"string"</span> ||</span><br><span class="line">    sStr.length &lt;= <span class="number">0</span> ||</span><br><span class="line">    !(iCase === <span class="number">0</span> || iCase == <span class="number">1</span>)</span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">return</span> sStr;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> i,</span><br><span class="line">    oRs = [],</span><br><span class="line">    iCode;</span><br><span class="line">  <span class="keyword">if</span> (iCase) &#123;</span><br><span class="line">    <span class="comment">/*åŠ-&gt;å…¨*/</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sStr.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">      iCode = sStr.charCodeAt(i);</span><br><span class="line">      <span class="keyword">if</span> (iCode == <span class="number">32</span>) &#123;</span><br><span class="line">        iCode = <span class="number">12288</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (iCode &lt; <span class="number">127</span>) &#123;</span><br><span class="line">        iCode += <span class="number">65248</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      oRs.push(<span class="built_in">String</span>.fromCharCode(iCode));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">/*å…¨-&gt;åŠ*/</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sStr.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">      iCode = sStr.charCodeAt(i);</span><br><span class="line">      <span class="keyword">if</span> (iCode == <span class="number">12288</span>) &#123;</span><br><span class="line">        iCode = <span class="number">32</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (iCode &gt; <span class="number">65280</span> &amp;&amp; iCode &lt; <span class="number">65375</span>) &#123;</span><br><span class="line">        iCode -= <span class="number">65248</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      oRs.push(<span class="built_in">String</span>.fromCharCode(iCode));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> oRs.join(<span class="string">""</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç‰ˆæœ¬å¯¹æ¯”"><a href="#ç‰ˆæœ¬å¯¹æ¯”" class="headerlink" title="ç‰ˆæœ¬å¯¹æ¯”"></a>ç‰ˆæœ¬å¯¹æ¯”</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compareVersion</span>(<span class="params">v1, v2</span>) </span>&#123;</span><br><span class="line">  v1 = v1.split(<span class="string">"."</span>);</span><br><span class="line">  v2 = v2.split(<span class="string">"."</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> len = <span class="built_in">Math</span>.max(v1.length, v2.length);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (v1.length &lt; len) &#123;</span><br><span class="line">    v1.push(<span class="string">"0"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (v2.length &lt; len) &#123;</span><br><span class="line">    v2.push(<span class="string">"0"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> num1 = <span class="built_in">parseInt</span>(v1[i]);</span><br><span class="line">    <span class="keyword">var</span> num2 = <span class="built_in">parseInt</span>(v2[i]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (num1 &gt; num2) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (num1 &lt; num2) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å‹ç¼©CSSæ ·å¼ä»£ç "><a href="#å‹ç¼©CSSæ ·å¼ä»£ç " class="headerlink" title="å‹ç¼©CSSæ ·å¼ä»£ç "></a>å‹ç¼©CSSæ ·å¼ä»£ç </h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compressCss</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//å‹ç¼©ä»£ç </span></span><br><span class="line">  s = s.replace(<span class="regexp">/\/\*(.|\n)*?\*\//g</span>, <span class="string">""</span>); <span class="comment">//åˆ é™¤æ³¨é‡Š</span></span><br><span class="line">  s = s.replace(<span class="regexp">/\s*([\&#123;\&#125;\:\;\,])\s*/g</span>, <span class="string">"$1"</span>);</span><br><span class="line">  s = s.replace(<span class="regexp">/\,[\s\.\#\d]*\&#123;/g</span>, <span class="string">"&#123;"</span>); <span class="comment">//å®¹é”™å¤„ç†</span></span><br><span class="line">  s = s.replace(<span class="regexp">/;\s*;/g</span>, <span class="string">";"</span>); <span class="comment">//æ¸…é™¤è¿ç»­åˆ†å·</span></span><br><span class="line">  s = s.match(<span class="regexp">/^\s*(\S+(\s+\S+)*)\s*$/</span>); <span class="comment">//å»æ‰é¦–å°¾ç©ºç™½</span></span><br><span class="line">  <span class="keyword">return</span> s == <span class="literal">null</span> ? <span class="string">""</span> : s[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–å½“å‰è·¯å¾„"><a href="#è·å–å½“å‰è·¯å¾„" class="headerlink" title="è·å–å½“å‰è·¯å¾„"></a>è·å–å½“å‰è·¯å¾„</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> currentPageUrl = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>.href === <span class="string">"undefined"</span>) &#123;</span><br><span class="line">  currentPageUrl = <span class="built_in">document</span>.location.toString().toLowerCase();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  currentPageUrl = <span class="keyword">this</span>.href.toString().toLowerCase();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å­—ç¬¦ä¸²é•¿åº¦æˆªå–"><a href="#å­—ç¬¦ä¸²é•¿åº¦æˆªå–" class="headerlink" title="å­—ç¬¦ä¸²é•¿åº¦æˆªå–"></a>å­—ç¬¦ä¸²é•¿åº¦æˆªå–</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cutstr</span>(<span class="params">str, len</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> temp,</span><br><span class="line">        icount = <span class="number">0</span>,</span><br><span class="line">        patrn = <span class="regexp">/[^\x00-\xff]/</span>ï¼Œ</span><br><span class="line">        strre = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (icount &lt; len - <span class="number">1</span>) &#123;</span><br><span class="line">            temp = str.substr(i, <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span> (patrn.exec(temp) == <span class="literal">null</span>) &#123;</span><br><span class="line">                   icount = icount + <span class="number">1</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                icount = icount + <span class="number">2</span></span><br><span class="line">            &#125;</span><br><span class="line">            strre += temp</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> strre + <span class="string">"..."</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ—¶é—´æ—¥æœŸæ ¼å¼è½¬æ¢"><a href="#æ—¶é—´æ—¥æœŸæ ¼å¼è½¬æ¢" class="headerlink" title="æ—¶é—´æ—¥æœŸæ ¼å¼è½¬æ¢"></a>æ—¶é—´æ—¥æœŸæ ¼å¼è½¬æ¢</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Date</span>.prototype.format = <span class="function"><span class="keyword">function</span>(<span class="params">formatStr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> str = formatStr;</span><br><span class="line">  <span class="keyword">var</span> Week = [<span class="string">"æ—¥"</span>, <span class="string">"ä¸€"</span>, <span class="string">"äºŒ"</span>, <span class="string">"ä¸‰"</span>, <span class="string">"å››"</span>, <span class="string">"äº”"</span>, <span class="string">"å…­"</span>];</span><br><span class="line">  str = str.replace(<span class="regexp">/yyyy|YYYY/</span>, <span class="keyword">this</span>.getFullYear());</span><br><span class="line">  str = str.replace(</span><br><span class="line">    /yy|YY/,</span><br><span class="line">    <span class="keyword">this</span>.getYear() % <span class="number">100</span> &gt; <span class="number">9</span></span><br><span class="line">      ? (<span class="keyword">this</span>.getYear() % <span class="number">100</span>).toString()</span><br><span class="line">      : <span class="string">"0"</span> + (<span class="keyword">this</span>.getYear() % <span class="number">100</span>)</span><br><span class="line">  );</span><br><span class="line">  str = str.replace(</span><br><span class="line">    /MM/,</span><br><span class="line">    <span class="keyword">this</span>.getMonth() + <span class="number">1</span> &gt; <span class="number">9</span></span><br><span class="line">      ? (<span class="keyword">this</span>.getMonth() + <span class="number">1</span>).toString()</span><br><span class="line">      : <span class="string">"0"</span> + (<span class="keyword">this</span>.getMonth() + <span class="number">1</span>)</span><br><span class="line">  );</span><br><span class="line">  str = str.replace(<span class="regexp">/M/g</span>, <span class="keyword">this</span>.getMonth() + <span class="number">1</span>);</span><br><span class="line">  str = str.replace(<span class="regexp">/w|W/g</span>, Week[<span class="keyword">this</span>.getDay()]);</span><br><span class="line">  str = str.replace(</span><br><span class="line">    /dd|DD/,</span><br><span class="line">    <span class="keyword">this</span>.getDate() &gt; <span class="number">9</span> ? <span class="keyword">this</span>.getDate().toString() : <span class="string">"0"</span> + <span class="keyword">this</span>.getDate()</span><br><span class="line">  );</span><br><span class="line">  str = str.replace(<span class="regexp">/d|D/g</span>, <span class="keyword">this</span>.getDate());</span><br><span class="line">  str = str.replace(</span><br><span class="line">    /hh|HH/,</span><br><span class="line">    <span class="keyword">this</span>.getHours() &gt; <span class="number">9</span> ? <span class="keyword">this</span>.getHours().toString() : <span class="string">"0"</span> + <span class="keyword">this</span>.getHours()</span><br><span class="line">  );</span><br><span class="line">  str = str.replace(<span class="regexp">/h|H/g</span>, <span class="keyword">this</span>.getHours());</span><br><span class="line">  str = str.replace(</span><br><span class="line">    /mm/,</span><br><span class="line">    <span class="keyword">this</span>.getMinutes() &gt; <span class="number">9</span></span><br><span class="line">      ? <span class="keyword">this</span>.getMinutes().toString()</span><br><span class="line">      : <span class="string">"0"</span> + <span class="keyword">this</span>.getMinutes()</span><br><span class="line">  );</span><br><span class="line">  str = str.replace(<span class="regexp">/m/g</span>, <span class="keyword">this</span>.getMinutes());</span><br><span class="line">  str = str.replace(</span><br><span class="line">    /ss|SS/,</span><br><span class="line">    <span class="keyword">this</span>.getSeconds() &gt; <span class="number">9</span></span><br><span class="line">      ? <span class="keyword">this</span>.getSeconds().toString()</span><br><span class="line">      : <span class="string">"0"</span> + <span class="keyword">this</span>.getSeconds()</span><br><span class="line">  );</span><br><span class="line">  str = str.replace(<span class="regexp">/s|S/g</span>, <span class="keyword">this</span>.getSeconds());</span><br><span class="line">  <span class="keyword">return</span> str;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–</span></span><br><span class="line"><span class="built_in">Date</span>.prototype.format = <span class="function"><span class="keyword">function</span>(<span class="params">format</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> o = &#123;</span><br><span class="line">    <span class="string">"M+"</span>: <span class="keyword">this</span>.getMonth() + <span class="number">1</span>, <span class="comment">//month</span></span><br><span class="line">    <span class="string">"d+"</span>: <span class="keyword">this</span>.getDate(), <span class="comment">//day</span></span><br><span class="line">    <span class="string">"h+"</span>: <span class="keyword">this</span>.getHours(), <span class="comment">//hour</span></span><br><span class="line">    <span class="string">"m+"</span>: <span class="keyword">this</span>.getMinutes(), <span class="comment">//minute</span></span><br><span class="line">    <span class="string">"s+"</span>: <span class="keyword">this</span>.getSeconds(), <span class="comment">//second</span></span><br><span class="line">    <span class="string">"q+"</span>: <span class="built_in">Math</span>.floor((<span class="keyword">this</span>.getMonth() + <span class="number">3</span>) / <span class="number">3</span>), <span class="comment">//quarter</span></span><br><span class="line">    S: <span class="keyword">this</span>.getMilliseconds() <span class="comment">//millisecond</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span> (<span class="regexp">/(y+)/</span>.test(format))</span><br><span class="line">    format = format.replace(</span><br><span class="line">      <span class="built_in">RegExp</span>.$<span class="number">1</span>,</span><br><span class="line">      (<span class="keyword">this</span>.getFullYear() + <span class="string">""</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length)</span><br><span class="line">    );</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"("</span> + k + <span class="string">")"</span>).test(format))</span><br><span class="line">      format = format.replace(</span><br><span class="line">        <span class="built_in">RegExp</span>.$<span class="number">1</span>,</span><br><span class="line">        <span class="built_in">RegExp</span>.$<span class="number">1.</span>length == <span class="number">1</span> ? o[k] : (<span class="string">"00"</span> + o[k]).substr((<span class="string">""</span> + o[k]).length)</span><br><span class="line">      );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> format;</span><br><span class="line">&#125;;</span><br><span class="line">alert(<span class="keyword">new</span> <span class="built_in">Date</span>().format(<span class="string">"yyyy-MM-dd hh:mm:ss"</span>));</span><br></pre></td></tr></table></figure>
<h1 id="è·¨æµè§ˆå™¨åˆ é™¤äº‹ä»¶"><a href="#è·¨æµè§ˆå™¨åˆ é™¤äº‹ä»¶" class="headerlink" title="è·¨æµè§ˆå™¨åˆ é™¤äº‹ä»¶"></a>è·¨æµè§ˆå™¨åˆ é™¤äº‹ä»¶</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delEvt</span>(<span class="params">obj, evt, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!obj) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (obj.addEventListener) &#123;</span><br><span class="line">    obj.addEventListener(evt, fn, <span class="literal">false</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (oTarget.attachEvent) &#123;</span><br><span class="line">    obj.attachEvent(<span class="string">"on"</span> + evt, fn);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    obj[<span class="string">"on"</span> + evt] = fn;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²ç»“æŸ"><a href="#åˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²ç»“æŸ" class="headerlink" title="åˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²ç»“æŸ"></a>åˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²ç»“æŸ</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.endWith = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> d = <span class="keyword">this</span>.length - s.length;</span><br><span class="line">  <span class="keyword">return</span> d &gt;= <span class="number">0</span> &amp;&amp; <span class="keyword">this</span>.lastIndexOf(s) == d;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="è¿”å›è„šæœ¬å†…å®¹"><a href="#è¿”å›è„šæœ¬å†…å®¹" class="headerlink" title="è¿”å›è„šæœ¬å†…å®¹"></a>è¿”å›è„šæœ¬å†…å®¹</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">evalscript</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (s.indexOf(<span class="string">"&lt;script"</span>) == <span class="number">-1</span>) <span class="keyword">return</span> s;</span><br><span class="line">  <span class="keyword">var</span> p = <span class="regexp">/&lt;script[^\&gt;]*?&gt;([^\x00]*?)&lt;\/script&gt;/gi</span>;</span><br><span class="line">  <span class="keyword">var</span> arr = [];</span><br><span class="line">  <span class="keyword">while</span> ((arr = p.exec(s))) &#123;</span><br><span class="line">    <span class="keyword">var</span> p1 = <span class="regexp">/&lt;script[^\&gt;]*?src=\"([^\&gt;]*?)\"[^\&gt;]*?(reload=\"1\")?(?:charset=\"([\w\-]+?)\")?&gt;&lt;\/script&gt;/i</span>;</span><br><span class="line">    <span class="keyword">var</span> arr1 = [];</span><br><span class="line">    arr1 = p1.exec(arr[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">if</span> (arr1) &#123;</span><br><span class="line">      appendscript(arr1[<span class="number">1</span>], <span class="string">""</span>, arr1[<span class="number">2</span>], arr1[<span class="number">3</span>]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      p1 = <span class="regexp">/&lt;script(.*?)&gt;([^\x00]+?)&lt;\/script&gt;/i</span>;</span><br><span class="line">      arr1 = p1.exec(arr[<span class="number">0</span>]);</span><br><span class="line">      appendscript(<span class="string">""</span>, arr1[<span class="number">2</span>], arr1[<span class="number">1</span>].indexOf(<span class="string">"reload="</span>) != <span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ ¼å¼åŒ–CSSæ ·å¼ä»£ç "><a href="#æ ¼å¼åŒ–CSSæ ·å¼ä»£ç " class="headerlink" title="æ ¼å¼åŒ–CSSæ ·å¼ä»£ç "></a>æ ¼å¼åŒ–CSSæ ·å¼ä»£ç </h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatCss</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//æ ¼å¼åŒ–ä»£ç </span></span><br><span class="line">  s = s.replace(<span class="regexp">/\s*([\&#123;\&#125;\:\;\,])\s*/g</span>, <span class="string">"$1"</span>);</span><br><span class="line">  s = s.replace(<span class="regexp">/;\s*;/g</span>, <span class="string">";"</span>); <span class="comment">//æ¸…é™¤è¿ç»­åˆ†å·</span></span><br><span class="line">  s = s.replace(<span class="regexp">/\,[\s\.\#\d]*&#123;/g</span>, <span class="string">"&#123;"</span>);</span><br><span class="line">  s = s.replace(<span class="regexp">/([^\s])\&#123;([^\s])/g</span>, <span class="string">"$1 &#123;\n\t$2"</span>);</span><br><span class="line">  s = s.replace(<span class="regexp">/([^\s])\&#125;([^\n]*)/g</span>, <span class="string">"$1\n&#125;\n$2"</span>);</span><br><span class="line">  s = s.replace(<span class="regexp">/([^\s]);([^\s\&#125;])/g</span>, <span class="string">"$1;\n\t$2"</span>);</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–cookieå€¼"><a href="#è·å–cookieå€¼" class="headerlink" title="è·å–cookieå€¼"></a>è·å–cookieå€¼</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> arr = <span class="built_in">document</span>.cookie.match(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^| )"</span> + name + <span class="string">"=([^;]*)(;|$)"</span>));</span><br><span class="line">  <span class="keyword">if</span> (arr != <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">unescape</span>(arr[<span class="number">2</span>]);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å¾—URLä¸­GETå‚æ•°å€¼"><a href="#è·å¾—URLä¸­GETå‚æ•°å€¼" class="headerlink" title="è·å¾—URLä¸­GETå‚æ•°å€¼"></a>è·å¾—URLä¸­GETå‚æ•°å€¼</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç”¨æ³•ï¼šå¦‚æœåœ°å€æ˜¯ test.htm?t1=1&amp;t2=2&amp;t3=3, é‚£ä¹ˆèƒ½å–å¾—ï¼šGET["t1"], GET["t2"], GET["t3"]</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getGet</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  querystr = <span class="built_in">window</span>.location.href.split(<span class="string">"?"</span>);</span><br><span class="line">  <span class="keyword">if</span> (querystr[<span class="number">1</span>]) &#123;</span><br><span class="line">    GETs = querystr[<span class="number">1</span>].split(<span class="string">"&amp;"</span>);</span><br><span class="line">    GET = [];</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; GETs.length; i++) &#123;</span><br><span class="line">      tmp_arr = GETs.split(<span class="string">"="</span>);</span><br><span class="line">      key = tmp_arr[<span class="number">0</span>];</span><br><span class="line">      GET[key] = tmp_arr[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> querystr[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–ç§»åŠ¨è®¾å¤‡åˆå§‹åŒ–å¤§å°"><a href="#è·å–ç§»åŠ¨è®¾å¤‡åˆå§‹åŒ–å¤§å°" class="headerlink" title="è·å–ç§»åŠ¨è®¾å¤‡åˆå§‹åŒ–å¤§å°"></a>è·å–ç§»åŠ¨è®¾å¤‡åˆå§‹åŒ–å¤§å°</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInitZoom</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">this</span>._initZoom) &#123;</span><br><span class="line">    <span class="keyword">var</span> screenWidth = <span class="built_in">Math</span>.min(screen.height, screen.width);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isAndroidMobileDevice() &amp;&amp; !<span class="keyword">this</span>.isNewChromeOnAndroid()) &#123;</span><br><span class="line">      screenWidth = screenWidth / <span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>._initZoom = screenWidth / <span class="built_in">document</span>.body.offsetWidth;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>._initZoom;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–é¡µé¢é«˜åº¦"><a href="#è·å–é¡µé¢é«˜åº¦" class="headerlink" title="è·å–é¡µé¢é«˜åº¦"></a>è·å–é¡µé¢é«˜åº¦</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageHeight</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> g = <span class="built_in">document</span>,</span><br><span class="line">    a = g.body,</span><br><span class="line">    f = g.documentElement,</span><br><span class="line">    d = g.compatMode == <span class="string">"BackCompat"</span> ? a : g.documentElement;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(f.scrollHeight, a.scrollHeight, d.clientHeight);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–é¡µé¢scrollLeft"><a href="#è·å–é¡µé¢scrollLeft" class="headerlink" title="è·å–é¡µé¢scrollLeft"></a>è·å–é¡µé¢scrollLeft</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageScrollLeft</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">document</span>;</span><br><span class="line">  <span class="keyword">return</span> a.documentElement.scrollLeft || a.body.scrollLeft;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–é¡µé¢scrollTop"><a href="#è·å–é¡µé¢scrollTop" class="headerlink" title="è·å–é¡µé¢scrollTop"></a>è·å–é¡µé¢scrollTop</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageScrollTop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">document</span>;</span><br><span class="line">  <span class="keyword">return</span> a.documentElement.scrollTop || a.body.scrollTop;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–é¡µé¢å¯è§†é«˜åº¦"><a href="#è·å–é¡µé¢å¯è§†é«˜åº¦" class="headerlink" title="è·å–é¡µé¢å¯è§†é«˜åº¦"></a>è·å–é¡µé¢å¯è§†é«˜åº¦</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageViewHeight</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> d = <span class="built_in">document</span>,</span><br><span class="line">    a = d.compatMode == <span class="string">"BackCompat"</span> ? d.body : d.documentElement;</span><br><span class="line">  <span class="keyword">return</span> a.clientHeight;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–é¡µé¢å¯è§†å®½åº¦"><a href="#è·å–é¡µé¢å¯è§†å®½åº¦" class="headerlink" title="è·å–é¡µé¢å¯è§†å®½åº¦"></a>è·å–é¡µé¢å¯è§†å®½åº¦</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageViewWidth</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> d = <span class="built_in">document</span>,</span><br><span class="line">    a = d.compatMode == <span class="string">"BackCompat"</span> ? d.body : d.documentElement;</span><br><span class="line">  <span class="keyword">return</span> a.clientWidth;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–é¡µé¢å®½åº¦"><a href="#è·å–é¡µé¢å®½åº¦" class="headerlink" title="è·å–é¡µé¢å®½åº¦"></a>è·å–é¡µé¢å®½åº¦</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageWidth</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> g = <span class="built_in">document</span>,</span><br><span class="line">    a = g.body,</span><br><span class="line">    f = g.documentElement,</span><br><span class="line">    d = g.compatMode == <span class="string">"BackCompat"</span> ? a : g.documentElement;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.max(f.scrollWidth, a.scrollWidth, d.clientWidth);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–ç§»åŠ¨è®¾å¤‡å±å¹•å®½åº¦"><a href="#è·å–ç§»åŠ¨è®¾å¤‡å±å¹•å®½åº¦" class="headerlink" title="è·å–ç§»åŠ¨è®¾å¤‡å±å¹•å®½åº¦"></a>è·å–ç§»åŠ¨è®¾å¤‡å±å¹•å®½åº¦</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getScreenWidth</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> smallerSide = <span class="built_in">Math</span>.min(screen.width, screen.height);</span><br><span class="line">  <span class="keyword">var</span> fixViewPortsExperiment =</span><br><span class="line">    rendererModel.runningExperiments.FixViewport ||</span><br><span class="line">    rendererModel.runningExperiments.fixviewport;</span><br><span class="line">  <span class="keyword">var</span> fixViewPortsExperimentRunning =</span><br><span class="line">    fixViewPortsExperiment &amp;&amp; fixViewPortsExperiment.toLowerCase() === <span class="string">"new"</span>;</span><br><span class="line">  <span class="keyword">if</span> (fixViewPortsExperiment) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isAndroidMobileDevice() &amp;&amp; !<span class="keyword">this</span>.isNewChromeOnAndroid()) &#123;</span><br><span class="line">      smallerSide = smallerSide / <span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> smallerSide;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–ç½‘é¡µè¢«å·å»çš„ä½ç½®"><a href="#è·å–ç½‘é¡µè¢«å·å»çš„ä½ç½®" class="headerlink" title="è·å–ç½‘é¡µè¢«å·å»çš„ä½ç½®"></a>è·å–ç½‘é¡µè¢«å·å»çš„ä½ç½®</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getScrollXY</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">document</span>.body.scrollTop</span><br><span class="line">    ? &#123;</span><br><span class="line">        x: <span class="built_in">document</span>.body.scrollLeft,</span><br><span class="line">        y: <span class="built_in">document</span>.body.scrollTop</span><br><span class="line">      &#125;</span><br><span class="line">    : &#123;</span><br><span class="line">        x: <span class="built_in">document</span>.documentElement.scrollLeft,</span><br><span class="line">        y: <span class="built_in">document</span>.documentElement.scrollTop</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–URLä¸Šçš„å‚æ•°"><a href="#è·å–URLä¸Šçš„å‚æ•°" class="headerlink" title="è·å–URLä¸Šçš„å‚æ•°"></a>è·å–URLä¸Šçš„å‚æ•°</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–URLä¸­çš„æŸå‚æ•°å€¼,ä¸åŒºåˆ†å¤§å°å†™</span></span><br><span class="line"><span class="comment">// è·å–URLä¸­çš„æŸå‚æ•°å€¼,ä¸åŒºåˆ†å¤§å°å†™,</span></span><br><span class="line"><span class="comment">// é»˜è®¤æ˜¯å–'hash'é‡Œçš„å‚æ•°ï¼Œ</span></span><br><span class="line"><span class="comment">// å¦‚æœä¼ å…¶ä»–å‚æ•°æ”¯æŒå–â€˜searchâ€™ä¸­çš„å‚æ•°</span></span><br><span class="line"><span class="comment">// @param &#123;String&#125; name å‚æ•°åç§°</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getUrlParam</span>(<span class="params">name, type = <span class="string">"hash"</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> newName = name,</span><br><span class="line">    reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span> + newName + <span class="string">"=([^&amp;]*)(&amp;|$)"</span>, <span class="string">"i"</span>),</span><br><span class="line">    paramHash = <span class="built_in">window</span>.location.hash.split(<span class="string">"?"</span>)[<span class="number">1</span>] || <span class="string">""</span>,</span><br><span class="line">    paramSearch = <span class="built_in">window</span>.location.search.split(<span class="string">"?"</span>)[<span class="number">1</span>] || <span class="string">""</span>,</span><br><span class="line">    param;</span><br><span class="line"></span><br><span class="line">  type === <span class="string">"hash"</span> ? (param = paramHash) : (param = paramSearch);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> result = param.match(reg);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (result != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> result[<span class="number">2</span>].split(<span class="string">"/"</span>)[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ£€éªŒURLé“¾æ¥æ˜¯å¦æœ‰æ•ˆ"><a href="#æ£€éªŒURLé“¾æ¥æ˜¯å¦æœ‰æ•ˆ" class="headerlink" title="æ£€éªŒURLé“¾æ¥æ˜¯å¦æœ‰æ•ˆ"></a>æ£€éªŒURLé“¾æ¥æ˜¯å¦æœ‰æ•ˆ</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlState</span>(<span class="params">URL</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> xmlhttp = <span class="keyword">new</span> ActiveXObject(<span class="string">"microsoft.xmlhttp"</span>);</span><br><span class="line">  xmlhttp.Open(<span class="string">"GET"</span>, URL, <span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    xmlhttp.Send();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> result = xmlhttp.responseText;</span><br><span class="line">    <span class="keyword">if</span> (result) &#123;</span><br><span class="line">      <span class="keyword">if</span> (xmlhttp.Status == <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–çª—ä½“å¯è§èŒƒå›´çš„å®½ä¸é«˜"><a href="#è·å–çª—ä½“å¯è§èŒƒå›´çš„å®½ä¸é«˜" class="headerlink" title="è·å–çª—ä½“å¯è§èŒƒå›´çš„å®½ä¸é«˜"></a>è·å–çª—ä½“å¯è§èŒƒå›´çš„å®½ä¸é«˜</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getViewSize</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> de = <span class="built_in">document</span>.documentElement;</span><br><span class="line">  <span class="keyword">var</span> db = <span class="built_in">document</span>.body;</span><br><span class="line">  <span class="keyword">var</span> viewW = de.clientWidth == <span class="number">0</span> ? db.clientWidth : de.clientWidth;</span><br><span class="line">  <span class="keyword">var</span> viewH = de.clientHeight == <span class="number">0</span> ? db.clientHeight : de.clientHeight;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>(viewW, viewH);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–ç§»åŠ¨è®¾å¤‡æœ€å¤§åŒ–å¤§å°"><a href="#è·å–ç§»åŠ¨è®¾å¤‡æœ€å¤§åŒ–å¤§å°" class="headerlink" title="è·å–ç§»åŠ¨è®¾å¤‡æœ€å¤§åŒ–å¤§å°"></a>è·å–ç§»åŠ¨è®¾å¤‡æœ€å¤§åŒ–å¤§å°</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getZoom</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> screenWidth =</span><br><span class="line">    <span class="built_in">Math</span>.abs(<span class="built_in">window</span>.orientation) === <span class="number">90</span></span><br><span class="line">      ? <span class="built_in">Math</span>.max(screen.height, screen.width)</span><br><span class="line">      : <span class="built_in">Math</span>.min(screen.height, screen.width);</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.isAndroidMobileDevice() &amp;&amp; !<span class="keyword">this</span>.isNewChromeOnAndroid()) &#123;</span><br><span class="line">    screenWidth = screenWidth / <span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> FixViewPortsExperiment =</span><br><span class="line">    rendererModel.runningExperiments.FixViewport ||</span><br><span class="line">    rendererModel.runningExperiments.fixviewport;</span><br><span class="line">  <span class="keyword">var</span> FixViewPortsExperimentRunning =</span><br><span class="line">    FixViewPortsExperiment &amp;&amp;</span><br><span class="line">    (FixViewPortsExperiment === <span class="string">"New"</span> || FixViewPortsExperiment === <span class="string">"new"</span>);</span><br><span class="line">  <span class="keyword">if</span> (FixViewPortsExperimentRunning) &#123;</span><br><span class="line">    <span class="keyword">return</span> screenWidth / <span class="built_in">window</span>.innerWidth;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> screenWidth / <span class="built_in">document</span>.body.offsetWidth;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­æ˜¯å¦å®‰å“ç§»åŠ¨è®¾å¤‡è®¿é—®"><a href="#åˆ¤æ–­æ˜¯å¦å®‰å“ç§»åŠ¨è®¾å¤‡è®¿é—®" class="headerlink" title="åˆ¤æ–­æ˜¯å¦å®‰å“ç§»åŠ¨è®¾å¤‡è®¿é—®"></a>åˆ¤æ–­æ˜¯å¦å®‰å“ç§»åŠ¨è®¾å¤‡è®¿é—®</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isAndroidMobileDevice</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/android/i</span>.test(navigator.userAgent.toLowerCase());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­æ˜¯å¦è‹¹æœç§»åŠ¨è®¾å¤‡è®¿é—®"><a href="#åˆ¤æ–­æ˜¯å¦è‹¹æœç§»åŠ¨è®¾å¤‡è®¿é—®" class="headerlink" title="åˆ¤æ–­æ˜¯å¦è‹¹æœç§»åŠ¨è®¾å¤‡è®¿é—®"></a>åˆ¤æ–­æ˜¯å¦è‹¹æœç§»åŠ¨è®¾å¤‡è®¿é—®</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isAppleMobileDevice</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/iphone|ipod|ipad|Macintosh/i</span>.test(navigator.userAgent.toLowerCase());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ç±»å‹"><a href="#åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ç±»å‹" class="headerlink" title="åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ç±»å‹"></a>åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ç±»å‹</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isDigit</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> patrn = <span class="regexp">/^[0-9]*$/</span>;</span><br><span class="line">  <span class="keyword">if</span> (patrn.exec(value) == <span class="literal">null</span> || value == <span class="string">""</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ˜¯å¦æ˜¯æŸç±»æ‰‹æœºå‹å·"><a href="#æ˜¯å¦æ˜¯æŸç±»æ‰‹æœºå‹å·" class="headerlink" title="æ˜¯å¦æ˜¯æŸç±»æ‰‹æœºå‹å·"></a>æ˜¯å¦æ˜¯æŸç±»æ‰‹æœºå‹å·</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç”¨devicePixelRatioå’Œåˆ†è¾¨ç‡åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">const</span> isIphonex = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// X XS, XS Max, XR</span></span><br><span class="line">  <span class="keyword">const</span> xSeriesConfig = [</span><br><span class="line">    &#123;</span><br><span class="line">      devicePixelRatio: <span class="number">3</span>,</span><br><span class="line">      width: <span class="number">375</span>,</span><br><span class="line">      height: <span class="number">812</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      devicePixelRatio: <span class="number">3</span>,</span><br><span class="line">      width: <span class="number">414</span>,</span><br><span class="line">      height: <span class="number">896</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      devicePixelRatio: <span class="number">2</span>,</span><br><span class="line">      width: <span class="number">414</span>,</span><br><span class="line">      height: <span class="number">896</span></span><br><span class="line">    &#125;</span><br><span class="line">  ];</span><br><span class="line">  <span class="comment">// h5</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">"undefined"</span> &amp;&amp; <span class="built_in">window</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> isIOS = <span class="regexp">/iphone/gi</span>.test(<span class="built_in">window</span>.navigator.userAgent);</span><br><span class="line">    <span class="keyword">if</span> (!isIOS) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; devicePixelRatio, screen &#125; = <span class="built_in">window</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; width, height &#125; = screen;</span><br><span class="line">    <span class="keyword">return</span> xSeriesConfig.some(</span><br><span class="line">      item =&gt;</span><br><span class="line">        item.devicePixelRatio === devicePixelRatio &amp;&amp;</span><br><span class="line">        item.width === width &amp;&amp;</span><br><span class="line">        item.height === height</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­æ˜¯å¦ç§»åŠ¨è®¾å¤‡"><a href="#åˆ¤æ–­æ˜¯å¦ç§»åŠ¨è®¾å¤‡" class="headerlink" title="åˆ¤æ–­æ˜¯å¦ç§»åŠ¨è®¾å¤‡"></a>åˆ¤æ–­æ˜¯å¦ç§»åŠ¨è®¾å¤‡</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMobile</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>._isMobile === <span class="string">"boolean"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._isMobile;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> screenWidth = <span class="keyword">this</span>.getScreenWidth();</span><br><span class="line">  <span class="keyword">var</span> fixViewPortsExperiment =</span><br><span class="line">    rendererModel.runningExperiments.FixViewport ||</span><br><span class="line">    rendererModel.runningExperiments.fixviewport;</span><br><span class="line">  <span class="keyword">var</span> fixViewPortsExperimentRunning =</span><br><span class="line">    fixViewPortsExperiment &amp;&amp; fixViewPortsExperiment.toLowerCase() === <span class="string">"new"</span>;</span><br><span class="line">  <span class="keyword">if</span> (!fixViewPortsExperiment) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.isAppleMobileDevice()) &#123;</span><br><span class="line">      screenWidth = screenWidth / <span class="built_in">window</span>.devicePixelRatio;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> isMobileScreenSize = screenWidth &lt; <span class="number">600</span>;</span><br><span class="line">  <span class="keyword">var</span> isMobileUserAgent = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">this</span>._isMobile = isMobileScreenSize &amp;&amp; <span class="keyword">this</span>.isTouchScreen();</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>._isMobile;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­å—æ˜¯å¦æ‰‹æœºå·ç "><a href="#åˆ¤æ–­å—æ˜¯å¦æ‰‹æœºå·ç " class="headerlink" title="åˆ¤æ–­å—æ˜¯å¦æ‰‹æœºå·ç "></a>åˆ¤æ–­å—æ˜¯å¦æ‰‹æœºå·ç </h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMobileNumber</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i =</span><br><span class="line">      <span class="string">"134,135,136,137,138,139,150,151,152,157,158,159,187,188,147,182,183,184,178"</span>,</span><br><span class="line">    n = <span class="string">"130,131,132,155,156,185,186,145,176"</span>,</span><br><span class="line">    a = <span class="string">"133,153,180,181,189,177,173,170"</span>,</span><br><span class="line">    o = e || <span class="string">""</span>,</span><br><span class="line">    r = o.substring(<span class="number">0</span>, <span class="number">3</span>),</span><br><span class="line">    d = o.substring(<span class="number">0</span>, <span class="number">4</span>),</span><br><span class="line">    s =</span><br><span class="line">      !!<span class="regexp">/^1\d&#123;10&#125;$/</span>.test(o) &amp;&amp;</span><br><span class="line">      (n.indexOf(r) &gt;= <span class="number">0</span></span><br><span class="line">        ? <span class="string">"è”é€š"</span></span><br><span class="line">        : a.indexOf(r) &gt;= <span class="number">0</span></span><br><span class="line">        ? <span class="string">"ç”µä¿¡"</span></span><br><span class="line">        : <span class="string">"1349"</span> == d</span><br><span class="line">        ? <span class="string">"ç”µä¿¡"</span></span><br><span class="line">        : i.indexOf(r) &gt;= <span class="number">0</span></span><br><span class="line">        ? <span class="string">"ç§»åŠ¨"</span></span><br><span class="line">        : <span class="string">"æœªçŸ¥"</span>);</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­æ˜¯å¦æ˜¯ç§»åŠ¨è®¾å¤‡è®¿é—®"><a href="#åˆ¤æ–­æ˜¯å¦æ˜¯ç§»åŠ¨è®¾å¤‡è®¿é—®" class="headerlink" title="åˆ¤æ–­æ˜¯å¦æ˜¯ç§»åŠ¨è®¾å¤‡è®¿é—®"></a>åˆ¤æ–­æ˜¯å¦æ˜¯ç§»åŠ¨è®¾å¤‡è®¿é—®</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMobileUserAgent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/iphone|ipod|android.*mobile|windows.*phone|blackberry.*mobile/i</span>.test(</span><br><span class="line">    <span class="built_in">window</span>.navigator.userAgent.toLowerCase()</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­é¼ æ ‡æ˜¯å¦ç§»å‡ºäº‹ä»¶"><a href="#åˆ¤æ–­é¼ æ ‡æ˜¯å¦ç§»å‡ºäº‹ä»¶" class="headerlink" title="åˆ¤æ–­é¼ æ ‡æ˜¯å¦ç§»å‡ºäº‹ä»¶"></a>åˆ¤æ–­é¼ æ ‡æ˜¯å¦ç§»å‡ºäº‹ä»¶</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isMouseOut</span>(<span class="params">e, handler</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (e.type !== <span class="string">"mouseout"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> reltg = e.relatedTarget</span><br><span class="line">    ? e.relatedTarget</span><br><span class="line">    : e.type === <span class="string">"mouseout"</span></span><br><span class="line">    ? e.toElement</span><br><span class="line">    : e.fromElement;</span><br><span class="line">  <span class="keyword">while</span> (reltg &amp;&amp; reltg !== handler) &#123;</span><br><span class="line">    reltg = reltg.parentNode;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> reltg !== handler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­æ˜¯å¦Touchå±å¹•"><a href="#åˆ¤æ–­æ˜¯å¦Touchå±å¹•" class="headerlink" title="åˆ¤æ–­æ˜¯å¦Touchå±å¹•"></a>åˆ¤æ–­æ˜¯å¦Touchå±å¹•</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isTouchScreen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="string">"ontouchstart"</span> <span class="keyword">in</span> <span class="built_in">window</span> ||</span><br><span class="line">    (<span class="built_in">window</span>.DocumentTouch &amp;&amp; <span class="built_in">document</span> <span class="keyword">instanceof</span> DocumentTouch)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­æ˜¯å¦ä¸ºç½‘å€"><a href="#åˆ¤æ–­æ˜¯å¦ä¸ºç½‘å€" class="headerlink" title="åˆ¤æ–­æ˜¯å¦ä¸ºç½‘å€"></a>åˆ¤æ–­æ˜¯å¦ä¸ºç½‘å€</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isURL</span>(<span class="params">strUrl</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> regular = <span class="regexp">/^\b(((https?|ftp):\/\/)?[-a-z0-9]+(\.[-a-z0-9]+)*\.(?:com|edu|gov|int|mil|net|org|biz|info|name|museum|asia|coop|aero|[a-z][a-z]|((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d))\b(\/[-a-z0-9_:\@&amp;?=+,.!\/~%\$]*)?)$/i</span>;</span><br><span class="line">  <span class="keyword">if</span> (regular.test(strUrl)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­æ˜¯å¦æ‰“å¼€è§†çª—"><a href="#åˆ¤æ–­æ˜¯å¦æ‰“å¼€è§†çª—" class="headerlink" title="åˆ¤æ–­æ˜¯å¦æ‰“å¼€è§†çª—"></a>åˆ¤æ–­æ˜¯å¦æ‰“å¼€è§†çª—</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isViewportOpen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> !!<span class="built_in">document</span>.getElementById(<span class="string">"wixMobileViewport"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åŠ è½½æ ·å¼æ–‡ä»¶"><a href="#åŠ è½½æ ·å¼æ–‡ä»¶" class="headerlink" title="åŠ è½½æ ·å¼æ–‡ä»¶"></a>åŠ è½½æ ·å¼æ–‡ä»¶</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadStyle</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.createStyleSheet(url);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">var</span> cssLink = <span class="built_in">document</span>.createElement(<span class="string">"link"</span>);</span><br><span class="line">    cssLink.rel = <span class="string">"stylesheet"</span>;</span><br><span class="line">    cssLink.type = <span class="string">"text/css"</span>;</span><br><span class="line">    cssLink.href = url;</span><br><span class="line">    <span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>];</span><br><span class="line">    head.appendChild(cssLink);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ›¿æ¢åœ°å€æ "><a href="#æ›¿æ¢åœ°å€æ " class="headerlink" title="æ›¿æ¢åœ°å€æ "></a>æ›¿æ¢åœ°å€æ </h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">locationReplace</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (history.replaceState) &#123;</span><br><span class="line">    history.replaceState(<span class="literal">null</span>, <span class="built_in">document</span>.title, url);</span><br><span class="line">    history.go(<span class="number">0</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    location.replace(url);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è§£å†³offsetXå…¼å®¹æ€§é—®é¢˜"><a href="#è§£å†³offsetXå…¼å®¹æ€§é—®é¢˜" class="headerlink" title="è§£å†³offsetXå…¼å®¹æ€§é—®é¢˜"></a>è§£å†³offsetXå…¼å®¹æ€§é—®é¢˜</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é’ˆå¯¹ç«ç‹ä¸æ”¯æŒoffsetX/Y</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOffset</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> target = e.target, <span class="comment">// å½“å‰è§¦å‘çš„ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">    eventCoord,</span><br><span class="line">    pageCoord,</span><br><span class="line">    offsetCoord;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¡ç®—å½“å‰è§¦å‘å…ƒç´ åˆ°æ–‡æ¡£çš„è·ç¦»</span></span><br><span class="line">  pageCoord = getPageCoord(target);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¡ç®—å…‰æ ‡åˆ°æ–‡æ¡£çš„è·ç¦»</span></span><br><span class="line">  eventCoord = &#123;</span><br><span class="line">    X: <span class="built_in">window</span>.pageXOffset + e.clientX,</span><br><span class="line">    Y: <span class="built_in">window</span>.pageYOffset + e.clientY</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç›¸å‡è·å–å…‰æ ‡åˆ°ç¬¬ä¸€ä¸ªå®šä½çš„çˆ¶å…ƒç´ çš„åæ ‡</span></span><br><span class="line">  offsetCoord = &#123;</span><br><span class="line">    X: eventCoord.X - pageCoord.X,</span><br><span class="line">    Y: eventCoord.Y - pageCoord.Y</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> offsetCoord;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageCoord</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> coord = &#123; <span class="attr">X</span>: <span class="number">0</span>, <span class="attr">Y</span>: <span class="number">0</span> &#125;;</span><br><span class="line">  <span class="comment">// è®¡ç®—ä»å½“å‰è§¦å‘å…ƒç´ åˆ°æ ¹èŠ‚ç‚¹ä¸ºæ­¢ï¼Œ</span></span><br><span class="line">  <span class="comment">// å„çº§ offsetParent å…ƒç´ çš„ offsetLeft æˆ– offsetTop å€¼ä¹‹å’Œ</span></span><br><span class="line">  <span class="keyword">while</span> (element) &#123;</span><br><span class="line">    coord.X += element.offsetLeft;</span><br><span class="line">    coord.Y += element.offsetTop;</span><br><span class="line">    element = element.offsetParent;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> coord;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ‰“å¼€ä¸€ä¸ªçª—ä½“é€šç”¨æ–¹æ³•"><a href="#æ‰“å¼€ä¸€ä¸ªçª—ä½“é€šç”¨æ–¹æ³•" class="headerlink" title="æ‰“å¼€ä¸€ä¸ªçª—ä½“é€šç”¨æ–¹æ³•"></a>æ‰“å¼€ä¸€ä¸ªçª—ä½“é€šç”¨æ–¹æ³•</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">openWindow</span>(<span class="params">url, windowName, width, height</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="built_in">parseInt</span>(screen.width / <span class="number">2.0</span>) - width / <span class="number">2.0</span>;</span><br><span class="line">  <span class="keyword">var</span> y = <span class="built_in">parseInt</span>(screen.height / <span class="number">2.0</span>) - height / <span class="number">2.0</span>;</span><br><span class="line">  <span class="keyword">var</span> isMSIE = navigator.appName == <span class="string">"Microsoft Internet Explorer"</span>;</span><br><span class="line">  <span class="keyword">if</span> (isMSIE) &#123;</span><br><span class="line">    <span class="keyword">var</span> p = <span class="string">"resizable=1,location=no,scrollbars=no,width="</span>;</span><br><span class="line">    p = p + width;</span><br><span class="line">    p = p + <span class="string">",height="</span>;</span><br><span class="line">    p = p + height;</span><br><span class="line">    p = p + <span class="string">",left="</span>;</span><br><span class="line">    p = p + x;</span><br><span class="line">    p = p + <span class="string">",top="</span>;</span><br><span class="line">    p = p + y;</span><br><span class="line">    retval = <span class="built_in">window</span>.open(url, windowName, p);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> win = <span class="built_in">window</span>.open(</span><br><span class="line">      url,</span><br><span class="line">      <span class="string">"ZyiisPopup"</span>,</span><br><span class="line">      <span class="string">"top="</span> +</span><br><span class="line">        y +</span><br><span class="line">        <span class="string">",left="</span> +</span><br><span class="line">        x +</span><br><span class="line">        <span class="string">",scrollbars="</span> +</span><br><span class="line">        scrollbars +</span><br><span class="line">        <span class="string">",dialog=yes,modal=yes,width="</span> +</span><br><span class="line">        width +</span><br><span class="line">        <span class="string">",height="</span> +</span><br><span class="line">        height +</span><br><span class="line">        <span class="string">",resizable=no"</span></span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">eval</span>(<span class="string">"try &#123; win.resizeTo(width, height); &#125; catch(e) &#123; &#125;"</span>);</span><br><span class="line">    win.focus();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å°†é”®å€¼å¯¹æ‹¼æ¥æˆURLå¸¦å‚æ•°"><a href="#å°†é”®å€¼å¯¹æ‹¼æ¥æˆURLå¸¦å‚æ•°" class="headerlink" title="å°†é”®å€¼å¯¹æ‹¼æ¥æˆURLå¸¦å‚æ•°"></a>å°†é”®å€¼å¯¹æ‹¼æ¥æˆURLå¸¦å‚æ•°</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">const</span> fnParams2Url = <span class="function"><span class="params">obj</span>=&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> aUrl = []</span><br><span class="line">      <span class="keyword">let</span> fnAdd = <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key + <span class="string">'='</span> + value</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> k <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        aUrl.push(fnAdd(k, obj[k]))</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">encodeURIComponent</span>(aUrl.join(<span class="string">'&amp;'</span>))</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h1 id="å»æ‰urlå‰ç¼€"><a href="#å»æ‰urlå‰ç¼€" class="headerlink" title="å»æ‰urlå‰ç¼€"></a>å»æ‰urlå‰ç¼€</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeUrlPrefix</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  a = a</span><br><span class="line">    .replace(<span class="regexp">/ï¼š/g</span>, <span class="string">":"</span>)</span><br><span class="line">    .replace(<span class="regexp">/ï¼/g</span>, <span class="string">"."</span>)</span><br><span class="line">    .replace(<span class="regexp">/ï¼/g</span>, <span class="string">"/"</span>);</span><br><span class="line">  <span class="keyword">while</span> (</span><br><span class="line">    trim(a)</span><br><span class="line">      .toLowerCase()</span><br><span class="line">      .indexOf(<span class="string">"http://"</span>) == <span class="number">0</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    a = trim(a.replace(<span class="regexp">/http:\/\//i</span>, <span class="string">""</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ›¿æ¢å…¨éƒ¨"><a href="#æ›¿æ¢å…¨éƒ¨" class="headerlink" title="æ›¿æ¢å…¨éƒ¨"></a>æ›¿æ¢å…¨éƒ¨</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.replaceAll = <span class="function"><span class="keyword">function</span>(<span class="params">s1, s2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(s1, <span class="string">"gm"</span>), s2);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="resizeçš„æ“ä½œ"><a href="#resizeçš„æ“ä½œ" class="headerlink" title="resizeçš„æ“ä½œ"></a>resizeçš„æ“ä½œ</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> w = <span class="built_in">document</span>.documentElement</span><br><span class="line">        ? <span class="built_in">document</span>.documentElement.clientWidth</span><br><span class="line">        : <span class="built_in">document</span>.body.clientWidth,</span><br><span class="line">      r = <span class="number">1255</span>,</span><br><span class="line">      b = Element.extend(<span class="built_in">document</span>.body),</span><br><span class="line">      classname = b.className;</span><br><span class="line">    <span class="keyword">if</span> (w &lt; r) &#123;</span><br><span class="line">      <span class="comment">//å½“çª—ä½“çš„å®½åº¦å°äº1255çš„æ—¶å€™æ‰§è¡Œç›¸åº”çš„æ“ä½œ</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//å½“çª—ä½“çš„å®½åº¦å¤§äº1255çš„æ—¶å€™æ‰§è¡Œç›¸åº”çš„æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">"resize"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      fn();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.attachEvent) &#123;</span><br><span class="line">    <span class="built_in">window</span>.attachEvent(<span class="string">"onresize"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      fn();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  fn();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h1 id="æ»šåŠ¨åˆ°é¡¶éƒ¨"><a href="#æ»šåŠ¨åˆ°é¡¶éƒ¨" class="headerlink" title="æ»šåŠ¨åˆ°é¡¶éƒ¨"></a>æ»šåŠ¨åˆ°é¡¶éƒ¨</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨document.documentElement.scrollTop æˆ– document.body.scrollTop è·å–åˆ°é¡¶éƒ¨çš„è·ç¦»ï¼Œä»é¡¶éƒ¨</span></span><br><span class="line"><span class="comment">// æ»šåŠ¨ä¸€å°éƒ¨åˆ†è·ç¦»ã€‚ä½¿ç”¨window.requestAnimationFrame()æ¥æ»šåŠ¨ã€‚</span></span><br><span class="line"><span class="comment">// @example</span></span><br><span class="line"><span class="comment">// scrollToTop();</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scrollToTop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> c = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (c &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">window</span>.requestAnimationFrame(scrollToTop);</span><br><span class="line">    <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, c - c / <span class="number">8</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è®¾ç½®cookieå€¼"><a href="#è®¾ç½®cookieå€¼" class="headerlink" title="è®¾ç½®cookieå€¼"></a>è®¾ç½®cookieå€¼</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name, value, Hours</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  <span class="keyword">var</span> offset = <span class="number">8</span>;</span><br><span class="line">  <span class="keyword">var</span> utc = d.getTime() + d.getTimezoneOffset() * <span class="number">60000</span>;</span><br><span class="line">  <span class="keyword">var</span> nd = utc + <span class="number">3600000</span> * offset;</span><br><span class="line">  <span class="keyword">var</span> exp = <span class="keyword">new</span> <span class="built_in">Date</span>(nd);</span><br><span class="line">  exp.setTime(exp.getTime() + Hours * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">  <span class="built_in">document</span>.cookie =</span><br><span class="line">    name +</span><br><span class="line">    <span class="string">"="</span> +</span><br><span class="line">    <span class="built_in">escape</span>(value) +</span><br><span class="line">    <span class="string">";path=/;expires="</span> +</span><br><span class="line">    exp.toGMTString() +</span><br><span class="line">    <span class="string">";domain=360doc.com;"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è®¾ä¸ºé¦–é¡µ"><a href="#è®¾ä¸ºé¦–é¡µ" class="headerlink" title="è®¾ä¸ºé¦–é¡µ"></a>è®¾ä¸ºé¦–é¡µ</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setHomepage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.all) &#123;</span><br><span class="line">    <span class="built_in">document</span>.body.style.behavior = <span class="string">"url(#default#homepage)"</span>;</span><br><span class="line">    <span class="built_in">document</span>.body.setHomePage(<span class="string">"http://w3cboy.com"</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.sidebar) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.netscape) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        netscape.security.PrivilegeManager.enablePrivilege(</span><br><span class="line">          <span class="string">"UniversalXPConnect"</span></span><br><span class="line">        );</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        alert(</span><br><span class="line">          <span class="string">"è¯¥æ“ä½œè¢«æµè§ˆå™¨æ‹’ç»ï¼Œå¦‚æœæƒ³å¯ç”¨è¯¥åŠŸèƒ½ï¼Œè¯·åœ¨åœ°å€æ å†…è¾“å…¥ about:config,ç„¶åå°†é¡¹ signed.applets.codebase_principal_support å€¼è¯¥ä¸ºtrue"</span></span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> prefs = Components.classes[</span><br><span class="line">      <span class="string">"@mozilla.org/preferences-service;1"</span></span><br><span class="line">    ].getService(Components.interfaces.nsIPrefBranch);</span><br><span class="line">    prefs.setCharPref(<span class="string">"browser.startup.homepage"</span>, <span class="string">"http://w3cboy.com"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æŒ‰å­—æ¯æ’åºï¼Œå¯¹æ¯è¡Œè¿›è¡Œæ•°ç»„æ’åº"><a href="#æŒ‰å­—æ¯æ’åºï¼Œå¯¹æ¯è¡Œè¿›è¡Œæ•°ç»„æ’åº" class="headerlink" title="æŒ‰å­—æ¯æ’åºï¼Œå¯¹æ¯è¡Œè¿›è¡Œæ•°ç»„æ’åº"></a>æŒ‰å­—æ¯æ’åºï¼Œå¯¹æ¯è¡Œè¿›è¡Œæ•°ç»„æ’åº</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setSort</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> text = K1.value</span><br><span class="line">    .split(<span class="regexp">/[\r\n]/</span>)</span><br><span class="line">    .sort()</span><br><span class="line">    .join(<span class="string">"\r\n"</span>); <span class="comment">//é¡ºåº</span></span><br><span class="line">  <span class="keyword">var</span> test = K1.value</span><br><span class="line">    .split(<span class="regexp">/[\r\n]/</span>)</span><br><span class="line">    .sort()</span><br><span class="line">    .reverse()</span><br><span class="line">    .join(<span class="string">"\r\n"</span>); <span class="comment">//ååº</span></span><br><span class="line">  K1.value = K1.value != text ? text : test;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å»¶æ—¶æ‰§è¡Œ"><a href="#å»¶æ—¶æ‰§è¡Œ" class="headerlink" title="å»¶æ—¶æ‰§è¡Œ"></a>å»¶æ—¶æ‰§è¡Œ</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¯”å¦‚ sleep(1000) æ„å‘³ç€ç­‰å¾…1000æ¯«ç§’ï¼Œè¿˜å¯ä» Promiseã€Generatorã€Async/Await ç­‰è§’åº¦å®ç°ã€‚</span></span><br><span class="line"><span class="comment">// Promise</span></span><br><span class="line"><span class="keyword">const</span> sleep = <span class="function"><span class="params">time</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(resolve, time));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">sleep(<span class="number">1000</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Generator</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">sleepGenerator</span>(<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(resolve, time);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sleepGenerator(<span class="number">1000</span>)</span><br><span class="line">  .next()</span><br><span class="line">  .value.then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//async</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(resolve, time));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">output</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> out = <span class="keyword">await</span> sleep(<span class="number">1000</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">callback, time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> callback === <span class="string">"function"</span>) &#123;</span><br><span class="line">    setTimeout(callback, time);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">output</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sleep(output, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
<h1 id="åˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å¤´"><a href="#åˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å¤´" class="headerlink" title="åˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å¤´"></a>åˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å¤´</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.startWith = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.indexOf(s) == <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="æ¸…é™¤è„šæœ¬å†…å®¹"><a href="#æ¸…é™¤è„šæœ¬å†…å®¹" class="headerlink" title="æ¸…é™¤è„šæœ¬å†…å®¹"></a>æ¸…é™¤è„šæœ¬å†…å®¹</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stripscript</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> s.replace(<span class="regexp">/&lt;script.*?&gt;.*?&lt;\/script&gt;/gi</span>, <span class="string">""</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ—¶é—´ä¸ªæ€§åŒ–è¾“å‡ºåŠŸèƒ½"><a href="#æ—¶é—´ä¸ªæ€§åŒ–è¾“å‡ºåŠŸèƒ½" class="headerlink" title="æ—¶é—´ä¸ªæ€§åŒ–è¾“å‡ºåŠŸèƒ½"></a>æ—¶é—´ä¸ªæ€§åŒ–è¾“å‡ºåŠŸèƒ½</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1ã€&lt; 60s, æ˜¾ç¤ºä¸ºâ€œåˆšåˆšâ€</span></span><br><span class="line"><span class="comment">2ã€&gt;= 1min &amp;&amp; &lt; 60 min, æ˜¾ç¤ºä¸å½“å‰æ—¶é—´å·®â€œXXåˆ†é’Ÿå‰â€</span></span><br><span class="line"><span class="comment">3ã€&gt;= 60min &amp;&amp; &lt; 1day, æ˜¾ç¤ºä¸å½“å‰æ—¶é—´å·®â€œä»Šå¤© XX:XXâ€</span></span><br><span class="line"><span class="comment">4ã€&gt;= 1day &amp;&amp; &lt; 1year, æ˜¾ç¤ºæ—¥æœŸâ€œXXæœˆXXæ—¥ XX:XXâ€</span></span><br><span class="line"><span class="comment">5ã€&gt;= 1year, æ˜¾ç¤ºå…·ä½“æ—¥æœŸâ€œXXXXå¹´XXæœˆXXæ—¥ XX:XXâ€</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeFormat</span>(<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(time),</span><br><span class="line">    curDate = <span class="keyword">new</span> <span class="built_in">Date</span>(),</span><br><span class="line">    year = date.getFullYear(),</span><br><span class="line">    month = date.getMonth() + <span class="number">10</span>,</span><br><span class="line">    day = date.getDate(),</span><br><span class="line">    hour = date.getHours(),</span><br><span class="line">    minute = date.getMinutes(),</span><br><span class="line">    curYear = curDate.getFullYear(),</span><br><span class="line">    curHour = curDate.getHours(),</span><br><span class="line">    timeStr;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (year &lt; curYear) &#123;</span><br><span class="line">    timeStr = year + <span class="string">"å¹´"</span> + month + <span class="string">"æœˆ"</span> + day + <span class="string">"æ—¥ "</span> + hour + <span class="string">":"</span> + minute;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> pastTime = curDate - date,</span><br><span class="line">      pastH = pastTime / <span class="number">3600000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (pastH &gt; curHour) &#123;</span><br><span class="line">      timeStr = month + <span class="string">"æœˆ"</span> + day + <span class="string">"æ—¥ "</span> + hour + <span class="string">":"</span> + minute;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pastH &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">      timeStr = <span class="string">"ä»Šå¤© "</span> + hour + <span class="string">":"</span> + minute + <span class="string">"åˆ†"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> pastM = curDate.getMinutes() - minute;</span><br><span class="line">      <span class="keyword">if</span> (pastM &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        timeStr = pastM + <span class="string">"åˆ†é’Ÿå‰"</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        timeStr = <span class="string">"åˆšåˆš"</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> timeStr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…¨è§’è½¬æ¢ä¸ºåŠè§’å‡½æ•°"><a href="#å…¨è§’è½¬æ¢ä¸ºåŠè§’å‡½æ•°" class="headerlink" title="å…¨è§’è½¬æ¢ä¸ºåŠè§’å‡½æ•°"></a>å…¨è§’è½¬æ¢ä¸ºåŠè§’å‡½æ•°</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toCDB</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.length; i++) &#123;</span><br><span class="line">    code = str.charCodeAt(i);</span><br><span class="line">    <span class="keyword">if</span> (code &gt;= <span class="number">65281</span> &amp;&amp; code &lt;= <span class="number">65374</span>) &#123;</span><br><span class="line">      result += <span class="built_in">String</span>.fromCharCode(str.charCodeAt(i) - <span class="number">65248</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (code == <span class="number">12288</span>) &#123;</span><br><span class="line">      result += <span class="built_in">String</span>.fromCharCode(str.charCodeAt(i) - <span class="number">12288</span> + <span class="number">32</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      result += str.charAt(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åŠè§’è½¬æ¢ä¸ºå…¨è§’å‡½æ•°"><a href="#åŠè§’è½¬æ¢ä¸ºå…¨è§’å‡½æ•°" class="headerlink" title="åŠè§’è½¬æ¢ä¸ºå…¨è§’å‡½æ•°"></a>åŠè§’è½¬æ¢ä¸ºå…¨è§’å‡½æ•°</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toDBC</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.length; i++) &#123;</span><br><span class="line">    code = str.charCodeAt(i);</span><br><span class="line">    <span class="keyword">if</span> (code &gt;= <span class="number">33</span> &amp;&amp; code &lt;= <span class="number">126</span>) &#123;</span><br><span class="line">      result += <span class="built_in">String</span>.fromCharCode(str.charCodeAt(i) + <span class="number">65248</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (code == <span class="number">32</span>) &#123;</span><br><span class="line">      result += <span class="built_in">String</span>.fromCharCode(str.charCodeAt(i) + <span class="number">12288</span> - <span class="number">32</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      result += str.charAt(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é‡‘é¢å¤§å†™è½¬æ¢å‡½æ•°"><a href="#é‡‘é¢å¤§å†™è½¬æ¢å‡½æ•°" class="headerlink" title="é‡‘é¢å¤§å†™è½¬æ¢å‡½æ•°"></a>é‡‘é¢å¤§å†™è½¬æ¢å‡½æ•°</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">transform</span>(<span class="params">tranvalue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">var</span> dw2 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">""</span>, <span class="string">"ä¸‡"</span>, <span class="string">"äº¿"</span>); <span class="comment">//å¤§å•ä½</span></span><br><span class="line">    <span class="keyword">var</span> dw1 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">"æ‹¾"</span>, <span class="string">"ä½°"</span>, <span class="string">"ä»Ÿ"</span>); <span class="comment">//å°å•ä½</span></span><br><span class="line">    <span class="keyword">var</span> dw = <span class="keyword">new</span> <span class="built_in">Array</span>(</span><br><span class="line">      <span class="string">"é›¶"</span>,</span><br><span class="line">      <span class="string">"å£¹"</span>,</span><br><span class="line">      <span class="string">"è´°"</span>,</span><br><span class="line">      <span class="string">"å"</span>,</span><br><span class="line">      <span class="string">"è‚†"</span>,</span><br><span class="line">      <span class="string">"ä¼"</span>,</span><br><span class="line">      <span class="string">"é™†"</span>,</span><br><span class="line">      <span class="string">"æŸ’"</span>,</span><br><span class="line">      <span class="string">"æŒ"</span>,</span><br><span class="line">      <span class="string">"ç–"</span></span><br><span class="line">    ); </span><br><span class="line">    <span class="comment">//æ•´æ•°éƒ¨åˆ†ç”¨</span></span><br><span class="line">    <span class="comment">//ä»¥ä¸‹æ˜¯å°å†™è½¬æ¢æˆå¤§å†™æ˜¾ç¤ºåœ¨åˆè®¡å¤§å†™çš„æ–‡æœ¬æ¡†ä¸­</span></span><br><span class="line">    <span class="comment">//åˆ†ç¦»æ•´æ•°ä¸å°æ•°</span></span><br><span class="line">    <span class="keyword">var</span> source = splits(tranvalue);</span><br><span class="line">    <span class="keyword">var</span> num = source[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> dig = source[<span class="number">1</span>];</span><br><span class="line">    <span class="comment">//è½¬æ¢æ•´æ•°éƒ¨åˆ†</span></span><br><span class="line">    <span class="keyword">var</span> k1 = <span class="number">0</span>; <span class="comment">//è®¡å°å•ä½</span></span><br><span class="line">    <span class="keyword">var</span> k2 = <span class="number">0</span>; <span class="comment">//è®¡å¤§å•ä½</span></span><br><span class="line">    <span class="keyword">var</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> str = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">var</span> len = source[<span class="number">0</span>].length; <span class="comment">//æ•´æ•°çš„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= len; i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> n = source[<span class="number">0</span>].charAt(len - i); <span class="comment">//å–å¾—æŸä¸ªä½æ•°ä¸Šçš„æ•°å­—</span></span><br><span class="line">      <span class="keyword">var</span> bn = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">if</span> (len - i - <span class="number">1</span> &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        bn = source[<span class="number">0</span>].charAt(len - i - <span class="number">1</span>); <span class="comment">//å–å¾—æŸä¸ªä½æ•°å‰ä¸€ä½ä¸Šçš„æ•°å­—</span></span><br><span class="line">      &#125;</span><br><span class="line">      sum = sum + <span class="built_in">Number</span>(n);</span><br><span class="line">      <span class="keyword">if</span> (sum != <span class="number">0</span>) &#123;</span><br><span class="line">        str = dw[<span class="built_in">Number</span>(n)].concat(str); <span class="comment">//å–å¾—è¯¥æ•°å­—å¯¹åº”çš„å¤§å†™æ•°å­—ï¼Œå¹¶æ’å…¥åˆ°strå­—ç¬¦ä¸²çš„å‰é¢</span></span><br><span class="line">        <span class="keyword">if</span> (n == <span class="string">"0"</span>) sum = <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (len - i - <span class="number">1</span> &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//åœ¨æ•°å­—èŒƒå›´å†…</span></span><br><span class="line">        <span class="keyword">if</span> (k1 != <span class="number">3</span>) &#123;</span><br><span class="line">          <span class="comment">//åŠ å°å•ä½</span></span><br><span class="line">          <span class="keyword">if</span> (bn != <span class="number">0</span>) &#123;</span><br><span class="line">            str = dw1[k1].concat(str);</span><br><span class="line">          &#125;</span><br><span class="line">          k1++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">//ä¸åŠ å°å•ä½ï¼ŒåŠ å¤§å•ä½</span></span><br><span class="line">          k1 = <span class="number">0</span>;</span><br><span class="line">          <span class="keyword">var</span> temp = str.charAt(<span class="number">0</span>);</span><br><span class="line">          <span class="keyword">if</span> (temp == <span class="string">"ä¸‡"</span> || temp == <span class="string">"äº¿"</span>)</span><br><span class="line">            <span class="comment">//è‹¥å¤§å•ä½å‰æ²¡æœ‰æ•°å­—åˆ™èˆå»å¤§å•ä½</span></span><br><span class="line">            str = str.substr(<span class="number">1</span>, str.length - <span class="number">1</span>);</span><br><span class="line">          str = dw2[k2].concat(str);</span><br><span class="line">          sum = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (k1 == <span class="number">3</span>) &#123;</span><br><span class="line">        <span class="comment">//å°å•ä½åˆ°åƒåˆ™å¤§å•ä½è¿›ä¸€</span></span><br><span class="line">        k2++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è½¬æ¢å°æ•°éƒ¨åˆ†</span></span><br><span class="line">    <span class="keyword">var</span> strdig = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">if</span> (dig != <span class="string">""</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> n = dig.charAt(<span class="number">0</span>);</span><br><span class="line">      <span class="keyword">if</span> (n != <span class="number">0</span>) &#123;</span><br><span class="line">        strdig += dw[<span class="built_in">Number</span>(n)] + <span class="string">"è§’"</span>; <span class="comment">//åŠ æ•°å­—</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> n = dig.charAt(<span class="number">1</span>);</span><br><span class="line">      <span class="keyword">if</span> (n != <span class="number">0</span>) &#123;</span><br><span class="line">        strdig += dw[<span class="built_in">Number</span>(n)] + <span class="string">"åˆ†"</span>; <span class="comment">//åŠ æ•°å­—</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    str += <span class="string">"å…ƒ"</span> + strdig;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"0å…ƒ"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ‹†åˆ†æ•´æ•°ä¸å°æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">splits</span>(<span class="params">tranvalue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">""</span>, <span class="string">""</span>);</span><br><span class="line">  temp = tranvalue.split(<span class="string">"."</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; temp.length; i++) &#123;</span><br><span class="line">    value = temp;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ¸…é™¤ç©ºæ ¼"><a href="#æ¸…é™¤ç©ºæ ¼" class="headerlink" title="æ¸…é™¤ç©ºæ ¼"></a>æ¸…é™¤ç©ºæ ¼</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.trim = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> reExtraSpace = <span class="regexp">/^\s*(.*?)\s+$/</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.replace(reExtraSpace, <span class="string">"$1"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸…é™¤å·¦ç©ºæ ¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ltrim</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> s.replace(<span class="regexp">/^(\s*|ã€€*)/</span>, <span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸…é™¤å³ç©ºæ ¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rtrim</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> s.replace(<span class="regexp">/(\s*|ã€€*)$/</span>, <span class="string">""</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="éšæœºæ•°æ—¶é—´æˆ³"><a href="#éšæœºæ•°æ—¶é—´æˆ³" class="headerlink" title="éšæœºæ•°æ—¶é—´æˆ³"></a>éšæœºæ•°æ—¶é—´æˆ³</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniqueId</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">Math</span>.random,</span><br><span class="line">    b = <span class="built_in">parseInt</span>;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="built_in">Number</span>(<span class="keyword">new</span> <span class="built_in">Date</span>()).toString() + b(<span class="number">10</span> * a()) + b(<span class="number">10</span> * a()) + b(<span class="number">10</span> * a())</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å®ç°utf8è§£ç "><a href="#å®ç°utf8è§£ç " class="headerlink" title="å®ç°utf8è§£ç "></a>å®ç°utf8è§£ç </h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">utf8_decode</span>(<span class="params">str_data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> tmp_arr = [],</span><br><span class="line">    i = <span class="number">0</span>,</span><br><span class="line">    ac = <span class="number">0</span>,</span><br><span class="line">    c1 = <span class="number">0</span>,</span><br><span class="line">    c2 = <span class="number">0</span>,</span><br><span class="line">    c3 = <span class="number">0</span>;</span><br><span class="line">  str_data += <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">while</span> (i &lt; str_data.length) &#123;</span><br><span class="line">    c1 = str_data.charCodeAt(i);</span><br><span class="line">    <span class="keyword">if</span> (c1 &lt; <span class="number">128</span>) &#123;</span><br><span class="line">      tmp_arr[ac++] = <span class="built_in">String</span>.fromCharCode(c1);</span><br><span class="line">      i++;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (c1 &gt; <span class="number">191</span> &amp;&amp; c1 &lt; <span class="number">224</span>) &#123;</span><br><span class="line">      c2 = str_data.charCodeAt(i + <span class="number">1</span>);</span><br><span class="line">      tmp_arr[ac++] = <span class="built_in">String</span>.fromCharCode(((c1 &amp; <span class="number">31</span>) &lt;&lt; <span class="number">6</span>) | (c2 &amp; <span class="number">63</span>));</span><br><span class="line">      i += <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      c2 = str_data.charCodeAt(i + <span class="number">1</span>);</span><br><span class="line">      c3 = str_data.charCodeAt(i + <span class="number">2</span>);</span><br><span class="line">      tmp_arr[ac++] = <span class="built_in">String</span>.fromCharCode(</span><br><span class="line">        ((c1 &amp; <span class="number">15</span>) &lt;&lt; <span class="number">12</span>) | ((c2 &amp; <span class="number">63</span>) &lt;&lt; <span class="number">6</span>) | (c3 &amp; <span class="number">63</span>)</span><br><span class="line">      );</span><br><span class="line">      i += <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> tmp_arr.join(<span class="string">""</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://mp.weixin.qq.com/s?__biz=MzUzOTM0MTE4OQ==&amp;mid=2247485899&amp;idx=1&amp;sn=de526f7f1d2ff1b42b90acc196937845&amp;chksm=fac8b121cdbf3837823eb0be690995448c15712144784a13c08c2eca04a35bc74145d4e51563&amp;mpshare=1&amp;scene=1&amp;srcid=0702WArToY4Zf2DneCeKOUoB&amp;sharer_sharetime=1590937398297&amp;sharer_shareid=3513f92f23030a0a67fb38005d1b6a29&amp;key=5a8ad89db03556ba46925cff95d066a2df5a1d5e094bc547591a271e87a02b52912188eb823da168e5f8a53a67a9ebec0966381c3f733daff7ddbe868b913ff526fb7116394abe7ebaebfe29d620fc81&amp;ascene=1&amp;uin=MjU3MDI1Njk0MA%3D%3D&amp;devicetype=Windows+10+x64&amp;version=62090070&amp;lang=zh_CN&amp;exportkey=AYuk7Hyn2g9m%2F3%2FguTy9qU4%3D&amp;pass_ticket=tlYkCwsVMifHd%2B0aIDak4asRIQAnO44krb6gL09ZBy8PXxCTYCFw6N1GoCZ9j5uG" target="_blank" rel="noopener">JSå¸¸ç”¨å¼€å‘å·¥å…·å‡½æ•°</a></p>
<p><a href="https://github.com/Wscats/CV/issues/27" target="_blank" rel="noopener">https://github.com/Wscats/CV/issues/27</a></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzI0MjU2NDAzNg==&amp;mid=2247484824&amp;idx=1&amp;sn=1c9fc5b3310966fdcbadd436420a9005&amp;chksm=e97b2b33de0ca2255fab8c88eeb41fc582a27792fa5d83ee9613d6538700138b401bffa6f553&amp;mpshare=1&amp;scene=1&amp;srcid=0607D41r6HIeKvnND5wOXbN7&amp;sharer_sharetime=1591532631985&amp;sharer_shareid=3513f92f23030a0a67fb38005d1b6a29&amp;key=aa494bdf4b4d432b93b7314bb1484e169b6fcf79fb08fb265c503ba4735e1c12be235689a04bac70f76f1608ca506093645d25faed1268fe800e71f9c37c49a9119773966e748e0eb19f4fb595d126dc&amp;ascene=1&amp;uin=MjU3MDI1Njk0MA%3D%3D&amp;devicetype=Windows+10+x64&amp;version=62090070&amp;lang=zh_CN&amp;exportkey=AYnr%2BjV5F8NJ%2Bw3wVg6O5oY%3D&amp;pass_ticket=4ivJL1%2BM8e0a98rw%2FTvUhJUE7jMnZAFS%2FmdjHYPo6UGmzIk2G49W6HxA5pv94EBm" target="_blank" rel="noopener">å¸¸è§å‡½æ•°</a></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MjM5MzUxNTgyMg==&amp;mid=2455602711&amp;idx=1&amp;sn=71532346e04a9894a566188d3e85daea&amp;chksm=b13cf656864b7f40174e4a827b1c5dfb5ebb542837e5cde067350bc61c6b1428c1298c6c8195&amp;mpshare=1&amp;scene=1&amp;srcid=0607LJZiEWYJWZdqO8E1JC7I&amp;sharer_sharetime=1591532869066&amp;sharer_shareid=3513f92f23030a0a67fb38005d1b6a29&amp;key=e6152aaf211ea82497530d90078e6191de13d495e1d3394958d2eb78cc41dbcb89cb81c696531e31add258def72727a991d5a9ab331e0110f787f90a65a6420e55fdfade59b7542eabed3f7792dc5417&amp;ascene=1&amp;uin=MjU3MDI1Njk0MA%3D%3D&amp;devicetype=Windows+10+x64&amp;version=62090070&amp;lang=zh_CN&amp;exportkey=AfUjrsawVfc6J%2FnX1gThuLM%3D&amp;pass_ticket=4ivJL1%2BM8e0a98rw%2FTvUhJUE7jMnZAFS%2FmdjHYPo6UGmzIk2G49W6HxA5pv94EBm" target="_blank" rel="noopener">é˜²æŠ–</a></p>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³Githubç½‘é¡µä¸Šå›¾ç‰‡æ˜¾ç¤ºå¤±è´¥é—®é¢˜</title>
    <url>/2020/05/29/%E8%A7%A3%E5%86%B3Github%E7%BD%91%E9%A1%B5%E4%B8%8A%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA%E5%A4%B1%E8%B4%A5%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>æœ€è¿‘ç§‘å­¦ä¸Šç½‘å¤±æ•ˆçš„æœ‰äº›é¢‘ç¹ï¼Œä¸ŠGithubçš„æ—¶å€™å›¾ç‰‡æ€»æ˜¯åŠ è½½ä¸å‡ºæ¥ï¼Œä¹‹å‰æ²¡æœ‰åœ¨æ„ï¼Œä½†æ˜¯è‡ªå·±åšå®¢ä¸­çš„å›¾ç‰‡ä¹Ÿæ˜¯ä¾èµ–Githubçš„æ—¶å€™å°±ç•™æ„åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚<strong>ï¼ˆå¦‚æœæœ‰ç§‘å­¦ä¸Šç½‘è¯·éšæ„ï¼‰</strong></p>
<a id="more"></a>
<p><img src="https://github.static.si-yee.com/posts/SolvetheproblemofimagedisplayfailureonGitHubwebpage/20200604140631.png" alt></p>
<p>ä¸»è¦æŠ¥é”™æ˜¯<code>Failed to load resource: net::ERR_CERT_COMMON_NAME_INVALID</code>ä»¥åŠ<code>Failed to load resource: net::ERR_CONNECTION_RESET</code></p>
<p><strong>æ¥è‡ªç½‘å‹çš„è§£é‡Šï¼š</strong></p>
<p>å®é™…ä¸Šï¼Œå¯ä»¥è®¤ä¸ºï¼Œ<code>ERR_CERT_COMMON_NAME_INVALID</code>å°±æ˜¯ç”¨ä¸€ä¸ªé”™è¯¯çš„åŸŸåè®¿é—®äº†æŸä¸ªèŠ‚ç‚¹çš„<code>https</code>èµ„æºã€‚å¯¼è‡´è¿™ä¸ªé”™è¯¯çš„åŸå› ï¼ŒåŸºæœ¬æ˜¯ï¼š</p>
<ol>
<li>dnsæ±¡æŸ“</li>
<li>hostè®¾ç½®é”™è¯¯</li>
<li>å®˜æ–¹æ›´æ–°äº†dnsï¼Œä½†æ˜¯dnsç¼“å­˜æ²¡æœ‰è¢«æ›´æ–°ï¼Œå¯¼è‡´é”™è¯¯è§£æã€‚</li>
</ol>
<h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><h2 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h2><p>æ‰“å¼€<code>github</code>ä»»æ„æœªæ˜¾ç¤ºå›¾ç‰‡çš„ç½‘é¡µï¼Œä½¿ç”¨å…ƒç´ é€‰æ‹©å™¨ï¼ˆ<code>Ctrl+Shift+C</code>ï¼‰æ”¾åœ¨æ˜¾ç¤ºä¸äº†çš„å›¾ç‰‡ä¸Šï¼Œæˆ–è€…åœ¨æ— æ³•æ˜¾ç¤ºçš„å›¾ç‰‡ä¸Šå³é”®-æ£€æŸ¥å…ƒç´ ï¼Œå®šä½åˆ°è¯¥å›¾ç‰‡çš„æ ‡ç­¾ï¼Œé‚£ä¹ˆä½ å¾—åˆ°äº†å®ƒçš„URLï¼Œå«åš<code>src</code>å±æ€§ã€‚</p>
<p><img src="https://github.static.si-yee.com/posts/SolvetheproblemofimagedisplayfailureonGitHubwebpage/20200604140727.png" alt></p>
<p>å°†URLå¤åˆ¶å‡ºæ¥åï¼Œæ‰“å¼€<a href="https://www.ipaddress.com/" target="_blank" rel="noopener">IPAddress.com</a>è¿™ä¸ªç½‘ç«™ï¼Œæœç´¢å®ƒçš„åŸŸå:<code>avatars2.githubusercontent.com</code></p>
<p><img src="https://github.static.si-yee.com/posts/SolvetheproblemofimagedisplayfailureonGitHubwebpage/20200604140757.png" alt></p>
<p>æœç´¢åä¼šçœ‹åˆ°è¯¥åŸŸåçš„ä¿¡æ¯å’Œ<code>IP</code>åœ°å€ï¼š</p>
<p><img src="https://github.static.si-yee.com/posts/SolvetheproblemofimagedisplayfailureonGitHubwebpage/20200604140836.png" alt></p>
<p>å½“å‰è¯¥åŸŸåçš„IPæ˜¯ï¼š199.232.68.133ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿è¿™ä¸ª<strong>IP</strong>å’Œ<strong>åŸŸå</strong>æ˜ å°„èµ·æ¥ã€‚</p>
<p><strong>ä¿®æ”¹hosts</strong></p>
<p>Windowä¸‹è·¯å¾„<code>C:\Windows\System32\drivers\etc\hosts</code></p>
<p>Macã€Linuxä¸‹è·¯å¾„<code>/etc/hosts</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># GitHub Start </span><br><span class="line">140.82.113.3      github.com</span><br><span class="line">140.82.114.20     gist.github.com</span><br><span class="line"></span><br><span class="line">151.101.184.133    assets-cdn.github.com</span><br><span class="line">151.101.184.133    raw.githubusercontent.com</span><br><span class="line">151.101.184.133    gist.githubusercontent.com</span><br><span class="line">151.101.184.133    cloud.githubusercontent.com</span><br><span class="line">151.101.184.133    camo.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars0.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars0.githubusercontent.com</span><br><span class="line">199.232.28.133     avatars1.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars1.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars2.githubusercontent.com</span><br><span class="line">199.232.28.133     avatars2.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars3.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars3.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars4.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars4.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars5.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars5.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars6.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars6.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars7.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars7.githubusercontent.com</span><br><span class="line">151.101.184.133    avatars8.githubusercontent.com</span><br><span class="line">199.232.68.133     avatars8.githubusercontent.com</span><br><span class="line"></span><br><span class="line"># GitHub End</span><br></pre></td></tr></table></figure>
<p>ä¿å­˜å³å¯ï¼Œ<strong>è¯¥æ–‡ä»¶éšæ—¶å¯èƒ½å˜æ›´ï¼Œè¯·éšæ—¶è‡ªè¡Œæ›´æ–°</strong></p>
<blockquote>
<p>windowä¸‹æ— æ³•ä¿å­˜ï¼Œæ²¡æœ‰ä¿®æ”¹æƒé™ï¼Œé¼ æ ‡å³é”®-å±æ€§-å®‰å…¨-ä¿®æ”¹æƒé™ï¼›æˆ–å°†<code>hosts</code>æ–‡ä»¶å¤åˆ¶ä¸€ä»½ï¼Œä¿®æ”¹ä¹‹åï¼Œå¤åˆ¶åˆ°åŸæ–‡ä»¶å¤¹æ›¿æ¢ï¼</p>
</blockquote>
<h2 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h2><p><strong>Windowç³»ç»Ÿä¸‹</strong></p>
<p>è¿˜å¯ä»¥ä½¿ç”¨<code>ipconfig/flush</code>å¯¹æœ¬åœ°DNSç¼“å­˜è¿›è¡Œä¸€æ¬¡åˆ·æ–°ï¼Œå¦‚æœé‡åˆ°ç½‘ç»œå¼‚å¸¸ï¼Œå¯èƒ½æ˜¯DNSç¼“å­˜çš„é—®é¢˜ï¼Œåˆ·æ–°ä¸€ä¸‹ï¼Œæ­¥éª¤ã€‚</p>
<p>windowså¼€å§‹â†’è¿è¡Œâ†’è¾“å…¥ï¼šCMD æŒ‰å›è½¦é”®ï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦çª—å£ã€‚<br>å†è¾“å…¥ï¼š <code>ipconfig /flushdns</code> å›è½¦ï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œå¯ä»¥é‡å»ºæœ¬åœ°DNSç¼“å­˜ã€‚</p>
<p><strong>Macç³»ç»Ÿä¸‹</strong></p>
<p>OS X Mountain Lion or Lion</p>
<p>Use the following Terminal command to reset the DNS cache:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo killall -HUP mDNSResponder</span><br></pre></td></tr></table></figure>
<p>Mac OS X v10.6</p>
<p>Use the following Terminal command to reset the DNS cache:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo dscacheutil -flushcache</span><br></pre></td></tr></table></figure>
<p>mac Mojave</p>
<p>æ¬è¿fromï¼š<a href="https://link.zhihu.com/?target=https%3A//www.hongkiat.com/blog/how-to-clear-dns-cache-in-macos-mojave/" target="_blank" rel="noopener">https://www.hongkiat.com/blog/how-to-clear-dns-cache-in-macos-mojave/</a></p>
<ol>
<li>æ‰“å¼€ç»ˆç«¯ï¼šlaunchpadé‡Œé¢çš„â€œç»ˆç«¯â€</li>
<li>è¾“å…¥ï¼šsudo killall -HUP mDNSResponder; sleep 2; ç„¶åæ•²å›è½¦ï¼›</li>
<li>è¾“å…¥å¯†ç ï¼›ç„¶åæ•²å›è½¦</li>
<li>command+Qé€€å‡ºï¼Œå°±å¥½å•¦</li>
</ol>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.zhihu.com/question/19679715" target="_blank" rel="noopener">https://www.zhihu.com/question/19679715</a></p>
<p><a href="https://www.ipaddress.com/" target="_blank" rel="noopener">https://www.ipaddress.com/</a></p>
<p><a href="https://www.jianshu.com/p/30e2703a5647" target="_blank" rel="noopener">https://www.jianshu.com/p/30e2703a5647</a></p>
<p><a href="https://blog.csdn.net/qq_38232598/article/details/91346392" target="_blank" rel="noopener">https://blog.csdn.net/qq_38232598/article/details/91346392</a></p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>Eggjså®ç°æ–‡ä»¶ä¸‹è½½</title>
    <url>/2020/05/28/Eggjs%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨æœ€è¿‘çš„ç¼–å†™çš„ä¸€ä¸ªä¸ªäººçš„å·¥å…·ç«™ç‚¹ä¸­æƒ³å®ç°ä¸€ä¸ªç½‘ç«™æäº¤æ•°æ®åæŠŠç‰¹å®šæ–‡ä»¶å‹ç¼©æ‰“åŒ…åæµè§ˆå™¨å‡ºç°ä¸‹è½½çš„åŠŸèƒ½ã€‚æ‰¾çš„èµ„æ–™å®ç°ä¹Ÿæ®‹ç¼ºä¸å…¨ã€‚æ‰€ä»¥è®°å½•ä¸€ä¸‹ç›®å‰èƒ½å®ç°çš„æ–¹æ¡ˆã€‚</p>
<a id="more"></a>
<p>ä½¿ç”¨åˆ°çš„æ¡†æ¶ï¼š<a href="https://stuk.github.io/jszip/" target="_blank" rel="noopener">EggJS</a>ã€<a href="https://eggjs.org/zh-cn/" target="_blank" rel="noopener">JSZip</a>ã€‚</p>
<h1 id="ç¼–å†™è·¯ç”±"><a href="#ç¼–å†™è·¯ç”±" class="headerlink" title="ç¼–å†™è·¯ç”±"></a>ç¼–å†™è·¯ç”±</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;Egg.Application&#125; app - egg application</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">app</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; router, controller &#125; = app;</span><br><span class="line">  router.get(<span class="string">'/'</span>, controller.home.index);</span><br><span class="line">  router.get(<span class="string">'/download'</span>, controller.home.deal);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="ç¼–å†™æ§åˆ¶å™¨"><a href="#ç¼–å†™æ§åˆ¶å™¨" class="headerlink" title="ç¼–å†™æ§åˆ¶å™¨"></a>ç¼–å†™æ§åˆ¶å™¨</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> jszip = <span class="built_in">require</span>(<span class="string">'jszip'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Controller = <span class="built_in">require</span>(<span class="string">'egg'</span>).Controller;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomeController</span> <span class="keyword">extends</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * é¦–é¡µ</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">async</span> index() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; ctx &#125; = <span class="keyword">this</span>;</span><br><span class="line">    ctx.response.type = <span class="string">'html'</span>;</span><br><span class="line">    ctx.body = fs.readFileSync(path.resolve(__dirname, <span class="string">'../view/home.html'</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * å¤„ç†æ•°æ®</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">async</span> deal() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; ctx &#125; = <span class="keyword">this</span>;</span><br><span class="line">    <span class="comment">// å¤„ç†public Path</span></span><br><span class="line">    <span class="keyword">const</span> dirPath = path.resolve(__dirname, <span class="string">`../public`</span>);</span><br><span class="line">    <span class="keyword">if</span> (!fs.existsSync(dirPath)) &#123;</span><br><span class="line">      fs.mkdirSync(dirPath);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ‰“åŒ…åˆ°egg-staticçš„ç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ç›®å½•ï¼Œæœ‰å†™å…¥æƒé™æ–‡ä»¶ç›®å½•å³å¯ï¼Œåç»­è¯»å–</span></span><br><span class="line">    <span class="keyword">const</span> zip = <span class="keyword">new</span> jszip();</span><br><span class="line">    zip.file(<span class="string">'test.txt'</span>, <span class="string">'detail'</span>);</span><br><span class="line">    zip.folder(<span class="string">'img'</span>);</span><br><span class="line">    <span class="keyword">const</span> content = <span class="keyword">await</span> zip.generateAsync(&#123; <span class="attr">type</span>: <span class="string">'nodebuffer'</span> &#125;);</span><br><span class="line">    <span class="keyword">const</span> zipPath = <span class="string">`<span class="subst">$&#123;dirPath&#125;</span>/download.zip`</span>;</span><br><span class="line">    fs.writeFileSync(zipPath, content);</span><br><span class="line">    <span class="comment">// è¿”å›</span></span><br><span class="line">    <span class="keyword">const</span> stats = fs.statSync(zipPath, &#123;</span><br><span class="line">      encoding: <span class="string">'utf8'</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    ctx.response.set(&#123;</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'application/octet-stream'</span>,</span><br><span class="line">      <span class="string">'Content-Disposition'</span>: <span class="string">`attachment; filename=download.zip`</span>,</span><br><span class="line">      <span class="string">'Content-Length'</span>: stats.size,</span><br><span class="line">    &#125;);</span><br><span class="line">    ctx.body = fs.createReadStream(zipPath);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = HomeController;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é¦–é¡µç›´æ¥ä½¿ç”¨æ–‡ä»¶æµæ¥æ¸²æŸ“ä¸€ä¸ªç½‘é¡µã€‚ä¸ä½¿ç”¨nunjucksç­‰æ¨¡æ¿æ¸²æŸ“æ–¹å¼ã€‚</p>
<p>dealæ–¹æ³•ä¸­æ‰æ˜¯å¤„ç†ä¸‹è½½æ–‡ä»¶çš„é‡ç‚¹ã€‚</p>
<p>è·³è½¬åˆ°/downloadè·¯å¾„æ—¶ä¼šè‡ªåŠ¨ä¸‹è½½download.zipçš„å‹ç¼©åŒ…ã€‚è§£å‹åä¼šæœ‰ä¸€ä¸ªtest.txtæ–‡ä»¶å’Œä¸€ä¸ªimgçš„ç›®å½•ã€‚</p>
</blockquote>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://github.com/eggjs/egg/issues/948" target="_blank" rel="noopener">https://github.com/eggjs/egg/issues/948</a></p>
<p><a href="https://www.jianshu.com/p/2689a38cf643" target="_blank" rel="noopener">https://www.jianshu.com/p/2689a38cf643</a></p>
]]></content>
      <categories>
        <category>Nodejs</category>
      </categories>
      <tags>
        <tag>Nodejs</tag>
        <tag>Egg</tag>
      </tags>
  </entry>
  <entry>
    <title>Github Action è‡ªåŠ¨åŒ–éƒ¨ç½²Hexo</title>
    <url>/2020/05/26/Github-Action-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2Hexo/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä»€ä¹ˆæ˜¯Github-Action"><a href="#ä»€ä¹ˆæ˜¯Github-Action" class="headerlink" title="ä»€ä¹ˆæ˜¯Github Action"></a>ä»€ä¹ˆæ˜¯Github Action</h1><p><code>Github Actions</code>æ˜¯<code>Github</code>æ¨å‡ºçš„ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œå¯ä»¥ä¸ºæˆ‘ä»¬çš„é¡¹ç›®è‡ªåŠ¨åŒ–åœ°æ„å»ºå·¥ä½œæµï¼Œä¾‹å¦‚ä»£ç æ£€æŸ¥ï¼Œè‡ªåŠ¨åŒ–æ‰“åŒ…ï¼Œæµ‹è¯•ï¼Œå‘å¸ƒç‰ˆæœ¬ç­‰ç­‰ã€‚å…¥å£åœ¨é¡¹ç›®<code>pull request</code>çš„æ—è¾¹ã€‚</p>
<p>ä¸€æ¬¡æ— æ„ä¸­æŸ¥çœ‹åˆ°é˜®ä¸€å³°å¤§ç¥åšå®¢ä¸­æåˆ°çš„Github Actionï¼Œå¹³å¸¸ä¸€èˆ¬ç©è¿‡çš„æ˜¯Jenkinsã€‚çœ‹åˆ°å¯ä»¥å°†Reacté¡¹ç›®è‡ªåŠ¨éƒ¨ç½²åˆ°Github Pageæ—¶ï¼Œçµæ„Ÿå°±æƒ³åˆ°äº†è‡ªå·±çš„åŸºäºHexoæ­å»ºçš„åšå®¢æ¥å®ç°ä¸€ä¸‹è‡ªåŠ¨éƒ¨ç½²ã€‚æŸ¥äº†ä¸€ä¸‹èµ„æ–™ï¼Œçš„ç¡®å¯ä»¥å®ç°çš„ã€‚</p>
<a id="more"></a>
<blockquote>
<p>è¯¥æ–‡ç« ä¸æ¶‰åŠGithub Actionä»¥åŠHexoçš„æ•™å­¦ã€‚è¯·è‡ªè¡ŒæŸ¥é˜…</p>
</blockquote>
<h1 id="éƒ¨ç½²å‰å‡†å¤‡"><a href="#éƒ¨ç½²å‰å‡†å¤‡" class="headerlink" title="éƒ¨ç½²å‰å‡†å¤‡"></a>éƒ¨ç½²å‰å‡†å¤‡</h1><p>å…ˆå‡†å¤‡ä¸¤ä¸ªä»“åº“ï¼Œä¸€ä¸ªæ˜¯éƒ¨ç½²åšå®¢æ‰€äº§å‡ºé™æ€é¡µé¢ï¼ˆgithub pageï¼‰çš„ä»“åº“ï¼Œä¸€ä¸ªæ˜¯åšå®¢æ‰€æœ‰æºæ–‡ä»¶çš„ä»“åº“</p>
<p>åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ª keyï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -b 4096 -C <span class="string">"your email"</span> -f ~/.ssh/github-actions-deploy</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ï¼ˆä¹Ÿå¯ä»¥ç”Ÿæˆå…¶ä»–ç§ç±»çš„ keyï¼Œå¦‚æœç”¨ä¸Šé¢çš„å‘½ä»¤ï¼Œéœ€è¦ä¿®æ”¹ä¸€ä¸‹ç”¨æˆ·åï¼‰ å›è½¦å®Œæˆå³å¯</p>
</blockquote>
<p>æŸ¥çœ‹ç§é’¥å’Œå…¬é’¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.ssh</span><br><span class="line">$ cat github-actions-deploy</span><br><span class="line">$ cat github-actions-deploy.pub</span><br></pre></td></tr></table></figure>
<p>åœ¨åšå®¢æ‰€æœ‰æºæ–‡ä»¶çš„ä»“åº“<strong>Settings -&gt; Secrets</strong> é‡Œæ·»åŠ åˆšåˆšç”Ÿæˆçš„ç§é’¥ï¼Œåç§°ä¸º <code>ACTION_DEPLOY_KEY</code>ã€‚</p>
<p>ç„¶ååœ¨ Github Pages çš„ä»“åº“ï¼Œ<strong>Settings -&gt; Deploy keys</strong> æ·»åŠ åˆšåˆšç”Ÿæˆçš„å…¬é’¥ï¼Œåç§°éšæ„ï¼Œä½†è¦å‹¾é€‰ <strong>Allow write access</strong>ã€‚</p>
<p><img src="https://github.static.si-yee.com/posts/Github Action è‡ªåŠ¨åŒ–éƒ¨ç½²Hexo-20200604134453.png" alt></p>
<h1 id="æ·»åŠ Github-Action"><a href="#æ·»åŠ Github-Action" class="headerlink" title="æ·»åŠ Github Action"></a>æ·»åŠ Github Action</h1><p>å¯ä»¥åœ¨ç½‘é¡µä¸Š <strong>Actions</strong> é‡Œç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨æºæ–‡ä»¶çš„ä»“åº“çš„æœ¬åœ°ç›®å½•æ·»åŠ ç›´æ¥ commitã€‚</p>
<p>æœ¬æ–‡ç›´æ¥åœ¨æºæ–‡ä»¶çš„ä»“åº“çš„æœ¬åœ°ç›®å½•æäº¤é…ç½®æ–‡ä»¶ï¼Œå°†é…ç½®æ–‡ä»¶å­˜è‡³åŸæ–‡ä»¶ä»“åº“ç›®å½•ä¸‹çš„ <code>.github/workflows/*éšä¾¿èµ·å*.yml</code>ã€‚</p>
<p>è„šæœ¬é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span>    </span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Build</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node</span> </span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">'10.x'</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">prepare</span> <span class="string">build</span> <span class="string">env</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">ACTION_DEPLOY_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.ACTION_DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="comment"># set up private key for deploy</span></span><br><span class="line">          <span class="string">mkdir</span> <span class="string">-p</span> <span class="string">~/.ssh/</span></span><br><span class="line">          <span class="string">echo</span> <span class="string">"$ACTION_DEPLOY_KEY"</span> <span class="string">|</span> <span class="string">tr</span> <span class="string">-d</span> <span class="string">'\r'</span> <span class="string">&gt;</span> <span class="string">~/.ssh/id_rsa</span></span><br><span class="line">          <span class="string">chmod</span> <span class="number">600</span> <span class="string">~/.ssh/id_rsa</span></span><br><span class="line">          <span class="string">ssh-keyscan</span> <span class="string">github.com</span> <span class="string">&gt;&gt;</span> <span class="string">~/.ssh/known_hosts</span></span><br><span class="line">          <span class="comment"># set git infomation</span></span><br><span class="line">          <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">'hackycy'</span></span><br><span class="line">          <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">'qa894178522@qq.com'</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">clone</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">git</span> <span class="string">clone</span> <span class="string">https://github.com/hackycy/hackycy.github.io.git</span> <span class="string">.deploy_git</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">NPM</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Clean</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">./node_modules/.bin/hexo</span> <span class="string">clean</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">./node_modules/.bin/hexo</span> <span class="string">generate</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">./node_modules/.bin/hexo</span> <span class="string">deploy</span></span><br></pre></td></tr></table></figure>
<div class="note info"><p><strong>å¯¹è¿™ä¸ªé…ç½®æ–‡ä»¶åšå‡ ç‚¹è¯´æ˜ï¼š</strong></p><ol><li>Actions åœ¨æ—©æœŸæµ‹è¯•æ—¶ç”¨çš„æ˜¯ HCL æ ¼å¼ï¼Œè€Œç°åœ¨ä½¿ç”¨ YAML é…ç½®ï¼ŒHCL æ ¼å¼é…ç½®æ–‡ä»¶å·²è¢«åºŸå¼ƒã€‚YAML æ ¼å¼éœ€è¦ä¸¥æ ¼æŒ‰ç…§ç¼©è¿›ã€‚</li><li><code>on</code> æ ‡æ³¨ä»€ä¹ˆäº‹ä»¶ä¼šè§¦å‘è¿™ä¸ª workflowï¼Œå¯ä»¥æŒ‡å®š branchesï¼Œè¯¦æƒ…å‚è€ƒ<a href="https://help.github.com/en/articles/events-that-trigger-workflows" target="_blank" rel="noopener">æ–‡æ¡£</a>ã€‚</li><li><code>runs-on</code> è®¾ç½®è¿è¡Œå¹³å°ï¼Œç›®å‰æœ‰ Windowsã€Ubuntuã€macOSï¼Œè§<a href="https://help.github.com/en/articles/virtual-environments-for-github-actions" target="_blank" rel="noopener">æ–‡æ¡£</a>ã€‚</li><li><code>uses</code> æ˜¯ä½¿ç”¨æ‰“åŒ…å¥½çš„ actionï¼Œå¯ä»¥é€šè¿‡ <code>with</code> ä¼ å‚æ•°ã€‚å®˜æ–¹æä¾›äº†ä¸€äº› Git åŸºæœ¬æ“ä½œå’Œç¯å¢ƒå®‰è£…çš„åŒ…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Dockerã€‚</li><li><code>env</code> å¯ä»¥è®¾ç½®è¿™ä¸€æ­¥çš„ç¯å¢ƒå˜é‡ï¼Œè¿™ä¸€æ­¥è®¾ç½®çš„å˜é‡ä¸ä¼šç»§æ‰¿åˆ°ä¸‹ä¸€æ­¥ã€‚åˆšæ‰è®¾ç½®çš„ç§é’¥å¯ä»¥é€šè¿‡ <code>$</code> è·å–åˆ°ï¼Œå…·ä½“è§<a href="https://help.github.com/en/articles/virtual-environments-for-github-actions" target="_blank" rel="noopener">æ–‡æ¡£</a>ã€‚å¦å¤–ç›´æ¥å°†å¯†é’¥ echo å‡ºæ¥ä¼šè¢«æ‰“ç  :)</li><li>åœ¨ç½‘é¡µä¸Šä¿å­˜ç§é’¥å¾ˆå¯èƒ½ä¼šæŠŠ key å­˜æˆ CR-LF æ¢è¡Œæ¨¡å¼çš„ï¼Œè€Œç§é’¥æ–‡ä»¶è¦æ±‚ LF æ¨¡å¼ï¼Œè¦ç”¨ <code>tr -d &#39;\r&#39;</code> å»æ‰å›è½¦ç¬¦ã€‚</li><li>Git é…ç½®è¯·æ›´æ”¹ä¸ºè‡ªå·±çš„ã€‚</li><li>ç”±äºæˆ‘çš„åšå®¢æºä»“åº“é…ç½®äº†Submoduleï¼Œå¦‚æœæ²¡æœ‰é…ç½®çš„è¯·ç›´æ¥åˆ é™¤step nameä¸ºcloneçš„æ­¥éª¤</li></ol></div>
<h1 id="è‡ªåŠ¨æ„å»º"><a href="#è‡ªåŠ¨æ„å»º" class="headerlink" title="è‡ªåŠ¨æ„å»º"></a>è‡ªåŠ¨æ„å»º</h1><p>æ¯å½“ä½ å†™å®Œåšå®¢æ˜¯ç›´æ¥æäº¤åˆ°æºä»“åº“å³å¯è‡ªåŠ¨è§¦å‘æ„å»ºã€‚ä¼šé…åˆActionè‡ªåŠ¨å‘å¸ƒåˆ°Github Pageä»“åº“ã€‚</p>
<p><img src="https://github.static.si-yee.com/posts/Github Action è‡ªåŠ¨åŒ–éƒ¨ç½²Hexo-20200604134653.png" alt></p>
<h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><p>å¦‚æœåšå®¢ä¸­é…ç½®äº†ä¸»é¢˜ï¼Œè¯·æ³¨é‡Šæ‰ä¸»é¢˜ä¸‹çš„.gitignoreçš„ä¸€äº›é…ç½®ï¼Œä¾‹å¦‚æœ¬äººä½¿ç”¨çš„Nextä¸»é¢˜</p>
<p><img src="https://github.static.si-yee.com/posts/Github Action è‡ªåŠ¨åŒ–éƒ¨ç½²Hexo-20200604134730.png" alt></p>
<p>ä»¥åŠé…åˆä¸»é¢˜å®‰è£…çš„ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œæœ‰ä¸€äº›æ’ä»¶é€šè¿‡Git cloneå®‰è£…æ—¶ä¸ä¼šä¸Šä¼ åˆ°æºæ–‡ä»¶ä»“åº“ï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤æ‰æ’ä»¶ç›®å½•ä¸‹çš„.gitæ–‡ä»¶å¤¹ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html</a></p>
<p><a href="https://xiaopc.org/2019/08/29/github-actions-æµ‹è¯•-è‡ªåŠ¨éƒ¨ç½²-hexo/" target="_blank" rel="noopener">https://xiaopc.org/2019/08/29/github-actions-%E6%B5%8B%E8%AF%95-%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2-hexo/</a></p>
<p><a href="https://hateonion.me/posts/20feb22/" target="_blank" rel="noopener">https://hateonion.me/posts/20feb22/</a></p>
]]></content>
      <categories>
        <category>Github Action</category>
      </categories>
      <tags>
        <tag>Github Action</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>VirtualBoxä¸­è§£å†³å®‰è£…CentOS7åæ— æ³•ä¸Šç½‘é—®é¢˜</title>
    <url>/2020/05/22/VirtualBox%E4%B8%AD%E8%A7%A3%E5%86%B3%E5%AE%89%E8%A3%85CentOS7%E5%90%8E%E6%97%A0%E6%B3%95%E4%B8%8A%E7%BD%91%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¶å°”éœ€è¦æ­å»ºä¸€äº›æµ‹è¯•ç”¨çš„ç¯å¢ƒæ—¶ä½¿ç”¨è™šæ‹Ÿæœºæ— ç–‘æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ã€‚ä½†æ˜¯åœ¨å®‰è£…ç©Centos 7ç³»ç»Ÿåç½‘ç»œçš„é—®é¢˜æ˜¯ä¸€ç›´å›°æ‰°çš„ã€‚ä»¥é˜²å¿˜è®°å…ˆè®°å½•ä¸‹æ¥ã€‚</p>
<a id="more"></a>
<p>ç¯å¢ƒï¼šMac + VirtualBox</p>
<h1 id="é…ç½®è™šæ‹Ÿæœºçš„ç½‘å¡"><a href="#é…ç½®è™šæ‹Ÿæœºçš„ç½‘å¡" class="headerlink" title="é…ç½®è™šæ‹Ÿæœºçš„ç½‘å¡"></a>é…ç½®è™šæ‹Ÿæœºçš„ç½‘å¡</h1><p>æŒ‰ç…§ä¸‹å›¾é…ç½®è™šæ‹Ÿæœºçš„ç½‘ç»œ</p>
<p><img src="https://github.static.si-yee.com/posts/VirtualBoxä¸­è§£å†³å®‰è£…CentOS7åæ— æ³•ä¸Šç½‘é—®é¢˜-20200604134142.png" alt></p>
<p>å…¶ä¸­ï¼Œè¿æ¥æ–¹å¼é€‰æ‹©æ¡¥æ¥ç½‘å¡ã€ç•Œé¢åç§°é€‰æ‹©ä½ ä¸»æœºä¸Šç½‘ç”¨çš„æ— çº¿ç½‘å¡ã€æ§åˆ¶èŠ¯ç‰‡é€‰æ‹©æ¡Œé¢ã€æ··æ‚æ¨¡å¼é€‰æ‹©æ‹’ç»ã€å‹¾é€‰æ¥å…¥ç½‘ç»œã€‚</p>
<blockquote>
<p>é…ç½®å‰è¯·å…ˆåœæ­¢è™šæ‹Ÿæœº</p>
</blockquote>
<h1 id="é…ç½®CentOS7çš„ç½‘ç»œ"><a href="#é…ç½®CentOS7çš„ç½‘ç»œ" class="headerlink" title="é…ç½®CentOS7çš„ç½‘ç»œ"></a>é…ç½®CentOS7çš„ç½‘ç»œ</h1><p>ä¿®æ”¹ç½‘å¡å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®<code>BOOTPROTO</code>ä¸º<code>dhcp</code>ï¼Œ<code>ONBOOT</code>ä¸º<code>yes</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vi /etc/sysconfig/network-scripts/ifcfg-enp0s3</span><br></pre></td></tr></table></figure>
<p><img src="https://github.static.si-yee.com/posts/VirtualBoxä¸­è§£å†³å®‰è£…CentOS7åæ— æ³•ä¸Šç½‘é—®é¢˜-20200604134232.png" alt></p>
<h1 id="é‡å¯ç½‘ç»œæœåŠ¡"><a href="#é‡å¯ç½‘ç»œæœåŠ¡" class="headerlink" title="é‡å¯ç½‘ç»œæœåŠ¡"></a>é‡å¯ç½‘ç»œæœåŠ¡</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ service network restart</span><br></pre></td></tr></table></figure>
<p>é…ç½®å®Œæˆåé‡å¯ç½‘ç»œï¼Œæµ‹è¯•pingé€šå³å¯ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://blog.csdn.net/scaleqiao/article/details/44206825" target="_blank" rel="noopener">https://blog.csdn.net/scaleqiao/article/details/44206825</a></p>
]]></content>
      <categories>
        <category>DBA</category>
      </categories>
      <tags>
        <tag>Centos7</tag>
        <tag>ç¯å¢ƒæ­å»º</tag>
      </tags>
  </entry>
  <entry>
    <title>iOSä¹‹æ—¥å¿—æ‰“å°ä¼˜åŒ–</title>
    <url>/2020/05/21/iOS%E4%B9%8B%E6%97%A5%E5%BF%97%E6%89%93%E5%8D%B0%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨æ—¥å¸¸å·¥ä½œå½“ä¸­ï¼ŒDebugæ¨¡å¼çš„æ‰“å°è°ƒè¯•æ˜¯åŸºæ“äº†ã€‚è€Œå”¯ä¸€çš„ä¸€æ‹›ä¸æ˜¯<code>NSLog</code>å°±æ˜¯<code>print</code>ã€‚ä½†é¡¹ç›®å¼€å‘ä¸­ä½¿ç”¨Swiftå<code>NSLog</code>å·²ç»ä¸å¸¸ç”¨äº†ã€‚</p>
<a id="more"></a>
<p>è€Œåœ¨æ—¥å¸¸å·¥ä½œå½“ä¸­ä½¿ç”¨Swiftçš„<code>debugPrint</code>æ¥è¿›è¡Œå¯¹ä¸€äº›ç½‘ç»œè¯·æ±‚çš„è¾“å‡ºç­‰çš„è°ƒè¯•å·²ç»ä¹ ä»¥ä¸ºå¸¸ã€‚ä½†æ˜¯Swiftç¼–è¯‘å™¨å¹¶ä¸ä¼šå°†<code>print</code>å’Œ<code>debugPrint</code>åˆ é™¤ã€‚åœ¨æœ€ç»ˆå‘å¸ƒçš„Appä¼šæŠŠå†…å®¹è¾“å‡ºåˆ°ç»ˆç«¯ã€‚é€ æˆäº†æ€§èƒ½çš„æŸå¤±ã€‚</p>
<p>ä½†æ˜¯ä½ ä¹Ÿä¸å¯èƒ½éšæ—¶éƒ½èƒ½åœ¨ä¸Šçº¿å‰æŠŠè¿™äº›æ‰“å°è¯­å¥éƒ½åˆ å»ã€‚</p>
<h1 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h1><p>ä½†æ˜¯æ›´å¥½çš„æ–¹æ³•æ˜¯é€šè¿‡æ·»åŠ æ¡ä»¶ç¼–è¯‘æ¥å°†è¿™äº›è¯­å¥æ’é™¤åœ¨ Release ç‰ˆæœ¬å¤–ã€‚åœ¨ Xcode çš„ Build Setting ä¸­ï¼Œåœ¨ <strong>Other Swift flags</strong> çš„ Debug æ ä¸­åŠ å…¥ <code>-D DEBUG</code> å³å¯åŠ å…¥ä¸€ä¸ªç¼–è¯‘æ ‡è¯†ã€‚</p>
<p><img src="https://github.static.si-yee.com/posts/iOSä¹‹æ—¥å¿—æ‰“å°ä¼˜åŒ–-20200604133855.png" alt></p>
<p>ä¹‹åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å°† <code>print</code> æˆ–è€… <code>debugPrint</code> åŒ…è£…ä¸€ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dPrint</span><span class="params">(item: <span class="keyword">Any</span>)</span></span> &#123;</span><br><span class="line">    #<span class="keyword">if</span> <span class="type">DEBUG</span></span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line">    #endif</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œåœ¨ Release ç‰ˆæœ¬ä¸­ï¼Œ<code>dPrint</code> å°†ä¼šæ˜¯ä¸€ä¸ªç©ºæ–¹æ³•ï¼Œæ‰€æœ‰å¯¹è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨éƒ½ä¼šè¢«ç¼–è¯‘å™¨å‰”é™¤æ‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿™ç§å°è£…ä¸‹ï¼Œå¦‚æœä½ ä¼ å…¥çš„ <code>items</code> æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼è€Œä¸æ˜¯ç›´æ¥çš„å˜é‡çš„è¯ï¼Œè¿™ä¸ªè¡¨è¾¾å¼è¿˜æ˜¯ä¼šè¢«å…ˆæ‰§è¡Œæ±‚å€¼çš„ã€‚å¦‚æœè¿™å¯¹æ€§èƒ½ä¹Ÿäº§ç”Ÿäº†å¯æµ‹çš„å½±å“çš„è¯ï¼Œæˆ‘ä»¬æœ€å¥½ç”¨ <code>@autoclosure</code> ä¿®é¥°å‚æ•°æ¥é‡æ–°åŒ…è£… <code>print</code>ã€‚è¿™å¯ä»¥å°†æ±‚å€¼è¿è¡Œæ¨è¿Ÿåˆ°æ–¹æ³•å†…éƒ¨ï¼Œè¿™æ ·åœ¨ Release æ—¶è¿™ä¸ªæ±‚å€¼ä¹Ÿä¼šè¢«ä¸€å¹¶å»æ‰ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dPrint</span><span class="params">(item: @autoclosure <span class="params">()</span></span></span> -&gt; <span class="type">Any</span>) &#123;</span><br><span class="line">    #<span class="keyword">if</span> <span class="type">DEBUG</span></span><br><span class="line">    <span class="built_in">print</span>(item())</span><br><span class="line">    #endif</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dPrint(resultFromHeavyWork())</span><br><span class="line"><span class="comment">// Release ç‰ˆæœ¬ä¸­ resultFromHeavyWork() ä¸ä¼šè¢«æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨Time Profiler + çœŸæœºæµ‹è¯•å¯ä»¥éªŒè¯</p>
</blockquote>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://onevcat.com/2016/02/swift-performance/" target="_blank" rel="noopener">https://onevcat.com/2016/02/swift-performance/</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯æ—¶é—´åŒæ­¥æ–¹æ¡ˆ</title>
    <url>/2020/05/12/IOS%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘é¡¹ç›®çš„ç¼–å†™ä¸­ï¼Œæ¥å£éœ€è¦æäº¤ç²¾ç¡®åˆ°ç§’çº§çš„æ—¶é—´æˆ³ç”¨ä½œæ ¡éªŒã€‚ä½†æ˜¯ä»…é <code>new Date().timeIntervalSince1970</code>ä¼šé¢ä¸´ç€æœ¬åœ°çš„æ—¶é—´ä¸æœåŠ¡å™¨æ—¶é—´ä¸ä¸€è‡´çš„é—®é¢˜ã€‚é‚£ä¹ˆæœ¬æ–‡æ–¹æ¡ˆèƒ½è®©æœ¬åœ°åº”ç”¨æ—¶é—´ä¸æœåŠ¡å™¨æ—¶é—´å­˜åœ¨è¯¯å·®èŒƒå›´å†…ä¿æŒåŒæ­¥ï¼Œå‡å°‘åº”ç”¨å‡ºé”™ç‡ã€‚</p>
<a id="more"></a>
<h1 id="é¢„å¤‡çŸ¥è¯†"><a href="#é¢„å¤‡çŸ¥è¯†" class="headerlink" title="é¢„å¤‡çŸ¥è¯†"></a>é¢„å¤‡çŸ¥è¯†</h1><ul>
<li>è·å–è®¾å¤‡å½“å‰æ—¶é—´ <code>Now</code>ï¼Œè¯¥å€¼å—ç³»ç»Ÿæ—¶é—´å½±å“ï¼Œç”¨æˆ·å¦‚æœä¿®æ”¹æ—¶é—´ï¼Œå€¼ä¹Ÿä¼šéšç€å˜åŒ–ï¼›</li>
<li>è·å–è®¾å¤‡ä¸Šæ¬¡é‡å¯çš„æ—¶é—´ <code>BootTime</code>ï¼Œè¯¥å€¼å—ç³»ç»Ÿæ—¶é—´å½±å“ï¼Œç”¨æˆ·å¦‚æœä¿®æ”¹æ—¶é—´ï¼Œå€¼ä¹Ÿä¼šéšç€å˜åŒ–ï¼›</li>
<li>ç”±ä¸Šé¢ <code>iOS</code> æä¾›çš„ä¸¤ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åˆ°<strong>è®¾å¤‡è‡ªä¸Šæ¬¡é‡å¯åè¿è¡Œçš„æ—¶é—´</strong>ï¼ˆ<code>BootTime - Now</code>ï¼‰ï¼Œè¯¥å€¼ä¸ç³»ç»Ÿæ—¶é—´æ— å…³ï¼›<span class="label danger">`-`è¿™ä¸ªä¸æ˜¯å‡ï¼ŒæŒ‡çš„æ˜¯åŒºé—´ï¼Œä¸‹é¢åŒç†</span> </li>
<li>åœ¨å¿…è¦çš„æ—¶åˆ»è·å–ä¸€ä¸‹æœåŠ¡å™¨æ—¶é—´ï¼Œç„¶åè®°å½•è¿™ä¸ªæ—¶åˆ»çš„<strong>è®¾å¤‡è‡ªä¸Šæ¬¡é‡å¯åè¿è¡Œçš„æ—¶é—´</strong>ï¼ˆ<code>BootTime - Now</code>ï¼‰</li>
<li>åç»­æ—¶é—´è·å–ï¼š<strong>ç°åœ¨æœåŠ¡å™¨æ—¶é—´ = ä»¥å‰æœåŠ¡å™¨æ—¶é—´ + ç°åœ¨è®¾å¤‡è‡ªä¸Šæ¬¡é‡å¯åè¿è¡Œçš„æ—¶é—´ - ä»¥å‰æœåŠ¡å™¨æ—¶é—´çš„è·å–æ—¶åˆ»çš„è®¾å¤‡è‡ªä¸Šæ¬¡é‡å¯åè¿è¡Œçš„æ—¶é—´</strong></li>
<li>åˆ©ç”¨AFNetworkingè‡ªåŠ¨åŒæ­¥æ—¶é—´</li>
</ul>
<h1 id="æ—¶é—´çš„è·å–"><a href="#æ—¶é—´çš„è·å–" class="headerlink" title="æ—¶é—´çš„è·å–"></a>æ—¶é—´çš„è·å–</h1><p><strong>è·å–nowçš„Unix Time</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">now</span>() -&gt; <span class="title">Int</span> </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> now = timeval()</span><br><span class="line">	<span class="keyword">var</span> tz = timezone()</span><br><span class="line">	gettimeofday(&amp;now, &amp;tz)</span><br><span class="line">	<span class="keyword">return</span> now.tv_sec</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è·å–è®¾å¤‡ä¸Šæ¬¡é‡å¯çš„ Unix Time</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">boottime</span>() -&gt; <span class="title">Int</span> </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> mid = [<span class="type">CTL_KERN</span>, <span class="type">KERN_BOOTTIME</span>]</span><br><span class="line">	<span class="keyword">var</span> boottime = timeval()</span><br><span class="line">	<span class="keyword">var</span> size = <span class="type">MemoryLayout</span>.size(ofValue: boottime)</span><br><span class="line">  <span class="keyword">if</span> sysctl(&amp;mid, <span class="number">2</span>, &amp;boottime, &amp;size, <span class="literal">nil</span>, <span class="number">0</span>) != -<span class="number">1</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> boottime.tv_sec</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è·å–è®¾å¤‡è‡ªä¸Šæ¬¡é‡å¯åè¿è¡Œçš„æ—¶é—´</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">now() - boottime()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ocè·å–æ–¹å¼</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">&gt; <span class="comment">//get system uptime since last boot</span></span><br><span class="line">&gt; - (<span class="built_in">NSTimeInterval</span>)uptime</span><br><span class="line">&gt; &#123;</span><br><span class="line">&gt; 	<span class="keyword">struct</span> timeval boottime;</span><br><span class="line">&gt; 	<span class="keyword">int</span> mib[<span class="number">2</span>] = &#123;<span class="built_in">CTL_KERN</span>, KERN_BOOTTIME&#125;;</span><br><span class="line">&gt; 	size_t size = <span class="keyword">sizeof</span>(boottime);</span><br><span class="line">&gt; </span><br><span class="line">&gt; 	<span class="keyword">struct</span> timeval now;</span><br><span class="line">&gt; 	<span class="keyword">struct</span> timezone tz;</span><br><span class="line">&gt; 	gettimeofday(&amp;now, &amp;tz);</span><br><span class="line">&gt; </span><br><span class="line">&gt; 	<span class="keyword">double</span> uptime = <span class="number">-1</span>;</span><br><span class="line">&gt; </span><br><span class="line">&gt; 	<span class="keyword">if</span> (sysctl(mib, <span class="number">2</span>, &amp;boottime, &amp;size, <span class="literal">NULL</span>, <span class="number">0</span>) != <span class="number">-1</span> &amp;&amp; boottime.tv_sec != <span class="number">0</span>)</span><br><span class="line">&gt; 	&#123;</span><br><span class="line">&gt; 		uptime = now.tv_sec - boottime.tv_sec;</span><br><span class="line">&gt; 		uptime += (<span class="keyword">double</span>)(now.tv_usec - boottime.tv_usec) / <span class="number">1000000.0</span>;</span><br><span class="line">&gt; 	&#125;</span><br><span class="line">&gt; 	<span class="keyword">return</span> uptime;</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="TimeUtilsç¼–å†™"><a href="#TimeUtilsç¼–å†™" class="headerlink" title="TimeUtilsç¼–å†™"></a>TimeUtilsç¼–å†™</h1><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TimeUtils</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">var</span> isServerTime: <span class="type">Bool</span> = <span class="literal">false</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">var</span> diffTime: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  	<span class="comment">/// é¡¹ç›®ä¸­æ‰€æœ‰è·å–æ—¶é—´çš„æ–¹æ³•</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">getServerTime</span>() -&gt; <span class="title">Int</span> </span>&#123;</span><br><span class="line">        objc_sync_enter(<span class="keyword">self</span>)</span><br><span class="line">        <span class="keyword">defer</span> &#123;</span><br><span class="line">            objc_sync_exit(<span class="keyword">self</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> !isServerTime &#123;</span><br><span class="line">            <span class="keyword">let</span> t = <span class="type">Date</span>().timestamp</span><br><span class="line">            <span class="keyword">return</span> t</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> t = diffTime + (now() - boottime())</span><br><span class="line">        <span class="keyword">return</span> t</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// ç”¨äºè®¡ç®—æ—¶é—´</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">calibrationTime</span>(<span class="title">lastServerTime</span>: <span class="title">Int</span>) -&gt; <span class="title">Int</span> </span>&#123;</span><br><span class="line">        objc_sync_enter(<span class="keyword">self</span>)</span><br><span class="line">        <span class="keyword">defer</span> &#123;</span><br><span class="line">            objc_sync_exit(<span class="keyword">self</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        diffTime = lastServerTime - (now() - boottime())</span><br><span class="line">        isServerTime = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">return</span> lastServerTime</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// è·å–å½“å‰ Unix Time</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">now</span>() -&gt; <span class="title">Int</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> now = timeval()</span><br><span class="line">        <span class="keyword">var</span> tz = timezone()</span><br><span class="line">        gettimeofday(&amp;now, &amp;tz)</span><br><span class="line">        <span class="keyword">return</span> now.tv_sec</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  	<span class="comment">/// è·å–è®¾å¤‡ä¸Šæ¬¡é‡å¯çš„ Unix Time</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">boottime</span>() -&gt; <span class="title">Int</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> mid = [<span class="type">CTL_KERN</span>, <span class="type">KERN_BOOTTIME</span>]</span><br><span class="line">        <span class="keyword">var</span> boottime = timeval()</span><br><span class="line">        <span class="keyword">var</span> size = <span class="type">MemoryLayout</span>.size(ofValue: boottime)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> sysctl(&amp;mid, <span class="number">2</span>, &amp;boottime, &amp;size, <span class="literal">nil</span>, <span class="number">0</span>) != -<span class="number">1</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> boottime.tv_sec</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Date</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> timestamp: <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> timeInterval: <span class="type">TimeInterval</span> = <span class="keyword">self</span>.timeIntervalSince1970</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Int</span>(timeInterval)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ©ç”¨AFNetworkingåŒæ­¥æ—¶é—´"><a href="#åˆ©ç”¨AFNetworkingåŒæ­¥æ—¶é—´" class="headerlink" title="åˆ©ç”¨AFNetworkingåŒæ­¥æ—¶é—´"></a>åˆ©ç”¨AFNetworkingåŒæ­¥æ—¶é—´</h1><p>åˆ©ç”¨AFNå‘èµ·è¯·æ±‚è¿”å›æ—¶é€šè¿‡HTTP Headeræ¥è·å–æœåŠ¡å™¨æ—¶é—´ï¼Œæ—¶é—´æ ¼å¼ä»¥<a href="https://link.jianshu.com/?t=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc7231%23section-7.1.1.1" target="_blank" rel="noopener">RFC-7231</a>ä¸­å®šä¹‰çš„â€HTTPæ—¥æœŸâ€æ ¼å¼æ¥å‘é€ï¼Œè§£æè¯¥æ—¶é—´éœ€è¦ç”¨åˆ°ä»¥ä¸‹çš„OCä»£ç ï¼ŒSwifté¡¹ç›®è¯·è‡ªè¡Œç”¨<code>Bridging-Header</code></p>
<p><strong>NSDate+InternetDateTime.h</strong></p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  NSDate+InternetDateTime.h</span></span><br><span class="line"><span class="comment">//  MWFeedParser</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Michael Waterfall on 07/10/2010.</span></span><br><span class="line"><span class="comment">//  Copyright 2010 Michael Waterfall. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Formatting hints</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> &#123;</span><br><span class="line">    DateFormatHintNone, </span><br><span class="line">    DateFormatHintRFC822, </span><br><span class="line">    DateFormatHintRFC3339</span><br><span class="line">&#125; DateFormatHint;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A category to parse internet date &amp; time strings</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSDate</span> (<span class="title">InternetDateTime</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Get date from RFC3339 or RFC822 string</span></span><br><span class="line"><span class="comment">// - A format/specification hint can be used to speed up, </span></span><br><span class="line"><span class="comment">//   otherwise both will be attempted in order to get a date</span></span><br><span class="line">+ (<span class="built_in">NSDate</span> *)dateFromInternetDateTimeString:(<span class="built_in">NSString</span> *)dateString </span><br><span class="line">                                formatHint:(DateFormatHint)hint;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get date from a string using a specific date specification</span></span><br><span class="line">+ (<span class="built_in">NSDate</span> *)dateFromRFC3339String:(<span class="built_in">NSString</span> *)dateString;</span><br><span class="line">+ (<span class="built_in">NSDate</span> *)dateFromRFC822String:(<span class="built_in">NSString</span> *)dateString;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p><strong>NSDate+InternetDateTime.m</strong></p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  NSDate+InternetDateTime.m</span></span><br><span class="line"><span class="comment">//  MWFeedParser</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by Michael Waterfall on 07/10/2010.</span></span><br><span class="line"><span class="comment">//  Copyright 2010 Michael Waterfall. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"NSDate+InternetDateTime.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Always keep the formatter around as they're expensive to instantiate</span></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">NSDateFormatter</span> *_internetDateTimeFormatter = <span class="literal">nil</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Good info on internet dates here:</span></span><br><span class="line"><span class="comment">// http://developer.apple.com/iphone/library/qa/qa2010/qa1480.html</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSDate</span> (<span class="title">InternetDateTime</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Instantiate single date formatter</span></span><br><span class="line">+ (<span class="built_in">NSDateFormatter</span> *)internetDateTimeFormatter &#123;</span><br><span class="line">    <span class="keyword">@synchronized</span>(<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!_internetDateTimeFormatter) &#123;</span><br><span class="line">            <span class="built_in">NSLocale</span> *en_US_POSIX = [[<span class="built_in">NSLocale</span> alloc] initWithLocaleIdentifier:<span class="string">@"en_US_POSIX"</span>];</span><br><span class="line">            _internetDateTimeFormatter = [[<span class="built_in">NSDateFormatter</span> alloc] init];</span><br><span class="line">            [_internetDateTimeFormatter setLocale:en_US_POSIX];</span><br><span class="line">            [_internetDateTimeFormatter setTimeZone:[<span class="built_in">NSTimeZone</span> timeZoneForSecondsFromGMT:<span class="number">0</span>]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _internetDateTimeFormatter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get a date from a string - hint can be used to speed up</span></span><br><span class="line">+ (<span class="built_in">NSDate</span> *)dateFromInternetDateTimeString:(<span class="built_in">NSString</span> *)dateString formatHint:(DateFormatHint)hint &#123;</span><br><span class="line">     <span class="comment">// Keep dateString around a while (for thread-safety)</span></span><br><span class="line">	<span class="built_in">NSDate</span> *date = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">if</span> (dateString) &#123;</span><br><span class="line">        <span class="keyword">if</span> (hint != DateFormatHintRFC3339) &#123;</span><br><span class="line">            <span class="comment">// Try RFC822 first</span></span><br><span class="line">            date = [<span class="built_in">NSDate</span> dateFromRFC822String:dateString];</span><br><span class="line">            <span class="keyword">if</span> (!date) date = [<span class="built_in">NSDate</span> dateFromRFC3339String:dateString];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Try RFC3339 first</span></span><br><span class="line">            date = [<span class="built_in">NSDate</span> dateFromRFC3339String:dateString];</span><br><span class="line">            <span class="keyword">if</span> (!date) date = [<span class="built_in">NSDate</span> dateFromRFC822String:dateString];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">// Finished with date string</span></span><br><span class="line">	<span class="keyword">return</span> date;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// See http://www.faqs.org/rfcs/rfc822.html</span></span><br><span class="line">+ (<span class="built_in">NSDate</span> *)dateFromRFC822String:(<span class="built_in">NSString</span> *)dateString &#123;</span><br><span class="line">     <span class="comment">// Keep dateString around a while (for thread-safety)</span></span><br><span class="line">    <span class="built_in">NSDate</span> *date = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">if</span> (dateString) &#123;</span><br><span class="line">        <span class="built_in">NSDateFormatter</span> *dateFormatter = [<span class="built_in">NSDate</span> internetDateTimeFormatter];</span><br><span class="line">        <span class="keyword">@synchronized</span>(dateFormatter) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Process</span></span><br><span class="line">            <span class="built_in">NSString</span> *RFC822String = [[<span class="built_in">NSString</span> stringWithString:dateString] uppercaseString];</span><br><span class="line">            <span class="keyword">if</span> ([RFC822String rangeOfString:<span class="string">@","</span>].location != <span class="built_in">NSNotFound</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!date) &#123; <span class="comment">// Sun, 19 May 2002 15:21:36 GMT</span></span><br><span class="line">                    [dateFormatter setDateFormat:<span class="string">@"EEE, d MMM yyyy HH:mm:ss zzz"</span>]; </span><br><span class="line">                    date = [dateFormatter dateFromString:RFC822String];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (!date) &#123; <span class="comment">// Sun, 19 May 2002 15:21 GMT</span></span><br><span class="line">                    [dateFormatter setDateFormat:<span class="string">@"EEE, d MMM yyyy HH:mm zzz"</span>]; </span><br><span class="line">                    date = [dateFormatter dateFromString:RFC822String];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (!date) &#123; <span class="comment">// Sun, 19 May 2002 15:21:36</span></span><br><span class="line">                    [dateFormatter setDateFormat:<span class="string">@"EEE, d MMM yyyy HH:mm:ss"</span>]; </span><br><span class="line">                    date = [dateFormatter dateFromString:RFC822String];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (!date) &#123; <span class="comment">// Sun, 19 May 2002 15:21</span></span><br><span class="line">                    [dateFormatter setDateFormat:<span class="string">@"EEE, d MMM yyyy HH:mm"</span>]; </span><br><span class="line">                    date = [dateFormatter dateFromString:RFC822String];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!date) &#123; <span class="comment">// 19 May 2002 15:21:36 GMT</span></span><br><span class="line">                    [dateFormatter setDateFormat:<span class="string">@"d MMM yyyy HH:mm:ss zzz"</span>]; </span><br><span class="line">                    date = [dateFormatter dateFromString:RFC822String];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (!date) &#123; <span class="comment">// 19 May 2002 15:21 GMT</span></span><br><span class="line">                    [dateFormatter setDateFormat:<span class="string">@"d MMM yyyy HH:mm zzz"</span>]; </span><br><span class="line">                    date = [dateFormatter dateFromString:RFC822String];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (!date) &#123; <span class="comment">// 19 May 2002 15:21:36</span></span><br><span class="line">                    [dateFormatter setDateFormat:<span class="string">@"d MMM yyyy HH:mm:ss"</span>]; </span><br><span class="line">                    date = [dateFormatter dateFromString:RFC822String];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (!date) &#123; <span class="comment">// 19 May 2002 15:21</span></span><br><span class="line">                    [dateFormatter setDateFormat:<span class="string">@"d MMM yyyy HH:mm"</span>]; </span><br><span class="line">                    date = [dateFormatter dateFromString:RFC822String];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!date) <span class="built_in">NSLog</span>(<span class="string">@"Could not parse RFC822 date: \"%@\" Possible invalid format."</span>, dateString);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">// Finished with date string</span></span><br><span class="line">    <span class="keyword">return</span> date;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// See http://www.faqs.org/rfcs/rfc3339.html</span></span><br><span class="line">+ (<span class="built_in">NSDate</span> *)dateFromRFC3339String:(<span class="built_in">NSString</span> *)dateString &#123;</span><br><span class="line">     <span class="comment">// Keep dateString around a while (for thread-safety)</span></span><br><span class="line">    <span class="built_in">NSDate</span> *date = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">if</span> (dateString) &#123;</span><br><span class="line">        <span class="built_in">NSDateFormatter</span> *dateFormatter = [<span class="built_in">NSDate</span> internetDateTimeFormatter];</span><br><span class="line">        <span class="keyword">@synchronized</span>(dateFormatter) &#123;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// Process date</span></span><br><span class="line">            <span class="built_in">NSString</span> *RFC3339String = [[<span class="built_in">NSString</span> stringWithString:dateString] uppercaseString];</span><br><span class="line">            RFC3339String = [RFC3339String stringByReplacingOccurrencesOfString:<span class="string">@"Z"</span> withString:<span class="string">@"-0000"</span>];</span><br><span class="line">            <span class="comment">// Remove colon in timezone as it breaks NSDateFormatter in iOS 4+.</span></span><br><span class="line">            <span class="comment">// - see https://devforums.apple.com/thread/45837</span></span><br><span class="line">            <span class="keyword">if</span> (RFC3339String.length &gt; <span class="number">20</span>) &#123;</span><br><span class="line">                RFC3339String = [RFC3339String stringByReplacingOccurrencesOfString:<span class="string">@":"</span> </span><br><span class="line">                                                                         withString:<span class="string">@""</span> </span><br><span class="line">                                                                            options:<span class="number">0</span></span><br><span class="line">                                                                              range:<span class="built_in">NSMakeRange</span>(<span class="number">20</span>, RFC3339String.length<span class="number">-20</span>)];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!date) &#123; <span class="comment">// 1996-12-19T16:39:57-0800</span></span><br><span class="line">                [dateFormatter setDateFormat:<span class="string">@"yyyy'-'MM'-'dd'T'HH':'mm':'ssZZZ"</span>]; </span><br><span class="line">                date = [dateFormatter dateFromString:RFC3339String];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!date) &#123; <span class="comment">// 1937-01-01T12:00:27.87+0020</span></span><br><span class="line">                [dateFormatter setDateFormat:<span class="string">@"yyyy'-'MM'-'dd'T'HH':'mm':'ss.SSSZZZ"</span>]; </span><br><span class="line">                date = [dateFormatter dateFromString:RFC3339String];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!date) &#123; <span class="comment">// 1937-01-01T12:00:27</span></span><br><span class="line">                [dateFormatter setDateFormat:<span class="string">@"yyyy'-'MM'-'dd'T'HH':'mm':'ss"</span>]; </span><br><span class="line">                date = [dateFormatter dateFromString:RFC3339String];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!date) <span class="built_in">NSLog</span>(<span class="string">@"Could not parse RFC3339 date: \"%@\" Possible invalid format."</span>, dateString);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">// Finished with date string</span></span><br><span class="line">	<span class="keyword">return</span> date;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ¥æºï¼š<a href="https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSDate+InternetDateTime.mï¼ˆARCï¼‰" target="_blank" rel="noopener">https://github.com/mwaterfall/MWFeedParser/blob/master/Classes/NSDate+InternetDateTime.mï¼ˆARCï¼‰</a></p>
</blockquote>
<p>åœ¨é¡¹ç›®ä¸­å°è£…ä¸€ä¸ªAFNçš„è¯·æ±‚åŸºç±»</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"><span class="keyword">import</span> AFNetworking</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">HttpMethod</span>: <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">GET</span> = <span class="string">"GET"</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">POST</span> = <span class="string">"POST"</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpClient</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> baseURLString = <span class="string">"http://base.url/"</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> minResponseTime = <span class="type">Int</span>.<span class="built_in">max</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> sharedClient: <span class="type">AFHTTPSessionManager</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> baseUrl = <span class="type">URL</span>(string: baseURLString)</span><br><span class="line">        <span class="keyword">let</span> client = <span class="type">AFHTTPSessionManager</span>(baseURL: baseUrl!)</span><br><span class="line">        <span class="comment">// è®¾ç½®è¯·æ±‚æ ¼å¼</span></span><br><span class="line">        client.requestSerializer = <span class="type">AFJSONRequestSerializer</span>()</span><br><span class="line">        <span class="comment">// è®¾ç½®è¿”å›æ ¼å¼</span></span><br><span class="line">        client.responseSerializer = <span class="type">AFJSONResponseSerializer</span>()</span><br><span class="line">        <span class="comment">// è®¾ç½®ç¦æ­¢ç¼“å­˜</span></span><br><span class="line">        client.requestSerializer.cachePolicy = .reloadIgnoringLocalCacheData</span><br><span class="line">        <span class="comment">// è®¾ç½®è¶…æ—¶</span></span><br><span class="line">        client.requestSerializer.timeoutInterval = <span class="number">10</span></span><br><span class="line">        <span class="comment">// ä»¥é˜²è§£ææ ¼å¼ä¸æ”¯æŒ</span></span><br><span class="line">        client.responseSerializer.acceptableContentTypes?.insert(<span class="string">"text/html"</span>)</span><br><span class="line">        client.responseSerializer.acceptableContentTypes?.insert(<span class="string">"text/plain"</span>)</span><br><span class="line">        <span class="keyword">return</span> client</span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">HttpClient</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// MARK: è¯·æ±‚æ–¹å¼</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// é¡¹ç›®å…¬å…±è¯·æ±‚ç±»</span></span><br><span class="line">    <span class="comment">/// - Parameters:</span></span><br><span class="line">    <span class="comment">///   - httpMethod: httpMethod</span></span><br><span class="line">    <span class="comment">///   - URLString: URLString</span></span><br><span class="line">    <span class="comment">///   - parameters: å‚æ•°</span></span><br><span class="line">    <span class="comment">///   - headers: è¯·æ±‚å¤´</span></span><br><span class="line">    <span class="comment">///   - progress: è¿›åº¦</span></span><br><span class="line">    <span class="comment">///   - success: æˆåŠŸå›è°ƒ</span></span><br><span class="line">    <span class="comment">///   - failure: å¤±è´¥å›è°ƒ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">request</span>(<span class="title">httpMethod</span>: <span class="title">HttpMethod</span>, <span class="title">URLString</span>: <span class="title">String</span>, <span class="title">parameters</span>: [<span class="title">String</span> : <span class="title">Any</span>]?,</span></span><br><span class="line"><span class="class">                       <span class="title">headers</span>: [<span class="title">String</span> : <span class="title">String</span>]?, <span class="title">progress</span>: ((<span class="title">Progress</span>) -&gt; <span class="title">Void</span>)?,</span></span><br><span class="line"><span class="class">                       <span class="title">success</span>: ((<span class="title">URLSessionDataTask</span>, <span class="title">Any</span>?) -&gt; <span class="title">Void</span>)?, <span class="title">failure</span>: ((<span class="title">URLSessionDataTask</span>?, <span class="title">Error</span>) -&gt; <span class="title">Void</span>)?) </span>&#123;</span><br><span class="line">        <span class="comment">// è®°å½•å½“å‰è¯·æ±‚å¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="keyword">let</span> startTime = <span class="type">Date</span>().timestamp</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å®šä¹‰é€šç”¨æˆåŠŸå›è°ƒ</span></span><br><span class="line">        <span class="keyword">let</span> successCallback = &#123; (task: <span class="type">URLSessionDataTask</span>, result: <span class="type">Any?</span>) -&gt; () <span class="keyword">in</span></span><br><span class="line">            <span class="comment">// å½“å‰è¯·æ±‚å“åº”çš„æ—¶é—´é—´éš”</span></span><br><span class="line">            <span class="keyword">let</span> responseTime = <span class="type">Date</span>().timestamp - startTime</span><br><span class="line">            <span class="comment">//å¦‚æœè¿™ä¸€æ¬¡çš„è¯·æ±‚å“åº”æ—¶é—´å°äºä¸Šä¸€æ¬¡ï¼Œåˆ™æ›´æ–°æœ¬åœ°ç»´æŠ¤çš„æ—¶é—´</span></span><br><span class="line">            <span class="keyword">if</span> responseTime &lt;= minResponseTime &#123;</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> response = task.response <span class="keyword">as</span>? <span class="type">HTTPURLResponse</span> &#123;</span><br><span class="line">                    <span class="comment">// ç½‘ç»œå“åº”å¤´åŒ…å«Dateå­—æ®µï¼ˆä¸–ç•Œæ—¶é—´ï¼‰</span></span><br><span class="line">                    <span class="keyword">if</span> response.allHeaderFields[<span class="string">"Date"</span>] <span class="keyword">is</span> <span class="type">String</span> &#123;</span><br><span class="line">                        <span class="keyword">let</span> dateString = response.allHeaderFields[<span class="string">"Date"</span>]! <span class="keyword">as</span>! <span class="type">String</span></span><br><span class="line">                        <span class="keyword">if</span> <span class="keyword">let</span> date = <span class="type">NSDate</span>(fromInternetDateTime: dateString, formatHint: <span class="type">DateFormatHintRFC822</span>) &#123;</span><br><span class="line">                            <span class="keyword">let</span> <span class="number">_</span> = <span class="type">TimeUtils</span>.calibrationTime(lastServerTime: <span class="type">Int</span>(date.timeIntervalSince1970))</span><br><span class="line">                            minResponseTime = responseTime</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            success?(task, result)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> httpMethod == .<span class="type">GET</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.sharedClient.<span class="keyword">get</span>(<span class="type">URLString</span>, parameters: parameters, headers: safeHeaders, progress: progress, success: successCallback, failure: failure)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> httpMethod == .<span class="type">POST</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.sharedClient.post(<span class="type">URLString</span>, parameters: parameters, headers: safeHeaders, progress: progress, success: successCallback, failure: failure)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="note warning"><p>è¯¥æ–¹æ¡ˆä¸‹å‰æå¿…é¡»ç¦æ­¢AFNè‡ªå¸¦çš„ç¼“å­˜ç­–ç•¥<code>client.requestSerializer.cachePolicy = .reloadIgnoringLocalCacheData</code>ã€‚ä¸ç¦æ­¢ä¼šå‡ºç°æ—¶é—´å¼‚å¸¸çš„ç°è±¡ï¼Œå¦‚é¡¹ç›®ä¸­æ˜¯ä½¿ç”¨AFNè‡ªå¸¦çš„ç¼“å­˜ç­–ç•¥åˆ™éœ€è¦æ›´æ¢é¡¹ç›®ä¸­çš„ç¼“å­˜æ–¹æ¡ˆã€‚</p></div>
<blockquote>
<p>è¯¥æ–¹æ¡ˆéƒ½ä»…åˆ°ç§’çº§ï¼Œå¦‚éœ€åˆ°æ¯«ç§’çº§è¯·åš*1000å¤„ç†</p>
<p>ä¸è¶³ï¼šè¿æ¥æœåŠ¡å™¨çš„è¿‡ç¨‹æ˜¯éœ€è¦æ—¶é—´çš„ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚æ—¶åˆ»çš„æ—¶é—´ä¸åº”ç”¨æ”¶åˆ°å“åº”å­˜åœ¨ä¸€å®šçš„æ—¶é—´å·®ï¼Œå¯¼è‡´è¯¯å·®çš„å­˜åœ¨ï¼ˆè¯¯å·®=æœåŠ¡å™¨å‘å‡ºå“åº”-&gt;åˆ°æœ¬æœºæ”¶åˆ°å“åº”è¿™ä¸ªæ—¶é—´ï¼‰ã€‚</p>
<p>ä½†æ˜¯é€šè¿‡ä¸Šé¢çš„AFNæ¯æ¬¡åˆ¤æ–­ï¼Œå¯ä»¥ä½¿å¾—è¯¯å·®é€æ¸é™ä½</p>
</blockquote>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.jianshu.com/p/48ac0bb1392e" target="_blank" rel="noopener">https://www.jianshu.com/p/48ac0bb1392e</a></p>
<p><a href="https://www.jianshu.com/p/bb2cbfad3e77" target="_blank" rel="noopener">https://www.jianshu.com/p/bb2cbfad3e77</a></p>
<p><a href="https://www.jianshu.com/p/df41659b06a9" target="_blank" rel="noopener">https://www.jianshu.com/p/df41659b06a9</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSå¡«å‘ä¹‹URLç¼–ç é—®é¢˜</title>
    <url>/2020/05/08/IOS%E5%A1%AB%E5%9D%91%E4%B9%8BURL%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨ä½¿ç”¨WKWebviewçš„æ—¶å€™ï¼Œé€šå¸¸éƒ½ç¦»ä¸å¼€URLï¼Œä¸€èˆ¬çš„ç¬¦åˆç½‘ç»œæ ‡å‡†çš„URLæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯åœ¨å…¬å¸å¼€å‘çš„æ—¶å€™é‡åˆ°äº†ä¸€äº›ç‰¹æ®ŠURLçš„æ—¶å€™å°±è¸©åˆ°äº†URLç¼–ç çš„å‘ã€‚</p>
<p>åœ¨1994å¹´è®¢åˆ¶çš„RFC1738æ–‡æ¡£ä¸­ï¼Œå¯¹å­—ç¬¦ä¸²ä¸­çš„é™¤äº†<code>- _ .</code>ä¹‹å¤–çš„æ‰€æœ‰éå­—æ¯æ•°å­—å­—ç¬¦éƒ½æ›¿æ¢æˆç™¾åˆ†å·(%)åè·Ÿä¸¤ä½åå…­è¿›åˆ¶æ•°ï¼Œåå…­è¿›åˆ¶æ•°ä¸­å­—æ¯å¿…é¡»ä¸ºå¤§å†™ã€‚</p>
<p>åœ¨2005å¹´å®šä¹‰çš„RFC3986ä¸­ï¼Œå°†é’ˆå¯¹<code>- _.~</code>å››ä¸ªå­—ç¬¦ä¹‹å¤–çš„æ‰€æœ‰éå­—æ¯æ•°å­—å­—ç¬¦è¿›è¡Œç™¾åˆ†å·ç¼–ç ã€‚å½“ç„¶ æ ¹æ®URLçš„ç±»å‹ä¸åŒï¼Œæœ‰ä¹Ÿä¸€éƒ¨åˆ†é¢„ç•™å­—ç¬¦ä¸éœ€è¦è¿›è¡Œç¼–ç ï¼Œä¾‹å¦‚æŸ¥è¯¢çš„<code>URL</code>ä¸­å¯ä»¥åŒ…å«<code>? /</code>å­—ç¬¦ï¼Œä¸éœ€è¦è½¬ä¹‰ã€‚æ›´è¯¦ç»†æ–‡æ¡£çš„å¯ä»¥æŸ¥çœ‹<a href="http://www.ietf.org/rfc/rfc3986.txt" target="_blank" rel="noopener">RFC 3986</a>ã€‚</p>
<a id="more"></a>
<h1 id="Swift-URL-Encode"><a href="#Swift-URL-Encode" class="headerlink" title="Swift URL Encode"></a>Swift URL Encode</h1><p><code>addingPercentEncoding(withAllowedCharacters:</code>æ˜¯iOS7ä¹‹åå‡ºç°çš„æ–°APIç”¨äº<code>url encode</code>ã€‚</p>
<p>å®˜æ–¹å¯¹è¯¥æ–¹æ³•çš„è§£é‡Šï¼š</p>
<blockquote>
<p>// Returns a new string made from the receiver by replacing all characters not in the allowedCharacters set with percent encoded characters. UTF-8 encoding is used to determine the correct percent encoded characters. Entire URL strings cannot be percent-encoded. This method is intended to percent-encode an URL component or subcomponent string, NOT the entire URL string. Any characters in allowedCharacters outside of the 7-bit ASCII range are ignored.  </p>
</blockquote>
<p>æœ€åä¸€å¥Any characters in allowedCharacters outside of the 7-bit ASCII range are ignored.ï¼Œæ„æ€å°±æ˜¯è¯´ï¼Œä»»ä½•é7-bit ASCIIå­—ç¬¦æåˆ°allowedCharactersé‡Œé¢ä¹Ÿå°†è¢«å¿½ç•¥ï¼Œä¹Ÿå°±æ˜¯<code>allowedCharacters</code>é‡Œé¢çš„å­—ç¬¦è·Ÿ7-bit ASCIIå­—ç¬¦ä¸ä¼šè¢«ç¼–ç ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œä¸Šé¢æ–¹æ³•åœ¨å¤„ç†çš„æ—¶å€™ä¼šç¼–ç urlçš„ä¸­çš„é7-bit ASCIIå­—ç¬¦ï¼Œå¦‚è¿™äº›ã€`#%^{}â€[]|\&lt;&gt;ã€‘ï¼Œå¦‚æœéœ€è¦å¿½ç•¥ä¹‹ï¼Œéœ€è¦é€šè¿‡.allowedCharactersè¿™ä¸ªå‚æ•°æŒ‡å®šã€‚</p>
<p>ç„¶è€Œå¹¶ä¸æ˜¯ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æ¡ˆä¾‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> url1 = <span class="string">"http://github.com#aaa?name=ä¸­æ–‡å­—ç¬¦&amp;key=!*'();:@&amp;=+$,/?%#[]"</span></span><br><span class="line"><span class="built_in">print</span>(url1.addingPercentEncoding(withAllowedCharacters: <span class="type">CharacterSet</span>(charactersIn: <span class="string">"#%^&#123;&#125;\"[]|\\&lt;&gt;"</span>))!)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">%68%74%74%70%3A%2F%2F%67%69%74%68%75%62%2E%63%6F%6D<span class="comment">#%61%61%61%3F%6E%61%6D%65%3D%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6%26%6B%65%79%3D%21%2A%27%28%29%3B%3A%40%26%3D%2B%24%2C%2F%3F%#[]</span></span><br><span class="line">Program ended with <span class="built_in">exit</span> code: 0</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°åªæœ‰åé¢çš„%#[]æ²¡æœ‰è¢«ç¼–ç ï¼Œå…¶ä½™éƒ½è¢«ç¼–ç äº†ï¼Œ<strong>ä¸æ˜¯æˆ‘ä»¬ä¹‹å‰æ‰€ç†è§£çš„â€œallowedCharactersé‡Œé¢çš„å­—ç¬¦è·Ÿ7-bit ASCIIå­—ç¬¦ä¸ä¼šè¢«ç¼–ç â€ï¼Œè€Œæ˜¯åªæœ‰allowedCharactersé‡Œçš„å­—ç¬¦æ‰ä¸ä¼šè¢«ç¼–ç </strong></p>
<p>æ­£ç¡®çš„æ–¹æ³•ï¼šä½¿ç”¨<code>inverted</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> url1 = <span class="string">"http://github.com#aaa?name=ä¸­æ–‡å­—ç¬¦&amp;key=!*'();:@&amp;=+$,/?%#[]"</span></span><br><span class="line"><span class="built_in">print</span>(url1.addingPercentEncoding(withAllowedCharacters: <span class="type">CharacterSet</span>(charactersIn: <span class="string">"#%^&#123;&#125;\"[]|\\&lt;&gt;"</span>).inverted)!)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">let</span> url1 = <span class="string">"http://github.com#aaa?name=ä¸­æ–‡å­—ç¬¦&amp;key=!*'();:@&amp;=+$,/?%#[]"</span></span><br><span class="line"><span class="built_in">print</span>(url1.addingPercentEncoding(withAllowedCharacters: CharacterSet(charactersIn: <span class="string">"#%^&#123;&#125;\"[]|\\&lt;&gt;"</span>).inverted)!)</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡é›†åˆåè½¬ä¹‹åå¾—åˆ°çš„ç»“æœæ‰æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œä½†æ˜¯æ­¤å¤„çš„æ„æ€æ˜¯åçš„ï¼Œå°±æ˜¯<strong>å¯¹é›†åˆè¿›è¡Œinvertedï¼Œè¡¨ç¤ºé›†åˆå†…çš„å­—ç¬¦å’Œé7-bit ASCIIå­—ç¬¦æ˜¯éœ€è¦è½¬ç </strong>çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»¥åä½¿ç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œè½¬ç çš„æ—¶å€™è¦ä»åé¢è¿›è¡Œè½¬ç ï¼ŒæŠŠæƒ³è¦è¿›è¡Œè½¬ç çš„ç‰¹æ®Šå­—ç¬¦å†™åœ¨é›†åˆé‡Œå°±å¥½äº†ï¼Œæ³¨æ„è¿™é‡Œè¯´çš„æ˜¯æƒ³è¦è½¬ç çš„ç‰¹æ®Šå­—ç¬¦ï¼ˆ<strong>!*â€˜();:@&amp;=+$,/?%#[]</strong>ï¼‰ï¼Œä¸­æ–‡ä¼šè¢«è®¤ä¸ºæ˜¯é7-bit ASCIIå­—ç¬¦ä¼šè‡ªåŠ¨è½¬ç çš„ã€‚</p>
<h2 id="CharacterSet"><a href="#CharacterSet" class="headerlink" title="CharacterSet"></a>CharacterSet</h2><p><code>CharacterSet</code>æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œ<code>CharacterSet.urlHostAllowed</code>ç­‰é¢„åˆ¶ç±»å‹åŒ…å«äº†æ‰€æœ‰ä¸éœ€è¦è¢«è½¬ç çš„å­—ç¬¦ï¼Œ<strong>åè¿‡æ¥è¯´å°±æ˜¯æŒ‡æ˜äº†éœ€è¦è¢«è½¬ç çš„å­—ç¬¦</strong>ã€‚<code>CharacterSet</code>ç±»ä¸­æä¾›äº†ä¸€äº›å¸¸ç”¨çš„URLè½¬ç çš„ç±»å‹:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="type">CharacterSet</span>.urlHostAllowed: è¢«è½¬ä¹‰çš„å­—ç¬¦æœ‰  <span class="string">"#%/&lt;&gt;?@\^`&#123;|&#125;</span></span><br><span class="line"><span class="string">CharacterSet.urlPathAllowed: è¢«è½¬ä¹‰çš„å­—ç¬¦æœ‰  "</span>#%;&lt;&gt;?[\]^`&#123;|&#125;</span><br><span class="line"><span class="type">CharacterSet</span>.urlUserAllowed: è¢«è½¬ä¹‰çš„å­—ç¬¦æœ‰   <span class="string">"#%/:&lt;&gt;?@[\]^`</span></span><br><span class="line"><span class="string">CharacterSet.urlQueryAllowed: è¢«è½¬ä¹‰çš„å­—ç¬¦æœ‰  "</span>#%&lt;&gt;[\]^`&#123;|&#125;</span><br><span class="line"><span class="type">CharacterSet</span>.urlPasswordAllowed è¢«è½¬ä¹‰çš„å­—ç¬¦æœ‰ <span class="string">"#%/:&lt;&gt;?@[\]^`&#123;|&#125;</span></span><br><span class="line"><span class="string">CharacterSet.urlFragmentAllowed è¢«è½¬ä¹‰çš„å­—ç¬¦æœ‰ "</span>#%&lt;&gt;[\]^`&#123;|&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="ç¼–ç "><a href="#ç¼–ç " class="headerlink" title="ç¼–ç "></a>ç¼–ç </h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> url1 = <span class="string">"http://github.com?name=ä¸­æ–‡å­—ç¬¦&amp;key=!*'();:@&amp;=+$,/?%#[]"</span></span><br><span class="line"><span class="built_in">print</span>(url1.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed)!)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">http://github.com?name=%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6&amp;key=!*<span class="string">'();:@&amp;=+$,/?%25%23%5B%5D</span></span><br><span class="line"><span class="string">Program ended with exit code: 0</span></span><br></pre></td></tr></table></figure>
<h3 id="è§£ç "><a href="#è§£ç " class="headerlink" title="è§£ç "></a>è§£ç </h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> encodeUrl1 = <span class="string">"http://github.com%23aaa?name=%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6&amp;key=!*'();:@&amp;=+$,/?%25%23%5B%5D"</span></span><br><span class="line"><span class="built_in">print</span>(encodeUrl1.removingPercentEncoding!)</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">http://github.com<span class="comment">#aaa?name=ä¸­æ–‡å­—ç¬¦&amp;key=!*'();:@&amp;=+$,/?%#[]</span></span><br><span class="line">Program ended with <span class="built_in">exit</span> code: 0</span><br></pre></td></tr></table></figure>
<h1 id="URLå¸¦æœ‰-ç¬¦å·çš„é—®é¢˜"><a href="#URLå¸¦æœ‰-ç¬¦å·çš„é—®é¢˜" class="headerlink" title="URLå¸¦æœ‰#ç¬¦å·çš„é—®é¢˜"></a>URLå¸¦æœ‰#ç¬¦å·çš„é—®é¢˜</h1><p>#æ˜¯urlä¸­çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæ˜¯è·Ÿåœ¨urlå‚æ•°ä¹‹åçš„çš„æœ€åä¸€éƒ¨åˆ†ï¼Œä½œä¸ºä¸€ä¸ªurlçš„é”šç‚¹ï¼Œç”¨äºæµè§ˆå™¨çš„å®šä½ã€‚</p>
<p>ä½†æ˜¯åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ—¶å€™å‘ç°#å·è¢«è½¬ä¹‰æ‰äº†ï¼Œå‰ç«¯é‚£è¾¹å°±æ²¡æœ‰åŠæ³•æ­£å¸¸æ˜¾ç¤ºã€‚æ‰€ä»¥éœ€è¦å…¶ä»–ç‰¹æ®Šå­—ç¬¦æ­£å¸¸è½¬ä¹‰ï¼Œé™¤å»#å·ã€‚</p>
<h2 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h2><p>æ²¿ç”¨é¢„åˆ¶ç±»å‹ï¼Œé‡‡ç”¨insertæ–¹æ³•</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> urlStr = <span class="string">"http://test.com/ä¸­æ–‡/main.html#/help"</span></span><br><span class="line"><span class="keyword">var</span> charSet = <span class="type">CharacterSet</span>.urlQueryAllowed</span><br><span class="line">charSet.insert(charactersIn: <span class="string">"#"</span>)</span><br><span class="line"><span class="keyword">let</span> encodingURL = urlStr.addingPercentEncoding(withAllowedCharacters: .urlQueryAllowed)!</span><br><span class="line"><span class="built_in">print</span>(encodingURL)</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œé‡‡ç”¨äº†é¢„åˆ¶çš„ï¼Œinsertä¼šåè¿‡æ¥è¢«åˆ é™¤æ‰</p>
<blockquote>
<p>è‡³äºinsertçš„åŸå› ï¼Œå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ä»¥ä¸‹ä»£ç </p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">&gt; <span class="keyword">let</span> url1 = <span class="string">"http://github.com#aaa?name=ä¸­æ–‡å­—ç¬¦&amp;key=!*'();:@&amp;=+$,/?%#[]"</span></span><br><span class="line">&gt; <span class="built_in">print</span>(<span class="string">"-----------------æœªåè½¬æƒ…å†µ-------------------------"</span>)</span><br><span class="line">&gt; <span class="keyword">var</span> s1 = <span class="type">CharacterSet</span>(charactersIn: #<span class="string">"[]"</span>#)</span><br><span class="line">&gt; <span class="built_in">print</span>(url1.addingPercentEncoding(withAllowedCharacters: s1.inverted)!)</span><br><span class="line">&gt; s1.insert(charactersIn: <span class="string">"["</span>)</span><br><span class="line">&gt; <span class="built_in">print</span>(url1.addingPercentEncoding(withAllowedCharacters: s1.inverted)!)</span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="built_in">print</span>(<span class="string">"-----------------åè½¬æƒ…å†µ-------------------------"</span>)</span><br><span class="line">&gt; <span class="keyword">var</span> s2 = <span class="type">CharacterSet</span>(charactersIn: #<span class="string">"[]"</span>#).inverted</span><br><span class="line">&gt; <span class="built_in">print</span>(url1.addingPercentEncoding(withAllowedCharacters: s2)!)</span><br><span class="line">&gt; s2.insert(charactersIn: <span class="string">"["</span>)</span><br><span class="line">&gt; <span class="built_in">print</span>(url1.addingPercentEncoding(withAllowedCharacters: s2)!)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>è¾“å‡ºç»“æœï¼Œç•™æ„æœ€åçš„[]ç¬¦å·æ˜¯å¦è¢«è½¬ä¹‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; -----------------æœªåè½¬æƒ…å†µ-------------------------</span><br><span class="line">&gt; http://github.com<span class="comment">#aaa?name=%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6&amp;key=!*'();:@&amp;=+$,/?%#%5B%5D</span></span><br><span class="line">&gt; http://github.com<span class="comment">#aaa?name=%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6&amp;key=!*'();:@&amp;=+$,/?%#%5B%5D</span></span><br><span class="line">&gt; -----------------åè½¬æƒ…å†µ-------------------------</span><br><span class="line">&gt; http://github.com<span class="comment">#aaa?name=%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6&amp;key=!*'();:@&amp;=+$,/?%#%5B%5D</span></span><br><span class="line">&gt; http://github.com<span class="comment">#aaa?name=%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6&amp;key=!*'();:@&amp;=+$,/?%#[%5D</span></span><br><span class="line">&gt; Program ended with <span class="built_in">exit</span> code: 0</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>è¿˜æœªæ‰¾åˆ°è§£é‡Šç†ç”±</p>
</blockquote>
<h2 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h2><p>è‡ªå®šä¹‰</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> urlStr = <span class="string">"http://test.com/ä¸­æ–‡/main.html#/help"</span></span><br><span class="line"><span class="keyword">let</span> encodingURL = urlStr.addingPercentEncoding(withAllowedCharacters: <span class="type">CharacterSet</span>(charactersIn: #<span class="string">""</span>%&lt;&gt;[\]^`&#123;|&#125;<span class="string">"#).inverted)!</span></span><br><span class="line"><span class="string">print(encodingURL)</span></span><br></pre></td></tr></table></figure>
<h1 id="Jsonçš„URLç¼–ç "><a href="#Jsonçš„URLç¼–ç " class="headerlink" title="Jsonçš„URLç¼–ç "></a>Jsonçš„URLç¼–ç </h1><p>æˆ‘å…¬å¸æœ‰çš„é“¾æ¥éœ€è¦æ‹¼æ¥ä¸Šä¸€å¤§æ®µçš„jsonï¼Œé‡Œé¢jsonè¿˜æœ‰å¤æ‚çš„&amp;ç­‰ç¬¦å·ï¼Œé¢„åˆ¶çš„è‚¯å®šä¸å¤Ÿç”¨ï¼Œåªèƒ½é‡‡ç”¨è‡ªå®šä¹‰æ–¹æ³•ï¼š</p>
<p>æ‰€ä»¥å°è£…äº†æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">String</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">urlEncoding</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> toSearchword = (<span class="keyword">self</span> <span class="keyword">as</span> <span class="type">NSString</span>).addingPercentEncoding(withAllowedCharacters: <span class="type">CharacterSet</span>(charactersIn: #<span class="string">"?!@#$^&amp;%*+,:;='"</span>`&lt;&gt;()[]&#123;&#125;/\|<span class="string">"#).inverted)</span></span><br><span class="line"><span class="string">        return toSearchword as String? ?? "</span><span class="string">"</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ç›´æ¥ä½¿ç”¨å³å¯</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> urlStr = <span class="string">"http://test.com/ä¸­æ–‡/main.html#/help"</span></span><br><span class="line"><span class="built_in">print</span>(urlStr.urlEncoding())</span><br></pre></td></tr></table></figure>
<h1 id="é¢˜å¤–è¯"><a href="#é¢˜å¤–è¯" class="headerlink" title="é¢˜å¤–è¯"></a>é¢˜å¤–è¯</h1><h2 id="Swift-5-å­—ç¬¦ä¸²è½¬ä¹‰å­—ç¬¦å¤„ç†"><a href="#Swift-5-å­—ç¬¦ä¸²è½¬ä¹‰å­—ç¬¦å¤„ç†" class="headerlink" title="Swift 5 å­—ç¬¦ä¸²è½¬ä¹‰å­—ç¬¦å¤„ç†"></a>Swift 5 å­—ç¬¦ä¸²è½¬ä¹‰å­—ç¬¦å¤„ç†</h2><p>å¢åŠ äº† # ç¬¦å·ï¼Œä½¿å¾—å†™å­—ç¬¦ä¸²æ›´åŠ ç®€å•ã€‚</p>
<p><strong>åœ¨å­—ç¬¦ä¸²ä¸­åŒ…å« â€œ æ—¶ä¸å¿…å†åŠ  \ </strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">//before</span><br><span class="line">let rain = &quot;The is\&quot;new\&quot;string&quot; </span><br><span class="line">//after</span><br><span class="line">let rain = #&quot;The is&quot;new&quot;string&quot;#</span><br></pre></td></tr></table></figure>
<p><strong>åŒ…å« \ åæ–œæ ä¹Ÿä¸éœ€è¦å†åŠ è½¬ä¹‰ç¬¦</strong></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//before</span></span><br><span class="line"><span class="keyword">let</span> rain = <span class="string">"The is\\new string"</span> </span><br><span class="line"><span class="comment">//after</span></span><br><span class="line"><span class="keyword">let</span> rain = <span class="meta">#"The is \new string"#</span></span><br></pre></td></tr></table></figure>
<p><strong>ç”±äºåæ–œæ ä½œä¸ºå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œæ‰€ä»¥åœ¨æ’å…¥å€¼çš„æ—¶å€™éœ€è¦åœ¨åé¢å†åŠ ä¸ª #</strong></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//before</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="number">26</span></span><br><span class="line"><span class="keyword">let</span> dontpanic = <span class="string">"myAge is \(age)"</span></span><br><span class="line"><span class="comment">// after</span></span><br><span class="line"><span class="keyword">let</span> answer = <span class="number">26</span></span><br><span class="line"><span class="keyword">let</span> dontpanic = <span class="meta">#"myAge is \#(age)"#</span></span><br></pre></td></tr></table></figure>
<p><strong>å½“å­—ç¬¦ä¸²åŒ…å« # æ—¶ï¼Œ å‰ååº”ç”¨ ## åŒ…è£¹å­—ç¬¦ä¸²</strong></p>
<figure class="highlight rust"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">str</span> = ##<span class="string">"this is "</span>a<span class="string">"#good ideal"</span>##</span><br></pre></td></tr></table></figure>
<p><strong>ç”¨ #â€â€â€ å¼€å¤´ â€œâ€â€#ç»“å°¾ æ¥è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">let</span> multiline = <span class="comment">#"""</span></span><br><span class="line">The answer to life,</span><br><span class="line">the universe,</span><br><span class="line">and everything is \<span class="comment">#(answer).</span></span><br><span class="line"><span class="string">""</span><span class="string">"#</span></span><br></pre></td></tr></table></figure>
<p><strong>ç”±äºä¸ç”¨åæ–œæ è½¬ä¹‰ ä½¿å¾—æ­£åˆ™è¡¨è¾¾å¼æ›´åŠ ç®€æ´æ˜äº†</strong></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//before</span></span><br><span class="line"><span class="keyword">let</span> regex1 = <span class="string">"\\\\[A-Z]+[A-Za-z]+\\.[a-z]+"</span></span><br><span class="line"><span class="comment">//after</span></span><br><span class="line"><span class="keyword">let</span> regex2 = <span class="meta">#"\\[A-Z]+[A-Za-z]+\.[a-z]+"#</span></span><br></pre></td></tr></table></figure>
<h2 id="Objective-C-url-encode"><a href="#Objective-C-url-encode" class="headerlink" title="Objective-C url encode"></a>Objective-C url encode</h2><p>APIè°ƒç”¨éƒ½æ˜¯ä¸€æ ·çš„,ä¸è¿‡ç½‘ä¸Šæµä¼ çš„æ¯”è¾ƒå¤šçš„æ˜¯ç”¨çš„<code>C API</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">NSString *ciphertext = @&quot;saf#*&amp;&quot;;        </span><br><span class="line">NSCharacterSet *set = [[NSCharacterSet characterSetWithCharactersInString:@&quot;!*&apos;();:@&amp;=+$,/?%#[]&quot;] invertedSet];</span><br><span class="line">NSString *resultString = [ciphertext stringByAddingPercentEncodingWithAllowedCharacters: set];</span><br></pre></td></tr></table></figure>
<p>C API</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">NSString *ciphertext = @<span class="string">"saf#*&amp;"</span>;</span><br><span class="line">NSString *encodedStr = (NSString *)CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes</span><br><span class="line">                                                     (kCFAllocatorDefault,</span><br><span class="line">                                                      (CFStringRef)ciphertext,</span><br><span class="line">                                                      <span class="literal">NULL</span>,</span><br><span class="line">                                                      CFSTR(<span class="string">"!*'();:@&amp;=+$,/?%#[]"</span>),</span><br><span class="line">                                                      kCFStringEncodingUTF8));</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.jianshu.com/p/c135127a3df2" target="_blank" rel="noopener">https://www.jianshu.com/p/c135127a3df2</a></p>
<p><a href="https://www.jianshu.com/p/74f7c5bbca50" target="_blank" rel="noopener">https://www.jianshu.com/p/74f7c5bbca50</a></p>
<p><a href="https://www.hangge.com/blog/cache/detail_1583.html" target="_blank" rel="noopener">https://www.hangge.com/blog/cache/detail_1583.html</a></p>
<p><a href="https://www.cnblogs.com/luoxiaofu/p/7110011.html" target="_blank" rel="noopener">https://www.cnblogs.com/luoxiaofu/p/7110011.html</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>è®°ä¸€æ¬¡ Vivo Y91 è°ƒè¯•APKçš„å‘</title>
    <url>/2020/04/14/%E8%AE%B0%E4%B8%80%E6%AC%A1-Vivo-Y91-%E8%B0%83%E8%AF%95APK%E7%9A%84%E5%9D%91/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h1><p>åœ¨é¡¹ç›®å·¥ä½œæµ‹è¯•é€”ä¸­ï¼Œå‘ç°Vivo Y91çš„æœºå‹å´ä¸€ç›´å‡ºç°debugå®‰è£…è¿è¡Œé—®é¢˜</p>
<a id="more"></a>
<h1 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h1><p>1.è®¾ç½®Android Studioï¼Œå…³é—­<code>Instant Run</code>ã€‚<code>File</code>-&gt;<code>Settings</code>-&gt;<code>BUild,Executionâ€¦</code>-&gt;<code>Instant Run</code> , å…³é—­å‹¾é€‰<code>Enable Instant Run</code><br>2.åœ¨ä½ çš„gradle.propertiesæ–‡ä»¶æ·»åŠ ä¸€å¥:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android.injected.testOnly = false</span><br></pre></td></tr></table></figure>
<h2 id="å…¶ä»–è§£å†³æ–¹æ³•ï¼ˆæœªæµ‹è¯•ï¼‰"><a href="#å…¶ä»–è§£å†³æ–¹æ³•ï¼ˆæœªæµ‹è¯•ï¼‰" class="headerlink" title="å…¶ä»–è§£å†³æ–¹æ³•ï¼ˆæœªæµ‹è¯•ï¼‰"></a>å…¶ä»–è§£å†³æ–¹æ³•ï¼ˆæœªæµ‹è¯•ï¼‰</h2><p>æ ¹æ®æ¯ä¸ªæ‰‹æœºä¸åŒï¼ŒæœªçŸ¥ä¹Ÿä¸å¤ªä¸€æ ·ï¼Œæ¯”å¦‚ vivo x21 æ˜¯åœ¨ï¼šè®¾ç½® -&gt; æ›´å¤šè®¾ç½® -&gt; æœªçŸ¥xxç®¡ç†ï¼ˆè®°ä¸å¤ªæ¸…æ¥šäº†ï¼‰ã€‚</p>
<p>ä¸€åŠ 3Tå‰æ®µæ—¶é—´æ›´æ–°äº† Android 8.0 ï¼Œå®ƒçš„ä½ç½®åœ¨ï¼š è®¾ç½® -&gt; åº”ç”¨ç¨‹åº -&gt; ç‰¹æ®Šè®¿é—®æƒé™ -&gt; å®‰è£…æœªçŸ¥åº”ç”¨ã€‚å¦‚ä¸‹å›¾ï¼Œæ‰“å¼€å¯¹åº”çš„è½¯ä»¶å³å¯ã€‚</p>
<h1 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h1><p>å…³äºå¼€å‘è¿‡ç¨‹ä¸­æ˜¯å¦å¼€å¯ Instant Runï¼Œæˆ‘ä¸ªäººå»ºè®®è¿˜æ˜¯å…³é—­å®ƒï¼Œæˆ‘åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸€ç›´éƒ½æ˜¯å…³é—­ç€çš„ï¼Œå› ä¸ºä¹‹å‰å¼€å¯å®ƒï¼Œå‡ºç°äº†ä¸€äº›è«åå…¶å¦™çš„é—®é¢˜ï¼Œç›®å‰æˆ‘ä»¬çš„ç¥å™¨ Android Studio å·²ç»ä¼˜åŒ–çš„å¾ˆå¥½äº†ï¼Œå³ä½¿é‡æ–°æ‰“åŒ…ï¼Œä¹Ÿæµªè´¹ä¸äº†å¤šå°‘æ—¶é—´ã€‚</p>
<p>å…³äº<code>android.injected.testOnly = false</code>çš„è®¾ç½®ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä»¬è·‘çš„ run apkéƒ½æ˜¯ debug ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯æµ‹è¯•ç‰ˆæœ¬ï¼Œè€Œ vivo çš„ä¸€äº›å°±ä¸æ”¯æŒè¿™ä¸ªæµ‹è¯•apkï¼ˆç½‘ä¸Šæœ‰äººè¿™æ ·è¯´ï¼Œç»è¿‡éªŒè¯ï¼Œä¸å‡ï¼Œåœ¨æ‰¾ç­”æ¡ˆçš„è¿‡ç¨‹ä¸­ï¼Œçœ‹åˆ°è¿‡å¾ˆå¤šåæ§½ï¼švivo x21ã€Y91ä¸é€‚åˆåšæµ‹è¯•æœºï¼Œå› ä¸ºå®ƒåªè®¤æ­£å¼åŒ…ï¼‰</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯æ—¶é—´åŒæ­¥æ–¹æ¡ˆ</title>
    <url>/2020/03/20/Android%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘é¡¹ç›®çš„ç¼–å†™ä¸­ï¼Œæ¥å£éœ€è¦æäº¤ç²¾ç¡®åˆ°ç§’çº§çš„æ—¶é—´æˆ³ç”¨ä½œæ ¡éªŒã€‚ä½†æ˜¯ä»…ä»…ä½¿ç”¨<code>System.currentTimeMillis()</code>ä¼šé¢ä¸´ç€æœ¬åœ°çš„æ—¶é—´ä¸æœåŠ¡å™¨æ—¶é—´ä¸ä¸€è‡´çš„é—®é¢˜ã€‚é‚£ä¹ˆæœ¬æ–‡æ–¹æ¡ˆèƒ½è®©æœ¬åœ°åº”ç”¨æ—¶é—´ä¸æœåŠ¡å™¨æ—¶é—´å­˜åœ¨è¯¯å·®èŒƒå›´å†…ä¿æŒåŒæ­¥ï¼Œå‡å°‘åº”ç”¨å‡ºé”™ç‡ã€‚</p>
<a id="more"></a>
<h1 id="é¢„å¤‡çŸ¥è¯†"><a href="#é¢„å¤‡çŸ¥è¯†" class="headerlink" title="é¢„å¤‡çŸ¥è¯†"></a>é¢„å¤‡çŸ¥è¯†</h1><ul>
<li><code>SystemClock.elapsedRealtime()</code> ï¼šæ‰‹æœºç³»ç»Ÿå¼€æœºæ—¶é—´ï¼ˆåŒ…å«ç¡çœ æ—¶é—´ï¼‰ï¼Œç”¨æˆ·æ— æ³•åœ¨è®¾ç½®é‡Œé¢ä¿®æ”¹ã€‚</li>
<li>åœ¨å¿…è¦çš„æ—¶åˆ»è·å–ä¸€ä¸‹æœåŠ¡å™¨æ—¶é—´ï¼Œç„¶åè®°å½•è¿™ä¸ªæ—¶åˆ»çš„æ‰‹æœºå¼€æœºæ—¶é—´ï¼ˆelapsedRealtimeï¼‰</li>
<li>åç»­æ—¶é—´è·å–ï¼š<strong>ç°åœ¨æœåŠ¡å™¨æ—¶é—´ = ä»¥å‰æœåŠ¡å™¨æ—¶é—´ + ç°åœ¨æ‰‹æœºå¼€æœºæ—¶é—´ - ä»¥å‰æœåŠ¡å™¨æ—¶é—´çš„è·å–æ—¶åˆ»çš„æ‰‹æœºå¼€æœºæ—¶é—´</strong></li>
<li>åˆ©ç”¨OkHttpçš„Interceptorè‡ªåŠ¨åŒæ­¥æ—¶é—´</li>
</ul>
<h1 id="TimeUtilsç¼–å†™"><a href="#TimeUtilsç¼–å†™" class="headerlink" title="TimeUtilsç¼–å†™"></a>TimeUtilsç¼–å†™</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> android.os.SystemClock;</span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.blankj.utilcode.util.LogUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> okhttp3.Headers;</span><br><span class="line"><span class="keyword">import</span> okhttp3.Interceptor;</span><br><span class="line"><span class="keyword">import</span> okhttp3.Request;</span><br><span class="line"><span class="keyword">import</span> okhttp3.Response;</span><br><span class="line"><span class="keyword">import</span> okhttp3.internal.http.HttpDate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»¥å‰æœåŠ¡å™¨æ—¶é—´ - ä»¥å‰æœåŠ¡å™¨æ—¶é—´çš„è·å–æ—¶åˆ»çš„ç³»ç»Ÿå¯åŠ¨æ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> diffTime = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜¯å¦æ˜¯æœåŠ¡å™¨æ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> isServerTime = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å½“å‰æ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">getServerTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!isServerTime) &#123;</span><br><span class="line">            <span class="keyword">return</span> System.currentTimeMillis() / <span class="number">1000</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (diffTime + SystemClock.elapsedRealtime()) / <span class="number">1000</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">calibrationTime</span><span class="params">(<span class="keyword">long</span> lastServerTime)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è®°å½•æ—¶é—´å·®</span></span><br><span class="line">        diffTime = lastServerTime - SystemClock.elapsedRealtime();</span><br><span class="line">        isServerTime = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> lastServerTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">/**</span></span><br><span class="line"><span class="comment">  	* åˆ©ç”¨OkHttpçš„Interceptorè‡ªåŠ¨åŒæ­¥æ—¶é—´</span></span><br><span class="line"><span class="comment">  	*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeSyncInterceptor</span> <span class="keyword">implements</span> <span class="title">Interceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> minResponseTime = Long.MAX_VALUE;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Response <span class="title">intercept</span><span class="params">(Chain chain)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">            Request request = chain.request();</span><br><span class="line">            <span class="keyword">long</span> startTime = System.nanoTime();</span><br><span class="line">            Response proceed = chain.proceed(request);</span><br><span class="line">            <span class="keyword">long</span> lastTime = System.nanoTime() - startTime;</span><br><span class="line"></span><br><span class="line">            Headers headers = proceed.headers();</span><br><span class="line">            calibration(lastTime, headers);</span><br><span class="line">            <span class="keyword">return</span> proceed;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">calibration</span><span class="params">(<span class="keyword">long</span> responseTime, Headers headers)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (headers == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å¦‚æœè¿™ä¸€æ¬¡çš„è¯·æ±‚å“åº”æ—¶é—´å°äºä¸Šä¸€æ¬¡ï¼Œåˆ™æ›´æ–°æœ¬åœ°ç»´æŠ¤çš„æ—¶é—´</span></span><br><span class="line">            <span class="keyword">if</span> (responseTime &gt;= minResponseTime) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          	<span class="comment">// ç½‘ç»œå“åº”å¤´åŒ…å«Dateå­—æ®µï¼ˆä¸–ç•Œæ—¶é—´ï¼‰</span></span><br><span class="line">          	<span class="comment">// åˆ©ç”¨Interceptorè®°å½•æ¯æ¬¡è¯·æ±‚å“åº”æ—¶é—´ï¼Œå¦‚æœæœ¬æ¬¡ç½‘ç»œæ“ä½œçš„æ—¶é—´å°äºä¸Šä¸€æ¬¡ç½‘ç»œæ“ä½œçš„æ—¶é—´ï¼Œåˆ™è·å–Dateå­—æ®µï¼Œè½¬æ¢æ—¶åŒºåæ›´æ–°æœ¬åœ°TimeUtilsã€‚</span></span><br><span class="line">            String standardTime = headers.get(<span class="string">"Date"</span>);</span><br><span class="line">            <span class="keyword">if</span> (!TextUtils.isEmpty(standardTime)) &#123;</span><br><span class="line"></span><br><span class="line">                Date parse = HttpDate.parse(standardTime);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (parse != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// å®¢æˆ·ç«¯è¯·æ±‚è¿‡ç¨‹ä¸€èˆ¬å¤§äºæ¯”æ”¶åˆ°å“åº”æ—¶é—´è€—æ—¶ï¼Œæ‰€ä»¥æ²¡æœ‰ç®€å•çš„é™¤2 åŠ ä¸Šå»ï¼Œè€Œæ˜¯ç›´æ¥ç”¨è¯¥æ—¶é—´</span></span><br><span class="line">                    TimeUtils.calibrationTime(parse.getTime());</span><br><span class="line">                    minResponseTime = responseTime;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åŸç†å°±æ˜¯é€šè¿‡HTTP Headeræ¥è·å–æœåŠ¡å™¨æ—¶é—´ï¼ˆæ³¨ï¼šæ—¶é—´æ ¼å¼ä»¥<a href="https://link.jianshu.com/?t=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc7231%23section-7.1.1.1" target="_blank" rel="noopener">RFC-7231</a>ä¸­å®šä¹‰çš„â€HTTPæ—¥æœŸâ€æ ¼å¼æ¥å‘é€ï¼‰</p>
<p>åœ¨OkHttpClientå¢åŠ è¯¥Utilsä¸‹çš„æ‹¦æˆªå™¨å³å¯ã€‚</p>
<p>ç”±äºé¡¹ç›®ä¸­åªéœ€è¦ç²¾ç¡®åˆ°ç§’ï¼Œè€Œè·å–çš„éƒ½æ˜¯ç²¾ç¡®åˆ°æ¯«ç§’çº§åˆ«ï¼Œæ‰€ä»¥TimeUtilsä¸‹è·å–çš„æ—¶å€™åšäº†é™¤ä»¥1000å¤„ç†ã€‚å¯èƒ½ä¼šå­˜åœ¨ç‚¹è¯¯å·®å§ã€‚ä½†æ˜¯åœ¨é¡¹ç›®ä¸­è¯¯å·®èŒƒå›´ä¸å¤§ï¼Œè¿˜åœ¨å¯æ¥å—èŒƒå›´å†…ã€‚</p>
<p>ä¸è¶³ï¼šè¿æ¥æœåŠ¡å™¨çš„è¿‡ç¨‹æ˜¯éœ€è¦æ—¶é—´çš„ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚æ—¶åˆ»çš„æ—¶é—´ä¸åº”ç”¨æ”¶åˆ°å“åº”å­˜åœ¨ä¸€å®šçš„æ—¶é—´å·®ï¼Œå¯¼è‡´è¯¯å·®çš„å­˜åœ¨ï¼ˆè¯¯å·®=æœåŠ¡å™¨å‘å‡ºå“åº”-&gt;åˆ°æœ¬æœºæ”¶åˆ°å“åº”è¿™ä¸ªæ—¶é—´ï¼‰ã€‚</p>
<p>ä½†æ˜¯é€šè¿‡ä¸Šé¢çš„TimeSyncInterceptoræ¯æ¬¡åˆ¤æ–­ï¼Œå¯ä»¥ä½¿å¾—è¯¯å·®é€æ¸é™ä½</p>
</blockquote>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://blog.csdn.net/qinci/article/details/70666631" target="_blank" rel="noopener">https://blog.csdn.net/qinci/article/details/70666631</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Android TextViewå¯Œæ–‡æœ¬ä¹‹Htmlæ ‡ç­¾</title>
    <url>/2020/03/19/Android-TextView%E5%AF%8C%E6%96%87%E6%9C%AC%E4%B9%8BHtml%E6%A0%87%E7%AD%BE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>TextViewä½œä¸ºä¸€ä¸ªæˆ‘ä»¬ç»å¸¸ä½¿ç”¨åˆ°çš„æ§ä»¶ï¼Œä½†æ˜¯åœ¨å†™ä¸€äº›UIçš„æ—¶å€™ä¼šé‡åˆ°ä¸€äº›ç‰¹åˆ«çš„æƒ…å†µï¼Œæ¥çœ‹ä¸€ä¸‹ç¤ºä¾‹å›¾ï¼š</p>
<a id="more"></a>
<p><img src="anli.png" alt></p>
<p>åˆ¸çš„ä»·æ ¼æ˜¯éœ€è¦çªå‡ºæ˜¾ç¤ºçš„ï¼Œè¿˜æœ‰åŸä»·ä¹Ÿéœ€è¦æ˜¾ç¤ºä¸€ä¸ªåˆ é™¤çº¿ã€‚</p>
<h1 id="TextViewçš„å¤šæ ·åŒ–æ˜¾ç¤º"><a href="#TextViewçš„å¤šæ ·åŒ–æ˜¾ç¤º" class="headerlink" title="TextViewçš„å¤šæ ·åŒ–æ˜¾ç¤º"></a>TextViewçš„å¤šæ ·åŒ–æ˜¾ç¤º</h1><p>å¦‚æœæ˜¯æ˜¾ç¤ºä¸åŒæ ·çš„å¤§å°æ–‡æœ¬å­—ä½“é¢œè‰²å¯ä»¥ç›´æ¥ä½¿ç”¨SpannableStringå®ç°ã€‚ä½†æ˜¯è¿™é‡Œä½¿ç”¨HTMLæ ‡ç­¾æ¥å®ç°æ•ˆæœã€‚</p>
<p>ä¾‹å¦‚å›¾ä¸Šçš„åˆ¸åæ–‡æœ¬ï¼Œå¯ä»¥ä½¿ç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">mTextView.setText(Html.fromHtml(<span class="string">"&lt;small&gt;åˆ¸åä»…&lt;/small&gt;&lt;big&gt; 20 &lt;/big&gt;&lt;small&gt;å…ƒ&lt;/small&gt;"</span>));</span><br></pre></td></tr></table></figure>
<p>å¦‚æœåœ¨strings.xmlä¸­å®šä¹‰æ—¶å€™éœ€è¦æ³¨æ„ï¼Œéœ€è¦è½¬ä¹‰HTMLæ ‡ç­¾ï¼Œä¸ç„¶çš„è¯ ç»è¿‡Androidå¤„ç†å æ‰€æœ‰çš„HTMLæ ‡ç­¾éƒ½ç»™è¿‡æ»¤æ‰äº†ã€‚éœ€è¦æŠŠæ‰€æœ‰çš„â€œ&lt;â€ç”¨â€œ&lt;â€æ›¿æ¢ï¼Œä¾‹å¦‚ï¼š </p>
<p><code>&lt;string name=&quot;htmlText&quot;&gt;&amp;lt;strong&gt;ç²—ä½“&amp;lt;/strong&gt;&lt;/string&gt;</code></p>
<p>å¦‚æœæ–‡æœ¬å†…å®¹æ¯”è¾ƒé•¿ï¼Œ åˆ™è½¬ä¹‰èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”é˜…è¯»ä¹Ÿä¸å¤ªæ–¹ä¾¿ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨XMLçš„CDATAæ ‡è®°ï¼Œ å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">string</span> <span class="attr">name</span>=<span class="string">"discount_price2"</span>&gt;</span>&lt;![CDATA[&lt;small&gt;åˆ¸åä»…&lt;/small&gt;&lt;big&gt; %1$s &lt;/big&gt;&lt;small&gt;å…ƒ&lt;/small&gt;]]&gt;<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>strings.xmlä¸­èŠ‚ç‚¹æ˜¯æ”¯æŒå ä½ç¬¦çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><code>&lt;string name=&quot;data&quot;&gt;æ•´æ•°å‹:%1$dï¼Œæµ®ç‚¹å‹ï¼š%2$.2fï¼Œå­—ç¬¦ä¸²:%3$s&lt;/string&gt;</code></p>
<p>å…¶ä¸­%åé¢æ˜¯å ä½ç¬¦çš„ä½ç½®ï¼Œä»1å¼€å§‹ï¼Œ</p>
<p><strong>$ åé¢æ˜¯å¡«å……æ•°æ®çš„ç±»å‹</strong></p>
<ul>
<li>$dï¼šè¡¨ç¤ºæ•´æ•°å‹ï¼›</li>
<li>$f ï¼šè¡¨ç¤ºæµ®ç‚¹å‹ï¼Œå…¶ä¸­få‰é¢çš„.2è¡¨ç¤ºå°æ•°çš„ä½æ•°</li>
<li>$sï¼šè¡¨ç¤ºå­—ç¬¦ä¸²</li>
</ul>
<p>ç„¶åä½¿ç”¨<code>Context.getResources().getString(data, ...format)</code>å³å¯</p>
</blockquote>
<p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„HTMLæ ‡ç­¾ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:left">Tags</th>
<th style="text-align:left">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">b, strong</td>
<td style="text-align:left">Bold</td>
</tr>
<tr>
<td style="text-align:left">i, em, cite, dfn</td>
<td style="text-align:left">Italics</td>
</tr>
<tr>
<td style="text-align:left">u</td>
<td style="text-align:left">Underline</td>
</tr>
<tr>
<td style="text-align:left">sub</td>
<td style="text-align:left">Subtext</td>
</tr>
<tr>
<td style="text-align:left">sup</td>
<td style="text-align:left">Supertext</td>
</tr>
<tr>
<td style="text-align:left">big</td>
<td style="text-align:left">Big</td>
</tr>
<tr>
<td style="text-align:left">small</td>
<td style="text-align:left">Small</td>
</tr>
<tr>
<td style="text-align:left">tt</td>
<td style="text-align:left">Monospace</td>
</tr>
<tr>
<td style="text-align:left">h1 â€¦ h6</td>
<td style="text-align:left">Headlines</td>
</tr>
<tr>
<td style="text-align:left">img</td>
<td style="text-align:left">Image</td>
</tr>
<tr>
<td style="text-align:left">font</td>
<td style="text-align:left">Font face and color</td>
</tr>
<tr>
<td style="text-align:left">blockquote</td>
<td style="text-align:left">For longer quotes</td>
</tr>
<tr>
<td style="text-align:left">a</td>
<td style="text-align:left">Link</td>
</tr>
<tr>
<td style="text-align:left">div, p</td>
<td style="text-align:left">Paragraph</td>
</tr>
<tr>
<td style="text-align:left">br</td>
<td style="text-align:left">Linefeed</td>
</tr>
</tbody>
</table>
<p>ä¸­æ–‡ç‰ˆï¼š</p>
<table>
<thead>
<tr>
<th>æ ‡ç­¾</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;br&gt;</code></td>
<td>æ’å…¥ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œæ ‡ç­¾æ˜¯ç©ºæ ‡ç­¾</td>
</tr>
<tr>
<td><code>&lt;p&gt;</code></td>
<td>å®šä¹‰æ®µè½ï¼Œæ ‡ç­¾ä¼šè‡ªåŠ¨åœ¨å…¶å‰åå„æ·»åŠ ä¸€ä¸ªç©ºè¡Œ</td>
</tr>
<tr>
<td><code>&lt;h1&gt;</code></td>
<td>h1æ ‡é¢˜</td>
</tr>
<tr>
<td><code>&lt;h2&gt;</code></td>
<td>h2æ ‡é¢˜</td>
</tr>
<tr>
<td><code>&lt;h3&gt;</code></td>
<td>h3æ ‡é¢˜</td>
</tr>
<tr>
<td><code>&lt;h4&gt;</code></td>
<td>h4æ ‡é¢˜</td>
</tr>
<tr>
<td><code>&lt;h5&gt;</code></td>
<td>h5æ ‡é¢˜</td>
</tr>
<tr>
<td><code>&lt;h6&gt;</code></td>
<td>h6æ ‡é¢˜</td>
</tr>
<tr>
<td><code>&lt;div&gt;</code></td>
<td>æ–‡æ¡£åˆ†èŠ‚</td>
</tr>
<tr>
<td><code>&lt;strong&gt;</code></td>
<td>æŠŠæ–‡æœ¬å®šä¹‰ä¸ºè¯­æ°”æ›´å¼ºçš„å¼ºè°ƒçš„å†…å®¹ã€‚TextViewä¸­è¡¨ç°ä¸ºæ–‡æœ¬åŠ ç²—</td>
</tr>
<tr>
<td><code>&lt;b&gt;</code></td>
<td>æ–‡æœ¬åŠ ç²—</td>
</tr>
<tr>
<td><code>&lt;em&gt;</code></td>
<td>æŠŠæ–‡æœ¬å®šä¹‰ä¸ºå¼ºè°ƒçš„å†…å®¹ã€‚TextViewä¸­è¡¨ç°ä¸ºæ–œä½“æ–‡æœ¬æ•ˆæœã€‚</td>
</tr>
<tr>
<td><code>&lt;cite&gt;</code></td>
<td>å®šä¹‰å¼•ç”¨ï¼ŒTextViewä¸­è¡¨ç°ä¸ºæ–œä½“æ–‡æœ¬æ•ˆæœ</td>
</tr>
<tr>
<td><code>&lt;dfn&gt;</code></td>
<td>æ ‡è®°é‚£äº›å¯¹ç‰¹æ®Šæœ¯è¯­æˆ–çŸ­è¯­çš„å®šä¹‰ã€‚TextViewä¸­è¡¨ç°ä¸ºæ–œä½“æ–‡æœ¬æ•ˆæœã€‚</td>
</tr>
<tr>
<td><code>&lt;i&gt;</code></td>
<td>æ˜¾ç¤ºæ–œä½“æ–‡æœ¬æ•ˆæœ</td>
</tr>
<tr>
<td><code>&lt;big&gt;</code></td>
<td>å‘ˆç°å¤§å·å­—ä½“æ•ˆæœ</td>
</tr>
<tr>
<td><code>&lt;small&gt;</code></td>
<td>å‘ˆç°å°å·å­—ä½“æ•ˆæœ</td>
</tr>
<tr>
<td><code>&lt;strike&gt;</code></td>
<td>å®šä¹‰åˆ é™¤çº¿æ ·å¼çš„æ–‡å­—</td>
</tr>
<tr>
<td><code>&lt;font size=&quot;...&quot; color=&quot;...&quot; face=&quot;...&quot;&gt;</code></td>
<td>è§„å®šæ–‡æœ¬çš„å­—ä½“ã€å­—ä½“å°ºå¯¸ã€å­—ä½“é¢œè‰²   colorï¼šæ–‡æœ¬é¢œè‰²ï¼›sizeï¼šæ–‡æœ¬å¤§å°ï¼›faceï¼šæ–‡æœ¬å­—ä½“</td>
</tr>
<tr>
<td><code>&lt;blockquote&gt;</code></td>
<td>å°†<code>&lt;blockquote&gt;</code> ä¸ <code>&lt;/blockquote&gt;</code>ä¹‹é—´çš„æ–‡æœ¬ä»å¸¸è§„æ–‡æœ¬ä¸­åˆ†ç¦»å‡ºæ¥,é€šå¸¸åœ¨å·¦ã€å³ä¸¤è¾¹è¿›è¡Œç¼©è¿›ï¼Œæœ‰æ—¶ä½¿ç”¨æ–œä½“</td>
</tr>
<tr>
<td><code>&lt;tt&gt;</code></td>
<td>å‘ˆç°ç±»ä¼¼æ‰“å­—æœºæˆ–è€…ç­‰å®½çš„æ–‡æœ¬æ•ˆæœ</td>
</tr>
<tr>
<td><code>&lt;a&gt;</code></td>
<td>å®šä¹‰è¶…é“¾æ¥ã€‚æœ€é‡è¦çš„å±æ€§æ˜¯ href å±æ€§ï¼Œå®ƒæŒ‡ç¤ºé“¾æ¥çš„ç›®æ ‡ã€‚ hrefï¼šæŒ‡ç¤ºé“¾æ¥çš„ç›®æ ‡</td>
</tr>
<tr>
<td><code>&lt;u&gt;</code></td>
<td>ä¸ºæ–‡æœ¬æ·»åŠ ä¸‹åˆ’çº¿</td>
</tr>
<tr>
<td><code>&lt;sup&gt;</code></td>
<td>å®šä¹‰ä¸Šæ ‡æ–‡æœ¬</td>
</tr>
<tr>
<td><code>&lt;sub&gt;</code></td>
<td>å®šä¹‰ä¸‹æ ‡æ–‡æœ¬</td>
</tr>
<tr>
<td><code>&lt;img src=&quot;...&quot;&gt;</code></td>
<td>å‘ç½‘é¡µä¸­åµŒå…¥ä¸€å¹…å›¾åƒã€‚<code>&lt;img&gt;</code>æ ‡ç­¾å¹¶ä¸ä¼šåœ¨ç½‘é¡µä¸­æ’å…¥å›¾åƒï¼Œè€Œæ˜¯ä»ç½‘é¡µä¸Šé“¾æ¥å›¾åƒã€‚<code>&lt;img&gt;</code> æ ‡ç­¾åˆ›å»ºçš„æ˜¯è¢«å¼•ç”¨å›¾åƒçš„å ä½ç©ºé—´ã€‚   srcï¼šå›¾åƒçš„urlï¼›altï¼šå›¾åƒçš„æ›¿ä»£æ–‡æœ¬</td>
</tr>
</tbody>
</table>
<h1 id="strikeæ ‡ç­¾ä½¿ç”¨æ³¨æ„"><a href="#strikeæ ‡ç­¾ä½¿ç”¨æ³¨æ„" class="headerlink" title="strikeæ ‡ç­¾ä½¿ç”¨æ³¨æ„"></a>strikeæ ‡ç­¾ä½¿ç”¨æ³¨æ„</h1><p>åœ¨ä½¿ç”¨<code>&lt;strike&gt;</code>æ—¶ï¼Œ6.0ç³»ç»Ÿå¯èƒ½ä¼šä¸æ˜¾ç¤ºã€‚åˆ™éœ€è¦åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ·»åŠ åˆ é™¤çº¿      </span></span><br><span class="line">tv.getPaint().setFlags(Paint.STRIKE_THRU_TEXT_FLAG);  </span><br><span class="line"><span class="comment">//åœ¨ä»£ç ä¸­è®¾ç½®åŠ ç²—            </span></span><br><span class="line">tv.getPaint().setFlags(Paint.FAKE_BOLD_TEXT_FLAG);  </span><br><span class="line"><span class="comment">//æ·»åŠ ä¸‹åˆ’çº¿        </span></span><br><span class="line">tv.getPaint().setFlags(Paint.UNDERLINE_TEXT_FLAG);</span><br></pre></td></tr></table></figure>
<p>è¦ä»€ä¹ˆæ•ˆæœå¯ä»¥è‡ªå·±åœ¨ä»£ç ä¸­è®¾ç½®ï¼Œé€‰æ‹©ä¸åŒçš„ Flags å°±è¡Œäº†ã€‚</p>
<h1 id="aæ ‡ç­¾ä½¿ç”¨æ³¨æ„"><a href="#aæ ‡ç­¾ä½¿ç”¨æ³¨æ„" class="headerlink" title="aæ ‡ç­¾ä½¿ç”¨æ³¨æ„"></a>aæ ‡ç­¾ä½¿ç”¨æ³¨æ„</h1><p>ä½¿ç”¨aæ ‡ç­¾åè®¾ç½®äº†hrefå±æ€§åï¼Œä¸åšä»»ä½•è®¾ç½®æ˜¯æ— æ³•è¿›è¡Œç‚¹å‡»è·³è½¬çš„ï¼Œéœ€è¦TextViewè§£æè®¾ç½®ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">tv.setText(Html.fromHtml(url));<span class="comment">//è§£æhtml</span></span><br><span class="line">tv.setMovementMethod(LinkMovementMethod.getInstance());<span class="comment">//è®¾ç½®å¯ç‚¹å‡»</span></span><br></pre></td></tr></table></figure>
<p>æˆ–ç€xmlä¸­æ·»åŠ </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">android:autoLink="web"</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·é»˜è®¤æ˜¯ç”¨æµè§ˆå™¨æ‰“å¼€aæ ‡ç­¾é‡Œé¢çš„é“¾æ¥ã€‚</p>
<p><strong>ä½†æ˜¯å¦‚æœè¦è·å–åˆ°aæ ‡ç­¾çš„ç‚¹å‡»äº‹ä»¶å’Œé“¾æ¥çš„è¯ï¼Œé‚£ä¹ˆå°±è¦æ¢ä¸€ä¸ªæ–¹æ³•ï¼š</strong></p>
<blockquote>
<p>å…¶ä»–æ–¹æ³•åŸºæœ¬éƒ½è¦æ¶‰åŠåˆ°SpannableStringçš„è®¾ç½®ï¼›æˆ–æ˜¯è‡ªå®šä¹‰UrlSpanï¼Œé‡å†™å®ƒçš„onClickæ–¹æ³•ï¼›æœ‰äº›è¿˜è¦éå†æ–‡æœ¬å¯»æ‰¾ä»¥httpå¼€å¤´çš„å­—ç¬¦ä¸²ã€‚ä½†æ˜¯æƒ³è¦æ‰¾ä¸€ä¸ªæ¯”è¾ƒç®€å•äº›çš„æ–¹æ³•ï¼Œæ‰€ä»¥ç”¨äº†ä¸€ä¸‹æ–¹æ³•å®ç°</p>
</blockquote>
<p>è€Œè¯¥æ–¹æ³•ä½¿ç”¨å‚è€ƒäº†LinkMovementMethodæ¥å®ç°</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.text.Layout;</span><br><span class="line"><span class="keyword">import</span> android.text.Selection;</span><br><span class="line"><span class="keyword">import</span> android.text.Spannable;</span><br><span class="line"><span class="keyword">import</span> android.text.method.LinkMovementMethod;</span><br><span class="line"><span class="keyword">import</span> android.text.method.MovementMethod;</span><br><span class="line"><span class="keyword">import</span> android.text.style.URLSpan;</span><br><span class="line"><span class="keyword">import</span> android.view.MotionEvent;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tv.xianqi.test190629.view.activity.WebViewActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebLinkMethod</span> <span class="keyword">extends</span> <span class="title">LinkMovementMethod</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> WebLinkMethod instance;</span><br><span class="line">    <span class="keyword">private</span> Context context;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">WebLinkMethod</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.context = context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> MovementMethod <span class="title">getInstance</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>)</span><br><span class="line">            instance = <span class="keyword">new</span> WebLinkMethod(context);</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(TextView widget, Spannable buffer, MotionEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> action = event.getAction();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (action == MotionEvent.ACTION_UP ||</span><br><span class="line">                action == MotionEvent.ACTION_DOWN) &#123;</span><br><span class="line">            <span class="keyword">int</span> x = (<span class="keyword">int</span>) event.getX();</span><br><span class="line">            <span class="keyword">int</span> y = (<span class="keyword">int</span>) event.getY();</span><br><span class="line"></span><br><span class="line">            x -= widget.getTotalPaddingLeft();</span><br><span class="line">            y -= widget.getTotalPaddingTop();</span><br><span class="line"></span><br><span class="line">            x += widget.getScrollX();</span><br><span class="line">            y += widget.getScrollY();</span><br><span class="line"></span><br><span class="line">            Layout layout = widget.getLayout();</span><br><span class="line">            <span class="keyword">int</span> line = layout.getLineForVertical(y);</span><br><span class="line">            <span class="keyword">int</span> off = layout.getOffsetForHorizontal(line, x);</span><br><span class="line"><span class="comment">//          ClickableSpan[] link = buffer.getSpans(off, off, ClickableSpan.class);</span></span><br><span class="line">            URLSpan[] link = buffer.getSpans(off, off, URLSpan<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">            <span class="keyword">if</span> (link.length != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (action == MotionEvent.ACTION_UP) &#123;</span><br><span class="line"><span class="comment">//                  link[0].onClick(widget);</span></span><br><span class="line"><span class="comment">//                  è¿™é‡Œæ”¹ä¸ºæˆ‘ä»¬éœ€è¦åšçš„åŠ¨ä½œ</span></span><br><span class="line">                    WebViewActivity.startWebViewActivity(context, link[<span class="number">0</span>].getURL());</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (action == MotionEvent.ACTION_DOWN) &#123;</span><br><span class="line">                    Selection.setSelection(buffer,</span><br><span class="line">                            buffer.getSpanStart(link[<span class="number">0</span>]),</span><br><span class="line">                            buffer.getSpanEnd(link[<span class="number">0</span>]));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                Selection.removeSelection(buffer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.onTouchEvent(widget, buffer, event);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ—¶åˆ™æ”¹ç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">textView.setMovementMethodCompat(WebLinkMethod.getInstance(<span class="keyword">this</span>));</span><br></pre></td></tr></table></figure>
<p>ç”±äºé¡µé¢è·³è½¬æˆ‘ä»¬éœ€è¦ç”¨åˆ°åŸé¡µé¢çš„ä¸Šä¸‹æ–‡ï¼Œäºæ˜¯ä¿®æ”¹äº†æ„é€ å‡½æ•°ï¼ŒåŠ å…¥äº†Contextï¼›</p>
<p>URLSpanæ˜¯ClickableSpançš„å­ç±»ï¼Œå®ç°äº†getURL()çš„æ–¹æ³•ï¼Œæ‰€ä»¥è¿™é‡Œè¦æ¢æˆå®ƒæˆ‘ä»¬æ‰èƒ½å–åˆ°é“¾æ¥åœ°å€ï¼Œlink[0]å°±æ˜¯æˆ‘ä»¬ç‚¹å‡»åˆ°çš„è¶…é“¾æ¥å­—ç¬¦ä¸²ï¼Œé€šè¿‡link[0].getURL()æˆ‘ä»¬å¯ä»¥è·å¾—å®ƒçš„é“¾æ¥åœ°å€ã€‚</p>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="https://blog.csdn.net/github_37847975/article/details/75425633" target="_blank" rel="noopener">https://blog.csdn.net/github_37847975/article/details/75425633</a></p>
<p><a href="https://blog.csdn.net/bhadx520/article/details/47433203?depth_1-utm_source=distribute.pc_relevant_right.none-task&amp;utm_source=distribute.pc_relevant_right.none-task" target="_blank" rel="noopener">https://blog.csdn.net/bhadx520/article/details/47433203?depth_1-utm_source=distribute.pc_relevant_right.none-task&amp;utm_source=distribute.pc_relevant_right.none-task</a></p>
<p><a href="https://blog.csdn.net/ganggang1st/article/details/6804086" target="_blank" rel="noopener">https://blog.csdn.net/ganggang1st/article/details/6804086</a></p>
<p><a href="https://blog.csdn.net/yulyu/article/details/52244925" target="_blank" rel="noopener">https://blog.csdn.net/yulyu/article/details/52244925</a></p>
<p><a href="https://www.jianshu.com/p/c4e1aacb9685" target="_blank" rel="noopener">https://www.jianshu.com/p/c4e1aacb9685</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³Android Studioâ€”â€”Received close_notify during handshake</title>
    <url>/2020/02/18/%E8%A7%A3%E5%86%B3Android-Studio%E2%80%94%E2%80%94Received-close-notify-during-handshake/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>é—®é¢˜ERROR ï¼š Received close_notify during handshake</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* What went wrong:</span><br><span class="line">A problem occurred configuring root project &apos;NotificationDemo&apos;.</span><br><span class="line">&gt; Could not resolve all artifacts for configuration &apos;:classpath&apos;.</span><br><span class="line">   &gt; Could not download guava.jar (com.google.guava:guava:23.0)</span><br><span class="line">      &gt; Could not get resource &apos;https://jcenter.bintray.com/com/google/guava/guava/23.0/guava-23.0.jar&apos;.</span><br><span class="line">         &gt; Could not GET &apos;https://jcenter.bintray.com/com/google/guava/guava/23.0/guava-23.0.jar&apos;.</span><br><span class="line">            &gt; Received close_notify during handshake</span><br><span class="line">   &gt; Could not download kotlin-reflect.jar (org.jetbrains.kotlin:kotlin-reflect:1.2.0)</span><br><span class="line">      &gt; Could not get resource &apos;https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-reflect/1.2.0/kotlin-reflect-1.2.0.jar&apos;.</span><br><span class="line">         &gt; Could not GET &apos;https://jcenter.bintray.com/org/jetbrains/kotlin/kotlin-reflect/1.2.0/kotlin-reflect-1.2.0.jar&apos;.</span><br><span class="line">            &gt; Received close_notify during handshake</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>å¯èƒ½æ˜¯Jcenterä¸€ç›´è¿æ¥è¶…æ—¶äº†å§ï¼Œè¯·æ±‚ä¸äº†ï¼Œæ‰€ä»¥æŸ¥äº†ä¸€ä¸‹èµ„æ–™ï¼Œæš‚æ—¶ä½¿ç”¨å›½å†…æºå³å¯ã€‚</p>
<blockquote>
<p>æœ‰ç¿»å¢™åº”è¯¥ä¸ä¼šå‡ºç°è¯¥é—®é¢˜ï¼Œä½†æ˜¯æœ€è¿‘è“ç¯å¥½åƒåˆè¿ä¸ä¸Šäº†ï¼ŒçœŸæ˜¯éº»é¬¼çƒ¦çš„ç©æ„ã€‚</p>
</blockquote>
<p><strong>è§£å†³æ–¹æ³•</strong></p>
<p>åœ¨é¡¹ç›®çš„ Gradle æ–‡ä»¶é‡Œï¼Œé…ç½®å›½å†…æºï¼ˆå°† <code>Jcenter()</code>æ³¨æ‰æˆ–è€…åˆ æ‰ï¼Œæ›¿æ¢æˆä¸‹å›¾ä¸¤è¡Œ<code>maven</code>é…ç½®ï¼‰</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">maven&#123;url <span class="string">'http://maven.aliyun.com/nexus/content/groups/public/'</span>&#125;</span><br><span class="line">maven&#123;url <span class="string">"https://jitpack.io"</span>&#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–° <code>Sync</code> æˆ–è€… <code>Rebuild</code>å³å¯</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://blog.csdn.net/w13576267399/article/details/82019359" target="_blank" rel="noopener">https://blog.csdn.net/w13576267399/article/details/82019359</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Studio</tag>
      </tags>
  </entry>
  <entry>
    <title>é‡å­¦Androidä¹‹Notification</title>
    <url>/2020/02/11/%E9%87%8D%E5%AD%A6Android%E4%B9%8BNotification/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä»€ä¹ˆæ˜¯é€šçŸ¥"><a href="#ä»€ä¹ˆæ˜¯é€šçŸ¥" class="headerlink" title="ä»€ä¹ˆæ˜¯é€šçŸ¥"></a>ä»€ä¹ˆæ˜¯é€šçŸ¥</h1><p>é€šçŸ¥æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨åº”ç”¨ç¨‹åºæ­£å¸¸çš„ç”¨æˆ·ç•Œé¢ä¹‹å¤–æ˜¾ç¤ºç»™ç”¨æˆ·çš„æ¶ˆæ¯ã€‚<br>é€šçŸ¥å‘å‡ºæ—¶ï¼Œå®ƒé¦–å…ˆå‡ºç°åœ¨çŠ¶æ€æ çš„é€šçŸ¥åŒºåŸŸä¸­ï¼Œç”¨æˆ·æ‰“å¼€é€šçŸ¥æŠ½å±‰å¯æŸ¥çœ‹é€šçŸ¥è¯¦æƒ…ã€‚é€šçŸ¥åŒºåŸŸå’Œé€šçŸ¥æŠ½å±‰éƒ½æ˜¯ç”¨æˆ·å¯ä»¥éšæ—¶æŸ¥çœ‹çš„ç³»ç»Ÿæ§åˆ¶åŒºåŸŸã€‚</p>
<a id="more"></a>
<p>å„ç§é€šçŸ¥çš„å±•ç°å½¢å¼å¦‚å›¾ï¼š</p>
<p><img src="notificationshow.png" alt></p>
<h1 id="é€šçŸ¥çš„åŸºç¡€ç”¨æ³•"><a href="#é€šçŸ¥çš„åŸºç¡€ç”¨æ³•" class="headerlink" title="é€šçŸ¥çš„åŸºç¡€ç”¨æ³•"></a>é€šçŸ¥çš„åŸºç¡€ç”¨æ³•</h1><h2 id="é€šçŸ¥åˆ›å»ºæ–¹å¼åŒºåˆ«"><a href="#é€šçŸ¥åˆ›å»ºæ–¹å¼åŒºåˆ«" class="headerlink" title="é€šçŸ¥åˆ›å»ºæ–¹å¼åŒºåˆ«"></a>é€šçŸ¥åˆ›å»ºæ–¹å¼åŒºåˆ«</h2><p>éšç€Androidç³»ç»Ÿä¸æ–­å‡çº§ï¼ŒNotificationçš„åˆ›å»ºæ–¹å¼ä¹Ÿéšä¹‹å˜åŒ–ï¼Œä¸»è¦å˜åŒ–å¦‚ä¸‹:</p>
<p><strong>Android 3.0ä¹‹å‰</strong></p>
<p>Android 3.0 (API level 11)ä¹‹å‰ï¼Œä½¿ç”¨<code>new Notification()</code>æ–¹å¼åˆ›å»ºé€šçŸ¥:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">NotificationManager mNotifyMgr = </span><br><span class="line">      (NotificationManager) getSystemService(NOTIFICATION_SERVICE);</span><br><span class="line">PendingIntent contentIntent = PendingIntent.getActivity(</span><br><span class="line">      <span class="keyword">this</span>, <span class="number">0</span>, <span class="keyword">new</span> Intent(<span class="keyword">this</span>, ResultActivity<span class="class">.<span class="keyword">class</span>), 0)</span>;</span><br><span class="line"></span><br><span class="line">Notification notification = <span class="keyword">new</span> Notification(icon, tickerText, when);</span><br><span class="line">notification.setLatestEventInfo(<span class="keyword">this</span>, title, content, contentIntent);</span><br><span class="line"></span><br><span class="line">mNotifyMgr.notify(NOTIFICATIONS_ID, notification);</span><br></pre></td></tr></table></figure>
<p><strong>Android 3.0 (API level 11)åŠæ›´é«˜ç‰ˆæœ¬</strong></p>
<p>Android 3.0å¼€å§‹å¼ƒç”¨<code>new Notification()</code>æ–¹å¼ï¼Œæ”¹ç”¨<code>Notification.Builder()</code>æ¥åˆ›å»ºé€šçŸ¥:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">NotificationManager mNotifyMgr = </span><br><span class="line">      (NotificationManager) getSystemService(NOTIFICATION_SERVICE);</span><br><span class="line">PendingIntent contentIntent = PendingIntent.getActivity(</span><br><span class="line">      <span class="keyword">this</span>, <span class="number">0</span>, <span class="keyword">new</span> Intent(<span class="keyword">this</span>, ResultActivity<span class="class">.<span class="keyword">class</span>), 0)</span>;</span><br><span class="line"></span><br><span class="line">Notification notification = <span class="keyword">new</span> Notification.Builder(<span class="keyword">this</span>)</span><br><span class="line">            .setSmallIcon(R.drawable.notification_icon)</span><br><span class="line">            .setContentTitle(<span class="string">"My notification"</span>)</span><br><span class="line">            .setContentText(<span class="string">"Hello World!"</span>)</span><br><span class="line">            .setContentIntent(contentIntent)</span><br><span class="line">            .build();<span class="comment">// getNotification()</span></span><br><span class="line"></span><br><span class="line">mNotifyMgr.notify(NOTIFICATIONS_ID, notification);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™é‡Œéœ€è¦æ³¨æ„: <code>build()</code> æ˜¯Androdi 4.1(API level 16)åŠ å…¥çš„ï¼Œç”¨ä»¥æ›¿ä»£<code>getNotification()</code>ã€‚API level 16å¼€å§‹å¼ƒç”¨<code>getNotification()</code></p>
</blockquote>
<p><strong>å…¼å®¹Android 3.0ä¹‹å‰çš„ç‰ˆæœ¬</strong></p>
<p>ä¸ºäº†å…¼å®¹<code>API level 11</code>ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œ<code>v4 Support Library</code>ä¸­æä¾›äº†<br> <code>NotificationCompat.Builder()</code>è¿™ä¸ªæ›¿ä»£æ–¹æ³•ã€‚å®ƒä¸<code>Notification.Builder()</code>ç±»ä¼¼ï¼ŒäºŒè€…æ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">NotificationManager mNotifyMgr = </span><br><span class="line">      (NotificationManager) getSystemService(NOTIFICATION_SERVICE);</span><br><span class="line">PendingIntent contentIntent = PendingIntent.getActivity(</span><br><span class="line">      <span class="keyword">this</span>, <span class="number">0</span>, new Intent(<span class="keyword">this</span>, ResultActivity<span class="class">.<span class="keyword">class</span>), <span class="type">0);</span></span></span><br><span class="line"></span><br><span class="line">NotificationCompat.Builder mBuilder = </span><br><span class="line">      new NotificationCompat.Builder(<span class="keyword">this</span>)</span><br><span class="line">            .setSmallIcon(R.drawable.notification_icon)</span><br><span class="line">            .setContentTitle(<span class="string">"My notification"</span>)</span><br><span class="line">            .setContentText(<span class="string">"Hello World!"</span>)</span><br><span class="line">            .setContentIntent(contentIntent);</span><br><span class="line"></span><br><span class="line">mNotifyMgr.notify(NOTIFICATIONS_ID, mBuilder.build());</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨ï¼šé™¤ç‰¹åˆ«è¯´æ˜å¤–ï¼Œæœ¬æ–‡å°†æ ¹æ® <code>NotificationCompat.Builder()</code> å±•å¼€è§£æï¼Œ<br><code>Notification.Builder()</code>ç±»ä¼¼ã€‚</strong></p>
</blockquote>
<h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><h3 id="é€šçŸ¥çš„å¿…è¦å±æ€§"><a href="#é€šçŸ¥çš„å¿…è¦å±æ€§" class="headerlink" title="é€šçŸ¥çš„å¿…è¦å±æ€§"></a>é€šçŸ¥çš„å¿…è¦å±æ€§</h3><p>ä¸€ä¸ªé€šçŸ¥å¿…é¡»åŒ…å«ä»¥ä¸‹ä¸‰é¡¹å±æ€§:</p>
<ul>
<li>å°å›¾æ ‡ï¼Œå¯¹åº” setSmallIcon()</li>
<li>é€šçŸ¥æ ‡é¢˜ï¼Œå¯¹åº” setContentTitle()</li>
<li>è¯¦ç»†ä¿¡æ¯ï¼Œå¯¹åº” setContentText()</li>
</ul>
<p>å…¶ä»–å±æ€§å‡ä¸ºå¯é€‰é¡¹ï¼Œæ›´å¤šå±æ€§æ–¹æ³•è¯·å‚è€ƒ<a href="https://link.jianshu.com?t=http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html" target="_blank" rel="noopener">NotificationCompat.Builder</a>ã€‚</p>
<p>å°½ç®¡å…¶ä»–éƒ½æ˜¯å¯é€‰çš„ï¼Œä½†ä¸€èˆ¬éƒ½ä¼šä¸ºé€šçŸ¥æ·»åŠ è‡³å°‘ä¸€ä¸ªåŠ¨ä½œ(Action)ï¼Œè¿™ä¸ªåŠ¨ä½œå¯ä»¥æ˜¯è·³è½¬åˆ°Activityã€å¯åŠ¨ä¸€ä¸ªServiceæˆ–å‘é€ä¸€ä¸ªBroadcasç­‰ã€‚ é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸ºé€šçŸ¥æ·»åŠ åŠ¨ä½œ:</p>
<ul>
<li>ä½¿ç”¨PendingIntent</li>
<li>é€šè¿‡å¤§è§†å›¾é€šçŸ¥çš„ <code>Action Button</code>ï¼Œä»…æ”¯æŒAndroid 4.1 (API level 16)åŠæ›´é«˜ç‰ˆæœ¬</li>
</ul>
<h3 id="åˆ›å»ºä¸€ä¸ªé€šçŸ¥"><a href="#åˆ›å»ºä¸€ä¸ªé€šçŸ¥" class="headerlink" title="åˆ›å»ºä¸€ä¸ªé€šçŸ¥"></a>åˆ›å»ºä¸€ä¸ªé€šçŸ¥</h3><p>1ã€å®ä¾‹åŒ–ä¸€ä¸ªNotificationCompat.Builderå¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">NotificationCompat.Builder builderNormal = <span class="keyword">new</span> NotificationCompat.Builder(<span class="keyword">this</span>)</span><br><span class="line">                        .setSmallIcon(R.mipmap.ic_launcher)</span><br><span class="line">                        .setContentTitle(<span class="string">"æ™®é€šçš„é€šçŸ¥æ ‡é¢˜"</span>)</span><br><span class="line">                        .setContentText(<span class="string">"æ™®é€šçš„é€šçŸ¥å†…å®¹"</span>);</span><br></pre></td></tr></table></figure>
<p>NotificationCompat.Builderè‡ªåŠ¨è®¾ç½®çš„é»˜è®¤å€¼:</p>
<ul>
<li><strong>priority:</strong> PRIORITY_DEFAULT</li>
<li><strong>when: </strong>System.currentTimeMillis()</li>
<li><strong>audio stream: </strong>STREAM_DEFAULT</li>
</ul>
<p>2ã€å®šä¹‰å¹¶è®¾ç½®ä¸€ä¸ªé€šçŸ¥åŠ¨ä½œ(Action)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Intent secIntent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, SecActivity<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">PendingIntent secPendingIntent = PendingIntent.getActivity(<span class="keyword">this</span>, <span class="number">0</span>,</span><br><span class="line">        secIntent, PendingIntent.FLAG_UPDATE_CURRENT);</span><br><span class="line">builder.setContentIntent(secPendingIntent);</span><br></pre></td></tr></table></figure>
<p>PendingIntent æ˜¯ä¸€ç§ç‰¹æ®Šçš„ Intent ï¼Œå­—é¢æ„æ€å¯ä»¥è§£é‡Šä¸ºå»¶è¿Ÿçš„ Intent ï¼Œç”¨äºåœ¨æŸä¸ªäº‹ä»¶ç»“æŸåæ‰§è¡Œç‰¹å®šçš„ Action ã€‚ä»ä¸Šé¢å¸¦ Action çš„é€šçŸ¥ä¹Ÿèƒ½éªŒè¯è¿™ä¸€ç‚¹ï¼Œå½“ç”¨æˆ·ç‚¹å‡»é€šçŸ¥æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œã€‚<br>PendingIntent æ˜¯ Android ç³»ç»Ÿç®¡ç†å¹¶æŒæœ‰çš„ç”¨äºæè¿°å’Œè·å–åŸå§‹æ•°æ®çš„å¯¹è±¡çš„æ ‡å¿—(å¼•ç”¨)ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å³ä¾¿åˆ›å»ºè¯¥PendingIntentå¯¹è±¡çš„è¿›ç¨‹è¢«æ€æ­»äº†ï¼Œè¿™ä¸ªPendingItentå¯¹è±¡åœ¨å…¶ä»–è¿›ç¨‹ä¸­è¿˜æ˜¯å¯ç”¨çš„</strong>ã€‚<br>æ—¥å¸¸ä½¿ç”¨ä¸­çš„çŸ­ä¿¡ã€é—¹é’Ÿç­‰éƒ½ç”¨åˆ°äº† PendingIntentã€‚</p>
<p>PendingIntent ä¸»è¦å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼è·å–ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–ä¸€ä¸ªç”¨äºå¯åŠ¨ Activity çš„ PendingIntent å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> PendingIntent <span class="title">getActivity</span><span class="params">(Context context, <span class="keyword">int</span> requestCode, Intent intent, <span class="keyword">int</span> flags)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–ä¸€ä¸ªç”¨äºå¯åŠ¨ Service çš„ PendingIntent å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> PendingIntent <span class="title">getService</span><span class="params">(Context context, <span class="keyword">int</span> requestCode, Intent intent, <span class="keyword">int</span> flags)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–ä¸€ä¸ªç”¨äºå‘ BroadcastReceiver å¹¿æ’­çš„ PendingIntent å¯¹è±¡</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> PendingIntent <span class="title">getBroadcast</span><span class="params">(Context context, <span class="keyword">int</span> requestCode, Intent intent, <span class="keyword">int</span> flags)</span></span></span><br></pre></td></tr></table></figure>
<p>PendingIntent å…·æœ‰ä»¥ä¸‹å‡ ç§ flagï¼š</p>
<ul>
<li><strong>FLAG_CANCEL_CURRENT:</strong>å¦‚æœå½“å‰ç³»ç»Ÿä¸­å·²ç»å­˜åœ¨ä¸€ä¸ªç›¸åŒçš„ PendingIntent å¯¹è±¡ï¼Œé‚£ä¹ˆå°±å°†å…ˆå°†å·²æœ‰çš„ PendingIntent å–æ¶ˆï¼Œç„¶åé‡æ–°ç”Ÿæˆä¸€ä¸ª PendingIntent å¯¹è±¡ã€‚</li>
<li><strong>FLAG_NO_CREATE:</strong>å¦‚æœå½“å‰ç³»ç»Ÿä¸­ä¸å­˜åœ¨ç›¸åŒçš„ PendingIntent å¯¹è±¡ï¼Œç³»ç»Ÿå°†ä¸ä¼šåˆ›å»ºè¯¥ PendingIntent å¯¹è±¡è€Œæ˜¯ç›´æ¥è¿”å› null ã€‚</li>
<li><strong>FLAG_ONE_SHOT:</strong>è¯¥ PendingIntent åªä½œç”¨ä¸€æ¬¡ã€‚</li>
<li><strong>FLAG_UPDATE_CURRENT:</strong>å¦‚æœç³»ç»Ÿä¸­å·²å­˜åœ¨è¯¥ PendingIntent å¯¹è±¡ï¼Œé‚£ä¹ˆç³»ç»Ÿå°†ä¿ç•™è¯¥ PendingIntent å¯¹è±¡ï¼Œä½†æ˜¯ä¼šä½¿ç”¨æ–°çš„ Intent æ¥æ›´æ–°ä¹‹å‰ PendingIntent ä¸­çš„ Intent å¯¹è±¡æ•°æ®ï¼Œä¾‹å¦‚æ›´æ–° Intent ä¸­çš„ Extrasã€‚</li>
</ul>
<p>3ã€ç”Ÿæˆ<code>Notification</code>å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Notification notificationNormal = builderNormal.build();</span><br></pre></td></tr></table></figure>
<p>4ã€ä½¿ç”¨<code>NotificationManager</code>å‘é€é€šçŸ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">NotificationManager mNotificationManager;</span><br><span class="line">mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);</span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºIDï¼Œåç»­æ›´æ–°é€šçŸ¥ä¼šä½¿ç”¨åˆ°</span></span><br><span class="line">mNotificationManager.notify(<span class="number">0</span>, notificationNormal);</span><br></pre></td></tr></table></figure>
<h3 id="æ›´æ–°é€šçŸ¥"><a href="#æ›´æ–°é€šçŸ¥" class="headerlink" title="æ›´æ–°é€šçŸ¥"></a>æ›´æ–°é€šçŸ¥</h3><p>æ›´æ–°é€šçŸ¥å¾ˆç®€å•ï¼Œåªéœ€å†æ¬¡å‘é€ç›¸åŒIDçš„é€šçŸ¥å³å¯ï¼Œå¦‚æœä¹‹å‰çš„é€šçŸ¥ä¾ç„¶å­˜åœ¨åˆ™ä¼šæ›´æ–°é€šçŸ¥å±æ€§ï¼Œå¦‚æœä¹‹å‰é€šçŸ¥ä¸å­˜åœ¨åˆ™é‡æ–°åˆ›å»ºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">NotificationCompat.Builder builder = <span class="keyword">new</span> NotificationCompat.Builder(<span class="keyword">this</span>)</span><br><span class="line">        .setSmallIcon(R.mipmap.ic_launcher)</span><br><span class="line">        .setContentTitle(<span class="string">"æ›´æ–°çš„é€šçŸ¥æ ‡é¢˜"</span>)</span><br><span class="line">        .setContentText(<span class="string">"æ›´æ–°çš„é€šçŸ¥å†…å®¹"</span>);</span><br><span class="line"></span><br><span class="line">builder.setContentIntent(secPendingIntent);</span><br><span class="line"></span><br><span class="line">Notification notificationUpdate = builder.build();</span><br><span class="line"><span class="comment">// ä¿è¯ä¸ä¸Šè¿°åˆ›å»ºçš„ç›¸åŒIDå³å¯ã€‚</span></span><br><span class="line">mNotificationManager.notify(<span class="number">0</span>, notificationUpdate);</span><br></pre></td></tr></table></figure>
<h3 id="å–æ¶ˆé€šçŸ¥"><a href="#å–æ¶ˆé€šçŸ¥" class="headerlink" title="å–æ¶ˆé€šçŸ¥"></a>å–æ¶ˆé€šçŸ¥</h3><p>å–æ¶ˆé€šçŸ¥æœ‰å¦‚ä¸‹å‡ ç§æ–¹å¼:</p>
<ul>
<li>ç‚¹å‡»é€šçŸ¥æ çš„æ¸…é™¤æŒ‰é’®ï¼Œä¼šæ¸…é™¤æ‰€æœ‰å¯æ¸…é™¤çš„é€šçŸ¥</li>
<li>è®¾ç½®äº† setAutoCancel() æˆ– FLAG_AUTO_CANCEL çš„é€šçŸ¥ï¼Œç‚¹å‡»è¯¥é€šçŸ¥æ—¶ä¼šæ¸…é™¤å®ƒ</li>
<li>é€šè¿‡ NotificationManager è°ƒç”¨ cancel(int id) æ–¹æ³•æ¸…é™¤æŒ‡å®š ID çš„é€šçŸ¥</li>
<li>é€šè¿‡ NotificationManager è°ƒç”¨ cancel(String tag, int id) æ–¹æ³•æ¸…é™¤æŒ‡å®š TAG å’Œ ID çš„é€šçŸ¥</li>
<li>é€šè¿‡ NotificationManager è°ƒç”¨ cancelAll() æ–¹æ³•æ¸…é™¤æ‰€æœ‰è¯¥åº”ç”¨ä¹‹å‰å‘é€çš„é€šçŸ¥</li>
</ul>
<p>æ·»åŠ <code>setAutoCancel</code>æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">NotificationCompat.Builder builderNormal = <span class="keyword">new</span> NotificationCompat.Builder(<span class="keyword">this</span>)</span><br><span class="line">        .setAutoCancel(<span class="keyword">true</span>)</span><br><span class="line">        .setSmallIcon(R.mipmap.ic_launcher)</span><br><span class="line">        .setContentTitle(<span class="string">"æ™®é€šçš„é€šçŸ¥æ ‡é¢˜"</span>)</span><br><span class="line">        .setContentText(<span class="string">"æ™®é€šçš„é€šçŸ¥å†…å®¹"</span>);</span><br></pre></td></tr></table></figure>
<h2 id="é€šçŸ¥ç±»å‹"><a href="#é€šçŸ¥ç±»å‹" class="headerlink" title="é€šçŸ¥ç±»å‹"></a>é€šçŸ¥ç±»å‹</h2><h3 id="å¤§è§†å›¾é€šçŸ¥"><a href="#å¤§è§†å›¾é€šçŸ¥" class="headerlink" title="å¤§è§†å›¾é€šçŸ¥"></a>å¤§è§†å›¾é€šçŸ¥</h3><p>é€šçŸ¥æœ‰ä¸¤ç§è§†å›¾ï¼šæ™®é€šè§†å›¾å’Œå¤§è§†å›¾ã€‚</p>
<p>æ™®é€šè§†å›¾ï¼š</p>
<p><img src="normalview.png" alt></p>
<p>å¤§è§†å›¾ï¼ˆBigTextä¸ºä¾‹ï¼‰ï¼š</p>
<p><img src="bigtextview.png" alt></p>
<p>é»˜è®¤æƒ…å†µä¸‹ä¸ºæ™®é€šè§†å›¾ï¼Œå¯é€šè¿‡<code>NotificationCompat.Builder.setStyle()</code>è®¾ç½®å¤§è§†å›¾ã€‚</p>
<blockquote>
<p>æ³¨: å¤§è§†å›¾(Big Views)ç”±Android 4.1(API level 16)å¼€å§‹å¼•å…¥ï¼Œä¸”ä»…æ”¯æŒAndroid 4.1åŠæ›´é«˜ç‰ˆæœ¬ã€‚</p>
</blockquote>
<p>ä»¥ä¸Šå›¾ä¸ºä¾‹:<br>1ã€æ„å»ºAction Buttonçš„PendingIntent</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Intent dismissIntent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, PingService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">                dismissIntent.setAction(<span class="string">"dismiss"</span>);</span><br><span class="line">                PendingIntent p1 = PendingIntent.getService(<span class="keyword">this</span>, <span class="number">0</span>, dismissIntent, PendingIntent.FLAG_UPDATE_CURRENT);</span><br><span class="line"></span><br><span class="line">                Intent snoozeIntent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, PingService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">                snoozeIntent.setAction(<span class="string">"snooze"</span>);</span><br><span class="line">                PendingIntent p2 = PendingIntent.getService(<span class="keyword">this</span>, <span class="number">0</span>, snoozeIntent, PendingIntent.FLAG_UPDATE_CURRENT);</span><br></pre></td></tr></table></figure>
<p>2ã€æ„å»ºNotificatonCompat.Builderå¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">NotificationCompat.Builder builderBig = <span class="keyword">new</span> NotificationCompat.Builder(<span class="keyword">this</span>)</span><br><span class="line">                        .setSmallIcon(R.mipmap.ic_launcher)</span><br><span class="line">                        .setContentTitle(getString(R.string.title))</span><br><span class="line">                        .setContentText(<span class="string">"ç®€è¦"</span>)</span><br><span class="line">                        .setDefaults(Notification.DEFAULT_ALL)</span><br><span class="line">  											<span class="comment">// æ³¨æ„è¯¥æ­¥éª¤</span></span><br><span class="line">                        .setStyle(<span class="keyword">new</span> NotificationCompat.BigTextStyle().bigText(getString(R.string.content)))</span><br><span class="line">                        .addAction(android.R.drawable.ic_input_delete, <span class="string">"dimiss"</span>, p1)</span><br><span class="line">                        .addAction(android.R.drawable.ic_input_add, <span class="string">"snooze"</span>, p2);</span><br></pre></td></tr></table></figure>
<p>3ã€å…¶ä»–æ­¥éª¤ä¸æ™®é€šè§†å›¾ç›¸åŒ</p>
<h3 id="è¿›åº¦æ¡é€šçŸ¥"><a href="#è¿›åº¦æ¡é€šçŸ¥" class="headerlink" title="è¿›åº¦æ¡é€šçŸ¥"></a>è¿›åº¦æ¡é€šçŸ¥</h3><p><strong>æ˜ç¡®è¿›åº¦çš„è¿›åº¦æ¡</strong></p>
<p>ä½¿ç”¨<code>setProgress(max, progress, false)</code>æ¥æ›´æ–°è¿›åº¦ã€‚</p>
<ul>
<li>max: æœ€å¤§è¿›åº¦å€¼</li>
<li>progress: å½“å‰è¿›åº¦</li>
<li>false: æ˜¯å¦æ˜¯ä¸æ˜ç¡®çš„è¿›åº¦æ¡</li>
</ul>
<h2 id="é€šçŸ¥å¸¸è§å±æ€§"><a href="#é€šçŸ¥å¸¸è§å±æ€§" class="headerlink" title="é€šçŸ¥å¸¸è§å±æ€§"></a>é€šçŸ¥å¸¸è§å±æ€§</h2><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://developer.android.com/guide/topics/ui/notifiers/notifications.html" target="_blank" rel="noopener">https://developer.android.com/guide/topics/ui/notifiers/notifications.html</a></p>
<p><a href="https://developer.android.com/reference/android/app/Notification.html" target="_blank" rel="noopener">https://developer.android.com/reference/android/app/Notification.html</a></p>
<p><a href="https://www.cnblogs.com/travellife/p/Android-Notification-xiang-jie-yiji-ben-cao-zuo.html" target="_blank" rel="noopener">https://www.cnblogs.com/travellife/p/Android-Notification-xiang-jie-yiji-ben-cao-zuo.html</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Notification</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidè¿›ç¨‹ä¿æ´»æ¢è®¨</title>
    <url>/2020/02/04/Android%E8%BF%9B%E7%A8%8B%E4%BF%9D%E6%B4%BB%E6%8E%A2%E8%AE%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>Android ç³»ç»Ÿä¸ºäº†ä¿æŒç³»ç»Ÿè¿è¡Œæµç•…ï¼Œåœ¨å†…å­˜åƒç´§çš„æƒ…å†µä¸‹ï¼Œä¼šå°†ä¸€äº›è¿›ç¨‹ kill ï¼Œä»¥é‡Šæ”¾ä¸€éƒ¨åˆ†å†…å­˜ã€‚ç„¶è€Œï¼Œå¯¹äºä¸€äº›ï¼ˆå¦‚ï¼šIM-QQ ã€å¾®ä¿¡ï¼Œæ”¯ä»˜-æ”¯ä»˜å®ç­‰ï¼‰æ¯”è¾ƒé‡è¦ã€æˆ‘ä»¬å¸Œæœ›èƒ½åŠæ—¶æ”¶åˆ°æ¶ˆæ¯çš„ APPï¼Œéœ€è¦ä¿æŒè¿›ç¨‹æŒç»­æ´»è·ƒï¼Œé‚£ä¹ˆå°±éœ€è¦å®æ–½ä¸€äº›ä¿æ´»æªæ–½æ¥ä¿è¯è¿›ç¨‹èƒ½å¤ŸæŒç»­å­˜æ´»ï¼Œå³ <strong>Android è¿›ç¨‹ä¿æ´»</strong>ã€‚</p>
<a id="more"></a>
<p><strong>Android è¿›ç¨‹æ‹‰æ´»åŒ…æ‹¬ä¸¤ä¸ªå±‚é¢ï¼š</strong></p>
<ul>
<li><p>æä¾›è¿›ç¨‹ä¼˜å…ˆçº§ï¼Œé™ä½è¿›ç¨‹è¢«æ€æ­»çš„æ¦‚ç‡</p>
</li>
<li><p>åœ¨è¿›ç¨‹è¢«æ€æ­»åï¼Œè¿›è¡Œæ‹‰æ´»</p>
</li>
</ul>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œå…ˆæ¥äº†è§£ä¸‹ Android è¿›ç¨‹çš„ä¸€äº›ç›¸å…³æ¦‚å¿µã€‚</p>
<h1 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h1><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒä¸€ APP çš„æ‰€æœ‰ç»„ä»¶å‡è¿è¡Œåœ¨ç›¸åŒçš„è¿›ç¨‹ä¸­ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦ï¼Œé€šè¿‡åœ¨æ¸…å•æ–‡ä»¶ä¸­é…ç½®æ¥æ§åˆ¶æŸäº›ç»„ä»¶çš„æ‰€å±è¿›ç¨‹ã€‚</p>
<p>å†…å­˜ä¸è¶³çš„æƒ…å†µä¸‹ï¼ŒAndroid ç³»ç»Ÿä¼šé€‰æ‹© kill æŸä¸€è¿›ç¨‹æ¥é‡Šæ”¾è¯¥è¿›ç¨‹å ç”¨çš„å†…å­˜ï¼Œä¾›å…¶å®ƒä¸ºç”¨æˆ·æä¾›æ›´ä¸ºç´§æ€¥æœåŠ¡çš„è¿›ç¨‹ä½¿ç”¨ã€‚åœ¨è¢«å…³é—­çš„è¿›ç¨‹ä¸­è¿è¡Œçš„ç»„ä»¶ä¹Ÿä¼šéšç€è¿›ç¨‹çš„å…³é—­è€Œé”€æ¯ã€‚</p>
<p>å†³å®š kill å“ªä¸ªè¿›ç¨‹æ—¶ï¼ŒAndroid ç³»ç»Ÿå°†æƒè¡¡æ‰€æœ‰è¿›ç¨‹å¯¹ç”¨æˆ·çš„ç›¸å¯¹é‡è¦ç¨‹åº¦ã€‚ä¾‹å¦‚ï¼šç›¸å¯¹äºæ‰˜ç®¡å¯è§ Activity çš„è¿›ç¨‹è€Œè¨€ï¼Œæ›´æœ‰å¯èƒ½ kill æ‰˜ç®¡ä¸å¯è§ Activity çš„è¿›ç¨‹ã€‚å› æ­¤ï¼Œæ˜¯å¦ç»ˆæ­¢ kill æŸä¸ªè¿›ç¨‹å–å†³äºè¯¥è¿›ç¨‹ä¸­æ‰€è¿è¡Œç»„ä»¶çš„çŠ¶æ€ã€‚</p>
<h1 id="è¿›ç¨‹çš„ä¼˜å…ˆçº§"><a href="#è¿›ç¨‹çš„ä¼˜å…ˆçº§" class="headerlink" title="è¿›ç¨‹çš„ä¼˜å…ˆçº§"></a>è¿›ç¨‹çš„ä¼˜å…ˆçº§</h1><p>Android ç³»ç»Ÿå°†å°½é‡é•¿æ—¶é—´åœ°ä¿æŒåº”ç”¨è¿›ç¨‹ï¼Œä½†ä¸ºäº†æ–°å»ºè¿›ç¨‹æˆ–è¿è¡Œæ›´é‡è¦çš„è¿›ç¨‹ï¼Œæœ€ç»ˆéœ€è¦æ¸…é™¤æ—§è¿›ç¨‹æ¥å›æ”¶å†…å­˜ã€‚ ä¸ºäº†ç¡®å®šä¿ç•™æˆ–ç»ˆæ­¢å“ªäº›è¿›ç¨‹ï¼Œç³»ç»Ÿä¼šæ ¹æ®è¿›ç¨‹ä¸­æ­£åœ¨è¿è¡Œçš„ç»„ä»¶ä»¥åŠè¿™äº›ç»„ä»¶çš„çŠ¶æ€ï¼Œå°†æ¯ä¸ªè¿›ç¨‹æ”¾å…¥â€œé‡è¦æ€§å±‚æ¬¡ç»“æ„â€ä¸­ã€‚ å¿…è¦æ—¶ï¼Œç³»ç»Ÿä¼šé¦–å…ˆæ¶ˆé™¤é‡è¦æ€§æœ€ä½çš„è¿›ç¨‹ï¼Œç„¶åæ˜¯æ¸…é™¤é‡è¦æ€§ç¨ä½ä¸€çº§çš„è¿›ç¨‹ï¼Œä¾æ­¤ç±»æ¨ï¼Œä»¥å›æ”¶ç³»ç»Ÿèµ„æºã€‚</p>
<p>è¿›ç¨‹çš„é‡è¦æ€§ï¼Œåˆ’åˆ†5çº§ï¼š</p>
<ol>
<li>å‰å°è¿›ç¨‹ (Foreground process)</li>
<li>å¯è§è¿›ç¨‹ (Visible process)</li>
<li>æœåŠ¡è¿›ç¨‹ (Service process)</li>
<li>åå°è¿›ç¨‹ (Background process)</li>
<li>ç©ºè¿›ç¨‹ (Empty process)</li>
</ol>
<p><img src="jinchengyouxianji.jpeg" alt></p>
<p>å‰å°è¿›ç¨‹çš„é‡è¦æ€§æœ€é«˜ï¼Œä¾æ¬¡é€’å‡ï¼Œç©ºè¿›ç¨‹çš„é‡è¦æ€§æœ€ä½ï¼Œä¸‹é¢åˆ†åˆ«æ¥é˜è¿°æ¯ç§çº§åˆ«çš„è¿›ç¨‹</p>
<h2 id="å‰å°è¿›ç¨‹"><a href="#å‰å°è¿›ç¨‹" class="headerlink" title="å‰å°è¿›ç¨‹"></a>å‰å°è¿›ç¨‹</h2><p>ç”¨æˆ·å½“å‰æ“ä½œçš„è¿›ç¨‹ã€‚ä¸€ä¸ªè¿›ç¨‹æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ ï¼Œå³è§†ä¸ºå‰å°è¿›ç¨‹ï¼š</p>
<ul>
<li>æ‰˜ç®¡ç”¨æˆ·æ­£åœ¨äº¤äº’çš„ Activityï¼ˆå·²è°ƒç”¨ onResume() æ–¹æ³•ï¼‰ã€‚</li>
<li>æ‰˜ç®¡æŸä¸ª Service ï¼Œä¸” Service ç»‘å®šåˆ°ç”¨æˆ·æ­£åœ¨äº¤äº’çš„ Activityã€‚</li>
<li>æ‰˜ç®¡æ­£åœ¨â€œå‰å°â€è¿è¡Œçš„ Serviceï¼ˆæœåŠ¡å·²è°ƒç”¨startForeground()ï¼‰ã€‚</li>
<li>æ‰˜ç®¡æ­£åœ¨æ‰§è¡Œç”Ÿå‘½å‘¨æœŸå›è°ƒçš„ Serviceï¼ˆ onCreate() ã€ onStart() æˆ– onDestory() ï¼‰ã€‚</li>
<li>æ‰˜ç®¡æ­£åœ¨æ‰§è¡Œ onReceive() æ–¹æ³•çš„ BroadcastReceiverã€‚</li>
</ul>
<blockquote>
<p>é€šå¸¸ï¼Œä»»æ„æ—¶é—´çš„å‰å°è¿›ç¨‹æ•°æ®éƒ½ä¸å¤šã€‚åªæœ‰åœ¨å†…å­˜ä¸è¶³ä»¥æ”¯æŒå®ƒä»¬åŒæ—¶ç»§ç»­è¿è¡Œè¿™ä¸€ä¸‡ä¸å¾—å·²çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæ‰ä¼š kill å®ƒä»¬ã€‚</p>
</blockquote>
<h2 id="å¯è§è¿›ç¨‹"><a href="#å¯è§è¿›ç¨‹" class="headerlink" title="å¯è§è¿›ç¨‹"></a>å¯è§è¿›ç¨‹</h2><p>æ²¡æœ‰ä»»ä½•å‰å°ç»„ä»¶ã€ä½†ä»ä¼šå½±å“ç”¨æˆ·åœ¨å±å¹•ä¸Šæ‰€è§å†…å®¹çš„è¿›ç¨‹ã€‚ å¦‚æœä¸€ä¸ªè¿›ç¨‹æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼Œå³è§†ä¸ºå¯è§è¿›ç¨‹ï¼š</p>
<ul>
<li>æ‰˜ç®¡ä¸åœ¨å‰å°ã€ä½†ä»å¯¹ç”¨æˆ·å¯è§çš„ Activityï¼ˆå·²è°ƒç”¨ onPause() æ–¹æ³•ï¼‰ã€‚å¦‚ï¼šå‰å° Activity å¯åŠ¨äº†ä¸€ä¸ªå¯¹è¯æ¡†ï¼Œå…è®¸åœ¨å…¶åé¢æ˜¾ç¤ºä¸Šä¸€ä¸ª Activityã€‚</li>
<li>æ‰˜ç®¡ç»‘å®šåˆ°å¯è§ï¼ˆæˆ–å‰å°ï¼‰çš„ Activity çš„ Serviceã€‚</li>
</ul>
<blockquote>
<p>å¯è§è¿›ç¨‹è¢«è§†ä¸ºåŠå…¶é‡è¦çš„è¿›ç¨‹ï¼Œé™¤éä¸ºäº†ç»´æŒæ‰€æœ‰å‰å°è¿›ç¨‹åŒæ—¶è¿è¡Œè€Œå¿…é¡»ç»ˆæ­¢ï¼Œå¦åˆ™ç³»ç»Ÿä¸ä¼škillè¿™äº›è¿›ç¨‹ã€‚</p>
</blockquote>
<h2 id="æœåŠ¡è¿›ç¨‹"><a href="#æœåŠ¡è¿›ç¨‹" class="headerlink" title="æœåŠ¡è¿›ç¨‹"></a>æœåŠ¡è¿›ç¨‹</h2><p>æ­£åœ¨è¿è¡Œå·²ä½¿ç”¨ startService() æ–¹æ³•å¯åŠ¨çš„ Service ä¸”ä¸å±äºä¸Šè¿°ä¸¤ä¸ªæ›´é«˜ç±»åˆ«è¿›ç¨‹çš„è¿›ç¨‹ã€‚</p>
<blockquote>
<p>å°½ç®¡æœåŠ¡è¿›ç¨‹ä¸ç”¨æˆ·å¯è§å†…å®¹æ²¡æœ‰ç›´æ¥å…³è”ï¼Œä½†æ˜¯å®ƒä»¬é€šå¸¸åœ¨æ‰§è¡Œä¸€äº›ç”¨æˆ·æ¯”è¾ƒå…³å¿ƒçš„æ“ä½œï¼ˆå¦‚ï¼šåœ¨åå°æ’­æ”¾éŸ³ä¹æˆ–ä»ç½‘ç»œä¸‹è½½æ•°æ®ç­‰ï¼‰ï¼Œå› æ­¤ï¼Œé™¤éå†…éƒ¨ä¸è¶³ä»¥ç»´æŒæ‰€æœ‰å‰å°è¿›ç¨‹å’Œå¯è§è¿›ç¨‹åŒæ—¶è¿è¡Œï¼Œå¦åˆ™ç³»ç»Ÿä¸ä¼š kill è¿™äº›è¿›ç¨‹ã€‚</p>
</blockquote>
<h2 id="åå°è¿›ç¨‹"><a href="#åå°è¿›ç¨‹" class="headerlink" title="åå°è¿›ç¨‹"></a>åå°è¿›ç¨‹</h2><p>æ‰˜ç®¡ç›®å‰å¯¹ç”¨æˆ·ä¸å¯è§çš„ Activity çš„è¿›ç¨‹ï¼ˆå·²è°ƒç”¨ Activity çš„ onStop() æ–¹æ³•ï¼‰ã€‚</p>
<blockquote>
<p>åå°è¿›ç¨‹å¯¹ç”¨æˆ·ä½“éªŒæ²¡æœ‰ç›´æ¥å½±å“ï¼Œç³»ç»Ÿå¯èƒ½éšæ—¶ä¼š kill å®ƒä»¬ï¼Œä»¥å›æ”¶å†…å­˜æä¾›ç»™å‰å°è¿›ç¨‹ã€å¯è§è¿›ç¨‹ã€æœåŠ¡è¿›ç¨‹ä½¿ç”¨ã€‚é€šå¸¸ä¼šæœ‰å¾ˆå¤šåå°è¿›ç¨‹åŒæ—¶è¿è¡Œï¼Œç³»ç»Ÿå°†å®ƒä»¬ä¿å­˜åœ¨ LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰åˆ—è¡¨ä¸­ï¼Œä»¥ç¡®ä¿åŒ…å«ç”¨æˆ·æœ€è¿‘æŸ¥çœ‹çš„ Activity çš„è¿›ç¨‹æœ€åä¸€ä¸ªè¢«ç»ˆæ­¢ã€‚</p>
</blockquote>
<h2 id="ç©ºè¿›ç¨‹"><a href="#ç©ºè¿›ç¨‹" class="headerlink" title="ç©ºè¿›ç¨‹"></a>ç©ºè¿›ç¨‹</h2><p>ä¸åŒ…å«ä»»ä½•æ´»åŠ¨ç»„ä»¶çš„è¿›ç¨‹ã€‚</p>
<blockquote>
<p>ä¿ç•™è¿™ç§è¿›ç¨‹çš„å”¯ä¸€ç›®çš„æ˜¯ç¼“å­˜ï¼Œä»¥ç¼©çŸ­ä¸‹æ¬¡åœ¨å…¶ä¸­è¿è¡Œçš„ç»„ä»¶çš„å¯åŠ¨æ—¶é—´ã€‚ä¸ºä½¿ç³»ç»Ÿæ€»ä½“èµ„æºåœ¨è¿›ç¨‹ç¼“å­˜å’Œåº•å±‚å†…æ ¸ç¼“å­˜ä¹‹é—´ä¿æŒå¹³è¡¡ï¼Œç³»ç»Ÿå¾€å¾€ä¼škillè¿™äº›è¿›ç¨‹ã€‚</p>
</blockquote>
<p>æ ¹æ®è¿›ç¨‹ä¸­å½“å‰æ´»åŠ¨çš„ç»„ä»¶çš„é‡è¦ç¨‹åº¦ï¼ŒAndroid ç³»ç»Ÿä¼šå°†è¿›ç¨‹è¯„å®šä¸ºå¯èƒ½è¾¾åˆ°çš„æœ€é«˜çº§åˆ«ã€‚æ¯”å¦‚ï¼Œæ‰˜ç®¡æœåŠ¡å’Œå¯è§ Activity çš„è¿›ç¨‹ï¼Œç³»ç»Ÿä¼šå°†å…¶è¯„å®šä¸ºå¯è§è¿›ç¨‹ï¼Œè€Œä¸æ˜¯æœåŠ¡è¿›ç¨‹ã€‚</p>
<p>æ­¤å¤–ï¼Œä¸€ä¸ªè¿›ç¨‹çš„çº§åˆ«å¯èƒ½ä¼šå› ä¸ºå…¶ä»–è¿›ç¨‹å¯¹å…¶ä¾èµ–è€Œæœ‰æ‰€æé«˜ï¼Œå³æœåŠ¡äºå¦ä¸€è¿›ç¨‹çš„è¿›ç¨‹å…¶çº§åˆ«ä¸ä¼šä½äºå…¶æœåŠ¡çš„è¿›ç¨‹ã€‚ä¾‹å¦‚ï¼Œè¿›ç¨‹ A ä¸­çš„ Service ç»‘å®šåˆ°è¿›ç¨‹ B ä¸­çš„ç»„ä»¶ï¼Œåˆ™è¿›ç¨‹ A å§‹ç»ˆè¢«è§†ä¸ºè‡³å°‘å’Œè¿›ç¨‹ B åŒç­‰çº§åˆ«ã€‚</p>
<p>ç”±äºè¿è¡Œ Service çš„è¿›ç¨‹å…¶çº§åˆ«é«˜äºæ‰˜ç®¡åå° Activity çš„è¿›ç¨‹ï¼Œå› æ­¤åœ¨è¦åšé•¿æ—¶é—´åå°æ“ä½œçš„ Activity ä¸­æœ€å¥½ä¸ºè¯¥æ“ä½œå¯åŠ¨ Serviceï¼Œè€Œä¸æ˜¯ç®€å•çš„åˆ›å»ºå­çº¿ç¨‹ï¼Œå½“æ“ä½œæœ‰å¯èƒ½æ¯” Activity æ›´æŒä¹…æ—¶æ›´éœ€å¦‚æ­¤ã€‚ä¾‹å¦‚ï¼Œéœ€è¦ä¸Šä¼ è¾ƒå¤§å›¾ç‰‡æˆ–è¾ƒå¤§æ–‡ä»¶çš„ Activityï¼Œåº”è¯¥å¯åŠ¨ Service æ¥æ‰§è¡Œä¸Šä¼ æ“ä½œï¼Œè¿™æ ·ï¼Œå³ä½¿ Activity è¢«é”€æ¯ï¼ŒService ä»èƒ½åœ¨åå°ç»§ç»­æ‰§è¡Œä¸Šä¼ æ“ä½œã€‚ä½¿ç”¨ Service æ‰§è¡Œè¾ƒé•¿è€—æ—¶æ“ä½œï¼Œå¯ä»¥ä¿è¯ä¸ç®¡ Activity å‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Œè¯¥æ“ä½œè‡³å°‘æœ‰æœåŠ¡è¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚åŒç†ï¼Œä½¿ç”¨å¹¿æ’­æ¥æ”¶å™¨æ—¶ï¼Œä¹Ÿå½“å¦‚æ­¤ã€‚</p>
<blockquote>
<p><a href="https://developer.android.com/guide/components/processes-and-threads.html" target="_blank" rel="noopener">https://developer.android.com/guide/components/processes-and-threads.html</a></p>
</blockquote>
<h1 id="è¿›ç¨‹å›æ”¶ç­–ç•¥"><a href="#è¿›ç¨‹å›æ”¶ç­–ç•¥" class="headerlink" title="è¿›ç¨‹å›æ”¶ç­–ç•¥"></a>è¿›ç¨‹å›æ”¶ç­–ç•¥</h1><p>Android ç³»ç»Ÿå›æ”¶è¿›ç¨‹å†…å­˜çš„æœºåˆ¶å«<code>Low Memory Killer</code>æœºåˆ¶ï¼Œæ˜¯ä¸€ç§æ ¹æ® <code>oom_adj</code>é˜ˆå€¼çº§åˆ«è§¦å‘ç›¸åº”åŠ›åº¦çš„å†…å­˜å›æ”¶çš„æœºåˆ¶ã€‚<code>oom_adj</code> ä»£è¡¨è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šé«˜ï¼Œä¼˜å…ˆçº§è¶Šä½ï¼Œè¶Šå®¹æ˜“è¢«æ€æ­»ã€‚</p>
<p><strong>Andoridçš„ Low Memory Killer æ˜¯åœ¨æ ‡å‡†çš„linux lernelçš„ OOM åŸºç¡€ä¸Šä¿®æ”¹è€Œæ¥çš„ä¸€ç§å†…å­˜ç®¡ç†æœºåˆ¶ã€‚å½“ç³»ç»Ÿå†…å­˜ä¸è¶³æ—¶ï¼Œæ€æ­»ä¸å¿…è¦çš„è¿›ç¨‹é‡Šæ”¾å…¶å†…å­˜ã€‚ä¸å¿…è¦çš„è¿›ç¨‹çš„é€‰æ‹©æ ¹æ®æœ‰2ä¸ªï¼šoom_adjå’Œå ç”¨çš„å†…å­˜çš„å¤§å°ã€‚oom_adj ä»£è¡¨è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šé«˜ï¼Œä¼˜å…ˆçº§è¶Šä½ï¼Œè¶Šå®¹æ˜“è¢«æ€æ­»ï¼›å¯¹åº”æ¯ä¸ªoom_adjéƒ½å¯ä»¥æœ‰ä¸€ä¸ªç©ºé—²è¿›ç¨‹çš„é˜€å€¼ã€‚</strong></p>
<p><strong>Android Kernelæ¯éš”ä¸€æ®µæ—¶é—´ä¼šæ£€æµ‹å½“å‰ç©ºé—²å†…å­˜æ˜¯å¦ä½äºæŸä¸ªé˜€å€¼ã€‚å‡å¦‚æ˜¯ï¼Œåˆ™æ€æ­»oom_adjæœ€å¤§çš„ä¸å¿…è¦çš„è¿›ç¨‹ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œå°±æ ¹æ® oom_score_adj å»æ€æ­»è¿›ç¨‹ï¼Œç›´åˆ°å†…å­˜æ¢å¤ä½äºé˜€å€¼çš„çŠ¶æ€ã€‚</strong></p>
<p>å…³äº oom_adj çš„è¯´æ˜å¦‚ä¸‹ï¼š</p>
<p><img src="oomadj.jpeg" alt></p>
<blockquote>
<p>å…¶ä¸­çº¢è‰²éƒ¨åˆ†ä»£è¡¨æ¯”è¾ƒå®¹æ˜“è¢«æ€æ­»çš„ Android è¿›ç¨‹ï¼ˆOOM_ADJ&gt;=4ï¼‰,ç»¿è‰²éƒ¨åˆ†è¡¨ç¤ºä¸å®¹æ˜“è¢«æ€æ­»çš„ Android è¿›ç¨‹ï¼Œå…¶ä»–è¡¨ç¤ºé Android è¿›ç¨‹ï¼ˆçº¯ Linux è¿›ç¨‹ï¼‰ã€‚</p>
<p>åœ¨ Lowmemorykiller å›æ”¶å†…å­˜æ—¶ä¼šæ ¹æ®è¿›ç¨‹çš„çº§åˆ«ä¼˜å…ˆæ€æ­» OOM_ADJ æ¯”è¾ƒå¤§çš„è¿›ç¨‹ï¼Œå¯¹äºä¼˜å…ˆçº§ç›¸åŒçš„è¿›ç¨‹åˆ™è¿›ä¸€æ­¥å—åˆ°è¿›ç¨‹æ‰€å å†…å­˜å’Œè¿›ç¨‹å­˜æ´»æ—¶é—´çš„å½±å“ã€‚</p>
<p><strong>æ™®é€šappè¿›ç¨‹çš„oom_adj&gt;=0,ç³»ç»Ÿè¿›ç¨‹çš„oom_adjæ‰å¯èƒ½&lt;0</strong></p>
<p>æŸ¥çœ‹å½“å‰åº”ç”¨è¿›ç¨‹adjå€¼å‘½ä»¤ä¸ºï¼š<code>cat /proc/è¿›ç¨‹id/oom_adj</code></p>
<p>æŸ¥çœ‹å½“å‰è¿›ç¨‹idï¼š<code>ps | grep PackageName</code></p>
</blockquote>
<p><strong>LowMemoryKiller çš„é˜ˆå€¼çš„è®¾å®šï¼Œä¸»è¦ä¿å­˜åœ¨2ä¸ªæ–‡ä»¶ä¹‹ä¸­ï¼Œåˆ†åˆ«æ˜¯:</strong></p>
<ul>
<li><code>/sys/module/lowmemorykiller/parameters/adj</code></li>
<li><code>/sys/module/lowmemorykiller/parameters/minfree</code></li>
</ul>
<p>adjä¿å­˜ç€å½“å‰ç³»ç»Ÿæ€è¿›ç¨‹çš„ç­‰çº§ï¼Œminfreeåˆ™æ˜¯ä¿å­˜ç€å¯¹åº”çš„å†…å­˜é˜€å€¼ã€‚</p>
<p>åœ¨APIä¸º26çš„Nexusæ¨¡æ‹Ÿå™¨ä¸‹æ‰“å°è¾“å‡ºçš„å€¼ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">generic_x86:/ <span class="comment"># cat /sys/module/lowmemorykiller/parameters/minfree                                                                                                                                        </span></span><br><span class="line">18432,23040,27648,32256,36864,46080</span><br><span class="line">generic_x86:/ <span class="comment"># cat /sys/module/lowmemorykiller/parameters/adj                                                                                                                                            </span></span><br><span class="line">0,100,200,300,900,906</span><br></pre></td></tr></table></figure>
<p>å†…å­˜é˜€å€¼åœ¨ä¸åŒæ‰‹æœºä¸Šä¸ä¸€æ ·ï¼Œä¸€æ—¦ä½äºè¯¥å€¼ï¼ŒAndroidä¾¿ä¼šæ€æ­»å¯¹åº”ä¼˜å…ˆçº§çš„è¿›ç¨‹ã€‚<strong>ä¾‹å¦‚ä¸Šè¿°æ‰‹æœºä¸­ï¼Œå½“å¯ç”¨å†…å­˜å°äº72MBï¼ˆ18432ï¼‰æ—¶ï¼Œå°±æ€æ­»å‰å°è¿›ç¨‹ï¼›å½“å¯ç”¨å†…å­˜å°äº180MBï¼ˆ46080ï¼‰æ—¶ï¼Œåˆ™æ€æ­»ç©ºè¿›ç¨‹ã€‚å³è·Ÿç…§ä¸Šè¿°æ‰“å°é¡ºåºä¾æ¬¡æ€æ­»ä¸º<code>å‰å°è¿›ç¨‹ -&gt; å¯è§è¿›ç¨‹ -&gt; æœåŠ¡è¿›ç¨‹ -&gt; åå°è¿›ç¨‹ -&gt; Content Provider -&gt; ç©ºè¿›ç¨‹</code>ã€‚</strong></p>
<blockquote>
<p>é˜€å€¼å•ä½ä¸ºpageï¼Œå³4kbã€‚</p>
</blockquote>
<p><strong>Android æ‰‹æœºä¸­è¿›ç¨‹è¢«æ€æ­»å¯èƒ½æœ‰å¦‚ä¸‹æƒ…å†µï¼š</strong></p>
<p><img src="killevent.jpg" alt></p>
<p>ç»¼ä¸Šï¼Œå¯ä»¥å¾—å‡ºå‡å°‘è¿›ç¨‹è¢«æ€æ­»æ¦‚ç‡æ— éå°±æ˜¯æƒ³åŠæ³•æé«˜è¿›ç¨‹ä¼˜å…ˆçº§ï¼Œå‡å°‘è¿›ç¨‹åœ¨å†…å­˜ä¸è¶³ç­‰æƒ…å†µä¸‹è¢«æ€æ­»çš„æ¦‚ç‡ã€‚</p>
<h1 id="æå‡è¿›ç¨‹ä¼˜å…ˆçº§çš„æ–¹æ¡ˆ"><a href="#æå‡è¿›ç¨‹ä¼˜å…ˆçº§çš„æ–¹æ¡ˆ" class="headerlink" title="æå‡è¿›ç¨‹ä¼˜å…ˆçº§çš„æ–¹æ¡ˆ"></a>æå‡è¿›ç¨‹ä¼˜å…ˆçº§çš„æ–¹æ¡ˆ</h1><h2 id="åˆ©ç”¨-Activity-æå‡æƒé™"><a href="#åˆ©ç”¨-Activity-æå‡æƒé™" class="headerlink" title="åˆ©ç”¨ Activity æå‡æƒé™"></a>åˆ©ç”¨ Activity æå‡æƒé™</h2><p>é€šè¿‡ç›‘æ§æ‰‹æœºé”å±ï¼Œåœ¨å±å¹•é”å±æ—¶å¯åŠ¨1ä¸ªåƒç´ çš„Activityï¼Œåœ¨ç”¨æˆ·è§£é”æ—¶å°†Activityé”€æ¯æ‰ã€‚</p>
<p>è¿›ç¨‹çš„ä¼˜å…ˆçº§åœ¨å±å¹•é”å±æ—¶é—´ç”±4æå‡ä¸ºæœ€é«˜ä¼˜å…ˆçº§0ã€‚</p>
<p>ä¸»è¦è§£å†³ç¬¬ä¸‰æ–¹åº”ç”¨åŠç³»ç»Ÿç®¡ç†å·¥å…·åœ¨æ£€æµ‹åˆ°é”å±äº‹ä»¶åä¸€æ®µæ—¶é—´ï¼ˆä¸€èˆ¬ä¸º5åˆ†é’Ÿä»¥å†…ï¼‰å†…ä¼šæ€æ­»åå°è¿›ç¨‹ï¼Œå·²è¾¾åˆ°çœç”µçš„ç›®çš„é—®é¢˜ã€‚<strong>ä½†æ˜¯åœ¨Android Pä¹‹ååå°éƒ½ä½œäº†é™åˆ¶åè¯¥æ–¹æ¡ˆæ— æ•ˆã€‚æµ‹è¯•7.0å‰çš„ç‰ˆæœ¬ç¨³å®šã€‚ä½†æ˜¯ä¸å»ºè®®ä½¿ç”¨ã€‚æ²¡æœ‰é”€æ¯æ‰1åƒç´ Activityæ—¶å€™ä¼šäº§ç”Ÿä¸¥é‡çš„ä½“éªŒé—®é¢˜ã€‚</strong></p>
<h3 id="å…·ä½“æ–¹æ¡ˆå®ç°"><a href="#å…·ä½“æ–¹æ¡ˆå®ç°" class="headerlink" title="å…·ä½“æ–¹æ¡ˆå®ç°"></a>å…·ä½“æ–¹æ¡ˆå®ç°</h3><p>è‡ªå®šä¹‰Activityï¼Œå¹¶ä¸”è®¾ç½®Activityå¤§å°ä¸º1åƒç´ ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SinglePixelActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = SinglePixelActivity<span class="class">.<span class="keyword">class</span>.<span class="title">getSimpleName</span>()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        Window window = getWindow();</span><br><span class="line">        window.setGravity(Gravity.LEFT | Gravity.TOP);</span><br><span class="line">        WindowManager.LayoutParams layoutParams = window.getAttributes();</span><br><span class="line">        layoutParams.x = <span class="number">0</span>;</span><br><span class="line">        layoutParams.y = <span class="number">0</span>;</span><br><span class="line">        layoutParams.width = <span class="number">1</span>;</span><br><span class="line">        layoutParams.height = <span class="number">1</span>;</span><br><span class="line">        window.setAttributes(layoutParams);</span><br><span class="line">        <span class="comment">//setting</span></span><br><span class="line">        KeepManager.getInstance().setSinglePixelActivity(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ä½œä¸€äº›å”¤é†’æœåŠ¡åŠ¨ä½œ</span></span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶æ¬¡ï¼Œä» AndroidManifest ä¸­é€šè¿‡å¦‚ä¸‹å±æ€§ï¼Œæ’é™¤ Activity åœ¨ RecentTask ä¸­çš„æ˜¾ç¤ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> </span></span><br><span class="line"><span class="tag">           <span class="attr">android:name</span>=<span class="string">".onepixel.SinglePixelActivity"</span> </span></span><br><span class="line"><span class="tag">           <span class="attr">android:configChanges</span>=<span class="string">"keyboardHidden|orientation|screenSize|navigation|keyboard"</span></span></span><br><span class="line"><span class="tag">					 <span class="attr">android:excludeFromRecents</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:exported</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:finishOnTaskLaunch</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:launchMode</span>=<span class="string">"singleInstance"</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:theme</span>=<span class="string">"@style/SinglePixelActivityStyle"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>è®²è§£ä¸€ä¸‹ï¼š</strong></p>
<ul>
<li><strong>android:launchModeå±æ€§ï¼š</strong>ç”¨äºæŒ‡å®šactivityçš„å¯åŠ¨æ¨¡å¼ï¼Œæ€»å…±åˆ†ä¸ºå››ç§ï¼Œå³ï¼š<ul>
<li><strong>standaræ¨¡å¼</strong>ï¼Œæ¯æ¬¡å¯åŠ¨activityéƒ½ä¼šåˆ›å»ºå…¶å®ä¾‹ï¼Œå¹¶åŠ å…¥åˆ°ä»»åŠ¡æ ˆçš„æ ˆé¡¶ï¼›</li>
<li><strong>singleTopæ¨¡å¼</strong>ï¼Œæ¯æ¬¡å¯åŠ¨activityå¦‚æœæ ˆé¡¶æ—¶è¯¥activityåˆ™æ— éœ€åˆ›å»ºï¼Œå…¶ä½™æƒ…å†µéƒ½è¦åˆ›å»ºè¯¥activityçš„å®ä¾‹ï¼›</li>
<li><strong>singleTaskæ¨¡å¼</strong>ï¼Œå¦‚æœè¢«å¯åŠ¨çš„activityçš„å®ä¾‹å­˜åœ¨æ ˆä¸­ï¼Œåˆ™ä¸éœ€è¦åˆ›å»ºï¼Œåªéœ€è¦æŠŠæ­¤activityåŠ å…¥åˆ°æ ˆé¡¶ï¼Œå¹¶æŠŠè¯¥activityä»¥ä¸Šçš„activityå®ä¾‹å…¨éƒ¨popï¼›</li>
<li><strong>singleInstanceæ¨¡å¼</strong>ï¼šå°†åˆ›å»ºçš„activityå®ä¾‹æ”¾å…¥å•ç‹¬çš„æ ˆä¸­ï¼Œè¯¥æ ˆåªèƒ½å­˜å‚¨è¿™ä¸ªå®ä¾‹ï¼Œä¸”æ˜¯ä½œä¸ºå…±äº«å®ä¾‹å­˜åœ¨ã€‚</li>
</ul>
</li>
<li><strong>android:configChangeså±æ€§ï¼š</strong>ç”¨äºæ•è·æ‰‹æœºçŠ¶æ€çš„æ”¹å˜ï¼Œå³å½“æ‰‹æœºçŠ¶æ€(å¦‚åˆ‡æ¢æ¨ªç«–å±ã€å±å¹•å¤§å°)æ”¹å˜æ—¶ä¼šä¿å­˜å½“å‰æ´»åŠ¨çŠ¶æ€é‡å¯Activityï¼Œç”±äºSinglePixelActivityè‚©è´Ÿç€ä¿æ´»çš„ç‰¹æ®Šä½¿å‘½ï¼Œè¿™é‡Œä½¿ç”¨<strong>android:configChanges</strong>å±æ€§ï¼šé˜²æ­¢Activityé‡å¯ï¼Œå®ƒåªæ˜¯è°ƒç”¨äº†<strong>onConfigurationChanged(Configuration newConfig)</strong>æ¥é€šçŸ¥æ‰‹æœºçŠ¶æ€çš„æ”¹å˜ï¼›</li>
<li><strong>android:excludeFromRecentså±æ€§ï¼š</strong>ç”¨äºæ§åˆ¶SinglePixelActivityä¸åœ¨æœ€è¿‘ä»»åŠ¡åˆ—è¡¨ä¸­æ˜¾ç¤ºï¼›</li>
<li><strong>android:finishOnTaskLaunchå±æ€§ï¼š</strong>ç”¨äºæ ‡è®°å½“ç”¨æˆ·å†èµ·å¯åŠ¨åº”ç”¨(TASK)æ—¶æ˜¯å¦å…³é—­å·²ç»å­˜åœ¨çš„Activityçš„å®ä¾‹ï¼Œfalseè¡¨ç¤ºä¸å…³é—­ï¼›</li>
<li><strong>android:themeå±æ€§ï¼š</strong>ç”¨äºæŒ‡å®šActivityæ˜¾ç¤ºä¸»é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬è‡ªå®šä¹‰ä¸»é¢˜SingleActivityStyleã€‚</li>
</ul>
</blockquote>
<p>è®¾ç½®Activityæ ·å¼ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¯¹1åƒç´ Activityè¿›è¡Œç‰¹æ®Šå¤„ç† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"SinglePixelActivityStyle"</span>&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowBackground"</span>&gt;</span>@android:color/transparent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowIsTranslucent"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowFrame"</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowNoTitle"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowIsFloating"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowContentOverlay"</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:backgroundDimEnabled"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowAnimationStyle"</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowDisablePreview"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowNoDisplay"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è‡ªå®šä¹‰å¹¿æ’­æ¥æ”¶è€…ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScreenBroadcastReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</span><br><span class="line">        String action = intent.getAction();</span><br><span class="line">      	<span class="comment">// Activity å¯åŠ¨ä¸é”€æ¯æ—¶æœºçš„æ§åˆ¶ï¼š</span></span><br><span class="line">        <span class="keyword">if</span> (Intent.ACTION_SCREEN_OFF.equals(action)) &#123;</span><br><span class="line">            KeepManager.getInstance().startSinglePixelActivity(context);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (Intent.ACTION_SCREEN_ON.equals(action) || Intent.ACTION_USER_PRESENT.equals(action)) &#123;</span><br><span class="line">            KeepManager.getInstance().finishSinglePixelActivity();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç®¡ç†ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScreenManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = ScreenManager<span class="class">.<span class="keyword">class</span>.<span class="title">getSimpleName</span>()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> ScreenManager mInstance = <span class="keyword">new</span> ScreenManager();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ScreenBroadcastReceiver mKeepBroadcastReceiver;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> WeakReference&lt;Activity&gt; mActivity;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ScreenManager <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mInstance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerKeepReceiver</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        mKeepBroadcastReceiver = <span class="keyword">new</span> ScreenBroadcastReceiver();</span><br><span class="line">        IntentFilter filter = <span class="keyword">new</span> IntentFilter();</span><br><span class="line">        filter.addAction(Intent.ACTION_SCREEN_OFF);</span><br><span class="line">        filter.addAction(Intent.ACTION_SCREEN_ON);</span><br><span class="line">        context.registerReceiver(mKeepBroadcastReceiver, filter);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unregisterKeepReceiver</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mKeepBroadcastReceiver != <span class="keyword">null</span>) &#123;</span><br><span class="line">            context.unregisterReceiver(mKeepBroadcastReceiver);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒæœ‰SinglePixelActivityçš„å¼±å¼•ç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> activity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSinglePixelActivity</span><span class="params">(Activity activity)</span> </span>&#123;</span><br><span class="line">        mActivity = <span class="keyword">new</span> WeakReference&lt;&gt;(activity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯åŠ¨SinglePixelActivity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startSinglePixelActivity</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        Intent intent = <span class="keyword">new</span> Intent(context, SinglePixelActivity<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">        context.startActivity(intent);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»“æŸSinglePixelActivity</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finishSinglePixelActivity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mActivity != <span class="keyword">null</span>) &#123;</span><br><span class="line">            Activity activity = mActivity.get();</span><br><span class="line">            <span class="keyword">if</span> (activity != <span class="keyword">null</span>) &#123;</span><br><span class="line">                activity.finish();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹ä½¿ç”¨ï¼Œå¦‚MainActivityï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="comment">// 1åƒç´ ä¿æ´»</span></span><br><span class="line">        activeSinglePixelActivity();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy();</span><br><span class="line">        ScreenManager.getInstance().unregisterKeepReceiver(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">activeSinglePixelActivity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ScreenManager.getInstance().registerKeepReceiver(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ©ç”¨å‰å°-Service-æå‡æƒé™"><a href="#åˆ©ç”¨å‰å°-Service-æå‡æƒé™" class="headerlink" title="åˆ©ç”¨å‰å° Service æå‡æƒé™"></a>åˆ©ç”¨å‰å° Service æå‡æƒé™</h2><p>Android ä¸­ Service çš„ä¼˜å…ˆçº§ä¸º4ï¼Œé€šè¿‡ setForeground æ¥å£å¯ä»¥å°†åå° Service è®¾ç½®ä¸ºå‰å° Serviceï¼Œä½¿è¿›ç¨‹çš„ä¼˜å…ˆçº§ç”±4æå‡ä¸º2ï¼Œä»è€Œä½¿è¿›ç¨‹çš„ä¼˜å…ˆçº§ä»…ä»…ä½äºç”¨æˆ·å½“å‰æ­£åœ¨äº¤äº’çš„è¿›ç¨‹ï¼Œä¸å¯è§è¿›ç¨‹ä¼˜å…ˆçº§ä¸€è‡´ï¼Œä½¿è¿›ç¨‹è¢«æ€æ­»çš„æ¦‚ç‡å¤§å¤§é™ä½ã€‚</p>
<p>ä» Android2.3 å¼€å§‹è°ƒç”¨ setForeground å°†åå° Service è®¾ç½®ä¸ºå‰å° Service æ—¶ï¼Œå¿…é¡»åœ¨ç³»ç»Ÿçš„é€šçŸ¥æ å‘é€ä¸€æ¡é€šçŸ¥ï¼Œä¹Ÿå°±æ˜¯å‰å° Service ä¸ä¸€æ¡å¯è§çš„é€šçŸ¥æ—¶ç»‘å®šåœ¨ä¸€èµ·çš„ã€‚</p>
<p>å¯¹äºä¸éœ€è¦å¸¸é©»é€šçŸ¥æ çš„åº”ç”¨æ¥è¯´ï¼Œè¯¥æ–¹æ¡ˆè™½å¥½ï¼Œä½†å´æ˜¯ç”¨æˆ·æ„ŸçŸ¥çš„ï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨ã€‚</p>
<p>å¯¹äº API level &lt; 18 ï¼šè°ƒç”¨startForeground(IDï¼Œ new Notification())ï¼Œå‘é€ç©ºçš„Notification ï¼Œå›¾æ ‡åˆ™ä¸ä¼šæ˜¾ç¤ºã€‚å¯¹äº API level &gt;= 18ï¼šåœ¨éœ€è¦æä¼˜å…ˆçº§çš„service Aå¯åŠ¨ä¸€ä¸ªInnerServiceï¼Œä¸¤ä¸ªæœåŠ¡åŒæ—¶startForegroundï¼Œä¸”ç»‘å®šåŒæ ·çš„ IDã€‚Stop æ‰InnerService ï¼Œè¿™æ ·é€šçŸ¥æ å›¾æ ‡å³è¢«ç§»é™¤ã€‚è¿™æ–¹æ¡ˆå®é™…åˆ©ç”¨äº†Androidå‰å°serviceçš„æ¼æ´ã€‚</p>
<p><strong>è¯¥æ–¹æ¡ˆé€‚ç”¨èŒƒå›´ï¼š7.1.1ç³»ç»Ÿä»¥ä¸‹</strong>ï¼Œ8.0åçš„ç³»ç»Ÿé€šçŸ¥æ APIçš„å˜æ›´ä»¥åŠå‰å°æœåŠ¡çš„å˜æ›´å¯¼è‡´é€šçŸ¥æ å¸¸é©»ï¼Œé€ æˆç”¨æˆ·æ„ŸçŸ¥ã€‚</p>
<h3 id="å…·ä½“æ–¹æ¡ˆå®ç°-1"><a href="#å…·ä½“æ–¹æ¡ˆå®ç°-1" class="headerlink" title="å…·ä½“æ–¹æ¡ˆå®ç°"></a>å…·ä½“æ–¹æ¡ˆå®ç°</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProcessService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String TAG = ProcessService<span class="class">.<span class="keyword">class</span>.<span class="title">getSimpleName</span>()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> PROCESS_SERVICE_ID = -<span class="number">10001</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IBinder <span class="title">onBind</span><span class="params">(Intent intent)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"Not yet implemented"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">onStartCommand</span><span class="params">(Intent intent, <span class="keyword">int</span> flags, <span class="keyword">int</span> startId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &lt; <span class="number">18</span>) &#123;</span><br><span class="line">            <span class="comment">// API &lt; 18 ï¼Œæ­¤æ–¹æ³•èƒ½æœ‰æ•ˆéšè—Notificationä¸Šçš„å›¾æ ‡</span></span><br><span class="line">            startForeground(PROCESS_SERVICE_ID, <span class="keyword">new</span> Notification());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Intent innerIntent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, ProcessInnerService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">            startService(innerIntent);</span><br><span class="line">            startForeground(PROCESS_SERVICE_ID, <span class="keyword">new</span> Notification());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> START_STICKY;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»™ API &gt;= 18 çš„å¹³å°ä¸Šç”¨çš„ä¿æ´»æ‰‹æ®µ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ProcessInnerService</span> <span class="keyword">extends</span> <span class="title">Service</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Nullable</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> IBinder <span class="title">onBind</span><span class="params">(Intent intent)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"Not yet implemented"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">onStartCommand</span><span class="params">(Intent intent, <span class="keyword">int</span> flags, <span class="keyword">int</span> startId)</span> </span>&#123;</span><br><span class="line">            startForeground(PROCESS_SERVICE_ID, <span class="keyword">new</span> Notification());</span><br><span class="line">            stopSelf();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">super</span>.onStartCommand(intent, flags, startId);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="è¿›ç¨‹æ­»åæ‹‰æ´»çš„æ–¹æ¡ˆ"><a href="#è¿›ç¨‹æ­»åæ‹‰æ´»çš„æ–¹æ¡ˆ" class="headerlink" title="è¿›ç¨‹æ­»åæ‹‰æ´»çš„æ–¹æ¡ˆ"></a>è¿›ç¨‹æ­»åæ‹‰æ´»çš„æ–¹æ¡ˆ</h1><h2 id="åˆ©ç”¨ç³»ç»Ÿå¹¿æ’­æ‹‰æ´»"><a href="#åˆ©ç”¨ç³»ç»Ÿå¹¿æ’­æ‹‰æ´»" class="headerlink" title="åˆ©ç”¨ç³»ç»Ÿå¹¿æ’­æ‹‰æ´»"></a>åˆ©ç”¨ç³»ç»Ÿå¹¿æ’­æ‹‰æ´»</h2><p>åœ¨å‘ç”Ÿç‰¹å®šç³»ç»Ÿäº‹ä»¶æ—¶ï¼Œç³»ç»Ÿä¼šå‘å‡ºå“åº”çš„å¹¿æ’­ï¼Œé€šè¿‡åœ¨ AndroidManifest ä¸­â€œé™æ€â€æ³¨å†Œå¯¹åº”çš„å¹¿æ’­ç›‘å¬å™¨ï¼Œå³å¯åœ¨å‘ç”Ÿå“åº”äº‹ä»¶æ—¶æ‹‰æ´»ã€‚</p>
<p>å¸¸ç”¨çš„ç”¨äºæ‹‰æ´»çš„å¹¿æ’­äº‹ä»¶åŒ…æ‹¬ï¼š</p>
<p><img src="staticbroadcast.webp" alt></p>
<p>é€‚ç”¨äºå…¨éƒ¨Androidå¹³å°ã€‚ä½†å­˜åœ¨å¦‚ä¸‹å‡ ä¸ªç¼ºç‚¹ï¼š</p>
<p>1ï¼‰ å¹¿æ’­æ¥æ”¶å™¨è¢«ç®¡ç†è½¯ä»¶ã€ç³»ç»Ÿè½¯ä»¶é€šè¿‡â€œè‡ªå¯ç®¡ç†â€ç­‰åŠŸèƒ½ç¦ç”¨çš„åœºæ™¯æ— æ³•æ¥æ”¶åˆ°å¹¿æ’­ï¼Œä»è€Œæ— æ³•è‡ªå¯ã€‚</p>
<p>2ï¼‰ ç³»ç»Ÿå¹¿æ’­äº‹ä»¶ä¸å¯æ§ï¼Œåªèƒ½ä¿è¯å‘ç”Ÿäº‹ä»¶æ—¶æ‹‰æ´»è¿›ç¨‹ï¼Œä½†æ— æ³•ä¿è¯è¿›ç¨‹æŒ‚æ‰åç«‹å³æ‹‰æ´»ã€‚</p>
<blockquote>
<p>Googleå·²ç»å¼€å§‹æ„è¯†åˆ°è¿™äº›é—®é¢˜ï¼Œæ‰€ä»¥åœ¨æœ€æ–°çš„Android Nå–æ¶ˆäº† ACTION_NEW_PICTUREï¼ˆæ‹ç…§ï¼‰ï¼ŒACTION_NEW_VIDEOï¼ˆæ‹è§†é¢‘ï¼‰ï¼ŒCONNECTIVITY_ACTIONï¼ˆç½‘ç»œåˆ‡æ¢ï¼‰ç­‰ä¸‰ç§å¹¿æ’­ï¼Œæ— ç–‘ç»™äº†å¾ˆå¤šappæ²‰é‡çš„æ‰“å‡»ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼Œè¯¥æ–¹æ¡ˆä¸»è¦ä½œä¸ºå¤‡ç”¨æ‰‹æ®µã€‚</p>
<h2 id="åˆ©ç”¨ç¬¬ä¸‰æ–¹åº”ç”¨å¹¿æ’­æ‹‰æ´»"><a href="#åˆ©ç”¨ç¬¬ä¸‰æ–¹åº”ç”¨å¹¿æ’­æ‹‰æ´»" class="headerlink" title="åˆ©ç”¨ç¬¬ä¸‰æ–¹åº”ç”¨å¹¿æ’­æ‹‰æ´»"></a>åˆ©ç”¨ç¬¬ä¸‰æ–¹åº”ç”¨å¹¿æ’­æ‹‰æ´»</h2><p><strong>åˆ©ç”¨ä¸åŒçš„appè¿›ç¨‹ä½¿ç”¨å¹¿æ’­æ¥è¿›è¡Œç›¸äº’å”¤é†’ã€‚ä¸¾ä¸ª3ä¸ªæ¯”è¾ƒå¸¸è§çš„åœºæ™¯ï¼š</strong></p>
<ul>
<li>åœºæ™¯1ï¼šæ¥å…¥ç¬¬ä¸‰æ–¹SDKä¹Ÿä¼šå”¤é†’ç›¸åº”çš„appè¿›ç¨‹ï¼Œå¦‚å¾®ä¿¡sdkä¼šå”¤é†’å¾®ä¿¡ï¼Œæ”¯ä»˜å®sdkä¼šå”¤é†’æ”¯ä»˜å®ã€‚ç”±æ­¤å‘æ•£å¼€å»ï¼Œå°±ä¼šç›´æ¥è§¦å‘äº†ä¸‹é¢çš„ åœºæ™¯3ï¼›</li>
<li>åœºæ™¯2ï¼šå‡å¦‚ä½ æ‰‹æœºé‡Œè£…äº†æ”¯ä»˜å®ã€æ·˜å®ã€å¤©çŒ«ã€UCç­‰é˜¿é‡Œç³»çš„appï¼Œé‚£ä¹ˆä½ æ‰“å¼€ä»»æ„ä¸€ä¸ªé˜¿é‡Œç³»çš„appåï¼Œæœ‰å¯èƒ½å°±é¡ºä¾¿æŠŠå…¶ä»–é˜¿é‡Œç³»çš„appç»™å”¤é†’äº†ã€‚ï¼ˆåªæ˜¯æ‹¿é˜¿é‡Œæ‰“ä¸ªæ¯”æ–¹ï¼Œå…¶å®BATç³»éƒ½å·®ä¸å¤šï¼‰ã€‚</li>
</ul>
<p>ä¹Ÿå¯ä»¥é€šè¿‡åç¼–è¯‘ç¬¬ä¸‰æ–¹ Top åº”ç”¨ï¼Œå¦‚ï¼šæ‰‹æœºQQã€å¾®ä¿¡ã€æ”¯ä»˜å®ã€UCæµè§ˆå™¨ç­‰ï¼Œä»¥åŠå‹ç›Ÿã€ä¿¡é¸½ã€ä¸ªæ¨ç­‰ SDKï¼Œæ‰¾å‡ºå®ƒä»¬å¤–å‘çš„å¹¿æ’­ï¼Œåœ¨åº”ç”¨ä¸­è¿›è¡Œç›‘å¬ï¼Œè¿™æ ·å½“è¿™äº›åº”ç”¨å‘å‡ºå¹¿æ’­æ—¶ï¼Œå°±ä¼šå°†æˆ‘ä»¬çš„åº”ç”¨æ‹‰æ´»ã€‚</p>
<p>è¯¥æ–¹æ¡ˆçš„æœ‰æ•ˆç¨‹åº¦é™¤ä¸ç³»ç»Ÿå¹¿æ’­ä¸€æ ·çš„å› ç´ å¤–ï¼Œä¸»è¦å—å¦‚ä¸‹å› ç´ é™åˆ¶ï¼š</p>
<p>1ï¼‰ åç¼–è¯‘åˆ†æè¿‡çš„ç¬¬ä¸‰æ–¹åº”ç”¨çš„å¤šå°‘</p>
<p>2ï¼‰ ç¬¬ä¸‰æ–¹åº”ç”¨çš„å¹¿æ’­å±äºåº”ç”¨ç§æœ‰ï¼Œå½“å‰ç‰ˆæœ¬ä¸­æœ‰æ•ˆçš„å¹¿æ’­ï¼Œåœ¨åç»­ç‰ˆæœ¬éšæ—¶å°±å¯èƒ½è¢«ç§»é™¤æˆ–è¢«æ”¹ä¸ºä¸å¤–å‘ã€‚</p>
<p>è¿™äº›å› ç´ éƒ½å½±å“äº†æ‹‰æ´»çš„æ•ˆæœã€‚</p>
<h2 id="åˆ©ç”¨ç³»ç»ŸServiceæœºåˆ¶æ‹‰æ´»"><a href="#åˆ©ç”¨ç³»ç»ŸServiceæœºåˆ¶æ‹‰æ´»" class="headerlink" title="åˆ©ç”¨ç³»ç»ŸServiceæœºåˆ¶æ‹‰æ´»"></a>åˆ©ç”¨ç³»ç»ŸServiceæœºåˆ¶æ‹‰æ´»</h2><p>å°† Service è®¾ç½®ä¸º START_STICKYï¼Œåˆ©ç”¨ç³»ç»Ÿæœºåˆ¶åœ¨ Service æŒ‚æ‰åè‡ªåŠ¨æ‹‰æ´»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">onStartCommand</span><span class="params">(Intent intent, <span class="keyword">int</span> flags, <span class="keyword">int</span> startId)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> START_STICKY;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µæ— æ³•æ‹‰æ´»ï¼š</p>
<ol>
<li>Service ç¬¬ä¸€æ¬¡è¢«å¼‚å¸¸æ€æ­»åä¼šåœ¨5ç§’å†…é‡å¯ï¼Œç¬¬äºŒæ¬¡è¢«æ€æ­»ä¼šåœ¨10ç§’å†…é‡å¯ï¼Œç¬¬ä¸‰æ¬¡ä¼šåœ¨20ç§’å†…é‡å¯ï¼Œä¸€æ—¦åœ¨çŸ­æ—¶é—´å†… Service è¢«æ€æ­»è¾¾åˆ°5æ¬¡ï¼Œåˆ™ç³»ç»Ÿä¸å†æ‹‰èµ·ã€‚</li>
<li>è¿›ç¨‹è¢«å–å¾— Root æƒé™çš„ç®¡ç†å·¥å…·æˆ–ç³»ç»Ÿå·¥å…·é€šè¿‡ forestop åœæ­¢æ‰ï¼Œæ— æ³•é‡å¯ã€‚</li>
</ol>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://mp.weixin.qq.com/s/OXiFQNTyCHpqSP6B9HOiHw" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/OXiFQNTyCHpqSP6B9HOiHw</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>è¿›ç¨‹ä¿æ´»</tag>
      </tags>
  </entry>
  <entry>
    <title>é‡å­¦Androidä¹‹Handler</title>
    <url>/2020/02/02/%E9%87%8D%E5%AD%A6Android%E4%B9%8BHandler/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><code>Handler</code> æ˜¯ <code>Android</code> å¼€å‘è¿‡ç¨‹ä¸­éå¸¸éå¸¸å¸¸è§çš„ä¸œè¥¿ã€‚å®ƒé€šå¸¸è¢«æˆ‘ä»¬ç”¨æ¥åšä¸»çº¿ç¨‹ä¸å­çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡å·¥å…·ï¼Œè€Œ Handler ä½œä¸º Android ä¸­æ¶ˆæ¯æœºåˆ¶çš„é‡è¦ä¸€å‘˜ä¹Ÿç¡®å®ç»™æˆ‘ä»¬çš„å¼€å‘å¸¦æ¥äº†æå¤§çš„ä¾¿åˆ©ã€‚</p>
<a id="more"></a>
<h1 id="é‡è¯†Handler"><a href="#é‡è¯†Handler" class="headerlink" title="é‡è¯†Handler"></a>é‡è¯†Handler</h1><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Handler <strong>å‘é€å¹¶å¤„ç†</strong>ä¸ä¸€ä¸ªçº¿ç¨‹å…³è”çš„ Message å’Œ Runnable ã€‚ï¼ˆæ³¨æ„ï¼š<strong>Runnable ä¼šè¢«å°è£…è¿›ä¸€ä¸ª Messageï¼Œæ‰€ä»¥å®ƒæœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ª Message</strong> ï¼‰</p>
<p>æ¯ä¸ª Handler éƒ½ä¼šè·Ÿä¸€ä¸ªçº¿ç¨‹ç»‘å®šï¼Œå¹¶ä¸è¯¥çº¿ç¨‹çš„ MessageQueue å…³è”åœ¨ä¸€èµ·ï¼Œä»è€Œå®ç°æ¶ˆæ¯çš„ç®¡ç†ä»¥åŠçº¿ç¨‹é—´é€šä¿¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">android.os.Handler handler = <span class="keyword">new</span> Handler()&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(<span class="keyword">final</span> Message msg)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//è¿™é‡Œæ¥å—å¹¶å¤„ç†æ¶ˆæ¯</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//å‘é€æ¶ˆæ¯</span></span><br><span class="line">handler.sendMessage(message);</span><br><span class="line">handler.post(runnable);</span><br></pre></td></tr></table></figure>
<p>å®ä¾‹åŒ–ä¸€ä¸ª Handler é‡å†™ <code>handleMessage</code> æ–¹æ³• ï¼Œç„¶ååœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨å®ƒçš„ <code>send</code> ä»¥åŠ <code>post</code> <strong>ç³»åˆ—æ–¹æ³•</strong>å°±å¯ä»¥äº†ï¼Œéå¸¸ç®€å•æ˜“ç”¨ï¼Œå¹¶ä¸”æ”¯æŒå»¶æ—¶æ¶ˆæ¯ã€‚</p>
<p><strong>ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•å¦‚ä¸‹</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">sendMessage(Message msg)</span><br><span class="line">sendMessageDelayed(Message msg, <span class="keyword">long</span> uptimeMillis)</span><br><span class="line">post(Runnable r)</span><br><span class="line">postDelayed(Runnable r, <span class="keyword">long</span> uptimeMillis)</span><br><span class="line">sendMessageAtTime(Message msg,<span class="keyword">long</span> when)</span><br><span class="line">  </span><br><span class="line">sendEmptyMessage(<span class="keyword">int</span> what)</span><br><span class="line">sendEmptyMessageDelayed(<span class="keyword">int</span> what, <span class="keyword">long</span> uptimeMillis)</span><br><span class="line">sendEmptyMessageAtTime(<span class="keyword">int</span> what, <span class="keyword">long</span> when)</span><br></pre></td></tr></table></figure>
<h1 id="Looperã€Handlerã€MessageQueueä¸Messageçš„å…³ç³»ä¸ç›¸å…³æ¦‚å¿µ"><a href="#Looperã€Handlerã€MessageQueueä¸Messageçš„å…³ç³»ä¸ç›¸å…³æ¦‚å¿µ" class="headerlink" title="Looperã€Handlerã€MessageQueueä¸Messageçš„å…³ç³»ä¸ç›¸å…³æ¦‚å¿µ"></a>Looperã€Handlerã€MessageQueueä¸Messageçš„å…³ç³»ä¸ç›¸å…³æ¦‚å¿µ</h1><h2 id="Androidæ¶ˆæ¯å¤„ç†æœºåˆ¶"><a href="#Androidæ¶ˆæ¯å¤„ç†æœºåˆ¶" class="headerlink" title="Androidæ¶ˆæ¯å¤„ç†æœºåˆ¶"></a>Androidæ¶ˆæ¯å¤„ç†æœºåˆ¶</h2><p>ä»€ä¹ˆæ˜¯Androidæ¶ˆæ¯å¤„ç†æœºåˆ¶ï¼Ÿ</p>
<p><strong>â€œæ¶ˆæ¯â€</strong>æ˜¯windowsè¿è¡Œæœºåˆ¶ä¸­ä¸€ä¸ªåŸºæœ¬è€Œåˆé‡è¦çš„æ¦‚å¿µã€‚<strong>æ¶ˆæ¯</strong>æ˜¯ä¸€ä¸ª<strong>æŠ¥å‘Šäº‹ä»¶å‘ç”Ÿçš„é€šçŸ¥</strong>ï¼Œ<strong>æ¶ˆæ¯é©±åŠ¨</strong>æ˜¯å›´ç»•æ¶ˆæ¯çš„äº§ç”Ÿä¸å¤„ç†å±•å¼€çš„ï¼Œå¹¶ä¾é <strong>æ¶ˆæ¯å¾ªç¯æœºåˆ¶</strong>æ¥å®ç°ï¼ˆç™¾åº¦ç™¾ç§‘ï¼‰ã€‚ä¸Windowsç³»ç»Ÿä¸€æ ·ï¼ŒAndroidä¹Ÿæ˜¯<strong>æ¶ˆæ¯é©±åŠ¨å‹</strong>çš„ç³»ç»Ÿã€‚å¼•ç”¨ä¸€ä¸‹æ¶ˆæ¯é©±åŠ¨æœºåˆ¶çš„å››è¦ç´ ï¼š</p>
<ul>
<li><p>æ¥æ”¶æ¶ˆæ¯çš„â€œæ¶ˆæ¯é˜Ÿåˆ—â€</p>
</li>
<li><p>é˜»å¡å¼åœ°ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¥æ”¶æ¶ˆæ¯å¹¶è¿›è¡Œå¤„ç†çš„â€œçº¿ç¨‹â€</p>
</li>
<li><p>å¯å‘é€çš„â€œæ¶ˆæ¯çš„æ ¼å¼â€</p>
</li>
<li><p>â€œæ¶ˆæ¯å‘é€å‡½æ•°â€</p>
</li>
</ul>
<p>ä¸ä¹‹å¯¹åº”ï¼ŒAndroidç³»ç»Ÿä¸­å¯¹åº”å®ç°äº†ï¼š</p>
<ul>
<li>æ¥æ”¶æ¶ˆæ¯çš„â€œæ¶ˆæ¯é˜Ÿåˆ—â€ â€”â€”ã€€<strong>MessageQueue</strong></li>
<li>é˜»å¡å¼åœ°ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¥æ”¶æ¶ˆæ¯å¹¶è¿›è¡Œå¤„ç†çš„â€œçº¿ç¨‹â€ â€”â€”ã€€<strong>Thread+Looper</strong></li>
<li>å¯å‘é€çš„â€œæ¶ˆæ¯çš„æ ¼å¼â€ â€”â€”ã€€<strong>Message</strong></li>
<li>â€œæ¶ˆæ¯å‘é€å‡½æ•°â€â€”â€”ã€€<strong>Handlerçš„post()å’ŒsendMessage()</strong></li>
</ul>
<p>Androidæœ‰å¤§é‡çš„æ¶ˆæ¯é©±åŠ¨æ–¹å¼æ¥è¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚Androidçš„å››å¤§ç»„ä»¶â€”â€”<strong>Activity, Service, Broadcast, ContentProvider</strong>çš„å¯åŠ¨è¿‡ç¨‹çš„äº¤äº’ï¼Œéƒ½ç¦»ä¸å¼€æ¶ˆæ¯æœºåˆ¶ã€‚</p>
<h2 id="Handler"><a href="#Handler" class="headerlink" title="Handler"></a>Handler</h2><p>Handleræ˜¯Androidæ¶ˆæ¯æœºåˆ¶çš„ä¸Šå±‚æ¥å£ã€‚<strong>Handlerå¹¶ä¸æ˜¯ä¸“é—¨ç”¨æ¥æ›´æ–°UIçš„ï¼Œåªæ˜¯å¼€å‘è€…å¸¸å¸¸ç”¨å®ƒæ¥æ›´æ–°UI</strong>ã€‚Handlerçš„ä¸»è¦ç”¨äº<strong>åŒä¸€ä¸ªè¿›ç¨‹é—´çš„çº¿ç¨‹é€šä¿¡</strong>ï¼ŒHandlerç”¨äºæ›´æ–°UIçš„æ—¶å€™æ˜¯<strong>â€œå­çº¿ç¨‹ä¸ä¸»çº¿ç¨‹é€šä¿¡â€ï¼›å½“ç„¶ï¼ŒHandlerä¹Ÿå¯ä»¥ç”¨äºå­çº¿ç¨‹ä¹‹é—´é€šä¿¡ã€‚</strong></p>
<p>Handlerçš„æ¶ˆæ¯æœºåˆ¶ä¸»è¦æ˜¯å°±æŒ‡â€œHandlerçš„è¿è¡Œæœºåˆ¶â€ï¼ŒHandlerçš„è¿è¡Œæœºåˆ¶æ—¶éœ€è¦åº•å±‚çš„<strong>MessageQueueå’ŒLooper</strong>æ”¯æŒçš„ã€‚</p>
<h2 id="MessageQueue"><a href="#MessageQueue" class="headerlink" title="MessageQueue"></a>MessageQueue</h2><p>MessageQueueç¿»è¯‘è¿‡æ¥æ˜¯â€æ¶ˆæ¯é˜Ÿåˆ—â€çš„æ„æ€ï¼Œå®é™…ä¸Šå®ƒå†…éƒ¨çš„æ•°æ®ç»“æ„ä¸æ˜¯é˜Ÿåˆ—ï¼Œè€Œæ˜¯<strong>å•å‘é“¾è¡¨</strong>ï¼›MessageQueueä¸­å‚¨å­˜äº†å¤§é‡çš„<strong>æ¶ˆæ¯</strong>ï¼Œç”±äº<strong>ä¸€ä¸ªçº¿ç¨‹åŒä¸€æ—¶é—´åªèƒ½å¤„ç†ä¸€æ¡æ¶ˆæ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å»ºäº†ä¸€ä¸ªé“¾è¡¨ï¼Œå°†æˆ‘ä»¬éœ€è¦å¤„ç†çš„æ¶ˆæ¯æŒ‰é¡ºåºå‚¨å­˜èµ·æ¥ï¼Œç„¶åä¸€é¡¹ä¸€é¡¹çš„äº¤ç»™éœ€è¦çš„çº¿ç¨‹å¤„ç†</strong>ï¼Œè¿™å°±æ˜¯MessageQueueå­˜åœ¨çš„ä»·å€¼ã€‚</p>
<h2 id="Looper"><a href="#Looper" class="headerlink" title="Looper"></a>Looper</h2><p>Looperå’ŒMessageQueueçš„æ¶ˆæ¯å°±åƒæ°´æ³µå’Œäº•(é‡Œè¾¹è£…çš„æ˜¯æ°´)çš„å…³ç³»ä¸€æ ·ï¼Œæˆ‘ä»¬æœ‰äº†æ¶ˆæ¯(æ°´)ï¼Œä½†æ˜¯ä¸ºäº†æŠŠæ°´ä»äº•ä¸­æŠ½å–å‡ºæ¥(å¾ªç¯èµ·æ¥)ï¼Œæˆ‘ä»¬å¾—æœ‰ä¸€ä¸ªæ°´æ³µä½œä¸º<strong>åŠ¨åŠ›</strong>ï¼Œè¿™ä¸ªåŠ¨åŠ›å°±æ˜¯Looperã€‚</p>
<p>å¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è°ƒç”¨<code>Looper.prepare()...Looper.loop()</code>ï¼Œé‚£ä¹ˆä½ çš„çº¿ç¨‹å°±æˆåŠŸå‡çº§ä¸ºäº†ä¸€ä¸ª<strong>Looperçº¿ç¨‹</strong>ï¼Œè¿™æ„å‘³ç€<strong>ä½ çš„çº¿ç¨‹æœ‰äº†ä¸€ä¸ªæ¶ˆæ¯æ³µ(Looper)å’Œä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—(MessageQueue),æ­¤æ—¶ä½ å°±å¯ä»¥è°ƒç”¨Handleræ¥è¿›è¡Œçº¿ç¨‹é—´çš„é€šä¿¡äº†ã€‚</strong></p>
<p>æˆ‘ä»¬åº”ç”¨çš„UIçº¿ç¨‹ä¹Ÿå°±æ˜¯ä¸»çº¿ç¨‹ï¼Œåœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆå§‹åŒ–ä¸€ä¸ªLooperï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„UIçº¿ç¨‹é»˜è®¤æ˜¯Looperçº¿ç¨‹ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ä¸­ç›´æ¥è°ƒç”¨Handleræ²¡ä»€ä¹ˆäº‹ï¼Œä½†æ˜¯å†å­çº¿ç¨‹ä¸­åˆ›å»ºHandleréœ€è¦æ‰‹åŠ¨è°ƒç”¨<code>Looper.prepare()...Looper.loop()</code>çš„å’ŒåŸå› ã€‚</p>
<h2 id="Message"><a href="#Message" class="headerlink" title="Message"></a>Message</h2><p>Messageä¹Ÿå°±æ˜¯æ¶ˆæ¯ï¼Œäº•ä¸­çš„æ°´ã€‚ä¸€ä¸ªMessageåŒ…æ‹¬äº†æ¶ˆæ¯ç±»å‹(what),æ¶ˆæ¯å†…å®¹(arg1,arg2),å‘é€å®ƒçš„Handler(target),Runnableå›è°ƒæ¥å£ç­‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">int</span> what;        <span class="comment">//æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">int</span> arg1;        <span class="comment">//ç®€å•çš„æ•´æ•°å€¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">int</span> arg2;        <span class="comment">//ç®€å•çš„æ•´æ•°å€¼å¯ä»¥ç›´æ¥å‘é€ï¼Œæ˜¯ä¸€ç§æ›¿ä»£setDataï¼ˆBundleï¼‰çš„ä½æˆæœ¬æ–¹æ¡ˆï¼Œæ›´åŠ çœèµ„æº</span></span><br><span class="line"><span class="keyword">public</span> Object obj;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*package*/</span> <span class="keyword">int</span> flags;</span><br><span class="line"><span class="comment">/*package*/</span> <span class="keyword">long</span> when;          <span class="comment">//Handlerå‘é€ä¸€ä¸ªæ¶ˆæ¯ä¹‹åï¼Œè¿”å›æ­¤æ¶ˆæ¯çš„ç›®æ ‡äº¤ä»˜æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">/*package*/</span> Bundle data;        <span class="comment">//Bundleå¯ä»¥æºå¸¦æ›´å¤æ‚çš„æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="comment">/*package*/</span> Handler target;     <span class="comment">//å“ªä¸ªHandlerå‘é€çš„æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">/*package*/</span> Runnable callback;  <span class="comment">//å›è°ƒæ–¹æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯ä»¥çœ‹åˆ°ï¼ŒMessageå¸¦äº†ä¸€ä¸ªæŒ‡å‘ä¸€ä¸‹ä¸ªèŠ‚ç‚¹çš„é“¾ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒMessageQueueå†…éƒ¨ç»´æŠ¤çš„å®é™…ä¸Šæ˜¯ä¸€ä¸ªé“¾è¡¨</span></span><br><span class="line"><span class="comment">/*package*/</span> Message next;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object sPoolSync = <span class="keyword">new</span> Object();</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Message sPool;       <span class="comment">//æ¶ˆæ¯æ± </span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> sPoolSize = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_POOL_SIZE = <span class="number">50</span>;    <span class="comment">//æ¶ˆæ¯æ± çš„æœ€å¤§å®¹é‡</span></span><br></pre></td></tr></table></figure>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>Handler çš„èƒŒåæœ‰ç€ Looper ä»¥åŠ MessageQueue çš„ååŠ©ï¼Œä¸‰è€…é€šåŠ›åˆä½œï¼Œåˆ†å·¥æ˜ç¡®ã€‚</p>
<ul>
<li><strong>Message</strong>ï¼šæ¶ˆæ¯åˆ†ä¸ºç¡¬ä»¶äº§ç”Ÿçš„æ¶ˆæ¯(å¦‚æŒ‰é’®ã€è§¦æ‘¸)å’Œè½¯ä»¶ç”Ÿæˆçš„æ¶ˆæ¯ï¼›</li>
<li><strong>MessageQueue</strong>ï¼šæ¶ˆæ¯é˜Ÿåˆ—çš„ä¸»è¦åŠŸèƒ½å‘æ¶ˆæ¯æ± æŠ•é€’æ¶ˆæ¯(<code>MessageQueue.enqueueMessage</code>)å’Œå–èµ°æ¶ˆæ¯æ± çš„æ¶ˆæ¯(<code>MessageQueue.next</code>)ï¼›</li>
<li><strong>Handler</strong>ï¼šæ¶ˆæ¯è¾…åŠ©ç±»ï¼Œä¸»è¦åŠŸèƒ½å‘æ¶ˆæ¯æ± å‘é€å„ç§æ¶ˆæ¯äº‹ä»¶(<code>Handler.sendMessage</code>)å’Œå¤„ç†ç›¸åº”æ¶ˆæ¯äº‹ä»¶(<code>Handler.handleMessage</code>)ï¼›</li>
<li><strong>Looper</strong>ï¼šä¸æ–­å¾ªç¯æ‰§è¡Œ(<code>Looper.loop</code>)ï¼ŒæŒ‰åˆ†å‘æœºåˆ¶å°†æ¶ˆæ¯åˆ†å‘ç»™ç›®æ ‡å¤„ç†è€…ã€‚</li>
</ul>
<p>ä¸€å¼ å›¾æ¥äº†è§£ä¸€ä¸‹å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼š</p>
<p><img src="messagequene.png" alt></p>
<h1 id="HandleråŸç†è§£æï¼ˆJavaå±‚ï¼‰"><a href="#HandleråŸç†è§£æï¼ˆJavaå±‚ï¼‰" class="headerlink" title="HandleråŸç†è§£æï¼ˆJavaå±‚ï¼‰"></a>HandleråŸç†è§£æï¼ˆJavaå±‚ï¼‰</h1><p>æ¥åˆ†æåŸç†å‰ï¼Œå…ˆæ˜ç¡®ä¸€ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li><strong>Handler æ˜¯å¦‚ä½•ä¸çº¿ç¨‹å…³è”çš„ï¼Ÿ</strong></li>
<li><strong>Handler å‘å‡ºå»çš„æ¶ˆæ¯æ˜¯è°ç®¡ç†çš„ï¼Ÿ</strong></li>
<li><strong>æ¶ˆæ¯åˆæ˜¯æ€ä¹ˆå›åˆ° handleMessage() æ–¹æ³•çš„ï¼Ÿ</strong></li>
<li><strong>çº¿ç¨‹çš„åˆ‡æ¢æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</strong></li>
</ol>
<p>å¸¦ç€é—®é¢˜å»å¯»æ‰¾ç­”æ¡ˆã€‚</p>
<h2 id="Handlerä¸Looperçš„å…³è”"><a href="#Handlerä¸Looperçš„å…³è”" class="headerlink" title="Handlerä¸Looperçš„å…³è”"></a>Handlerä¸Looperçš„å…³è”</h2><p>å®ä¾‹åŒ– Handler çš„æ—¶å€™ Handler ä¼šå»æ£€æŸ¥å½“å‰çº¿ç¨‹çš„ Looper æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¼šæŠ¥å¼‚å¸¸ï¼Œä¹Ÿå°±æ˜¯è¯´<strong>åœ¨åˆ›å»º Handler ä¹‹å‰ä¸€å®šéœ€è¦å…ˆåˆ›å»º Looper</strong> ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">(@Nullable Callback callback, <span class="keyword">boolean</span> async)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">//æ£€æŸ¥å½“å‰çš„çº¿ç¨‹æ˜¯å¦æœ‰ Looper</span></span><br><span class="line">	mLooper = Looper.myLooper();</span><br><span class="line">	<span class="keyword">if</span> (mLooper == <span class="keyword">null</span>) &#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</span><br><span class="line">                <span class="string">"Can't create handler inside thread "</span> + Thread.currentThread()</span><br><span class="line">                        + <span class="string">" that has not called Looper.prepare()"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">  <span class="comment">//Looper æŒæœ‰ä¸€ä¸ª MessageQueue</span></span><br><span class="line">	mQueue = mLooper.mQueue;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™ä¸ªå¼‚å¸¸å¯èƒ½æœ‰çš„ä¸ç†Ÿæ‚‰ï¼Œå› ä¸ºå¹³æ—¶ç›´æ¥ä½¿ç”¨æ„Ÿå—ä¸åˆ°è¿™ä¸ªå¼‚å¸¸æ˜¯å› ä¸ºä¸»çº¿ç¨‹å·²ç»ä¸ºæˆ‘ä»¬åˆ›å»ºå¥½äº† Looper</p>
</blockquote>
<p>ä¸€ä¸ªå®Œæ•´çš„ Handler ä½¿ç”¨ä¾‹å­å…¶å®æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LooperThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> Handler mHandler;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Looper.prepare();</span><br><span class="line">        mHandler = <span class="keyword">new</span> Handler() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// process incoming messages here</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Looper.loop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Looper.prepare()</strong></p>
<p>å¯¹äºæ— å‚çš„æƒ…å†µï¼Œé»˜è®¤è°ƒç”¨<code>prepare(true)</code>ï¼Œè¡¨ç¤ºçš„æ˜¯è¿™ä¸ªLooperå…è®¸é€€å‡ºï¼Œè€Œå¯¹äºfalseçš„æƒ…å†µåˆ™è¡¨ç¤ºå½“å‰Looperä¸å…è®¸é€€å‡ºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	prepare(<span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">prepare</span><span class="params">(<span class="keyword">boolean</span> quitAllowed)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (sThreadLocal.get() != <span class="keyword">null</span>) &#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Only one Looper may be created per thread"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	sThreadLocal.set(<span class="keyword">new</span> Looper(quitAllowed));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„<code>sThreadLocal</code>æ˜¯ThreadLocalç±»å‹ï¼Œä¸‹é¢ï¼Œå…ˆè¯´è¯´ThreadLocalã€‚</p>
<p><strong>ThreadLocal</strong>ï¼š çº¿ç¨‹æœ¬åœ°å­˜å‚¨åŒºï¼ˆThread Local Storageï¼Œç®€ç§°ä¸ºTLSï¼‰ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ç§æœ‰çš„æœ¬åœ°å­˜å‚¨åŒºåŸŸï¼Œä¸åŒçº¿ç¨‹ä¹‹é—´å½¼æ­¤ä¸èƒ½è®¿é—®å¯¹æ–¹çš„TLSåŒºåŸŸã€‚</p>
<p>Looperç±»ä¸­å…¶å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;Looper&gt; sThreadLocal = <span class="keyword">new</span> ThreadLocal&lt;Looper&gt;();</span><br></pre></td></tr></table></figure>
<p>å¯è§<code>sThreadLocal</code>çš„get()å’Œset()æ“ä½œçš„ç±»å‹éƒ½æ˜¯<code>Looper</code>ç±»å‹ã€‚</p>
<blockquote>
<p>å¦å¤–ï¼Œä¸prepare()ç›¸è¿‘åŠŸèƒ½çš„ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>prepareMainLooper()</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸»è¦åœ¨ActivityThreadç±»ä¸­ä½¿ç”¨ã€‚</p>
</blockquote>
<p>Looper æä¾›äº† <code>Looper.prepare()</code> æ–¹æ³•æ¥åˆ›å»º Looper ï¼Œå¹¶ä¸”ä¼š<strong>å€ŸåŠ© ThreadLocal æ¥å®ç°ä¸å½“å‰çº¿ç¨‹çš„ç»‘å®š</strong>åŠŸèƒ½ã€‚<strong>Looper.loop() åˆ™ä¼šå¼€å§‹ä¸æ–­å°è¯•ä» MessageQueue ä¸­è·å– Message , å¹¶åˆ†å‘ç»™å¯¹åº”çš„ Handler</strong></p>
<p><strong>ä¹Ÿå°±æ˜¯è¯´ Handler è·Ÿçº¿ç¨‹çš„å…³è”æ˜¯é  Looper æ¥å®ç°çš„ã€‚</strong></p>
<h2 id="Message-çš„å‘é€"><a href="#Message-çš„å‘é€" class="headerlink" title="Message çš„å‘é€"></a>Message çš„å‘é€</h2><p>å‘é€æ¶ˆæ¯è°ƒç”¨é“¾ï¼š</p>
<p><img src="java_sendmessage.png" alt></p>
<p>ä¸ç®¡æˆ‘ä»¬è°ƒç”¨ä»€ä¹ˆæ–¹æ³•ï¼Œæœ€ç»ˆéƒ½ä¼šèµ°åˆ° <code>MessageQueue.enqueueMessage(Message,long)</code> æ–¹æ³•ã€‚</p>
<p>ä¾‹å¦‚<code>sendEmptyMessage</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">sendEmptyMessage</span><span class="params">(<span class="keyword">int</span> what)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> sendEmptyMessageDelayed(what, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// -&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">sendEmptyMessageDelayed</span><span class="params">(<span class="keyword">int</span> what, <span class="keyword">long</span> delayMillis)</span> </span>&#123;</span><br><span class="line">	Message msg = Message.obtain();</span><br><span class="line">	msg.what = what;</span><br><span class="line">	<span class="keyword">return</span> sendMessageDelayed(msg, delayMillis);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// -&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">sendMessageDelayed</span><span class="params">(@NonNull Message msg, <span class="keyword">long</span> delayMillis)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (delayMillis &lt; <span class="number">0</span>) &#123;</span><br><span class="line">		delayMillis = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> sendMessageAtTime(msg, SystemClock.uptimeMillis() + delayMillis);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// -&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">sendMessageAtTime</span><span class="params">(@NonNull Message msg, <span class="keyword">long</span> uptimeMillis)</span> </span>&#123;</span><br><span class="line">	MessageQueue queue = mQueue;</span><br><span class="line">	<span class="keyword">if</span> (queue == <span class="keyword">null</span>) &#123;</span><br><span class="line">		RuntimeException e = <span class="keyword">new</span> RuntimeException(</span><br><span class="line">   	<span class="keyword">this</span> + <span class="string">" sendMessageAtTime() called with no mQueue"</span>);</span><br><span class="line">		Log.w(<span class="string">"Looper"</span>, e.getMessage(), e);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> enqueueMessage(queue, msg, uptimeMillis);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Handler.sendEmptyMessage()</code>ç­‰ç³»åˆ—æ–¹æ³•æœ€ç»ˆè°ƒç”¨<code>MessageQueue.enqueueMessage(msg, uptimeMillis)</code>ï¼Œå°†æ¶ˆæ¯æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå…¶ä¸­uptimeMillisä¸ºç³»ç»Ÿå½“å‰çš„è¿è¡Œæ—¶é—´ï¼Œä¸åŒ…æ‹¬ä¼‘çœ æ—¶é—´ã€‚</p>
<p><strong>enqueueMessage</strong></p>
<p>æ·»åŠ ä¸€æ¡æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">enqueueMessage</span><span class="params">(Message msg, <span class="keyword">long</span> when)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ¯ä¸€ä¸ªæ™®é€šMessageå¿…é¡»æœ‰ä¸€ä¸ªtarget</span></span><br><span class="line">    <span class="keyword">if</span> (msg.target == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Message must have a target."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (msg.isInUse()) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(msg + <span class="string">" This message is already in use."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (mQuitting) &#123;  <span class="comment">//æ­£åœ¨é€€å‡ºæ—¶ï¼Œå›æ”¶msgï¼ŒåŠ å…¥åˆ°æ¶ˆæ¯æ± </span></span><br><span class="line">            msg.recycle();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        msg.markInUse();</span><br><span class="line">        msg.when = when;</span><br><span class="line">        Message p = mMessages;</span><br><span class="line">        <span class="keyword">boolean</span> needWake;</span><br><span class="line">        <span class="keyword">if</span> (p == <span class="keyword">null</span> || when == <span class="number">0</span> || when &lt; p.when) &#123;</span><br><span class="line">            <span class="comment">//pä¸ºnull(ä»£è¡¨MessageQueueæ²¡æœ‰æ¶ˆæ¯ï¼‰ æˆ–è€…msgçš„è§¦å‘æ—¶é—´æ˜¯é˜Ÿåˆ—ä¸­æœ€æ—©çš„ï¼Œ åˆ™è¿›å…¥è¯¥è¯¥åˆ†æ”¯</span></span><br><span class="line">            msg.next = p;</span><br><span class="line">            mMessages = msg;</span><br><span class="line">            needWake = mBlocked; <span class="comment">//å½“é˜»å¡æ—¶éœ€è¦å”¤é†’</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//å°†æ¶ˆæ¯æŒ‰æ—¶é—´é¡ºåºæ’å…¥åˆ°MessageQueueã€‚ä¸€èˆ¬åœ°ï¼Œä¸éœ€è¦å”¤é†’äº‹ä»¶é˜Ÿåˆ—ï¼Œé™¤é</span></span><br><span class="line">            <span class="comment">//æ¶ˆæ¯é˜Ÿå¤´å­˜åœ¨barrierï¼Œå¹¶ä¸”åŒæ—¶Messageæ˜¯é˜Ÿåˆ—ä¸­æœ€æ—©çš„å¼‚æ­¥æ¶ˆæ¯ã€‚</span></span><br><span class="line">            needWake = mBlocked &amp;&amp; p.target == <span class="keyword">null</span> &amp;&amp; msg.isAsynchronous();</span><br><span class="line">            Message prev;</span><br><span class="line">            <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">                prev = p;</span><br><span class="line">                p = p.next;</span><br><span class="line">                <span class="keyword">if</span> (p == <span class="keyword">null</span> || when &lt; p.when) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (needWake &amp;&amp; p.isAsynchronous()) &#123;</span><br><span class="line">                    needWake = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            msg.next = p;</span><br><span class="line">            prev.next = msg;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ¶ˆæ¯æ²¡æœ‰é€€å‡ºï¼Œæˆ‘ä»¬è®¤ä¸ºæ­¤æ—¶mPtr != 0</span></span><br><span class="line">        <span class="keyword">if</span> (needWake) &#123;</span><br><span class="line">            nativeWake(mPtr);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>MessageQueue</code>æ˜¯æŒ‰ç…§Messageè§¦å‘æ—¶é—´çš„å…ˆåé¡ºåºæ’åˆ—çš„ï¼Œé˜Ÿå¤´çš„æ¶ˆæ¯æ˜¯å°†è¦æœ€æ—©è§¦å‘çš„æ¶ˆæ¯ã€‚å½“æœ‰æ¶ˆæ¯éœ€è¦åŠ å…¥æ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œä¼šä»é˜Ÿåˆ—å¤´å¼€å§‹éå†ï¼Œç›´åˆ°æ‰¾åˆ°æ¶ˆæ¯åº”è¯¥æ’å…¥çš„åˆé€‚ä½ç½®ï¼Œä»¥ä¿è¯æ‰€æœ‰æ¶ˆæ¯çš„æ—¶é—´é¡ºåºã€‚</p>
<h2 id="Messageçš„åˆ†å‘"><a href="#Messageçš„åˆ†å‘" class="headerlink" title="Messageçš„åˆ†å‘"></a>Messageçš„åˆ†å‘</h2><p><code>Looper.loop()</code>æ–¹æ³•æ¥è¿›è¡Œæ¶ˆæ¯çš„åˆ†å‘ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Looper</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Looper me = myLooper(); <span class="comment">//è·å–TLSå­˜å‚¨çš„Looperå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> (me == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"No Looper; Looper.prepare() wasn't called on this thread."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">final</span> MessageQueue queue = me.mQueue; <span class="comment">//è·å–Looperå¯¹è±¡ä¸­çš„æ¶ˆæ¯é˜Ÿåˆ—</span></span><br><span class="line">  </span><br><span class="line">  	Binder.clearCallingIdentity();</span><br><span class="line">    <span class="comment">//ç¡®ä¿åœ¨æƒé™æ£€æŸ¥æ—¶åŸºäºæœ¬åœ°è¿›ç¨‹ï¼Œè€Œä¸æ˜¯è°ƒç”¨è¿›ç¨‹ã€‚</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">long</span> ident = Binder.clearCallingIdentity();</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">       <span class="comment">// ä¸æ–­ä» MessageQueue è·å– æ¶ˆæ¯</span></span><br><span class="line">        Message msg = queue.next(); <span class="comment">// might block</span></span><br><span class="line">        <span class="comment">//é€€å‡º Looper </span></span><br><span class="line">        <span class="keyword">if</span> (msg == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// No message indicates that the message queue is quitting.</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            msg.target.dispatchMessage(msg);</span><br><span class="line">            end = (slowDispatchThresholdMs == <span class="number">0</span>) ? <span class="number">0</span> : SystemClock.uptimeMillis();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//...</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">      	<span class="comment">//æ¢å¤è°ƒç”¨è€…ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">long</span> newIdent = Binder.clearCallingIdentity();</span><br><span class="line">				<span class="comment">//å›æ”¶ message</span></span><br><span class="line">        msg.recycleUnchecked();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>loop()è¿›å…¥å¾ªç¯æ¨¡å¼ï¼Œä¸æ–­é‡å¤ä¸‹é¢çš„æ“ä½œï¼Œç›´åˆ°æ²¡æœ‰æ¶ˆæ¯æ—¶é€€å‡ºå¾ªç¯</p>
<ul>
<li>è¯»å–MessageQueueçš„ä¸‹ä¸€æ¡Messageï¼›</li>
<li>æŠŠMessageåˆ†å‘ç»™ç›¸åº”çš„targetï¼›</li>
<li>å†æŠŠåˆ†å‘åçš„Messageå›æ”¶åˆ°æ¶ˆæ¯æ± ï¼Œä»¥ä¾¿é‡å¤åˆ©ç”¨ã€‚</li>
</ul>
<p>è¿™æ˜¯è¿™ä¸ªæ¶ˆæ¯å¤„ç†çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚å¦å¤–ï¼Œä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹åˆ°æœ‰loggingæ–¹æ³•ï¼Œè¿™æ˜¯ç”¨äºdebugçš„ï¼Œé»˜è®¤æƒ…å†µä¸‹<code>logging == null</code>ï¼Œé€šè¿‡è®¾ç½®setMessageLogging()ç”¨æ¥å¼€å¯debugå·¥ä½œã€‚</p>
<p><code>loop()</code> é‡Œè°ƒç”¨äº† <code>MessageQueue.next()</code> :</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">Message <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">long</span> ptr = mPtr;</span><br><span class="line">    <span class="keyword">if</span> (ptr == <span class="number">0</span>) &#123; <span class="comment">//å½“æ¶ˆæ¯å¾ªç¯å·²ç»é€€å‡ºï¼Œåˆ™ç›´æ¥è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> pendingIdleHandlerCount = -<span class="number">1</span>; <span class="comment">// å¾ªç¯è¿­ä»£çš„é¦–æ¬¡ä¸º-1</span></span><br><span class="line">    <span class="keyword">int</span> nextPollTimeoutMillis = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (;;) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nextPollTimeoutMillis != <span class="number">0</span>) &#123;</span><br><span class="line">            Binder.flushPendingCommands();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é˜»å¡æ“ä½œï¼Œå½“ç­‰å¾…nextPollTimeoutMillisæ—¶é•¿ï¼Œæˆ–è€…æ¶ˆæ¯é˜Ÿåˆ—è¢«å”¤é†’ï¼Œéƒ½ä¼šè¿”å›</span></span><br><span class="line">        nativePollOnce(ptr, nextPollTimeoutMillis);</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="keyword">long</span> now = SystemClock.uptimeMillis();</span><br><span class="line">            Message prevMsg = <span class="keyword">null</span>;</span><br><span class="line">            Message msg = mMessages;</span><br><span class="line">            <span class="comment">//å½“æ¶ˆæ¯çš„Handlerä¸ºç©ºæ—¶ï¼Œåˆ™æŸ¥è¯¢å¼‚æ­¥æ¶ˆæ¯</span></span><br><span class="line">            <span class="keyword">if</span> (msg != <span class="keyword">null</span> &amp;&amp; msg.target == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">//å½“æŸ¥è¯¢åˆ°å¼‚æ­¥æ¶ˆæ¯ï¼Œåˆ™ç«‹åˆ»é€€å‡ºå¾ªç¯</span></span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    prevMsg = msg;</span><br><span class="line">                    msg = msg.next;</span><br><span class="line">                &#125; <span class="keyword">while</span> (msg != <span class="keyword">null</span> &amp;&amp; !msg.isAsynchronous());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (msg != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (now &lt; msg.when) &#123;</span><br><span class="line">                    <span class="comment">//å½“å¼‚æ­¥æ¶ˆæ¯è§¦å‘æ—¶é—´å¤§äºå½“å‰æ—¶é—´ï¼Œåˆ™è®¾ç½®ä¸‹ä¸€æ¬¡è½®è¯¢çš„è¶…æ—¶æ—¶é•¿</span></span><br><span class="line">                    nextPollTimeoutMillis = (<span class="keyword">int</span>) Math.min(msg.when - now, Integer.MAX_VALUE);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// è·å–ä¸€æ¡æ¶ˆæ¯ï¼Œå¹¶è¿”å›</span></span><br><span class="line">                    mBlocked = <span class="keyword">false</span>;</span><br><span class="line">                    <span class="keyword">if</span> (prevMsg != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        prevMsg.next = msg.next;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        mMessages = msg.next;</span><br><span class="line">                    &#125;</span><br><span class="line">                    msg.next = <span class="keyword">null</span>;</span><br><span class="line">                    <span class="comment">//è®¾ç½®æ¶ˆæ¯çš„ä½¿ç”¨çŠ¶æ€ï¼Œå³flags |= FLAG_IN_USE</span></span><br><span class="line">                    msg.markInUse();</span><br><span class="line">                    <span class="keyword">return</span> msg;   <span class="comment">//æˆåŠŸåœ°è·å–MessageQueueä¸­çš„ä¸‹ä¸€æ¡å³å°†è¦æ‰§è¡Œçš„æ¶ˆæ¯</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//æ²¡æœ‰æ¶ˆæ¯</span></span><br><span class="line">                nextPollTimeoutMillis = -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//æ¶ˆæ¯æ­£åœ¨é€€å‡ºï¼Œè¿”å›null</span></span><br><span class="line">            <span class="keyword">if</span> (mQuitting) &#123;</span><br><span class="line">                dispose();</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å½“æ¶ˆæ¯é˜Ÿåˆ—ä¸ºç©ºï¼Œæˆ–è€…æ˜¯æ¶ˆæ¯é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªæ¶ˆæ¯æ—¶</span></span><br><span class="line">            <span class="keyword">if</span> (pendingIdleHandlerCount &lt; <span class="number">0</span> &amp;&amp; (mMessages == <span class="keyword">null</span> || now &lt; mMessages.when)) &#123;</span><br><span class="line">                pendingIdleHandlerCount = mIdleHandlers.size();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (pendingIdleHandlerCount &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">//æ²¡æœ‰idle handlers éœ€è¦è¿è¡Œï¼Œåˆ™å¾ªç¯å¹¶ç­‰å¾…ã€‚</span></span><br><span class="line">                mBlocked = <span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (mPendingIdleHandlers == <span class="keyword">null</span>) &#123;</span><br><span class="line">                mPendingIdleHandlers = <span class="keyword">new</span> IdleHandler[Math.max(pendingIdleHandlerCount, <span class="number">4</span>)];</span><br><span class="line">            &#125;</span><br><span class="line">            mPendingIdleHandlers = mIdleHandlers.toArray(mPendingIdleHandlers);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åªæœ‰ç¬¬ä¸€æ¬¡å¾ªç¯æ—¶ï¼Œä¼šè¿è¡Œidle handlersï¼Œæ‰§è¡Œå®Œæˆåï¼Œé‡ç½®pendingIdleHandlerCountä¸º0.</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pendingIdleHandlerCount; i++) &#123;</span><br><span class="line">            <span class="keyword">final</span> IdleHandler idler = mPendingIdleHandlers[i];</span><br><span class="line">            mPendingIdleHandlers[i] = <span class="keyword">null</span>; <span class="comment">//å»æ‰handlerçš„å¼•ç”¨</span></span><br><span class="line">            <span class="keyword">boolean</span> keep = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                keep = idler.queueIdle();  <span class="comment">//idleæ—¶æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">                Log.wtf(TAG, <span class="string">"IdleHandler threw exception"</span>, t);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!keep) &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">                    mIdleHandlers.remove(idler);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é‡ç½®idle handlerä¸ªæ•°ä¸º0ï¼Œä»¥ä¿è¯ä¸ä¼šå†æ¬¡é‡å¤è¿è¡Œ</span></span><br><span class="line">        pendingIdleHandlerCount = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//å½“è°ƒç”¨ä¸€ä¸ªç©ºé—²handleræ—¶ï¼Œä¸€ä¸ªæ–°messageèƒ½å¤Ÿè¢«åˆ†å‘ï¼Œå› æ­¤æ— éœ€ç­‰å¾…å¯ä»¥ç›´æ¥æŸ¥è¯¢pending message.</span></span><br><span class="line">        nextPollTimeoutMillis = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>nativePollOnce</code>æ˜¯é˜»å¡æ“ä½œï¼Œå…¶ä¸­<code>nextPollTimeoutMillis</code>ä»£è¡¨ä¸‹ä¸€ä¸ªæ¶ˆæ¯åˆ°æ¥å‰ï¼Œè¿˜éœ€è¦ç­‰å¾…çš„æ—¶é•¿ï¼›å½“nextPollTimeoutMillis = -1æ—¶ï¼Œè¡¨ç¤ºæ¶ˆæ¯é˜Ÿåˆ—ä¸­æ— æ¶ˆæ¯ï¼Œä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ã€‚</p>
<p>å½“å¤„äºç©ºé—²æ—¶ï¼Œå¾€å¾€ä¼šæ‰§è¡Œ<code>IdleHandler</code>ä¸­çš„æ–¹æ³•ã€‚å½“nativePollOnce()è¿”å›åï¼Œnext()ä»<code>mMessages</code>ä¸­æå–ä¸€ä¸ªæ¶ˆæ¯ã€‚</p>
</blockquote>
<p>å¹¶ä¸”loopæ–¹æ³•è°ƒç”¨äº† <code>msg.target.dispatchMessage(msg)</code> ï¼Œmsg.target å°±æ˜¯å‘é€è¯¥æ¶ˆæ¯çš„ Handler</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Handler</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dispatchMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//msg.callback æ˜¯ Runnable ï¼Œå¦‚æœæ˜¯ postæ–¹æ³•åˆ™ä¼šèµ°è¿™ä¸ª if</span></span><br><span class="line">  <span class="keyword">if</span> (msg.callback != <span class="keyword">null</span>) &#123;</span><br><span class="line">    handleCallback(msg);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//callback </span></span><br><span class="line">    <span class="keyword">if</span> (mCallback != <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (mCallback.handleMessage(msg)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å›è°ƒåˆ° Handler çš„ handleMessage æ–¹æ³•</span></span><br><span class="line">    handleMessage(msg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>dispatchMessage() æ–¹æ³•é’ˆå¯¹ Runnable çš„æ–¹æ³•åšäº†ç‰¹æ®Šå¤„ç†ï¼Œå¦‚æœæ˜¯ ï¼Œåˆ™ä¼šç›´æ¥æ‰§è¡Œ <code>Runnable.run()</code> ã€‚</strong></p>
</blockquote>
<p><strong>Looper.loop() æ˜¯ä¸ªæ­»å¾ªç¯ï¼Œä¼šä¸æ–­è°ƒç”¨ MessageQueue.next() è·å– Message ï¼Œå¹¶è°ƒç”¨ <code>msg.target.dispatchMessage(msg)</code> å›åˆ°äº† Handler æ¥åˆ†å‘æ¶ˆæ¯ï¼Œä»¥æ­¤æ¥å®Œæˆæ¶ˆæ¯çš„å›è°ƒ</strong>ã€‚</p>
<p><img src="yuanli.webp" alt></p>
<h2 id="çº¿ç¨‹çš„åˆ‡æ¢"><a href="#çº¿ç¨‹çš„åˆ‡æ¢" class="headerlink" title="çº¿ç¨‹çš„åˆ‡æ¢"></a>çº¿ç¨‹çš„åˆ‡æ¢</h2><p>å…ˆå°†æ‰€æ¶‰åŠçš„æ–¹æ³•è°ƒç”¨æ ˆç”»å‡ºæ¥ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Thread.foo()&#123;</span><br><span class="line">	Looper.loop()</span><br><span class="line">	 -&gt; MessageQueue.next()</span><br><span class="line"> 	  -&gt; Message.target.dispatchMessage()</span><br><span class="line"> 	   -&gt; Handler.handleMessage()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ˜¾è€Œæ˜“è§ï¼ŒHandler.handleMessage() æ‰€åœ¨çš„çº¿ç¨‹æœ€ç»ˆç”±è°ƒç”¨ Looper.loop() çš„çº¿ç¨‹æ‰€å†³å®šã€‚</strong></p>
<p>å¹³æ—¶æˆ‘ä»¬ç”¨çš„æ—¶å€™ä»å¼‚æ­¥çº¿ç¨‹å‘é€æ¶ˆæ¯åˆ° Handlerï¼Œè¿™ä¸ª Handler çš„ <code>handleMessage()</code> æ–¹æ³•æ˜¯åœ¨ä¸»çº¿ç¨‹è°ƒç”¨çš„ï¼Œæ‰€ä»¥æ¶ˆæ¯å°±ä»å¼‚æ­¥çº¿ç¨‹åˆ‡æ¢åˆ°äº†ä¸»çº¿ç¨‹ã€‚</p>
<h1 id="Handlerçš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿"><a href="#Handlerçš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿" class="headerlink" title="Handlerçš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿"></a>Handlerçš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿</h1><p>Handlerå¾ˆå¸¸ç”¨ï¼Œä½†æ˜¯ä¹Ÿæœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹å¯ä»¥ç›´æ¥ä½¿ç”¨-Handlerï¼Œä¸éœ€è¦åˆ›å»º-Looper"><a href="#ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹å¯ä»¥ç›´æ¥ä½¿ç”¨-Handlerï¼Œä¸éœ€è¦åˆ›å»º-Looper" class="headerlink" title="ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹å¯ä»¥ç›´æ¥ä½¿ç”¨ Handlerï¼Œä¸éœ€è¦åˆ›å»º Looper"></a>ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹å¯ä»¥ç›´æ¥ä½¿ç”¨ Handlerï¼Œä¸éœ€è¦åˆ›å»º Looper</h2><p>å‰é¢æˆ‘ä»¬æåˆ°äº†æ¯ä¸ªHandler çš„çº¿ç¨‹éƒ½æœ‰ä¸€ä¸ª Looper ï¼Œä¸»çº¿ç¨‹å½“ç„¶ä¹Ÿä¸ä¾‹å¤–ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸æ›¾å‡†å¤‡è¿‡ä¸»çº¿ç¨‹çš„ Looper è€Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè¿™æ˜¯ä¸ºä½•ï¼Ÿ</p>
<p><strong>æ³¨æ„ï¼šé€šå¸¸æˆ‘ä»¬è®¤ä¸º ActivityThread å°±æ˜¯ä¸»çº¿ç¨‹ã€‚äº‹å®ä¸Šå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œè€Œæ˜¯ä¸»çº¿ç¨‹æ“ä½œçš„ç®¡ç†è€…ï¼Œæ‰€ä»¥å§ï¼Œæˆ‘è§‰å¾—æŠŠ ActivityThread è®¤ä¸ºå°±æ˜¯ä¸»çº¿ç¨‹æ— å¯åšéï¼Œå¦å¤–ä¸»çº¿ç¨‹ä¹Ÿå¯ä»¥è¯´æˆ UI çº¿ç¨‹ã€‚</strong></p>
<p>åœ¨ ActivityThread.main() æ–¹æ³•ä¸­æœ‰å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">//android.app.ActivityThread</span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">  //...</span><br><span class="line">  Looper.prepareMainLooper();</span><br><span class="line"></span><br><span class="line">  ActivityThread thread = new ActivityThread();</span><br><span class="line">  thread.attach(false);</span><br><span class="line"></span><br><span class="line">  if (sMainThreadHandler == null) &#123;</span><br><span class="line">    sMainThreadHandler = thread.getHandler();</span><br><span class="line">  &#125;</span><br><span class="line">  //...</span><br><span class="line">  Looper.loop();</span><br><span class="line"></span><br><span class="line">  throw new RuntimeException(&quot;Main thread loop unexpectedly exited&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Looper.prepareMainLooper(); ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Initialize the current thread as a looper, marking it as an</span><br><span class="line"> * application&apos;s main looper. The main looper for your application</span><br><span class="line"> * is created by the Android environment, so you should never need</span><br><span class="line"> * to call this function yourself.  See also: &#123;@link #prepare()&#125;</span><br><span class="line"> */</span><br><span class="line">public static void prepareMainLooper() &#123;</span><br><span class="line">    prepare(false);</span><br><span class="line">    synchronized (Looper.class) &#123;</span><br><span class="line">        if (sMainLooper != null) &#123;</span><br><span class="line">            throw new IllegalStateException(&quot;The main Looper has already been prepared.&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        sMainLooper = myLooper();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°<strong>åœ¨ ActivityThread é‡Œ è°ƒç”¨äº† Looper.prepareMainLooper() æ–¹æ³•åˆ›å»ºäº† ä¸»çº¿ç¨‹çš„ Looper ,å¹¶ä¸”è°ƒç”¨äº† loop() æ–¹æ³•</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ Handler äº†ã€‚</p>
<p><strong>æ³¨æ„ï¼š<code>Looper.loop()</code> æ˜¯ä¸ªæ­»å¾ªç¯ï¼Œåé¢çš„ä»£ç æ­£å¸¸æƒ…å†µä¸ä¼šæ‰§è¡Œã€‚</strong></p>
<h2 id="ä¸»çº¿ç¨‹çš„-Looper-ä¸å…è®¸é€€å‡º"><a href="#ä¸»çº¿ç¨‹çš„-Looper-ä¸å…è®¸é€€å‡º" class="headerlink" title="ä¸»çº¿ç¨‹çš„ Looper ä¸å…è®¸é€€å‡º"></a>ä¸»çº¿ç¨‹çš„ Looper ä¸å…è®¸é€€å‡º</h2><p>å¦‚æœä½ å°è¯•é€€å‡º Looper ï¼Œä½ ä¼šå¾—åˆ°ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Caused by: java.lang.IllegalStateException: Main thread not allowed to quit.</span><br><span class="line">  at android.os.MessageQueue.quit(MessageQueue.java:415)</span><br><span class="line">  at android.os.Looper.quit(Looper.java:240)</span><br></pre></td></tr></table></figure>
<p> å…¶å®åŸå› å¾ˆç®€å•ï¼Œ<strong>ä¸»çº¿ç¨‹ä¸å…è®¸é€€å‡º</strong>ï¼Œé€€å‡ºå°±æ„å‘³ APP è¦æŒ‚ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆLooper-loopæ–¹æ³•ä¸ä¼šå¡æ­»ä¸»çº¿ç¨‹"><a href="#ä¸ºä»€ä¹ˆLooper-loopæ–¹æ³•ä¸ä¼šå¡æ­»ä¸»çº¿ç¨‹" class="headerlink" title="ä¸ºä»€ä¹ˆLooper.loopæ–¹æ³•ä¸ä¼šå¡æ­»ä¸»çº¿ç¨‹"></a>ä¸ºä»€ä¹ˆLooper.loopæ–¹æ³•ä¸ä¼šå¡æ­»ä¸»çº¿ç¨‹</h2><p>å‚è€ƒï¼š<a href="https://www.zhihu.com/question/34652589/answer/90344494" target="_blank" rel="noopener">https://www.zhihu.com/question/34652589/answer/90344494</a></p>
<h2 id="Handler-é‡Œè—ç€çš„-Callback-èƒ½å¹²ä»€ä¹ˆ"><a href="#Handler-é‡Œè—ç€çš„-Callback-èƒ½å¹²ä»€ä¹ˆ" class="headerlink" title="Handler é‡Œè—ç€çš„ Callback èƒ½å¹²ä»€ä¹ˆ"></a>Handler é‡Œè—ç€çš„ Callback èƒ½å¹²ä»€ä¹ˆ</h2><p>åœ¨ Handler çš„æ„é€ æ–¹æ³•ä¸­æœ‰å‡ ä¸ª è¦æ±‚ä¼ å…¥ Callback ï¼Œé‚£å®ƒæ˜¯ä»€ä¹ˆï¼Œåˆèƒ½åšä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>æ¥çœ‹çœ‹ <code>Handler.dispatchMessage(msg)</code> æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public void dispatchMessage(Message msg) &#123;</span><br><span class="line">  //è¿™é‡Œçš„ callback æ˜¯ Runnable</span><br><span class="line">  if (msg.callback != null) &#123;</span><br><span class="line">    handleCallback(msg);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    //å¦‚æœ callback å¤„ç†äº†è¯¥ msg å¹¶ä¸”è¿”å› trueï¼Œ å°±ä¸ä¼šå†å›è°ƒ handleMessage</span><br><span class="line">    if (mCallback != null) &#123;</span><br><span class="line">      if (mCallback.handleMessage(msg)) &#123;</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    handleMessage(msg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ° Handler.Callback æœ‰<strong>ä¼˜å…ˆå¤„ç†æ¶ˆæ¯çš„æƒåˆ©</strong> ï¼Œå½“ä¸€æ¡æ¶ˆæ¯è¢« Callback å¤„ç†<strong>å¹¶æ‹¦æˆªï¼ˆè¿”å› trueï¼‰</strong>ï¼Œé‚£ä¹ˆ Handler çš„ <code>handleMessage(msg)</code> æ–¹æ³•å°±ä¸ä¼šè¢«è°ƒç”¨äº†ï¼›å¦‚æœ Callback å¤„ç†äº†æ¶ˆæ¯ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ‹¦æˆªï¼Œé‚£ä¹ˆå°±æ„å‘³ç€<strong>ä¸€ä¸ªæ¶ˆæ¯å¯ä»¥åŒæ—¶è¢« Callback ä»¥åŠ Handler å¤„ç†</strong>ã€‚</p>
<p><strong>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Callback è¿™ä¸ªæ‹¦æˆªæœºåˆ¶æ¥æ‹¦æˆª Handler çš„æ¶ˆæ¯ï¼</strong></p>
<blockquote>
<p> åœºæ™¯ï¼šHook <code>ActivityThread.mH</code>ï¼Œ åœ¨ ActivityThread ä¸­æœ‰ä¸ªæˆå‘˜å˜é‡ <code>mH</code> ï¼Œå®ƒæ˜¯ä¸ª Handlerï¼Œåˆæ˜¯ä¸ªæå…¶é‡è¦çš„ç±»ï¼Œå‡ ä¹æ‰€æœ‰çš„æ’ä»¶åŒ–æ¡†æ¶éƒ½ä½¿ç”¨äº†è¿™ä¸ªæ–¹æ³•ã€‚</p>
</blockquote>
<h2 id="åˆ›å»º-Message-å®ä¾‹çš„æ–¹å¼"><a href="#åˆ›å»º-Message-å®ä¾‹çš„æ–¹å¼" class="headerlink" title="åˆ›å»º Message å®ä¾‹çš„æ–¹å¼"></a>åˆ›å»º Message å®ä¾‹çš„æ–¹å¼</h2><p>å…ˆæ¥çœ‹çœ‹æ¶ˆæ¯æ± ï¼š</p>
<p>åœ¨ä»£ç ä¸­ï¼Œå¯èƒ½ç»å¸¸çœ‹åˆ°recycle()æ–¹æ³•ï¼Œå’‹ä¸€çœ‹ï¼Œå¯èƒ½æ˜¯åœ¨åšè™šæ‹Ÿæœºçš„gc()ç›¸å…³çš„å·¥ä½œï¼Œå…¶å®ä¸ç„¶ï¼Œè¿™æ˜¯ç”¨äºæŠŠæ¶ˆæ¯åŠ å…¥åˆ°æ¶ˆæ¯æ± çš„ä½œç”¨ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œå½“æ¶ˆæ¯æ± ä¸ä¸ºç©ºæ—¶ï¼Œå¯ä»¥ç›´æ¥ä»æ¶ˆæ¯æ± ä¸­è·å–Messageå¯¹è±¡ï¼Œè€Œä¸æ˜¯ç›´æ¥åˆ›å»ºï¼Œæé«˜æ•ˆç‡ã€‚</p>
<p>é™æ€å˜é‡<code>sPool</code>çš„æ•°æ®ç±»å‹ä¸ºMessageï¼Œé€šè¿‡nextæˆå‘˜å˜é‡ï¼Œç»´æŠ¤ä¸€ä¸ªæ¶ˆæ¯æ± ï¼›é™æ€å˜é‡<code>MAX_POOL_SIZE</code>ä»£è¡¨æ¶ˆæ¯æ± çš„å¯ç”¨å¤§å°ï¼›æ¶ˆæ¯æ± çš„é»˜è®¤å¤§å°ä¸º50ã€‚</p>
<p>æ¶ˆæ¯æ± å¸¸ç”¨çš„æ“ä½œæ–¹æ³•æ˜¯obtain()å’Œrecycle()ã€‚</p>
<p><strong>obtain</strong></p>
<p>ä»æ¶ˆæ¯æ± ä¸­è·å–æ¶ˆæ¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Message <span class="title">obtain</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (sPoolSync) &#123;</span><br><span class="line">        <span class="keyword">if</span> (sPool != <span class="keyword">null</span>) &#123;</span><br><span class="line">            Message m = sPool;</span><br><span class="line">            sPool = m.next;</span><br><span class="line">            m.next = <span class="keyword">null</span>; <span class="comment">//ä»sPoolä¸­å–å‡ºä¸€ä¸ªMessageå¯¹è±¡ï¼Œå¹¶æ¶ˆæ¯é“¾è¡¨æ–­å¼€</span></span><br><span class="line">            m.flags = <span class="number">0</span>; <span class="comment">// æ¸…é™¤in-use flag</span></span><br><span class="line">            sPoolSize--; <span class="comment">//æ¶ˆæ¯æ± çš„å¯ç”¨å¤§å°è¿›è¡Œå‡1æ“ä½œ</span></span><br><span class="line">            <span class="keyword">return</span> m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Message(); <span class="comment">// å½“æ¶ˆæ¯æ± ä¸ºç©ºæ—¶ï¼Œç›´æ¥åˆ›å»ºMessageå¯¹è±¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>obtain()ï¼Œä»æ¶ˆæ¯æ± å–Messageï¼Œéƒ½æ˜¯æŠŠæ¶ˆæ¯æ± è¡¨å¤´çš„Messageå–èµ°ï¼Œå†æŠŠè¡¨å¤´æŒ‡å‘next;</p>
<p><strong>recycle</strong></p>
<p>æŠŠä¸å†ä½¿ç”¨çš„æ¶ˆæ¯åŠ å…¥æ¶ˆæ¯æ± </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">recycle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isInUse()) &#123; <span class="comment">//åˆ¤æ–­æ¶ˆæ¯æ˜¯å¦æ­£åœ¨ä½¿ç”¨</span></span><br><span class="line">        <span class="keyword">if</span> (gCheckRecycle) &#123; <span class="comment">//Android 5.0ä»¥åçš„ç‰ˆæœ¬é»˜è®¤ä¸ºtrue,ä¹‹å‰çš„ç‰ˆæœ¬é»˜è®¤ä¸ºfalse.</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"This message cannot be recycled because it is still in use."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    recycleUnchecked();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹äºä¸å†ä½¿ç”¨çš„æ¶ˆæ¯ï¼ŒåŠ å…¥åˆ°æ¶ˆæ¯æ± </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">recycleUnchecked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å°†æ¶ˆæ¯æ ‡ç¤ºä½ç½®ä¸ºIN_USEï¼Œå¹¶æ¸…ç©ºæ¶ˆæ¯æ‰€æœ‰çš„å‚æ•°ã€‚</span></span><br><span class="line">    flags = FLAG_IN_USE;</span><br><span class="line">    what = <span class="number">0</span>;</span><br><span class="line">    arg1 = <span class="number">0</span>;</span><br><span class="line">    arg2 = <span class="number">0</span>;</span><br><span class="line">    obj = <span class="keyword">null</span>;</span><br><span class="line">    replyTo = <span class="keyword">null</span>;</span><br><span class="line">    sendingUid = -<span class="number">1</span>;</span><br><span class="line">    when = <span class="number">0</span>;</span><br><span class="line">    target = <span class="keyword">null</span>;</span><br><span class="line">    callback = <span class="keyword">null</span>;</span><br><span class="line">    data = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">synchronized</span> (sPoolSync) &#123;</span><br><span class="line">        <span class="keyword">if</span> (sPoolSize &lt; MAX_POOL_SIZE) &#123; <span class="comment">//å½“æ¶ˆæ¯æ± æ²¡æœ‰æ»¡æ—¶ï¼Œå°†Messageå¯¹è±¡åŠ å…¥æ¶ˆæ¯æ± </span></span><br><span class="line">            next = sPool;</span><br><span class="line">            sPool = <span class="keyword">this</span>;</span><br><span class="line">            sPoolSize++; <span class="comment">//æ¶ˆæ¯æ± çš„å¯ç”¨å¤§å°è¿›è¡ŒåŠ 1æ“ä½œ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>recycle()ï¼Œå°†MessageåŠ å…¥åˆ°æ¶ˆæ¯æ± çš„è¿‡ç¨‹ï¼Œéƒ½æ˜¯æŠŠMessageåŠ åˆ°é“¾è¡¨çš„è¡¨å¤´ï¼›</p>
<p><strong>æ‰€ä»¥ç”±äº Handler æä¸ºå¸¸ç”¨ï¼Œæ‰€ä»¥ä¸ºäº†èŠ‚çœå¼€é”€ï¼ŒAndroid ç»™ Message è®¾è®¡äº†å›æ”¶æœºåˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™å°½é‡å¤ç”¨ Message ï¼Œå‡å°‘å†…å­˜æ¶ˆè€—ã€‚</strong></p>
<ul>
<li><p>1ã€é€šè¿‡ Message çš„é™æ€æ–¹æ³• <code>Message.obtain();</code>  è·å–ï¼›</p>
</li>
<li><p>2ã€é€šè¿‡ Handler çš„å…¬æœ‰æ–¹æ³• <code>handler.obtainMessage();</code> ã€‚</p>
</li>
</ul>
<h2 id="Handler-å¼•èµ·çš„å†…å­˜æ³„éœ²åŸå› ä»¥åŠè§£å†³æ–¹æ¡ˆ"><a href="#Handler-å¼•èµ·çš„å†…å­˜æ³„éœ²åŸå› ä»¥åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="Handler å¼•èµ·çš„å†…å­˜æ³„éœ²åŸå› ä»¥åŠè§£å†³æ–¹æ¡ˆ"></a>Handler å¼•èµ·çš„å†…å­˜æ³„éœ²åŸå› ä»¥åŠè§£å†³æ–¹æ¡ˆ</h2><p>Handler å…è®¸æˆ‘ä»¬å‘é€<strong>å»¶æ—¶æ¶ˆæ¯</strong>ï¼Œå¦‚æœåœ¨å»¶æ—¶æœŸé—´ç”¨æˆ·å…³é—­äº† Activityï¼Œé‚£ä¹ˆè¯¥ Activity ä¼šæ³„éœ²ã€‚</p>
<p>è¿™ä¸ªæ³„éœ²æ˜¯å› ä¸º Message ä¼šæŒæœ‰ Handlerï¼Œè€Œåˆå› ä¸º <strong>Java çš„ç‰¹æ€§ï¼Œå†…éƒ¨ç±»ä¼šæŒæœ‰å¤–éƒ¨ç±»</strong>ï¼Œä½¿å¾— Activity ä¼šè¢« Handler æŒæœ‰ï¼Œè¿™æ ·æœ€ç»ˆå°±å¯¼è‡´ Activity æ³„éœ²ã€‚</p>
<p>è§£å†³è¯¥é—®é¢˜çš„æœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ï¼š<strong>å°† Handler å®šä¹‰æˆé™æ€çš„å†…éƒ¨ç±»ï¼Œåœ¨å†…éƒ¨æŒæœ‰ Activity çš„å¼±å¼•ç”¨ï¼Œå¹¶åŠæ—¶ç§»é™¤æ‰€æœ‰æ¶ˆæ¯</strong>ã€‚</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SafeHandler</span> <span class="keyword">extends</span> <span class="title">Handler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> WeakReference&lt;DemoActivity&gt; ref;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SafeHandler</span><span class="params">(DemoActivity activity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.ref = <span class="keyword">new</span> WeakReference(activity);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(<span class="keyword">final</span> Message msg)</span> </span>&#123;</span><br><span class="line">        DemoActivity activity = ref.get();</span><br><span class="line">        <span class="keyword">if</span> (activity != <span class="keyword">null</span>) &#123;</span><br><span class="line">            activity.handleMessage(msg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> SafeHandler mSafeHandler = <span class="keyword">new</span> SafeHandler(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// .... do somthing</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//ç§»é™¤æ¶ˆæ¯ï¼ŒåŠ ä¸€å±‚ä¿éšœï¼š</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  	mSafeHandler.removeCallbacksAndMessages(<span class="keyword">null</span>);</span><br><span class="line">  	<span class="keyword">super</span>.onDestroy();</span><br><span class="line">	&#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>æ³¨æ„ï¼šå•çº¯çš„åœ¨ <code>onDestroy</code> ç§»é™¤æ¶ˆæ¯å¹¶ä¸ä¿é™©ï¼Œå› ä¸º <code>onDestroy</code> å¹¶ä¸ä¸€å®šæ‰§è¡Œã€‚</strong></p>
</blockquote>
<h2 id="å­çº¿ç¨‹é‡Œå¼¹-Toast"><a href="#å­çº¿ç¨‹é‡Œå¼¹-Toast" class="headerlink" title="å­çº¿ç¨‹é‡Œå¼¹ Toast"></a>å­çº¿ç¨‹é‡Œå¼¹ Toast</h2><p>å½“æˆ‘ä»¬å°è¯•åœ¨å­çº¿ç¨‹é‡Œç›´æ¥å»å¼¹ Toast çš„æ—¶å€™ï¼Œä¼š crash ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">java.lang.RuntimeException: Can&apos;t create handler inside thread that has not called Looper.prepare()</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨ä¸Šæ˜¯å› ä¸º Toast çš„å®ç°ä¾èµ–äº Handler</strong>ï¼ŒåŒç†çš„è¿˜æœ‰ Dialogã€‚</p>
<p>æ­£ç¡®ä½¿ç”¨ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Looper.prepare();</span><br><span class="line">    Toast.makeText(HandlerActivity.<span class="keyword">this</span>, <span class="string">"å­çº¿ç¨‹ä¸‹æµ‹è¯•ä¸ä¼šå´©æºƒå•¦ï¼"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    Looper.loop();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).start();</span><br></pre></td></tr></table></figure>
<h2 id="å·§å¦™åˆ©ç”¨-Looper-æœºåˆ¶"><a href="#å·§å¦™åˆ©ç”¨-Looper-æœºåˆ¶" class="headerlink" title="å·§å¦™åˆ©ç”¨ Looper æœºåˆ¶"></a>å·§å¦™åˆ©ç”¨ Looper æœºåˆ¶</h2><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Looper çš„æœºåˆ¶æ¥å¸®åŠ©æˆ‘ä»¬åšä¸€äº›äº‹æƒ…ï¼š</p>
<ol>
<li>å°† Runnable post åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œï¼›</li>
<li>åˆ©ç”¨ Looper åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦æ˜¯ä¸»çº¿ç¨‹ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">MainThread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">MainThread</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Handler HANDLER = <span class="keyword">new</span> Handler(Looper.getMainLooper());</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(@NonNull Runnable runnable)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isMainThread()) &#123;</span><br><span class="line">            runnable.run();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            HANDLER.post(runnable);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isMainThread</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Looper.myLooper() == Looper.getMainLooper();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.jianshu.com/p/f70ee1765a61" target="_blank" rel="noopener">https://www.jianshu.com/p/f70ee1765a61</a></p>
<p><a href="http://gityuan.com/2015/12/26/handler-message-framework/" target="_blank" rel="noopener">http://gityuan.com/2015/12/26/handler-message-framework/</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Handler</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³Android Studioâ€”â€”Configuration on demand is not supported by the current version of the Android Gradle</title>
    <url>/2020/01/17/%E8%A7%A3%E5%86%B3Android-Studio%E2%80%94%E2%80%94Configuration-on-demand-is-not-supported-by-the-current-version-of-the-Android-Gradle/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ã€é”™è¯¯ã€‘<br>Configuration on demand is not supported by the current version of the Android Gradle plugin since you are using Gradle version 4.6 or above. </p>
<p>Suggestion: disable configuration on demand by setting org.gradle.configureondemand=false in your gradle.properties file or use a Gradle version less than 4.6.</p>
<p>ã€ç¿»è¯‘ã€‘<br>ç”±äºä½¿ç”¨ä½ æ­£åœ¨ä½¿ç”¨ Gradle ç‰ˆæœ¬4.6æˆ–ä»¥ä¸Šï¼Œå½“å‰ç‰ˆæœ¬çš„Androidçš„ Gradle æ’ä»¶ä¸æ”¯æŒæŒ‰éœ€é…ç½®ã€‚</p>
<p>å»ºè®®ï¼šé€šè¿‡åœ¨ä½ çš„ gradle.properties æ–‡ä»¶ä¸­è®¾ç½® org.gradle.configureondemand=false ç¦ç”¨æŒ‰éœ€é…ç½®ï¼Œæˆ–è€…ä½¿ç”¨ä¸€ä¸ªä½äº4.6ç‰ˆæœ¬çš„ Gradleã€‚</p>
<a id="more"></a>
<p><strong>è§£å†³æ–¹æ¡ˆ1ï¼šé™çº§</strong></p>
<p>æ‰“å¼€ <strong>gradle-wrapper.properties</strong> æ–‡ä»¶ï¼Œä¿®æ”¹ <strong>distributionUrl</strong> å‚æ•°ï¼Œå°†å…¶åé¢ä¿®æ”¹ä¸ºä½äº4.6ç‰ˆæœ¬çš„ Gradleã€‚å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">distributionUrl=https\://services.gradle.org/distributions/gradle-4.1-all.zip</span><br></pre></td></tr></table></figure>
<p><img src="properties.png" alt></p>
<p><strong>è§£å†³æ–¹æ³•2ï¼šç¦ç”¨æŒ‰éœ€é…ç½®</strong></p>
<p>1ã€æ‰“å¼€ <strong>gradle.properties</strong> æ–‡ä»¶ï¼Œå…±æœ‰ä¸¤ä¸ªï¼š<strong>Global Properties</strong> å’Œ <strong>Project Properties</strong>ï¼Œå°†å…¶ä¸­çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">org.gradle.configureondemand=true</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹ä¸º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">org.gradle.configureondemand=false</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æˆ–åˆ é™¤è¯¥è¯­å¥ï¼Œæˆ–æ³¨é‡Šæ‰è¯¥è¯­å¥ã€‚</p>
</blockquote>
<p>2ã€æˆ–è€…é€šè¿‡ <strong>Preferences</strong> èœå•ï¼Œæ‰¾åˆ° <strong>Build, Execution, Deployment</strong> é‡Œé¢çš„ <strong>Compiler</strong>ï¼Œå°†å³é¢çš„ <strong>Configure on demand</strong> å–æ¶ˆå‹¾é€‰ã€‚</p>
<p><img src="panel.png" alt></p>
<p><strong>å‚è€ƒé“¾æ¥</strong></p>
<p><a href="https://stackoverflow.com/questions/49990933/configuration-on-demand-is-not-supported-by-the-current-version-of-the-android-g" target="_blank" rel="noopener">https://stackoverflow.com/questions/49990933/configuration-on-demand-is-not-supported-by-the-current-version-of-the-android-g</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Studio</tag>
      </tags>
  </entry>
  <entry>
    <title>Java 8 æ–°ç‰¹æ€§ä¸€è§ˆ</title>
    <url>/2020/01/04/Java-8-%E6%96%B0%E7%89%B9%E6%80%A7%E4%B8%80%E8%A7%88/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Java 8 (åˆç§°ä¸º jdk 1.8) æ˜¯ Java è¯­è¨€å¼€å‘çš„ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ã€‚ Oracle å…¬å¸äº 2014 å¹´ 3 æœˆ 18 æ—¥å‘å¸ƒ Java 8 ï¼Œå®ƒæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼Œæ–°çš„ JavaScript å¼•æ“ï¼Œæ–°çš„æ—¥æœŸ APIï¼Œæ–°çš„Stream API ç­‰ã€‚</p>
<a id="more"></a>
<h1 id="æ–°ç‰¹æ€§"><a href="#æ–°ç‰¹æ€§" class="headerlink" title="æ–°ç‰¹æ€§"></a>æ–°ç‰¹æ€§</h1><p>Java8 æ–°å¢äº†éå¸¸å¤šçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬ä¸»è¦è®¨è®ºä»¥ä¸‹å‡ ä¸ªï¼š</p>
<ul>
<li><strong>Lambda è¡¨è¾¾å¼</strong> âˆ’ Lambda å…è®¸æŠŠå‡½æ•°ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ï¼ˆå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’åˆ°æ–¹æ³•ä¸­ï¼‰ã€‚</li>
<li><strong>æ–¹æ³•å¼•ç”¨</strong> âˆ’ æ–¹æ³•å¼•ç”¨æä¾›äº†éå¸¸æœ‰ç”¨çš„è¯­æ³•ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨å·²æœ‰Javaç±»æˆ–å¯¹è±¡ï¼ˆå®ä¾‹ï¼‰çš„æ–¹æ³•æˆ–æ„é€ å™¨ã€‚ä¸lambdaè”åˆä½¿ç”¨ï¼Œæ–¹æ³•å¼•ç”¨å¯ä»¥ä½¿è¯­è¨€çš„æ„é€ æ›´ç´§å‡‘ç®€æ´ï¼Œå‡å°‘å†—ä½™ä»£ç ã€‚</li>
<li><strong>é»˜è®¤æ–¹æ³•</strong> âˆ’ é»˜è®¤æ–¹æ³•å°±æ˜¯ä¸€ä¸ªåœ¨æ¥å£é‡Œé¢æœ‰äº†ä¸€ä¸ªå®ç°çš„æ–¹æ³•ã€‚</li>
<li><strong>Stream API</strong> âˆ’æ–°æ·»åŠ çš„Stream APIï¼ˆjava.util.streamï¼‰ æŠŠçœŸæ­£çš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼å¼•å…¥åˆ°Javaä¸­ã€‚</li>
<li><strong>Date Time API</strong> âˆ’ åŠ å¼ºå¯¹æ—¥æœŸä¸æ—¶é—´çš„å¤„ç†ã€‚</li>
<li><strong>Optional ç±»</strong> âˆ’ Optional ç±»å·²ç»æˆä¸º Java 8 ç±»åº“çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</li>
</ul>
<blockquote>
<p>æ›´å¤šç›¸å…³è¯·æµè§ˆ-&gt;<a href="https://www.oracle.com/technetwork/java/javase/8-whats-new-2157071.html" target="_blank" rel="noopener">https://www.oracle.com/technetwork/java/javase/8-whats-new-2157071.html</a></p>
</blockquote>
<h1 id="Lambda-è¡¨è¾¾å¼"><a href="#Lambda-è¡¨è¾¾å¼" class="headerlink" title="Lambda è¡¨è¾¾å¼"></a>Lambda è¡¨è¾¾å¼</h1><p>Lambda è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ç§°ä¸ºé—­åŒ…ï¼Œå®ƒæ˜¯æ¨åŠ¨ Java 8 å‘å¸ƒçš„æœ€é‡è¦æ–°ç‰¹æ€§ã€‚</p>
<p>Lambda å…è®¸æŠŠå‡½æ•°ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ï¼ˆå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’è¿›æ–¹æ³•ä¸­ï¼‰ã€‚</p>
<p>ä½¿ç”¨ Lambda è¡¨è¾¾å¼å¯ä»¥ä½¿ä»£ç å˜çš„æ›´åŠ ç®€æ´ç´§å‡‘ã€‚</p>
<h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>lambda è¡¨è¾¾å¼çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">(parameters) -&gt; expression </span><br><span class="line"><span class="comment">// or</span></span><br><span class="line">(parameters) -&gt;&#123; statements; &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>å¯é€‰ç±»å‹å£°æ˜ï¼š</strong>ä¸éœ€è¦å£°æ˜å‚æ•°ç±»å‹ï¼Œç¼–è¯‘å™¨å¯ä»¥ç»Ÿä¸€è¯†åˆ«å‚æ•°å€¼ã€‚</li>
<li><strong>å¯é€‰çš„å‚æ•°åœ†æ‹¬å·ï¼š</strong>ä¸€ä¸ªå‚æ•°æ— éœ€å®šä¹‰åœ†æ‹¬å·ï¼Œä½†å¤šä¸ªå‚æ•°éœ€è¦å®šä¹‰åœ†æ‹¬å·ã€‚</li>
<li><strong>å¯é€‰çš„å¤§æ‹¬å·ï¼š</strong>å¦‚æœä¸»ä½“åŒ…å«äº†ä¸€ä¸ªè¯­å¥ï¼Œå°±ä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ã€‚</li>
<li><strong>å¯é€‰çš„è¿”å›å…³é”®å­—ï¼š</strong>å¦‚æœä¸»ä½“åªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼è¿”å›å€¼åˆ™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿”å›å€¼ï¼Œå¤§æ‹¬å·éœ€è¦æŒ‡å®šæ˜è¡¨è¾¾å¼è¿”å›äº†ä¸€ä¸ªæ•°å€¼ã€‚</li>
</ul>
<p>æ¥çœ‹ä¸€ä¸‹æœ€ç®€å•çš„ä½¿ç”¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Lambda</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"åŒ¿åå†…éƒ¨ç±»å®ç°"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">"Lambdaå®ç°"</span>);</span><br><span class="line">        &#125;).start();</span><br><span class="line"></span><br><span class="line">        Lambda lambda = <span class="keyword">new</span> Lambda();</span><br><span class="line">        lambda.printFunc(() -&gt; System.out.println(<span class="string">"hello, lambda"</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printFunc</span><span class="params">(Functional func)</span> </span>&#123;</span><br><span class="line">        func.accept();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">Functional</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">accept</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">åŒ¿åå†…éƒ¨ç±»å®ç°</span><br><span class="line">Lambdaå®ç°</span><br><span class="line">hello, lambda</span><br></pre></td></tr></table></figure>
<p><strong>æ›´å¤šå®ä¾‹</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. ä¸éœ€è¦å‚æ•°,è¿”å›å€¼ä¸º 5  </span></span><br><span class="line">() -&gt; <span class="number">5</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 2. æ¥æ”¶ä¸€ä¸ªå‚æ•°(æ•°å­—ç±»å‹),è¿”å›å…¶2å€çš„å€¼  </span></span><br><span class="line">x -&gt; <span class="number">2</span> * x  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 3. æ¥å—2ä¸ªå‚æ•°(æ•°å­—),å¹¶è¿”å›ä»–ä»¬çš„å·®å€¼  </span></span><br><span class="line">(x, y) -&gt; x â€“ y  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 4. æ¥æ”¶2ä¸ªintå‹æ•´æ•°,è¿”å›ä»–ä»¬çš„å’Œ  </span></span><br><span class="line">(<span class="keyword">int</span> x, <span class="keyword">int</span> y) -&gt; x + y  </span><br><span class="line">  </span><br><span class="line"><span class="comment">// 5. æ¥å—ä¸€ä¸ª string å¯¹è±¡,å¹¶åœ¨æ§åˆ¶å°æ‰“å°,ä¸è¿”å›ä»»ä½•å€¼(çœ‹èµ·æ¥åƒæ˜¯è¿”å›void)  </span></span><br><span class="line">(String s) -&gt; System.out.print(s)</span><br></pre></td></tr></table></figure>
<h2 id="å‰ææ¡ä»¶"><a href="#å‰ææ¡ä»¶" class="headerlink" title="å‰ææ¡ä»¶"></a>å‰ææ¡ä»¶</h2><p>Lambdaçš„è¯­æ³•éå¸¸ç®€æ´ï¼Œä½†å¹¶ä¸æ˜¯å¯ä»¥éšä¾¿ä½¿ç”¨çš„ï¼Œä½¿ç”¨æ—¶æœ‰å‡ ä¸ªæ¡ä»¶éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p>
<ul>
<li><strong>æ–¹æ³•çš„å‚æ•°</strong>æˆ–è€…<strong>å±€éƒ¨å˜é‡ç±»å‹</strong>å¿…é¡»ä¸º<strong>æ¥å£</strong>æ‰èƒ½ä½¿ç”¨Lambda</li>
<li>æ¥å£ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•</li>
</ul>
<h2 id="å‡½æ•°å¼æ¥å£"><a href="#å‡½æ•°å¼æ¥å£" class="headerlink" title="å‡½æ•°å¼æ¥å£"></a>å‡½æ•°å¼æ¥å£</h2><p>å‡½æ•°å¼æ¥å£åœ¨Javaä¸­æŒ‡çš„æ˜¯ï¼š<strong>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£</strong>ã€‚</p>
<p>å‡½æ•°å¼æ¥å£ï¼Œå³é€‚ç”¨äºå‡½æ•°å¼å˜æˆåœºæ™¯çš„æ¥å£ï¼Œè€ŒJavaä¸­çš„å‡½æ•°å¼ç¼–ç¨‹ä½“ç°å°±æ˜¯Lambdaï¼Œæ‰€ä»¥å‡½æ•°å¼æ¥å£å°±æ˜¯å¯ä»¥é€‚ç”¨äºLambdaä½¿ç”¨çš„æ¥å£ã€‚åªæœ‰ç¡®ä¿æ¥å£ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼ŒJavaä¸­çš„Lambdaæ‰èƒ½é¡ºåˆ©è¿›è¡Œæ¨å¯¼ã€‚</p>
<p><code>@FunctionalInterface</code>æ³¨è§£</p>
<p>ä¸<code>@Override</code>æ³¨è§£çš„ä½œç”¨ç±»ä¼¼ï¼ŒJava 8ä¸­ä¸“é—¨ä¸ºå‡½æ•°å¼æ¥å£å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ³¨è§£ï¼š<code>@FunctionalInterface</code>ã€‚è¯¥æ³¨è§£å¯ä»¥ç”¨äºä¸€ä¸ªæ¥å£çš„å®šä¹‰ä¸Šã€‚</p>
<blockquote>
<p>é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ä¸ä¼šç ´åå‡½æ•°å¼æ¥å£çš„å®šä¹‰ï¼Œå› æ­¤å¦‚ä¸‹çš„ä»£ç æ˜¯åˆæ³•çš„ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">FunctionalDefaultMethods</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">defaultMethod</span><span class="params">()</span> </span>&#123;&#125;        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Lambdaä¸åŒ¿åå†…éƒ¨ç±»å¯¹æ¯”"><a href="#Lambdaä¸åŒ¿åå†…éƒ¨ç±»å¯¹æ¯”" class="headerlink" title="Lambdaä¸åŒ¿åå†…éƒ¨ç±»å¯¹æ¯”"></a>Lambdaä¸åŒ¿åå†…éƒ¨ç±»å¯¹æ¯”</h2><ul>
<li>æ‰€éœ€è¦çš„ç±»å‹ä¸ä¸€æ ·ï¼šåŒ¿åå†…éƒ¨ç±»éœ€è¦çš„ç±»å‹å¯ä»¥æ˜¯ç±»ã€æŠ½è±¡ç±»ã€æ¥å£ã€‚Lambdaè¡¨è¾¾å¼éœ€è¦çš„ç±»å‹å¿…é¡»æ˜¯æ¥å£ã€‚</li>
<li>æŠ½è±¡æ–¹æ³•çš„æ•°é‡ä¸ä¸€æ ·ï¼šåŒ¿åå†…éƒ¨ç±»æ‰€éœ€çš„æ¥å£ä¸­æŠ½è±¡æ–¹æ³•æ•°é‡éšæ„ï¼ŒLambdaè¡¨è¾¾å¼æ‰€éœ€çš„æ¥å£æœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚</li>
<li>å®ç°åŸç†ä¸åŒï¼šåŒ¿åå†…éƒ¨ç±»æ˜¯åœ¨ç¼–è¯‘åå½¢æˆclassï¼ŒLambdaè¡¨è¾¾å¼æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆclassã€‚</li>
</ul>
<h2 id="å¸¸ç”¨çš„å†…ç½®å‡½æ•°å¼æ¥å£"><a href="#å¸¸ç”¨çš„å†…ç½®å‡½æ•°å¼æ¥å£" class="headerlink" title="å¸¸ç”¨çš„å†…ç½®å‡½æ•°å¼æ¥å£"></a>å¸¸ç”¨çš„å†…ç½®å‡½æ•°å¼æ¥å£</h2><p>Lambdaè¡¨è¾¾å¼çš„å‰ææ˜¯éœ€è¦æœ‰å‡½æ•°å¼æ¥å£ã€‚è€ŒLambdaä½¿ç”¨æ—¶ä¸éœ€è¦å…³å¿ƒæ¥å£åã€æŠ½è±¡æ–¹æ³•åã€‚åªå…³å¿ƒæŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ã€‚å› æ­¤ä¸ºäº†è®©æˆ‘ä»¬ä½¿ç”¨Lambdaæ–¹ä¾¿ï¼ŒJDKæä¾›äº†å¤§é‡çš„å‡½æ•°å¼æ¥å£ã€‚éƒ½åœ¨<code>java.util.function</code>åŒ…ä¸‹å¯ä»¥æŸ¥çœ‹ã€‚</p>
<p>å¸¸ç”¨çš„å‡ ä¸ªæ¥å£ï¼š</p>
<h3 id="Supplier"><a href="#Supplier" class="headerlink" title="Supplier"></a>Supplier</h3><p>è¯¥æ¥å£æ„å‘³ç€â€œä¾›ç»™â€ï¼Œå¯¹åº”çš„Lambdaè¡¨è¾¾å¼éœ€è¦å¯¹å¤–æä¾›ä¸€ä¸ªç¬¦åˆæ³›å‹ç±»å‹çš„å¯¹è±¡æ•°æ®ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Supplier</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">T <span class="title">get</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Consumer"><a href="#Consumer" class="headerlink" title="Consumer"></a>Consumer</h3><p>è¯¥æ¥å£ä¸Supplieræ­£å¥½ç›¸åï¼Œå®ƒä¸æ˜¯ç”Ÿäº§ä¸€ä¸ªæ•°æ®ï¼Œè€Œæ˜¯æ¶ˆè´¹ä¸€ä¸ªæ•°æ®ï¼Œå…¶æ•°æ®ç±»å‹ç”±æ³›å‹å‚æ•°å†³å®šã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Consumer</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">accept</span><span class="params">(T t)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h3><p>è¯¥æ¥å£ç”¨æ¥æä¾›ä¸€ä¸ªç±»å‹çš„æ•°æ®å¾—åˆ°å¦ä¸€ä¸ªç±»å‹çš„æ•°æ®ï¼Œå‰è€…ç§°ä¸ºå‰ç½®æ¡ä»¶ï¼Œåè€…ç§°ä¸ºåç½®æ¡ä»¶ï¼Œæœ‰å‚æ•°æœ‰è¿”å›å€¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Function</span>&lt;<span class="title">T</span>, <span class="title">R</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">R <span class="title">apply</span><span class="params">(T t)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Predicate"><a href="#Predicate" class="headerlink" title="Predicate"></a>Predicate</h3><p>æœ‰æ—¶å€™éœ€è¦å¯¹æŸç§ç±»å‹æ•°æ®è¿›è¡Œåˆ¤æ–­ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªå¸ƒå°”å€¼çš„æ¥å£ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨è¯¥æ¥å£ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Predicate</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">test</span><span class="params">(T t)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ¥å£é»˜è®¤æ–¹æ³•"><a href="#æ¥å£é»˜è®¤æ–¹æ³•" class="headerlink" title="æ¥å£é»˜è®¤æ–¹æ³•"></a>æ¥å£é»˜è®¤æ–¹æ³•</h1><p>Java 8 æ–°å¢äº†æ¥å£çš„é»˜è®¤æ–¹æ³•ã€‚</p>
<p>ç®€å•è¯´ï¼Œé»˜è®¤æ–¹æ³•å°±æ˜¯æ¥å£å¯ä»¥æœ‰å®ç°æ–¹æ³•ï¼Œè€Œä¸”ä¸éœ€è¦å®ç°ç±»å»å®ç°å…¶æ–¹æ³•ã€‚</p>
<p>æˆ‘ä»¬åªéœ€åœ¨æ–¹æ³•åå‰é¢åŠ ä¸ª default å…³é”®å­—å³å¯å®ç°é»˜è®¤æ–¹æ³•ã€‚</p>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸ªç‰¹æ€§ï¼Ÿ</strong></p>
<p>é¦–å…ˆï¼Œä¹‹å‰çš„æ¥å£æ˜¯ä¸ªåŒåˆƒå‰‘ï¼Œå¥½å¤„æ˜¯é¢å‘æŠ½è±¡è€Œä¸æ˜¯é¢å‘å…·ä½“ç¼–ç¨‹ï¼Œç¼ºé™·æ˜¯ï¼Œå½“éœ€è¦ä¿®æ”¹æ¥å£æ—¶å€™ï¼Œéœ€è¦ä¿®æ”¹å…¨éƒ¨å®ç°è¯¥æ¥å£çš„ç±»ï¼Œç›®å‰çš„ java 8 ä¹‹å‰çš„é›†åˆæ¡†æ¶æ²¡æœ‰ foreach æ–¹æ³•ï¼Œé€šå¸¸èƒ½æƒ³åˆ°çš„è§£å†³åŠæ³•æ˜¯åœ¨JDKé‡Œç»™ç›¸å…³çš„æ¥å£æ·»åŠ æ–°çš„æ–¹æ³•åŠå®ç°ã€‚ç„¶è€Œï¼Œå¯¹äºå·²ç»å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œæ˜¯æ²¡æ³•åœ¨ç»™æ¥å£æ·»åŠ æ–°æ–¹æ³•çš„åŒæ—¶ä¸å½±å“å·²æœ‰çš„å®ç°ã€‚æ‰€ä»¥å¼•è¿›çš„é»˜è®¤æ–¹æ³•ã€‚ä»–ä»¬çš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³æ¥å£çš„ä¿®æ”¹ä¸ç°æœ‰çš„å®ç°ä¸å…¼å®¹çš„é—®é¢˜ã€‚</p>
</blockquote>
<h2 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><h3 id="é»˜è®¤æ–¹æ³•è¯­æ³•ï¼š"><a href="#é»˜è®¤æ–¹æ³•è¯­æ³•ï¼š" class="headerlink" title="é»˜è®¤æ–¹æ³•è¯­æ³•ï¼š"></a>é»˜è®¤æ–¹æ³•è¯­æ³•ï¼š</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"æˆ‘æ˜¯ä¸€è¾†è½¦!"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¤šä¸ªé»˜è®¤æ–¹æ³•"><a href="#å¤šä¸ªé»˜è®¤æ–¹æ³•" class="headerlink" title="å¤šä¸ªé»˜è®¤æ–¹æ³•"></a>å¤šä¸ªé»˜è®¤æ–¹æ³•</h3><p>ä¸€ä¸ªæ¥å£æœ‰é»˜è®¤æ–¹æ³•ï¼Œè€ƒè™‘è¿™æ ·çš„æƒ…å†µï¼Œä¸€ä¸ªç±»å®ç°äº†å¤šä¸ªæ¥å£ï¼Œä¸”è¿™äº›æ¥å£æœ‰ç›¸åŒçš„é»˜è®¤æ–¹æ³•ï¼Œä»¥ä¸‹å®ä¾‹è¯´æ˜äº†è¿™ç§æƒ…å†µçš„è§£å†³æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"æˆ‘æ˜¯ä¸€è¾†è½¦!"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">FourWheeler</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"æˆ‘æ˜¯ä¸€è¾†å››è½®è½¦!"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é™æ€é»˜è®¤æ–¹æ³•"><a href="#é™æ€é»˜è®¤æ–¹æ³•" class="headerlink" title="é™æ€é»˜è®¤æ–¹æ³•"></a>é™æ€é»˜è®¤æ–¹æ³•</h2><p>Java 8 çš„å¦ä¸€ä¸ªç‰¹æ€§æ˜¯æ¥å£å¯ä»¥å£°æ˜ï¼ˆå¹¶ä¸”å¯ä»¥æä¾›å®ç°ï¼‰é™æ€æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"æˆ‘æ˜¯ä¸€è¾†è½¦!"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line">   <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">blowHorn</span><span class="params">()</span></span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"æŒ‰å–‡å­!!!"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å°½ç®¡é»˜è®¤æ–¹æ³•æœ‰è¿™ä¹ˆå¤šå¥½å¤„ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­åº”è¯¥è°¨æ…ä½¿ç”¨ï¼šåœ¨å¤æ‚çš„ç»§æ‰¿ä½“ç³»ä¸­ï¼Œé»˜è®¤æ–¹æ³•å¯èƒ½å¼•èµ·æ­§ä¹‰å’Œç¼–è¯‘é”™è¯¯ã€‚</p>
</blockquote>
<h1 id="æ–¹æ³•å¼•ç”¨"><a href="#æ–¹æ³•å¼•ç”¨" class="headerlink" title="æ–¹æ³•å¼•ç”¨"></a>æ–¹æ³•å¼•ç”¨</h1><p>æ–¹æ³•å¼•ç”¨ä½¿å¾—å¼€å‘è€…å¯ä»¥ç›´æ¥å¼•ç”¨ç°å­˜çš„æ–¹æ³•ã€Javaç±»çš„æ„é€ æ–¹æ³•æˆ–è€…å®ä¾‹å¯¹è±¡ã€‚æ–¹æ³•å¼•ç”¨å’ŒLambdaè¡¨è¾¾å¼é…åˆä½¿ç”¨ï¼Œä½¿å¾—javaç±»çš„æ„é€ æ–¹æ³•çœ‹èµ·æ¥ç´§å‡‘è€Œç®€æ´ï¼Œæ²¡æœ‰å¾ˆå¤šå¤æ‚çš„æ¨¡æ¿ä»£ç ã€‚</p>
<p>æ–¹æ³•å¼•ç”¨ä½¿ç”¨ä¸€å¯¹å†’å· <strong>::</strong> </p>
<ul>
<li><strong>æ„é€ å™¨å¼•ç”¨ï¼š</strong>å®ƒçš„è¯­æ³•æ˜¯<code>Class::new</code>ï¼Œæˆ–è€…æ›´ä¸€èˆ¬çš„<code>Class&lt; T &gt;::new</code>å®ä¾‹å¦‚ä¸‹ï¼š</li>
<li><strong>é™æ€æ–¹æ³•å¼•ç”¨ï¼š</strong>å®ƒçš„è¯­æ³•æ˜¯<code>Class::static_method</code>ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š</li>
<li><strong>ç‰¹å®šç±»çš„ä»»æ„å¯¹è±¡çš„æ–¹æ³•å¼•ç”¨ï¼š</strong>å®ƒçš„è¯­æ³•æ˜¯<code>Class::method</code>å®ä¾‹å¦‚ä¸‹ï¼š</li>
<li><strong>ç‰¹å®šå¯¹è±¡çš„æ–¹æ³•å¼•ç”¨ï¼š</strong>å®ƒçš„è¯­æ³•æ˜¯<code>instance::method</code>å®ä¾‹å¦‚ä¸‹ï¼š</li>
</ul>
<p>æˆ‘ä»¬æ¥ç”¨ä¸€ä¸ªæ¡ˆä¾‹æ¥ç†è§£ä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦æ–¹æ³•å¼•ç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodRef</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getMax</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> n : arr) &#123;</span><br><span class="line">            sum += n;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sum);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      	<span class="comment">// ç›´æ¥é‡å¤æ‹·è´ä»£ç </span></span><br><span class="line">        printMax((arr) -&gt; &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> n : arr) &#123;</span><br><span class="line">                sum += n;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(sum);</span><br><span class="line">        &#125;);</span><br><span class="line">				<span class="comment">// åœ¨Lambdaä¸­è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">        printMax((arr) -&gt; &#123;</span><br><span class="line">            getMax(arr);</span><br><span class="line">        &#125;);</span><br><span class="line">				<span class="comment">// ç›´æ¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨</span></span><br><span class="line">        printMax(MethodRef::getMax);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printMax</span><span class="params">(Consumer&lt;<span class="keyword">int</span>[]&gt; consumer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>&#125;;</span><br><span class="line">        consumer.accept(arr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨mainå‡½æ•°ä¸­çš„ä½¿ç”¨çš„ä¸‰ä¸ªå¯¹æ¯”ï¼Œè¿™å°±æ˜¯å‡å°‘äº†ä»£ç çš„å†—ä½™ã€‚</p>
<h1 id="Streamæµ"><a href="#Streamæµ" class="headerlink" title="Streamæµ"></a>Streamæµ</h1><p>Java 8 APIæ·»åŠ äº†ä¸€ä¸ªæ–°çš„æŠ½è±¡ç§°ä¸ºæµStreamï¼Œå¯ä»¥è®©ä½ ä»¥ä¸€ç§å£°æ˜çš„æ–¹å¼å¤„ç†æ•°æ®ã€‚</p>
<p>Stream ä½¿ç”¨ä¸€ç§ç±»ä¼¼ç”¨ SQL è¯­å¥ä»æ•°æ®åº“æŸ¥è¯¢æ•°æ®çš„ç›´è§‚æ–¹å¼æ¥æä¾›ä¸€ç§å¯¹ Java é›†åˆè¿ç®—å’Œè¡¨è¾¾çš„é«˜é˜¶æŠ½è±¡ã€‚</p>
<p>Stream APIå¯ä»¥æå¤§æé«˜Javaç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›ï¼Œè®©ç¨‹åºå‘˜å†™å‡ºé«˜æ•ˆç‡ã€å¹²å‡€ã€ç®€æ´çš„ä»£ç ã€‚</p>
<p>è¿™ç§é£æ ¼å°†è¦å¤„ç†çš„å…ƒç´ é›†åˆçœ‹ä½œä¸€ç§æµï¼Œ æµåœ¨ç®¡é“ä¸­ä¼ è¾“ï¼Œ å¹¶ä¸”å¯ä»¥åœ¨ç®¡é“çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œå¤„ç†ï¼Œ æ¯”å¦‚ç­›é€‰ï¼Œ æ’åºï¼Œèšåˆç­‰ã€‚</p>
<p>å…ƒç´ æµåœ¨ç®¡é“ä¸­ç»è¿‡ä¸­é—´æ“ä½œï¼ˆintermediate operationï¼‰çš„å¤„ç†ï¼Œæœ€åç”±æœ€ç»ˆæ“ä½œ(terminal operation)å¾—åˆ°å‰é¢å¤„ç†çš„ç»“æœã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">+--------------------+       +------+   +------+   +---+   +-------+</span><br><span class="line">| stream of elements +-----&gt; |filter+-&gt; |sorted+-&gt; |map+-&gt; |collect|</span><br><span class="line">+--------------------+       +------+   +------+   +---+   +-------+</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šçš„æµç¨‹è½¬æ¢ä¸º Java ä»£ç ä¸ºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Integer&gt; transactionsIds = </span><br><span class="line">widgets.stream()</span><br><span class="line">             .filter(b -&gt; b.getColor() == RED)</span><br><span class="line">             .sorted((x,y) -&gt; x.getWeight() - y.getWeight())</span><br><span class="line">             .mapToInt(Widget::getWeight)</span><br><span class="line">             .sum();</span><br></pre></td></tr></table></figure>
<h2 id="ä»€ä¹ˆæ˜¯-Stream"><a href="#ä»€ä¹ˆæ˜¯-Stream" class="headerlink" title="ä»€ä¹ˆæ˜¯ Stream"></a>ä»€ä¹ˆæ˜¯ Stream</h2><p>Streamï¼ˆæµï¼‰æ˜¯ä¸€ä¸ªæ¥è‡ªæ•°æ®æºçš„å…ƒç´ é˜Ÿåˆ—å¹¶æ”¯æŒèšåˆæ“ä½œ</p>
<ul>
<li>å…ƒç´ æ˜¯ç‰¹å®šç±»å‹çš„å¯¹è±¡ï¼Œå½¢æˆä¸€ä¸ªé˜Ÿåˆ—ã€‚ Javaä¸­çš„Streamå¹¶ä¸ä¼šå­˜å‚¨å…ƒç´ ï¼Œè€Œæ˜¯æŒ‰éœ€è®¡ç®—ã€‚</li>
<li><strong>æ•°æ®æº</strong> æµçš„æ¥æºã€‚ å¯ä»¥æ˜¯é›†åˆï¼Œæ•°ç»„ï¼ŒI/O channelï¼Œ äº§ç”Ÿå™¨generator ç­‰ã€‚</li>
<li><strong>èšåˆæ“ä½œ</strong> ç±»ä¼¼SQLè¯­å¥ä¸€æ ·çš„æ“ä½œï¼Œ æ¯”å¦‚filter, map, reduce, find, match, sortedç­‰ã€‚</li>
</ul>
<p>å’Œä»¥å‰çš„Collectionæ“ä½œä¸åŒï¼Œ Streamæ“ä½œè¿˜æœ‰ä¸¤ä¸ªåŸºç¡€çš„ç‰¹å¾ï¼š</p>
<ul>
<li><strong>Pipelining</strong>: ä¸­é—´æ“ä½œéƒ½ä¼šè¿”å›æµå¯¹è±¡æœ¬èº«ã€‚ è¿™æ ·å¤šä¸ªæ“ä½œå¯ä»¥ä¸²è”æˆä¸€ä¸ªç®¡é“ï¼Œ å¦‚åŒæµå¼é£æ ¼ï¼ˆfluent styleï¼‰ã€‚ è¿™æ ·åšå¯ä»¥å¯¹æ“ä½œè¿›è¡Œä¼˜åŒ–ï¼Œ æ¯”å¦‚å»¶è¿Ÿæ‰§è¡Œ(laziness)å’ŒçŸ­è·¯( short-circuiting)ã€‚</li>
<li><strong>å†…éƒ¨è¿­ä»£</strong>ï¼š ä»¥å‰å¯¹é›†åˆéå†éƒ½æ˜¯é€šè¿‡Iteratoræˆ–è€…For-Eachçš„æ–¹å¼, æ˜¾å¼çš„åœ¨é›†åˆå¤–éƒ¨è¿›è¡Œè¿­ä»£ï¼Œ è¿™å«åšå¤–éƒ¨è¿­ä»£ã€‚ Streamæä¾›äº†å†…éƒ¨è¿­ä»£çš„æ–¹å¼ï¼Œ é€šè¿‡è®¿é—®è€…æ¨¡å¼(Visitor)å®ç°ã€‚</li>
</ul>
<h2 id="ç”Ÿæˆæµ"><a href="#ç”Ÿæˆæµ" class="headerlink" title="ç”Ÿæˆæµ"></a>ç”Ÿæˆæµ</h2><p>åœ¨ Java 8 ä¸­, é›†åˆæ¥å£æœ‰ä¸¤ä¸ªæ–¹æ³•æ¥ç”Ÿæˆæµï¼š</p>
<ul>
<li><strong>stream()</strong> âˆ’ ä¸ºé›†åˆåˆ›å»ºä¸²è¡Œæµã€‚</li>
<li><strong>parallelStream()</strong> âˆ’ ä¸ºé›†åˆåˆ›å»ºå¹¶è¡Œæµã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; strings = Arrays.asList(<span class="string">"abc"</span>, <span class="string">""</span>, <span class="string">"bc"</span>, <span class="string">"efg"</span>, <span class="string">"abcd"</span>,<span class="string">""</span>, <span class="string">"jkl"</span>);</span><br><span class="line">List&lt;String&gt; filtered = strings.stream().filter(string -&gt; !string.isEmpty()).collect(Collectors.toList());</span><br></pre></td></tr></table></figure>
<h2 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h2><p>Stream æä¾›äº†æ–°çš„æ–¹æ³• â€˜forEachâ€™ æ¥è¿­ä»£æµä¸­çš„æ¯ä¸ªæ•°æ®ã€‚ä»¥ä¸‹ä»£ç ç‰‡æ®µä½¿ç”¨ forEach è¾“å‡ºäº†10ä¸ªéšæœºæ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Random random = <span class="keyword">new</span> Random();</span><br><span class="line">random.ints().limit(<span class="number">10</span>).forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><p>map æ–¹æ³•ç”¨äºæ˜ å°„æ¯ä¸ªå…ƒç´ åˆ°å¯¹åº”çš„ç»“æœï¼Œä»¥ä¸‹ä»£ç ç‰‡æ®µä½¿ç”¨ map è¾“å‡ºäº†å…ƒç´ å¯¹åº”çš„å¹³æ–¹æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line"><span class="comment">// è·å–å¯¹åº”çš„å¹³æ–¹æ•°</span></span><br><span class="line">List&lt;Integer&gt; squaresList = numbers.stream().map( i -&gt; i*i).distinct().collect(Collectors.toList());</span><br></pre></td></tr></table></figure>
<h2 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h2><p>filter æ–¹æ³•ç”¨äºé€šè¿‡è®¾ç½®çš„æ¡ä»¶è¿‡æ»¤å‡ºå…ƒç´ ã€‚ä»¥ä¸‹ä»£ç ç‰‡æ®µä½¿ç”¨ filter æ–¹æ³•è¿‡æ»¤å‡ºç©ºå­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt;strings = Arrays.asList(<span class="string">"abc"</span>, <span class="string">""</span>, <span class="string">"bc"</span>, <span class="string">"efg"</span>, <span class="string">"abcd"</span>,<span class="string">""</span>, <span class="string">"jkl"</span>);</span><br><span class="line"><span class="comment">// è·å–ç©ºå­—ç¬¦ä¸²çš„æ•°é‡</span></span><br><span class="line"><span class="keyword">long</span> count = strings.stream().filter(string -&gt; string.isEmpty()).count();</span><br></pre></td></tr></table></figure>
<h2 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h2><p>limit æ–¹æ³•ç”¨äºè·å–æŒ‡å®šæ•°é‡çš„æµã€‚ ä»¥ä¸‹ä»£ç ç‰‡æ®µä½¿ç”¨ limit æ–¹æ³•æ‰“å°å‡º 10 æ¡æ•°æ®ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Random random = <span class="keyword">new</span> Random();</span><br><span class="line">random.ints().limit(<span class="number">10</span>).forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<h2 id="sorted"><a href="#sorted" class="headerlink" title="sorted"></a>sorted</h2><p>sorted æ–¹æ³•ç”¨äºå¯¹æµè¿›è¡Œæ’åºã€‚ä»¥ä¸‹ä»£ç ç‰‡æ®µä½¿ç”¨ sorted æ–¹æ³•å¯¹è¾“å‡ºçš„ 10 ä¸ªéšæœºæ•°è¿›è¡Œæ’åºï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Random random = <span class="keyword">new</span> Random();</span><br><span class="line">random.ints().limit(<span class="number">10</span>).sorted().forEach(System.out::println);</span><br></pre></td></tr></table></figure>
<h2 id="å¹¶è¡Œï¼ˆparallelï¼‰ç¨‹åº"><a href="#å¹¶è¡Œï¼ˆparallelï¼‰ç¨‹åº" class="headerlink" title="å¹¶è¡Œï¼ˆparallelï¼‰ç¨‹åº"></a>å¹¶è¡Œï¼ˆparallelï¼‰ç¨‹åº</h2><p>parallelStream æ˜¯æµå¹¶è¡Œå¤„ç†ç¨‹åºçš„ä»£æ›¿æ–¹æ³•ã€‚ä»¥ä¸‹å®ä¾‹æˆ‘ä»¬ä½¿ç”¨ parallelStream æ¥è¾“å‡ºç©ºå­—ç¬¦ä¸²çš„æ•°é‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt; strings = Arrays.asList(<span class="string">"abc"</span>, <span class="string">""</span>, <span class="string">"bc"</span>, <span class="string">"efg"</span>, <span class="string">"abcd"</span>,<span class="string">""</span>, <span class="string">"jkl"</span>);</span><br><span class="line"><span class="comment">// è·å–ç©ºå­—ç¬¦ä¸²çš„æ•°é‡</span></span><br><span class="line"><span class="keyword">int</span> count = strings.parallelStream().filter(string -&gt; string.isEmpty()).count();</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨é¡ºåºè¿è¡Œå’Œå¹¶è¡Œç›´æ¥åˆ‡æ¢ã€‚</p>
<h2 id="Collectors"><a href="#Collectors" class="headerlink" title="Collectors"></a>Collectors</h2><p>Collectors ç±»å®ç°äº†å¾ˆå¤šå½’çº¦æ“ä½œï¼Œä¾‹å¦‚å°†æµè½¬æ¢æˆé›†åˆå’Œèšåˆå…ƒç´ ã€‚Collectors å¯ç”¨äºè¿”å›åˆ—è¡¨æˆ–å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;String&gt;strings = Arrays.asList(<span class="string">"abc"</span>, <span class="string">""</span>, <span class="string">"bc"</span>, <span class="string">"efg"</span>, <span class="string">"abcd"</span>,<span class="string">""</span>, <span class="string">"jkl"</span>);</span><br><span class="line">List&lt;String&gt; filtered = strings.stream().filter(string -&gt; !string.isEmpty()).collect(Collectors.toList());</span><br><span class="line"> </span><br><span class="line">System.out.println(<span class="string">"ç­›é€‰åˆ—è¡¨: "</span> + filtered);</span><br><span class="line">String mergedString = strings.stream().filter(string -&gt; !string.isEmpty()).collect(Collectors.joining(<span class="string">", "</span>));</span><br><span class="line">System.out.println(<span class="string">"åˆå¹¶å­—ç¬¦ä¸²: "</span> + mergedString);</span><br></pre></td></tr></table></figure>
<h2 id="ç»Ÿè®¡"><a href="#ç»Ÿè®¡" class="headerlink" title="ç»Ÿè®¡"></a>ç»Ÿè®¡</h2><p>å¦å¤–ï¼Œä¸€äº›äº§ç”Ÿç»Ÿè®¡ç»“æœçš„æ”¶é›†å™¨ä¹Ÿéå¸¸æœ‰ç”¨ã€‚å®ƒä»¬ä¸»è¦ç”¨äºintã€doubleã€longç­‰åŸºæœ¬ç±»å‹ä¸Šï¼Œå®ƒä»¬å¯ä»¥ç”¨æ¥äº§ç”Ÿç±»ä¼¼å¦‚ä¸‹çš„ç»Ÿè®¡ç»“æœã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Integer&gt; numbers = Arrays.asList(<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line"> </span><br><span class="line">IntSummaryStatistics stats = numbers.stream().mapToInt((x) -&gt; x).summaryStatistics();</span><br><span class="line"> </span><br><span class="line">System.out.println(<span class="string">"åˆ—è¡¨ä¸­æœ€å¤§çš„æ•° : "</span> + stats.getMax());</span><br><span class="line">System.out.println(<span class="string">"åˆ—è¡¨ä¸­æœ€å°çš„æ•° : "</span> + stats.getMin());</span><br><span class="line">System.out.println(<span class="string">"æ‰€æœ‰æ•°ä¹‹å’Œ : "</span> + stats.getSum());</span><br><span class="line">System.out.println(<span class="string">"å¹³å‡æ•° : "</span> + stats.getAverage());</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ›´å¤šApiè¯·ç¿»é˜…æ–‡æ¡£ï¼š<a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html</a></p>
</blockquote>
<h1 id="Date-Time-API"><a href="#Date-Time-API" class="headerlink" title="Date/Time API"></a>Date/Time API</h1><p>Java 8é€šè¿‡å‘å¸ƒæ–°çš„Date-Time API (JSR 310)æ¥è¿›ä¸€æ­¥åŠ å¼ºå¯¹æ—¥æœŸä¸æ—¶é—´çš„å¤„ç†ã€‚</p>
<p>åœ¨æ—§ç‰ˆçš„ Java ä¸­ï¼Œæ—¥æœŸæ—¶é—´ API å­˜åœ¨è¯¸å¤šé—®é¢˜ï¼Œå…¶ä¸­æœ‰ï¼š</p>
<ul>
<li><strong>éçº¿ç¨‹å®‰å…¨</strong> âˆ’ java.util.Date æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€æœ‰çš„æ—¥æœŸç±»éƒ½æ˜¯å¯å˜çš„ï¼Œè¿™æ˜¯Javaæ—¥æœŸç±»æœ€å¤§çš„é—®é¢˜ä¹‹ä¸€ã€‚</li>
<li><strong>è®¾è®¡å¾ˆå·®</strong> âˆ’ Javaçš„æ—¥æœŸ/æ—¶é—´ç±»çš„å®šä¹‰å¹¶ä¸ä¸€è‡´ï¼Œåœ¨java.utilå’Œjava.sqlçš„åŒ…ä¸­éƒ½æœ‰æ—¥æœŸç±»ï¼Œæ­¤å¤–ç”¨äºæ ¼å¼åŒ–å’Œè§£æçš„ç±»åœ¨java.textåŒ…ä¸­å®šä¹‰ã€‚java.util.DateåŒæ—¶åŒ…å«æ—¥æœŸå’Œæ—¶é—´ï¼Œè€Œjava.sql.Dateä»…åŒ…å«æ—¥æœŸï¼Œå°†å…¶çº³å…¥java.sqlåŒ…å¹¶ä¸åˆç†ã€‚å¦å¤–è¿™ä¸¤ä¸ªç±»éƒ½æœ‰ç›¸åŒçš„åå­—ï¼Œè¿™æœ¬èº«å°±æ˜¯ä¸€ä¸ªéå¸¸ç³Ÿç³•çš„è®¾è®¡ã€‚</li>
<li><strong>æ—¶åŒºå¤„ç†éº»çƒ¦</strong> âˆ’ æ—¥æœŸç±»å¹¶ä¸æä¾›å›½é™…åŒ–ï¼Œæ²¡æœ‰æ—¶åŒºæ”¯æŒï¼Œå› æ­¤Javaå¼•å…¥äº†java.util.Calendarå’Œjava.util.TimeZoneç±»ï¼Œä½†ä»–ä»¬åŒæ ·å­˜åœ¨ä¸Šè¿°æ‰€æœ‰çš„é—®é¢˜ã€‚</li>
</ul>
<p>Java 8 åœ¨ <strong>java.time</strong> åŒ…ä¸‹æä¾›äº†å¾ˆå¤šæ–°çš„ APIã€‚ä»¥ä¸‹ä¸ºä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„ APIï¼š</p>
<ul>
<li><strong>Local(æœ¬åœ°)</strong> âˆ’ ç®€åŒ–äº†æ—¥æœŸæ—¶é—´çš„å¤„ç†ï¼Œæ²¡æœ‰æ—¶åŒºçš„é—®é¢˜ã€‚</li>
<li><strong>Zoned(æ—¶åŒº)</strong> âˆ’ é€šè¿‡åˆ¶å®šçš„æ—¶åŒºå¤„ç†æ—¥æœŸæ—¶é—´ã€‚</li>
</ul>
<p>æ–°çš„java.timeåŒ…æ¶µç›–äº†æ‰€æœ‰å¤„ç†æ—¥æœŸï¼Œæ—¶é—´ï¼Œæ—¥æœŸ/æ—¶é—´ï¼Œæ—¶åŒºï¼Œæ—¶åˆ»ï¼ˆinstantsï¼‰ï¼Œè¿‡ç¨‹ï¼ˆduringï¼‰ä¸æ—¶é’Ÿï¼ˆclockï¼‰çš„æ“ä½œã€‚</p>
<blockquote>
<p><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/datetime/index.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/technotes/guides/datetime/index.html</a></p>
</blockquote>
<h2 id="æœ¬åœ°åŒ–æ—¥æœŸæ—¶é—´-API"><a href="#æœ¬åœ°åŒ–æ—¥æœŸæ—¶é—´-API" class="headerlink" title="æœ¬åœ°åŒ–æ—¥æœŸæ—¶é—´ API"></a>æœ¬åœ°åŒ–æ—¥æœŸæ—¶é—´ API</h2><p><code>LocalDate/LocalTime</code> å’Œ <code>LocalDateTime</code> ç±»å¯ä»¥åœ¨å¤„ç†æ—¶åŒºä¸æ˜¯å¿…é¡»çš„æƒ…å†µã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–å½“å‰çš„æ—¥æœŸæ—¶é—´</span></span><br><span class="line">LocalDateTime currentTime = LocalDateTime.now();</span><br><span class="line">System.out.println(<span class="string">"å½“å‰æ—¶é—´: "</span> + currentTime);</span><br><span class="line">        </span><br><span class="line">LocalDate date1 = currentTime.toLocalDate();</span><br><span class="line">System.out.println(<span class="string">"date1: "</span> + date1);</span><br><span class="line">        </span><br><span class="line">Month month = currentTime.getMonth();</span><br><span class="line"><span class="keyword">int</span> day = currentTime.getDayOfMonth();</span><br><span class="line"><span class="keyword">int</span> seconds = currentTime.getSecond();</span><br><span class="line">        </span><br><span class="line">System.out.println(<span class="string">"æœˆ: "</span> + month +<span class="string">", æ—¥: "</span> + day +<span class="string">", ç§’: "</span> + seconds);</span><br><span class="line">        </span><br><span class="line">LocalDateTime date2 = currentTime.withDayOfMonth(<span class="number">10</span>).withYear(<span class="number">2012</span>);</span><br><span class="line">System.out.println(<span class="string">"date2: "</span> + date2);</span><br><span class="line">        </span><br><span class="line"><span class="comment">// 12 december 2014</span></span><br><span class="line">LocalDate date3 = LocalDate.of(<span class="number">2014</span>, Month.DECEMBER, <span class="number">12</span>);</span><br><span class="line">System.out.println(<span class="string">"date3: "</span> + date3);</span><br><span class="line">        </span><br><span class="line"><span class="comment">// 22 å°æ—¶ 15 åˆ†é’Ÿ</span></span><br><span class="line">LocalTime date4 = LocalTime.of(<span class="number">22</span>, <span class="number">15</span>);</span><br><span class="line">System.out.println(<span class="string">"date4: "</span> + date4);</span><br><span class="line">        </span><br><span class="line"><span class="comment">// è§£æå­—ç¬¦ä¸²</span></span><br><span class="line">LocalTime date5 = LocalTime.parse(<span class="string">"20:15:30"</span>);</span><br><span class="line">System.out.println(<span class="string">"date5: "</span> + date5);</span><br></pre></td></tr></table></figure>
<blockquote>
<p> output</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; å½“å‰æ—¶é—´: 2016-04-15T16:55:48.668</span><br><span class="line">&gt; date1: 2016-04-15</span><br><span class="line">&gt; æœˆ: APRIL, æ—¥: 15, ç§’: 48</span><br><span class="line">&gt; date2: 2012-04-10T16:55:48.668</span><br><span class="line">&gt; date3: 2014-12-12</span><br><span class="line">&gt; date4: 22:15</span><br><span class="line">&gt; date5: 20:15:30</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="ä½¿ç”¨æ—¶åŒºçš„æ—¥æœŸæ—¶é—´API"><a href="#ä½¿ç”¨æ—¶åŒºçš„æ—¥æœŸæ—¶é—´API" class="headerlink" title="ä½¿ç”¨æ—¶åŒºçš„æ—¥æœŸæ—¶é—´API"></a>ä½¿ç”¨æ—¶åŒºçš„æ—¥æœŸæ—¶é—´API</h2><p>å¦‚æœæˆ‘ä»¬éœ€è¦è€ƒè™‘åˆ°æ—¶åŒºï¼Œå°±å¯ä»¥ä½¿ç”¨æ—¶åŒº<code>ZonedDateTime</code>çš„æ—¥æœŸæ—¶é—´APIï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–å½“å‰æ—¶é—´æ—¥æœŸ</span></span><br><span class="line">ZonedDateTime date1 = ZonedDateTime.parse(<span class="string">"2015-12-03T10:15:30+05:30[Asia/Shanghai]"</span>);</span><br><span class="line">System.out.println(<span class="string">"date1: "</span> + date1);</span><br><span class="line">        </span><br><span class="line">ZoneId id = ZoneId.of(<span class="string">"Europe/Paris"</span>);</span><br><span class="line">System.out.println(<span class="string">"ZoneId: "</span> + id);</span><br><span class="line">        </span><br><span class="line">ZoneId currentZone = ZoneId.systemDefault();</span><br><span class="line">System.out.println(<span class="string">"å½“æœŸæ—¶åŒº: "</span> + currentZone);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; date1: 2015-12-03T10:15:30+08:00[Asia/Shanghai]</span><br><span class="line">&gt; ZoneId: Europe/Paris</span><br><span class="line">&gt; å½“æœŸæ—¶åŒº: Asia/Shanghai</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>æ›´å¤šç¤ºä¾‹<a href="https://www.javacodegeeks.com/2014/04/java-8-date-time-api-tutorial-localdatetime.html" target="_blank" rel="noopener">https://www.javacodegeeks.com/2014/04/java-8-date-time-api-tutorial-localdatetime.html</a></p>
</blockquote>
<h1 id="Optional-ç±»"><a href="#Optional-ç±»" class="headerlink" title="Optional ç±»"></a>Optional ç±»</h1><p>Optional ç±»æ˜¯ä¸€ä¸ªå¯ä»¥ä¸ºnullçš„å®¹å™¨å¯¹è±¡ã€‚å¦‚æœå€¼å­˜åœ¨åˆ™isPresent()æ–¹æ³•ä¼šè¿”å›trueï¼Œè°ƒç”¨get()æ–¹æ³•ä¼šè¿”å›è¯¥å¯¹è±¡ã€‚</p>
<p>Optional æ˜¯ä¸ªå®¹å™¨ï¼šå®ƒå¯ä»¥ä¿å­˜ç±»å‹Tçš„å€¼ï¼Œæˆ–è€…ä»…ä»…ä¿å­˜nullã€‚Optionalæä¾›å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ˜¾å¼è¿›è¡Œç©ºå€¼æ£€æµ‹ã€‚</p>
<p>Optional ç±»çš„å¼•å…¥å¾ˆå¥½çš„è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<h2 id="ç±»å£°æ˜"><a href="#ç±»å£°æ˜" class="headerlink" title="ç±»å£°æ˜"></a>ç±»å£°æ˜</h2><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ª <strong>java.util.Optional</strong> ç±»çš„å£°æ˜ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Optional</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">Object</span></span></span><br></pre></td></tr></table></figure>
<h2 id="ç±»æ–¹æ³•"><a href="#ç±»æ–¹æ³•" class="headerlink" title="ç±»æ–¹æ³•"></a>ç±»æ–¹æ³•</h2><table>
<thead>
<tr>
<th style="text-align:left">åºå·</th>
<th style="text-align:left">æ–¹æ³• &amp; æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left"><strong>static  Optional empty()</strong>è¿”å›ç©ºçš„ Optional å®ä¾‹ã€‚</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left"><strong>boolean equals(Object obj)</strong>åˆ¤æ–­å…¶ä»–å¯¹è±¡æ˜¯å¦ç­‰äº Optionalã€‚</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left"><strong>Optional filter(Predicate predicate)</strong>å¦‚æœå€¼å­˜åœ¨ï¼Œå¹¶ä¸”è¿™ä¸ªå€¼åŒ¹é…ç»™å®šçš„ predicateï¼Œè¿”å›ä¸€ä¸ªOptionalç”¨ä»¥æè¿°è¿™ä¸ªå€¼ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªç©ºçš„Optionalã€‚</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left"><strong> Optional flatMap(Function&gt; mapper)</strong>å¦‚æœå€¼å­˜åœ¨ï¼Œè¿”å›åŸºäºOptionalåŒ…å«çš„æ˜ å°„æ–¹æ³•çš„å€¼ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªç©ºçš„Optional</td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td style="text-align:left"><strong>T get()</strong>å¦‚æœåœ¨è¿™ä¸ªOptionalä¸­åŒ…å«è¿™ä¸ªå€¼ï¼Œè¿”å›å€¼ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼šNoSuchElementException</td>
</tr>
<tr>
<td style="text-align:left">6</td>
<td style="text-align:left"><strong>int hashCode()</strong>è¿”å›å­˜åœ¨å€¼çš„å“ˆå¸Œç ï¼Œå¦‚æœå€¼ä¸å­˜åœ¨ è¿”å› 0ã€‚</td>
</tr>
<tr>
<td style="text-align:left">7</td>
<td style="text-align:left"><strong>void ifPresent(Consumer consumer)</strong>å¦‚æœå€¼å­˜åœ¨åˆ™ä½¿ç”¨è¯¥å€¼è°ƒç”¨ consumer , å¦åˆ™ä¸åšä»»ä½•äº‹æƒ…ã€‚</td>
</tr>
<tr>
<td style="text-align:left">8</td>
<td style="text-align:left"><strong>boolean isPresent()</strong>å¦‚æœå€¼å­˜åœ¨åˆ™æ–¹æ³•ä¼šè¿”å›trueï¼Œå¦åˆ™è¿”å› falseã€‚</td>
</tr>
<tr>
<td style="text-align:left">9</td>
<td style="text-align:left"><strong>Optional map(Function mapper)</strong>å¦‚æœæœ‰å€¼ï¼Œåˆ™å¯¹å…¶æ‰§è¡Œè°ƒç”¨æ˜ å°„å‡½æ•°å¾—åˆ°è¿”å›å€¼ã€‚å¦‚æœè¿”å›å€¼ä¸ä¸º nullï¼Œåˆ™åˆ›å»ºåŒ…å«æ˜ å°„è¿”å›å€¼çš„Optionalä½œä¸ºmapæ–¹æ³•è¿”å›å€¼ï¼Œå¦åˆ™è¿”å›ç©ºOptionalã€‚</td>
</tr>
<tr>
<td style="text-align:left">10</td>
<td style="text-align:left"><strong>static  Optional of(T value)</strong>è¿”å›ä¸€ä¸ªæŒ‡å®šénullå€¼çš„Optionalã€‚</td>
</tr>
<tr>
<td style="text-align:left">11</td>
<td style="text-align:left"><strong>static  Optional ofNullable(T value)</strong>å¦‚æœä¸ºéç©ºï¼Œè¿”å› Optional æè¿°çš„æŒ‡å®šå€¼ï¼Œå¦åˆ™è¿”å›ç©ºçš„ Optionalã€‚</td>
</tr>
<tr>
<td style="text-align:left">12</td>
<td style="text-align:left"><strong>T orElse(T other)</strong>å¦‚æœå­˜åœ¨è¯¥å€¼ï¼Œè¿”å›å€¼ï¼Œ å¦åˆ™è¿”å› otherã€‚</td>
</tr>
<tr>
<td style="text-align:left">13</td>
<td style="text-align:left"><strong>T orElseGet(Supplier other)</strong>å¦‚æœå­˜åœ¨è¯¥å€¼ï¼Œè¿”å›å€¼ï¼Œ å¦åˆ™è§¦å‘ otherï¼Œå¹¶è¿”å› other è°ƒç”¨çš„ç»“æœã€‚</td>
</tr>
<tr>
<td style="text-align:left">14</td>
<td style="text-align:left"><strong> T orElseThrow(Supplier exceptionSupplier)</strong>å¦‚æœå­˜åœ¨è¯¥å€¼ï¼Œè¿”å›åŒ…å«çš„å€¼ï¼Œå¦åˆ™æŠ›å‡ºç”± Supplier ç»§æ‰¿çš„å¼‚å¸¸</td>
</tr>
<tr>
<td style="text-align:left">15</td>
<td style="text-align:left"><strong>String toString()</strong>è¿”å›ä¸€ä¸ªOptionalçš„éç©ºå­—ç¬¦ä¸²ï¼Œç”¨æ¥è°ƒè¯•</td>
</tr>
</tbody>
</table>
<p><strong>æ³¨æ„ï¼š</strong> è¿™äº›æ–¹æ³•æ˜¯ä» <strong>java.lang.Object</strong> ç±»ç»§æ‰¿æ¥çš„ã€‚</p>
<h2 id="Optionalå®ä¾‹"><a href="#Optionalå®ä¾‹" class="headerlink" title="Optionalå®ä¾‹"></a>Optionalå®ä¾‹</h2><p>é€šè¿‡ä»¥ä¸‹å®ä¾‹æ¥æ›´å¥½çš„äº†è§£ Optional ç±»çš„ä½¿ç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OptionalDemo</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">   </span><br><span class="line">      OptionalDemo optionalDemo = <span class="keyword">new</span> OptionalDemo();</span><br><span class="line">      Integer value1 = <span class="keyword">null</span>;</span><br><span class="line">      Integer value2 = <span class="keyword">new</span> Integer(<span class="number">10</span>);</span><br><span class="line">        </span><br><span class="line">      <span class="comment">// Optional.ofNullable - å…è®¸ä¼ é€’ä¸º null å‚æ•°</span></span><br><span class="line">      Optional&lt;Integer&gt; a = Optional.ofNullable(value1);</span><br><span class="line">        </span><br><span class="line">      <span class="comment">// Optional.of - å¦‚æœä¼ é€’çš„å‚æ•°æ˜¯ nullï¼ŒæŠ›å‡ºå¼‚å¸¸ NullPointerException</span></span><br><span class="line">      Optional&lt;Integer&gt; b = Optional.of(value2);</span><br><span class="line">      System.out.println(optionalDemo.sum(a,b));</span><br><span class="line">   &#125;</span><br><span class="line">    </span><br><span class="line">   <span class="function"><span class="keyword">public</span> Integer <span class="title">sum</span><span class="params">(Optional&lt;Integer&gt; a, Optional&lt;Integer&gt; b)</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">      <span class="comment">// Optional.isPresent - åˆ¤æ–­å€¼æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">      System.out.println(<span class="string">"ç¬¬ä¸€ä¸ªå‚æ•°å€¼å­˜åœ¨: "</span> + a.isPresent());</span><br><span class="line">      System.out.println(<span class="string">"ç¬¬äºŒä¸ªå‚æ•°å€¼å­˜åœ¨: "</span> + b.isPresent());</span><br><span class="line">        </span><br><span class="line">      <span class="comment">// Optional.orElse - å¦‚æœå€¼å­˜åœ¨ï¼Œè¿”å›å®ƒï¼Œå¦åˆ™è¿”å›é»˜è®¤å€¼</span></span><br><span class="line">      Integer value1 = a.orElse(<span class="keyword">new</span> Integer(<span class="number">0</span>));</span><br><span class="line">        </span><br><span class="line">      <span class="comment">//Optional.get - è·å–å€¼ï¼Œå€¼éœ€è¦å­˜åœ¨</span></span><br><span class="line">      Integer value2 = b.get();</span><br><span class="line">      <span class="keyword">return</span> value1 + value2;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; ç¬¬ä¸€ä¸ªå‚æ•°å€¼å­˜åœ¨: false</span><br><span class="line">&gt; ç¬¬äºŒä¸ªå‚æ•°å€¼å­˜åœ¨: true</span><br><span class="line">&gt; 10</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.jianshu.com/p/5b800057f2d8" target="_blank" rel="noopener">https://www.jianshu.com/p/5b800057f2d8</a></p>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title>i18nï¼ˆå›½é™…åŒ–ï¼‰åœ°åŸŸæ ‡è¯†ç </title>
    <url>/2019/12/16/i18n%EF%BC%88%E5%9B%BD%E9%99%85%E5%8C%96%EF%BC%89%E5%9C%B0%E5%9F%9F%E6%A0%87%E8%AF%86%E7%A0%81/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>i18n(å›½é™…åŒ–) å’Œl18n(æœ¬åœ°åŒ–)æ—¶çš„åœ°åŸŸæ ‡è¯†ä»£ç  æ ¼å¼å¦‚ zh-CN(è¯­è¨€-å›½å®¶)</p>
<a id="more"></a>
<table>
<thead>
<tr>
<th style="text-align:left">å›½å®¶</th>
<th style="text-align:left">è¯­è¨€</th>
<th style="text-align:left">è¯­è¨€ç¼–ç </th>
<th style="text-align:left">å›½å®¶ç¼–ç </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ä¸­å›½</td>
<td style="text-align:left">æ±‰è¯­</td>
<td style="text-align:left">zh</td>
<td style="text-align:left">CN</td>
</tr>
<tr>
<td style="text-align:left">ä¸­å›½é¦™æ¸¯</td>
<td style="text-align:left"></td>
<td style="text-align:left">zh</td>
<td style="text-align:left">HK</td>
</tr>
<tr>
<td style="text-align:left">ä¸­å›½æ¾³é—¨</td>
<td style="text-align:left"></td>
<td style="text-align:left">zh</td>
<td style="text-align:left">MO</td>
</tr>
<tr>
<td style="text-align:left">ä¸­å›½å°æ¹¾</td>
<td style="text-align:left"></td>
<td style="text-align:left">zh</td>
<td style="text-align:left">TW</td>
</tr>
<tr>
<td style="text-align:left">æ–°åŠ å¡</td>
<td style="text-align:left">æ±‰è¯­</td>
<td style="text-align:left">zh</td>
<td style="text-align:left">SG</td>
</tr>
<tr>
<td style="text-align:left">ä¸­å›½ç®€ä½“ä¸­æ–‡</td>
<td style="text-align:left">zh-CHS</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">ä¸­å›½ç¹ä½“ä¸­æ–‡</td>
<td style="text-align:left">zh-CHT</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">è‹±å›½</td>
<td style="text-align:left">è‹±è¯­</td>
<td style="text-align:left">en</td>
<td style="text-align:left">GB</td>
</tr>
<tr>
<td style="text-align:left">ç¾å›½</td>
<td style="text-align:left">è‹±è¯­</td>
<td style="text-align:left">en</td>
<td style="text-align:left">US</td>
</tr>
<tr>
<td style="text-align:left">ä¿„ç½—æ–¯</td>
<td style="text-align:left">ä¿„ç½—æ–¯ Tatar è¯­</td>
<td style="text-align:left">tt</td>
<td style="text-align:left">RU</td>
</tr>
<tr>
<td style="text-align:left">ä¿„ç½—æ–¯</td>
<td style="text-align:left">ä¿„ç½—æ–¯è¯­</td>
<td style="text-align:left">ru</td>
<td style="text-align:left">RU</td>
</tr>
<tr>
<td style="text-align:left">å¾·å›½</td>
<td style="text-align:left">å¾·è¯­</td>
<td style="text-align:left">de</td>
<td style="text-align:left">DE</td>
</tr>
<tr>
<td style="text-align:left">ç‘å£«</td>
<td style="text-align:left">å¾·è¯­</td>
<td style="text-align:left">de</td>
<td style="text-align:left">CH</td>
</tr>
<tr>
<td style="text-align:left">å¢æ£®å ¡</td>
<td style="text-align:left">å¾·è¯­</td>
<td style="text-align:left">de</td>
<td style="text-align:left">LU</td>
</tr>
<tr>
<td style="text-align:left">å¥¥åœ°åˆ©</td>
<td style="text-align:left">å¾·è¯­</td>
<td style="text-align:left">de</td>
<td style="text-align:left">AT</td>
</tr>
<tr>
<td style="text-align:left">åˆ—æ”¯æ•¦å£«ç™»</td>
<td style="text-align:left">å¾·è¯­</td>
<td style="text-align:left">de</td>
<td style="text-align:left">LI</td>
</tr>
<tr>
<td style="text-align:left">åŠ æ‹¿å¤§</td>
<td style="text-align:left">æ³•è¯­</td>
<td style="text-align:left">fr</td>
<td style="text-align:left">CA</td>
</tr>
<tr>
<td style="text-align:left">æ³•å›½</td>
<td style="text-align:left">æ³•è¯­</td>
<td style="text-align:left">fr</td>
<td style="text-align:left">FR</td>
</tr>
<tr>
<td style="text-align:left">å¢æ£®å ¡</td>
<td style="text-align:left">æ³•è¯­</td>
<td style="text-align:left">fr</td>
<td style="text-align:left">LU</td>
</tr>
<tr>
<td style="text-align:left">æ¯”åˆ©æ—¶</td>
<td style="text-align:left">æ³•è¯­</td>
<td style="text-align:left">fr</td>
<td style="text-align:left">BE</td>
</tr>
<tr>
<td style="text-align:left">æ‘©çº³å“¥</td>
<td style="text-align:left">æ³•è¯­</td>
<td style="text-align:left">fr</td>
<td style="text-align:left">MC</td>
</tr>
<tr>
<td style="text-align:left">ç‘å£«</td>
<td style="text-align:left">æ³•è¯­</td>
<td style="text-align:left">fr</td>
<td style="text-align:left">CH</td>
</tr>
<tr>
<td style="text-align:left">æ„å¤§åˆ©</td>
<td style="text-align:left">æ„å¤§åˆ©</td>
<td style="text-align:left">it</td>
<td style="text-align:left">IT</td>
</tr>
<tr>
<td style="text-align:left">æ—¥æœ¬</td>
<td style="text-align:left">æ—¥è¯­</td>
<td style="text-align:left">ja</td>
<td style="text-align:left">JP</td>
</tr>
<tr>
<td style="text-align:left">éŸ©å›½</td>
<td style="text-align:left">éŸ©å›½</td>
<td style="text-align:left">ko</td>
<td style="text-align:left">KR</td>
</tr>
<tr>
<td style="text-align:left">å“ˆè¨å…‹</td>
<td style="text-align:left">å“ˆè¨å…‹(Kazakh)</td>
<td style="text-align:left">kk</td>
<td style="text-align:left">KZ</td>
</tr>
<tr>
<td style="text-align:left">èŠ¬å…°</td>
<td style="text-align:left">èŠ¬å…°è¯­</td>
<td style="text-align:left">fi</td>
<td style="text-align:left">FI</td>
</tr>
<tr>
<td style="text-align:left">ç‘å…¸</td>
<td style="text-align:left">èŠ¬å…°è¯­</td>
<td style="text-align:left">sv</td>
<td style="text-align:left">FI</td>
</tr>
<tr>
<td style="text-align:left">ç‘å…¸</td>
<td style="text-align:left">ç‘å…¸è¯­</td>
<td style="text-align:left">sv</td>
<td style="text-align:left">SE</td>
</tr>
<tr>
<td style="text-align:left">åŒˆç‰™åˆ©</td>
<td style="text-align:left">åŒˆç‰™åˆ©</td>
<td style="text-align:left">hu</td>
<td style="text-align:left">HU</td>
</tr>
<tr>
<td style="text-align:left">å†°å²›</td>
<td style="text-align:left">å†°å²›</td>
<td style="text-align:left">is</td>
<td style="text-align:left">IS</td>
</tr>
<tr>
<td style="text-align:left">å°å°¼</td>
<td style="text-align:left">å°å°¼</td>
<td style="text-align:left">id</td>
<td style="text-align:left">ID</td>
</tr>
<tr>
<td style="text-align:left">ç‘å£«</td>
<td style="text-align:left">æ„å¤§åˆ©</td>
<td style="text-align:left">it</td>
<td style="text-align:left">CH</td>
</tr>
<tr>
<td style="text-align:left">åœŸè€³å…¶</td>
<td style="text-align:left">åœŸè€³å…¶è¯­</td>
<td style="text-align:left">tr</td>
<td style="text-align:left">TR</td>
</tr>
<tr>
<td style="text-align:left">ä¹Œå…‹å…°</td>
<td style="text-align:left">ä¹Œå…‹å…°è¯­</td>
<td style="text-align:left">uk</td>
<td style="text-align:left">UA</td>
</tr>
<tr>
<td style="text-align:left">å·´åŸºæ–¯å¦</td>
<td style="text-align:left">å·´åŸºæ–¯å¦ Urdu è¯­</td>
<td style="text-align:left">ur</td>
<td style="text-align:left">PK</td>
</tr>
<tr>
<td style="text-align:left">åŠ æ‹¿å¤§</td>
<td style="text-align:left">è‹±è¯­</td>
<td style="text-align:left">en</td>
<td style="text-align:left">CA</td>
</tr>
<tr>
<td style="text-align:left">çˆ±å°”å…°</td>
<td style="text-align:left">è‹±è¯­</td>
<td style="text-align:left">en</td>
<td style="text-align:left">IE</td>
</tr>
<tr>
<td style="text-align:left">æ·å…‹</td>
<td style="text-align:left">æ·å…‹</td>
<td style="text-align:left">cs</td>
<td style="text-align:left">CZ</td>
</tr>
<tr>
<td style="text-align:left">ç‘å£«</td>
<td style="text-align:left">æ³•è¯­</td>
<td style="text-align:left">fr</td>
<td style="text-align:left">CH</td>
</tr>
<tr>
<td style="text-align:left">åŠ å‹’æ¯”æµ·</td>
<td style="text-align:left">è‹±è¯­</td>
<td style="text-align:left">en</td>
<td style="text-align:left">CB</td>
</tr>
<tr>
<td style="text-align:left">æ¾³æ´²</td>
<td style="text-align:left">è‹±è¯­</td>
<td style="text-align:left">en</td>
<td style="text-align:left">AU</td>
</tr>
<tr>
<td style="text-align:left">æ–°è¥¿å…°</td>
<td style="text-align:left">è‹±è¯­</td>
<td style="text-align:left">en</td>
<td style="text-align:left">NZ</td>
</tr>
<tr>
<td style="text-align:left">æ¯”åˆ©æ—¶</td>
<td style="text-align:left">æ³•è¯­</td>
<td style="text-align:left">fr</td>
<td style="text-align:left">BE</td>
</tr>
<tr>
<td style="text-align:left">è²å¾‹å®¾</td>
<td style="text-align:left">è‹±è¯­</td>
<td style="text-align:left">en</td>
<td style="text-align:left">PH</td>
</tr>
<tr>
<td style="text-align:left">ç‰™ä¹°åŠ </td>
<td style="text-align:left">è‹±è¯­</td>
<td style="text-align:left">en</td>
<td style="text-align:left">JM</td>
</tr>
<tr>
<td style="text-align:left">ä¼¯åˆ©å…¹</td>
<td style="text-align:left">è‹±è¯­</td>
<td style="text-align:left">en</td>
<td style="text-align:left">BZ</td>
</tr>
<tr>
<td style="text-align:left">åƒé‡Œè¾¾æ‰˜è´å“¥å…±å’Œå›½è‹±è¯­</td>
<td style="text-align:left"></td>
<td style="text-align:left">en</td>
<td style="text-align:left">TT</td>
</tr>
<tr>
<td style="text-align:left">æ´¥å·´å¸ƒéŸ¦</td>
<td style="text-align:left">è‹±è¯­</td>
<td style="text-align:left">en</td>
<td style="text-align:left">ZW</td>
</tr>
<tr>
<td style="text-align:left">çˆ±æ²™å°¼äºš</td>
<td style="text-align:left">çˆ±æ²™å°¼äºš</td>
<td style="text-align:left">et</td>
<td style="text-align:left">EE</td>
</tr>
<tr>
<td style="text-align:left">æ³•ç½—ç¾¤å²›</td>
<td style="text-align:left">æ³•ç½—è¯­(Faroese)</td>
<td style="text-align:left">fo</td>
<td style="text-align:left">FO</td>
</tr>
<tr>
<td style="text-align:left">æ‘©çº³å“¥</td>
<td style="text-align:left">æ³•è¯­</td>
<td style="text-align:left">fr</td>
<td style="text-align:left">MC</td>
</tr>
<tr>
<td style="text-align:left">è¥¿ç­ç‰™</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">ES</td>
</tr>
<tr>
<td style="text-align:left">é˜¿æ ¹å»·</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">AR</td>
</tr>
<tr>
<td style="text-align:left">å¢¨è¥¿å“¥</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">MX</td>
</tr>
<tr>
<td style="text-align:left">ç»åˆ©ç»´äºš</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">BO</td>
</tr>
<tr>
<td style="text-align:left">æ™ºåˆ©</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">CL</td>
</tr>
<tr>
<td style="text-align:left">å·´æ‹¿é©¬</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">PA</td>
</tr>
<tr>
<td style="text-align:left">å§”å†…ç‘æ‹‰</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">VE</td>
</tr>
<tr>
<td style="text-align:left">å“¥ä¼¦æ¯”äºš</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">CO</td>
</tr>
<tr>
<td style="text-align:left">ç§˜é²</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">PE</td>
</tr>
<tr>
<td style="text-align:left">å“¥æ–¯è¾¾é»åŠ </td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">CR</td>
</tr>
<tr>
<td style="text-align:left">å¤šç±³å°¼åŠ å…±å’Œå›½</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">DO</td>
</tr>
<tr>
<td style="text-align:left">å„ç“œå¤šå°”</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">EC</td>
</tr>
<tr>
<td style="text-align:left">è¨å°”ç“¦å¤š</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">SV</td>
</tr>
<tr>
<td style="text-align:left">å±åœ°é©¬æ‹‰</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">GT</td>
</tr>
<tr>
<td style="text-align:left">æ´ªéƒ½æ‹‰æ–¯</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">HN</td>
</tr>
<tr>
<td style="text-align:left">å°¼åŠ æ‹‰ç“œ</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">NI</td>
</tr>
<tr>
<td style="text-align:left">å·´æ‹‰åœ­</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">PY</td>
</tr>
<tr>
<td style="text-align:left">æ³¢å¤šé»å„</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">PR</td>
</tr>
<tr>
<td style="text-align:left">ä¹Œæ‹‰åœ­</td>
<td style="text-align:left">è¥¿ç­ç‰™è¯­</td>
<td style="text-align:left">es</td>
<td style="text-align:left">UY</td>
</tr>
<tr>
<td style="text-align:left">å°åº¦</td>
<td style="text-align:left">å¦ç±³å°”è¯­</td>
<td style="text-align:left">ta</td>
<td style="text-align:left">IN</td>
</tr>
<tr>
<td style="text-align:left">å°åº¦</td>
<td style="text-align:left">å°åº¦è¯­(Gujarati)</td>
<td style="text-align:left">gu</td>
<td style="text-align:left">IN</td>
</tr>
<tr>
<td style="text-align:left">å°åº¦</td>
<td style="text-align:left">åŒ—å°åº¦è¯­</td>
<td style="text-align:left">hi</td>
<td style="text-align:left">IN</td>
</tr>
<tr>
<td style="text-align:left">å°åº¦</td>
<td style="text-align:left">å¡çº³è¾¾è¯­</td>
<td style="text-align:left">kn</td>
<td style="text-align:left">IN</td>
</tr>
<tr>
<td style="text-align:left">å°åº¦</td>
<td style="text-align:left">Konkani</td>
<td style="text-align:left">kok</td>
<td style="text-align:left">IN</td>
</tr>
<tr>
<td style="text-align:left">å°åº¦</td>
<td style="text-align:left">é©¬æ‹‰åœ°è¯­</td>
<td style="text-align:left">mr</td>
<td style="text-align:left">IN</td>
</tr>
<tr>
<td style="text-align:left">å°åº¦</td>
<td style="text-align:left">Punjab è¯­</td>
<td style="text-align:left">pa</td>
<td style="text-align:left">IN</td>
</tr>
<tr>
<td style="text-align:left">å°åº¦</td>
<td style="text-align:left">æ¢µæ–‡</td>
<td style="text-align:left">sa</td>
<td style="text-align:left">IN</td>
</tr>
<tr>
<td style="text-align:left">å°åº¦</td>
<td style="text-align:left">å°åº¦ Telugu è¯­</td>
<td style="text-align:left">te</td>
<td style="text-align:left">IN</td>
</tr>
<tr>
<td style="text-align:left">æŒªå¨</td>
<td style="text-align:left">æŒªå¨</td>
<td style="text-align:left">nb</td>
<td style="text-align:left">NO</td>
</tr>
<tr>
<td style="text-align:left">æŒªå¨</td>
<td style="text-align:left">æŒªå¨(Nynorsk)</td>
<td style="text-align:left">nn</td>
<td style="text-align:left">NO</td>
</tr>
<tr>
<td style="text-align:left">æ³¢å…°</td>
<td style="text-align:left">æ³¢å…°</td>
<td style="text-align:left">pl</td>
<td style="text-align:left">PL</td>
</tr>
<tr>
<td style="text-align:left">å·´è¥¿</td>
<td style="text-align:left">è‘¡è„ç‰™è¯­</td>
<td style="text-align:left">pt</td>
<td style="text-align:left">BR</td>
</tr>
<tr>
<td style="text-align:left">è‘¡è„ç‰™</td>
<td style="text-align:left">è‘¡è„ç‰™è¯­</td>
<td style="text-align:left">pt</td>
<td style="text-align:left">PT</td>
</tr>
<tr>
<td style="text-align:left">è¶Šå—</td>
<td style="text-align:left">è¶Šå—è¯­</td>
<td style="text-align:left">vi</td>
<td style="text-align:left">VN</td>
</tr>
<tr>
<td style="text-align:left">æ³°å›½</td>
<td style="text-align:left">æ³°è¯­</td>
<td style="text-align:left">th</td>
<td style="text-align:left">TH</td>
</tr>
<tr>
<td style="text-align:left">å—é</td>
<td style="text-align:left">è‹±è¯­</td>
<td style="text-align:left">en</td>
<td style="text-align:left">ZA</td>
</tr>
<tr>
<td style="text-align:left">å—é</td>
<td style="text-align:left">å…¬ç”¨è·å…°è¯­</td>
<td style="text-align:left">af</td>
<td style="text-align:left">ZA</td>
</tr>
<tr>
<td style="text-align:left">ç™½ä¿„ç½—æ–¯</td>
<td style="text-align:left">ç™½ä¿„ç½—æ–¯è¯­(Belarusian)</td>
<td style="text-align:left">be</td>
<td style="text-align:left">BY</td>
</tr>
<tr>
<td style="text-align:left">ä¼Šæœ—ç‹å›½</td>
<td style="text-align:left">æ³¢æ–¯è¯­</td>
<td style="text-align:left">fa</td>
<td style="text-align:left">IR</td>
</tr>
<tr>
<td style="text-align:left">ä»¥è‰²åˆ—</td>
<td style="text-align:left">å¸Œä¼¯æ¥æ–‡</td>
<td style="text-align:left">he</td>
<td style="text-align:left">IL</td>
</tr>
<tr>
<td style="text-align:left">ä¸¹éº¦</td>
<td style="text-align:left">ä¸¹éº¦</td>
<td style="text-align:left">da</td>
<td style="text-align:left">DK</td>
</tr>
<tr>
<td style="text-align:left">é©¬å°”ä»£å¤«</td>
<td style="text-align:left">é©¬å°”ä»£å¤«(Dhivehi)</td>
<td style="text-align:left">div</td>
<td style="text-align:left">MV</td>
</tr>
<tr>
<td style="text-align:left">æ¯”åˆ©æ—¶</td>
<td style="text-align:left">è·å…°è¯­</td>
<td style="text-align:left">nl</td>
<td style="text-align:left">BE</td>
</tr>
<tr>
<td style="text-align:left">è·å…°</td>
<td style="text-align:left">è·å…°è¯­</td>
<td style="text-align:left">nl</td>
<td style="text-align:left">NL</td>
</tr>
<tr>
<td style="text-align:left">å¸Œè…Š</td>
<td style="text-align:left">å¸Œè…Š</td>
<td style="text-align:left">el</td>
<td style="text-align:left">GR</td>
</tr>
<tr>
<td style="text-align:left">æ²™ç‰¹é˜¿æ‹‰ä¼¯</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">SA</td>
</tr>
<tr>
<td style="text-align:left">åŸƒåŠ</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">EG</td>
</tr>
<tr>
<td style="text-align:left">ä¼Šæ‹‰å…‹</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">IQ</td>
</tr>
<tr>
<td style="text-align:left">çº¦æ—¦</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">JO</td>
</tr>
<tr>
<td style="text-align:left">ç§‘å¨ç‰¹</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">KW</td>
</tr>
<tr>
<td style="text-align:left">é»å·´å«©</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">LB</td>
</tr>
<tr>
<td style="text-align:left">åˆ©æ¯”äºš</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">LY</td>
</tr>
<tr>
<td style="text-align:left">å¡å¡”å°”</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">QA</td>
</tr>
<tr>
<td style="text-align:left">å™åˆ©äºšå…±å’Œå›½</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">SY</td>
</tr>
<tr>
<td style="text-align:left">å™åˆ©äºšå…±å’Œå›½</td>
<td style="text-align:left">å™åˆ©äºšè¯­(Syriac)</td>
<td style="text-align:left">syr</td>
<td style="text-align:left">SY</td>
</tr>
<tr>
<td style="text-align:left">ä¿åŠ åˆ©äºš</td>
<td style="text-align:left">ä¿åŠ åˆ©äºš</td>
<td style="text-align:left">bg</td>
<td style="text-align:left">BG</td>
</tr>
<tr>
<td style="text-align:left">é˜¿å°”å·´å°¼äºš</td>
<td style="text-align:left">é˜¿å°”å·´å°¼äºš</td>
<td style="text-align:left">sq</td>
<td style="text-align:left">AL</td>
</tr>
<tr>
<td style="text-align:left">é˜¿å°”åŠåˆ©äºš</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">DZ</td>
</tr>
<tr>
<td style="text-align:left">å·´æ—</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">BH</td>
</tr>
<tr>
<td style="text-align:left">æ‘©æ´›å“¥</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">MA</td>
</tr>
<tr>
<td style="text-align:left">é˜¿æ›¼</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">OM</td>
</tr>
<tr>
<td style="text-align:left">åŒ—éçš„å…±å’Œå›½</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">TN</td>
</tr>
<tr>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è”åˆé…‹é•¿å›½</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">AE</td>
</tr>
<tr>
<td style="text-align:left">ä¹Ÿé—¨</td>
<td style="text-align:left">é˜¿æ‹‰ä¼¯è¯­</td>
<td style="text-align:left">ar</td>
<td style="text-align:left">YE</td>
</tr>
<tr>
<td style="text-align:left">äºšç¾å°¼äºš</td>
<td style="text-align:left">äºšç¾å°¼äºšè¯­</td>
<td style="text-align:left">hy</td>
<td style="text-align:left">AM</td>
</tr>
<tr>
<td style="text-align:left">å·´æ–¯å…‹</td>
<td style="text-align:left">å·´æ–¯å…‹</td>
<td style="text-align:left">eu</td>
<td style="text-align:left">ES</td>
</tr>
<tr>
<td style="text-align:left">å˜‰æ³°ç½—å°¼äºš</td>
<td style="text-align:left">å˜‰æ³°ç½—å°¼äºš</td>
<td style="text-align:left">ca</td>
<td style="text-align:left">ES</td>
</tr>
<tr>
<td style="text-align:left">è‚¯å°¼äºš</td>
<td style="text-align:left">è‚¯å°¼äºš(Swahili)è¯­</td>
<td style="text-align:left">sw</td>
<td style="text-align:left">KE</td>
</tr>
<tr>
<td style="text-align:left">å…‹ç½—åŸƒè¥¿äºš</td>
<td style="text-align:left">å…‹ç½—åŸƒè¥¿äºš</td>
<td style="text-align:left">hr</td>
<td style="text-align:left">HR</td>
</tr>
<tr>
<td style="text-align:left">åŠ åˆ©è¥¿äºš</td>
<td style="text-align:left">åŠ åˆ©è¥¿äºš</td>
<td style="text-align:left">gl</td>
<td style="text-align:left">ES</td>
</tr>
<tr>
<td style="text-align:left">æ ¼é²å‰äºšå·</td>
<td style="text-align:left">æ ¼é²å‰äºšå·</td>
<td style="text-align:left">ka</td>
<td style="text-align:left">GE</td>
</tr>
<tr>
<td style="text-align:left">å“ˆè¨å…‹</td>
<td style="text-align:left">Kyrgyz</td>
<td style="text-align:left">ky</td>
<td style="text-align:left">KZ</td>
</tr>
<tr>
<td style="text-align:left">æ‹‰è„±ç»´äºš</td>
<td style="text-align:left">æ‹‰è„±ç»´äºš</td>
<td style="text-align:left">lv</td>
<td style="text-align:left">LV</td>
</tr>
<tr>
<td style="text-align:left">ç«‹é™¶å®›</td>
<td style="text-align:left">ç«‹é™¶å®›</td>
<td style="text-align:left">lt</td>
<td style="text-align:left">LT</td>
</tr>
<tr>
<td style="text-align:left">é©¬å…¶é¡¿</td>
<td style="text-align:left">é©¬å…¶é¡¿</td>
<td style="text-align:left">mk</td>
<td style="text-align:left">MK</td>
</tr>
<tr>
<td style="text-align:left">æ±¶è±</td>
<td style="text-align:left">é©¬æ¥è¯­</td>
<td style="text-align:left">ms</td>
<td style="text-align:left">BN</td>
</tr>
<tr>
<td style="text-align:left">é©¬æ¥è¥¿äºš</td>
<td style="text-align:left">é©¬æ¥è¥¿äºšè¯­</td>
<td style="text-align:left">ms</td>
<td style="text-align:left">MY</td>
</tr>
<tr>
<td style="text-align:left">è’™å¤</td>
<td style="text-align:left">è’™å¤</td>
<td style="text-align:left">mn</td>
<td style="text-align:left">MN</td>
</tr>
<tr>
<td style="text-align:left">ç½—é©¬å°¼äºš</td>
<td style="text-align:left">ç½—é©¬å°¼äºšè¯­</td>
<td style="text-align:left">ro</td>
<td style="text-align:left">RO</td>
</tr>
<tr>
<td style="text-align:left">å¡å°”ç»´äºš(è¥¿é‡Œå°”å­—æ¯çš„)</td>
<td style="text-align:left">sr-SP-Cyrl</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">å¡å°”(æ‹‰ä¸æ–‡)</td>
<td style="text-align:left">sr-SP-Latn</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">æ–¯æ´›ä¼å…‹</td>
<td style="text-align:left">æ–¯æ´›ä¼å…‹</td>
<td style="text-align:left">sk</td>
<td style="text-align:left">SK</td>
</tr>
<tr>
<td style="text-align:left">æ–¯æ´›æ–‡å°¼äºš</td>
<td style="text-align:left">æ–¯æ´›æ–‡å°¼äºš</td>
<td style="text-align:left">sl</td>
<td style="text-align:left">SI</td>
</tr>
<tr>
<td style="text-align:left">ä¹Œå…¹åˆ«å…‹</td>
<td style="text-align:left">ä¹Œå…¹åˆ«å…‹(è¥¿é‡Œå°”å­—æ¯çš„)</td>
<td style="text-align:left">uz</td>
<td style="text-align:left">uz-UZ-Cyrl</td>
</tr>
<tr>
<td style="text-align:left">ä¹Œå…¹åˆ«å…‹</td>
<td style="text-align:left">ä¹Œå…¹åˆ«å…‹(æ‹‰ä¸æ–‡çš„)</td>
<td style="text-align:left">uz</td>
<td style="text-align:left">UZ-Latn</td>
</tr>
<tr>
<td style="text-align:left">å¡æµ¦è·¯æ–¯</td>
<td style="text-align:left">å¸Œè…Šæ–‡</td>
<td style="text-align:left">el</td>
<td style="text-align:left">CY</td>
</tr>
<tr>
<td style="text-align:left">è‹±è¯­(å…¨çƒ)</td>
<td style="text-align:left">en-WW</td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<blockquote>
<p>å†…å®¹è½¬è½½äº<a href="https://www.cnblogs.com/isdom/p/webclips009.html" target="_blank" rel="noopener">https://www.cnblogs.com/isdom/p/webclips009.html</a></p>
</blockquote>
<p>æ›´ä¸ºè¯¦ç»†çš„ä¸€ä¸ªè¡¨æ ¼ï¼š</p>
<table>
<thead>
<tr>
<th>Language</th>
<th>English Name</th>
<th>Chinese Name</th>
<th>Code</th>
<th>GB</th>
<th>ICS</th>
<th>JB</th>
<th>KK</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</td>
<td>Arabic(Israel)</td>
<td>é˜¿æ‹‰ä¼¯è¯­(ä»¥è‰²åˆ—)</td>
<td>ar_IL</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td></td>
<td>Arabic(Egypt)</td>
<td>é˜¿æ‹‰ä¼¯è¯­(åŸƒåŠ)</td>
<td>ar_EG</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td>ä¸­æ–‡</td>
<td>Chinese Simplified</td>
<td>ä¸­æ–‡ç®€ä½“</td>
<td>zh_TW</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td></td>
<td>Chinese Tradition</td>
<td>ä¸­æ–‡ç¹ä½“</td>
<td>zh_CN</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td></td>
<td>Chinese</td>
<td>ä¸­æ–‡(é¦™æ¸¯)</td>
<td>zh_HK</td>
<td>N</td>
<td>N</td>
<td>P</td>
<td>P</td>
</tr>
<tr>
<td>Nederlands</td>
<td>Dutch (Netherlands)</td>
<td>è·å…°è¯­</td>
<td>nl_NL</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td></td>
<td>Dutch (Netherlands)</td>
<td>è·å…°è¯­(æ¯”åˆ©æ—¶)</td>
<td>nl_BE</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td>English</td>
<td>English(United States)</td>
<td>è‹±è¯­(ç¾å›½)</td>
<td>en_US</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td></td>
<td>English(Australia)</td>
<td>è‹±è¯­(æ¾³å¤§åˆ©äºš)</td>
<td>en_AU</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td></td>
<td>English(Canada)</td>
<td>è‹±è¯­(åŠ æ‹¿å¤§)</td>
<td>en_CA</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td></td>
<td>English(India)</td>
<td>è‹±è¯­(å°åº¦)</td>
<td>en_IN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td></td>
<td>English(Ireland)</td>
<td>è‹±è¯­(çˆ±å°”å…°)</td>
<td>en_IE</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td></td>
<td>English(New Zealand)</td>
<td>è‹±è¯­(æ–°è¥¿å…°)</td>
<td>en_NZ</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td></td>
<td>English(Singapore)</td>
<td>è‹±è¯­(æ–°åŠ æ³¢)</td>
<td>en_SG</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td></td>
<td>English(South Africa)</td>
<td>è‹±è¯­(å—é)</td>
<td>en_ZA</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td></td>
<td>English(United Kingdom)</td>
<td>è‹±è¯­(è‹±å›½)</td>
<td>en_GB</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>Y</td>
</tr>
<tr>
<td>FranÃ§ais</td>
<td>French</td>
<td>æ³•è¯­</td>
<td>fr_FR</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td></td>
<td>French</td>
<td>æ³•è¯­(æ¯”åˆ©æ—¶)</td>
<td>fr_BE</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td></td>
<td>French</td>
<td>æ³•è¯­(åŠ æ‹¿å¤§)</td>
<td>fr_CA</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td></td>
<td>French</td>
<td>æ³•è¯­(ç‘å£«)</td>
<td>fr_CH</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td>Deutsch</td>
<td>German</td>
<td>å¾·è¯­</td>
<td>de_DE</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td></td>
<td>German</td>
<td>å¾·è¯­(åˆ—æ”¯æ•¦æ–¯ç™»)</td>
<td>de_LI</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td></td>
<td>German</td>
<td>å¾·è¯­(å¥¥åœ°åˆ©)</td>
<td>de_AT</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>Y</td>
</tr>
<tr>
<td></td>
<td>German</td>
<td>å¾·è¯­(ç‘å£«)</td>
<td>de_CH</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td>Italiano</td>
<td>Italian</td>
<td>æ„å¤§åˆ©è¯­</td>
<td>it_IT</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td></td>
<td>Italian</td>
<td>æ„å¤§åˆ©è¯­(ç‘å£«)</td>
<td>it_CH</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td>ProtuguÃªs</td>
<td>Portuguese</td>
<td>è‘¡è„ç‰™è¯­ï¼ˆå·´è¥¿ï¼‰</td>
<td>pt_BR</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td></td>
<td>Portuguese</td>
<td>è‘¡è„ç‰™è¯­</td>
<td>pt_PT</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>EspaÃ±ol</td>
<td>Spanish</td>
<td>è¥¿ç­ç‰™è¯­</td>
<td>es_ES</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td></td>
<td>Spanish</td>
<td>è¥¿ç­ç‰™è¯­(ç¾å›½)</td>
<td>es_US</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>Y</td>
</tr>
<tr>
<td>à¦¬à¦¾à¦‚à¦²à¦¾</td>
<td>Bengali</td>
<td>å­ŸåŠ æ‹‰è¯­</td>
<td>bn_BD</td>
<td>Y</td>
<td>N</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td></td>
<td>Bengali</td>
<td>å­ŸåŠ æ‹‰è¯­(å°åº¦)</td>
<td>bn_IN</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>hrvatski</td>
<td>Croatian</td>
<td>å…‹ç½—åœ°äºšè¯­</td>
<td>hr_HR</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>Y</td>
</tr>
<tr>
<td>ÄeÅ¡tina</td>
<td>Czech</td>
<td>æ·å…‹è¯­</td>
<td>cs_CZ</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Dansk</td>
<td>Danish</td>
<td>ä¸¹éº¦è¯­</td>
<td>da_DK</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>Y</td>
</tr>
<tr>
<td>ÎµÎ»Î»Î·Î½Î¹ÎºÎ¬</td>
<td>Greek</td>
<td>å¸Œè…Šè¯­</td>
<td>el_GR</td>
<td>GD_MN</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>×¢×‘×¨×™×ª</td>
<td>Hebrew</td>
<td>å¸Œä¼¯æ¥è¯­(ä»¥è‰²åˆ—)</td>
<td>he_IL</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td></td>
<td>Hebrew</td>
<td>å¸Œä¼¯æ¥è¯­(ä»¥è‰²åˆ—)</td>
<td>iw_IL</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>à¤¹à¤¿à¤‚à¤¦à¥€</td>
<td>Hindi</td>
<td>å°åº¦è¯­</td>
<td>hi_IN</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Magyar</td>
<td>Hungarian</td>
<td>åŒˆç‰™åˆ©è¯­</td>
<td>hu_HU</td>
<td>GD_MN</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td></td>
<td>Indonesian</td>
<td>å°åº¦å°¼è¥¿äºšè¯­</td>
<td>in_ID</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>æ—¥æœ¬èªã®è¨€èª</td>
<td>Japanese</td>
<td>æ—¥è¯­</td>
<td>ja_JP</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>P</td>
</tr>
<tr>
<td>í•œêµ­ì˜</td>
<td>Korean</td>
<td>éŸ©è¯­ï¼ˆæœé²œè¯­ï¼‰</td>
<td>ko_KR</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Bahasa Melayu</td>
<td>Malay</td>
<td>é©¬æ¥è¯­</td>
<td>ms_MY</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>ÙØ§Ø±Ø³ÛŒ</td>
<td>Perisan</td>
<td>æ³¢æ–¯è¯­</td>
<td>fa_IR</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Polski</td>
<td>Polish</td>
<td>æ³¢å…°è¯­</td>
<td>pl_PL</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>Y</td>
</tr>
<tr>
<td>romÃ¢na</td>
<td>Romanian</td>
<td>ç½—é©¬å°¼äºšè¯­</td>
<td>ro_RO</td>
<td>GD_MN</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Ğ ÑƒÑÑĞºĞ¸Ğ¹</td>
<td>Russian</td>
<td>ä¿„ç½—æ–¯è¯­</td>
<td>ru_RU</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>ÑÑ€Ğ¿ÑĞºĞ¸</td>
<td>Serbian</td>
<td>å¡å°”ç»´äºšè¯­</td>
<td>sr_RS</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>P</td>
</tr>
<tr>
<td>Svenska</td>
<td>Swedish</td>
<td>ç‘å…¸è¯­</td>
<td>sv_SE</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>Y</td>
</tr>
<tr>
<td>à¹„à¸—à¸¢</td>
<td>Thai</td>
<td>æ³°è¯­</td>
<td>th_TH</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>TÃ¼rkÃ§e</td>
<td>Turkey</td>
<td>åœŸè€³å…¶è¯­</td>
<td>tr_TR</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Ø§Ø±Ø¯Ùˆ</td>
<td>Urdu</td>
<td>ä¹Œå°”éƒ½è¯­</td>
<td>ur_PK</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>tiáº¿ng viá»‡t</td>
<td>Vietnamese</td>
<td>è¶Šå—è¯­</td>
<td>vi_VN</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>catalÃ¡</td>
<td>Catalan</td>
<td>åŠ æ³°éš†è¯­(è¥¿ç­ç‰™)</td>
<td>ca_ES</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>P</td>
</tr>
<tr>
<td>latvieÅ¡u</td>
<td>Latviesu</td>
<td>æ‹‰è„±ç»´äºšè¯­</td>
<td>lv_LV</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>Y</td>
</tr>
<tr>
<td>LietuviÅ³</td>
<td>Lithuanian</td>
<td>ç«‹é™¶å®›è¯­</td>
<td>lt_LT</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>Y</td>
</tr>
<tr>
<td>Norsk bokmal</td>
<td>Norwegian</td>
<td>æŒªå¨è¯­</td>
<td>nb_NO</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>Y</td>
</tr>
<tr>
<td>SlovenÄina</td>
<td>slovencina</td>
<td>æ–¯æ´›ä¼å…‹è¯­</td>
<td>sk_SK</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>Y</td>
</tr>
<tr>
<td>SlovenÅ¡Äina</td>
<td>Slovenian</td>
<td>æ–¯æ´›æ–‡å°¼äºšè¯­</td>
<td>sl_SI</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>P</td>
</tr>
<tr>
<td>Ğ±ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸</td>
<td>bulgarian</td>
<td>ä¿åŠ åˆ©äºšè¯­</td>
<td>bg_BG</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>Y</td>
</tr>
<tr>
<td>ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</td>
<td>Ukrainian</td>
<td>ä¹Œå…‹å…°è¯­</td>
<td>uk_UA</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>Y</td>
</tr>
<tr>
<td>Tagalog</td>
<td>Filipino</td>
<td>è²å¾‹å®¾è¯­</td>
<td>tl_PH</td>
<td>GD_MN</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>Suomi</td>
<td>Finnish</td>
<td>èŠ¬å…°è¯­</td>
<td>fi_FI</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>P</td>
<td>Y</td>
</tr>
<tr>
<td>Afrikaans</td>
<td>Afrikaans</td>
<td>å—éè¯­</td>
<td>af_ZA</td>
<td>N</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td>Rumantsch</td>
<td>Romansh</td>
<td>ç½—æ›¼ä»€è¯­(ç‘å£«)</td>
<td>rm_CH</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td>á€—á€™á€¬</td>
<td>Burmese(Zawgyi)</td>
<td>ç¼…ç”¸è¯­(æ°‘é—´)</td>
<td>my_ZG</td>
<td>N</td>
<td>N</td>
<td>P</td>
<td>P</td>
</tr>
<tr>
<td></td>
<td>Burmese(Paduak)</td>
<td>ç¼…ç”¸è¯­(å®˜æ–¹)</td>
<td>my_MM</td>
<td>N</td>
<td>N</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>á˜áŸ‚áš</td>
<td>Khmer</td>
<td>æŸ¬åŸ”å¯¨è¯­</td>
<td>km_KH</td>
<td>N</td>
<td>N</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>áŠ áˆ›áˆ­áŠ›</td>
<td>Amharic</td>
<td>é˜¿å§†å“ˆæ‹‰è¯­(åŸƒå¡ä¿„æ¯”äºš)</td>
<td>am_ET</td>
<td>N</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td>Ğ±ĞµĞ»Ğ°Ñ€ÑƒÑĞºĞ°Ñ</td>
<td>Belarusian</td>
<td>ç™½ä¿„ç½—æ–¯è¯­</td>
<td>be_BY</td>
<td>N</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td>eesti</td>
<td>Estonian</td>
<td>çˆ±æ²™å°¼äºšè¯­</td>
<td>et_EE</td>
<td>N</td>
<td>GD_MN</td>
<td>P</td>
<td>P</td>
</tr>
<tr>
<td>Kiswahili</td>
<td>Swahili</td>
<td>æ–¯ç“¦å¸Œé‡Œè¯­(å¦æ¡‘å°¼äºš)</td>
<td>sw_TZ</td>
<td>N</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td>isiZulu</td>
<td>Zulu</td>
<td>ç¥–é²è¯­(å—é)</td>
<td>zu_ZA</td>
<td>N</td>
<td>GD_MN</td>
<td>GD_MN</td>
<td>GD_MN</td>
</tr>
<tr>
<td>azÉ™rbaycanca</td>
<td>Azerbaijani</td>
<td>é˜¿å¡æ‹œç–†è¯­</td>
<td>az_AZ</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>GD_MN</td>
</tr>
<tr>
<td>Õ€Õ¡ÕµÕ¥Ö€Õ§Õ¶</td>
<td>Armenian</td>
<td>äºšç¾å°¼äºšè¯­(äºšç¾å°¼äºš)</td>
<td>hy_AM</td>
<td>N</td>
<td>N</td>
<td>P</td>
<td>P</td>
</tr>
<tr>
<td>áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜</td>
<td>Georgian</td>
<td>æ ¼é²å‰äºšè¯­(æ ¼é²å‰äºš)</td>
<td>ka_GE</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>GD_MN</td>
</tr>
<tr>
<td>àº¥àº²àº§</td>
<td>Laotian</td>
<td>è€æŒè¯­(è€æŒ)</td>
<td>lo_LA</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>GD_MN</td>
</tr>
<tr>
<td>ĞœĞ¾Ğ½Ğ³Ğ¾Ğ»</td>
<td>Mongolian</td>
<td>è’™å¤è¯­</td>
<td>mn_MN</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>GD_MN</td>
</tr>
<tr>
<td>à¤¨à¥‡à¤ªà¤¾à¤²à¥€</td>
<td>Nepali</td>
<td>å°¼æ³Šå°”è¯­</td>
<td>ne_NP</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>GD_MN</td>
</tr>
<tr>
<td>Ò›Ğ°Ğ·Ğ°Ò› Ñ‚Ñ–Ğ»Ñ–</td>
<td>Kazakh</td>
<td>å“ˆè¨å…‹è¯­</td>
<td>kk_KZ</td>
<td>N</td>
<td>N</td>
<td>P</td>
<td>P</td>
</tr>
<tr>
<td>à·ƒà·’à¶‚à·„à¶½</td>
<td>Sinhala</td>
<td>åƒ§åŠ ç½—è¯­(æ–¯é‡Œå…°å¡)</td>
<td>si_LK</td>
<td>N</td>
<td>N</td>
<td>N</td>
<td>GD_MN</td>
</tr>
</tbody>
</table>
<blockquote>
<p>1ã€æ ‡è®°â€œNâ€è¡¨ç¤ºå½“å‰ç‰ˆæœ¬ä¸æ”¯æŒï¼›æ ‡è®°â€œYâ€è¡¨ç¤ºmtkã€googleå‡æ”¯æŒï¼›æ ‡è®°â€œGD_MNâ€è¡¨ç¤ºGoogleé»˜è®¤æ”¯æŒï¼ŒMTKä¸æ”¯æŒã€‚<br>2ã€å¯¹äºGD_MNï¼Œå¦‚æœè¦æ”¯æŒçš„è¯ï¼Œåªéœ€ç¿»è¯‘mtkæ–°å¢çš„éƒ¨åˆ†å­—ä¸²å°±è¡Œã€‚<br>3ã€å¦‚è‹¥æ‰“å¼€æˆ–è€…æ·»åŠ è¯­è¨€ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹FAQï¼Œ<br>   å¦‚ä½•æ‰“å¼€ä¸€ç§è¯­è¨€ï¼šFAQ04326<br>4ã€æ ‡è®°â€œPâ€æ˜¯mtkåé¢æ–°æ”¯æŒçš„ä¸€äº›è¯­è¨€,å¦‚æœè¦æ”¯æŒï¼Œå¯ä»¥é€šè¿‡PMSç³»ç»Ÿç›´æ¥ç”³è¯·Patchï¼ŒALPS01686452  æ”¯æŒé™¤æ°‘é—´ç¼…ç”¸è¯­ä»¥å¤–æ‰€æœ‰ç‰ˆæœ¬çš„å¤šå›½è¯­è¨€ï¼ˆè¿™ä¸ªPATCHçš„æ°‘é—´ç¼…ç”¸è¯­åªæ”¯æŒKK.MP1 , KK.MP6 , KK.MP7ï¼‰<br>5ã€å…³äºæ°‘é—´ç¼…ç”¸è¯­çš„æƒ…å†µ<br>ç›®å‰MTK JB3.MP,JB5.MP,JB9.MP,KK.MP1,KK.MP6å·²ç»å¯ä»¥æ”¯æŒZawgyiã€‚å¦‚æœéœ€è¦çš„è¯å¯ä»¥é€šè¿‡PMSç³»ç»Ÿç”³è¯·patch,è¯·æŒ‰ä»¥ä¸‹æ“ä½œï¼š<br>1).ç”³è¯·strings patch å’Œå­—åº“PATCH<br>   JBX:<br>      ALPS01561463<br>      ALPS01400558<br>      ALPS01444813<br>      ALPS01444868<br>KK.MP1 , KK.MP6 , KK.MP7<br>ALPS01686452<br>3).éœ€è¦æ³¨æ„çš„æ˜¯padauk(my_MM)å’Œzawgyi(my_ZG)ä¸èƒ½åŒæ—¶å¼€,åªèƒ½æ‰“å¼€ä¸€ä¸ª.<br>4)å¦‚æœé‡åˆ°è®¿é—®ä¸€äº›ç¼…ç”¸è¯­è¯­ç½‘ç«™æ—¶å‡ºç°å¤§é‡åœˆåœˆï¼Œå¯èƒ½æ˜¯è¯¥ç½‘ç«™æ˜¯æ°‘é—´ç¼…ç”¸è¯­ç½‘ç«™ï¼Œå¯ä»¥ç”³è¯·è¿™äº›patch</p>
</blockquote>
<p>æ‘˜æŠ„è‡ªï¼š<a href="https://blog.csdn.net/ouyang_peng/article/details/50209789" target="_blank" rel="noopener">https://blog.csdn.net/ouyang_peng/article/details/50209789</a></p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>i18n</tag>
      </tags>
  </entry>
  <entry>
    <title>ç½‘é¡µå¸ƒå±€ä¹‹Flexå¸ƒå±€</title>
    <url>/2019/12/14/%E7%BD%91%E9%A1%B5%E5%B8%83%E5%B1%80%E4%B9%8BFlex%E5%B8%83%E5%B1%80/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ç½‘é¡µå¸ƒå±€ï¼ˆlayoutï¼‰æ˜¯ CSS çš„ä¸€ä¸ªé‡ç‚¹åº”ç”¨ã€‚å¸ƒå±€çš„ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆï¼ŒåŸºäº<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/box_model" target="_blank" rel="noopener">ç›’çŠ¶æ¨¡å‹</a>ï¼Œä¾èµ– <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/display" target="_blank" rel="noopener"><code>display</code></a> å±æ€§ + <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/position" target="_blank" rel="noopener"><code>position</code></a>å±æ€§ + <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/float" target="_blank" rel="noopener"><code>float</code></a>å±æ€§ã€‚å®ƒå¯¹äºé‚£äº›ç‰¹æ®Šå¸ƒå±€éå¸¸ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚ï¼Œ<a href="https://css-tricks.com/centering-css-complete-guide/" target="_blank" rel="noopener">å‚ç›´å±…ä¸­</a>å°±ä¸å®¹æ˜“å®ç°ã€‚</p>
<a id="more"></a>
<p><img src="flexbg.png" alt></p>
<p>2009å¹´ï¼ŒW3C æå‡ºäº†ä¸€ç§æ–°çš„æ–¹æ¡ˆâ€”-Flex å¸ƒå±€ï¼Œå¯ä»¥ç®€ä¾¿ã€å®Œæ•´ã€å“åº”å¼åœ°å®ç°å„ç§é¡µé¢å¸ƒå±€ã€‚ç›®å‰ï¼Œå®ƒå·²ç»å¾—åˆ°äº†æ‰€æœ‰æµè§ˆå™¨çš„æ”¯æŒï¼Œè¿™æ„å‘³ç€ï¼Œç°åœ¨å°±èƒ½å¾ˆå®‰å…¨åœ°ä½¿ç”¨è¿™é¡¹åŠŸèƒ½ã€‚</p>
<p><img src="caniuseflex.png" alt></p>
<h1 id="Flexå¸ƒå±€æ˜¯ä»€ä¹ˆ"><a href="#Flexå¸ƒå±€æ˜¯ä»€ä¹ˆ" class="headerlink" title="Flexå¸ƒå±€æ˜¯ä»€ä¹ˆ"></a>Flexå¸ƒå±€æ˜¯ä»€ä¹ˆ</h1><p>Flexæ˜¯Flexible Boxçš„ç¼©å†™ã€‚è¯‘ä¸ºâ€œå¼¹æ€§å¸ƒå±€â€ï¼Œç”¨æ¥ä½œä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚</p>
<p>ä»»ä½•ä¸€ä¸ªå®¹å™¨éƒ½å¯ä»¥æŒ‡å®šä¸ºFlexå¸ƒå±€ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¡Œå†…å…ƒç´ ä¹Ÿå¯ä»¥ä½¿ç”¨Flexå¸ƒå±€ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Webkitå†…æ ¸çš„æµè§ˆå™¨ï¼Œå¿…é¡»åŠ ä¸Š<code>-webkit</code>å‰ç¼€ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼Œè®¾ä¸º Flex å¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„<code>float</code>ã€<code>clear</code>å’Œ<code>vertical-align</code>å±æ€§å°†å¤±æ•ˆã€‚</p>
</blockquote>
<h1 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h1><p>é‡‡ç”¨ Flex å¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸º Flex å®¹å™¨ï¼ˆflex containerï¼‰ï¼Œç®€ç§°â€å®¹å™¨â€ã€‚å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸º Flex é¡¹ç›®ï¼ˆflex itemï¼‰ï¼Œç®€ç§°â€é¡¹ç›®â€ã€‚</p>
<p>æˆ‘ä»¬æŠŠä¸€ä¸ªå®¹å™¨çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/display" target="_blank" rel="noopener"><code>display</code></a> å±æ€§å€¼æ”¹ä¸º <code>flex</code> æˆ–è€… <code>inline-flex</code> å®Œæˆè¿™ä¸€æ­¥ä¹‹åï¼Œå®¹å™¨ä¸­çš„ç›´ç³»å­å…ƒç´ å°±ä¼šå˜ä¸º <strong>flex å…ƒç´ </strong>ã€‚æ‰€æœ‰CSSå±æ€§éƒ½ä¼šæœ‰ä¸€ä¸ªåˆå§‹å€¼ï¼Œæ‰€ä»¥ flex å®¹å™¨ä¸­çš„æ‰€æœ‰ flex å…ƒç´ éƒ½ä¼šæœ‰ä¸‹åˆ—è¡Œä¸ºï¼š</p>
<ul>
<li>å…ƒç´ æ’åˆ—ä¸ºä¸€è¡Œ (<code>flex-direction</code> å±æ€§çš„åˆå§‹å€¼æ˜¯ <code>row</code>)ã€‚</li>
<li>å…ƒç´ ä»ä¸»è½´çš„èµ·å§‹çº¿å¼€å§‹ã€‚</li>
<li>å…ƒç´ ä¸ä¼šåœ¨ä¸»ç»´åº¦æ–¹å‘æ‹‰ä¼¸ï¼Œä½†æ˜¯å¯ä»¥ç¼©å°ã€‚</li>
<li>å…ƒç´ è¢«æ‹‰ä¼¸æ¥å¡«å……äº¤å‰è½´å¤§å°ã€‚</li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/flex-basis" target="_blank" rel="noopener"><code>flex-basis</code></a> å±æ€§ä¸º <code>autoã€‚</code></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/flex-wrap" target="_blank" rel="noopener"><code>flex-wrap</code></a> å±æ€§ä¸º <code>nowrapã€‚</code></li>
</ul>
<p>å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šä¸»è½´å’Œäº¤å‰è½´ã€‚ä¸»è½´ç”± <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/flex-direction" target="_blank" rel="noopener"><code>flex-direction</code></a> å®šä¹‰ï¼Œå¦ä¸€æ ¹è½´å‚ç›´äºå®ƒã€‚è€ŒFlexboxçš„æ‰€æœ‰å±æ€§éƒ½ä¸è¿™ä¸¤æ ¹ä¸»è½´æœ‰å…³ã€‚</p>
<h2 id="ä¸»è½´"><a href="#ä¸»è½´" class="headerlink" title="ä¸»è½´"></a>ä¸»è½´</h2><p>ä¸»è½´ï¼ˆmain axisï¼‰ç”±<code>flex-direction</code>å®šä¹‰ï¼Œå¯ä»¥å–å››ä¸ªå€¼ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flex-direction: column | column-reverse | row | row-reverse;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é€‰æ‹©äº† <code>row</code> æˆ–è€… <code>row-reverse</code>ï¼Œä½ çš„ä¸»è½´å°†æ²¿ç€ <strong>inline</strong> æ–¹å‘å»¶ä¼¸ã€‚</p>
<p>é€‰æ‹© <code>column</code> æˆ–è€… <code>column-reverse</code> æ—¶ï¼Œä½ çš„ä¸»è½´ä¼šæ²¿ç€ä¸Šä¸‹æ–¹å‘å»¶ä¼¸ â€” ä¹Ÿå°±æ˜¯ <strong>block æ’åˆ—çš„æ–¹å‘ã€‚</strong></p>
</blockquote>
<h2 id="äº¤å‰è½´"><a href="#äº¤å‰è½´" class="headerlink" title="äº¤å‰è½´"></a>äº¤å‰è½´</h2><p>äº¤å‰è½´ï¼ˆcross axisï¼‰å‚ç›´äºä¸»è½´</p>
<blockquote>
<p><code>flex-direction</code> (ä¸»è½´) è®¾æˆäº† <code>row</code> æˆ–è€… <code>row-reverse</code> çš„è¯ï¼Œäº¤å‰è½´çš„æ–¹å‘å°±æ˜¯æ²¿ç€åˆ—å‘ä¸‹çš„ã€‚</p>
<p>ä¸»è½´æ–¹å‘è®¾æˆäº† <code>column</code> æˆ–è€… <code>column-reverse</code>ï¼Œäº¤å‰è½´å°±æ˜¯æ°´å¹³æ–¹å‘ã€‚</p>
</blockquote>
<h2 id="èµ·å§‹çº¿å’Œç»ˆæ­¢çº¿"><a href="#èµ·å§‹çº¿å’Œç»ˆæ­¢çº¿" class="headerlink" title="èµ·å§‹çº¿å’Œç»ˆæ­¢çº¿"></a>èµ·å§‹çº¿å’Œç»ˆæ­¢çº¿</h2><p>ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆä¸è¾¹æ¡†çš„äº¤å‰ç‚¹ï¼‰å«åš<code>main start</code>ï¼Œç»“æŸä½ç½®å«åš<code>main end</code>ï¼›äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åš<code>cross start</code>ï¼Œç»“æŸä½ç½®å«åš<code>cross end</code>ã€‚</p>
<p>é¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åš<code>main size</code>ï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åš<code>cross size</code>ã€‚</p>
<p><img src="axis.png" alt></p>
<h1 id="å®¹å™¨çš„å±æ€§"><a href="#å®¹å™¨çš„å±æ€§" class="headerlink" title="å®¹å™¨çš„å±æ€§"></a>å®¹å™¨çš„å±æ€§</h1><p>ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨å®¹å™¨ä¸Šã€‚</p>
<ul>
<li>flex-direction</li>
<li>flex-wrap</li>
<li>flex-flow</li>
<li>justify-content</li>
<li>align-items</li>
<li>align-content</li>
</ul>
<h2 id="flex-directionå±æ€§"><a href="#flex-directionå±æ€§" class="headerlink" title="flex-directionå±æ€§"></a>flex-directionå±æ€§</h2><p><code>flex-direction</code>å±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³é¡¹ç›®çš„æ’åˆ—æ–¹å‘ï¼‰ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flex-direction: row | row-reverse | column | column-reverse;</span><br></pre></td></tr></table></figure>
<p>å®ƒå¯èƒ½å–å››ä¸ªå€¼ï¼š</p>
<ul>
<li><code>row</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å·¦ç«¯ã€‚</li>
<li><code>row-reverse</code>ï¼šä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å³ç«¯ã€‚</li>
<li><code>column</code>ï¼šä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸Šæ²¿ã€‚</li>
<li><code>column-reverse</code>ï¼šä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸‹æ²¿ã€‚</li>
</ul>
<p><img src="flexdirection.png" alt></p>
<h2 id="flex-wrapå±æ€§"><a href="#flex-wrapå±æ€§" class="headerlink" title="flex-wrapå±æ€§"></a>flex-wrapå±æ€§</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé¡¹ç›®éƒ½æ’åœ¨ä¸€æ¡çº¿ï¼ˆåˆç§°â€è½´çº¿â€ï¼‰ä¸Šã€‚<code>flex-wrap</code>å±æ€§å®šä¹‰ï¼Œå¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flex-wrap: nowrap | wrap | wrap-reverse;</span><br></pre></td></tr></table></figure>
<p>å®ƒå¯èƒ½å–ä¸‰ä¸ªå€¼ï¼š</p>
<ul>
<li><code>nowrap</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä¸æ¢è¡Œã€‚</li>
<li><code>wrap</code>ï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹ã€‚</li>
<li><code>wrap-reverse</code>ï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹ã€‚</li>
</ul>
<p><img src="flexwrap.png" alt></p>
<h2 id="flex-flowå±æ€§"><a href="#flex-flowå±æ€§" class="headerlink" title="flex-flowå±æ€§"></a>flex-flowå±æ€§</h2><p><code>flex-flow</code>å±æ€§æ˜¯<code>flex-direction</code>å±æ€§å’Œ<code>flex-wrap</code>å±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸º<code>row nowrap</code>ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flex-flow: &lt;flex-direction&gt; || &lt;flex-wrap&gt;;</span><br></pre></td></tr></table></figure>
<h2 id="justify-contentå±æ€§"><a href="#justify-contentå±æ€§" class="headerlink" title="justify-contentå±æ€§"></a>justify-contentå±æ€§</h2><p><code>justify-content</code>å±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">justify-content: flex-start | flex-end | center | space-between | space-around;</span><br></pre></td></tr></table></figure>
<p>å®ƒå¯èƒ½å–5ä¸ªå€¼ï¼Œå…·ä½“å¯¹é½æ–¹å¼ä¸è½´çš„æ–¹å‘æœ‰å…³ã€‚</p>
<ul>
<li><code>flex-start</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šä¸»è½´çš„èµ·ç‚¹å¯¹é½</li>
<li><code>flex-end</code>ï¼šä¸»è½´çš„ç»ˆç‚¹å¯¹é½</li>
<li><code>center</code>ï¼š ä¸»è½´çš„ä¸­ç‚¹å¯¹é½</li>
<li><code>space-between</code>ï¼šä¸»è½´ä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”éƒ½ç›¸ç­‰ã€‚</li>
<li><code>space-around</code>ï¼šæ¯ä¸ªé¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”æ¯”é¡¹ç›®ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ã€‚</li>
</ul>
<p><img src="justifycontent.png" alt></p>
<h2 id="align-itemså±æ€§"><a href="#align-itemså±æ€§" class="headerlink" title="align-itemså±æ€§"></a>align-itemså±æ€§</h2><p><code>align-items</code>å±æ€§å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">align-items: flex-start | flex-end | center | baseline | stretch;</span><br></pre></td></tr></table></figure>
<p>å®ƒå¯èƒ½å–5ä¸ªå€¼ã€‚å…·ä½“çš„å¯¹é½æ–¹å¼ä¸äº¤å‰è½´çš„æ–¹å‘æœ‰å…³ï¼Œä¸‹é¢å‡è®¾äº¤å‰è½´ä»ä¸Šåˆ°ä¸‹ã€‚</p>
<ul>
<li><code>flex-start</code>ï¼šäº¤å‰è½´çš„èµ·ç‚¹å¯¹é½ã€‚</li>
<li><code>flex-end</code>ï¼šäº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½ã€‚</li>
<li><code>center</code>ï¼šäº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½ã€‚</li>
<li><code>baseline</code>: é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½ã€‚</li>
<li><code>stretch</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ã€‚</li>
</ul>
<p><img src="alignitems.png" alt></p>
<h2 id="align-contentå±æ€§"><a href="#align-contentå±æ€§" class="headerlink" title="align-contentå±æ€§"></a>align-contentå±æ€§</h2><p><code>align-content</code>å±æ€§å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ã€‚å¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚</p>
<p>å³è¯¥å±æ€§å¯¹å•è¡Œå¼¹æ€§ç›’å­æ¨¡å‹æ— æ•ˆã€‚ï¼ˆå³ï¼šå¸¦æœ‰ <code>flex-wrap: nowrap</code>ï¼‰ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">align-content: flex-start | flex-end | center | space-between | space-around | stretch;</span><br></pre></td></tr></table></figure>
<p>è¯¥å±æ€§å¯èƒ½å–6ä¸ªå€¼ã€‚</p>
<ul>
<li><code>flex-start</code>ï¼šä¸äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½ã€‚</li>
<li><code>flex-end</code>ï¼šä¸äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½ã€‚</li>
<li><code>center</code>ï¼šä¸äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½ã€‚</li>
<li><code>space-between</code>ï¼šä¸äº¤å‰è½´ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒã€‚</li>
<li><code>space-around</code>ï¼šæ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”æ¯”è½´çº¿ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ã€‚</li>
<li><code>stretch</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šè½´çº¿å æ»¡æ•´ä¸ªäº¤å‰è½´ã€‚</li>
</ul>
<p><img src="aligncontent.png" alt></p>
<h1 id="é¡¹ç›®çš„å±æ€§"><a href="#é¡¹ç›®çš„å±æ€§" class="headerlink" title="é¡¹ç›®çš„å±æ€§"></a>é¡¹ç›®çš„å±æ€§</h1><p>ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨é¡¹ç›®ä¸Šã€‚</p>
<ul>
<li><code>order</code></li>
<li><code>flex-grow</code></li>
<li><code>flex-shrink</code></li>
<li><code>flex-basis</code></li>
<li><code>flex</code></li>
<li><code>align-self</code></li>
</ul>
<h2 id="orderå±æ€§"><a href="#orderå±æ€§" class="headerlink" title="orderå±æ€§"></a>orderå±æ€§</h2><p><code>order</code>å±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">order</span>: &lt;<span class="selector-tag">integer</span>&gt;; <span class="comment">/* default 0 */</span></span><br></pre></td></tr></table></figure>
<p><img src="order.png" alt></p>
<h2 id="flex-growå±æ€§"><a href="#flex-growå±æ€§" class="headerlink" title="flex-growå±æ€§"></a>flex-growå±æ€§</h2><p><code>flex-grow</code>å±æ€§å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º<code>0</code>ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">flex-grow</span>: &lt;<span class="selector-tag">number</span>&gt;; <span class="comment">/* default 0 */</span></span><br></pre></td></tr></table></figure>
<p><img src="flexgrow.png" alt></p>
<p>å¦‚æœæ‰€æœ‰é¡¹ç›®çš„<code>flex-grow</code>å±æ€§éƒ½ä¸º1ï¼Œåˆ™å®ƒä»¬å°†ç­‰åˆ†å‰©ä½™ç©ºé—´ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„<code>flex-grow</code>å±æ€§ä¸º2ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™å‰è€…å æ®çš„å‰©ä½™ç©ºé—´å°†æ¯”å…¶ä»–é¡¹å¤šä¸€å€ã€‚</p>
<h2 id="flex-shrinkå±æ€§"><a href="#flex-shrinkå±æ€§" class="headerlink" title="flex-shrinkå±æ€§"></a>flex-shrinkå±æ€§</h2><p><code>flex-shrink</code>å±æ€§å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">flex-shrink</span>: &lt;<span class="selector-tag">number</span>&gt;; <span class="comment">/* default 1 */</span></span><br></pre></td></tr></table></figure>
<p><img src="flexshrink.png" alt></p>
<p>å¦‚æœæ‰€æœ‰é¡¹ç›®çš„<code>flex-shrink</code>å±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„<code>flex-shrink</code>å±æ€§ä¸º0ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚</p>
<p>è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚</p>
<h2 id="flex-basiså±æ€§"><a href="#flex-basiså±æ€§" class="headerlink" title="flex-basiså±æ€§"></a>flex-basiså±æ€§</h2><p><code>flex-basis</code>å±æ€§å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼ˆmain sizeï¼‰ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼æ˜¯<code>auto</code>ï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flex-basis: &lt;length&gt; | auto; /* default auto */</span><br></pre></td></tr></table></figure>
<p>å®ƒå¯ä»¥è®¾ä¸ºè·Ÿ<code>width</code>æˆ–<code>height</code>å±æ€§ä¸€æ ·çš„å€¼ï¼ˆæ¯”å¦‚350pxï¼‰ï¼Œåˆ™é¡¹ç›®å°†å æ®å›ºå®šç©ºé—´ã€‚</p>
<h2 id="flexå±æ€§"><a href="#flexå±æ€§" class="headerlink" title="flexå±æ€§"></a>flexå±æ€§</h2><p><code>flex</code>å±æ€§æ˜¯<code>flex-grow</code>, <code>flex-shrink</code> å’Œ <code>flex-basis</code>çš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º<code>0 1 auto</code>ã€‚åä¸¤ä¸ªå±æ€§å¯é€‰ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">flex: none | [ &lt;'flex-grow'&gt; &lt;'flex-shrink'&gt;? || &lt;'flex-basis'&gt; ]</span><br></pre></td></tr></table></figure>
<p>è¯¥å±æ€§æœ‰ä¸¤ä¸ªå¿«æ·å€¼ï¼š<code>auto</code> (<code>1 1 auto</code>) å’Œ none (<code>0 0 auto</code>)ã€‚</p>
<p>å»ºè®®ä¼˜å…ˆä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œè€Œä¸æ˜¯å•ç‹¬å†™ä¸‰ä¸ªåˆ†ç¦»çš„å±æ€§ï¼Œå› ä¸ºæµè§ˆå™¨ä¼šæ¨ç®—ç›¸å…³å€¼ã€‚</p>
<h2 id="align-selfå±æ€§"><a href="#align-selfå±æ€§" class="headerlink" title="align-selfå±æ€§"></a>align-selfå±æ€§</h2><p><code>align-self</code>å±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–<code>align-items</code>å±æ€§ã€‚é»˜è®¤å€¼ä¸º<code>auto</code>ï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„<code>align-items</code>å±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäº<code>stretch</code>ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">align-self: auto | flex-start | flex-end | center | baseline | stretch;</span><br></pre></td></tr></table></figure>
<p>è¯¥å±æ€§å¯èƒ½å–6ä¸ªå€¼ï¼Œé™¤äº†autoï¼Œå…¶ä»–éƒ½ä¸align-itemså±æ€§å®Œå…¨ä¸€è‡´ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Box_Alignment/Box_Alignment_in_Flexbox" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Box_Alignment/Box_Alignment_in_Flexbox</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html</a></p>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>Flexå¸ƒå±€</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerå…¥é—¨ï¼ˆå…­ï¼‰â€”â€”Docker Compose</title>
    <url>/2019/12/11/Docker%E5%85%A5%E9%97%A8%EF%BC%88%E5%85%AD%EF%BC%89%E2%80%94%E2%80%94Docker-Compose/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Docker-Composeç®€ä»‹"><a href="#Docker-Composeç®€ä»‹" class="headerlink" title="Docker Composeç®€ä»‹"></a>Docker Composeç®€ä»‹</h1><p><code>Compose</code> é¡¹ç›®æ˜¯ Docker å®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œè´Ÿè´£å®ç°å¯¹ Docker å®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æ’ã€‚å…¶ä»£ç ç›®å‰åœ¨ <a href="https://github.com/docker/compose" target="_blank" rel="noopener">https://github.com/docker/compose</a> ä¸Šå¼€æºã€‚</p>
<p><code>Compose</code> å®šä½æ˜¯ ã€Œå®šä¹‰å’Œè¿è¡Œå¤šä¸ª Docker å®¹å™¨çš„åº”ç”¨ï¼ˆDefining and running multi-container Docker applicationsï¼‰ã€ï¼Œå…¶å‰èº«æ˜¯å¼€æºé¡¹ç›® Figã€‚</p>
<a id="more"></a>
<p><code>Dockerfile</code> æ¨¡æ¿æ–‡ä»¶å¯ä»¥è®©ç”¨æˆ·å¾ˆæ–¹ä¾¿çš„å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„åº”ç”¨å®¹å™¨ã€‚ä½†æ˜¯åœ¨å¹³å¸¸ä½¿ç”¨ä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°éœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆæ¥å®ŒæˆæŸé¡¹ä»»åŠ¡çš„æƒ…å†µã€‚ä¾‹å¦‚è¦å®ç°ä¸€ä¸ª Web é¡¹ç›®ï¼Œé™¤äº† Web æœåŠ¡å®¹å™¨æœ¬èº«ï¼Œå¾€å¾€è¿˜éœ€è¦å†åŠ ä¸Šåç«¯çš„æ•°æ®åº“æœåŠ¡å®¹å™¨ï¼Œç”šè‡³è¿˜åŒ…æ‹¬è´Ÿè½½å‡è¡¡å®¹å™¨ç­‰ã€‚</p>
<p><code>Compose</code> æ°å¥½æ»¡è¶³äº†è¿™æ ·çš„éœ€æ±‚ã€‚å®ƒå…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ <code>docker-compose.yml</code> æ¨¡æ¿æ–‡ä»¶ï¼ˆYAML æ ¼å¼ï¼‰æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªé¡¹ç›®ï¼ˆprojectï¼‰ã€‚</p>
<p><strong><code>Compose</code> ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼š</strong></p>
<ul>
<li>æœåŠ¡ (<code>service</code>)ï¼šä¸€ä¸ªåº”ç”¨çš„å®¹å™¨ï¼Œå®é™…ä¸Šå¯ä»¥åŒ…æ‹¬è‹¥å¹²è¿è¡Œç›¸åŒé•œåƒçš„å®¹å™¨å®ä¾‹ã€‚</li>
<li>é¡¹ç›® (<code>project</code>)ï¼šç”±ä¸€ç»„å…³è”çš„åº”ç”¨å®¹å™¨ç»„æˆçš„ä¸€ä¸ªå®Œæ•´ä¸šåŠ¡å•å…ƒï¼Œåœ¨ <code>docker-compose.yml</code> æ–‡ä»¶ä¸­å®šä¹‰ã€‚</li>
</ul>
<p><code>Compose</code> çš„é»˜è®¤ç®¡ç†å¯¹è±¡æ˜¯é¡¹ç›®ï¼Œé€šè¿‡å­å‘½ä»¤å¯¹é¡¹ç›®ä¸­çš„ä¸€ç»„å®¹å™¨è¿›è¡Œä¾¿æ·åœ°ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<p><code>Compose</code> é¡¹ç›®ç”± Python ç¼–å†™ï¼Œå®ç°ä¸Šè°ƒç”¨äº† Docker æœåŠ¡æä¾›çš„ API æ¥å¯¹å®¹å™¨è¿›è¡Œç®¡ç†ã€‚å› æ­¤ï¼Œåªè¦æ‰€æ“ä½œçš„å¹³å°æ”¯æŒ Docker APIï¼Œå°±å¯ä»¥åœ¨å…¶ä¸Šåˆ©ç”¨ <code>Compose</code> æ¥è¿›è¡Œç¼–æ’ç®¡ç†ã€‚</p>
<h1 id="å®‰è£…ä¸å¸è½½"><a href="#å®‰è£…ä¸å¸è½½" class="headerlink" title="å®‰è£…ä¸å¸è½½"></a>å®‰è£…ä¸å¸è½½</h1><p><code>Compose</code> æ”¯æŒ Linuxã€macOSã€Windows 10 ä¸‰å¤§å¹³å°ã€‚</p>
<p><code>Compose</code> å¯ä»¥é€šè¿‡ Python çš„åŒ…ç®¡ç†å·¥å…· <code>pip</code> è¿›è¡Œå®‰è£…ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ä½¿ç”¨ï¼Œç”šè‡³èƒ½å¤Ÿç›´æ¥åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œã€‚</p>
<p><code>Docker Desktop for Mac/Windows</code> è‡ªå¸¦ <code>docker-compose</code> äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå®‰è£… Docker ä¹‹åå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker-compose --version</span><br><span class="line"></span><br><span class="line">docker-compose version 1.24.1, build 4667896b</span><br></pre></td></tr></table></figure>
<p>Linux ç³»ç»Ÿè¯·ä½¿ç”¨ä»¥ä¸‹ä»‹ç»çš„æ–¹æ³•å®‰è£…ã€‚</p>
<h2 id="äºŒè¿›åˆ¶åŒ…"><a href="#äºŒè¿›åˆ¶åŒ…" class="headerlink" title="äºŒè¿›åˆ¶åŒ…"></a>äºŒè¿›åˆ¶åŒ…</h2><p>åœ¨ Linux ä¸Šçš„ä¹Ÿå®‰è£…ååˆ†ç®€å•ï¼Œä» <a href="https://github.com/docker/compose/releases" target="_blank" rel="noopener">å®˜æ–¹ GitHub Release</a> å¤„ç›´æ¥ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶å³å¯ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ Linux 64 ä½ç³»ç»Ÿä¸Šç›´æ¥ä¸‹è½½å¯¹åº”çš„äºŒè¿›åˆ¶åŒ…ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo curl -L https://github.com/docker/compose/releases/download/1.24.1/docker-compose-`uname -s`-`uname -m` &gt; /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"></span><br><span class="line">$ sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure>
<h2 id="PIP-å®‰è£…"><a href="#PIP-å®‰è£…" class="headerlink" title="PIP å®‰è£…"></a>PIP å®‰è£…</h2><p><em>æ³¨ï¼š</em> <code>x86_64</code> æ¶æ„çš„ Linux å»ºè®®æŒ‰ç…§ä¸Šè¾¹çš„æ–¹æ³•ä¸‹è½½äºŒè¿›åˆ¶åŒ…è¿›è¡Œå®‰è£…ï¼Œå¦‚æœæ‚¨è®¡ç®—æœºçš„æ¶æ„æ˜¯ <code>ARM</code> (ä¾‹å¦‚ï¼Œæ ‘è“æ´¾)ï¼Œå†ä½¿ç”¨ <code>pip</code> å®‰è£…ã€‚</p>
<p>è¿™ç§æ–¹å¼æ˜¯å°† Compose å½“ä½œä¸€ä¸ª Python åº”ç”¨æ¥ä» pip æºä¸­å®‰è£…ã€‚</p>
<p>æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo pip install -U docker-compose</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹è¾“å‡ºï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Collecting docker-compose</span><br><span class="line">  Downloading docker-compose-1.24.1.tar.gz (149kB): 149kB downloaded</span><br><span class="line">...</span><br><span class="line">Successfully installed docker-compose cached-property requests texttable websocket-client docker-py dockerpty six enum34 backports.ssl-match-hostname ipaddress</span><br></pre></td></tr></table></figure>
<h2 id="bash-è¡¥å…¨å‘½ä»¤"><a href="#bash-è¡¥å…¨å‘½ä»¤" class="headerlink" title="bash è¡¥å…¨å‘½ä»¤"></a>bash è¡¥å…¨å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -L https://raw.githubusercontent.com/docker/compose/1.24.1/contrib/completion/bash/docker-compose &gt; /etc/bash_completion.d/docker-compose</span><br></pre></td></tr></table></figure>
<h2 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h2><p>å¦‚æœæ˜¯äºŒè¿›åˆ¶åŒ…æ–¹å¼å®‰è£…çš„ï¼Œåˆ é™¤äºŒè¿›åˆ¶æ–‡ä»¶å³å¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo rm /usr/<span class="built_in">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯é€šè¿‡ <code>pip</code> å®‰è£…çš„ï¼Œåˆ™æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯åˆ é™¤ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo pip uninstall docker-compose</span><br></pre></td></tr></table></figure>
<h1 id="Composeä½¿ç”¨"><a href="#Composeä½¿ç”¨" class="headerlink" title="Composeä½¿ç”¨"></a>Composeä½¿ç”¨</h1><h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>æœ€å¸¸è§çš„é¡¹ç›®æ˜¯ web ç½‘ç«™ï¼Œè¯¥é¡¹ç›®åº”è¯¥åŒ…å« web åº”ç”¨å’Œç¼“å­˜ã€‚</p>
<h2 id="Webåº”ç”¨"><a href="#Webåº”ç”¨" class="headerlink" title="Webåº”ç”¨"></a>Webåº”ç”¨</h2><p>æ–°å»ºæ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥ç›®å½•ä¸­ç¼–å†™ <code>app.py</code> æ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> Redis</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">redis = Redis(host=<span class="string">'redis'</span>, port=<span class="number">6379</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    count = redis.incr(<span class="string">'hits'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello World! è¯¥é¡µé¢å·²è¢«è®¿é—® &#123;&#125; æ¬¡ã€‚\n'</span>.format(count)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app.run(host=<span class="string">"0.0.0.0"</span>, debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><p>ç¼–å†™ <code>Dockerfile</code> æ–‡ä»¶ï¼Œå†…å®¹ä¸º</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> python:<span class="number">3.6</span>-alpine</span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> . /code</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /code</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip install redis flask</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"python"</span>, <span class="string">"app.py"</span>]</span></span><br></pre></td></tr></table></figure>
<h2 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h2><p>ç¼–å†™ <code>docker-compose.yml</code> æ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯ Compose ä½¿ç”¨çš„ä¸»æ¨¡æ¿æ–‡ä»¶ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">"5000:5000"</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">"redis:alpine"</span></span><br></pre></td></tr></table></figure>
<h2 id="è¿è¡Œcomposeé¡¹ç›®"><a href="#è¿è¡Œcomposeé¡¹ç›®" class="headerlink" title="è¿è¡Œcomposeé¡¹ç›®"></a>è¿è¡Œcomposeé¡¹ç›®</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker-compose up</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶è®¿é—®æœ¬åœ° <code>5000</code> ç«¯å£ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢ï¼Œè®¡æ•°å°±ä¼šåŠ  1ã€‚</p>
<h1 id="å‘½ä»¤è¯´æ˜"><a href="#å‘½ä»¤è¯´æ˜" class="headerlink" title="å‘½ä»¤è¯´æ˜"></a>å‘½ä»¤è¯´æ˜</h1><h2 id="å‘½ä»¤å¯¹è±¡ä¸æ ¼å¼"><a href="#å‘½ä»¤å¯¹è±¡ä¸æ ¼å¼" class="headerlink" title="å‘½ä»¤å¯¹è±¡ä¸æ ¼å¼"></a>å‘½ä»¤å¯¹è±¡ä¸æ ¼å¼</h2><p>å¯¹äº Compose æ¥è¯´ï¼Œå¤§éƒ¨åˆ†å‘½ä»¤çš„å¯¹è±¡æ—¢å¯ä»¥æ˜¯é¡¹ç›®æœ¬èº«ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸ºé¡¹ç›®ä¸­çš„æœåŠ¡æˆ–è€…å®¹å™¨ã€‚å¦‚æœæ²¡æœ‰ç‰¹åˆ«çš„è¯´æ˜ï¼Œå‘½ä»¤å¯¹è±¡å°†æ˜¯é¡¹ç›®ï¼Œè¿™æ„å‘³ç€é¡¹ç›®ä¸­æ‰€æœ‰çš„æœåŠ¡éƒ½ä¼šå—åˆ°å‘½ä»¤å½±å“ã€‚</p>
<p>æ‰§è¡Œ <code>docker-compose [COMMAND] --help</code> æˆ–è€… <code>docker-compose help [COMMAND]</code> å¯ä»¥æŸ¥çœ‹å…·ä½“æŸä¸ªå‘½ä»¤çš„ä½¿ç”¨æ ¼å¼ã€‚</p>
<p><code>docker-compose</code> å‘½ä»¤çš„åŸºæœ¬çš„ä½¿ç”¨æ ¼å¼æ˜¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker-compose [-f=&lt;arg&gt;...] [options] [COMMAND] [ARGS...]</span><br></pre></td></tr></table></figure>
<h2 id="å‘½ä»¤é€‰é¡¹"><a href="#å‘½ä»¤é€‰é¡¹" class="headerlink" title="å‘½ä»¤é€‰é¡¹"></a>å‘½ä»¤é€‰é¡¹</h2><ul>
<li><code>-f, --file FILE</code> æŒ‡å®šä½¿ç”¨çš„ Compose æ¨¡æ¿æ–‡ä»¶ï¼Œé»˜è®¤ä¸º <code>docker-compose.yml</code>ï¼Œå¯ä»¥å¤šæ¬¡æŒ‡å®šã€‚</li>
<li><code>-p, --project-name NAME</code> æŒ‡å®šé¡¹ç›®åç§°ï¼Œé»˜è®¤å°†ä½¿ç”¨æ‰€åœ¨ç›®å½•åç§°ä½œä¸ºé¡¹ç›®åã€‚</li>
<li><code>--x-networking</code> ä½¿ç”¨ Docker çš„å¯æ‹”æ’ç½‘ç»œåç«¯ç‰¹æ€§</li>
<li><code>--x-network-driver DRIVER</code> æŒ‡å®šç½‘ç»œåç«¯çš„é©±åŠ¨ï¼Œé»˜è®¤ä¸º <code>bridge</code></li>
<li><code>--verbose</code> è¾“å‡ºæ›´å¤šè°ƒè¯•ä¿¡æ¯ã€‚</li>
<li><code>-v, --version</code> æ‰“å°ç‰ˆæœ¬å¹¶é€€å‡ºã€‚</li>
</ul>
<h2 id="å‘½ä»¤ä½¿ç”¨è¯´æ˜"><a href="#å‘½ä»¤ä½¿ç”¨è¯´æ˜" class="headerlink" title="å‘½ä»¤ä½¿ç”¨è¯´æ˜"></a>å‘½ä»¤ä½¿ç”¨è¯´æ˜</h2><h3 id="build"><a href="#build" class="headerlink" title="build"></a><code>build</code></h3><p>æ ¼å¼ä¸º <code>docker-compose build [options] [SERVICE...]</code>ã€‚</p>
<p>æ„å»ºï¼ˆé‡æ–°æ„å»ºï¼‰é¡¹ç›®ä¸­çš„æœåŠ¡å®¹å™¨ã€‚</p>
<p>æœåŠ¡å®¹å™¨ä¸€æ—¦æ„å»ºåï¼Œå°†ä¼šå¸¦ä¸Šä¸€ä¸ªæ ‡è®°åï¼Œä¾‹å¦‚å¯¹äº web é¡¹ç›®ä¸­çš„ä¸€ä¸ª db å®¹å™¨ï¼Œå¯èƒ½æ˜¯ web_dbã€‚</p>
<p>å¯ä»¥éšæ—¶åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ <code>docker-compose build</code> æ¥é‡æ–°æ„å»ºæœåŠ¡ã€‚</p>
<p>é€‰é¡¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>--force-rm</code> åˆ é™¤æ„å»ºè¿‡ç¨‹ä¸­çš„ä¸´æ—¶å®¹å™¨ã€‚</li>
<li><code>--no-cache</code> æ„å»ºé•œåƒè¿‡ç¨‹ä¸­ä¸ä½¿ç”¨ cacheï¼ˆè¿™å°†åŠ é•¿æ„å»ºè¿‡ç¨‹ï¼‰ã€‚</li>
<li><code>--pull</code> å§‹ç»ˆå°è¯•é€šè¿‡ pull æ¥è·å–æ›´æ–°ç‰ˆæœ¬çš„é•œåƒã€‚</li>
</ul>
<h3 id="config"><a href="#config" class="headerlink" title="config"></a><code>config</code></h3><p>éªŒè¯ Compose æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œè‹¥æ­£ç¡®åˆ™æ˜¾ç¤ºé…ç½®ï¼Œè‹¥æ ¼å¼é”™è¯¯æ˜¾ç¤ºé”™è¯¯åŸå› ã€‚</p>
<h3 id="down"><a href="#down" class="headerlink" title="down"></a><code>down</code></h3><p>æ­¤å‘½ä»¤å°†ä¼šåœæ­¢ <code>up</code> å‘½ä»¤æ‰€å¯åŠ¨çš„å®¹å™¨ï¼Œå¹¶ç§»é™¤ç½‘ç»œ</p>
<h3 id="exec"><a href="#exec" class="headerlink" title="exec"></a><code>exec</code></h3><p>è¿›å…¥æŒ‡å®šçš„å®¹å™¨ã€‚</p>
<h3 id="help"><a href="#help" class="headerlink" title="help"></a><code>help</code></h3><p>è·å¾—ä¸€ä¸ªå‘½ä»¤çš„å¸®åŠ©ã€‚</p>
<h3 id="images"><a href="#images" class="headerlink" title="images"></a><code>images</code></h3><p>åˆ—å‡º Compose æ–‡ä»¶ä¸­åŒ…å«çš„é•œåƒã€‚</p>
<h3 id="kill"><a href="#kill" class="headerlink" title="kill"></a><code>kill</code></h3><p>æ ¼å¼ä¸º <code>docker-compose kill [options] [SERVICE...]</code>ã€‚</p>
<p>é€šè¿‡å‘é€ <code>SIGKILL</code> ä¿¡å·æ¥å¼ºåˆ¶åœæ­¢æœåŠ¡å®¹å™¨ã€‚</p>
<p>æ”¯æŒé€šè¿‡ <code>-s</code> å‚æ•°æ¥æŒ‡å®šå‘é€çš„ä¿¡å·ï¼Œä¾‹å¦‚é€šè¿‡å¦‚ä¸‹æŒ‡ä»¤å‘é€ <code>SIGINT</code> ä¿¡å·ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker-compose <span class="built_in">kill</span> -s SIGINT</span><br></pre></td></tr></table></figure>
<h3 id="logs"><a href="#logs" class="headerlink" title="logs"></a><code>logs</code></h3><p>æ ¼å¼ä¸º <code>docker-compose logs [options] [SERVICE...]</code>ã€‚</p>
<p>æŸ¥çœ‹æœåŠ¡å®¹å™¨çš„è¾“å‡ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œdocker-compose å°†å¯¹ä¸åŒçš„æœåŠ¡è¾“å‡ºä½¿ç”¨ä¸åŒçš„é¢œè‰²æ¥åŒºåˆ†ã€‚å¯ä»¥é€šè¿‡ <code>--no-color</code> æ¥å…³é—­é¢œè‰²ã€‚</p>
<p>è¯¥å‘½ä»¤åœ¨è°ƒè¯•é—®é¢˜çš„æ—¶å€™ååˆ†æœ‰ç”¨ã€‚</p>
<h3 id="pause"><a href="#pause" class="headerlink" title="pause"></a><code>pause</code></h3><p>æ ¼å¼ä¸º <code>docker-compose pause [SERVICE...]</code>ã€‚</p>
<p>æš‚åœä¸€ä¸ªæœåŠ¡å®¹å™¨ã€‚</p>
<h3 id="port"><a href="#port" class="headerlink" title="port"></a><code>port</code></h3><p>æ ¼å¼ä¸º <code>docker-compose port [options] SERVICE PRIVATE_PORT</code>ã€‚</p>
<p>æ‰“å°æŸä¸ªå®¹å™¨ç«¯å£æ‰€æ˜ å°„çš„å…¬å…±ç«¯å£ã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>--protocol=proto</code> æŒ‡å®šç«¯å£åè®®ï¼Œtcpï¼ˆé»˜è®¤å€¼ï¼‰æˆ–è€… udpã€‚</li>
<li><code>--index=index</code> å¦‚æœåŒä¸€æœåŠ¡å­˜åœ¨å¤šä¸ªå®¹å™¨ï¼ŒæŒ‡å®šå‘½ä»¤å¯¹è±¡å®¹å™¨çš„åºå·ï¼ˆé»˜è®¤ä¸º 1ï¼‰ã€‚</li>
</ul>
<h3 id="ps"><a href="#ps" class="headerlink" title="ps"></a><code>ps</code></h3><p>æ ¼å¼ä¸º <code>docker-compose ps [options] [SERVICE...]</code>ã€‚</p>
<p>åˆ—å‡ºé¡¹ç›®ä¸­ç›®å‰çš„æ‰€æœ‰å®¹å™¨ã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>-q</code> åªæ‰“å°å®¹å™¨çš„ ID ä¿¡æ¯ã€‚</li>
</ul>
<h3 id="pull"><a href="#pull" class="headerlink" title="pull"></a><code>pull</code></h3><p>æ ¼å¼ä¸º <code>docker-compose pull [options] [SERVICE...]</code>ã€‚</p>
<p>æ‹‰å–æœåŠ¡ä¾èµ–çš„é•œåƒã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>--ignore-pull-failures</code> å¿½ç•¥æ‹‰å–é•œåƒè¿‡ç¨‹ä¸­çš„é”™è¯¯ã€‚</li>
</ul>
<h3 id="push"><a href="#push" class="headerlink" title="push"></a><code>push</code></h3><p>æ¨é€æœåŠ¡ä¾èµ–çš„é•œåƒåˆ° Docker é•œåƒä»“åº“ã€‚</p>
<h3 id="restart"><a href="#restart" class="headerlink" title="restart"></a><code>restart</code></h3><p>æ ¼å¼ä¸º <code>docker-compose restart [options] [SERVICE...]</code>ã€‚</p>
<p>é‡å¯é¡¹ç›®ä¸­çš„æœåŠ¡ã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>-t, --timeout TIMEOUT</code> æŒ‡å®šé‡å¯å‰åœæ­¢å®¹å™¨çš„è¶…æ—¶ï¼ˆé»˜è®¤ä¸º 10 ç§’ï¼‰ã€‚</li>
</ul>
<h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a><code>rm</code></h3><p>æ ¼å¼ä¸º <code>docker-compose rm [options] [SERVICE...]</code>ã€‚</p>
<p>åˆ é™¤æ‰€æœ‰ï¼ˆåœæ­¢çŠ¶æ€çš„ï¼‰æœåŠ¡å®¹å™¨ã€‚æ¨èå…ˆæ‰§è¡Œ <code>docker-compose stop</code> å‘½ä»¤æ¥åœæ­¢å®¹å™¨ã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>-f, --force</code> å¼ºåˆ¶ç›´æ¥åˆ é™¤ï¼ŒåŒ…æ‹¬éåœæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚ä¸€èˆ¬å°½é‡ä¸è¦ä½¿ç”¨è¯¥é€‰é¡¹ã€‚</li>
<li><code>-v</code> åˆ é™¤å®¹å™¨æ‰€æŒ‚è½½çš„æ•°æ®å·ã€‚</li>
</ul>
<h3 id="run"><a href="#run" class="headerlink" title="run"></a><code>run</code></h3><p>æ ¼å¼ä¸º <code>docker-compose run [options] [-p PORT...] [-e KEY=VAL...] SERVICE [COMMAND] [ARGS...]</code>ã€‚</p>
<p>åœ¨æŒ‡å®šæœåŠ¡ä¸Šæ‰§è¡Œä¸€ä¸ªå‘½ä»¤ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker-compose run ubuntu ping docker.com</span><br></pre></td></tr></table></figure>
<p>å°†ä¼šå¯åŠ¨ä¸€ä¸ª ubuntu æœåŠ¡å®¹å™¨ï¼Œå¹¶æ‰§è¡Œ <code>ping docker.com</code> å‘½ä»¤ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœå­˜åœ¨å…³è”ï¼Œåˆ™æ‰€æœ‰å…³è”çš„æœåŠ¡å°†ä¼šè‡ªåŠ¨è¢«å¯åŠ¨ï¼Œé™¤éè¿™äº›æœåŠ¡å·²ç»åœ¨è¿è¡Œä¸­ã€‚</p>
<p>è¯¥å‘½ä»¤ç±»ä¼¼å¯åŠ¨å®¹å™¨åè¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œç›¸å…³å·ã€é“¾æ¥ç­‰ç­‰éƒ½å°†ä¼šæŒ‰ç…§é…ç½®è‡ªåŠ¨åˆ›å»ºã€‚</p>
<p>ä¸¤ä¸ªä¸åŒç‚¹ï¼š</p>
<ul>
<li>ç»™å®šå‘½ä»¤å°†ä¼šè¦†ç›–åŸæœ‰çš„è‡ªåŠ¨è¿è¡Œå‘½ä»¤ï¼›</li>
<li>ä¸ä¼šè‡ªåŠ¨åˆ›å»ºç«¯å£ï¼Œä»¥é¿å…å†²çªã€‚</li>
</ul>
<p>å¦‚æœä¸å¸Œæœ›è‡ªåŠ¨å¯åŠ¨å…³è”çš„å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>--no-deps</code> é€‰é¡¹ï¼Œä¾‹å¦‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker-compose run --no-deps web python manage.py shell</span><br></pre></td></tr></table></figure>
<p>å°†ä¸ä¼šå¯åŠ¨ web å®¹å™¨æ‰€å…³è”çš„å…¶å®ƒå®¹å™¨ã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>-d</code> åå°è¿è¡Œå®¹å™¨ã€‚</li>
<li><code>--name NAME</code> ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåå­—ã€‚</li>
<li><code>--entrypoint CMD</code> è¦†ç›–é»˜è®¤çš„å®¹å™¨å¯åŠ¨æŒ‡ä»¤ã€‚</li>
<li><code>-e KEY=VAL</code> è®¾ç½®ç¯å¢ƒå˜é‡å€¼ï¼Œå¯å¤šæ¬¡ä½¿ç”¨é€‰é¡¹æ¥è®¾ç½®å¤šä¸ªç¯å¢ƒå˜é‡ã€‚</li>
<li><code>-u, --user=&quot;&quot;</code> æŒ‡å®šè¿è¡Œå®¹å™¨çš„ç”¨æˆ·åæˆ–è€… uidã€‚</li>
<li><code>--no-deps</code> ä¸è‡ªåŠ¨å¯åŠ¨å…³è”çš„æœåŠ¡å®¹å™¨ã€‚</li>
<li><code>--rm</code> è¿è¡Œå‘½ä»¤åè‡ªåŠ¨åˆ é™¤å®¹å™¨ï¼Œ<code>d</code> æ¨¡å¼ä¸‹å°†å¿½ç•¥ã€‚</li>
<li><code>-p, --publish=[]</code> æ˜ å°„å®¹å™¨ç«¯å£åˆ°æœ¬åœ°ä¸»æœºã€‚</li>
<li><code>--service-ports</code> é…ç½®æœåŠ¡ç«¯å£å¹¶æ˜ å°„åˆ°æœ¬åœ°ä¸»æœºã€‚</li>
<li><code>-T</code> ä¸åˆ†é…ä¼ª ttyï¼Œæ„å‘³ç€ä¾èµ– tty çš„æŒ‡ä»¤å°†æ— æ³•è¿è¡Œã€‚</li>
</ul>
<h3 id="scale"><a href="#scale" class="headerlink" title="scale"></a><code>scale</code></h3><p>æ ¼å¼ä¸º <code>docker-compose scale [options] [SERVICE=NUM...]</code>ã€‚</p>
<p>è®¾ç½®æŒ‡å®šæœåŠ¡è¿è¡Œçš„å®¹å™¨ä¸ªæ•°ã€‚</p>
<p>é€šè¿‡ <code>service=num</code> çš„å‚æ•°æ¥è®¾ç½®æ•°é‡ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker-compose scale web=3 db=2</span><br></pre></td></tr></table></figure>
<p>å°†å¯åŠ¨ 3 ä¸ªå®¹å™¨è¿è¡Œ web æœåŠ¡ï¼Œ2 ä¸ªå®¹å™¨è¿è¡Œ db æœåŠ¡ã€‚</p>
<p>ä¸€èˆ¬çš„ï¼Œå½“æŒ‡å®šæ•°ç›®å¤šäºè¯¥æœåŠ¡å½“å‰å®é™…è¿è¡Œå®¹å™¨ï¼Œå°†æ–°åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ï¼›åä¹‹ï¼Œå°†åœæ­¢å®¹å™¨ã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>-t, --timeout TIMEOUT</code> åœæ­¢å®¹å™¨æ—¶å€™çš„è¶…æ—¶ï¼ˆé»˜è®¤ä¸º 10 ç§’ï¼‰ã€‚</li>
</ul>
<h3 id="start"><a href="#start" class="headerlink" title="start"></a><code>start</code></h3><p>æ ¼å¼ä¸º <code>docker-compose start [SERVICE...]</code>ã€‚</p>
<p>å¯åŠ¨å·²ç»å­˜åœ¨çš„æœåŠ¡å®¹å™¨ã€‚</p>
<h3 id="stop"><a href="#stop" class="headerlink" title="stop"></a><code>stop</code></h3><p>æ ¼å¼ä¸º <code>docker-compose stop [options] [SERVICE...]</code>ã€‚</p>
<p>åœæ­¢å·²ç»å¤„äºè¿è¡ŒçŠ¶æ€çš„å®¹å™¨ï¼Œä½†ä¸åˆ é™¤å®ƒã€‚é€šè¿‡ <code>docker-compose start</code> å¯ä»¥å†æ¬¡å¯åŠ¨è¿™äº›å®¹å™¨ã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>-t, --timeout TIMEOUT</code> åœæ­¢å®¹å™¨æ—¶å€™çš„è¶…æ—¶ï¼ˆé»˜è®¤ä¸º 10 ç§’ï¼‰ã€‚</li>
</ul>
<h3 id="top"><a href="#top" class="headerlink" title="top"></a><code>top</code></h3><p>æŸ¥çœ‹å„ä¸ªæœåŠ¡å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹ã€‚</p>
<h3 id="unpause"><a href="#unpause" class="headerlink" title="unpause"></a><code>unpause</code></h3><p>æ ¼å¼ä¸º <code>docker-compose unpause [SERVICE...]</code>ã€‚</p>
<p>æ¢å¤å¤„äºæš‚åœçŠ¶æ€ä¸­çš„æœåŠ¡ã€‚</p>
<h3 id="up"><a href="#up" class="headerlink" title="up"></a><code>up</code></h3><p>æ ¼å¼ä¸º <code>docker-compose up [options] [SERVICE...]</code>ã€‚</p>
<p>è¯¥å‘½ä»¤ååˆ†å¼ºå¤§ï¼Œå®ƒå°†å°è¯•è‡ªåŠ¨å®ŒæˆåŒ…æ‹¬æ„å»ºé•œåƒï¼Œï¼ˆé‡æ–°ï¼‰åˆ›å»ºæœåŠ¡ï¼Œå¯åŠ¨æœåŠ¡ï¼Œå¹¶å…³è”æœåŠ¡ç›¸å…³å®¹å™¨çš„ä¸€ç³»åˆ—æ“ä½œã€‚</p>
<p>é“¾æ¥çš„æœåŠ¡éƒ½å°†ä¼šè¢«è‡ªåŠ¨å¯åŠ¨ï¼Œé™¤éå·²ç»å¤„äºè¿è¡ŒçŠ¶æ€ã€‚</p>
<p>å¯ä»¥è¯´ï¼Œå¤§éƒ¨åˆ†æ—¶å€™éƒ½å¯ä»¥ç›´æ¥é€šè¿‡è¯¥å‘½ä»¤æ¥å¯åŠ¨ä¸€ä¸ªé¡¹ç›®ã€‚</p>
<p>é»˜è®¤æƒ…å†µï¼Œ<code>docker-compose up</code> å¯åŠ¨çš„å®¹å™¨éƒ½åœ¨å‰å°ï¼Œæ§åˆ¶å°å°†ä¼šåŒæ—¶æ‰“å°æ‰€æœ‰å®¹å™¨çš„è¾“å‡ºä¿¡æ¯ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿è¿›è¡Œè°ƒè¯•ã€‚</p>
<p>å½“é€šè¿‡ <code>Ctrl-C</code> åœæ­¢å‘½ä»¤æ—¶ï¼Œæ‰€æœ‰å®¹å™¨å°†ä¼šåœæ­¢ã€‚</p>
<p>å¦‚æœä½¿ç”¨ <code>docker-compose up -d</code>ï¼Œå°†ä¼šåœ¨åå°å¯åŠ¨å¹¶è¿è¡Œæ‰€æœ‰çš„å®¹å™¨ã€‚ä¸€èˆ¬æ¨èç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨è¯¥é€‰é¡¹ã€‚</p>
<p>é»˜è®¤æƒ…å†µï¼Œå¦‚æœæœåŠ¡å®¹å™¨å·²ç»å­˜åœ¨ï¼Œ<code>docker-compose up</code> å°†ä¼šå°è¯•åœæ­¢å®¹å™¨ï¼Œç„¶åé‡æ–°åˆ›å»ºï¼ˆä¿æŒä½¿ç”¨ <code>volumes-from</code> æŒ‚è½½çš„å·ï¼‰ï¼Œä»¥ä¿è¯æ–°å¯åŠ¨çš„æœåŠ¡åŒ¹é… <code>docker-compose.yml</code> æ–‡ä»¶çš„æœ€æ–°å†…å®¹ã€‚å¦‚æœç”¨æˆ·ä¸å¸Œæœ›å®¹å™¨è¢«åœæ­¢å¹¶é‡æ–°åˆ›å»ºï¼Œå¯ä»¥ä½¿ç”¨ <code>docker-compose up --no-recreate</code>ã€‚è¿™æ ·å°†åªä¼šå¯åŠ¨å¤„äºåœæ­¢çŠ¶æ€çš„å®¹å™¨ï¼Œè€Œå¿½ç•¥å·²ç»è¿è¡Œçš„æœåŠ¡ã€‚å¦‚æœç”¨æˆ·åªæƒ³é‡æ–°éƒ¨ç½²æŸä¸ªæœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>docker-compose up --no-deps -d</code> æ¥é‡æ–°åˆ›å»ºæœåŠ¡å¹¶åå°åœæ­¢æ—§æœåŠ¡ï¼Œå¯åŠ¨æ–°æœåŠ¡ï¼Œå¹¶ä¸ä¼šå½±å“åˆ°å…¶æ‰€ä¾èµ–çš„æœåŠ¡ã€‚</p>
<p>é€‰é¡¹ï¼š</p>
<ul>
<li><code>-d</code> åœ¨åå°è¿è¡ŒæœåŠ¡å®¹å™¨ã€‚</li>
<li><code>--no-color</code> ä¸ä½¿ç”¨é¢œè‰²æ¥åŒºåˆ†ä¸åŒçš„æœåŠ¡çš„æ§åˆ¶å°è¾“å‡ºã€‚</li>
<li><code>--no-deps</code> ä¸å¯åŠ¨æœåŠ¡æ‰€é“¾æ¥çš„å®¹å™¨ã€‚</li>
<li><code>--force-recreate</code> å¼ºåˆ¶é‡æ–°åˆ›å»ºå®¹å™¨ï¼Œä¸èƒ½ä¸ <code>--no-recreate</code> åŒæ—¶ä½¿ç”¨ã€‚</li>
<li><code>--no-recreate</code> å¦‚æœå®¹å™¨å·²ç»å­˜åœ¨äº†ï¼Œåˆ™ä¸é‡æ–°åˆ›å»ºï¼Œä¸èƒ½ä¸ <code>--force-recreate</code> åŒæ—¶ä½¿ç”¨ã€‚</li>
<li><code>--no-build</code> ä¸è‡ªåŠ¨æ„å»ºç¼ºå¤±çš„æœåŠ¡é•œåƒã€‚</li>
<li><code>-t, --timeout TIMEOUT</code> åœæ­¢å®¹å™¨æ—¶å€™çš„è¶…æ—¶ï¼ˆé»˜è®¤ä¸º 10 ç§’ï¼‰ã€‚</li>
</ul>
<h3 id="version"><a href="#version" class="headerlink" title="version"></a><code>version</code></h3><p>æ ¼å¼ä¸º <code>docker-compose version</code>ã€‚</p>
<p>æ‰“å°ç‰ˆæœ¬ä¿¡æ¯ã€‚</p>
<h1 id="Composeæ¨¡ç‰ˆæ–‡ä»¶"><a href="#Composeæ¨¡ç‰ˆæ–‡ä»¶" class="headerlink" title="Composeæ¨¡ç‰ˆæ–‡ä»¶"></a>Composeæ¨¡ç‰ˆæ–‡ä»¶</h1><p>æ¨¡æ¿æ–‡ä»¶æ˜¯ä½¿ç”¨ <code>Compose</code> çš„æ ¸å¿ƒï¼Œæ¶‰åŠåˆ°çš„æŒ‡ä»¤å…³é”®å­—ä¹Ÿæ¯”è¾ƒå¤šã€‚ä½†å¤§å®¶ä¸ç”¨æ‹…å¿ƒï¼Œè¿™é‡Œé¢å¤§éƒ¨åˆ†æŒ‡ä»¤è·Ÿ <code>docker run</code> ç›¸å…³å‚æ•°çš„å«ä¹‰éƒ½æ˜¯ç±»ä¼¼çš„ã€‚</p>
<p>é»˜è®¤çš„æ¨¡æ¿æ–‡ä»¶åç§°ä¸º <code>docker-compose.yml</code>ï¼Œæ ¼å¼ä¸º YAML æ ¼å¼ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">examples/web</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"80:80"</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"/data"</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„æ¯ä¸ªæœåŠ¡éƒ½å¿…é¡»é€šè¿‡ <code>image</code> æŒ‡ä»¤æŒ‡å®šé•œåƒæˆ– <code>build</code> æŒ‡ä»¤ï¼ˆéœ€è¦ Dockerfileï¼‰ç­‰æ¥è‡ªåŠ¨æ„å»ºç”Ÿæˆé•œåƒã€‚</p>
<p>å¦‚æœä½¿ç”¨ <code>build</code> æŒ‡ä»¤ï¼Œåœ¨ <code>Dockerfile</code> ä¸­è®¾ç½®çš„é€‰é¡¹(ä¾‹å¦‚ï¼š<code>CMD</code>, <code>EXPOSE</code>, <code>VOLUME</code>, <code>ENV</code> ç­‰) å°†ä¼šè‡ªåŠ¨è¢«è·å–ï¼Œæ— éœ€åœ¨ <code>docker-compose.yml</code> ä¸­é‡å¤è®¾ç½®ã€‚</p>
<p>ä¸‹é¢åˆ†åˆ«ä»‹ç»å„ä¸ªæŒ‡ä»¤çš„ç”¨æ³•ã€‚</p>
<h2 id="build-1"><a href="#build-1" class="headerlink" title="build"></a><code>build</code></h2><p>æŒ‡å®š <code>Dockerfile</code> æ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼ˆå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œæˆ–è€…ç›¸å¯¹ docker-compose.yml æ–‡ä»¶çš„è·¯å¾„ï¼‰ã€‚ <code>Compose</code> å°†ä¼šåˆ©ç”¨å®ƒè‡ªåŠ¨æ„å»ºè¿™ä¸ªé•œåƒï¼Œç„¶åä½¿ç”¨è¿™ä¸ªé•œåƒã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./dir</span></span><br></pre></td></tr></table></figure>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>context</code> æŒ‡ä»¤æŒ‡å®š <code>Dockerfile</code> æ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚</p>
<p>ä½¿ç”¨ <code>dockerfile</code> æŒ‡ä»¤æŒ‡å®š <code>Dockerfile</code> æ–‡ä»¶åã€‚</p>
<p>ä½¿ç”¨ <code>arg</code> æŒ‡ä»¤æŒ‡å®šæ„å»ºé•œåƒæ—¶çš„å˜é‡ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./dir</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile-alternate</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="attr">buildno:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>cache_from</code> æŒ‡å®šæ„å»ºé•œåƒçš„ç¼“å­˜</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">cache_from:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">alpine:latest</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">corp/web_app:3.14</span></span><br></pre></td></tr></table></figure>
<h2 id="cap-add-cap-drop"><a href="#cap-add-cap-drop" class="headerlink" title="cap_add, cap_drop"></a><code>cap_add, cap_drop</code></h2><p>æŒ‡å®šå®¹å™¨çš„å†…æ ¸èƒ½åŠ›ï¼ˆcapacityï¼‰åˆ†é…ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè®©å®¹å™¨æ‹¥æœ‰æ‰€æœ‰èƒ½åŠ›å¯ä»¥æŒ‡å®šä¸ºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">cap_add:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ALL</span></span><br></pre></td></tr></table></figure>
<p>å»æ‰ NET_ADMIN èƒ½åŠ›å¯ä»¥æŒ‡å®šä¸ºï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">cap_drop:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">NET_ADMIN</span></span><br></pre></td></tr></table></figure>
<h2 id="command"><a href="#command" class="headerlink" title="command"></a><code>command</code></h2><p>è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">command:</span> <span class="string">echo</span> <span class="string">"hello world"</span></span><br></pre></td></tr></table></figure>
<h2 id="configs"><a href="#configs" class="headerlink" title="configs"></a><code>configs</code></h2><p>ä»…ç”¨äº <code>Swarm mode</code>ï¼Œè¯¦ç»†å†…å®¹è¯·æŸ¥çœ‹ <a href="https://yeasy.gitbooks.io/docker_practice/content/swarm_mode" target="_blank" rel="noopener"><code>Swarm mode</code></a> ä¸€èŠ‚ã€‚</p>
<h2 id="cgroup-parent"><a href="#cgroup-parent" class="headerlink" title="cgroup_parent"></a><code>cgroup_parent</code></h2><p>æŒ‡å®šçˆ¶ <code>cgroup</code> ç»„ï¼Œæ„å‘³ç€å°†ç»§æ‰¿è¯¥ç»„çš„èµ„æºé™åˆ¶ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåˆ›å»ºäº†ä¸€ä¸ª cgroup ç»„åç§°ä¸º <code>cgroups_1</code>ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">cgroup_parent:</span> <span class="string">cgroups_1</span></span><br></pre></td></tr></table></figure>
<h2 id="container-name"><a href="#container-name" class="headerlink" title="container_name"></a><code>container_name</code></h2><p>æŒ‡å®šå®¹å™¨åç§°ã€‚é»˜è®¤å°†ä¼šä½¿ç”¨ <code>é¡¹ç›®åç§°_æœåŠ¡åç§°_åºå·</code> è¿™æ ·çš„æ ¼å¼ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">container_name:</span> <span class="string">docker-web-container</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„: æŒ‡å®šå®¹å™¨åç§°åï¼Œè¯¥æœåŠ¡å°†æ— æ³•è¿›è¡Œæ‰©å±•ï¼ˆscaleï¼‰ï¼Œå› ä¸º Docker ä¸å…è®¸å¤šä¸ªå®¹å™¨å…·æœ‰ç›¸åŒçš„åç§°ã€‚</p>
</blockquote>
<h2 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a><code>deploy</code></h2><p>ä»…ç”¨äº <code>Swarm mode</code>ï¼Œè¯¦ç»†å†…å®¹è¯·æŸ¥çœ‹ <a href="https://yeasy.gitbooks.io/docker_practice/content/swarm_mode" target="_blank" rel="noopener"><code>Swarm mode</code></a> ä¸€èŠ‚</p>
<h2 id="devices"><a href="#devices" class="headerlink" title="devices"></a><code>devices</code></h2><p>æŒ‡å®šè®¾å¤‡æ˜ å°„å…³ç³»ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">devices:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"/dev/ttyUSB1:/dev/ttyUSB0"</span></span><br></pre></td></tr></table></figure>
<h2 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a><code>depends_on</code></h2><p>è§£å†³å®¹å™¨çš„ä¾èµ–ã€å¯åŠ¨å…ˆåçš„é—®é¢˜ã€‚ä»¥ä¸‹ä¾‹å­ä¸­ä¼šå…ˆå¯åŠ¨ <code>redis</code> <code>db</code> å†å¯åŠ¨ <code>web</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3'</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼š<code>web</code> æœåŠ¡ä¸ä¼šç­‰å¾… <code>redis</code> <code>db</code> ã€Œå®Œå…¨å¯åŠ¨ã€ä¹‹åæ‰å¯åŠ¨ã€‚</p>
</blockquote>
<h2 id="dns"><a href="#dns" class="headerlink" title="dns"></a><code>dns</code></h2><p>è‡ªå®šä¹‰ <code>DNS</code> æœåŠ¡å™¨ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">dns:</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dns:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">114.114</span><span class="number">.114</span><span class="number">.114</span></span><br></pre></td></tr></table></figure>
<h2 id="dns-search"><a href="#dns-search" class="headerlink" title="dns_search"></a><code>dns_search</code></h2><p>é…ç½® <code>DNS</code> æœç´¢åŸŸã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">dns_search:</span> <span class="string">example.com</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dns_search:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">domain1.example.com</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">domain2.example.com</span></span><br></pre></td></tr></table></figure>
<h2 id="tmpfs"><a href="#tmpfs" class="headerlink" title="tmpfs"></a><code>tmpfs</code></h2><p>æŒ‚è½½ä¸€ä¸ª tmpfs æ–‡ä»¶ç³»ç»Ÿåˆ°å®¹å™¨ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">tmpfs:</span> <span class="string">/run</span></span><br><span class="line"><span class="attr">tmpfs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/run</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/tmp</span></span><br></pre></td></tr></table></figure>
<h2 id="env-file"><a href="#env-file" class="headerlink" title="env_file"></a><code>env_file</code></h2><p>ä»æ–‡ä»¶ä¸­è·å–ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥ä¸ºå•ç‹¬çš„æ–‡ä»¶è·¯å¾„æˆ–åˆ—è¡¨ã€‚</p>
<p>å¦‚æœé€šè¿‡ <code>docker-compose -f FILE</code> æ–¹å¼æ¥æŒ‡å®š Compose æ¨¡æ¿æ–‡ä»¶ï¼Œåˆ™ <code>env_file</code> ä¸­å˜é‡çš„è·¯å¾„ä¼šåŸºäºæ¨¡æ¿æ–‡ä»¶è·¯å¾„ã€‚</p>
<p>å¦‚æœæœ‰å˜é‡åç§°ä¸ <code>environment</code> æŒ‡ä»¤å†²çªï¼Œåˆ™æŒ‰ç…§æƒ¯ä¾‹ï¼Œä»¥åè€…ä¸ºå‡†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">env_file: .env</span><br><span class="line"></span><br><span class="line">env_file:</span><br><span class="line">  - ./common.env</span><br><span class="line">  - ./apps/web.env</span><br><span class="line">  - /opt/secrets.env</span><br></pre></td></tr></table></figure>
<p>ç¯å¢ƒå˜é‡æ–‡ä»¶ä¸­æ¯ä¸€è¡Œå¿…é¡»ç¬¦åˆæ ¼å¼ï¼Œæ”¯æŒ <code>#</code> å¼€å¤´çš„æ³¨é‡Šè¡Œã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># common.env: Set development environment</span></span><br><span class="line">PROG_ENV=development</span><br></pre></td></tr></table></figure>
<h2 id="environment"><a href="#environment" class="headerlink" title="environment"></a><code>environment</code></h2><p>è®¾ç½®ç¯å¢ƒå˜é‡ã€‚ä½ å¯ä»¥ä½¿ç”¨æ•°ç»„æˆ–å­—å…¸ä¸¤ç§æ ¼å¼ã€‚</p>
<p>åªç»™å®šåç§°çš„å˜é‡ä¼šè‡ªåŠ¨è·å–è¿è¡Œ Compose ä¸»æœºä¸Šå¯¹åº”å˜é‡çš„å€¼ï¼Œå¯ä»¥ç”¨æ¥é˜²æ­¢æ³„éœ²ä¸å¿…è¦çš„æ•°æ®ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">RACK_ENV:</span> <span class="string">development</span></span><br><span class="line">  <span class="attr">SESSION_SECRET:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RACK_ENV=development</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">SESSION_SECRET</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå˜é‡åç§°æˆ–è€…å€¼ä¸­ç”¨åˆ° <code>true|falseï¼Œyes|no</code> ç­‰è¡¨è¾¾ <a href="https://yaml.org/type/bool.html" target="_blank" rel="noopener">å¸ƒå°”</a> å«ä¹‰çš„è¯æ±‡ï¼Œæœ€å¥½æ”¾åˆ°å¼•å·é‡Œï¼Œé¿å… YAML è‡ªåŠ¨è§£ææŸäº›å†…å®¹ä¸ºå¯¹åº”çš„å¸ƒå°”è¯­ä¹‰ã€‚è¿™äº›ç‰¹å®šè¯æ±‡ï¼ŒåŒ…æ‹¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">y|Y|yes|Yes|YES|n|N|no|No|NO|<span class="literal">true</span>|True|TRUE|<span class="literal">false</span>|False|FALSE|on|On|ON|off|Off|OFF</span><br></pre></td></tr></table></figure>
<h2 id="expose"><a href="#expose" class="headerlink" title="expose"></a><code>expose</code></h2><p>æš´éœ²ç«¯å£ï¼Œä½†ä¸æ˜ å°„åˆ°å®¿ä¸»æœºï¼Œåªè¢«è¿æ¥çš„æœåŠ¡è®¿é—®ã€‚</p>
<p>ä»…å¯ä»¥æŒ‡å®šå†…éƒ¨ç«¯å£ä¸ºå‚æ•°</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">expose:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">"3000"</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">"8000"</span></span><br></pre></td></tr></table></figure>
<h2 id="external-links"><a href="#external-links" class="headerlink" title="external_links"></a><code>external_links</code></h2><blockquote>
<p>æ³¨æ„ï¼šä¸å»ºè®®ä½¿ç”¨è¯¥æŒ‡ä»¤ã€‚</p>
</blockquote>
<p>é“¾æ¥åˆ° <code>docker-compose.yml</code> å¤–éƒ¨çš„å®¹å™¨ï¼Œç”šè‡³å¹¶é <code>Compose</code> ç®¡ç†çš„å¤–éƒ¨å®¹å™¨ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">external_links:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">redis_1</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">project_db_1:mysql</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">project_db_1:postgresql</span></span><br></pre></td></tr></table></figure>
<h2 id="extra-hosts"><a href="#extra-hosts" class="headerlink" title="extra_hosts"></a><code>extra_hosts</code></h2><p>ç±»ä¼¼ Docker ä¸­çš„ <code>--add-host</code> å‚æ•°ï¼ŒæŒ‡å®šé¢å¤–çš„ host åç§°æ˜ å°„ä¿¡æ¯ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">extra_hosts:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">"googledns:8.8.8.8"</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">"dockerhub:52.1.157.61"</span></span><br></pre></td></tr></table></figure>
<p>ä¼šåœ¨å¯åŠ¨åçš„æœåŠ¡å®¹å™¨ä¸­ <code>/etc/hosts</code> æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¸¤æ¡æ¡ç›®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">8.8.8.8 googledns</span><br><span class="line">52.1.157.61 dockerhub</span><br></pre></td></tr></table></figure>
<h2 id="healthcheck"><a href="#healthcheck" class="headerlink" title="healthcheck"></a><code>healthcheck</code></h2><p>é€šè¿‡å‘½ä»¤æ£€æŸ¥å®¹å™¨æ˜¯å¦å¥åº·è¿è¡Œã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">healthcheck:</span></span><br><span class="line">  <span class="attr">test:</span> <span class="string">["CMD",</span> <span class="string">"curl"</span><span class="string">,</span> <span class="string">"-f"</span><span class="string">,</span> <span class="string">"http://localhost"</span><span class="string">]</span></span><br><span class="line">  <span class="attr">interval:</span> <span class="string">1m30s</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line">  <span class="attr">retries:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>
<h2 id="image"><a href="#image" class="headerlink" title="image"></a><code>image</code></h2><p>æŒ‡å®šä¸ºé•œåƒåç§°æˆ–é•œåƒ IDã€‚å¦‚æœé•œåƒåœ¨æœ¬åœ°ä¸å­˜åœ¨ï¼Œ<code>Compose</code> å°†ä¼šå°è¯•æ‹‰å–è¿™ä¸ªé•œåƒã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">image:</span> <span class="string">ubuntu</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">orchardup/postgresql</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">a4bc65fd</span></span><br></pre></td></tr></table></figure>
<h2 id="labels"><a href="#labels" class="headerlink" title="labels"></a><code>labels</code></h2><p>ä¸ºå®¹å™¨æ·»åŠ  Docker å…ƒæ•°æ®ï¼ˆmetadataï¼‰ä¿¡æ¯ã€‚ä¾‹å¦‚å¯ä»¥ä¸ºå®¹å™¨æ·»åŠ è¾…åŠ©è¯´æ˜ä¿¡æ¯ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">labels:</span></span><br><span class="line">  <span class="attr">com.startupteam.description:</span> <span class="string">"webapp for a startup team"</span></span><br><span class="line">  <span class="attr">com.startupteam.department:</span> <span class="string">"devops department"</span></span><br><span class="line">  <span class="attr">com.startupteam.release:</span> <span class="string">"rc3 for v1.0"</span></span><br></pre></td></tr></table></figure>
<h2 id="links"><a href="#links" class="headerlink" title="links"></a><code>links</code></h2><blockquote>
<p>æ³¨æ„ï¼šä¸æ¨èä½¿ç”¨è¯¥æŒ‡ä»¤ã€‚</p>
</blockquote>
<h2 id="logging"><a href="#logging" class="headerlink" title="logging"></a><code>logging</code></h2><p>é…ç½®æ—¥å¿—é€‰é¡¹ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">driver:</span> <span class="string">syslog</span></span><br><span class="line">  <span class="attr">options:</span></span><br><span class="line">    <span class="attr">syslog-address:</span> <span class="string">"tcp://192.168.0.42:123"</span></span><br></pre></td></tr></table></figure>
<p>ç›®å‰æ”¯æŒä¸‰ç§æ—¥å¿—é©±åŠ¨ç±»å‹ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver:</span> <span class="string">"json-file"</span></span><br><span class="line"><span class="attr">driver:</span> <span class="string">"syslog"</span></span><br><span class="line"><span class="attr">driver:</span> <span class="string">"none"</span></span><br></pre></td></tr></table></figure>
<p><code>options</code> é…ç½®æ—¥å¿—é©±åŠ¨çš„ç›¸å…³å‚æ•°ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">options:</span></span><br><span class="line">  <span class="attr">max-size:</span> <span class="string">"200k"</span></span><br><span class="line">  <span class="attr">max-file:</span> <span class="string">"10"</span></span><br></pre></td></tr></table></figure>
<h2 id="network-mode"><a href="#network-mode" class="headerlink" title="network_mode"></a><code>network_mode</code></h2><p>è®¾ç½®ç½‘ç»œæ¨¡å¼ã€‚ä½¿ç”¨å’Œ <code>docker run</code> çš„ <code>--network</code> å‚æ•°ä¸€æ ·çš„å€¼ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">network_mode:</span> <span class="string">"bridge"</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">"host"</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">"none"</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">"service:[service name]"</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">"container:[container name/id]"</span></span><br></pre></td></tr></table></figure>
<h2 id="networks"><a href="#networks" class="headerlink" title="networks"></a><code>networks</code></h2><p>é…ç½®å®¹å™¨è¿æ¥çš„ç½‘ç»œã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">some-service:</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">some-network</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">other-network</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">some-network:</span></span><br><span class="line">  <span class="attr">other-network:</span></span><br></pre></td></tr></table></figure>
<h2 id="pid"><a href="#pid" class="headerlink" title="pid"></a><code>pid</code></h2><p>è·Ÿä¸»æœºç³»ç»Ÿå…±äº«è¿›ç¨‹å‘½åç©ºé—´ã€‚æ‰“å¼€è¯¥é€‰é¡¹çš„å®¹å™¨ä¹‹é—´ï¼Œä»¥åŠå®¹å™¨å’Œå®¿ä¸»æœºç³»ç»Ÿä¹‹é—´å¯ä»¥é€šè¿‡è¿›ç¨‹ ID æ¥ç›¸äº’è®¿é—®å’Œæ“ä½œã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">pid:</span> <span class="string">"host"</span></span><br></pre></td></tr></table></figure>
<h2 id="ports"><a href="#ports" class="headerlink" title="ports"></a><code>ports</code></h2><p>æš´éœ²ç«¯å£ä¿¡æ¯ã€‚</p>
<p>ä½¿ç”¨å®¿ä¸»ç«¯å£ï¼šå®¹å™¨ç«¯å£ <code>(HOST:CONTAINER)</code> æ ¼å¼ï¼Œæˆ–è€…ä»…ä»…æŒ‡å®šå®¹å™¨çš„ç«¯å£ï¼ˆå®¿ä¸»å°†ä¼šéšæœºé€‰æ‹©ç«¯å£ï¼‰éƒ½å¯ä»¥ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">ports:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">"3000"</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">"8000:8000"</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">"49100:22"</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">"127.0.0.1:8001:8001"</span></span><br></pre></td></tr></table></figure>
<p><em>æ³¨æ„ï¼šå½“ä½¿ç”¨ <code>HOST:CONTAINER</code> æ ¼å¼æ¥æ˜ å°„ç«¯å£æ—¶ï¼Œå¦‚æœä½ ä½¿ç”¨çš„å®¹å™¨ç«¯å£å°äº 60 å¹¶ä¸”æ²¡æ”¾åˆ°å¼•å·é‡Œï¼Œå¯èƒ½ä¼šå¾—åˆ°é”™è¯¯ç»“æœï¼Œå› ä¸º <code>YAML</code> ä¼šè‡ªåŠ¨è§£æ <code>xx:yy</code> è¿™ç§æ•°å­—æ ¼å¼ä¸º 60 è¿›åˆ¶ã€‚ä¸ºé¿å…å‡ºç°è¿™ç§é—®é¢˜ï¼Œå»ºè®®æ•°å­—ä¸²éƒ½é‡‡ç”¨å¼•å·åŒ…æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²æ ¼å¼ã€‚</em></p>
<h2 id="secrets"><a href="#secrets" class="headerlink" title="secrets"></a><code>secrets</code></h2><p>å­˜å‚¨æ•æ„Ÿæ•°æ®ï¼Œä¾‹å¦‚ <code>mysql</code> æœåŠ¡å¯†ç ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3.1"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mysql:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">mysql</span></span><br><span class="line">  <span class="attr">environment:</span></span><br><span class="line">    <span class="attr">MYSQL_ROOT_PASSWORD_FILE:</span> <span class="string">/run/secrets/db_root_password</span></span><br><span class="line">  <span class="attr">secrets:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">db_root_password</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">my_other_secret</span></span><br><span class="line"></span><br><span class="line"><span class="attr">secrets:</span></span><br><span class="line">  <span class="attr">my_secret:</span></span><br><span class="line">    <span class="attr">file:</span> <span class="string">./my_secret.txt</span></span><br><span class="line">  <span class="attr">my_other_secret:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="security-opt"><a href="#security-opt" class="headerlink" title="security_opt"></a><code>security_opt</code></h2><p>æŒ‡å®šå®¹å™¨æ¨¡æ¿æ ‡ç­¾ï¼ˆlabelï¼‰æœºåˆ¶çš„é»˜è®¤å±æ€§ï¼ˆç”¨æˆ·ã€è§’è‰²ã€ç±»å‹ã€çº§åˆ«ç­‰ï¼‰ã€‚ä¾‹å¦‚é…ç½®æ ‡ç­¾çš„ç”¨æˆ·åå’Œè§’è‰²åã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">security_opt:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">label:user:USER</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">label:role:ROLE</span></span><br></pre></td></tr></table></figure>
<h2 id="stop-signal"><a href="#stop-signal" class="headerlink" title="stop_signal"></a><code>stop_signal</code></h2><p>è®¾ç½®å¦ä¸€ä¸ªä¿¡å·æ¥åœæ­¢å®¹å™¨ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨çš„æ˜¯ SIGTERM åœæ­¢å®¹å™¨ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">stop_signal:</span> <span class="string">SIGUSR1</span></span><br></pre></td></tr></table></figure>
<h2 id="sysctls"><a href="#sysctls" class="headerlink" title="sysctls"></a><code>sysctls</code></h2><p>é…ç½®å®¹å™¨å†…æ ¸å‚æ•°ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">sysctls:</span></span><br><span class="line">  <span class="attr">net.core.somaxconn:</span> <span class="number">1024</span></span><br><span class="line">  <span class="attr">net.ipv4.tcp_syncookies:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sysctls:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">net.core.somaxconn=1024</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">net.ipv4.tcp_syncookies=0</span></span><br></pre></td></tr></table></figure>
<h2 id="ulimits"><a href="#ulimits" class="headerlink" title="ulimits"></a><code>ulimits</code></h2><p>æŒ‡å®šå®¹å™¨çš„ ulimits é™åˆ¶å€¼ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒæŒ‡å®šæœ€å¤§è¿›ç¨‹æ•°ä¸º 65535ï¼ŒæŒ‡å®šæ–‡ä»¶å¥æŸ„æ•°ä¸º 20000ï¼ˆè½¯é™åˆ¶ï¼Œåº”ç”¨å¯ä»¥éšæ—¶ä¿®æ”¹ï¼Œä¸èƒ½è¶…è¿‡ç¡¬é™åˆ¶ï¼‰ å’Œ 40000ï¼ˆç³»ç»Ÿç¡¬é™åˆ¶ï¼Œåªèƒ½ root ç”¨æˆ·æé«˜ï¼‰ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">ulimits:</span></span><br><span class="line">  <span class="attr">nproc:</span> <span class="number">65535</span></span><br><span class="line">  <span class="attr">nofile:</span></span><br><span class="line">    <span class="attr">soft:</span> <span class="number">20000</span></span><br><span class="line">    <span class="attr">hard:</span> <span class="number">40000</span></span><br></pre></td></tr></table></figure>
<h2 id="volumes"><a href="#volumes" class="headerlink" title="volumes"></a><code>volumes</code></h2><p>æ•°æ®å·æ‰€æŒ‚è½½è·¯å¾„è®¾ç½®ã€‚å¯ä»¥è®¾ç½®ä¸ºå®¿ä¸»æœºè·¯å¾„(<code>HOST:CONTAINER</code>)æˆ–è€…æ•°æ®å·åç§°(<code>VOLUME:CONTAINER</code>)ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®è®¿é—®æ¨¡å¼ ï¼ˆ<code>HOST:CONTAINER:ro</code>ï¼‰ã€‚</p>
<p>è¯¥æŒ‡ä»¤ä¸­è·¯å¾„æ”¯æŒç›¸å¯¹è·¯å¾„ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">volumes:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/var/lib/mysql</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">cache/:/tmp/cache</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">~/configs:/etc/configs/:ro</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœè·¯å¾„ä¸ºæ•°æ®å·åç§°ï¼Œå¿…é¡»åœ¨æ–‡ä»¶ä¸­é…ç½®æ•°æ®å·ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">my_src:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:8.0</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">mysql_data:/var/lib/mysql</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">mysql_data:</span></span><br></pre></td></tr></table></figure>
<h2 id="å…¶å®ƒæŒ‡ä»¤"><a href="#å…¶å®ƒæŒ‡ä»¤" class="headerlink" title="å…¶å®ƒæŒ‡ä»¤"></a>å…¶å®ƒæŒ‡ä»¤</h2><p>æ­¤å¤–ï¼Œè¿˜æœ‰åŒ…æ‹¬ <code>domainname, entrypoint, hostname, ipc, mac_address, privileged, read_only, shm_size, restart, stdin_open, tty, user, working_dir</code> ç­‰æŒ‡ä»¤ï¼ŒåŸºæœ¬è·Ÿ <code>docker run</code> ä¸­å¯¹åº”å‚æ•°çš„åŠŸèƒ½ä¸€è‡´ã€‚</p>
<p>æŒ‡å®šæœåŠ¡å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å…¥å£æ–‡ä»¶ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">entrypoint:</span> <span class="string">/code/entrypoint.sh</span></span><br></pre></td></tr></table></figure>
<p>æŒ‡å®šå®¹å™¨ä¸­è¿è¡Œåº”ç”¨çš„ç”¨æˆ·åã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">user:</span> <span class="string">nginx</span></span><br></pre></td></tr></table></figure>
<p>æŒ‡å®šå®¹å™¨ä¸­å·¥ä½œç›®å½•ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">working_dir:</span> <span class="string">/code</span></span><br></pre></td></tr></table></figure>
<p>æŒ‡å®šå®¹å™¨ä¸­æœç´¢åŸŸåã€ä¸»æœºåã€mac åœ°å€ç­‰ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">domainname:</span> <span class="string">your_website.com</span></span><br><span class="line"><span class="attr">hostname:</span> <span class="string">test</span></span><br><span class="line"><span class="attr">mac_address:</span> <span class="number">08</span><span class="number">-00</span><span class="number">-27</span><span class="number">-00</span><span class="string">-0C-0A</span></span><br></pre></td></tr></table></figure>
<p>å…è®¸å®¹å™¨ä¸­è¿è¡Œä¸€äº›ç‰¹æƒå‘½ä»¤ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">privileged:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>æŒ‡å®šå®¹å™¨é€€å‡ºåçš„é‡å¯ç­–ç•¥ä¸ºå§‹ç»ˆé‡å¯ã€‚è¯¥å‘½ä»¤å¯¹ä¿æŒæœåŠ¡å§‹ç»ˆè¿è¡Œååˆ†æœ‰æ•ˆï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ¨èé…ç½®ä¸º <code>always</code> æˆ–è€… <code>unless-stopped</code>ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">restart:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure>
<p>ä»¥åªè¯»æ¨¡å¼æŒ‚è½½å®¹å™¨çš„ root æ–‡ä»¶ç³»ç»Ÿï¼Œæ„å‘³ç€ä¸èƒ½å¯¹å®¹å™¨å†…å®¹è¿›è¡Œä¿®æ”¹ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">read_only:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€æ ‡å‡†è¾“å…¥ï¼Œå¯ä»¥æ¥å—å¤–éƒ¨è¾“å…¥ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">stdin_open:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>æ¨¡æ‹Ÿä¸€ä¸ªä¼ªç»ˆç«¯ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">tty:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="è¯»å–å˜é‡"><a href="#è¯»å–å˜é‡" class="headerlink" title="è¯»å–å˜é‡"></a>è¯»å–å˜é‡</h2><p>Compose æ¨¡æ¿æ–‡ä»¶æ”¯æŒåŠ¨æ€è¯»å–ä¸»æœºçš„ç³»ç»Ÿç¯å¢ƒå˜é‡å’Œå½“å‰ç›®å½•ä¸‹çš„ <code>.env</code> æ–‡ä»¶ä¸­çš„å˜é‡ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ Compose æ–‡ä»¶å°†ä»è¿è¡Œå®ƒçš„ç¯å¢ƒä¸­è¯»å–å˜é‡ <code>${MONGO_VERSION}</code> çš„å€¼ï¼Œå¹¶å†™å…¥æ‰§è¡Œçš„æŒ‡ä»¤ä¸­ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">db:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">"mongo:$&#123;MONGO_VERSION&#125;"</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ‰§è¡Œ <code>MONGO_VERSION=3.2 docker-compose up</code> åˆ™ä¼šå¯åŠ¨ä¸€ä¸ª <code>mongo:3.2</code> é•œåƒçš„å®¹å™¨ï¼›å¦‚æœæ‰§è¡Œ <code>MONGO_VERSION=2.8 docker-compose up</code> åˆ™ä¼šå¯åŠ¨ä¸€ä¸ª <code>mongo:2.8</code> é•œåƒçš„å®¹å™¨ã€‚</p>
<p>è‹¥å½“å‰ç›®å½•å­˜åœ¨ <code>.env</code> æ–‡ä»¶ï¼Œæ‰§è¡Œ <code>docker-compose</code> å‘½ä»¤æ—¶å°†ä»è¯¥æ–‡ä»¶ä¸­è¯»å–å˜é‡ã€‚</p>
<p>åœ¨å½“å‰ç›®å½•æ–°å»º <code>.env</code> æ–‡ä»¶å¹¶å†™å…¥ä»¥ä¸‹å†…å®¹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ”¯æŒ # å·æ³¨é‡Š</span></span><br><span class="line">MONGO_VERSION=3.6</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œ <code>docker-compose up</code> åˆ™ä¼šå¯åŠ¨ä¸€ä¸ª <code>mongo:3.6</code> é•œåƒçš„å®¹å™¨ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="noopener">https://docs.docker.com/compose/compose-file/</a></p>
<p>æœ¬æ–‡ç« æ‘˜æŠ„äºï¼š<a href="https://yeasy.gitbooks.io/docker_practice/content/" target="_blank" rel="noopener">https://yeasy.gitbooks.io/docker_practice/content/</a></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerå…¥é—¨ï¼ˆäº”ï¼‰â€”â€”Dockerfile</title>
    <url>/2019/12/05/Docker%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%94%EF%BC%89%E2%80%94%E2%80%94Dockerfile/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Dockerfileç®€ä»‹"><a href="#Dockerfileç®€ä»‹" class="headerlink" title="Dockerfileç®€ä»‹"></a>Dockerfileç®€ä»‹</h1><p>Dockerfile æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚</p>
<a id="more"></a>
<h1 id="åˆ©ç”¨-commit-ç†è§£é•œåƒæ„æˆ"><a href="#åˆ©ç”¨-commit-ç†è§£é•œåƒæ„æˆ" class="headerlink" title="åˆ©ç”¨ commit ç†è§£é•œåƒæ„æˆ"></a>åˆ©ç”¨ commit ç†è§£é•œåƒæ„æˆ</h1><p>ç†è§£Dockerfileå®šåˆ¶é•œåƒå‰å…ˆæ¥äº†è§£ä¸€ä¸‹<code>docker commit</code>ã€‚</p>
<p>é•œåƒæ˜¯å®¹å™¨çš„åŸºç¡€ï¼Œæ¯æ¬¡æ‰§è¡Œ <code>docker run</code> çš„æ—¶å€™éƒ½ä¼šæŒ‡å®šå“ªä¸ªé•œåƒä½œä¸ºå®¹å™¨è¿è¡Œçš„åŸºç¡€ã€‚åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ‰€ä½¿ç”¨çš„éƒ½æ˜¯æ¥è‡ªäº Docker Hub çš„é•œåƒã€‚ç›´æ¥ä½¿ç”¨è¿™äº›é•œåƒæ˜¯å¯ä»¥æ»¡è¶³ä¸€å®šçš„éœ€æ±‚ï¼Œè€Œå½“è¿™äº›é•œåƒæ— æ³•ç›´æ¥æ»¡è¶³éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦å®šåˆ¶è¿™äº›é•œåƒã€‚</p>
<p>é•œåƒæ˜¯å¤šå±‚å­˜å‚¨ï¼Œæ¯ä¸€å±‚æ˜¯åœ¨å‰ä¸€å±‚çš„åŸºç¡€ä¸Šè¿›è¡Œçš„ä¿®æ”¹ï¼›è€Œå®¹å™¨åŒæ ·ä¹Ÿæ˜¯å¤šå±‚å­˜å‚¨ï¼Œæ˜¯åœ¨ä»¥é•œåƒä¸ºåŸºç¡€å±‚ï¼Œåœ¨å…¶åŸºç¡€ä¸ŠåŠ ä¸€å±‚ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶çš„å­˜å‚¨å±‚ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬ä»¥å®šåˆ¶ä¸€ä¸ª Web æœåŠ¡å™¨ä¸ºä¾‹å­ï¼Œæ¥è®²è§£é•œåƒæ˜¯å¦‚ä½•æ„å»ºçš„ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run --name webserver -d -p 80:80 nginx</span><br></pre></td></tr></table></figure>
<p>è¿™æ¡å‘½ä»¤ä¼šç”¨ <code>nginx</code> é•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œå‘½åä¸º <code>webserver</code>ï¼Œå¹¶ä¸”æ˜ å°„äº† 80 ç«¯å£ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥ç”¨æµè§ˆå™¨å»è®¿é—®è¿™ä¸ª <code>nginx</code> æœåŠ¡å™¨ã€‚</p>
<p>å¦‚æœæ˜¯åœ¨ Linux æœ¬æœºè¿è¡Œçš„ Dockerï¼Œæˆ–è€…å¦‚æœä½¿ç”¨çš„æ˜¯ Docker Desktop for Mac/Windowsï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥è®¿é—®ï¼š<a href="http://localhost/" target="_blank" rel="noopener">http://localhost</a>ï¼›å¦‚æœä½¿ç”¨çš„æ˜¯ Docker Toolboxï¼Œæˆ–è€…æ˜¯åœ¨è™šæ‹Ÿæœºã€äº‘æœåŠ¡å™¨ä¸Šå®‰è£…çš„ Dockerï¼Œåˆ™éœ€è¦å°† <code>localhost</code> æ¢ä¸ºè™šæ‹Ÿæœºåœ°å€æˆ–è€…å®é™…äº‘æœåŠ¡å™¨åœ°å€ã€‚</p>
<p>ç›´æ¥ç”¨æµè§ˆå™¨è®¿é—®çš„è¯ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°é»˜è®¤çš„ Nginx æ¬¢è¿é¡µé¢ã€‚</p>
<p><img src="commit_hello_nginx.png" alt></p>
<p>ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬éå¸¸ä¸å–œæ¬¢è¿™ä¸ªæ¬¢è¿é¡µé¢ï¼Œæˆ‘ä»¬å¸Œæœ›æ”¹æˆæ¬¢è¿ Docker çš„æ–‡å­—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>docker exec</code> å‘½ä»¤è¿›å…¥å®¹å™¨ï¼Œä¿®æ”¹å…¶å†…å®¹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it webserver bash</span><br><span class="line">root@3e3b6840ce9a:/<span class="comment"># echo '&lt;h1&gt;Hello, Docker!&lt;/h1&gt;' &gt; /usr/share/nginx/html/index.html</span></span><br><span class="line">root@3e3b6840ce9a:/<span class="comment"># exit</span></span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä»¥äº¤äº’å¼ç»ˆç«¯æ–¹å¼è¿›å…¥ <code>webserver</code> å®¹å™¨ï¼Œå¹¶æ‰§è¡Œäº† <code>bash</code> å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯è·å¾—ä¸€ä¸ªå¯æ“ä½œçš„ Shellã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬ç”¨ <code>Hello, Docker!</code> è¦†ç›–äº† <code>/usr/share/nginx/html/index.html</code> çš„å†…å®¹ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å†åˆ·æ–°æµè§ˆå™¨çš„è¯ï¼Œä¼šå‘ç°å†…å®¹è¢«æ”¹å˜äº†ã€‚</p>
<p><img src="commit_hello_nginx2.png" alt></p>
<p>ç°åœ¨æˆ‘ä»¬å®šåˆ¶å¥½äº†å˜åŒ–ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å°†å…¶ä¿å­˜ä¸‹æ¥å½¢æˆé•œåƒã€‚</p>
<p>è¦çŸ¥é“ï¼Œå½“æˆ‘ä»¬è¿è¡Œä¸€ä¸ªå®¹å™¨çš„æ—¶å€™ï¼ˆå¦‚æœä¸ä½¿ç”¨å·çš„è¯ï¼‰ï¼Œæˆ‘ä»¬åšçš„ä»»ä½•æ–‡ä»¶ä¿®æ”¹éƒ½ä¼šè¢«è®°å½•äºå®¹å™¨å­˜å‚¨å±‚é‡Œã€‚è€Œ Docker æä¾›äº†ä¸€ä¸ª <code>docker commit</code> å‘½ä»¤ï¼Œå¯ä»¥å°†å®¹å™¨çš„å­˜å‚¨å±‚ä¿å­˜ä¸‹æ¥æˆä¸ºé•œåƒã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯åœ¨åŸæœ‰é•œåƒçš„åŸºç¡€ä¸Šï¼Œå†å åŠ ä¸Šå®¹å™¨çš„å­˜å‚¨å±‚ï¼Œå¹¶æ„æˆæ–°çš„é•œåƒã€‚ä»¥åæˆ‘ä»¬è¿è¡Œè¿™ä¸ªæ–°é•œåƒçš„æ—¶å€™ï¼Œå°±ä¼šæ‹¥æœ‰åŸæœ‰å®¹å™¨æœ€åçš„æ–‡ä»¶å˜åŒ–ã€‚</p>
<p><code>docker commit</code> çš„è¯­æ³•æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker commit [é€‰é¡¹] &lt;å®¹å™¨IDæˆ–å®¹å™¨å&gt; [&lt;ä»“åº“å&gt;[:&lt;æ ‡ç­¾&gt;]]</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤å°†å®¹å™¨ä¿å­˜ä¸ºé•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker commit \</span><br><span class="line">    --author <span class="string">"Tao Wang &lt;twang2218@gmail.com&gt;"</span> \</span><br><span class="line">    --message <span class="string">"ä¿®æ”¹äº†é»˜è®¤ç½‘é¡µ"</span> \</span><br><span class="line">    webserver \</span><br><span class="line">    nginx:v2</span><br><span class="line">sha256:07e33465974800ce65751acc279adc6ed2dc5ed4e0838f8b86f0c87aa1795214</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ <code>--author</code> æ˜¯æŒ‡å®šä¿®æ”¹çš„ä½œè€…ï¼Œè€Œ <code>--message</code> åˆ™æ˜¯è®°å½•æœ¬æ¬¡ä¿®æ”¹çš„å†…å®¹ã€‚è¿™ç‚¹å’Œ <code>git</code> ç‰ˆæœ¬æ§åˆ¶ç›¸ä¼¼ï¼Œä¸è¿‡è¿™é‡Œè¿™äº›ä¿¡æ¯å¯ä»¥çœç•¥ç•™ç©ºã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨ <code>docker image ls</code> ä¸­çœ‹åˆ°è¿™ä¸ªæ–°å®šåˆ¶çš„é•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls nginx</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">nginx               v2                  07e334659748        9 seconds ago       181.5 MB</span><br><span class="line">nginx               1.11                05a60462f8ba        12 days ago         181.5 MB</span><br><span class="line">nginx               latest              e43d811ce2f4        4 weeks ago         181.5 MB</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è¿˜å¯ä»¥ç”¨ <code>docker history</code> å…·ä½“æŸ¥çœ‹é•œåƒå†…çš„å†å²è®°å½•ï¼Œå¦‚æœæ¯”è¾ƒ <code>nginx:latest</code> çš„å†å²è®°å½•ï¼Œæˆ‘ä»¬ä¼šå‘ç°æ–°å¢äº†æˆ‘ä»¬åˆšåˆšæäº¤çš„è¿™ä¸€å±‚ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker <span class="built_in">history</span> nginx:v2</span><br><span class="line">IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT</span><br><span class="line">07e334659748        54 seconds ago      nginx -g daemon off;                            95 B                ä¿®æ”¹äº†é»˜è®¤ç½‘é¡µ</span><br><span class="line">e43d811ce2f4        4 weeks ago         /bin/sh -c <span class="comment">#(nop)  CMD ["nginx" "-g" "daemon    0 B</span></span><br><span class="line">&lt;missing&gt;           4 weeks ago         /bin/sh -c <span class="comment">#(nop)  EXPOSE 443/tcp 80/tcp        0 B</span></span><br><span class="line">&lt;missing&gt;           4 weeks ago         /bin/sh -c ln -sf /dev/stdout /var/<span class="built_in">log</span>/nginx/   22 B</span><br><span class="line">&lt;missing&gt;           4 weeks ago         /bin/sh -c apt-key adv --keyserver hkp://pgp.   58.46 MB</span><br><span class="line">&lt;missing&gt;           4 weeks ago         /bin/sh -c <span class="comment">#(nop)  ENV NGINX_VERSION=1.11.5-1   0 B</span></span><br><span class="line">&lt;missing&gt;           4 weeks ago         /bin/sh -c <span class="comment">#(nop)  MAINTAINER NGINX Docker Ma   0 B</span></span><br><span class="line">&lt;missing&gt;           4 weeks ago         /bin/sh -c <span class="comment">#(nop)  CMD ["/bin/bash"]            0 B</span></span><br><span class="line">&lt;missing&gt;           4 weeks ago         /bin/sh -c <span class="comment">#(nop) ADD file:23aa4f893e3288698c   123 MB</span></span><br></pre></td></tr></table></figure>
<p>æ–°çš„é•œåƒå®šåˆ¶å¥½åï¼Œæˆ‘ä»¬å¯ä»¥æ¥è¿è¡Œè¿™ä¸ªé•œåƒã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run --name web2 -d -p 81:80 nginx:v2</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å‘½åä¸ºæ–°çš„æœåŠ¡ä¸º <code>web2</code>ï¼Œå¹¶ä¸”æ˜ å°„åˆ° <code>81</code> ç«¯å£ã€‚å¦‚æœæ˜¯ Docker Desktop for Mac/Windows æˆ– Linux æ¡Œé¢çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è®¿é—® <a href="http://localhost:81/" target="_blank" rel="noopener">http://localhost:81</a> çœ‹åˆ°ç»“æœï¼Œå…¶å†…å®¹åº”è¯¥å’Œä¹‹å‰ä¿®æ”¹åçš„ <code>webserver</code> ä¸€æ ·ã€‚</p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡å®Œæˆäº†å®šåˆ¶é•œåƒï¼Œä½¿ç”¨çš„æ˜¯ <code>docker commit</code> å‘½ä»¤ï¼Œæ‰‹åŠ¨æ“ä½œç»™æ—§çš„é•œåƒæ·»åŠ äº†æ–°çš„ä¸€å±‚ï¼Œå½¢æˆæ–°çš„é•œåƒï¼Œå¯¹é•œåƒå¤šå±‚å­˜å‚¨åº”è¯¥æœ‰äº†æ›´ç›´è§‚çš„æ„Ÿè§‰ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š <code>docker commit</code> å‘½ä»¤é™¤äº†å­¦ä¹ ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„åº”ç”¨åœºåˆï¼Œæ¯”å¦‚è¢«å…¥ä¾µåä¿å­˜ç°åœºç­‰ã€‚ä½†æ˜¯ï¼Œä¸è¦ä½¿ç”¨ <code>docker commit</code> å®šåˆ¶é•œåƒï¼Œä½¿ç”¨ <code>docker commit</code> å‘½ä»¤è™½ç„¶å¯ä»¥æ¯”è¾ƒç›´è§‚çš„å¸®åŠ©ç†è§£é•œåƒåˆ†å±‚å­˜å‚¨çš„æ¦‚å¿µï¼Œä½†æ˜¯å®é™…ç¯å¢ƒä¸­å¹¶ä¸ä¼šè¿™æ ·ä½¿ç”¨ã€‚</p>
<p>å®šåˆ¶é•œåƒåº”è¯¥ä½¿ç”¨ <code>Dockerfile</code> æ¥å®Œæˆã€‚å¦‚æœä½ æƒ³è¦å®šåˆ¶é•œåƒè¯·æŸ¥çœ‹ä¸‹ä¸€å°èŠ‚ã€‚</p>
</blockquote>
<h1 id="Dockerfileå®šåˆ¶é•œåƒ"><a href="#Dockerfileå®šåˆ¶é•œåƒ" class="headerlink" title="Dockerfileå®šåˆ¶é•œåƒ"></a>Dockerfileå®šåˆ¶é•œåƒ</h1><p>ä»<code>docker commit</code>ä¸­äº†è§£åˆ°é•œåƒçš„å®šåˆ¶å®é™…ä¸Šå°±æ˜¯å®šåˆ¶æ¯ä¸€å±‚æ‰€æ·»åŠ çš„é…ç½®ã€æ–‡ä»¶ã€‚</p>
<p>å¦‚æœå¯ä»¥æŠŠæ¯ä¸€å±‚ä¿®æ”¹ã€å®‰è£…ã€æ„å»ºã€æ“ä½œçš„å‘½ä»¤éƒ½å†™å…¥ä¸€ä¸ªè„šæœ¬ï¼Œç”¨è¿™ä¸ªè„šæœ¬æ¥æ„å»ºã€å®šåˆ¶é•œåƒï¼Œé‚£ä¹ˆä¹‹å‰æåŠçš„æ— æ³•é‡å¤çš„é—®é¢˜ã€é•œåƒæ„å»ºé€æ˜æ€§çš„é—®é¢˜ã€ä½“ç§¯çš„é—®é¢˜å°±éƒ½ä¼šè§£å†³ã€‚è¿™ä¸ªè„šæœ¬å°±æ˜¯ Dockerfileã€‚</p>
<p>Dockerfile æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶å†…åŒ…å«äº†ä¸€æ¡æ¡çš„ <strong>æŒ‡ä»¤(Instruction)</strong>ï¼Œæ¯ä¸€æ¡æŒ‡ä»¤æ„å»ºä¸€å±‚ï¼Œå› æ­¤æ¯ä¸€æ¡æŒ‡ä»¤çš„å†…å®¹ï¼Œå°±æ˜¯æè¿°è¯¥å±‚åº”å½“å¦‚ä½•æ„å»ºã€‚</p>
<p>è¿˜ä»¥ä¹‹å‰å®šåˆ¶ <code>nginx</code> é•œåƒä¸ºä¾‹ï¼Œè¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨ Dockerfile æ¥å®šåˆ¶ã€‚</p>
<p>åœ¨ä¸€ä¸ªç©ºç™½ç›®å½•ä¸­ï¼Œå»ºç«‹ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶å‘½åä¸º <code>Dockerfile</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir mynginx</span><br><span class="line">$ <span class="built_in">cd</span> mynginx</span><br><span class="line">$ touch Dockerfile</span><br></pre></td></tr></table></figure>
<p>å…¶å†…å®¹ä¸ºï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">'&lt;h1&gt;Hello, Docker!&lt;/h1&gt;'</span> &gt; /usr/share/nginx/html/index.html</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ª Dockerfile å¾ˆç®€å•ï¼Œä¸€å…±å°±ä¸¤è¡Œã€‚æ¶‰åŠåˆ°äº†ä¸¤æ¡æŒ‡ä»¤ï¼Œ<code>FROM</code> å’Œ <code>RUN</code>ã€‚</p>
<h2 id="FROM-æŒ‡å®šåŸºç¡€é•œåƒ"><a href="#FROM-æŒ‡å®šåŸºç¡€é•œåƒ" class="headerlink" title="FROM æŒ‡å®šåŸºç¡€é•œåƒ"></a>FROM æŒ‡å®šåŸºç¡€é•œåƒ</h2><p>æ‰€è°“å®šåˆ¶é•œåƒï¼Œé‚£ä¸€å®šæ˜¯ä»¥ä¸€ä¸ªé•œåƒä¸ºåŸºç¡€ï¼Œåœ¨å…¶ä¸Šè¿›è¡Œå®šåˆ¶ã€‚å°±åƒæˆ‘ä»¬ä¹‹å‰è¿è¡Œäº†ä¸€ä¸ª <code>nginx</code> é•œåƒçš„å®¹å™¨ï¼Œå†è¿›è¡Œä¿®æ”¹ä¸€æ ·ï¼ŒåŸºç¡€é•œåƒæ˜¯å¿…é¡»æŒ‡å®šçš„ã€‚è€Œ <code>FROM</code> å°±æ˜¯æŒ‡å®š <strong>åŸºç¡€é•œåƒ</strong>ï¼Œå› æ­¤ä¸€ä¸ª <code>Dockerfile</code> ä¸­ <code>FROM</code> æ˜¯å¿…å¤‡çš„æŒ‡ä»¤ï¼Œå¹¶ä¸”å¿…é¡»æ˜¯ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚</p>
<p>åœ¨ <a href="https://hub.docker.com/search?q=&amp;type=image&amp;image_filter=official" target="_blank" rel="noopener">Docker Hub</a> ä¸Šæœ‰éå¸¸å¤šçš„é«˜è´¨é‡çš„å®˜æ–¹é•œåƒï¼Œæœ‰å¯ä»¥ç›´æ¥æ‹¿æ¥ä½¿ç”¨çš„æœåŠ¡ç±»çš„é•œåƒï¼Œå¦‚ <a href="https://hub.docker.com/_/nginx/" target="_blank" rel="noopener"><code>nginx</code></a>ã€<a href="https://hub.docker.com/_/redis/" target="_blank" rel="noopener"><code>redis</code></a>ã€<a href="https://hub.docker.com/_/mongo/" target="_blank" rel="noopener"><code>mongo</code></a>ã€<a href="https://hub.docker.com/_/mysql/" target="_blank" rel="noopener"><code>mysql</code></a>ã€<a href="https://hub.docker.com/_/httpd/" target="_blank" rel="noopener"><code>httpd</code></a>ã€<a href="https://hub.docker.com/_/php/" target="_blank" rel="noopener"><code>php</code></a>ã€<a href="https://hub.docker.com/_/tomcat/" target="_blank" rel="noopener"><code>tomcat</code></a> ç­‰ï¼›ä¹Ÿæœ‰ä¸€äº›æ–¹ä¾¿å¼€å‘ã€æ„å»ºã€è¿è¡Œå„ç§è¯­è¨€åº”ç”¨çš„é•œåƒï¼Œå¦‚ <a href="https://hub.docker.com/_/node" target="_blank" rel="noopener"><code>node</code></a>ã€<a href="https://hub.docker.com/_/openjdk/" target="_blank" rel="noopener"><code>openjdk</code></a>ã€<a href="https://hub.docker.com/_/python/" target="_blank" rel="noopener"><code>python</code></a>ã€<a href="https://hub.docker.com/_/ruby/" target="_blank" rel="noopener"><code>ruby</code></a>ã€<a href="https://hub.docker.com/_/golang/" target="_blank" rel="noopener"><code>golang</code></a> ç­‰ã€‚å¯ä»¥åœ¨å…¶ä¸­å¯»æ‰¾ä¸€ä¸ªæœ€ç¬¦åˆæˆ‘ä»¬æœ€ç»ˆç›®æ ‡çš„é•œåƒä¸ºåŸºç¡€é•œåƒè¿›è¡Œå®šåˆ¶ã€‚</p>
<p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”æœåŠ¡çš„é•œåƒï¼Œå®˜æ–¹é•œåƒä¸­è¿˜æä¾›äº†ä¸€äº›æ›´ä¸ºåŸºç¡€çš„æ“ä½œç³»ç»Ÿé•œåƒï¼Œå¦‚ <a href="https://hub.docker.com/_/ubuntu/" target="_blank" rel="noopener"><code>ubuntu</code></a>ã€<a href="https://hub.docker.com/_/debian/" target="_blank" rel="noopener"><code>debian</code></a>ã€<a href="https://hub.docker.com/_/centos/" target="_blank" rel="noopener"><code>centos</code></a>ã€<a href="https://hub.docker.com/_/fedora/" target="_blank" rel="noopener"><code>fedora</code></a>ã€<a href="https://hub.docker.com/_/alpine/" target="_blank" rel="noopener"><code>alpine</code></a> ç­‰ï¼Œè¿™äº›æ“ä½œç³»ç»Ÿçš„è½¯ä»¶åº“ä¸ºæˆ‘ä»¬æä¾›äº†æ›´å¹¿é˜”çš„æ‰©å±•ç©ºé—´ã€‚</p>
<p>é™¤äº†é€‰æ‹©ç°æœ‰é•œåƒä¸ºåŸºç¡€é•œåƒå¤–ï¼ŒDocker è¿˜å­˜åœ¨ä¸€ä¸ªç‰¹æ®Šçš„é•œåƒï¼Œåä¸º <code>scratch</code>ã€‚è¿™ä¸ªé•œåƒæ˜¯è™šæ‹Ÿçš„æ¦‚å¿µï¼Œå¹¶ä¸å®é™…å­˜åœ¨ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªç©ºç™½çš„é•œåƒã€‚</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> scratch</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ ä»¥ <code>scratch</code> ä¸ºåŸºç¡€é•œåƒçš„è¯ï¼Œæ„å‘³ç€ä½ ä¸ä»¥ä»»ä½•é•œåƒä¸ºåŸºç¡€ï¼Œæ¥ä¸‹æ¥æ‰€å†™çš„æŒ‡ä»¤å°†ä½œä¸ºé•œåƒç¬¬ä¸€å±‚å¼€å§‹å­˜åœ¨ã€‚</p>
<p>ä¸ä»¥ä»»ä½•ç³»ç»Ÿä¸ºåŸºç¡€ï¼Œç›´æ¥å°†å¯æ‰§è¡Œæ–‡ä»¶å¤åˆ¶è¿›é•œåƒçš„åšæ³•å¹¶ä¸ç½•è§ï¼Œæ¯”å¦‚ <a href="https://hub.docker.com/_/swarm/" target="_blank" rel="noopener"><code>swarm</code></a>ã€<a href="https://quay.io/repository/coreos/etcd" target="_blank" rel="noopener"><code>etcd</code></a>ã€‚å¯¹äº Linux ä¸‹é™æ€ç¼–è¯‘çš„ç¨‹åºæ¥è¯´ï¼Œå¹¶ä¸éœ€è¦æœ‰æ“ä½œç³»ç»Ÿæä¾›è¿è¡Œæ—¶æ”¯æŒï¼Œæ‰€éœ€çš„ä¸€åˆ‡åº“éƒ½å·²ç»åœ¨å¯æ‰§è¡Œæ–‡ä»¶é‡Œäº†ï¼Œå› æ­¤ç›´æ¥ <code>FROM scratch</code> ä¼šè®©é•œåƒä½“ç§¯æ›´åŠ å°å·§ã€‚ä½¿ç”¨ <a href="https://golang.org/" target="_blank" rel="noopener">Go è¯­è¨€</a> å¼€å‘çš„åº”ç”¨å¾ˆå¤šä¼šä½¿ç”¨è¿™ç§æ–¹å¼æ¥åˆ¶ä½œé•œåƒï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ‰äººè®¤ä¸º Go æ˜¯ç‰¹åˆ«é€‚åˆå®¹å™¨å¾®æœåŠ¡æ¶æ„çš„è¯­è¨€çš„åŸå› ä¹‹ä¸€ã€‚</p>
<h2 id="RUN-æ‰§è¡Œå‘½ä»¤"><a href="#RUN-æ‰§è¡Œå‘½ä»¤" class="headerlink" title="RUN æ‰§è¡Œå‘½ä»¤"></a>RUN æ‰§è¡Œå‘½ä»¤</h2><p><code>RUN</code> æŒ‡ä»¤æ˜¯ç”¨æ¥æ‰§è¡Œå‘½ä»¤è¡Œå‘½ä»¤çš„ã€‚ç”±äºå‘½ä»¤è¡Œçš„å¼ºå¤§èƒ½åŠ›ï¼Œ<code>RUN</code> æŒ‡ä»¤åœ¨å®šåˆ¶é•œåƒæ—¶æ˜¯æœ€å¸¸ç”¨çš„æŒ‡ä»¤ä¹‹ä¸€ã€‚å…¶æ ¼å¼æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li><em>shell</em> æ ¼å¼ï¼š<code>RUN &lt;å‘½ä»¤&gt;</code>ï¼Œå°±åƒç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥çš„å‘½ä»¤ä¸€æ ·ã€‚åˆšæ‰å†™çš„ Dockerfile ä¸­çš„ <code>RUN</code> æŒ‡ä»¤å°±æ˜¯è¿™ç§æ ¼å¼ã€‚</li>
</ul>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">'&lt;h1&gt;Hello, Docker!&lt;/h1&gt;'</span> &gt; /usr/share/nginx/html/index.html</span></span><br></pre></td></tr></table></figure>
<ul>
<li><em>exec</em> æ ¼å¼ï¼š<code>RUN [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;, &quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot;]</code>ï¼Œè¿™æ›´åƒæ˜¯å‡½æ•°è°ƒç”¨ä¸­çš„æ ¼å¼ã€‚</li>
</ul>
<p>æ—¢ç„¶ <code>RUN</code> å°±åƒ Shell è„šæœ¬ä¸€æ ·å¯ä»¥æ‰§è¡Œå‘½ä»¤ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å°±å¯ä»¥åƒ Shell è„šæœ¬ä¸€æ ·æŠŠæ¯ä¸ªå‘½ä»¤å¯¹åº”ä¸€ä¸ª RUN å‘¢ï¼Ÿæ¯”å¦‚è¿™æ ·ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> debian:stretch</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get install -y gcc libc6-dev make wget</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> wget -O redis.tar.gz <span class="string">"http://download.redis.io/releases/redis-5.0.3.tar.gz"</span></span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /usr/src/redis</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> make -C /usr/src/redis</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> make -C /usr/src/redis install</span></span><br></pre></td></tr></table></figure>
<p>ä¹‹å‰è¯´è¿‡ï¼ŒDockerfile ä¸­æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šå»ºç«‹ä¸€å±‚ï¼Œ<code>RUN</code> ä¹Ÿä¸ä¾‹å¤–ã€‚æ¯ä¸€ä¸ª <code>RUN</code> çš„è¡Œä¸ºï¼Œå°±å’Œåˆšæ‰æˆ‘ä»¬æ‰‹å·¥å»ºç«‹é•œåƒçš„è¿‡ç¨‹ä¸€æ ·ï¼šæ–°å»ºç«‹ä¸€å±‚ï¼Œåœ¨å…¶ä¸Šæ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œæ‰§è¡Œç»“æŸåï¼Œ<code>commit</code> è¿™ä¸€å±‚çš„ä¿®æ”¹ï¼Œæ„æˆæ–°çš„é•œåƒã€‚</p>
<p>è€Œä¸Šé¢çš„è¿™ç§å†™æ³•ï¼Œåˆ›å»ºäº† 7 å±‚é•œåƒã€‚è¿™æ˜¯å®Œå…¨æ²¡æœ‰æ„ä¹‰çš„ï¼Œè€Œä¸”å¾ˆå¤šè¿è¡Œæ—¶ä¸éœ€è¦çš„ä¸œè¥¿ï¼Œéƒ½è¢«è£…è¿›äº†é•œåƒé‡Œï¼Œæ¯”å¦‚ç¼–è¯‘ç¯å¢ƒã€æ›´æ–°çš„è½¯ä»¶åŒ…ç­‰ç­‰ã€‚ç»“æœå°±æ˜¯äº§ç”Ÿéå¸¸è‡ƒè‚¿ã€éå¸¸å¤šå±‚çš„é•œåƒï¼Œä¸ä»…ä»…å¢åŠ äº†æ„å»ºéƒ¨ç½²çš„æ—¶é—´ï¼Œä¹Ÿå¾ˆå®¹æ˜“å‡ºé”™ã€‚ è¿™æ˜¯å¾ˆå¤šåˆå­¦ Docker çš„äººå¸¸çŠ¯çš„ä¸€ä¸ªé”™è¯¯ã€‚</p>
<p><em>Union FS æ˜¯æœ‰æœ€å¤§å±‚æ•°é™åˆ¶çš„ï¼Œæ¯”å¦‚ AUFSï¼Œæ›¾ç»æ˜¯æœ€å¤§ä¸å¾—è¶…è¿‡ 42 å±‚ï¼Œç°åœ¨æ˜¯ä¸å¾—è¶…è¿‡ 127 å±‚ã€‚</em></p>
<p>ä¸Šé¢çš„ <code>Dockerfile</code> æ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> debian:stretch</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> buildDeps=<span class="string">'gcc libc6-dev make wget'</span> \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install -y <span class="variable">$buildDeps</span> \</span></span><br><span class="line"><span class="bash">    &amp;&amp; wget -O redis.tar.gz <span class="string">"http://download.redis.io/releases/redis-5.0.3.tar.gz"</span> \</span></span><br><span class="line"><span class="bash">    &amp;&amp; mkdir -p /usr/src/redis \</span></span><br><span class="line"><span class="bash">    &amp;&amp; tar -xzf redis.tar.gz -C /usr/src/redis --strip-components=1 \</span></span><br><span class="line"><span class="bash">    &amp;&amp; make -C /usr/src/redis \</span></span><br><span class="line"><span class="bash">    &amp;&amp; make -C /usr/src/redis install \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/apt/lists/* \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm redis.tar.gz \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -r /usr/src/redis \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get purge -y --auto-remove <span class="variable">$buildDeps</span></span></span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆï¼Œä¹‹å‰æ‰€æœ‰çš„å‘½ä»¤åªæœ‰ä¸€ä¸ªç›®çš„ï¼Œå°±æ˜¯ç¼–è¯‘ã€å®‰è£… redis å¯æ‰§è¡Œæ–‡ä»¶ã€‚å› æ­¤æ²¡æœ‰å¿…è¦å»ºç«‹å¾ˆå¤šå±‚ï¼Œè¿™åªæ˜¯ä¸€å±‚çš„äº‹æƒ…ã€‚å› æ­¤ï¼Œè¿™é‡Œæ²¡æœ‰ä½¿ç”¨å¾ˆå¤šä¸ª <code>RUN</code> å¯¹ä¸€ä¸€å¯¹åº”ä¸åŒçš„å‘½ä»¤ï¼Œè€Œæ˜¯ä»…ä»…ä½¿ç”¨ä¸€ä¸ª <code>RUN</code> æŒ‡ä»¤ï¼Œå¹¶ä½¿ç”¨ <code>&amp;&amp;</code> å°†å„ä¸ªæ‰€éœ€å‘½ä»¤ä¸²è”èµ·æ¥ã€‚å°†ä¹‹å‰çš„ 7 å±‚ï¼Œç®€åŒ–ä¸ºäº† 1 å±‚ã€‚åœ¨æ’°å†™ Dockerfile çš„æ—¶å€™ï¼Œè¦ç»å¸¸æé†’è‡ªå·±ï¼Œè¿™å¹¶ä¸æ˜¯åœ¨å†™ Shell è„šæœ¬ï¼Œè€Œæ˜¯åœ¨å®šä¹‰æ¯ä¸€å±‚è¯¥å¦‚ä½•æ„å»ºã€‚</p>
<p>å¹¶ä¸”ï¼Œè¿™é‡Œä¸ºäº†æ ¼å¼åŒ–è¿˜è¿›è¡Œäº†æ¢è¡Œã€‚Dockerfile æ”¯æŒ Shell ç±»çš„è¡Œå°¾æ·»åŠ  <code>\</code> çš„å‘½ä»¤æ¢è¡Œæ–¹å¼ï¼Œä»¥åŠè¡Œé¦– <code>#</code> è¿›è¡Œæ³¨é‡Šçš„æ ¼å¼ã€‚è‰¯å¥½çš„æ ¼å¼ï¼Œæ¯”å¦‚æ¢è¡Œã€ç¼©è¿›ã€æ³¨é‡Šç­‰ï¼Œä¼šè®©ç»´æŠ¤ã€æ’éšœæ›´ä¸ºå®¹æ˜“ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ä¹ æƒ¯ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥çœ‹åˆ°è¿™ä¸€ç»„å‘½ä»¤çš„æœ€åæ·»åŠ äº†æ¸…ç†å·¥ä½œçš„å‘½ä»¤ï¼Œåˆ é™¤äº†ä¸ºäº†ç¼–è¯‘æ„å»ºæ‰€éœ€è¦çš„è½¯ä»¶ï¼Œæ¸…ç†äº†æ‰€æœ‰ä¸‹è½½ã€å±•å¼€çš„æ–‡ä»¶ï¼Œå¹¶ä¸”è¿˜æ¸…ç†äº† <code>apt</code> ç¼“å­˜æ–‡ä»¶ã€‚è¿™æ˜¯å¾ˆé‡è¦çš„ä¸€æ­¥ï¼Œæˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼Œé•œåƒæ˜¯å¤šå±‚å­˜å‚¨ï¼Œæ¯ä¸€å±‚çš„ä¸œè¥¿å¹¶ä¸ä¼šåœ¨ä¸‹ä¸€å±‚è¢«åˆ é™¤ï¼Œä¼šä¸€ç›´è·Ÿéšç€é•œåƒã€‚å› æ­¤é•œåƒæ„å»ºæ—¶ï¼Œä¸€å®šè¦ç¡®ä¿æ¯ä¸€å±‚åªæ·»åŠ çœŸæ­£éœ€è¦æ·»åŠ çš„ä¸œè¥¿ï¼Œä»»ä½•æ— å…³çš„ä¸œè¥¿éƒ½åº”è¯¥æ¸…ç†æ‰ã€‚</p>
<p>å¾ˆå¤šäººåˆå­¦ Docker åˆ¶ä½œå‡ºäº†å¾ˆè‡ƒè‚¿çš„é•œåƒçš„åŸå› ä¹‹ä¸€ï¼Œå°±æ˜¯å¿˜è®°äº†æ¯ä¸€å±‚æ„å»ºçš„æœ€åä¸€å®šè¦æ¸…ç†æ‰æ— å…³æ–‡ä»¶ã€‚</p>
<h2 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="headerlink" title="æ„å»ºé•œåƒ"></a>æ„å»ºé•œåƒ</h2><p>å¥½äº†ï¼Œè®©æˆ‘ä»¬å†å›åˆ°ä¹‹å‰å®šåˆ¶çš„ nginx é•œåƒçš„ Dockerfile æ¥ã€‚ç°åœ¨æˆ‘ä»¬æ˜ç™½äº†è¿™ä¸ª Dockerfile çš„å†…å®¹ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬æ¥æ„å»ºè¿™ä¸ªé•œåƒå§ã€‚</p>
<p>åœ¨ <code>Dockerfile</code> æ–‡ä»¶æ‰€åœ¨ç›®å½•æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker build -t nginx:v3 .</span><br><span class="line">Sending build context to Docker daemon 2.048 kB</span><br><span class="line">Step 1 : FROM nginx</span><br><span class="line"> ---&gt; e43d811ce2f4</span><br><span class="line">Step 2 : RUN <span class="built_in">echo</span> <span class="string">'&lt;h1&gt;Hello, Docker!&lt;/h1&gt;'</span> &gt; /usr/share/nginx/html/index.html</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 9cdc27646c7b</span><br><span class="line"> ---&gt; 44aa4490ce2c</span><br><span class="line">Removing intermediate container 9cdc27646c7b</span><br><span class="line">Successfully built 44aa4490ce2c</span><br></pre></td></tr></table></figure>
<p>ä»å‘½ä»¤çš„è¾“å‡ºç»“æœä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°é•œåƒçš„æ„å»ºè¿‡ç¨‹ã€‚åœ¨ <code>Step 2</code> ä¸­ï¼Œå¦‚åŒæˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„é‚£æ ·ï¼Œ<code>RUN</code> æŒ‡ä»¤å¯åŠ¨äº†ä¸€ä¸ªå®¹å™¨ <code>9cdc27646c7b</code>ï¼Œæ‰§è¡Œäº†æ‰€è¦æ±‚çš„å‘½ä»¤ï¼Œå¹¶æœ€åæäº¤äº†è¿™ä¸€å±‚ <code>44aa4490ce2c</code>ï¼Œéšååˆ é™¤äº†æ‰€ç”¨åˆ°çš„è¿™ä¸ªå®¹å™¨ <code>9cdc27646c7b</code>ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† <code>docker build</code> å‘½ä»¤è¿›è¡Œé•œåƒæ„å»ºã€‚å…¶æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build [é€‰é¡¹] &lt;ä¸Šä¸‹æ–‡è·¯å¾„/URL/-&gt;</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬æŒ‡å®šäº†æœ€ç»ˆé•œåƒçš„åç§° <code>-t nginx:v3</code>ï¼Œæ„å»ºæˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åƒä¹‹å‰è¿è¡Œ <code>nginx:v2</code> é‚£æ ·æ¥è¿è¡Œè¿™ä¸ªé•œåƒï¼Œå…¶ç»“æœä¼šå’Œ <code>nginx:v2</code> ä¸€æ ·ã€‚</p>
<h2 id="é•œåƒæ„å»ºä¸Šä¸‹æ–‡ï¼ˆContextï¼‰"><a href="#é•œåƒæ„å»ºä¸Šä¸‹æ–‡ï¼ˆContextï¼‰" class="headerlink" title="é•œåƒæ„å»ºä¸Šä¸‹æ–‡ï¼ˆContextï¼‰"></a>é•œåƒæ„å»ºä¸Šä¸‹æ–‡ï¼ˆContextï¼‰</h2><p>å¦‚æœæ³¨æ„ï¼Œä¼šçœ‹åˆ° <code>docker build</code> å‘½ä»¤æœ€åæœ‰ä¸€ä¸ª <code>.</code>ã€‚<code>.</code> è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œè€Œ <code>Dockerfile</code> å°±åœ¨å½“å‰ç›®å½•ï¼Œå› æ­¤ä¸å°‘åˆå­¦è€…ä»¥ä¸ºè¿™ä¸ªè·¯å¾„æ˜¯åœ¨æŒ‡å®š <code>Dockerfile</code> æ‰€åœ¨è·¯å¾„ï¼Œè¿™ä¹ˆç†è§£å…¶å®æ˜¯ä¸å‡†ç¡®çš„ã€‚å¦‚æœå¯¹åº”ä¸Šé¢çš„å‘½ä»¤æ ¼å¼ï¼Œä½ å¯èƒ½ä¼šå‘ç°ï¼Œè¿™æ˜¯åœ¨æŒ‡å®š <strong>ä¸Šä¸‹æ–‡è·¯å¾„</strong>ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆæˆ‘ä»¬è¦ç†è§£ <code>docker build</code> çš„å·¥ä½œåŸç†ã€‚Docker åœ¨è¿è¡Œæ—¶åˆ†ä¸º Docker å¼•æ“ï¼ˆä¹Ÿå°±æ˜¯æœåŠ¡ç«¯å®ˆæŠ¤è¿›ç¨‹ï¼‰å’Œå®¢æˆ·ç«¯å·¥å…·ã€‚Docker çš„å¼•æ“æä¾›äº†ä¸€ç»„ REST APIï¼Œè¢«ç§°ä¸º <a href="https://docs.docker.com/develop/sdk/" target="_blank" rel="noopener">Docker Remote API</a>ï¼Œè€Œå¦‚ <code>docker</code> å‘½ä»¤è¿™æ ·çš„å®¢æˆ·ç«¯å·¥å…·ï¼Œåˆ™æ˜¯é€šè¿‡è¿™ç»„ API ä¸ Docker å¼•æ“äº¤äº’ï¼Œä»è€Œå®Œæˆå„ç§åŠŸèƒ½ã€‚å› æ­¤ï¼Œè™½ç„¶è¡¨é¢ä¸Šæˆ‘ä»¬å¥½åƒæ˜¯åœ¨æœ¬æœºæ‰§è¡Œå„ç§ <code>docker</code> åŠŸèƒ½ï¼Œä½†å®é™…ä¸Šï¼Œä¸€åˆ‡éƒ½æ˜¯ä½¿ç”¨çš„è¿œç¨‹è°ƒç”¨å½¢å¼åœ¨æœåŠ¡ç«¯ï¼ˆDocker å¼•æ“ï¼‰å®Œæˆã€‚ä¹Ÿå› ä¸ºè¿™ç§ C/S è®¾è®¡ï¼Œè®©æˆ‘ä»¬æ“ä½œè¿œç¨‹æœåŠ¡å™¨çš„ Docker å¼•æ“å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚</p>
<p>å½“æˆ‘ä»¬è¿›è¡Œé•œåƒæ„å»ºçš„æ—¶å€™ï¼Œå¹¶éæ‰€æœ‰å®šåˆ¶éƒ½ä¼šé€šè¿‡ <code>RUN</code> æŒ‡ä»¤å®Œæˆï¼Œç»å¸¸ä¼šéœ€è¦å°†ä¸€äº›æœ¬åœ°æ–‡ä»¶å¤åˆ¶è¿›é•œåƒï¼Œæ¯”å¦‚é€šè¿‡ <code>COPY</code> æŒ‡ä»¤ã€<code>ADD</code> æŒ‡ä»¤ç­‰ã€‚è€Œ <code>docker build</code> å‘½ä»¤æ„å»ºé•œåƒï¼Œå…¶å®å¹¶éåœ¨æœ¬åœ°æ„å»ºï¼Œè€Œæ˜¯åœ¨æœåŠ¡ç«¯ï¼Œä¹Ÿå°±æ˜¯ Docker å¼•æ“ä¸­æ„å»ºçš„ã€‚é‚£ä¹ˆåœ¨è¿™ç§å®¢æˆ·ç«¯/æœåŠ¡ç«¯çš„æ¶æ„ä¸­ï¼Œå¦‚ä½•æ‰èƒ½è®©æœåŠ¡ç«¯è·å¾—æœ¬åœ°æ–‡ä»¶å‘¢ï¼Ÿ</p>
<p>è¿™å°±å¼•å…¥äº†ä¸Šä¸‹æ–‡çš„æ¦‚å¿µã€‚å½“æ„å»ºçš„æ—¶å€™ï¼Œç”¨æˆ·ä¼šæŒ‡å®šæ„å»ºé•œåƒä¸Šä¸‹æ–‡çš„è·¯å¾„ï¼Œ<code>docker build</code> å‘½ä»¤å¾—çŸ¥è¿™ä¸ªè·¯å¾„åï¼Œä¼šå°†è·¯å¾„ä¸‹çš„æ‰€æœ‰å†…å®¹æ‰“åŒ…ï¼Œç„¶åä¸Šä¼ ç»™ Docker å¼•æ“ã€‚è¿™æ · Docker å¼•æ“æ”¶åˆ°è¿™ä¸ªä¸Šä¸‹æ–‡åŒ…åï¼Œå±•å¼€å°±ä¼šè·å¾—æ„å»ºé•œåƒæ‰€éœ€çš„ä¸€åˆ‡æ–‡ä»¶ã€‚</p>
<p>å¦‚æœåœ¨ <code>Dockerfile</code> ä¸­è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> ./package.json /app/</span></span><br></pre></td></tr></table></figure>
<p>è¿™å¹¶ä¸æ˜¯è¦å¤åˆ¶æ‰§è¡Œ <code>docker build</code> å‘½ä»¤æ‰€åœ¨çš„ç›®å½•ä¸‹çš„ <code>package.json</code>ï¼Œä¹Ÿä¸æ˜¯å¤åˆ¶ <code>Dockerfile</code> æ‰€åœ¨ç›®å½•ä¸‹çš„ <code>package.json</code>ï¼Œè€Œæ˜¯å¤åˆ¶ <strong>ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰</strong> ç›®å½•ä¸‹çš„ <code>package.json</code>ã€‚</p>
<p>å› æ­¤ï¼Œ<code>COPY</code> è¿™ç±»æŒ‡ä»¤ä¸­çš„æºæ–‡ä»¶çš„è·¯å¾„éƒ½æ˜¯<em>ç›¸å¯¹è·¯å¾„</em>ã€‚è¿™ä¹Ÿæ˜¯åˆå­¦è€…ç»å¸¸ä¼šé—®çš„ä¸ºä»€ä¹ˆ <code>COPY ../package.json /app</code> æˆ–è€… <code>COPY /opt/xxxx /app</code> æ— æ³•å·¥ä½œçš„åŸå› ï¼Œå› ä¸ºè¿™äº›è·¯å¾„å·²ç»è¶…å‡ºäº†ä¸Šä¸‹æ–‡çš„èŒƒå›´ï¼ŒDocker å¼•æ“æ— æ³•è·å¾—è¿™äº›ä½ç½®çš„æ–‡ä»¶ã€‚å¦‚æœçœŸçš„éœ€è¦é‚£äº›æ–‡ä»¶ï¼Œåº”è¯¥å°†å®ƒä»¬å¤åˆ¶åˆ°ä¸Šä¸‹æ–‡ç›®å½•ä¸­å»ã€‚</p>
<p>ç°åœ¨å°±å¯ä»¥ç†è§£åˆšæ‰çš„å‘½ä»¤ <code>docker build -t nginx:v3 .</code> ä¸­çš„è¿™ä¸ª <code>.</code>ï¼Œå®é™…ä¸Šæ˜¯åœ¨æŒ‡å®šä¸Šä¸‹æ–‡çš„ç›®å½•ï¼Œ<code>docker build</code> å‘½ä»¤ä¼šå°†è¯¥ç›®å½•ä¸‹çš„å†…å®¹æ‰“åŒ…äº¤ç»™ Docker å¼•æ“ä»¥å¸®åŠ©æ„å»ºé•œåƒã€‚</p>
<p>å¦‚æœè§‚å¯Ÿ <code>docker build</code> è¾“å‡ºï¼Œæˆ‘ä»¬å…¶å®å·²ç»çœ‹åˆ°äº†è¿™ä¸ªå‘é€ä¸Šä¸‹æ–‡çš„è¿‡ç¨‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker build -t nginx:v3 .</span><br><span class="line">Sending build context to Docker daemon 2.048 kB</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>ç†è§£æ„å»ºä¸Šä¸‹æ–‡å¯¹äºé•œåƒæ„å»ºæ˜¯å¾ˆé‡è¦çš„ï¼Œé¿å…çŠ¯ä¸€äº›ä¸åº”è¯¥çš„é”™è¯¯ã€‚æ¯”å¦‚æœ‰äº›åˆå­¦è€…åœ¨å‘ç° <code>COPY /opt/xxxx /app</code> ä¸å·¥ä½œåï¼Œäºæ˜¯å¹²è„†å°† <code>Dockerfile</code> æ”¾åˆ°äº†ç¡¬ç›˜æ ¹ç›®å½•å»æ„å»ºï¼Œç»“æœå‘ç° <code>docker build</code> æ‰§è¡Œåï¼Œåœ¨å‘é€ä¸€ä¸ªå‡ å GB çš„ä¸œè¥¿ï¼Œæä¸ºç¼“æ…¢è€Œä¸”å¾ˆå®¹æ˜“æ„å»ºå¤±è´¥ã€‚é‚£æ˜¯å› ä¸ºè¿™ç§åšæ³•æ˜¯åœ¨è®© <code>docker build</code> æ‰“åŒ…æ•´ä¸ªç¡¬ç›˜ï¼Œè¿™æ˜¾ç„¶æ˜¯ä½¿ç”¨é”™è¯¯ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œåº”è¯¥ä¼šå°† <code>Dockerfile</code> ç½®äºä¸€ä¸ªç©ºç›®å½•ä¸‹ï¼Œæˆ–è€…é¡¹ç›®æ ¹ç›®å½•ä¸‹ã€‚å¦‚æœè¯¥ç›®å½•ä¸‹æ²¡æœ‰æ‰€éœ€æ–‡ä»¶ï¼Œé‚£ä¹ˆåº”è¯¥æŠŠæ‰€éœ€æ–‡ä»¶å¤åˆ¶ä¸€ä»½è¿‡æ¥ã€‚å¦‚æœç›®å½•ä¸‹æœ‰äº›ä¸œè¥¿ç¡®å®ä¸å¸Œæœ›æ„å»ºæ—¶ä¼ ç»™ Docker å¼•æ“ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ <code>.gitignore</code> ä¸€æ ·çš„è¯­æ³•å†™ä¸€ä¸ª <code>.dockerignore</code>ï¼Œè¯¥æ–‡ä»¶æ˜¯ç”¨äºå‰”é™¤ä¸éœ€è¦ä½œä¸ºä¸Šä¸‹æ–‡ä¼ é€’ç»™ Docker å¼•æ“çš„ã€‚</p>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆä¼šæœ‰äººè¯¯ä»¥ä¸º <code>.</code> æ˜¯æŒ‡å®š <code>Dockerfile</code> æ‰€åœ¨ç›®å½•å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä¸é¢å¤–æŒ‡å®š <code>Dockerfile</code> çš„è¯ï¼Œä¼šå°†ä¸Šä¸‹æ–‡ç›®å½•ä¸‹çš„åä¸º <code>Dockerfile</code> çš„æ–‡ä»¶ä½œä¸º Dockerfileã€‚</p>
<p>è¿™åªæ˜¯é»˜è®¤è¡Œä¸ºï¼Œå®é™…ä¸Š <code>Dockerfile</code> çš„æ–‡ä»¶åå¹¶ä¸è¦æ±‚å¿…é¡»ä¸º <code>Dockerfile</code>ï¼Œè€Œä¸”å¹¶ä¸è¦æ±‚å¿…é¡»ä½äºä¸Šä¸‹æ–‡ç›®å½•ä¸­ï¼Œæ¯”å¦‚å¯ä»¥ç”¨ <code>-f ../Dockerfile.php</code> å‚æ•°æŒ‡å®šæŸä¸ªæ–‡ä»¶ä½œä¸º <code>Dockerfile</code>ã€‚</p>
<p>ä¸€èˆ¬ä½¿ç”¨é»˜è®¤çš„æ–‡ä»¶å <code>Dockerfile</code>ï¼Œä»¥åŠä¼šå°†å…¶ç½®äºé•œåƒæ„å»ºä¸Šä¸‹æ–‡ç›®å½•ä¸­ã€‚</p>
<h2 id="å…¶å®ƒ-docker-build-çš„ç”¨æ³•"><a href="#å…¶å®ƒ-docker-build-çš„ç”¨æ³•" class="headerlink" title="å…¶å®ƒ docker build çš„ç”¨æ³•"></a>å…¶å®ƒ <code>docker build</code> çš„ç”¨æ³•</h2><h3 id="ç›´æ¥ç”¨-Git-repo-è¿›è¡Œæ„å»º"><a href="#ç›´æ¥ç”¨-Git-repo-è¿›è¡Œæ„å»º" class="headerlink" title="ç›´æ¥ç”¨ Git repo è¿›è¡Œæ„å»º"></a>ç›´æ¥ç”¨ Git repo è¿›è¡Œæ„å»º</h3><p>æˆ–è®¸ä½ å·²ç»æ³¨æ„åˆ°äº†ï¼Œ<code>docker build</code> è¿˜æ”¯æŒä» URL æ„å»ºï¼Œæ¯”å¦‚å¯ä»¥ç›´æ¥ä» Git repo ä¸­æ„å»ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker build https://github.com/twang2218/gitlab-ce-zh.git<span class="comment">#:11.1</span></span><br><span class="line"></span><br><span class="line">Sending build context to Docker daemon 2.048 kB</span><br><span class="line">Step 1 : FROM gitlab/gitlab-ce:11.1.0-ce.0</span><br><span class="line">11.1.0-ce.0: Pulling from gitlab/gitlab-ce</span><br><span class="line">aed15891ba52: Already exists</span><br><span class="line">773ae8583d14: Already exists</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>è¿™è¡Œå‘½ä»¤æŒ‡å®šäº†æ„å»ºæ‰€éœ€çš„ Git repoï¼Œå¹¶ä¸”æŒ‡å®šé»˜è®¤çš„ <code>master</code> åˆ†æ”¯ï¼Œæ„å»ºç›®å½•ä¸º <code>/11.1/</code>ï¼Œç„¶å Docker å°±ä¼šè‡ªå·±å» <code>git clone</code> è¿™ä¸ªé¡¹ç›®ã€åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ã€å¹¶è¿›å…¥åˆ°æŒ‡å®šç›®å½•åå¼€å§‹æ„å»ºã€‚</p>
<h3 id="ç”¨ç»™å®šçš„-tar-å‹ç¼©åŒ…æ„å»º"><a href="#ç”¨ç»™å®šçš„-tar-å‹ç¼©åŒ…æ„å»º" class="headerlink" title="ç”¨ç»™å®šçš„ tar å‹ç¼©åŒ…æ„å»º"></a>ç”¨ç»™å®šçš„ tar å‹ç¼©åŒ…æ„å»º</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker build http://server/context.tar.gz</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ‰€ç»™å‡ºçš„ URL ä¸æ˜¯ä¸ª Git repoï¼Œè€Œæ˜¯ä¸ª <code>tar</code> å‹ç¼©åŒ…ï¼Œé‚£ä¹ˆ Docker å¼•æ“ä¼šä¸‹è½½è¿™ä¸ªåŒ…ï¼Œå¹¶è‡ªåŠ¨è§£å‹ç¼©ï¼Œä»¥å…¶ä½œä¸ºä¸Šä¸‹æ–‡ï¼Œå¼€å§‹æ„å»ºã€‚</p>
<h3 id="ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–-Dockerfile-è¿›è¡Œæ„å»º"><a href="#ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–-Dockerfile-è¿›è¡Œæ„å»º" class="headerlink" title="ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å– Dockerfile è¿›è¡Œæ„å»º"></a>ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å– Dockerfile è¿›è¡Œæ„å»º</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build - &lt; Dockerfile</span><br></pre></td></tr></table></figure>
<p>æˆ–</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat Dockerfile | docker build -</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ ‡å‡†è¾“å…¥ä¼ å…¥çš„æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œåˆ™å°†å…¶è§†ä¸º <code>Dockerfile</code>ï¼Œå¹¶å¼€å§‹æ„å»ºã€‚è¿™ç§å½¢å¼ç”±äºç›´æ¥ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å– Dockerfile çš„å†…å®¹ï¼Œå®ƒæ²¡æœ‰ä¸Šä¸‹æ–‡ï¼Œå› æ­¤ä¸å¯ä»¥åƒå…¶ä»–æ–¹æ³•é‚£æ ·å¯ä»¥å°†æœ¬åœ°æ–‡ä»¶ <code>COPY</code> è¿›é•œåƒä¹‹ç±»çš„äº‹æƒ…ã€‚</p>
<h3 id="ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–ä¸Šä¸‹æ–‡å‹ç¼©åŒ…è¿›è¡Œæ„å»º"><a href="#ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–ä¸Šä¸‹æ–‡å‹ç¼©åŒ…è¿›è¡Œæ„å»º" class="headerlink" title="ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–ä¸Šä¸‹æ–‡å‹ç¼©åŒ…è¿›è¡Œæ„å»º"></a>ä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–ä¸Šä¸‹æ–‡å‹ç¼©åŒ…è¿›è¡Œæ„å»º</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker build - &lt; context.tar.gz</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‘ç°æ ‡å‡†è¾“å…¥çš„æ–‡ä»¶æ ¼å¼æ˜¯ <code>gzip</code>ã€<code>bzip2</code> ä»¥åŠ <code>xz</code> çš„è¯ï¼Œå°†ä¼šä½¿å…¶ä¸ºä¸Šä¸‹æ–‡å‹ç¼©åŒ…ï¼Œç›´æ¥å°†å…¶å±•å¼€ï¼Œå°†é‡Œé¢è§†ä¸ºä¸Šä¸‹æ–‡ï¼Œå¹¶å¼€å§‹æ„å»ºã€‚</p>
<h1 id="DockerfileæŒ‡ä»¤"><a href="#DockerfileæŒ‡ä»¤" class="headerlink" title="DockerfileæŒ‡ä»¤"></a>DockerfileæŒ‡ä»¤</h1><p>ä¸€å¼ å›¾æ¥å¤§æ¦‚äº†è§£ä¸€ä¸‹</p>
<p><img src="command.webp" alt></p>
<h2 id="COPY-å¤åˆ¶æ–‡ä»¶"><a href="#COPY-å¤åˆ¶æ–‡ä»¶" class="headerlink" title="COPY å¤åˆ¶æ–‡ä»¶"></a>COPY å¤åˆ¶æ–‡ä»¶</h2><p>æ ¼å¼ï¼š</p>
<ul>
<li><code>COPY [--chown=:] &lt;æºè·¯å¾„&gt;... &lt;ç›®æ ‡è·¯å¾„&gt;</code></li>
<li><code>COPY [--chown=:] [&quot;&lt;æºè·¯å¾„1&gt;&quot;,... &quot;&lt;ç›®æ ‡è·¯å¾„&gt;&quot;]</code></li>
</ul>
<p>å’Œ <code>RUN</code> æŒ‡ä»¤ä¸€æ ·ï¼Œä¹Ÿæœ‰ä¸¤ç§æ ¼å¼ï¼Œä¸€ç§ç±»ä¼¼äºå‘½ä»¤è¡Œï¼Œä¸€ç§ç±»ä¼¼äºå‡½æ•°è°ƒç”¨ã€‚</p>
<p><code>COPY</code> æŒ‡ä»¤å°†ä»æ„å»ºä¸Šä¸‹æ–‡ç›®å½•ä¸­ <code>&lt;æºè·¯å¾„&gt;</code> çš„æ–‡ä»¶/ç›®å½•å¤åˆ¶åˆ°æ–°çš„ä¸€å±‚çš„é•œåƒå†…çš„ <code>&lt;ç›®æ ‡è·¯å¾„&gt;</code> ä½ç½®ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> package.json /usr/src/app/</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;æºè·¯å¾„&gt;</code> å¯ä»¥æ˜¯å¤šä¸ªï¼Œç”šè‡³å¯ä»¥æ˜¯é€šé…ç¬¦ï¼Œå…¶é€šé…ç¬¦è§„åˆ™è¦æ»¡è¶³ Go çš„ <a href="https://golang.org/pkg/path/filepath/#Match" target="_blank" rel="noopener"><code>filepath.Match</code></a> è§„åˆ™ï¼Œå¦‚ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> hom* /mydir/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> hom?.txt /mydir/</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;ç›®æ ‡è·¯å¾„&gt;</code> å¯ä»¥æ˜¯å®¹å™¨å†…çš„ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹äºå·¥ä½œç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼ˆå·¥ä½œç›®å½•å¯ä»¥ç”¨ <code>WORKDIR</code> æŒ‡ä»¤æ¥æŒ‡å®šï¼‰ã€‚ç›®æ ‡è·¯å¾„ä¸éœ€è¦äº‹å…ˆåˆ›å»ºï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨ä¼šåœ¨å¤åˆ¶æ–‡ä»¶å‰å…ˆè¡Œåˆ›å»ºç¼ºå¤±ç›®å½•ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿˜éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œä½¿ç”¨ <code>COPY</code> æŒ‡ä»¤ï¼Œæºæ–‡ä»¶çš„å„ç§å…ƒæ•°æ®éƒ½ä¼šä¿ç•™ã€‚æ¯”å¦‚è¯»ã€å†™ã€æ‰§è¡Œæƒé™ã€æ–‡ä»¶å˜æ›´æ—¶é—´ç­‰ã€‚è¿™ä¸ªç‰¹æ€§å¯¹äºé•œåƒå®šåˆ¶å¾ˆæœ‰ç”¨ã€‚ç‰¹åˆ«æ˜¯æ„å»ºç›¸å…³æ–‡ä»¶éƒ½åœ¨ä½¿ç”¨ Git è¿›è¡Œç®¡ç†çš„æ—¶å€™ã€‚</p>
<p>åœ¨ä½¿ç”¨è¯¥æŒ‡ä»¤çš„æ—¶å€™è¿˜å¯ä»¥åŠ ä¸Š <code>--chown=:</code> é€‰é¡¹æ¥æ”¹å˜æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·åŠæ‰€å±ç»„ã€‚</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> --chown=55:mygroup files* /mydir/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --chown=bin files* /mydir/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --chown=1 files* /mydir/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --chown=10:11 files* /mydir/</span></span><br></pre></td></tr></table></figure>
<h2 id="ADD-æ›´é«˜çº§çš„å¤åˆ¶æ–‡ä»¶"><a href="#ADD-æ›´é«˜çº§çš„å¤åˆ¶æ–‡ä»¶" class="headerlink" title="ADD æ›´é«˜çº§çš„å¤åˆ¶æ–‡ä»¶"></a>ADD æ›´é«˜çº§çš„å¤åˆ¶æ–‡ä»¶</h2><p><code>ADD</code> æŒ‡ä»¤å’Œ <code>COPY</code> çš„æ ¼å¼å’Œæ€§è´¨åŸºæœ¬ä¸€è‡´ã€‚ä½†æ˜¯åœ¨ <code>COPY</code> åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›åŠŸèƒ½ã€‚</p>
<p>æ¯”å¦‚ <code>&lt;æºè·¯å¾„&gt;</code> å¯ä»¥æ˜¯ä¸€ä¸ª <code>URL</code>ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒDocker å¼•æ“ä¼šè¯•å›¾å»ä¸‹è½½è¿™ä¸ªé“¾æ¥çš„æ–‡ä»¶æ”¾åˆ° <code>&lt;ç›®æ ‡è·¯å¾„&gt;</code> å»ã€‚ä¸‹è½½åçš„æ–‡ä»¶æƒé™è‡ªåŠ¨è®¾ç½®ä¸º <code>600</code>ï¼Œå¦‚æœè¿™å¹¶ä¸æ˜¯æƒ³è¦çš„æƒé™ï¼Œé‚£ä¹ˆè¿˜éœ€è¦å¢åŠ é¢å¤–çš„ä¸€å±‚ <code>RUN</code> è¿›è¡Œæƒé™è°ƒæ•´ï¼Œå¦å¤–ï¼Œå¦‚æœä¸‹è½½çš„æ˜¯ä¸ªå‹ç¼©åŒ…ï¼Œéœ€è¦è§£å‹ç¼©ï¼Œä¹Ÿä¸€æ ·è¿˜éœ€è¦é¢å¤–çš„ä¸€å±‚ <code>RUN</code> æŒ‡ä»¤è¿›è¡Œè§£å‹ç¼©ã€‚æ‰€ä»¥ä¸å¦‚ç›´æ¥ä½¿ç”¨ <code>RUN</code> æŒ‡ä»¤ï¼Œç„¶åä½¿ç”¨ <code>wget</code> æˆ–è€… <code>curl</code> å·¥å…·ä¸‹è½½ï¼Œå¤„ç†æƒé™ã€è§£å‹ç¼©ã€ç„¶åæ¸…ç†æ— ç”¨æ–‡ä»¶æ›´åˆç†ã€‚å› æ­¤ï¼Œè¿™ä¸ªåŠŸèƒ½å…¶å®å¹¶ä¸å®ç”¨ï¼Œè€Œä¸”ä¸æ¨èä½¿ç”¨ã€‚</p>
<p>å¦‚æœ <code>&lt;æºè·¯å¾„&gt;</code> ä¸ºä¸€ä¸ª <code>tar</code> å‹ç¼©æ–‡ä»¶çš„è¯ï¼Œå‹ç¼©æ ¼å¼ä¸º <code>gzip</code>, <code>bzip2</code> ä»¥åŠ <code>xz</code> çš„æƒ…å†µä¸‹ï¼Œ<code>ADD</code> æŒ‡ä»¤å°†ä¼šè‡ªåŠ¨è§£å‹ç¼©è¿™ä¸ªå‹ç¼©æ–‡ä»¶åˆ° <code>&lt;ç›®æ ‡è·¯å¾„&gt;</code> å»ã€‚</p>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè‡ªåŠ¨è§£å‹ç¼©çš„åŠŸèƒ½éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚å®˜æ–¹é•œåƒ <code>ubuntu</code> ä¸­ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> scratch</span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> ubuntu-xenial-core-cloudimg-amd64-root.tar.gz /</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬çœŸçš„æ˜¯å¸Œæœ›å¤åˆ¶ä¸ªå‹ç¼©æ–‡ä»¶è¿›å»ï¼Œè€Œä¸è§£å‹ç¼©ï¼Œè¿™æ—¶å°±ä¸å¯ä»¥ä½¿ç”¨ <code>ADD</code> å‘½ä»¤äº†ã€‚</p>
<p>åœ¨ Docker å®˜æ–¹çš„ <a href="https://yeasy.gitbooks.io/docker_practice/content/appendix/best_practices.html" target="_blank" rel="noopener">Dockerfile æœ€ä½³å®è·µæ–‡æ¡£</a> ä¸­è¦æ±‚ï¼Œå°½å¯èƒ½çš„ä½¿ç”¨ <code>COPY</code>ï¼Œå› ä¸º <code>COPY</code> çš„è¯­ä¹‰å¾ˆæ˜ç¡®ï¼Œå°±æ˜¯å¤åˆ¶æ–‡ä»¶è€Œå·²ï¼Œè€Œ <code>ADD</code> åˆ™åŒ…å«äº†æ›´å¤æ‚çš„åŠŸèƒ½ï¼Œå…¶è¡Œä¸ºä¹Ÿä¸ä¸€å®šå¾ˆæ¸…æ™°ã€‚æœ€é€‚åˆä½¿ç”¨ <code>ADD</code> çš„åœºåˆï¼Œå°±æ˜¯æ‰€æåŠçš„éœ€è¦è‡ªåŠ¨è§£å‹ç¼©çš„åœºåˆã€‚</p>
<p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>ADD</code> æŒ‡ä»¤ä¼šä»¤é•œåƒæ„å»ºç¼“å­˜å¤±æ•ˆï¼Œä»è€Œå¯èƒ½ä¼šä»¤é•œåƒæ„å»ºå˜å¾—æ¯”è¾ƒç¼“æ…¢ã€‚</p>
<p>å› æ­¤åœ¨ <code>COPY</code> å’Œ <code>ADD</code> æŒ‡ä»¤ä¸­é€‰æ‹©çš„æ—¶å€™ï¼Œå¯ä»¥éµå¾ªè¿™æ ·çš„åŸåˆ™ï¼Œæ‰€æœ‰çš„æ–‡ä»¶å¤åˆ¶å‡ä½¿ç”¨ <code>COPY</code> æŒ‡ä»¤ï¼Œä»…åœ¨éœ€è¦è‡ªåŠ¨è§£å‹ç¼©çš„åœºåˆä½¿ç”¨ <code>ADD</code>ã€‚</p>
<p>åœ¨ä½¿ç”¨è¯¥æŒ‡ä»¤çš„æ—¶å€™è¿˜å¯ä»¥åŠ ä¸Š <code>--chown=:</code> é€‰é¡¹æ¥æ”¹å˜æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·åŠæ‰€å±ç»„ã€‚</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ADD</span><span class="bash"> --chown=55:mygroup files* /mydir/</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> --chown=bin files* /mydir/</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> --chown=1 files* /mydir/</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> --chown=10:11 files* /mydir/</span></span><br></pre></td></tr></table></figure>
<h2 id="CMD-å®¹å™¨å¯åŠ¨å‘½ä»¤"><a href="#CMD-å®¹å™¨å¯åŠ¨å‘½ä»¤" class="headerlink" title="CMD å®¹å™¨å¯åŠ¨å‘½ä»¤"></a>CMD å®¹å™¨å¯åŠ¨å‘½ä»¤</h2><p><code>CMD</code> æŒ‡ä»¤çš„æ ¼å¼å’Œ <code>RUN</code> ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯ä¸¤ç§æ ¼å¼ï¼š</p>
<ul>
<li><code>shell</code> æ ¼å¼ï¼š<code>CMD &lt;å‘½ä»¤&gt;</code></li>
<li><code>exec</code> æ ¼å¼ï¼š<code>CMD [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;, &quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot;...]</code></li>
<li>å‚æ•°åˆ—è¡¨æ ¼å¼ï¼š<code>CMD [&quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot;...]</code>ã€‚åœ¨æŒ‡å®šäº† <code>ENTRYPOINT</code> æŒ‡ä»¤åï¼Œç”¨ <code>CMD</code> æŒ‡å®šå…·ä½“çš„å‚æ•°ã€‚</li>
</ul>
<p>ä¹‹å‰ä»‹ç»å®¹å™¨çš„æ—¶å€™æ›¾ç»è¯´è¿‡ï¼ŒDocker ä¸æ˜¯è™šæ‹Ÿæœºï¼Œå®¹å™¨å°±æ˜¯è¿›ç¨‹ã€‚æ—¢ç„¶æ˜¯è¿›ç¨‹ï¼Œé‚£ä¹ˆåœ¨å¯åŠ¨å®¹å™¨çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šæ‰€è¿è¡Œçš„ç¨‹åºåŠå‚æ•°ã€‚<code>CMD</code> æŒ‡ä»¤å°±æ˜¯ç”¨äºæŒ‡å®šé»˜è®¤çš„å®¹å™¨ä¸»è¿›ç¨‹çš„å¯åŠ¨å‘½ä»¤çš„ã€‚</p>
<p>åœ¨è¿è¡Œæ—¶å¯ä»¥æŒ‡å®šæ–°çš„å‘½ä»¤æ¥æ›¿ä»£é•œåƒè®¾ç½®ä¸­çš„è¿™ä¸ªé»˜è®¤å‘½ä»¤ï¼Œæ¯”å¦‚ï¼Œ<code>ubuntu</code> é•œåƒé»˜è®¤çš„ <code>CMD</code> æ˜¯ <code>/bin/bash</code>ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥ <code>docker run -it ubuntu</code> çš„è¯ï¼Œä¼šç›´æ¥è¿›å…¥ <code>bash</code>ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶æŒ‡å®šè¿è¡Œåˆ«çš„å‘½ä»¤ï¼Œå¦‚ <code>docker run -it ubuntu cat /etc/os-release</code>ã€‚è¿™å°±æ˜¯ç”¨ <code>cat /etc/os-release</code> å‘½ä»¤æ›¿æ¢äº†é»˜è®¤çš„ <code>/bin/bash</code> å‘½ä»¤äº†ï¼Œè¾“å‡ºäº†ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯ã€‚</p>
<p>åœ¨æŒ‡ä»¤æ ¼å¼ä¸Šï¼Œä¸€èˆ¬æ¨èä½¿ç”¨ <code>exec</code> æ ¼å¼ï¼Œè¿™ç±»æ ¼å¼åœ¨è§£ææ—¶ä¼šè¢«è§£æä¸º JSON æ•°ç»„ï¼Œå› æ­¤ä¸€å®šè¦ä½¿ç”¨åŒå¼•å· <code>&quot;</code>ï¼Œè€Œä¸è¦ä½¿ç”¨å•å¼•å·ã€‚</p>
<p>å¦‚æœä½¿ç”¨ <code>shell</code> æ ¼å¼çš„è¯ï¼Œå®é™…çš„å‘½ä»¤ä¼šè¢«åŒ…è£…ä¸º <code>sh -c</code> çš„å‚æ•°çš„å½¢å¼è¿›è¡Œæ‰§è¡Œã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$HOME</span></span></span><br></pre></td></tr></table></figure>
<p>åœ¨å®é™…æ‰§è¡Œä¸­ï¼Œä¼šå°†å…¶å˜æ›´ä¸ºï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="bash"> [ <span class="string">"sh"</span>, <span class="string">"-c"</span>, <span class="string">"echo <span class="variable">$HOME</span>"</span> ]</span></span><br></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡çš„åŸå› ï¼Œå› ä¸ºè¿™äº›ç¯å¢ƒå˜é‡ä¼šè¢« shell è¿›è¡Œè§£æå¤„ç†ã€‚</p>
<p>æåˆ° <code>CMD</code> å°±ä¸å¾—ä¸æå®¹å™¨ä¸­åº”ç”¨åœ¨å‰å°æ‰§è¡Œå’Œåå°æ‰§è¡Œçš„é—®é¢˜ã€‚è¿™æ˜¯åˆå­¦è€…å¸¸å‡ºç°çš„ä¸€ä¸ªæ··æ·†ã€‚</p>
<p>Docker ä¸æ˜¯è™šæ‹Ÿæœºï¼Œå®¹å™¨ä¸­çš„åº”ç”¨éƒ½åº”è¯¥ä»¥å‰å°æ‰§è¡Œï¼Œè€Œä¸æ˜¯åƒè™šæ‹Ÿæœºã€ç‰©ç†æœºé‡Œé¢é‚£æ ·ï¼Œç”¨ <code>systemd</code> å»å¯åŠ¨åå°æœåŠ¡ï¼Œå®¹å™¨å†…æ²¡æœ‰åå°æœåŠ¡çš„æ¦‚å¿µã€‚</p>
<p>ä¸€äº›åˆå­¦è€…å°† <code>CMD</code> å†™ä¸ºï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="bash"> service nginx start</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åå‘ç°å®¹å™¨æ‰§è¡Œåå°±ç«‹å³é€€å‡ºäº†ã€‚ç”šè‡³åœ¨å®¹å™¨å†…å»ä½¿ç”¨ <code>systemctl</code> å‘½ä»¤ç»“æœå´å‘ç°æ ¹æœ¬æ‰§è¡Œä¸äº†ã€‚è¿™å°±æ˜¯å› ä¸ºæ²¡æœ‰ææ˜ç™½å‰å°ã€åå°çš„æ¦‚å¿µï¼Œæ²¡æœ‰åŒºåˆ†å®¹å™¨å’Œè™šæ‹Ÿæœºçš„å·®å¼‚ï¼Œä¾æ—§åœ¨ä»¥ä¼ ç»Ÿè™šæ‹Ÿæœºçš„è§’åº¦å»ç†è§£å®¹å™¨ã€‚</p>
<p><strong>å¯¹äºå®¹å™¨è€Œè¨€ï¼Œå…¶å¯åŠ¨ç¨‹åºå°±æ˜¯å®¹å™¨åº”ç”¨è¿›ç¨‹ï¼Œå®¹å™¨å°±æ˜¯ä¸ºäº†ä¸»è¿›ç¨‹è€Œå­˜åœ¨çš„ï¼Œä¸»è¿›ç¨‹é€€å‡ºï¼Œå®¹å™¨å°±å¤±å»äº†å­˜åœ¨çš„æ„ä¹‰ï¼Œä»è€Œé€€å‡ºï¼Œå…¶å®ƒè¾…åŠ©è¿›ç¨‹ä¸æ˜¯å®ƒéœ€è¦å…³å¿ƒçš„ä¸œè¥¿ã€‚</strong></p>
<p>è€Œä½¿ç”¨ <code>service nginx start</code> å‘½ä»¤ï¼Œåˆ™æ˜¯å¸Œæœ› upstart æ¥ä»¥åå°å®ˆæŠ¤è¿›ç¨‹å½¢å¼å¯åŠ¨ <code>nginx</code> æœåŠ¡ã€‚è€Œåˆšæ‰è¯´äº† <code>CMD service nginx start</code> ä¼šè¢«ç†è§£ä¸º <code>CMD [ &quot;sh&quot;, &quot;-c&quot;, &quot;service nginx start&quot;]</code>ï¼Œå› æ­¤ä¸»è¿›ç¨‹å®é™…ä¸Šæ˜¯ <code>sh</code>ã€‚é‚£ä¹ˆå½“ <code>service nginx start</code> å‘½ä»¤ç»“æŸåï¼Œ<code>sh</code> ä¹Ÿå°±ç»“æŸäº†ï¼Œ<code>sh</code> ä½œä¸ºä¸»è¿›ç¨‹é€€å‡ºäº†ï¼Œè‡ªç„¶å°±ä¼šä»¤å®¹å™¨é€€å‡ºã€‚</p>
<p>æ­£ç¡®çš„åšæ³•æ˜¯ç›´æ¥æ‰§è¡Œ <code>nginx</code> å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶ä¸”è¦æ±‚ä»¥å‰å°å½¢å¼è¿è¡Œã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"nginx"</span>, <span class="string">"-g"</span>, <span class="string">"daemon off;"</span>]</span></span><br></pre></td></tr></table></figure>
<h2 id="ENTRYPOINT-å…¥å£ç‚¹"><a href="#ENTRYPOINT-å…¥å£ç‚¹" class="headerlink" title="ENTRYPOINT å…¥å£ç‚¹"></a>ENTRYPOINT å…¥å£ç‚¹</h2><p><code>ENTRYPOINT</code> çš„æ ¼å¼å’Œ <code>RUN</code> æŒ‡ä»¤æ ¼å¼ä¸€æ ·ï¼Œåˆ†ä¸º <code>exec</code> æ ¼å¼å’Œ <code>shell</code> æ ¼å¼ã€‚</p>
<p><code>ENTRYPOINT</code> çš„ç›®çš„å’Œ <code>CMD</code> ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨æŒ‡å®šå®¹å™¨å¯åŠ¨ç¨‹åºåŠå‚æ•°ã€‚<code>ENTRYPOINT</code> åœ¨è¿è¡Œæ—¶ä¹Ÿå¯ä»¥æ›¿ä»£ï¼Œä¸è¿‡æ¯” <code>CMD</code> è¦ç•¥æ˜¾ç¹çï¼Œéœ€è¦é€šè¿‡ <code>docker run</code> çš„å‚æ•° <code>--entrypoint</code> æ¥æŒ‡å®šã€‚</p>
<p>å½“æŒ‡å®šäº† <code>ENTRYPOINT</code> åï¼Œ<code>CMD</code> çš„å«ä¹‰å°±å‘ç”Ÿäº†æ”¹å˜ï¼Œä¸å†æ˜¯ç›´æ¥çš„è¿è¡Œå…¶å‘½ä»¤ï¼Œè€Œæ˜¯å°† <code>CMD</code> çš„å†…å®¹ä½œä¸ºå‚æ•°ä¼ ç»™ <code>ENTRYPOINT</code> æŒ‡ä»¤ï¼Œæ¢å¥è¯è¯´å®é™…æ‰§è¡Œæ—¶ï¼Œå°†å˜ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;ENTRYPOINT&gt; <span class="string">"&lt;CMD&gt;"</span></span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆæœ‰äº† <code>CMD</code> åï¼Œä¸ºä»€ä¹ˆè¿˜è¦æœ‰ <code>ENTRYPOINT</code> å‘¢ï¼Ÿè¿™ç§ <code>&quot;&quot;</code> æœ‰ä»€ä¹ˆå¥½å¤„ä¹ˆï¼Ÿè®©æˆ‘ä»¬æ¥çœ‹å‡ ä¸ªåœºæ™¯ã€‚</p>
<h3 id="åœºæ™¯ä¸€ï¼šè®©é•œåƒå˜æˆåƒå‘½ä»¤ä¸€æ ·ä½¿ç”¨"><a href="#åœºæ™¯ä¸€ï¼šè®©é•œåƒå˜æˆåƒå‘½ä»¤ä¸€æ ·ä½¿ç”¨" class="headerlink" title="åœºæ™¯ä¸€ï¼šè®©é•œåƒå˜æˆåƒå‘½ä»¤ä¸€æ ·ä½¿ç”¨"></a>åœºæ™¯ä¸€ï¼šè®©é•œåƒå˜æˆåƒå‘½ä»¤ä¸€æ ·ä½¿ç”¨</h3><p>å‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¾—çŸ¥è‡ªå·±å½“å‰å…¬ç½‘ IP çš„é•œåƒï¼Œé‚£ä¹ˆå¯ä»¥å…ˆç”¨ <code>CMD</code> æ¥å®ç°ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">18.04</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install -y curl \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [ <span class="string">"curl"</span>, <span class="string">"-s"</span>, <span class="string">"https://ip.cn"</span> ]</span></span><br></pre></td></tr></table></figure>
<p>å‡å¦‚æˆ‘ä»¬ä½¿ç”¨ <code>docker build -t myip .</code> æ¥æ„å»ºé•œåƒçš„è¯ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æŸ¥è¯¢å½“å‰å…¬ç½‘ IPï¼Œåªéœ€è¦æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run myip</span><br><span class="line">å½“å‰ IPï¼š61.148.226.66 æ¥è‡ªï¼šåŒ—äº¬å¸‚ è”é€š</span><br></pre></td></tr></table></figure>
<p>å—¯ï¼Œè¿™ä¹ˆçœ‹èµ·æ¥å¥½åƒå¯ä»¥ç›´æ¥æŠŠé•œåƒå½“åšå‘½ä»¤ä½¿ç”¨äº†ï¼Œä¸è¿‡å‘½ä»¤æ€»æœ‰å‚æ•°ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ›åŠ å‚æ•°å‘¢ï¼Ÿæ¯”å¦‚ä»ä¸Šé¢çš„ <code>CMD</code> ä¸­å¯ä»¥çœ‹åˆ°å®è´¨çš„å‘½ä»¤æ˜¯ <code>curl</code>ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬å¸Œæœ›æ˜¾ç¤º HTTP å¤´ä¿¡æ¯ï¼Œå°±éœ€è¦åŠ ä¸Š <code>-i</code> å‚æ•°ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥åŠ  <code>-i</code> å‚æ•°ç»™ <code>docker run myip</code> ä¹ˆï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run myip -i</span><br><span class="line">docker: Error response from daemon: invalid header field value <span class="string">"oci runtime error: container_linux.go:247: starting container process caused \"exec: \\\"-i\\\": executable file not found in <span class="variable">$PATH</span>\"\n"</span>.</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯æ‰§è¡Œæ–‡ä»¶æ‰¾ä¸åˆ°çš„æŠ¥é”™ï¼Œ<code>executable file not found</code>ã€‚ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼Œè·Ÿåœ¨é•œåƒååé¢çš„æ˜¯ <code>command</code>ï¼Œè¿è¡Œæ—¶ä¼šæ›¿æ¢ <code>CMD</code> çš„é»˜è®¤å€¼ã€‚å› æ­¤è¿™é‡Œçš„ <code>-i</code> æ›¿æ¢äº†åŸæ¥çš„ <code>CMD</code>ï¼Œè€Œä¸æ˜¯æ·»åŠ åœ¨åŸæ¥çš„ <code>curl -s https://ip.cn</code> åé¢ã€‚è€Œ <code>-i</code> æ ¹æœ¬ä¸æ˜¯å‘½ä»¤ï¼Œæ‰€ä»¥è‡ªç„¶æ‰¾ä¸åˆ°ã€‚</p>
<p>é‚£ä¹ˆå¦‚æœæˆ‘ä»¬å¸Œæœ›åŠ å…¥ <code>-i</code> è¿™å‚æ•°ï¼Œæˆ‘ä»¬å°±å¿…é¡»é‡æ–°å®Œæ•´çš„è¾“å…¥è¿™ä¸ªå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run myip curl -s https://ip.cn -i</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¾ç„¶ä¸æ˜¯å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œä½¿ç”¨ <code>ENTRYPOINT</code> å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç°åœ¨æˆ‘ä»¬é‡æ–°ç”¨ <code>ENTRYPOINT</code> æ¥å®ç°è¿™ä¸ªé•œåƒï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">18.04</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update \</span></span><br><span class="line"><span class="bash">    &amp;&amp; apt-get install -y curl \</span></span><br><span class="line"><span class="bash">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [ <span class="string">"curl"</span>, <span class="string">"-s"</span>, <span class="string">"https://ip.cn"</span> ]</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ¬¡æˆ‘ä»¬å†æ¥å°è¯•ç›´æ¥ä½¿ç”¨ <code>docker run myip -i</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run myip</span><br><span class="line">å½“å‰ IPï¼š61.148.226.66 æ¥è‡ªï¼šåŒ—äº¬å¸‚ è”é€š</span><br><span class="line"></span><br><span class="line">$ docker run myip -i</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.8.0</span><br><span class="line">Date: Tue, 22 Nov 2016 05:12:40 GMT</span><br><span class="line">Content-Type: text/html; charset=UTF-8</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">X-Powered-By: PHP/5.6.24-1~dotdeb+7.1</span><br><span class="line">X-Cache: MISS from cache-2</span><br><span class="line">X-Cache-Lookup: MISS from cache-2:80</span><br><span class="line">X-Cache: MISS from proxy-2_6</span><br><span class="line">Transfer-Encoding: chunked</span><br><span class="line">Via: 1.1 cache-2:80, 1.1 proxy-2_6:8006</span><br><span class="line">Connection: keep-alive</span><br><span class="line"></span><br><span class="line">å½“å‰ IPï¼š61.148.226.66 æ¥è‡ªï¼šåŒ—äº¬å¸‚ è”é€š</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ¬¡æˆåŠŸäº†ã€‚è¿™æ˜¯å› ä¸ºå½“å­˜åœ¨ <code>ENTRYPOINT</code> åï¼Œ<code>CMD</code> çš„å†…å®¹å°†ä¼šä½œä¸ºå‚æ•°ä¼ ç»™ <code>ENTRYPOINT</code>ï¼Œè€Œè¿™é‡Œ <code>-i</code> å°±æ˜¯æ–°çš„ <code>CMD</code>ï¼Œå› æ­¤ä¼šä½œä¸ºå‚æ•°ä¼ ç»™ <code>curl</code>ï¼Œä»è€Œè¾¾åˆ°äº†æˆ‘ä»¬é¢„æœŸçš„æ•ˆæœã€‚</p>
<h3 id="åœºæ™¯äºŒï¼šåº”ç”¨è¿è¡Œå‰çš„å‡†å¤‡å·¥ä½œ"><a href="#åœºæ™¯äºŒï¼šåº”ç”¨è¿è¡Œå‰çš„å‡†å¤‡å·¥ä½œ" class="headerlink" title="åœºæ™¯äºŒï¼šåº”ç”¨è¿è¡Œå‰çš„å‡†å¤‡å·¥ä½œ"></a>åœºæ™¯äºŒï¼šåº”ç”¨è¿è¡Œå‰çš„å‡†å¤‡å·¥ä½œ</h3><p>å¯åŠ¨å®¹å™¨å°±æ˜¯å¯åŠ¨ä¸»è¿›ç¨‹ï¼Œä½†æœ‰äº›æ—¶å€™ï¼Œå¯åŠ¨ä¸»è¿›ç¨‹å‰ï¼Œéœ€è¦ä¸€äº›å‡†å¤‡å·¥ä½œã€‚</p>
<p>æ¯”å¦‚ <code>mysql</code> ç±»çš„æ•°æ®åº“ï¼Œå¯èƒ½éœ€è¦ä¸€äº›æ•°æ®åº“é…ç½®ã€åˆå§‹åŒ–çš„å·¥ä½œï¼Œè¿™äº›å·¥ä½œè¦åœ¨æœ€ç»ˆçš„ mysql æœåŠ¡å™¨è¿è¡Œä¹‹å‰è§£å†³ã€‚</p>
<p>æ­¤å¤–ï¼Œå¯èƒ½å¸Œæœ›é¿å…ä½¿ç”¨ <code>root</code> ç”¨æˆ·å»å¯åŠ¨æœåŠ¡ï¼Œä»è€Œæé«˜å®‰å…¨æ€§ï¼Œè€Œåœ¨å¯åŠ¨æœåŠ¡å‰è¿˜éœ€è¦ä»¥ <code>root</code> èº«ä»½æ‰§è¡Œä¸€äº›å¿…è¦çš„å‡†å¤‡å·¥ä½œï¼Œæœ€ååˆ‡æ¢åˆ°æœåŠ¡ç”¨æˆ·èº«ä»½å¯åŠ¨æœåŠ¡ã€‚æˆ–è€…é™¤äº†æœåŠ¡å¤–ï¼Œå…¶å®ƒå‘½ä»¤ä¾æ—§å¯ä»¥ä½¿ç”¨ <code>root</code> èº«ä»½æ‰§è¡Œï¼Œæ–¹ä¾¿è°ƒè¯•ç­‰ã€‚</p>
<p>è¿™äº›å‡†å¤‡å·¥ä½œæ˜¯å’Œå®¹å™¨ <code>CMD</code> æ— å…³çš„ï¼Œæ— è®º <code>CMD</code> ä¸ºä»€ä¹ˆï¼Œéƒ½éœ€è¦äº‹å…ˆè¿›è¡Œä¸€ä¸ªé¢„å¤„ç†çš„å·¥ä½œã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å†™ä¸€ä¸ªè„šæœ¬ï¼Œç„¶åæ”¾å…¥ <code>ENTRYPOINT</code> ä¸­å»æ‰§è¡Œï¼Œè€Œè¿™ä¸ªè„šæœ¬ä¼šå°†æ¥åˆ°çš„å‚æ•°ï¼ˆä¹Ÿå°±æ˜¯ <code></code>ï¼‰ä½œä¸ºå‘½ä»¤ï¼Œåœ¨è„šæœ¬æœ€åæ‰§è¡Œã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ <code>redis</code> ä¸­å°±æ˜¯è¿™ä¹ˆåšçš„ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> alpine:<span class="number">3.4</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> addgroup -S redis &amp;&amp; adduser -S -G redis redis</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">"docker-entrypoint.sh"</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">6379</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [ <span class="string">"redis-server"</span> ]</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°å…¶ä¸­ä¸ºäº† redis æœåŠ¡åˆ›å»ºäº† redis ç”¨æˆ·ï¼Œå¹¶åœ¨æœ€åæŒ‡å®šäº† <code>ENTRYPOINT</code> ä¸º <code>docker-entrypoint.sh</code> è„šæœ¬ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">...</span><br><span class="line"><span class="comment"># allow the container to be started with `--user`</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$1</span>"</span> = <span class="string">'redis-server'</span> -a <span class="string">"<span class="variable">$(id -u)</span>"</span> = <span class="string">'0'</span> ]; <span class="keyword">then</span></span><br><span class="line">    chown -R redis .</span><br><span class="line">    <span class="built_in">exec</span> su-exec redis <span class="string">"<span class="variable">$0</span>"</span> <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span> <span class="string">"<span class="variable">$@</span>"</span></span><br></pre></td></tr></table></figure>
<p>è¯¥è„šæœ¬çš„å†…å®¹å°±æ˜¯æ ¹æ® <code>CMD</code> çš„å†…å®¹æ¥åˆ¤æ–­ï¼Œå¦‚æœæ˜¯ <code>redis-server</code> çš„è¯ï¼Œåˆ™åˆ‡æ¢åˆ° <code>redis</code> ç”¨æˆ·èº«ä»½å¯åŠ¨æœåŠ¡å™¨ï¼Œå¦åˆ™ä¾æ—§ä½¿ç”¨ <code>root</code> èº«ä»½æ‰§è¡Œã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -it redis id</span><br><span class="line">uid=0(root) gid=0(root) groups=0(root)</span><br></pre></td></tr></table></figure>
<h2 id="ENV-è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#ENV-è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="ENV è®¾ç½®ç¯å¢ƒå˜é‡"></a>ENV è®¾ç½®ç¯å¢ƒå˜é‡</h2><p>æ ¼å¼æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li><code>ENV</code></li>
<li><code>ENV = =...</code></li>
</ul>
<p>è¿™ä¸ªæŒ‡ä»¤å¾ˆç®€å•ï¼Œå°±æ˜¯è®¾ç½®ç¯å¢ƒå˜é‡è€Œå·²ï¼Œæ— è®ºæ˜¯åé¢çš„å…¶å®ƒæŒ‡ä»¤ï¼Œå¦‚ <code>RUN</code>ï¼Œè¿˜æ˜¯è¿è¡Œæ—¶çš„åº”ç”¨ï¼Œéƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™é‡Œå®šä¹‰çš„ç¯å¢ƒå˜é‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ENV VERSION=1.0 DEBUG=on \</span><br><span class="line">    NAME=&quot;Happy Feet&quot;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¾‹å­ä¸­æ¼”ç¤ºäº†å¦‚ä½•æ¢è¡Œï¼Œä»¥åŠå¯¹å«æœ‰ç©ºæ ¼çš„å€¼ç”¨åŒå¼•å·æ‹¬èµ·æ¥çš„åŠæ³•ï¼Œè¿™å’Œ Shell ä¸‹çš„è¡Œä¸ºæ˜¯ä¸€è‡´çš„ã€‚</p>
<p>å®šä¹‰äº†ç¯å¢ƒå˜é‡ï¼Œé‚£ä¹ˆåœ¨åç»­çš„æŒ‡ä»¤ä¸­ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç¯å¢ƒå˜é‡ã€‚æ¯”å¦‚åœ¨å®˜æ–¹ <code>node</code> é•œåƒ <code>Dockerfile</code> ä¸­ï¼Œå°±æœ‰ç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ENV</span> NODE_VERSION <span class="number">7.2</span>.<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> curl -SLO <span class="string">"https://nodejs.org/dist/v<span class="variable">$NODE_VERSION</span>/node-v<span class="variable">$NODE_VERSION</span>-linux-x64.tar.xz"</span> \</span></span><br><span class="line"><span class="bash">  &amp;&amp; curl -SLO <span class="string">"https://nodejs.org/dist/v<span class="variable">$NODE_VERSION</span>/SHASUMS256.txt.asc"</span> \</span></span><br><span class="line"><span class="bash">  &amp;&amp; gpg --batch --decrypt --output SHASUMS256.txt SHASUMS256.txt.asc \</span></span><br><span class="line"><span class="bash">  &amp;&amp; grep <span class="string">" node-v<span class="variable">$NODE_VERSION</span>-linux-x64.tar.xz\$"</span> SHASUMS256.txt | sha256sum -c - \</span></span><br><span class="line"><span class="bash">  &amp;&amp; tar -xJf <span class="string">"node-v<span class="variable">$NODE_VERSION</span>-linux-x64.tar.xz"</span> -C /usr/<span class="built_in">local</span> --strip-components=1 \</span></span><br><span class="line"><span class="bash">  &amp;&amp; rm <span class="string">"node-v<span class="variable">$NODE_VERSION</span>-linux-x64.tar.xz"</span> SHASUMS256.txt.asc SHASUMS256.txt \</span></span><br><span class="line"><span class="bash">  &amp;&amp; ln -s /usr/<span class="built_in">local</span>/bin/node /usr/<span class="built_in">local</span>/bin/nodejs</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œå…ˆå®šä¹‰äº†ç¯å¢ƒå˜é‡ <code>NODE_VERSION</code>ï¼Œå…¶åçš„ <code>RUN</code> è¿™å±‚é‡Œï¼Œå¤šæ¬¡ä½¿ç”¨ <code>$NODE_VERSION</code> æ¥è¿›è¡Œæ“ä½œå®šåˆ¶ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå°†æ¥å‡çº§é•œåƒæ„å»ºç‰ˆæœ¬çš„æ—¶å€™ï¼Œåªéœ€è¦æ›´æ–° <code>7.2.0</code> å³å¯ï¼Œ<code>Dockerfile</code> æ„å»ºç»´æŠ¤å˜å¾—æ›´è½»æ¾äº†ã€‚</p>
<p>ä¸‹åˆ—æŒ‡ä»¤å¯ä»¥æ”¯æŒç¯å¢ƒå˜é‡å±•å¼€ï¼š <code>ADD</code>ã€<code>COPY</code>ã€<code>ENV</code>ã€<code>EXPOSE</code>ã€<code>FROM</code>ã€<code>LABEL</code>ã€<code>USER</code>ã€<code>WORKDIR</code>ã€<code>VOLUME</code>ã€<code>STOPSIGNAL</code>ã€<code>ONBUILD</code>ã€<code>RUN</code>ã€‚</p>
<p>å¯ä»¥ä»è¿™ä¸ªæŒ‡ä»¤åˆ—è¡¨é‡Œæ„Ÿè§‰åˆ°ï¼Œç¯å¢ƒå˜é‡å¯ä»¥ä½¿ç”¨çš„åœ°æ–¹å¾ˆå¤šï¼Œå¾ˆå¼ºå¤§ã€‚é€šè¿‡ç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥è®©ä¸€ä»½ <code>Dockerfile</code> åˆ¶ä½œæ›´å¤šçš„é•œåƒï¼Œåªéœ€ä½¿ç”¨ä¸åŒçš„ç¯å¢ƒå˜é‡å³å¯ã€‚</p>
<h2 id="ARG-æ„å»ºå‚æ•°"><a href="#ARG-æ„å»ºå‚æ•°" class="headerlink" title="ARG æ„å»ºå‚æ•°"></a>ARG æ„å»ºå‚æ•°</h2><p>æ ¼å¼ï¼š<code>ARG &lt;å‚æ•°å&gt;[=&lt;é»˜è®¤å€¼&gt;]</code></p>
<p>æ„å»ºå‚æ•°å’Œ <code>ENV</code> çš„æ•ˆæœä¸€æ ·ï¼Œéƒ½æ˜¯è®¾ç½®ç¯å¢ƒå˜é‡ã€‚æ‰€ä¸åŒçš„æ˜¯ï¼Œ<code>ARG</code> æ‰€è®¾ç½®çš„æ„å»ºç¯å¢ƒçš„ç¯å¢ƒå˜é‡ï¼Œåœ¨å°†æ¥å®¹å™¨è¿è¡Œæ—¶æ˜¯ä¸ä¼šå­˜åœ¨è¿™äº›ç¯å¢ƒå˜é‡çš„ã€‚ä½†æ˜¯ä¸è¦å› æ­¤å°±ä½¿ç”¨ <code>ARG</code> ä¿å­˜å¯†ç ä¹‹ç±»çš„ä¿¡æ¯ï¼Œå› ä¸º <code>docker history</code> è¿˜æ˜¯å¯ä»¥çœ‹åˆ°æ‰€æœ‰å€¼çš„ã€‚</p>
<p><code>Dockerfile</code> ä¸­çš„ <code>ARG</code> æŒ‡ä»¤æ˜¯å®šä¹‰å‚æ•°åç§°ï¼Œä»¥åŠå®šä¹‰å…¶é»˜è®¤å€¼ã€‚è¯¥é»˜è®¤å€¼å¯ä»¥åœ¨æ„å»ºå‘½ä»¤ <code>docker build</code> ä¸­ç”¨ <code>--build-arg &lt;å‚æ•°å&gt;=&lt;å€¼&gt;</code> æ¥è¦†ç›–ã€‚</p>
<p>åœ¨ 1.13 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œè¦æ±‚ <code>--build-arg</code> ä¸­çš„å‚æ•°åï¼Œå¿…é¡»åœ¨ <code>Dockerfile</code> ä¸­ç”¨ <code>ARG</code> å®šä¹‰è¿‡äº†ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯ <code>--build-arg</code> æŒ‡å®šçš„å‚æ•°ï¼Œå¿…é¡»åœ¨ <code>Dockerfile</code> ä¸­ä½¿ç”¨äº†ã€‚å¦‚æœå¯¹åº”å‚æ•°æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œåˆ™ä¼šæŠ¥é”™é€€å‡ºæ„å»ºã€‚ä» 1.13 å¼€å§‹ï¼Œè¿™ç§ä¸¥æ ¼çš„é™åˆ¶è¢«æ”¾å¼€ï¼Œä¸å†æŠ¥é”™é€€å‡ºï¼Œè€Œæ˜¯æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ï¼Œå¹¶ç»§ç»­æ„å»ºã€‚è¿™å¯¹äºä½¿ç”¨ CI ç³»ç»Ÿï¼Œç”¨åŒæ ·çš„æ„å»ºæµç¨‹æ„å»ºä¸åŒçš„ <code>Dockerfile</code> çš„æ—¶å€™æ¯”è¾ƒæœ‰å¸®åŠ©ï¼Œé¿å…æ„å»ºå‘½ä»¤å¿…é¡»æ ¹æ®æ¯ä¸ª Dockerfile çš„å†…å®¹ä¿®æ”¹ã€‚</p>
<h2 id="VOLUME-å®šä¹‰åŒ¿åå·"><a href="#VOLUME-å®šä¹‰åŒ¿åå·" class="headerlink" title="VOLUME å®šä¹‰åŒ¿åå·"></a>VOLUME å®šä¹‰åŒ¿åå·</h2><p>æ ¼å¼ä¸ºï¼š</p>
<ul>
<li><code>VOLUME [&quot;&lt;è·¯å¾„1&gt;&quot;, &quot;&lt;è·¯å¾„2&gt;&quot;...]</code></li>
<li><code>VOLUME &lt;è·¯å¾„&gt;</code></li>
</ul>
<p>ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼Œå®¹å™¨è¿è¡Œæ—¶åº”è¯¥å°½é‡ä¿æŒå®¹å™¨å­˜å‚¨å±‚ä¸å‘ç”Ÿå†™æ“ä½œï¼Œå¯¹äºæ•°æ®åº“ç±»éœ€è¦ä¿å­˜åŠ¨æ€æ•°æ®çš„åº”ç”¨ï¼Œå…¶æ•°æ®åº“æ–‡ä»¶åº”è¯¥ä¿å­˜äºå·(volume)ä¸­ï¼Œåé¢çš„ç« èŠ‚æˆ‘ä»¬ä¼šè¿›ä¸€æ­¥ä»‹ç» Docker å·çš„æ¦‚å¿µã€‚ä¸ºäº†é˜²æ­¢è¿è¡Œæ—¶ç”¨æˆ·å¿˜è®°å°†åŠ¨æ€æ–‡ä»¶æ‰€ä¿å­˜ç›®å½•æŒ‚è½½ä¸ºå·ï¼Œåœ¨ <code>Dockerfile</code> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥äº‹å…ˆæŒ‡å®šæŸäº›ç›®å½•æŒ‚è½½ä¸ºåŒ¿åå·ï¼Œè¿™æ ·åœ¨è¿è¡Œæ—¶å¦‚æœç”¨æˆ·ä¸æŒ‡å®šæŒ‚è½½ï¼Œå…¶åº”ç”¨ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä¸ä¼šå‘å®¹å™¨å­˜å‚¨å±‚å†™å…¥å¤§é‡æ•°æ®ã€‚</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">VOLUME</span><span class="bash"> /data</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ <code>/data</code> ç›®å½•å°±ä¼šåœ¨è¿è¡Œæ—¶è‡ªåŠ¨æŒ‚è½½ä¸ºåŒ¿åå·ï¼Œä»»ä½•å‘ <code>/data</code> ä¸­å†™å…¥çš„ä¿¡æ¯éƒ½ä¸ä¼šè®°å½•è¿›å®¹å™¨å­˜å‚¨å±‚ï¼Œä»è€Œä¿è¯äº†å®¹å™¨å­˜å‚¨å±‚çš„æ— çŠ¶æ€åŒ–ã€‚å½“ç„¶ï¼Œè¿è¡Œæ—¶å¯ä»¥è¦†ç›–è¿™ä¸ªæŒ‚è½½è®¾ç½®ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -v mydata:/data xxxx</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™è¡Œå‘½ä»¤ä¸­ï¼Œå°±ä½¿ç”¨äº† <code>mydata</code> è¿™ä¸ªå‘½åå·æŒ‚è½½åˆ°äº† <code>/data</code> è¿™ä¸ªä½ç½®ï¼Œæ›¿ä»£äº† <code>Dockerfile</code> ä¸­å®šä¹‰çš„åŒ¿åå·çš„æŒ‚è½½é…ç½®ã€‚</p>
<h2 id="EXPOSE-å£°æ˜ç«¯å£"><a href="#EXPOSE-å£°æ˜ç«¯å£" class="headerlink" title="EXPOSE å£°æ˜ç«¯å£"></a>EXPOSE å£°æ˜ç«¯å£</h2><p>æ ¼å¼ä¸º <code>EXPOSE &lt;ç«¯å£1&gt; [&lt;ç«¯å£2&gt;...]</code>ã€‚</p>
<p><code>EXPOSE</code> æŒ‡ä»¤æ˜¯å£°æ˜è¿è¡Œæ—¶å®¹å™¨æä¾›æœåŠ¡ç«¯å£ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå£°æ˜ï¼Œåœ¨è¿è¡Œæ—¶å¹¶ä¸ä¼šå› ä¸ºè¿™ä¸ªå£°æ˜åº”ç”¨å°±ä¼šå¼€å¯è¿™ä¸ªç«¯å£çš„æœåŠ¡ã€‚åœ¨ Dockerfile ä¸­å†™å…¥è¿™æ ·çš„å£°æ˜æœ‰ä¸¤ä¸ªå¥½å¤„ï¼Œä¸€ä¸ªæ˜¯å¸®åŠ©é•œåƒä½¿ç”¨è€…ç†è§£è¿™ä¸ªé•œåƒæœåŠ¡çš„å®ˆæŠ¤ç«¯å£ï¼Œä»¥æ–¹ä¾¿é…ç½®æ˜ å°„ï¼›å¦ä¸€ä¸ªç”¨å¤„åˆ™æ˜¯åœ¨è¿è¡Œæ—¶ä½¿ç”¨éšæœºç«¯å£æ˜ å°„æ—¶ï¼Œä¹Ÿå°±æ˜¯ <code>docker run -P</code> æ—¶ï¼Œä¼šè‡ªåŠ¨éšæœºæ˜ å°„ <code>EXPOSE</code> çš„ç«¯å£ã€‚</p>
<p>è¦å°† <code>EXPOSE</code> å’Œåœ¨è¿è¡Œæ—¶ä½¿ç”¨ <code>-p &lt;å®¿ä¸»ç«¯å£&gt;:&lt;å®¹å™¨ç«¯å£&gt;</code> åŒºåˆ†å¼€æ¥ã€‚<code>-p</code>ï¼Œæ˜¯æ˜ å°„å®¿ä¸»ç«¯å£å’Œå®¹å™¨ç«¯å£ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯å°†å®¹å™¨çš„å¯¹åº”ç«¯å£æœåŠ¡å…¬å¼€ç»™å¤–ç•Œè®¿é—®ï¼Œè€Œ <code>EXPOSE</code> ä»…ä»…æ˜¯å£°æ˜å®¹å™¨æ‰“ç®—ä½¿ç”¨ä»€ä¹ˆç«¯å£è€Œå·²ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨åœ¨å®¿ä¸»è¿›è¡Œç«¯å£æ˜ å°„ã€‚</p>
<h2 id="WORKDIR-æŒ‡å®šå·¥ä½œç›®å½•"><a href="#WORKDIR-æŒ‡å®šå·¥ä½œç›®å½•" class="headerlink" title="WORKDIR æŒ‡å®šå·¥ä½œç›®å½•"></a>WORKDIR æŒ‡å®šå·¥ä½œç›®å½•</h2><p>æ ¼å¼ä¸º <code>WORKDIR &lt;å·¥ä½œç›®å½•è·¯å¾„&gt;</code>ã€‚</p>
<p>ä½¿ç”¨ <code>WORKDIR</code> æŒ‡ä»¤å¯ä»¥æ¥æŒ‡å®šå·¥ä½œç›®å½•ï¼ˆæˆ–è€…ç§°ä¸ºå½“å‰ç›®å½•ï¼‰ï¼Œä»¥åå„å±‚çš„å½“å‰ç›®å½•å°±è¢«æ”¹ä¸ºæŒ‡å®šçš„ç›®å½•ï¼Œå¦‚è¯¥ç›®å½•ä¸å­˜åœ¨ï¼Œ<code>WORKDIR</code> ä¼šå¸®ä½ å»ºç«‹ç›®å½•ã€‚</p>
<p>ä¹‹å‰æåˆ°ä¸€äº›åˆå­¦è€…å¸¸çŠ¯çš„é”™è¯¯æ˜¯æŠŠ <code>Dockerfile</code> ç­‰åŒäº Shell è„šæœ¬æ¥ä¹¦å†™ï¼Œè¿™ç§é”™è¯¯çš„ç†è§£è¿˜å¯èƒ½ä¼šå¯¼è‡´å‡ºç°ä¸‹é¢è¿™æ ·çš„é”™è¯¯ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">cd</span> /app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"hello"</span> &gt; world.txt</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå°†è¿™ä¸ª <code>Dockerfile</code> è¿›è¡Œæ„å»ºé•œåƒè¿è¡Œåï¼Œä¼šå‘ç°æ‰¾ä¸åˆ° <code>/app/world.txt</code> æ–‡ä»¶ï¼Œæˆ–è€…å…¶å†…å®¹ä¸æ˜¯ <code>hello</code>ã€‚åŸå› å…¶å®å¾ˆç®€å•ï¼Œåœ¨ Shell ä¸­ï¼Œè¿ç»­ä¸¤è¡Œæ˜¯åŒä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œç¯å¢ƒï¼Œå› æ­¤å‰ä¸€ä¸ªå‘½ä»¤ä¿®æ”¹çš„å†…å­˜çŠ¶æ€ï¼Œä¼šç›´æ¥å½±å“åä¸€ä¸ªå‘½ä»¤ï¼›è€Œåœ¨ <code>Dockerfile</code> ä¸­ï¼Œè¿™ä¸¤è¡Œ <code>RUN</code> å‘½ä»¤çš„æ‰§è¡Œç¯å¢ƒæ ¹æœ¬ä¸åŒï¼Œæ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„å®¹å™¨ã€‚è¿™å°±æ˜¯å¯¹ <code>Dockerfile</code> æ„å»ºåˆ†å±‚å­˜å‚¨çš„æ¦‚å¿µä¸äº†è§£æ‰€å¯¼è‡´çš„é”™è¯¯ã€‚</p>
<p>ä¹‹å‰è¯´è¿‡æ¯ä¸€ä¸ª <code>RUN</code> éƒ½æ˜¯å¯åŠ¨ä¸€ä¸ªå®¹å™¨ã€æ‰§è¡Œå‘½ä»¤ã€ç„¶åæäº¤å­˜å‚¨å±‚æ–‡ä»¶å˜æ›´ã€‚ç¬¬ä¸€å±‚ <code>RUN cd /app</code> çš„æ‰§è¡Œä»…ä»…æ˜¯å½“å‰è¿›ç¨‹çš„å·¥ä½œç›®å½•å˜æ›´ï¼Œä¸€ä¸ªå†…å­˜ä¸Šçš„å˜åŒ–è€Œå·²ï¼Œå…¶ç»“æœä¸ä¼šé€ æˆä»»ä½•æ–‡ä»¶å˜æ›´ã€‚è€Œåˆ°ç¬¬äºŒå±‚çš„æ—¶å€™ï¼Œå¯åŠ¨çš„æ˜¯ä¸€ä¸ªå…¨æ–°çš„å®¹å™¨ï¼Œè·Ÿç¬¬ä¸€å±‚çš„å®¹å™¨æ›´å®Œå…¨æ²¡å…³ç³»ï¼Œè‡ªç„¶ä¸å¯èƒ½ç»§æ‰¿å‰ä¸€å±‚æ„å»ºè¿‡ç¨‹ä¸­çš„å†…å­˜å˜åŒ–ã€‚</p>
<p>å› æ­¤å¦‚æœéœ€è¦æ”¹å˜ä»¥åå„å±‚çš„å·¥ä½œç›®å½•çš„ä½ç½®ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨ <code>WORKDIR</code> æŒ‡ä»¤ã€‚</p>
<h2 id="USER-æŒ‡å®šå½“å‰ç”¨æˆ·"><a href="#USER-æŒ‡å®šå½“å‰ç”¨æˆ·" class="headerlink" title="USER æŒ‡å®šå½“å‰ç”¨æˆ·"></a>USER æŒ‡å®šå½“å‰ç”¨æˆ·</h2><p>æ ¼å¼ï¼š<code>USER &lt;ç”¨æˆ·å&gt;[:&lt;ç”¨æˆ·ç»„&gt;]</code></p>
<p><code>USER</code> æŒ‡ä»¤å’Œ <code>WORKDIR</code> ç›¸ä¼¼ï¼Œéƒ½æ˜¯æ”¹å˜ç¯å¢ƒçŠ¶æ€å¹¶å½±å“ä»¥åçš„å±‚ã€‚<code>WORKDIR</code> æ˜¯æ”¹å˜å·¥ä½œç›®å½•ï¼Œ<code>USER</code> åˆ™æ˜¯æ”¹å˜ä¹‹åå±‚çš„æ‰§è¡Œ <code>RUN</code>, <code>CMD</code> ä»¥åŠ <code>ENTRYPOINT</code> è¿™ç±»å‘½ä»¤çš„èº«ä»½ã€‚</p>
<p>å½“ç„¶ï¼Œå’Œ <code>WORKDIR</code> ä¸€æ ·ï¼Œ<code>USER</code> åªæ˜¯å¸®åŠ©ä½ åˆ‡æ¢åˆ°æŒ‡å®šç”¨æˆ·è€Œå·²ï¼Œè¿™ä¸ªç”¨æˆ·å¿…é¡»æ˜¯äº‹å…ˆå»ºç«‹å¥½çš„ï¼Œå¦åˆ™æ— æ³•åˆ‡æ¢ã€‚</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> groupadd -r redis &amp;&amp; useradd -r -g redis redis</span></span><br><span class="line"><span class="keyword">USER</span> redis</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [ <span class="string">"redis-server"</span> ]</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä»¥ <code>root</code> æ‰§è¡Œçš„è„šæœ¬ï¼Œåœ¨æ‰§è¡ŒæœŸé—´å¸Œæœ›æ”¹å˜èº«ä»½ï¼Œæ¯”å¦‚å¸Œæœ›ä»¥æŸä¸ªå·²ç»å»ºç«‹å¥½çš„ç”¨æˆ·æ¥è¿è¡ŒæŸä¸ªæœåŠ¡è¿›ç¨‹ï¼Œä¸è¦ä½¿ç”¨ <code>su</code> æˆ–è€… <code>sudo</code>ï¼Œè¿™äº›éƒ½éœ€è¦æ¯”è¾ƒéº»çƒ¦çš„é…ç½®ï¼Œè€Œä¸”åœ¨ TTY ç¼ºå¤±çš„ç¯å¢ƒä¸‹ç»å¸¸å‡ºé”™ã€‚å»ºè®®ä½¿ç”¨ <a href="https://github.com/tianon/gosu" target="_blank" rel="noopener"><code>gosu</code></a>ã€‚</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å»ºç«‹ redis ç”¨æˆ·ï¼Œå¹¶ä½¿ç”¨ gosu æ¢å¦ä¸€ä¸ªç”¨æˆ·æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> groupadd -r redis &amp;&amp; useradd -r -g redis redis</span></span><br><span class="line"><span class="comment"># ä¸‹è½½ gosu</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> wget -O /usr/<span class="built_in">local</span>/bin/gosu <span class="string">"https://github.com/tianon/gosu/releases/download/1.7/gosu-amd64"</span> \</span></span><br><span class="line"><span class="bash">    &amp;&amp; chmod +x /usr/<span class="built_in">local</span>/bin/gosu \</span></span><br><span class="line"><span class="bash">    &amp;&amp; gosu nobody <span class="literal">true</span></span></span><br><span class="line"><span class="comment"># è®¾ç½® CMDï¼Œå¹¶ä»¥å¦å¤–çš„ç”¨æˆ·æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [ <span class="string">"exec"</span>, <span class="string">"gosu"</span>, <span class="string">"redis"</span>, <span class="string">"redis-server"</span> ]</span></span><br></pre></td></tr></table></figure>
<h2 id="HEALTHCHECK-å¥åº·æ£€æŸ¥"><a href="#HEALTHCHECK-å¥åº·æ£€æŸ¥" class="headerlink" title="HEALTHCHECK å¥åº·æ£€æŸ¥"></a>HEALTHCHECK å¥åº·æ£€æŸ¥</h2><p>æ ¼å¼ï¼š</p>
<ul>
<li><code>HEALTHCHECK [é€‰é¡¹] CMD &lt;å‘½ä»¤&gt;</code>ï¼šè®¾ç½®æ£€æŸ¥å®¹å™¨å¥åº·çŠ¶å†µçš„å‘½ä»¤</li>
<li><code>HEALTHCHECK NONE</code>ï¼šå¦‚æœåŸºç¡€é•œåƒæœ‰å¥åº·æ£€æŸ¥æŒ‡ä»¤ï¼Œä½¿ç”¨è¿™è¡Œå¯ä»¥å±è”½æ‰å…¶å¥åº·æ£€æŸ¥æŒ‡ä»¤</li>
</ul>
<p><code>HEALTHCHECK</code> æŒ‡ä»¤æ˜¯å‘Šè¯‰ Docker åº”è¯¥å¦‚ä½•è¿›è¡Œåˆ¤æ–­å®¹å™¨çš„çŠ¶æ€æ˜¯å¦æ­£å¸¸ï¼Œè¿™æ˜¯ Docker 1.12 å¼•å…¥çš„æ–°æŒ‡ä»¤ã€‚</p>
<p>åœ¨æ²¡æœ‰ <code>HEALTHCHECK</code> æŒ‡ä»¤å‰ï¼ŒDocker å¼•æ“åªå¯ä»¥é€šè¿‡å®¹å™¨å†…ä¸»è¿›ç¨‹æ˜¯å¦é€€å‡ºæ¥åˆ¤æ–­å®¹å™¨æ˜¯å¦çŠ¶æ€å¼‚å¸¸ã€‚å¾ˆå¤šæƒ…å†µä¸‹è¿™æ²¡é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœç¨‹åºè¿›å…¥æ­»é”çŠ¶æ€ï¼Œæˆ–è€…æ­»å¾ªç¯çŠ¶æ€ï¼Œåº”ç”¨è¿›ç¨‹å¹¶ä¸é€€å‡ºï¼Œä½†æ˜¯è¯¥å®¹å™¨å·²ç»æ— æ³•æä¾›æœåŠ¡äº†ã€‚åœ¨ 1.12 ä»¥å‰ï¼ŒDocker ä¸ä¼šæ£€æµ‹åˆ°å®¹å™¨çš„è¿™ç§çŠ¶æ€ï¼Œä»è€Œä¸ä¼šé‡æ–°è°ƒåº¦ï¼Œå¯¼è‡´å¯èƒ½ä¼šæœ‰éƒ¨åˆ†å®¹å™¨å·²ç»æ— æ³•æä¾›æœåŠ¡äº†å´è¿˜åœ¨æ¥å—ç”¨æˆ·è¯·æ±‚ã€‚</p>
<p>è€Œè‡ª 1.12 ä¹‹åï¼ŒDocker æä¾›äº† <code>HEALTHCHECK</code> æŒ‡ä»¤ï¼Œé€šè¿‡è¯¥æŒ‡ä»¤æŒ‡å®šä¸€è¡Œå‘½ä»¤ï¼Œç”¨è¿™è¡Œå‘½ä»¤æ¥åˆ¤æ–­å®¹å™¨ä¸»è¿›ç¨‹çš„æœåŠ¡çŠ¶æ€æ˜¯å¦è¿˜æ­£å¸¸ï¼Œä»è€Œæ¯”è¾ƒçœŸå®çš„ååº”å®¹å™¨å®é™…çŠ¶æ€ã€‚</p>
<p>å½“åœ¨ä¸€ä¸ªé•œåƒæŒ‡å®šäº† <code>HEALTHCHECK</code> æŒ‡ä»¤åï¼Œç”¨å…¶å¯åŠ¨å®¹å™¨ï¼Œåˆå§‹çŠ¶æ€ä¼šä¸º <code>starting</code>ï¼Œåœ¨ <code>HEALTHCHECK</code> æŒ‡ä»¤æ£€æŸ¥æˆåŠŸåå˜ä¸º <code>healthy</code>ï¼Œå¦‚æœè¿ç»­ä¸€å®šæ¬¡æ•°å¤±è´¥ï¼Œåˆ™ä¼šå˜ä¸º <code>unhealthy</code>ã€‚</p>
<p><code>HEALTHCHECK</code> æ”¯æŒä¸‹åˆ—é€‰é¡¹ï¼š</p>
<ul>
<li><code>--interval=&lt;é—´éš”&gt;</code>ï¼šä¸¤æ¬¡å¥åº·æ£€æŸ¥çš„é—´éš”ï¼Œé»˜è®¤ä¸º 30 ç§’ï¼›</li>
<li><code>--timeout=&lt;æ—¶é•¿&gt;</code>ï¼šå¥åº·æ£€æŸ¥å‘½ä»¤è¿è¡Œè¶…æ—¶æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œæœ¬æ¬¡å¥åº·æ£€æŸ¥å°±è¢«è§†ä¸ºå¤±è´¥ï¼Œé»˜è®¤ 30 ç§’ï¼›</li>
<li><code>--retries=&lt;æ¬¡æ•°&gt;</code>ï¼šå½“è¿ç»­å¤±è´¥æŒ‡å®šæ¬¡æ•°åï¼Œåˆ™å°†å®¹å™¨çŠ¶æ€è§†ä¸º <code>unhealthy</code>ï¼Œé»˜è®¤ 3 æ¬¡ã€‚</li>
</ul>
<p>å’Œ <code>CMD</code>, <code>ENTRYPOINT</code> ä¸€æ ·ï¼Œ<code>HEALTHCHECK</code> åªå¯ä»¥å‡ºç°ä¸€æ¬¡ï¼Œå¦‚æœå†™äº†å¤šä¸ªï¼Œåªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚</p>
<p>åœ¨ <code>HEALTHCHECK [é€‰é¡¹] CMD</code> åé¢çš„å‘½ä»¤ï¼Œæ ¼å¼å’Œ <code>ENTRYPOINT</code> ä¸€æ ·ï¼Œåˆ†ä¸º <code>shell</code> æ ¼å¼ï¼Œå’Œ <code>exec</code> æ ¼å¼ã€‚å‘½ä»¤çš„è¿”å›å€¼å†³å®šäº†è¯¥æ¬¡å¥åº·æ£€æŸ¥çš„æˆåŠŸä¸å¦ï¼š<code>0</code>ï¼šæˆåŠŸï¼›<code>1</code>ï¼šå¤±è´¥ï¼›<code>2</code>ï¼šä¿ç•™ï¼Œä¸è¦ä½¿ç”¨è¿™ä¸ªå€¼ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸ªé•œåƒæ˜¯ä¸ªæœ€ç®€å•çš„ Web æœåŠ¡ï¼Œæˆ‘ä»¬å¸Œæœ›å¢åŠ å¥åº·æ£€æŸ¥æ¥åˆ¤æ–­å…¶ Web æœåŠ¡æ˜¯å¦åœ¨æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ <code>curl</code> æ¥å¸®åŠ©åˆ¤æ–­ï¼Œå…¶ <code>Dockerfile</code> çš„ <code>HEALTHCHECK</code> å¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y curl &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span><br><span class="line"><span class="keyword">HEALTHCHECK</span><span class="bash"> --interval=5s --timeout=3s \</span></span><br><span class="line"><span class="bash">  CMD curl -fs http://localhost/ || <span class="built_in">exit</span> 1</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬è®¾ç½®äº†æ¯ 5 ç§’æ£€æŸ¥ä¸€æ¬¡ï¼ˆè¿™é‡Œä¸ºäº†è¯•éªŒæ‰€ä»¥é—´éš”éå¸¸çŸ­ï¼Œå®é™…åº”è¯¥ç›¸å¯¹è¾ƒé•¿ï¼‰ï¼Œå¦‚æœå¥åº·æ£€æŸ¥å‘½ä»¤è¶…è¿‡ 3 ç§’æ²¡å“åº”å°±è§†ä¸ºå¤±è´¥ï¼Œå¹¶ä¸”ä½¿ç”¨ <code>curl -fs http://localhost/ || exit 1</code> ä½œä¸ºå¥åº·æ£€æŸ¥å‘½ä»¤ã€‚</p>
<p>ä½¿ç”¨ <code>docker build</code> æ¥æ„å»ºè¿™ä¸ªé•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker build -t myweb:v1 .</span><br></pre></td></tr></table></figure>
<p>æ„å»ºå¥½äº†åï¼Œæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d --name web -p 80:80 myweb:v1</span><br></pre></td></tr></table></figure>
<p>å½“è¿è¡Œè¯¥é•œåƒåï¼Œå¯ä»¥é€šè¿‡ <code>docker container ls</code> çœ‹åˆ°æœ€åˆçš„çŠ¶æ€ä¸º <code>(health: starting)</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container ls</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                            PORTS               NAMES</span><br><span class="line">03e28eb00bd0        myweb:v1            <span class="string">"nginx -g 'daemon off"</span>   3 seconds ago       Up 2 seconds (health: starting)   80/tcp, 443/tcp     web</span><br></pre></td></tr></table></figure>
<p>åœ¨ç­‰å¾…å‡ ç§’é’Ÿåï¼Œå†æ¬¡ <code>docker container ls</code>ï¼Œå°±ä¼šçœ‹åˆ°å¥åº·çŠ¶æ€å˜åŒ–ä¸ºäº† <code>(healthy)</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container ls</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                    PORTS               NAMES</span><br><span class="line">03e28eb00bd0        myweb:v1            <span class="string">"nginx -g 'daemon off"</span>   18 seconds ago      Up 16 seconds (healthy)   80/tcp, 443/tcp     web</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå¥åº·æ£€æŸ¥è¿ç»­å¤±è´¥è¶…è¿‡äº†é‡è¯•æ¬¡æ•°ï¼ŒçŠ¶æ€å°±ä¼šå˜ä¸º <code>(unhealthy)</code>ã€‚</p>
<p>ä¸ºäº†å¸®åŠ©æ’éšœï¼Œå¥åº·æ£€æŸ¥å‘½ä»¤çš„è¾“å‡ºï¼ˆåŒ…æ‹¬ <code>stdout</code> ä»¥åŠ <code>stderr</code>ï¼‰éƒ½ä¼šè¢«å­˜å‚¨äºå¥åº·çŠ¶æ€é‡Œï¼Œå¯ä»¥ç”¨ <code>docker inspect</code> æ¥æŸ¥çœ‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker inspect --format <span class="string">'&#123;&#123;json .State.Health&#125;&#125;'</span> web | python -m json.tool</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"FailingStreak"</span>: 0,</span><br><span class="line">    <span class="string">"Log"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"End"</span>: <span class="string">"2016-11-25T14:35:37.940957051Z"</span>,</span><br><span class="line">            <span class="string">"ExitCode"</span>: 0,</span><br><span class="line">            <span class="string">"Output"</span>: <span class="string">"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Welcome to nginx!&lt;/title&gt;\n&lt;style&gt;\n    body &#123;\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    &#125;\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;\n&lt;p&gt;If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.&lt;/p&gt;\n\n&lt;p&gt;For online documentation and support please refer to\n&lt;a href=\"http://nginx.org/\"&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;\nCommercial support is available at\n&lt;a href=\"http://nginx.com/\"&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n"</span>,</span><br><span class="line">            <span class="string">"Start"</span>: <span class="string">"2016-11-25T14:35:37.780192565Z"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"Status"</span>: <span class="string">"healthy"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ONBUILD-ä¸ºä»–äººåšå«è¡£è£³"><a href="#ONBUILD-ä¸ºä»–äººåšå«è¡£è£³" class="headerlink" title="ONBUILD ä¸ºä»–äººåšå«è¡£è£³"></a>ONBUILD ä¸ºä»–äººåšå«è¡£è£³</h2><p>æ ¼å¼ï¼š<code>ONBUILD &lt;å…¶å®ƒæŒ‡ä»¤&gt;</code>ã€‚</p>
<p><code>ONBUILD</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æŒ‡ä»¤ï¼Œå®ƒåé¢è·Ÿçš„æ˜¯å…¶å®ƒæŒ‡ä»¤ï¼Œæ¯”å¦‚ <code>RUN</code>, <code>COPY</code> ç­‰ï¼Œè€Œè¿™äº›æŒ‡ä»¤ï¼Œåœ¨å½“å‰é•œåƒæ„å»ºæ—¶å¹¶ä¸ä¼šè¢«æ‰§è¡Œã€‚åªæœ‰å½“ä»¥å½“å‰é•œåƒä¸ºåŸºç¡€é•œåƒï¼Œå»æ„å»ºä¸‹ä¸€çº§é•œåƒçš„æ—¶å€™æ‰ä¼šè¢«æ‰§è¡Œã€‚</p>
<p><code>Dockerfile</code> ä¸­çš„å…¶å®ƒæŒ‡ä»¤éƒ½æ˜¯ä¸ºäº†å®šåˆ¶å½“å‰é•œåƒè€Œå‡†å¤‡çš„ï¼Œå”¯æœ‰ <code>ONBUILD</code> æ˜¯ä¸ºäº†å¸®åŠ©åˆ«äººå®šåˆ¶è‡ªå·±è€Œå‡†å¤‡çš„ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬è¦åˆ¶ä½œ Node.js æ‰€å†™çš„åº”ç”¨çš„é•œåƒã€‚æˆ‘ä»¬éƒ½çŸ¥é“ Node.js ä½¿ç”¨ <code>npm</code> è¿›è¡ŒåŒ…ç®¡ç†ï¼Œæ‰€æœ‰ä¾èµ–ã€é…ç½®ã€å¯åŠ¨ä¿¡æ¯ç­‰ä¼šæ”¾åˆ° <code>package.json</code> æ–‡ä»¶é‡Œã€‚åœ¨æ‹¿åˆ°ç¨‹åºä»£ç åï¼Œéœ€è¦å…ˆè¿›è¡Œ <code>npm install</code> æ‰å¯ä»¥è·å¾—æ‰€æœ‰éœ€è¦çš„ä¾èµ–ã€‚ç„¶åå°±å¯ä»¥é€šè¿‡ <code>npm start</code> æ¥å¯åŠ¨åº”ç”¨ã€‚å› æ­¤ï¼Œä¸€èˆ¬æ¥è¯´ä¼šè¿™æ ·å†™ <code>Dockerfile</code>ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:slim</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir /app</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./package.json /app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [ <span class="string">"npm"</span>, <span class="string">"install"</span> ]</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /app/</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [ <span class="string">"npm"</span>, <span class="string">"start"</span> ]</span></span><br></pre></td></tr></table></figure>
<p>æŠŠè¿™ä¸ª <code>Dockerfile</code> æ”¾åˆ° Node.js é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œæ„å»ºå¥½é•œåƒåï¼Œå°±å¯ä»¥ç›´æ¥æ‹¿æ¥å¯åŠ¨å®¹å™¨è¿è¡Œã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¿˜æœ‰ç¬¬äºŒä¸ª Node.js é¡¹ç›®ä¹Ÿå·®ä¸å¤šå‘¢ï¼Ÿå¥½å§ï¼Œé‚£å°±å†æŠŠè¿™ä¸ª <code>Dockerfile</code> å¤åˆ¶åˆ°ç¬¬äºŒä¸ªé¡¹ç›®é‡Œã€‚é‚£å¦‚æœæœ‰ç¬¬ä¸‰ä¸ªé¡¹ç›®å‘¢ï¼Ÿå†å¤åˆ¶ä¹ˆï¼Ÿæ–‡ä»¶çš„å‰¯æœ¬è¶Šå¤šï¼Œç‰ˆæœ¬æ§åˆ¶å°±è¶Šå›°éš¾ï¼Œè®©æˆ‘ä»¬ç»§ç»­çœ‹è¿™æ ·çš„åœºæ™¯ç»´æŠ¤çš„é—®é¢˜ã€‚</p>
<p>å¦‚æœç¬¬ä¸€ä¸ª Node.js é¡¹ç›®åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå‘ç°è¿™ä¸ª <code>Dockerfile</code> é‡Œå­˜åœ¨é—®é¢˜ï¼Œæ¯”å¦‚æ•²é”™å­—äº†ã€æˆ–è€…éœ€è¦å®‰è£…é¢å¤–çš„åŒ…ï¼Œç„¶åå¼€å‘äººå‘˜ä¿®å¤äº†è¿™ä¸ª <code>Dockerfile</code>ï¼Œå†æ¬¡æ„å»ºï¼Œé—®é¢˜è§£å†³ã€‚ç¬¬ä¸€ä¸ªé¡¹ç›®æ²¡é—®é¢˜äº†ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªé¡¹ç›®å‘¢ï¼Ÿè™½ç„¶æœ€åˆ <code>Dockerfile</code> æ˜¯å¤åˆ¶ã€ç²˜è´´è‡ªç¬¬ä¸€ä¸ªé¡¹ç›®çš„ï¼Œä½†æ˜¯å¹¶ä¸ä¼šå› ä¸ºç¬¬ä¸€ä¸ªé¡¹ç›®ä¿®å¤äº†ä»–ä»¬çš„ <code>Dockerfile</code>ï¼Œè€Œç¬¬äºŒä¸ªé¡¹ç›®çš„ <code>Dockerfile</code> å°±ä¼šè¢«è‡ªåŠ¨ä¿®å¤ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥åšä¸€ä¸ªåŸºç¡€é•œåƒï¼Œç„¶åå„ä¸ªé¡¹ç›®ä½¿ç”¨è¿™ä¸ªåŸºç¡€é•œåƒå‘¢ï¼Ÿè¿™æ ·åŸºç¡€é•œåƒæ›´æ–°ï¼Œå„ä¸ªé¡¹ç›®ä¸ç”¨åŒæ­¥ <code>Dockerfile</code> çš„å˜åŒ–ï¼Œé‡æ–°æ„å»ºåå°±ç»§æ‰¿äº†åŸºç¡€é•œåƒçš„æ›´æ–°ï¼Ÿå¥½å§ï¼Œå¯ä»¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è¿™æ ·çš„ç»“æœã€‚é‚£ä¹ˆä¸Šé¢çš„è¿™ä¸ª <code>Dockerfile</code> å°±ä¼šå˜ä¸ºï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:slim</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir /app</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [ <span class="string">"npm"</span>, <span class="string">"start"</span> ]</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬æŠŠé¡¹ç›®ç›¸å…³çš„æ„å»ºæŒ‡ä»¤æ‹¿å‡ºæ¥ï¼Œæ”¾åˆ°å­é¡¹ç›®é‡Œå»ã€‚å‡è®¾è¿™ä¸ªåŸºç¡€é•œåƒçš„åå­—ä¸º <code>my-node</code> çš„è¯ï¼Œå„ä¸ªé¡¹ç›®å†…çš„è‡ªå·±çš„ <code>Dockerfile</code> å°±å˜ä¸ºï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> my-node</span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./package.json /app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [ <span class="string">"npm"</span>, <span class="string">"install"</span> ]</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /app/</span></span><br></pre></td></tr></table></figure>
<p>åŸºç¡€é•œåƒå˜åŒ–åï¼Œå„ä¸ªé¡¹ç›®éƒ½ç”¨è¿™ä¸ª <code>Dockerfile</code> é‡æ–°æ„å»ºé•œåƒï¼Œä¼šç»§æ‰¿åŸºç¡€é•œåƒçš„æ›´æ–°ã€‚</p>
<p>é‚£ä¹ˆï¼Œé—®é¢˜è§£å†³äº†ä¹ˆï¼Ÿæ²¡æœ‰ã€‚å‡†ç¡®è¯´ï¼Œåªè§£å†³äº†ä¸€åŠã€‚å¦‚æœè¿™ä¸ª <code>Dockerfile</code> é‡Œé¢æœ‰äº›ä¸œè¥¿éœ€è¦è°ƒæ•´å‘¢ï¼Ÿæ¯”å¦‚ <code>npm install</code> éƒ½éœ€è¦åŠ ä¸€äº›å‚æ•°ï¼Œé‚£æ€ä¹ˆåŠï¼Ÿè¿™ä¸€è¡Œ <code>RUN</code> æ˜¯ä¸å¯èƒ½æ”¾å…¥åŸºç¡€é•œåƒçš„ï¼Œå› ä¸ºæ¶‰åŠåˆ°äº†å½“å‰é¡¹ç›®çš„ <code>./package.json</code>ï¼Œéš¾é“åˆè¦ä¸€ä¸ªä¸ªä¿®æ”¹ä¹ˆï¼Ÿæ‰€ä»¥è¯´ï¼Œè¿™æ ·åˆ¶ä½œåŸºç¡€é•œåƒï¼Œåªè§£å†³äº†åŸæ¥çš„ <code>Dockerfile</code> çš„å‰4æ¡æŒ‡ä»¤çš„å˜åŒ–é—®é¢˜ï¼Œè€Œåé¢ä¸‰æ¡æŒ‡ä»¤çš„å˜åŒ–åˆ™å®Œå…¨æ²¡åŠæ³•å¤„ç†ã€‚</p>
<p><code>ONBUILD</code> å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è®©æˆ‘ä»¬ç”¨ <code>ONBUILD</code> é‡æ–°å†™ä¸€ä¸‹åŸºç¡€é•œåƒçš„ <code>Dockerfile</code>:</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:slim</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir /app</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /app</span></span><br><span class="line"><span class="keyword">ONBUILD</span> <span class="keyword">COPY</span><span class="bash"> ./package.json /app</span></span><br><span class="line"><span class="keyword">ONBUILD</span> <span class="keyword">RUN</span><span class="bash"> [ <span class="string">"npm"</span>, <span class="string">"install"</span> ]</span></span><br><span class="line"><span class="keyword">ONBUILD</span> <span class="keyword">COPY</span><span class="bash"> . /app/</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [ <span class="string">"npm"</span>, <span class="string">"start"</span> ]</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ¬¡æˆ‘ä»¬å›åˆ°åŸå§‹çš„ <code>Dockerfile</code>ï¼Œä½†æ˜¯è¿™æ¬¡å°†é¡¹ç›®ç›¸å…³çš„æŒ‡ä»¤åŠ ä¸Š <code>ONBUILD</code>ï¼Œè¿™æ ·åœ¨æ„å»ºåŸºç¡€é•œåƒçš„æ—¶å€™ï¼Œè¿™ä¸‰è¡Œå¹¶ä¸ä¼šè¢«æ‰§è¡Œã€‚ç„¶åå„ä¸ªé¡¹ç›®çš„ <code>Dockerfile</code> å°±å˜æˆäº†ç®€å•åœ°ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> my-node</span><br></pre></td></tr></table></figure>
<p>æ˜¯çš„ï¼Œåªæœ‰è¿™ä¹ˆä¸€è¡Œã€‚å½“åœ¨å„ä¸ªé¡¹ç›®ç›®å½•ä¸­ï¼Œç”¨è¿™ä¸ªåªæœ‰ä¸€è¡Œçš„ <code>Dockerfile</code> æ„å»ºé•œåƒæ—¶ï¼Œä¹‹å‰åŸºç¡€é•œåƒçš„é‚£ä¸‰è¡Œ <code>ONBUILD</code> å°±ä¼šå¼€å§‹æ‰§è¡Œï¼ŒæˆåŠŸçš„å°†å½“å‰é¡¹ç›®çš„ä»£ç å¤åˆ¶è¿›é•œåƒã€å¹¶ä¸”é’ˆå¯¹æœ¬é¡¹ç›®æ‰§è¡Œ <code>npm install</code>ï¼Œç”Ÿæˆåº”ç”¨é•œåƒã€‚</p>
<h1 id="Dockerfileå¤šé˜¶æ®µæ„å»º"><a href="#Dockerfileå¤šé˜¶æ®µæ„å»º" class="headerlink" title="Dockerfileå¤šé˜¶æ®µæ„å»º"></a>Dockerfileå¤šé˜¶æ®µæ„å»º</h1><h2 id="ä¹‹å‰çš„åšæ³•"><a href="#ä¹‹å‰çš„åšæ³•" class="headerlink" title="ä¹‹å‰çš„åšæ³•"></a>ä¹‹å‰çš„åšæ³•</h2><p>åœ¨ Docker 17.05 ç‰ˆæœ¬ä¹‹å‰ï¼Œæˆ‘ä»¬æ„å»º Docker é•œåƒæ—¶ï¼Œé€šå¸¸ä¼šé‡‡ç”¨ä¸¤ç§æ–¹å¼ï¼š</p>
<h3 id="å…¨éƒ¨æ”¾å…¥ä¸€ä¸ª-Dockerfile"><a href="#å…¨éƒ¨æ”¾å…¥ä¸€ä¸ª-Dockerfile" class="headerlink" title="å…¨éƒ¨æ”¾å…¥ä¸€ä¸ª Dockerfile"></a>å…¨éƒ¨æ”¾å…¥ä¸€ä¸ª Dockerfile</h3><p>ä¸€ç§æ–¹å¼æ˜¯å°†æ‰€æœ‰çš„æ„å»ºè¿‡ç¨‹ç¼–åŒ…å«åœ¨ä¸€ä¸ª <code>Dockerfile</code> ä¸­ï¼ŒåŒ…æ‹¬é¡¹ç›®åŠå…¶ä¾èµ–åº“çš„ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ç­‰æµç¨‹ï¼Œè¿™é‡Œå¯èƒ½ä¼šå¸¦æ¥çš„ä¸€äº›é—®é¢˜ï¼š</p>
<ul>
<li>é•œåƒå±‚æ¬¡å¤šï¼Œé•œåƒä½“ç§¯è¾ƒå¤§ï¼Œéƒ¨ç½²æ—¶é—´å˜é•¿</li>
<li>æºä»£ç å­˜åœ¨æ³„éœ²çš„é£é™©</li>
</ul>
<p>ä¾‹å¦‚ï¼Œç¼–å†™ <code>app.go</code> æ–‡ä»¶ï¼Œè¯¥ç¨‹åºè¾“å‡º <code>Hello World!</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    fmt.Printf(<span class="string">"Hello World!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–å†™ <code>Dockerfile.one</code> æ–‡ä»¶</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.9</span>-alpine</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apk --no-cache add git ca-certificates</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /go/src/github.com/go/helloworld/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> app.go .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> go get -d -v github.com/go-sql-driver/mysql \</span></span><br><span class="line"><span class="bash">  &amp;&amp; CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app . \</span></span><br><span class="line"><span class="bash">  &amp;&amp; cp /go/src/github.com/go/helloworld/app /root</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /root/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"./app"</span>]</span></span><br></pre></td></tr></table></figure>
<p>æ„å»ºé•œåƒ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker build -t go/helloworld:1 -f Dockerfile.one .</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†æ•£åˆ°å¤šä¸ª-Dockerfile"><a href="#åˆ†æ•£åˆ°å¤šä¸ª-Dockerfile" class="headerlink" title="åˆ†æ•£åˆ°å¤šä¸ª Dockerfile"></a>åˆ†æ•£åˆ°å¤šä¸ª Dockerfile</h3><p>å¦ä¸€ç§æ–¹å¼ï¼Œå°±æ˜¯æˆ‘ä»¬äº‹å…ˆåœ¨ä¸€ä¸ª <code>Dockerfile</code> å°†é¡¹ç›®åŠå…¶ä¾èµ–åº“ç¼–è¯‘æµ‹è¯•æ‰“åŒ…å¥½åï¼Œå†å°†å…¶æ‹·è´åˆ°è¿è¡Œç¯å¢ƒä¸­ï¼Œè¿™ç§æ–¹å¼éœ€è¦æˆ‘ä»¬ç¼–å†™ä¸¤ä¸ª <code>Dockerfile</code> å’Œä¸€äº›ç¼–è¯‘è„šæœ¬æ‰èƒ½å°†å…¶ä¸¤ä¸ªé˜¶æ®µè‡ªåŠ¨æ•´åˆèµ·æ¥ï¼Œè¿™ç§æ–¹å¼è™½ç„¶å¯ä»¥å¾ˆå¥½åœ°è§„é¿ç¬¬ä¸€ç§æ–¹å¼å­˜åœ¨çš„é£é™©ï¼Œä½†æ˜æ˜¾éƒ¨ç½²è¿‡ç¨‹è¾ƒå¤æ‚ã€‚</p>
<p>ä¾‹å¦‚ï¼Œç¼–å†™ <code>Dockerfile.build</code> æ–‡ä»¶</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.9</span>-alpine</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apk --no-cache add git</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /go/src/github.com/go/helloworld</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> app.go .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> go get -d -v github.com/go-sql-driver/mysql \</span></span><br><span class="line"><span class="bash">  &amp;&amp; CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app .</span></span><br></pre></td></tr></table></figure>
<p>ç¼–å†™ <code>Dockerfile.copy</code> æ–‡ä»¶</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> alpine:latest</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apk --no-cache add ca-certificates</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /root/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> app .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"./app"</span>]</span></span><br></pre></td></tr></table></figure>
<p>æ–°å»º <code>build.sh</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="built_in">echo</span> Building go/helloworld:build</span><br><span class="line"></span><br><span class="line">docker build -t go/helloworld:build . -f Dockerfile.build</span><br><span class="line"></span><br><span class="line">docker create --name extract go/helloworld:build</span><br><span class="line">docker cp extract:/go/src/github.com/go/helloworld/app ./app</span><br><span class="line">docker rm -f extract</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> Building go/helloworld:2</span><br><span class="line"></span><br><span class="line">docker build --no-cache -t go/helloworld:2 . -f Dockerfile.copy</span><br><span class="line">rm ./app</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨è¿è¡Œè„šæœ¬å³å¯æ„å»ºé•œåƒ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ chmod +x build.sh</span><br><span class="line"></span><br><span class="line">$ ./build.sh</span><br></pre></td></tr></table></figure>
<p>å¯¹æ¯”ä¸¤ç§æ–¹å¼ç”Ÿæˆçš„é•œåƒå¤§å°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls</span><br><span class="line"></span><br><span class="line">REPOSITORY      TAG    IMAGE ID        CREATED         SIZE</span><br><span class="line">go/helloworld   2      f7cf3465432c    22 seconds ago  6.47MB</span><br><span class="line">go/helloworld   1      f55d3e16affc    2 minutes ago   295MB</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨å¤šé˜¶æ®µæ„å»º"><a href="#ä½¿ç”¨å¤šé˜¶æ®µæ„å»º" class="headerlink" title="ä½¿ç”¨å¤šé˜¶æ®µæ„å»º"></a>ä½¿ç”¨å¤šé˜¶æ®µæ„å»º</h2><p>ä¸ºè§£å†³ä»¥ä¸Šé—®é¢˜ï¼ŒDocker v17.05 å¼€å§‹æ”¯æŒå¤šé˜¶æ®µæ„å»º (<code>multistage builds</code>)ã€‚ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºæˆ‘ä»¬å°±å¯ä»¥å¾ˆå®¹æ˜“è§£å†³å‰é¢æåˆ°çš„é—®é¢˜ï¼Œå¹¶ä¸”åªéœ€è¦ç¼–å†™ä¸€ä¸ª <code>Dockerfile</code>ï¼š</p>
<p>ä¾‹å¦‚ï¼Œç¼–å†™ <code>Dockerfile</code> æ–‡ä»¶</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.9</span>-alpine as builder</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apk --no-cache add git</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /go/src/github.com/go/helloworld/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> go get -d -v github.com/go-sql-driver/mysql</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> app.go .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> CGO_ENABLED=0 GOOS=linux go build -a -installsuffix cgo -o app .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">FROM</span> alpine:latest as prod</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apk --no-cache add ca-certificates</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /root/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> --from=0 /go/src/github.com/go/helloworld/app .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"./app"</span>]</span></span><br></pre></td></tr></table></figure>
<p>æ„å»ºé•œåƒ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker build -t go/helloworld:3 .</span><br></pre></td></tr></table></figure>
<p>å¯¹æ¯”ä¸‰ä¸ªé•œåƒå¤§å°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls</span><br><span class="line"></span><br><span class="line">REPOSITORY        TAG   IMAGE ID         CREATED            SIZE</span><br><span class="line">go/helloworld     3     d6911ed9c846     7 seconds ago      6.47MB</span><br><span class="line">go/helloworld     2     f7cf3465432c     22 seconds ago     6.47MB</span><br><span class="line">go/helloworld     1     f55d3e16affc     2 minutes ago      295MB</span><br></pre></td></tr></table></figure>
<p>å¾ˆæ˜æ˜¾ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºçš„é•œåƒä½“ç§¯å°ï¼ŒåŒæ—¶ä¹Ÿå®Œç¾è§£å†³äº†ä¸Šè¾¹æåˆ°çš„é—®é¢˜ã€‚</p>
<h3 id="åªæ„å»ºæŸä¸€é˜¶æ®µçš„é•œåƒ"><a href="#åªæ„å»ºæŸä¸€é˜¶æ®µçš„é•œåƒ" class="headerlink" title="åªæ„å»ºæŸä¸€é˜¶æ®µçš„é•œåƒ"></a>åªæ„å»ºæŸä¸€é˜¶æ®µçš„é•œåƒ</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>as</code> æ¥ä¸ºæŸä¸€é˜¶æ®µå‘½åï¼Œä¾‹å¦‚</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> golang:<span class="number">1.9</span>-alpine as builder</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚å½“æˆ‘ä»¬åªæƒ³æ„å»º <code>builder</code> é˜¶æ®µçš„é•œåƒæ—¶ï¼Œå¢åŠ  <code>--target=builder</code> å‚æ•°å³å¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker build --target builder -t username/imagename:tag .</span><br></pre></td></tr></table></figure>
<h3 id="æ„å»ºæ—¶ä»å…¶ä»–é•œåƒå¤åˆ¶æ–‡ä»¶"><a href="#æ„å»ºæ—¶ä»å…¶ä»–é•œåƒå¤åˆ¶æ–‡ä»¶" class="headerlink" title="æ„å»ºæ—¶ä»å…¶ä»–é•œåƒå¤åˆ¶æ–‡ä»¶"></a>æ„å»ºæ—¶ä»å…¶ä»–é•œåƒå¤åˆ¶æ–‡ä»¶</h3><p>ä¸Šé¢ä¾‹å­ä¸­æˆ‘ä»¬ä½¿ç”¨ <code>COPY --from=0 /go/src/github.com/go/helloworld/app .</code> ä»ä¸Šä¸€é˜¶æ®µçš„é•œåƒä¸­å¤åˆ¶æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¤åˆ¶ä»»æ„é•œåƒä¸­çš„æ–‡ä»¶ã€‚</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">COPY</span><span class="bash"> --from=nginx:latest /etc/nginx/nginx.conf /nginx.conf</span></span><br></pre></td></tr></table></figure>
<h1 id="é•œåƒçš„å®ç°åŸç†"><a href="#é•œåƒçš„å®ç°åŸç†" class="headerlink" title="é•œåƒçš„å®ç°åŸç†"></a>é•œåƒçš„å®ç°åŸç†</h1><p>Docker é•œåƒæ˜¯æ€ä¹ˆå®ç°å¢é‡çš„ä¿®æ”¹å’Œç»´æŠ¤çš„ï¼Ÿ</p>
<p>æ¯ä¸ªé•œåƒéƒ½ç”±å¾ˆå¤šå±‚æ¬¡æ„æˆï¼ŒDocker ä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/UnionFS" target="_blank" rel="noopener">Union FS</a> å°†è¿™äº›ä¸åŒçš„å±‚ç»“åˆåˆ°ä¸€ä¸ªé•œåƒä¸­å»ã€‚</p>
<p>é€šå¸¸ Union FS æœ‰ä¸¤ä¸ªç”¨é€”, ä¸€æ–¹é¢å¯ä»¥å®ç°ä¸å€ŸåŠ© LVMã€RAID å°†å¤šä¸ª disk æŒ‚åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹,å¦ä¸€ä¸ªæ›´å¸¸ç”¨çš„å°±æ˜¯å°†ä¸€ä¸ªåªè¯»çš„åˆ†æ”¯å’Œä¸€ä¸ªå¯å†™çš„åˆ†æ”¯è”åˆåœ¨ä¸€èµ·ï¼ŒLive CD æ­£æ˜¯åŸºäºæ­¤æ–¹æ³•å¯ä»¥å…è®¸åœ¨é•œåƒä¸å˜çš„åŸºç¡€ä¸Šå…è®¸ç”¨æˆ·åœ¨å…¶ä¸Šè¿›è¡Œä¸€äº›å†™æ“ä½œã€‚</p>
<p>Docker åœ¨ AUFS ä¸Šæ„å»ºçš„å®¹å™¨ä¹Ÿæ˜¯åˆ©ç”¨äº†ç±»ä¼¼çš„åŸç†ã€‚</p>
<h1 id="å®è·µæŒ‡å—"><a href="#å®è·µæŒ‡å—" class="headerlink" title="å®è·µæŒ‡å—"></a>å®è·µæŒ‡å—</h1><h2 id="ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®"><a href="#ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®" class="headerlink" title="ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®"></a>ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®</h2><h3 id="å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„"><a href="#å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„" class="headerlink" title="å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„"></a>å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„</h3><p>é€šè¿‡ <code>Dockerfile</code> æ„å»ºçš„é•œåƒæ‰€å¯åŠ¨çš„å®¹å™¨åº”è¯¥å°½å¯èƒ½çŸ­æš‚ï¼ˆç”Ÿå‘½å‘¨æœŸçŸ­ï¼‰ã€‚ã€ŒçŸ­æš‚ã€æ„å‘³ç€å¯ä»¥åœæ­¢å’Œé”€æ¯å®¹å™¨ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨å¹¶éƒ¨ç½²å¥½æ‰€éœ€çš„è®¾ç½®å’Œé…ç½®å·¥ä½œé‡åº”è¯¥æ˜¯æå°çš„ã€‚</p>
<h3 id="ä½¿ç”¨-dockerignore-æ–‡ä»¶"><a href="#ä½¿ç”¨-dockerignore-æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨ .dockerignore æ–‡ä»¶"></a>ä½¿ç”¨ <code>.dockerignore</code> æ–‡ä»¶</h3><p>ä½¿ç”¨ <code>Dockerfile</code> æ„å»ºé•œåƒæ—¶æœ€å¥½æ˜¯å°† <code>Dockerfile</code> æ”¾ç½®åœ¨ä¸€ä¸ªæ–°å»ºçš„ç©ºç›®å½•ä¸‹ã€‚ç„¶åå°†æ„å»ºé•œåƒæ‰€éœ€è¦çš„æ–‡ä»¶æ·»åŠ åˆ°è¯¥ç›®å½•ä¸­ã€‚ä¸ºäº†æé«˜æ„å»ºé•œåƒçš„æ•ˆç‡ï¼Œä½ å¯ä»¥åœ¨ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>.dockerignore</code> æ–‡ä»¶æ¥æŒ‡å®šè¦å¿½ç•¥çš„æ–‡ä»¶å’Œç›®å½•ã€‚<code>.dockerignore</code> æ–‡ä»¶çš„æ’é™¤æ¨¡å¼è¯­æ³•å’Œ Git çš„ <code>.gitignore</code> æ–‡ä»¶ç›¸ä¼¼ã€‚</p>
<h3 id="ä½¿ç”¨å¤šé˜¶æ®µæ„å»º-1"><a href="#ä½¿ç”¨å¤šé˜¶æ®µæ„å»º-1" class="headerlink" title="ä½¿ç”¨å¤šé˜¶æ®µæ„å»º"></a>ä½¿ç”¨å¤šé˜¶æ®µæ„å»º</h3><p>åœ¨ <code>Docker 17.05</code> ä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://yeasy.gitbooks.io/docker_practice/content/image/multistage-builds.md" target="_blank" rel="noopener">å¤šé˜¶æ®µæ„å»º</a> æ¥å‡å°‘æ‰€æ„å»ºé•œåƒçš„å¤§å°ã€‚</p>
<h3 id="é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…"><a href="#é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…" class="headerlink" title="é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…"></a>é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…</h3><p>ä¸ºäº†é™ä½å¤æ‚æ€§ã€å‡å°‘ä¾èµ–ã€å‡å°æ–‡ä»¶å¤§å°ã€èŠ‚çº¦æ„å»ºæ—¶é—´ï¼Œä½ åº”è¯¥é¿å…å®‰è£…ä»»ä½•ä¸å¿…è¦çš„åŒ…ã€‚ä¾‹å¦‚ï¼Œä¸è¦åœ¨æ•°æ®åº“é•œåƒä¸­åŒ…å«ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚</p>
<h3 id="ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹"><a href="#ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹" class="headerlink" title="ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹"></a>ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹</h3><p>åº”è¯¥ä¿è¯åœ¨ä¸€ä¸ªå®¹å™¨ä¸­åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹ã€‚å°†å¤šä¸ªåº”ç”¨è§£è€¦åˆ°ä¸åŒå®¹å™¨ä¸­ï¼Œä¿è¯äº†å®¹å™¨çš„æ¨ªå‘æ‰©å±•å’Œå¤ç”¨ã€‚ä¾‹å¦‚ web åº”ç”¨åº”è¯¥åŒ…å«ä¸‰ä¸ªå®¹å™¨ï¼šwebåº”ç”¨ã€æ•°æ®åº“ã€ç¼“å­˜ã€‚</p>
<p>å¦‚æœå®¹å™¨äº’ç›¸ä¾èµ–ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://yeasy.gitbooks.io/docker_practice/content/network/linking.html" target="_blank" rel="noopener">Docker è‡ªå®šä¹‰ç½‘ç»œ</a> æ¥æŠŠè¿™äº›å®¹å™¨è¿æ¥èµ·æ¥ã€‚</p>
<h3 id="é•œåƒå±‚æ•°å°½å¯èƒ½å°‘"><a href="#é•œåƒå±‚æ•°å°½å¯èƒ½å°‘" class="headerlink" title="é•œåƒå±‚æ•°å°½å¯èƒ½å°‘"></a>é•œåƒå±‚æ•°å°½å¯èƒ½å°‘</h3><p>ä½ éœ€è¦åœ¨ <code>Dockerfile</code> å¯è¯»æ€§ï¼ˆä¹ŸåŒ…æ‹¬é•¿æœŸçš„å¯ç»´æŠ¤æ€§ï¼‰å’Œå‡å°‘å±‚æ•°ä¹‹é—´åšä¸€ä¸ªå¹³è¡¡ã€‚</p>
<h3 id="å°†å¤šè¡Œå‚æ•°æ’åº"><a href="#å°†å¤šè¡Œå‚æ•°æ’åº" class="headerlink" title="å°†å¤šè¡Œå‚æ•°æ’åº"></a>å°†å¤šè¡Œå‚æ•°æ’åº</h3><p>å°†å¤šè¡Œå‚æ•°æŒ‰å­—æ¯é¡ºåºæ’åºï¼ˆæ¯”å¦‚è¦å®‰è£…å¤šä¸ªåŒ…æ—¶ï¼‰ã€‚è¿™å¯ä»¥å¸®åŠ©ä½ é¿å…é‡å¤åŒ…å«åŒä¸€ä¸ªåŒ…ï¼Œæ›´æ–°åŒ…åˆ—è¡¨æ—¶ä¹Ÿæ›´å®¹æ˜“ã€‚ä¹Ÿä¾¿äº <code>PRs</code> é˜…è¯»å’Œå®¡æŸ¥ã€‚å»ºè®®åœ¨åæ–œæ ç¬¦å· <code>\</code> ä¹‹å‰æ·»åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œä»¥å¢åŠ å¯è¯»æ€§ã€‚</p>
<p>ä¸‹é¢æ˜¯æ¥è‡ª <code>buildpack-deps</code> é•œåƒçš„ä¾‹å­ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="bash">  bzr \</span></span><br><span class="line"><span class="bash">  cvs \</span></span><br><span class="line"><span class="bash">  git \</span></span><br><span class="line"><span class="bash">  mercurial \</span></span><br><span class="line"><span class="bash">  subversion</span></span><br></pre></td></tr></table></figure>
<h3 id="æ„å»ºç¼“å­˜"><a href="#æ„å»ºç¼“å­˜" class="headerlink" title="æ„å»ºç¼“å­˜"></a>æ„å»ºç¼“å­˜</h3><p>åœ¨é•œåƒçš„æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒDocker ä¼šéå† <code>Dockerfile</code> æ–‡ä»¶ä¸­çš„æŒ‡ä»¤ï¼Œç„¶åæŒ‰é¡ºåºæ‰§è¡Œã€‚åœ¨æ‰§è¡Œæ¯æ¡æŒ‡ä»¤ä¹‹å‰ï¼ŒDocker éƒ½ä¼šåœ¨ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦å·²ç»å­˜åœ¨å¯é‡ç”¨çš„é•œåƒï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ç°å­˜çš„é•œåƒï¼Œä¸å†é‡å¤åˆ›å»ºã€‚å¦‚æœä½ ä¸æƒ³åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨ç¼“å­˜ï¼Œä½ å¯ä»¥åœ¨ <code>docker build</code> å‘½ä»¤ä¸­ä½¿ç”¨ <code>--no-cache=true</code> é€‰é¡¹ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³åœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­ä½¿ç”¨ç¼“å­˜ï¼Œä½ å¾—æ˜ç™½ä»€ä¹ˆæ—¶å€™ä¼šï¼Œä»€ä¹ˆæ—¶å€™ä¸ä¼šæ‰¾åˆ°åŒ¹é…çš„é•œåƒï¼Œéµå¾ªçš„åŸºæœ¬è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä»ä¸€ä¸ªåŸºç¡€é•œåƒå¼€å§‹ï¼ˆ<code>FROM</code> æŒ‡ä»¤æŒ‡å®šï¼‰ï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤å°†å’Œè¯¥åŸºç¡€é•œåƒçš„æ‰€æœ‰å­é•œåƒè¿›è¡ŒåŒ¹é…ï¼Œæ£€æŸ¥è¿™äº›å­é•œåƒè¢«åˆ›å»ºæ—¶ä½¿ç”¨çš„æŒ‡ä»¤æ˜¯å¦å’Œè¢«æ£€æŸ¥çš„æŒ‡ä»¤å®Œå…¨ä¸€æ ·ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™ç¼“å­˜å¤±æ•ˆã€‚</li>
<li>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåªéœ€è¦ç®€å•åœ°å¯¹æ¯” <code>Dockerfile</code> ä¸­çš„æŒ‡ä»¤å’Œå­é•œåƒã€‚ç„¶è€Œï¼Œæœ‰äº›æŒ‡ä»¤éœ€è¦æ›´å¤šçš„æ£€æŸ¥å’Œè§£é‡Šã€‚</li>
<li>å¯¹äº <code>ADD</code> å’Œ <code>COPY</code> æŒ‡ä»¤ï¼Œé•œåƒä¸­å¯¹åº”æ–‡ä»¶çš„å†…å®¹ä¹Ÿä¼šè¢«æ£€æŸ¥ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½ä¼šè®¡ç®—å‡ºä¸€ä¸ªæ ¡éªŒå’Œã€‚æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´å’Œæœ€åè®¿é—®æ—¶é—´ä¸ä¼šçº³å…¥æ ¡éªŒã€‚åœ¨ç¼“å­˜çš„æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼Œä¼šå°†è¿™äº›æ ¡éªŒå’Œå’Œå·²å­˜åœ¨é•œåƒä¸­çš„æ–‡ä»¶æ ¡éªŒå’Œè¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœæ–‡ä»¶æœ‰ä»»ä½•æ”¹å˜ï¼Œæ¯”å¦‚å†…å®¹å’Œå…ƒæ•°æ®ï¼Œåˆ™ç¼“å­˜å¤±æ•ˆã€‚</li>
<li>é™¤äº† <code>ADD</code> å’Œ <code>COPY</code> æŒ‡ä»¤ï¼Œç¼“å­˜åŒ¹é…è¿‡ç¨‹ä¸ä¼šæŸ¥çœ‹ä¸´æ—¶å®¹å™¨ä¸­çš„æ–‡ä»¶æ¥å†³å®šç¼“å­˜æ˜¯å¦åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œå½“æ‰§è¡Œå®Œ <code>RUN apt-get -y update</code> æŒ‡ä»¤åï¼Œå®¹å™¨ä¸­ä¸€äº›æ–‡ä»¶è¢«æ›´æ–°ï¼Œä½† Docker ä¸ä¼šæ£€æŸ¥è¿™äº›æ–‡ä»¶ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œåªæœ‰æŒ‡ä»¤å­—ç¬¦ä¸²æœ¬èº«è¢«ç”¨æ¥åŒ¹é…ç¼“å­˜ã€‚</li>
</ul>
<p>ä¸€æ—¦ç¼“å­˜å¤±æ•ˆï¼Œæ‰€æœ‰åç»­çš„ <code>Dockerfile</code> æŒ‡ä»¤éƒ½å°†äº§ç”Ÿæ–°çš„é•œåƒï¼Œç¼“å­˜ä¸ä¼šè¢«ä½¿ç”¨ã€‚</p>
<h2 id="Dockerfile-æŒ‡ä»¤"><a href="#Dockerfile-æŒ‡ä»¤" class="headerlink" title="Dockerfile æŒ‡ä»¤"></a>Dockerfile æŒ‡ä»¤</h2><p>ä¸‹é¢é’ˆå¯¹ <code>Dockerfile</code> ä¸­å„ç§æŒ‡ä»¤çš„æœ€ä½³ç¼–å†™æ–¹å¼ç»™å‡ºå»ºè®®ã€‚</p>
<h3 id="FROM"><a href="#FROM" class="headerlink" title="FROM"></a>FROM</h3><p>å°½å¯èƒ½ä½¿ç”¨å½“å‰å®˜æ–¹ä»“åº“ä½œä¸ºä½ æ„å»ºé•œåƒçš„åŸºç¡€ã€‚æ¨èä½¿ç”¨ <a href="https://hub.docker.com/_/alpine/" target="_blank" rel="noopener">Alpine</a> é•œåƒï¼Œå› ä¸ºå®ƒè¢«ä¸¥æ ¼æ§åˆ¶å¹¶ä¿æŒæœ€å°å°ºå¯¸ï¼ˆç›®å‰å°äº 5 MBï¼‰ï¼Œä½†å®ƒä»ç„¶æ˜¯ä¸€ä¸ªå®Œæ•´çš„å‘è¡Œç‰ˆã€‚</p>
<h3 id="LABEL"><a href="#LABEL" class="headerlink" title="LABEL"></a>LABEL</h3><p>ä½ å¯ä»¥ç»™é•œåƒæ·»åŠ æ ‡ç­¾æ¥å¸®åŠ©ç»„ç»‡é•œåƒã€è®°å½•è®¸å¯ä¿¡æ¯ã€è¾…åŠ©è‡ªåŠ¨åŒ–æ„å»ºç­‰ã€‚æ¯ä¸ªæ ‡ç­¾ä¸€è¡Œï¼Œç”± <code>LABEL</code> å¼€å¤´åŠ ä¸Šä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾å¯¹ã€‚ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å„ç§ä¸åŒçš„å¯èƒ½æ ¼å¼ã€‚<code>#</code> å¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šå†…å®¹ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šå¦‚æœä½ çš„å­—ç¬¦ä¸²ä¸­åŒ…å«ç©ºæ ¼ï¼Œå¿…é¡»å°†å­—ç¬¦ä¸²æ”¾å…¥å¼•å·ä¸­æˆ–è€…å¯¹ç©ºæ ¼ä½¿ç”¨è½¬ä¹‰ã€‚å¦‚æœå­—ç¬¦ä¸²å†…å®¹æœ¬èº«å°±åŒ…å«å¼•å·ï¼Œå¿…é¡»å¯¹å¼•å·ä½¿ç”¨è½¬ä¹‰ã€‚</p>
</blockquote>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Set one or more individual labels</span></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> com.example.version=<span class="string">"0.0.1-beta"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> vendor=<span class="string">"ACME Incorporated"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> com.example.release-date=<span class="string">"2015-02-12"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> com.example.version.is-production=<span class="string">""</span></span></span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªé•œåƒå¯ä»¥åŒ…å«å¤šä¸ªæ ‡ç­¾ï¼Œä½†å»ºè®®å°†å¤šä¸ªæ ‡ç­¾æ”¾å…¥åˆ°ä¸€ä¸ª <code>LABEL</code> æŒ‡ä»¤ä¸­ã€‚</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Set multiple labels at once, using line-continuation characters to break long lines</span></span><br><span class="line"><span class="keyword">LABEL</span><span class="bash"> vendor=ACME\ Incorporated \</span></span><br><span class="line"><span class="bash">      com.example.is-beta= \</span></span><br><span class="line"><span class="bash">      com.example.is-production=<span class="string">""</span> \</span></span><br><span class="line"><span class="bash">      com.example.version=<span class="string">"0.0.1-beta"</span> \</span></span><br><span class="line"><span class="bash">      com.example.release-date=<span class="string">"2015-02-12"</span></span></span><br></pre></td></tr></table></figure>
<p>å…³äºæ ‡ç­¾å¯ä»¥æ¥å—çš„é”®å€¼å¯¹ï¼Œå‚è€ƒ <a href="https://docs.docker.com/config/labels-custom-metadata/" target="_blank" rel="noopener">Understanding object labels</a>ã€‚å…³äºæŸ¥è¯¢æ ‡ç­¾ä¿¡æ¯ï¼Œå‚è€ƒ <a href="https://docs.docker.com/config/labels-custom-metadata/" target="_blank" rel="noopener">Managing labels on objects</a>ã€‚</p>
<h3 id="RUN"><a href="#RUN" class="headerlink" title="RUN"></a>RUN</h3><p>ä¸ºäº†ä¿æŒ <code>Dockerfile</code> æ–‡ä»¶çš„å¯è¯»æ€§ï¼Œå¯ç†è§£æ€§ï¼Œä»¥åŠå¯ç»´æŠ¤æ€§ï¼Œå»ºè®®å°†é•¿çš„æˆ–å¤æ‚çš„ <code>RUN</code> æŒ‡ä»¤ç”¨åæ–œæ  <code>\</code> åˆ†å‰²æˆå¤šè¡Œã€‚</p>
<h4 id="apt-get"><a href="#apt-get" class="headerlink" title="apt-get"></a>apt-get</h4><p><code>RUN</code> æŒ‡ä»¤æœ€å¸¸è§çš„ç”¨æ³•æ˜¯å®‰è£…åŒ…ç”¨çš„ <code>apt-get</code>ã€‚å› ä¸º <code>RUN apt-get</code> æŒ‡ä»¤ä¼šå®‰è£…åŒ…ï¼Œæ‰€ä»¥æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ã€‚</p>
<p>ä¸è¦ä½¿ç”¨ <code>RUN apt-get upgrade</code> æˆ– <code>dist-upgrade</code>ï¼Œå› ä¸ºè®¸å¤šåŸºç¡€é•œåƒä¸­çš„ã€Œå¿…é¡»ã€åŒ…ä¸ä¼šåœ¨ä¸€ä¸ªéç‰¹æƒå®¹å™¨ä¸­å‡çº§ã€‚å¦‚æœåŸºç¡€é•œåƒä¸­çš„æŸä¸ªåŒ…è¿‡æ—¶äº†ï¼Œä½ åº”è¯¥è”ç³»å®ƒçš„ç»´æŠ¤è€…ã€‚å¦‚æœä½ ç¡®å®šæŸä¸ªç‰¹å®šçš„åŒ…ï¼Œæ¯”å¦‚ <code>foo</code>ï¼Œéœ€è¦å‡çº§ï¼Œä½¿ç”¨ <code>apt-get install -y foo</code> å°±è¡Œï¼Œè¯¥æŒ‡ä»¤ä¼šè‡ªåŠ¨å‡çº§ <code>foo</code> åŒ…ã€‚</p>
<p>æ°¸è¿œå°† <code>RUN apt-get update</code> å’Œ <code>apt-get install</code> ç»„åˆæˆä¸€æ¡ <code>RUN</code> å£°æ˜ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="bash">        package-bar \</span></span><br><span class="line"><span class="bash">        package-baz \</span></span><br><span class="line"><span class="bash">        package-foo</span></span><br></pre></td></tr></table></figure>
<p>å°† <code>apt-get update</code> æ”¾åœ¨ä¸€æ¡å•ç‹¬çš„ <code>RUN</code> å£°æ˜ä¸­ä¼šå¯¼è‡´ç¼“å­˜é—®é¢˜ä»¥åŠåç»­çš„ <code>apt-get install</code> å¤±è´¥ã€‚æ¯”å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ª <code>Dockerfile</code> æ–‡ä»¶ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">18.04</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get install -y curl</span></span><br></pre></td></tr></table></figure>
<p>æ„å»ºé•œåƒåï¼Œæ‰€æœ‰çš„å±‚éƒ½åœ¨ Docker çš„ç¼“å­˜ä¸­ã€‚å‡è®¾ä½ åæ¥åˆä¿®æ”¹äº†å…¶ä¸­çš„ <code>apt-get install</code> æ·»åŠ äº†ä¸€ä¸ªåŒ…ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">18.04</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get install -y curl nginx</span></span><br></pre></td></tr></table></figure>
<p>Docker å‘ç°ä¿®æ”¹åçš„ <code>RUN apt-get update</code> æŒ‡ä»¤å’Œä¹‹å‰çš„å®Œå…¨ä¸€æ ·ã€‚æ‰€ä»¥ï¼Œ<code>apt-get update</code> ä¸ä¼šæ‰§è¡Œï¼Œè€Œæ˜¯ä½¿ç”¨ä¹‹å‰çš„ç¼“å­˜é•œåƒã€‚å› ä¸º <code>apt-get update</code> æ²¡æœ‰è¿è¡Œï¼Œåé¢çš„ <code>apt-get install</code> å¯èƒ½å®‰è£…çš„æ˜¯è¿‡æ—¶çš„ <code>curl</code> å’Œ <code>nginx</code> ç‰ˆæœ¬ã€‚</p>
<p>ä½¿ç”¨ <code>RUN apt-get update &amp;&amp; apt-get install -y</code> å¯ä»¥ç¡®ä¿ä½ çš„ Dockerfiles æ¯æ¬¡å®‰è£…çš„éƒ½æ˜¯åŒ…çš„æœ€æ–°çš„ç‰ˆæœ¬ï¼Œè€Œä¸”è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦è¿›ä¸€æ­¥çš„ç¼–ç æˆ–é¢å¤–å¹²é¢„ã€‚è¿™é¡¹æŠ€æœ¯å«ä½œ <code>cache busting</code>ã€‚ä½ ä¹Ÿå¯ä»¥æ˜¾ç¤ºæŒ‡å®šä¸€ä¸ªåŒ…çš„ç‰ˆæœ¬å·æ¥è¾¾åˆ° <code>cache-busting</code>ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å›ºå®šç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="bash">    package-bar \</span></span><br><span class="line"><span class="bash">    package-baz \</span></span><br><span class="line"><span class="bash">    package-foo=1.3.*</span></span><br></pre></td></tr></table></figure>
<p>å›ºå®šç‰ˆæœ¬ä¼šè¿«ä½¿æ„å»ºè¿‡ç¨‹æ£€ç´¢ç‰¹å®šçš„ç‰ˆæœ¬ï¼Œè€Œä¸ç®¡ç¼“å­˜ä¸­æœ‰ä»€ä¹ˆã€‚è¿™é¡¹æŠ€æœ¯ä¹Ÿå¯ä»¥å‡å°‘å› æ‰€éœ€åŒ…ä¸­æœªé¢„æ–™åˆ°çš„å˜åŒ–è€Œå¯¼è‡´çš„å¤±è´¥ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ª <code>RUN</code> æŒ‡ä»¤çš„ç¤ºä¾‹æ¨¡æ¿ï¼Œå±•ç¤ºäº†æ‰€æœ‰å…³äº <code>apt-get</code> çš„å»ºè®®ã€‚</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y \</span></span><br><span class="line"><span class="bash">    aufs-tools \</span></span><br><span class="line"><span class="bash">    automake \</span></span><br><span class="line"><span class="bash">    build-essential \</span></span><br><span class="line"><span class="bash">    curl \</span></span><br><span class="line"><span class="bash">    dpkg-sig \</span></span><br><span class="line"><span class="bash">    libcap-dev \</span></span><br><span class="line"><span class="bash">    libsqlite3-dev \</span></span><br><span class="line"><span class="bash">    mercurial \</span></span><br><span class="line"><span class="bash">    reprepro \</span></span><br><span class="line"><span class="bash">    ruby1.9.1 \</span></span><br><span class="line"><span class="bash">    ruby1.9.1-dev \</span></span><br><span class="line"><span class="bash">    s3cmd=1.1.* \</span></span><br><span class="line"><span class="bash"> &amp;&amp; rm -rf /var/lib/apt/lists/*</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ <code>s3cmd</code> æŒ‡ä»¤æŒ‡å®šäº†ä¸€ä¸ªç‰ˆæœ¬å· <code>1.1.*</code>ã€‚å¦‚æœä¹‹å‰çš„é•œåƒä½¿ç”¨çš„æ˜¯æ›´æ—§çš„ç‰ˆæœ¬ï¼ŒæŒ‡å®šæ–°çš„ç‰ˆæœ¬ä¼šå¯¼è‡´ <code>apt-get udpate</code> ç¼“å­˜å¤±æ•ˆå¹¶ç¡®ä¿å®‰è£…çš„æ˜¯æ–°ç‰ˆæœ¬ã€‚</p>
<p>å¦å¤–ï¼Œæ¸…ç†æ‰ apt ç¼“å­˜ <code>var/lib/apt/lists</code> å¯ä»¥å‡å°é•œåƒå¤§å°ã€‚å› ä¸º <code>RUN</code> æŒ‡ä»¤çš„å¼€å¤´ä¸º <code>apt-get udpate</code>ï¼ŒåŒ…ç¼“å­˜æ€»æ˜¯ä¼šåœ¨ <code>apt-get install</code> ä¹‹å‰åˆ·æ–°ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šå®˜æ–¹çš„ Debian å’Œ Ubuntu é•œåƒä¼šè‡ªåŠ¨è¿è¡Œ apt-get cleanï¼Œæ‰€ä»¥ä¸éœ€è¦æ˜¾å¼çš„è°ƒç”¨ apt-get cleanã€‚</p>
</blockquote>
<h3 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h3><p><code>CMD</code> æŒ‡ä»¤ç”¨äºæ‰§è¡Œç›®æ ‡é•œåƒä¸­åŒ…å«çš„è½¯ä»¶ï¼Œå¯ä»¥åŒ…å«å‚æ•°ã€‚<code>CMD</code> å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½åº”è¯¥ä»¥ <code>CMD [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;...]</code> çš„å½¢å¼ä½¿ç”¨ã€‚å› æ­¤ï¼Œå¦‚æœåˆ›å»ºé•œåƒçš„ç›®çš„æ˜¯ä¸ºäº†éƒ¨ç½²æŸä¸ªæœåŠ¡(æ¯”å¦‚ <code>Apache</code>)ï¼Œä½ å¯èƒ½ä¼šæ‰§è¡Œç±»ä¼¼äº <code>CMD [&quot;apache2&quot;, &quot;-DFOREGROUND&quot;]</code> å½¢å¼çš„å‘½ä»¤ã€‚æˆ‘ä»¬å»ºè®®ä»»ä½•æœåŠ¡é•œåƒéƒ½ä½¿ç”¨è¿™ç§å½¢å¼çš„å‘½ä»¤ã€‚</p>
<p>å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>CMD</code> éƒ½éœ€è¦ä¸€ä¸ªäº¤äº’å¼çš„ <code>shell</code> (bash, Python, perl ç­‰)ï¼Œä¾‹å¦‚ <code>CMD [&quot;perl&quot;, &quot;-de0&quot;]</code>ï¼Œæˆ–è€… <code>CMD [&quot;PHP&quot;, &quot;-a&quot;]</code>ã€‚ä½¿ç”¨è¿™ç§å½¢å¼æ„å‘³ç€ï¼Œå½“ä½ æ‰§è¡Œç±»ä¼¼ <code>docker run -it python</code> æ—¶ï¼Œä½ ä¼šè¿›å…¥ä¸€ä¸ªå‡†å¤‡å¥½çš„ <code>shell</code> ä¸­ã€‚<code>CMD</code> åº”è¯¥åœ¨æå°‘çš„æƒ…å†µä¸‹æ‰èƒ½ä»¥ <code>CMD [&quot;param&quot;, &quot;param&quot;]</code> çš„å½¢å¼ä¸ <code>ENTRYPOINT</code> ååŒä½¿ç”¨ï¼Œé™¤éä½ å’Œä½ çš„é•œåƒä½¿ç”¨è€…éƒ½å¯¹ <code>ENTRYPOINT</code> çš„å·¥ä½œæ–¹å¼ååˆ†ç†Ÿæ‚‰ã€‚</p>
<h3 id="EXPOSE"><a href="#EXPOSE" class="headerlink" title="EXPOSE"></a>EXPOSE</h3><p><code>EXPOSE</code> æŒ‡ä»¤ç”¨äºæŒ‡å®šå®¹å™¨å°†è¦ç›‘å¬çš„ç«¯å£ã€‚å› æ­¤ï¼Œä½ åº”è¯¥ä¸ºä½ çš„åº”ç”¨ç¨‹åºä½¿ç”¨å¸¸è§çš„ç«¯å£ã€‚ä¾‹å¦‚ï¼Œæä¾› <code>Apache</code> web æœåŠ¡çš„é•œåƒåº”è¯¥ä½¿ç”¨ <code>EXPOSE 80</code>ï¼Œè€Œæä¾› <code>MongoDB</code> æœåŠ¡çš„é•œåƒä½¿ç”¨ <code>EXPOSE 27017</code>ã€‚</p>
<p>å¯¹äºå¤–éƒ¨è®¿é—®ï¼Œç”¨æˆ·å¯ä»¥åœ¨æ‰§è¡Œ <code>docker run</code> æ—¶ä½¿ç”¨ä¸€ä¸ªæ ‡å¿—æ¥æŒ‡ç¤ºå¦‚ä½•å°†æŒ‡å®šçš„ç«¯å£æ˜ å°„åˆ°æ‰€é€‰æ‹©çš„ç«¯å£ã€‚</p>
<h3 id="ENV"><a href="#ENV" class="headerlink" title="ENV"></a>ENV</h3><p>ä¸ºäº†æ–¹ä¾¿æ–°ç¨‹åºè¿è¡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>ENV</code> æ¥ä¸ºå®¹å™¨ä¸­å®‰è£…çš„ç¨‹åºæ›´æ–° <code>PATH</code> ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ä½¿ç”¨ <code>ENV PATH /usr/local/nginx/bin:$PATH</code> æ¥ç¡®ä¿ <code>CMD [&quot;nginx&quot;]</code> èƒ½æ­£ç¡®è¿è¡Œã€‚</p>
<p><code>ENV</code> æŒ‡ä»¤ä¹Ÿå¯ç”¨äºä¸ºä½ æƒ³è¦å®¹å™¨åŒ–çš„æœåŠ¡æä¾›å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚ Postgres éœ€è¦çš„ <code>PGDATA</code>ã€‚</p>
<p>æœ€åï¼Œ<code>ENV</code> ä¹Ÿèƒ½ç”¨äºè®¾ç½®å¸¸è§çš„ç‰ˆæœ¬å·ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ENV</span> PG_MAJOR <span class="number">9.3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> PG_VERSION <span class="number">9.3</span>.<span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> curl -SL http://example.com/postgres-<span class="variable">$PG_VERSION</span>.tar.xz | tar -xJC /usr/src/postgress &amp;&amp; â€¦</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> PATH /usr/local/postgres-$PG_MAJOR/bin:$PATH</span><br></pre></td></tr></table></figure>
<p>ç±»ä¼¼äºç¨‹åºä¸­çš„å¸¸é‡ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥è®©ä½ åªéœ€æ”¹å˜ <code>ENV</code> æŒ‡ä»¤æ¥è‡ªåŠ¨çš„æ”¹å˜å®¹å™¨ä¸­çš„è½¯ä»¶ç‰ˆæœ¬ã€‚</p>
<h3 id="ADD-å’Œ-COPY"><a href="#ADD-å’Œ-COPY" class="headerlink" title="ADD å’Œ COPY"></a>ADD å’Œ COPY</h3><p>è™½ç„¶ <code>ADD</code> å’Œ <code>COPY</code> åŠŸèƒ½ç±»ä¼¼ï¼Œä½†ä¸€èˆ¬ä¼˜å…ˆä½¿ç”¨ <code>COPY</code>ã€‚å› ä¸ºå®ƒæ¯” <code>ADD</code> æ›´é€æ˜ã€‚<code>COPY</code> åªæ”¯æŒç®€å•å°†æœ¬åœ°æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨ä¸­ï¼Œè€Œ <code>ADD</code> æœ‰ä¸€äº›å¹¶ä¸æ˜æ˜¾çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚æœ¬åœ° tar æå–å’Œè¿œç¨‹ URL æ”¯æŒï¼‰ã€‚å› æ­¤ï¼Œ<code>ADD</code> çš„æœ€ä½³ç”¨ä¾‹æ˜¯å°†æœ¬åœ° tar æ–‡ä»¶è‡ªåŠ¨æå–åˆ°é•œåƒä¸­ï¼Œä¾‹å¦‚ <code>ADD rootfs.tar.xz</code>ã€‚</p>
<p>å¦‚æœä½ çš„ <code>Dockerfile</code> æœ‰å¤šä¸ªæ­¥éª¤éœ€è¦ä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­ä¸åŒçš„æ–‡ä»¶ã€‚å•ç‹¬ <code>COPY</code> æ¯ä¸ªæ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§çš„ <code>COPY</code> æ‰€æœ‰æ–‡ä»¶ï¼Œè¿™å°†ä¿è¯æ¯ä¸ªæ­¥éª¤çš„æ„å»ºç¼“å­˜åªåœ¨ç‰¹å®šçš„æ–‡ä»¶å˜åŒ–æ—¶å¤±æ•ˆã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> requirements.txt /tmp/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> pip install --requirement /tmp/requirements.txt</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /tmp/</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœå°† <code>COPY . /tmp/</code> æ”¾ç½®åœ¨ <code>RUN</code> æŒ‡ä»¤ä¹‹å‰ï¼Œåªè¦ <code>.</code> ç›®å½•ä¸­ä»»ä½•ä¸€ä¸ªæ–‡ä»¶å˜åŒ–ï¼Œéƒ½ä¼šå¯¼è‡´åç»­æŒ‡ä»¤çš„ç¼“å­˜å¤±æ•ˆã€‚</p>
<p>ä¸ºäº†è®©é•œåƒå°½é‡å°ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨ <code>ADD</code> æŒ‡ä»¤ä»è¿œç¨‹ URL è·å–åŒ…ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>curl</code> å’Œ <code>wget</code>ã€‚è¿™æ ·ä½ å¯ä»¥åœ¨æ–‡ä»¶æå–å®Œä¹‹ååˆ æ‰ä¸å†éœ€è¦çš„æ–‡ä»¶æ¥é¿å…åœ¨é•œåƒä¸­é¢å¤–æ·»åŠ ä¸€å±‚ã€‚æ¯”å¦‚å°½é‡é¿å…ä¸‹é¢çš„ç”¨æ³•ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ADD</span><span class="bash"> http://example.com/big.tar.xz /usr/src/things/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> tar -xJf /usr/src/things/big.tar.xz -C /usr/src/things</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> make -C /usr/src/things all</span></span><br></pre></td></tr></table></figure>
<p>è€Œæ˜¯åº”è¯¥ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹æ³•ï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /usr/src/things \</span></span><br><span class="line"><span class="bash">    &amp;&amp; curl -SL http://example.com/big.tar.xz \</span></span><br><span class="line"><span class="bash">    | tar -xJC /usr/src/things \</span></span><br><span class="line"><span class="bash">    &amp;&amp; make -C /usr/src/things all</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä½¿ç”¨çš„ç®¡é“æ“ä½œï¼Œæ‰€ä»¥æ²¡æœ‰ä¸­é—´æ–‡ä»¶éœ€è¦åˆ é™¤ã€‚</p>
<p>å¯¹äºå…¶ä»–ä¸éœ€è¦ <code>ADD</code> çš„è‡ªåŠ¨æå–åŠŸèƒ½çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œä½ åº”è¯¥ä½¿ç”¨ <code>COPY</code>ã€‚</p>
<h3 id="ENTRYPOINT"><a href="#ENTRYPOINT" class="headerlink" title="ENTRYPOINT"></a>ENTRYPOINT</h3><p><code>ENTRYPOINT</code> çš„æœ€ä½³ç”¨å¤„æ˜¯è®¾ç½®é•œåƒçš„ä¸»å‘½ä»¤ï¼Œå…è®¸å°†é•œåƒå½“æˆå‘½ä»¤æœ¬èº«æ¥è¿è¡Œï¼ˆç”¨ <code>CMD</code> æä¾›é»˜è®¤é€‰é¡¹ï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹é•œåƒæä¾›äº†å‘½ä»¤è¡Œå·¥å…· <code>s3cmd</code>:</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">"s3cmd"</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"--help"</span>]</span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ç›´æ¥è¿è¡Œè¯¥é•œåƒåˆ›å»ºçš„å®¹å™¨ä¼šæ˜¾ç¤ºå‘½ä»¤å¸®åŠ©ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run s3cmd</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…æä¾›æ­£ç¡®çš„å‚æ•°æ¥æ‰§è¡ŒæŸä¸ªå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run s3cmd ls s3://mybucket</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·é•œåƒåå¯ä»¥å½“æˆå‘½ä»¤è¡Œçš„å‚è€ƒã€‚</p>
<p><code>ENTRYPOINT</code> æŒ‡ä»¤ä¹Ÿå¯ä»¥ç»“åˆä¸€ä¸ªè¾…åŠ©è„šæœ¬ä½¿ç”¨ï¼Œå’Œå‰é¢å‘½ä»¤è¡Œé£æ ¼ç±»ä¼¼ï¼Œå³ä½¿å¯åŠ¨å·¥å…·éœ€è¦ä¸æ­¢ä¸€ä¸ªæ­¥éª¤ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ<code>Postgres</code> å®˜æ–¹é•œåƒä½¿ç”¨ä¸‹é¢çš„è„šæœ¬ä½œä¸º <code>ENTRYPOINT</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">set</span> -e</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$1</span>"</span> = <span class="string">'postgres'</span> ]; <span class="keyword">then</span></span><br><span class="line">    chown -R postgres <span class="string">"<span class="variable">$PGDATA</span>"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$(ls -A "$PGDATA")</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        gosu postgres initdb</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">exec</span> gosu postgres <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span> <span class="string">"<span class="variable">$@</span>"</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šè¯¥è„šæœ¬ä½¿ç”¨äº† Bash çš„å†…ç½®å‘½ä»¤ execï¼Œæ‰€ä»¥æœ€åè¿è¡Œçš„è¿›ç¨‹å°±æ˜¯å®¹å™¨çš„ PID ä¸º 1 çš„è¿›ç¨‹ã€‚è¿™æ ·ï¼Œè¿›ç¨‹å°±å¯ä»¥æ¥æ”¶åˆ°ä»»ä½•å‘é€ç»™å®¹å™¨çš„ Unix ä¿¡å·äº†ã€‚</p>
</blockquote>
<p>è¯¥è¾…åŠ©è„šæœ¬è¢«æ‹·è´åˆ°å®¹å™¨ï¼Œå¹¶åœ¨å®¹å™¨å¯åŠ¨æ—¶é€šè¿‡ <code>ENTRYPOINT</code> æ‰§è¡Œï¼š</p>
<figure class="highlight docker"><table><tr><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="bash"> ./docker-entrypoint.sh /</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">"/docker-entrypoint.sh"</span>]</span></span><br></pre></td></tr></table></figure>
<p>è¯¥è„šæœ¬å¯ä»¥è®©ç”¨æˆ·ç”¨å‡ ç§ä¸åŒçš„æ–¹å¼å’Œ <code>Postgres</code> äº¤äº’ã€‚</p>
<p>ä½ å¯ä»¥å¾ˆç®€å•åœ°å¯åŠ¨ <code>Postgres</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run postgres</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥æ‰§è¡Œ <code>Postgres</code> å¹¶ä¼ é€’å‚æ•°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run postgres postgres --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<p>æœ€åï¼Œä½ è¿˜å¯ä»¥å¯åŠ¨å¦å¤–ä¸€ä¸ªå®Œå…¨ä¸åŒçš„å·¥å…·ï¼Œæ¯”å¦‚ <code>Bash</code>ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run --rm -it postgres bash</span><br></pre></td></tr></table></figure>
<h3 id="VOLUME"><a href="#VOLUME" class="headerlink" title="VOLUME"></a>VOLUME</h3><p><code>VOLUME</code> æŒ‡ä»¤ç”¨äºæš´éœ²ä»»ä½•æ•°æ®åº“å­˜å‚¨æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ï¼Œæˆ–å®¹å™¨åˆ›å»ºçš„æ–‡ä»¶å’Œç›®å½•ã€‚å¼ºçƒˆå»ºè®®ä½¿ç”¨ <code>VOLUME</code> æ¥ç®¡ç†é•œåƒä¸­çš„å¯å˜éƒ¨åˆ†å’Œç”¨æˆ·å¯ä»¥æ”¹å˜çš„éƒ¨åˆ†ã€‚</p>
<h3 id="USER"><a href="#USER" class="headerlink" title="USER"></a>USER</h3><p>å¦‚æœæŸä¸ªæœåŠ¡ä¸éœ€è¦ç‰¹æƒæ‰§è¡Œï¼Œå»ºè®®ä½¿ç”¨ <code>USER</code> æŒ‡ä»¤åˆ‡æ¢åˆ°é root ç”¨æˆ·ã€‚å…ˆåœ¨ <code>Dockerfile</code> ä¸­ä½¿ç”¨ç±»ä¼¼ <code>RUN groupadd -r postgres &amp;&amp; useradd -r -g postgres postgres</code> çš„æŒ‡ä»¤åˆ›å»ºç”¨æˆ·å’Œç”¨æˆ·ç»„ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨é•œåƒä¸­ï¼Œç”¨æˆ·å’Œç”¨æˆ·ç»„æ¯æ¬¡è¢«åˆ†é…çš„ UID/GID éƒ½æ˜¯ä¸ç¡®å®šçš„ï¼Œä¸‹æ¬¡é‡æ–°æ„å»ºé•œåƒæ—¶è¢«åˆ†é…åˆ°çš„ UID/GID å¯èƒ½ä¼šä¸ä¸€æ ·ã€‚å¦‚æœè¦ä¾èµ–ç¡®å®šçš„ UID/GIDï¼Œä½ åº”è¯¥æ˜¾ç¤ºçš„æŒ‡å®šä¸€ä¸ª UID/GIDã€‚</p>
</blockquote>
<p>ä½ åº”è¯¥é¿å…ä½¿ç”¨ <code>sudo</code>ï¼Œå› ä¸ºå®ƒä¸å¯é¢„æœŸçš„ TTY å’Œä¿¡å·è½¬å‘è¡Œä¸ºå¯èƒ½é€ æˆçš„é—®é¢˜æ¯”å®ƒèƒ½è§£å†³çš„é—®é¢˜è¿˜å¤šã€‚å¦‚æœä½ çœŸçš„éœ€è¦å’Œ <code>sudo</code> ç±»ä¼¼çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼Œä»¥ root æƒé™åˆå§‹åŒ–æŸä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œä»¥é root æƒé™æ‰§è¡Œå®ƒï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.com/tianon/gosu" target="_blank" rel="noopener">gosu</a>ã€‚</p>
<p>æœ€åï¼Œä¸ºäº†å‡å°‘å±‚æ•°å’Œå¤æ‚åº¦ï¼Œé¿å…é¢‘ç¹åœ°ä½¿ç”¨ <code>USER</code> æ¥å›åˆ‡æ¢ç”¨æˆ·ã€‚</p>
<h3 id="WORKDIR"><a href="#WORKDIR" class="headerlink" title="WORKDIR"></a>WORKDIR</h3><p>ä¸ºäº†æ¸…æ™°æ€§å’Œå¯é æ€§ï¼Œä½ åº”è¯¥æ€»æ˜¯åœ¨ <code>WORKDIR</code> ä¸­ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚å¦å¤–ï¼Œä½ åº”è¯¥ä½¿ç”¨ <code>WORKDIR</code> æ¥æ›¿ä»£ç±»ä¼¼äº <code>RUN cd ... &amp;&amp; do-something</code> çš„æŒ‡ä»¤ï¼Œåè€…éš¾ä»¥é˜…è¯»ã€æ’é”™å’Œç»´æŠ¤ã€‚</p>
<h2 id="å®˜æ–¹é•œåƒç¤ºä¾‹"><a href="#å®˜æ–¹é•œåƒç¤ºä¾‹" class="headerlink" title="å®˜æ–¹é•œåƒç¤ºä¾‹"></a>å®˜æ–¹é•œåƒç¤ºä¾‹</h2><p>è¿™äº›å®˜æ–¹é•œåƒçš„ Dockerfile éƒ½æ˜¯å‚è€ƒå…¸èŒƒï¼š<a href="https://github.com/docker-library/docs" target="_blank" rel="noopener">https://github.com/docker-library/docs</a></p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>æœ¬æ–‡ç« æ‘˜æŠ„äºï¼š<a href="https://yeasy.gitbooks.io/docker_practice/content/" target="_blank" rel="noopener">https://yeasy.gitbooks.io/docker_practice/content/</a></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerå…¥é—¨ï¼ˆå››ï¼‰â€”â€”ä»“åº“</title>
    <url>/2019/12/04/Docker%E5%85%A5%E9%97%A8%EF%BC%88%E5%9B%9B%EF%BC%89%E2%80%94%E2%80%94%E4%BB%93%E5%BA%93/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Dockerä»“åº“ç®€ä»‹"><a href="#Dockerä»“åº“ç®€ä»‹" class="headerlink" title="Dockerä»“åº“ç®€ä»‹"></a>Dockerä»“åº“ç®€ä»‹</h1><p>ä»“åº“ï¼ˆ<code>Repository</code>ï¼‰æ˜¯é›†ä¸­å­˜æ”¾é•œåƒçš„åœ°æ–¹ã€‚</p>
<p>ä¸€ä¸ªå®¹æ˜“æ··æ·†çš„æ¦‚å¿µæ˜¯æ³¨å†ŒæœåŠ¡å™¨ï¼ˆ<code>Registry</code>ï¼‰ã€‚å®é™…ä¸Šæ³¨å†ŒæœåŠ¡å™¨æ˜¯ç®¡ç†ä»“åº“çš„å…·ä½“æœåŠ¡å™¨ï¼Œæ¯ä¸ªæœåŠ¡å™¨ä¸Šå¯ä»¥æœ‰å¤šä¸ªä»“åº“ï¼Œè€Œæ¯ä¸ªä»“åº“ä¸‹é¢æœ‰å¤šä¸ªé•œåƒã€‚ä»è¿™æ–¹é¢æ¥è¯´ï¼Œä»“åº“å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå…·ä½“çš„é¡¹ç›®æˆ–ç›®å½•ã€‚ä¾‹å¦‚å¯¹äºä»“åº“åœ°å€ <code>dl.dockerpool.com/ubuntu</code> æ¥è¯´ï¼Œ<code>dl.dockerpool.com</code> æ˜¯æ³¨å†ŒæœåŠ¡å™¨åœ°å€ï¼Œ<code>ubuntu</code> æ˜¯ä»“åº“åã€‚</p>
<p>å¤§éƒ¨åˆ†æ—¶å€™ï¼Œå¹¶ä¸éœ€è¦ä¸¥æ ¼åŒºåˆ†è¿™ä¸¤è€…çš„æ¦‚å¿µã€‚</p>
<a id="more"></a>
<h1 id="Docker-Hub"><a href="#Docker-Hub" class="headerlink" title="Docker Hub"></a>Docker Hub</h1><p>ç›®å‰ Docker å®˜æ–¹ç»´æŠ¤äº†ä¸€ä¸ªå…¬å…±ä»“åº“ <a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a>ï¼Œå…¶ä¸­å·²ç»åŒ…æ‹¬äº†æ•°é‡è¶…è¿‡ <a href="https://hub.docker.com/search/?type=image" target="_blank" rel="noopener">2,650,000</a> çš„é•œåƒã€‚å¤§éƒ¨åˆ†éœ€æ±‚éƒ½å¯ä»¥é€šè¿‡åœ¨ Docker Hub ä¸­ç›´æ¥ä¸‹è½½é•œåƒæ¥å®ç°ã€‚</p>
<h2 id="æ³¨å†Œ"><a href="#æ³¨å†Œ" class="headerlink" title="æ³¨å†Œ"></a>æ³¨å†Œ</h2><p>ä½ å¯ä»¥åœ¨ <a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com</a> å…è´¹æ³¨å†Œä¸€ä¸ª Docker è´¦å·ã€‚</p>
<h2 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h2><p>å¯ä»¥é€šè¿‡æ‰§è¡Œ <code>docker login</code> å‘½ä»¤äº¤äº’å¼çš„è¾“å…¥ç”¨æˆ·ååŠå¯†ç æ¥å®Œæˆåœ¨å‘½ä»¤è¡Œç•Œé¢ç™»å½• Docker Hubã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ <code>docker logout</code> é€€å‡ºç™»å½•ã€‚</p>
<h2 id="æ‹‰å–é•œåƒ"><a href="#æ‹‰å–é•œåƒ" class="headerlink" title="æ‹‰å–é•œåƒ"></a>æ‹‰å–é•œåƒ</h2><p>ä½ å¯ä»¥é€šè¿‡ <code>docker search</code> å‘½ä»¤æ¥æŸ¥æ‰¾å®˜æ–¹ä»“åº“ä¸­çš„é•œåƒï¼Œå¹¶åˆ©ç”¨ <code>docker pull</code> å‘½ä»¤æ¥å°†å®ƒä¸‹è½½åˆ°æœ¬åœ°ã€‚</p>
<p>ä¾‹å¦‚ä»¥ <code>centos</code> ä¸ºå…³é”®è¯è¿›è¡Œæœç´¢ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker search centos</span><br><span class="line">NAME                                            DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">centos                                          The official build of CentOS.                   465       [OK]</span><br><span class="line">tianon/centos                                   CentOS 5 and 6, created using rinse instea...   28</span><br><span class="line">blalor/centos                                   Bare-bones base CentOS 6.5 image                6                    [OK]</span><br><span class="line">saltstack/centos-6-minimal                                                                      6                    [OK]</span><br><span class="line">tutum/centos-6.4                                DEPRECATED. Use tutum/centos:6.4 instead. ...   5                    [OK]</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°è¿”å›äº†å¾ˆå¤šåŒ…å«å…³é”®å­—çš„é•œåƒï¼Œå…¶ä¸­åŒ…æ‹¬é•œåƒåå­—ã€æè¿°ã€æ”¶è—æ•°ï¼ˆè¡¨ç¤ºè¯¥é•œåƒçš„å—å…³æ³¨ç¨‹åº¦ï¼‰ã€æ˜¯å¦å®˜æ–¹åˆ›å»ºï¼ˆOFFICIALï¼‰ã€æ˜¯å¦è‡ªåŠ¨æ„å»º ï¼ˆAUTOMATEDï¼‰ã€‚</p>
<p>æ ¹æ®æ˜¯å¦æ˜¯å®˜æ–¹æä¾›ï¼Œå¯å°†é•œåƒåˆ†ä¸ºä¸¤ç±»ã€‚</p>
<p>ä¸€ç§æ˜¯ç±»ä¼¼ <code>centos</code> è¿™æ ·çš„é•œåƒï¼Œè¢«ç§°ä¸ºåŸºç¡€é•œåƒæˆ–æ ¹é•œåƒã€‚è¿™äº›åŸºç¡€é•œåƒç”± Docker å…¬å¸åˆ›å»ºã€éªŒè¯ã€æ”¯æŒã€æä¾›ã€‚è¿™æ ·çš„é•œåƒå¾€å¾€ä½¿ç”¨å•ä¸ªå•è¯ä½œä¸ºåå­—ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§ç±»å‹ï¼Œæ¯”å¦‚ <code>tianon/centos</code> é•œåƒï¼Œå®ƒæ˜¯ç”± Docker Hub çš„æ³¨å†Œç”¨æˆ·åˆ›å»ºå¹¶ç»´æŠ¤çš„ï¼Œå¾€å¾€å¸¦æœ‰ç”¨æˆ·åç§°å‰ç¼€ã€‚å¯ä»¥é€šè¿‡å‰ç¼€ <code>username/</code> æ¥æŒ‡å®šä½¿ç”¨æŸä¸ªç”¨æˆ·æä¾›çš„é•œåƒï¼Œæ¯”å¦‚ tianon ç”¨æˆ·ã€‚</p>
<p>å¦å¤–ï¼Œåœ¨æŸ¥æ‰¾çš„æ—¶å€™é€šè¿‡ <code>--filter=stars=N</code> å‚æ•°å¯ä»¥æŒ‡å®šä»…æ˜¾ç¤ºæ”¶è—æ•°é‡ä¸º <code>N</code> ä»¥ä¸Šçš„é•œåƒã€‚</p>
<p>ä¸‹è½½å®˜æ–¹ <code>centos</code> é•œåƒåˆ°æœ¬åœ°ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker pull centos</span><br><span class="line">Pulling repository centos</span><br><span class="line">0b443ba03958: Download complete</span><br><span class="line">539c0211cd76: Download complete</span><br><span class="line">511136ea3c5a: Download complete</span><br><span class="line">7064731afe90: Download complete</span><br></pre></td></tr></table></figure>
<h2 id="æ¨é€é•œåƒ"><a href="#æ¨é€é•œåƒ" class="headerlink" title="æ¨é€é•œåƒ"></a>æ¨é€é•œåƒ</h2><p>ç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨ç™»å½•åé€šè¿‡ <code>docker push</code> å‘½ä»¤æ¥å°†è‡ªå·±çš„é•œåƒæ¨é€åˆ° Docker Hubã€‚</p>
<p>ä»¥ä¸‹å‘½ä»¤ä¸­çš„ <code>username</code> è¯·æ›¿æ¢ä¸ºä½ çš„ Docker è´¦å·ç”¨æˆ·åã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker tag ubuntu:18.04 username/ubuntu:18.04</span><br><span class="line"></span><br><span class="line">$ docker image ls</span><br><span class="line"></span><br><span class="line">REPOSITORY                                               TAG                    IMAGE ID            CREATED             SIZE</span><br><span class="line">ubuntu                                                   18.04                  275d79972a86        6 days ago          94.6MB</span><br><span class="line">username/ubuntu                                          18.04                  275d79972a86        6 days ago          94.6MB</span><br><span class="line"></span><br><span class="line">$ docker push username/ubuntu:18.04</span><br><span class="line"></span><br><span class="line">$ docker search username</span><br><span class="line"></span><br><span class="line">NAME                      DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">username/ubuntu</span><br></pre></td></tr></table></figure>
<h2 id="è‡ªåŠ¨æ„å»º"><a href="#è‡ªåŠ¨æ„å»º" class="headerlink" title="è‡ªåŠ¨æ„å»º"></a>è‡ªåŠ¨æ„å»º</h2><p>è‡ªåŠ¨æ„å»ºï¼ˆAutomated Buildsï¼‰åŠŸèƒ½å¯¹äºéœ€è¦ç»å¸¸å‡çº§é•œåƒå†…ç¨‹åºæ¥è¯´ï¼Œååˆ†æ–¹ä¾¿ã€‚</p>
<p>æœ‰æ—¶å€™ï¼Œç”¨æˆ·æ„å»ºäº†é•œåƒï¼Œå®‰è£…äº†æŸä¸ªè½¯ä»¶ï¼Œå½“è½¯ä»¶å‘å¸ƒæ–°ç‰ˆæœ¬åˆ™éœ€è¦æ‰‹åŠ¨æ›´æ–°é•œåƒã€‚</p>
<p>è€Œè‡ªåŠ¨æ„å»ºå…è®¸ç”¨æˆ·é€šè¿‡ Docker Hub æŒ‡å®šè·Ÿè¸ªä¸€ä¸ªç›®æ ‡ç½‘ç«™ï¼ˆæ”¯æŒ <a href="https://github.com/" target="_blank" rel="noopener">GitHub</a> æˆ– <a href="https://bitbucket.org/" target="_blank" rel="noopener">BitBucket</a>ï¼‰ä¸Šçš„é¡¹ç›®ï¼Œä¸€æ—¦é¡¹ç›®å‘ç”Ÿæ–°çš„æäº¤ ï¼ˆcommitï¼‰æˆ–è€…åˆ›å»ºäº†æ–°çš„æ ‡ç­¾ï¼ˆtagï¼‰ï¼ŒDocker Hub ä¼šè‡ªåŠ¨æ„å»ºé•œåƒå¹¶æ¨é€åˆ° Docker Hub ä¸­ã€‚</p>
<p>è¦é…ç½®è‡ªåŠ¨æ„å»ºï¼ŒåŒ…æ‹¬å¦‚ä¸‹çš„æ­¥éª¤ï¼š</p>
<ul>
<li>ç™»å½• Docker Hubï¼›</li>
<li>åœ¨ Docker Hub ç‚¹å‡»å³ä¸Šè§’å¤´åƒï¼Œåœ¨è´¦å·è®¾ç½®ï¼ˆAccount Settingsï¼‰ä¸­å…³è”ï¼ˆLinked Accountsï¼‰ç›®æ ‡ç½‘ç«™ï¼›</li>
<li>åœ¨ Docker Hub ä¸­æ–°å»ºæˆ–é€‰æ‹©å·²æœ‰çš„ä»“åº“ï¼Œåœ¨ <code>Builds</code> é€‰é¡¹å¡ä¸­é€‰æ‹© <code>Configure Automated Builds</code>ï¼›</li>
<li>é€‰å–ä¸€ä¸ªç›®æ ‡ç½‘ç«™ä¸­çš„é¡¹ç›®ï¼ˆéœ€è¦å« <code>Dockerfile</code>ï¼‰å’Œåˆ†æ”¯ï¼›</li>
<li>æŒ‡å®š <code>Dockerfile</code> çš„ä½ç½®ï¼Œå¹¶ä¿å­˜ã€‚</li>
</ul>
<p>ä¹‹åï¼Œå¯ä»¥åœ¨ Docker Hub çš„ä»“åº“é¡µé¢çš„ <code>Timeline</code> é€‰é¡¹å¡ä¸­æŸ¥çœ‹æ¯æ¬¡æ„å»ºçš„çŠ¶æ€ã€‚</p>
<h1 id="ç§æœ‰ä»“åº“"><a href="#ç§æœ‰ä»“åº“" class="headerlink" title="ç§æœ‰ä»“åº“"></a>ç§æœ‰ä»“åº“</h1><p>æœ‰æ—¶å€™ä½¿ç”¨ Docker Hub è¿™æ ·çš„å…¬å…±ä»“åº“å¯èƒ½ä¸æ–¹ä¾¿ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºä¸€ä¸ªæœ¬åœ°ä»“åº“ä¾›ç§äººä½¿ç”¨ã€‚</p>
<p>æœ¬èŠ‚ä»‹ç»å¦‚ä½•ä½¿ç”¨æœ¬åœ°ä»“åº“ã€‚</p>
<p><a href="https://docs.docker.com/registry/" target="_blank" rel="noopener"><code>docker-registry</code></a> æ˜¯å®˜æ–¹æä¾›çš„å·¥å…·ï¼Œå¯ä»¥ç”¨äºæ„å»ºç§æœ‰çš„é•œåƒä»“åº“ã€‚æœ¬æ–‡å†…å®¹åŸºäº <a href="https://github.com/docker/distribution" target="_blank" rel="noopener"><code>docker-registry</code></a> v2.x ç‰ˆæœ¬ã€‚</p>
<h2 id="å®‰è£…è¿è¡Œ-docker-registry"><a href="#å®‰è£…è¿è¡Œ-docker-registry" class="headerlink" title="å®‰è£…è¿è¡Œ docker-registry"></a>å®‰è£…è¿è¡Œ docker-registry</h2><h3 id="å®¹å™¨è¿è¡Œ"><a href="#å®¹å™¨è¿è¡Œ" class="headerlink" title="å®¹å™¨è¿è¡Œ"></a>å®¹å™¨è¿è¡Œ</h3><p>ä½ å¯ä»¥é€šè¿‡è·å–å®˜æ–¹ <code>registry</code> é•œåƒæ¥è¿è¡Œã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d -p 5000:5000 --restart=always --name registry registry</span><br></pre></td></tr></table></figure>
<p>è¿™å°†ä½¿ç”¨å®˜æ–¹çš„ <code>registry</code> é•œåƒæ¥å¯åŠ¨ç§æœ‰ä»“åº“ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä»“åº“ä¼šè¢«åˆ›å»ºåœ¨å®¹å™¨çš„ <code>/var/lib/registry</code> ç›®å½•ä¸‹ã€‚ä½ å¯ä»¥é€šè¿‡ <code>-v</code> å‚æ•°æ¥å°†é•œåƒæ–‡ä»¶å­˜æ”¾åœ¨æœ¬åœ°çš„æŒ‡å®šè·¯å¾„ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­å°†ä¸Šä¼ çš„é•œåƒæ”¾åˆ°æœ¬åœ°çš„ <code>/opt/data/registry</code> ç›®å½•ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d \</span><br><span class="line">    -p 5000:5000 \</span><br><span class="line">    -v /opt/data/registry:/var/lib/registry \</span><br><span class="line">    registry</span><br></pre></td></tr></table></figure>
<h2 id="åœ¨ç§æœ‰ä»“åº“ä¸Šä¼ ã€æœç´¢ã€ä¸‹è½½é•œåƒ"><a href="#åœ¨ç§æœ‰ä»“åº“ä¸Šä¼ ã€æœç´¢ã€ä¸‹è½½é•œåƒ" class="headerlink" title="åœ¨ç§æœ‰ä»“åº“ä¸Šä¼ ã€æœç´¢ã€ä¸‹è½½é•œåƒ"></a>åœ¨ç§æœ‰ä»“åº“ä¸Šä¼ ã€æœç´¢ã€ä¸‹è½½é•œåƒ</h2><p>åˆ›å»ºå¥½ç§æœ‰ä»“åº“ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>docker tag</code> æ¥æ ‡è®°ä¸€ä¸ªé•œåƒï¼Œç„¶åæ¨é€å®ƒåˆ°ä»“åº“ã€‚ä¾‹å¦‚ç§æœ‰ä»“åº“åœ°å€ä¸º <code>127.0.0.1:5000</code>ã€‚</p>
<p>å…ˆåœ¨æœ¬æœºæŸ¥çœ‹å·²æœ‰çš„é•œåƒã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls</span><br><span class="line">REPOSITORY                        TAG                 IMAGE ID            CREATED             VIRTUAL SIZE</span><br><span class="line">ubuntu                            latest              ba5877dc9bec        6 weeks ago         192.7 MB</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>docker tag</code> å°† <code>ubuntu:latest</code> è¿™ä¸ªé•œåƒæ ‡è®°ä¸º <code>127.0.0.1:5000/ubuntu:latest</code>ã€‚</p>
<p>æ ¼å¼ä¸º <code>docker tag IMAGE[:TAG] [REGISTRY_HOST[:REGISTRY_PORT]/]REPOSITORY[:TAG]</code>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker tag ubuntu:latest 127.0.0.1:5000/ubuntu:latest</span><br><span class="line">$ docker image ls</span><br><span class="line">REPOSITORY                        TAG                 IMAGE ID            CREATED             VIRTUAL SIZE</span><br><span class="line">ubuntu                            latest              ba5877dc9bec        6 weeks ago         192.7 MB</span><br><span class="line">127.0.0.1:5000/ubuntu:latest      latest              ba5877dc9bec        6 weeks ago         192.7 MB</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>docker push</code> ä¸Šä¼ æ ‡è®°çš„é•œåƒã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker push 127.0.0.1:5000/ubuntu:latest</span><br><span class="line">The push refers to repository [127.0.0.1:5000/ubuntu]</span><br><span class="line">373a30c24545: Pushed</span><br><span class="line">a9148f5200b0: Pushed</span><br><span class="line">cdd3de0940ab: Pushed</span><br><span class="line">fc56279bbb33: Pushed</span><br><span class="line">b38367233d37: Pushed</span><br><span class="line">2aebd096e0e2: Pushed</span><br><span class="line">latest: digest: sha256:fe4277621f10b5026266932ddf760f5a756d2facd505a94d2da12f4f52f71f5a size: 1568</span><br></pre></td></tr></table></figure>
<p>ç”¨ <code>curl</code> æŸ¥çœ‹ä»“åº“ä¸­çš„é•œåƒã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl 127.0.0.1:5000/v2/_catalog</span><br><span class="line">&#123;<span class="string">"repositories"</span>:[<span class="string">"ubuntu"</span>]&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ° <code>{&quot;repositories&quot;:[&quot;ubuntu&quot;]}</code>ï¼Œè¡¨æ˜é•œåƒå·²ç»è¢«æˆåŠŸä¸Šä¼ äº†ã€‚</p>
<p>å…ˆåˆ é™¤å·²æœ‰é•œåƒï¼Œå†å°è¯•ä»ç§æœ‰ä»“åº“ä¸­ä¸‹è½½è¿™ä¸ªé•œåƒã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image rm 127.0.0.1:5000/ubuntu:latest</span><br><span class="line"></span><br><span class="line">$ docker pull 127.0.0.1:5000/ubuntu:latest</span><br><span class="line">Pulling repository 127.0.0.1:5000/ubuntu:latest</span><br><span class="line">ba5877dc9bec: Download complete</span><br><span class="line">511136ea3c5a: Download complete</span><br><span class="line">9bad880da3d2: Download complete</span><br><span class="line">25f11f5fb0cb: Download complete</span><br><span class="line">ebc34468f71d: Download complete</span><br><span class="line">2318d26665ef: Download complete</span><br><span class="line"></span><br><span class="line">$ docker image ls</span><br><span class="line">REPOSITORY                         TAG                 IMAGE ID            CREATED             VIRTUAL SIZE</span><br><span class="line">127.0.0.1:5000/ubuntu:latest       latest              ba5877dc9bec        6 weeks ago         192.7 MB</span><br></pre></td></tr></table></figure>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ <code>127.0.0.1:5000</code> ä½œä¸ºä»“åº“åœ°å€ï¼Œæ¯”å¦‚æƒ³è®©æœ¬ç½‘æ®µçš„å…¶ä»–ä¸»æœºä¹Ÿèƒ½æŠŠé•œåƒæ¨é€åˆ°ç§æœ‰ä»“åº“ã€‚ä½ å°±å¾—æŠŠä¾‹å¦‚ <code>192.168.199.100:5000</code> è¿™æ ·çš„å†…ç½‘åœ°å€ä½œä¸ºç§æœ‰ä»“åº“åœ°å€ï¼Œè¿™æ—¶ä½ ä¼šå‘ç°æ— æ³•æˆåŠŸæ¨é€é•œåƒã€‚</p>
<p>è¿™æ˜¯å› ä¸º Docker é»˜è®¤ä¸å…è®¸é <code>HTTPS</code> æ–¹å¼æ¨é€é•œåƒã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ Docker çš„é…ç½®é€‰é¡¹æ¥å–æ¶ˆè¿™ä¸ªé™åˆ¶ï¼Œæˆ–è€…æŸ¥çœ‹ä¸‹ä¸€èŠ‚é…ç½®èƒ½å¤Ÿé€šè¿‡ <code>HTTPS</code> è®¿é—®çš„ç§æœ‰ä»“åº“ã€‚</p>
<h3 id="Ubuntu-16-04-Debian-8-centos-7"><a href="#Ubuntu-16-04-Debian-8-centos-7" class="headerlink" title="Ubuntu 16.04+, Debian 8+, centos 7"></a>Ubuntu 16.04+, Debian 8+, centos 7</h3><p>å¯¹äºä½¿ç”¨ <code>systemd</code> çš„ç³»ç»Ÿï¼Œè¯·åœ¨ <code>/etc/docker/daemon.json</code> ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨è¯·æ–°å»ºè¯¥æ–‡ä»¶ï¼‰</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"registry-mirror"</span>: [</span><br><span class="line">    <span class="string">"https://dockerhub.azk8s.cn"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"insecure-registries"</span>: [</span><br><span class="line">    <span class="string">"192.168.199.100:5000"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šè¯¥æ–‡ä»¶å¿…é¡»ç¬¦åˆ <code>json</code> è§„èŒƒï¼Œå¦åˆ™ Docker å°†ä¸èƒ½å¯åŠ¨ã€‚</p>
</blockquote>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p>å¯¹äº Docker Desktop for Windows ã€ Docker Desktop for Mac åœ¨è®¾ç½®ä¸­çš„ <code>Docker Engine</code> ä¸­è¿›è¡Œç¼–è¾‘ ï¼Œå¢åŠ å’Œä¸Šè¾¹ä¸€æ ·çš„å­—ç¬¦ä¸²å³å¯ã€‚</p>
<h1 id="Nexus3-x-çš„ç§æœ‰ä»“åº“"><a href="#Nexus3-x-çš„ç§æœ‰ä»“åº“" class="headerlink" title="Nexus3.x çš„ç§æœ‰ä»“åº“"></a>Nexus3.x çš„ç§æœ‰ä»“åº“</h1><p>ä½¿ç”¨ Docker å®˜æ–¹çš„ Registry åˆ›å»ºçš„ä»“åº“é¢ä¸´ä¸€äº›ç»´æŠ¤é—®é¢˜ã€‚æ¯”å¦‚æŸäº›é•œåƒåˆ é™¤ä»¥åç©ºé—´é»˜è®¤æ˜¯ä¸ä¼šå›æ”¶çš„ï¼Œéœ€è¦ä¸€äº›å‘½ä»¤å»å›æ”¶ç©ºé—´ç„¶åé‡å¯ Registry ç¨‹åºã€‚åœ¨ä¼ä¸šä¸­æŠŠå†…éƒ¨çš„ä¸€äº›å·¥å…·åŒ…æ”¾å…¥ Nexus ä¸­æ˜¯æ¯”è¾ƒå¸¸è§çš„åšæ³•ï¼Œæœ€æ–°ç‰ˆæœ¬ <code>Nexus3.x</code> å…¨é¢æ”¯æŒ Docker çš„ç§æœ‰é•œåƒã€‚æ‰€ä»¥ä½¿ç”¨ <a href="https://www.sonatype.com/download-oss-sonatype/" target="_blank" rel="noopener"><code>Nexus3.x</code></a> ä¸€ä¸ªè½¯ä»¶æ¥ç®¡ç† <code>Docker</code> , <code>Maven</code> , <code>Yum</code> , <code>PyPI</code> ç­‰æ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ã€‚</p>
<h2 id="å¯åŠ¨-Nexus-å®¹å™¨"><a href="#å¯åŠ¨-Nexus-å®¹å™¨" class="headerlink" title="å¯åŠ¨ Nexus å®¹å™¨"></a>å¯åŠ¨ Nexus å®¹å™¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d --name nexus3 --restart=always \</span><br><span class="line">    -p 8081:8081 \</span><br><span class="line">    --mount src=nexus-data,target=/nexus-data \</span><br><span class="line">    sonatype/nexus3</span><br></pre></td></tr></table></figure>
<p>ç­‰å¾… 3-5 åˆ†é’Ÿï¼Œå¦‚æœ <code>nexus3</code> å®¹å™¨æ²¡æœ‰å¼‚å¸¸é€€å‡ºï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ <code>http://YourIP:8081</code> è®¿é—® Nexus äº†ã€‚</p>
<p>ç¬¬ä¸€æ¬¡å¯åŠ¨ Nexus çš„é»˜è®¤å¸å·æ˜¯ <code>admin</code> å¯†ç æ˜¯ <code>admin123</code> ç™»å½•ä»¥åç‚¹å‡»é¡µé¢ä¸Šæ–¹çš„é½¿è½®æŒ‰é’®è¿›è¡Œè®¾ç½®ã€‚</p>
<h2 id="åˆ›å»ºä»“åº“"><a href="#åˆ›å»ºä»“åº“" class="headerlink" title="åˆ›å»ºä»“åº“"></a>åˆ›å»ºä»“åº“</h2><p>åˆ›å»ºä¸€ä¸ªç§æœ‰ä»“åº“çš„æ–¹æ³•ï¼š <code>Repository-&gt;Repositories</code> ç‚¹å‡»å³è¾¹èœå• <code>Create repository</code> é€‰æ‹© <code>docker (hosted)</code></p>
<ul>
<li>Name: ä»“åº“çš„åç§°</li>
<li>HTTP: ä»“åº“å•ç‹¬çš„è®¿é—®ç«¯å£</li>
<li>Enable Docker V1 API: å¦‚æœéœ€è¦åŒæ—¶æ”¯æŒ V1 ç‰ˆæœ¬è¯·å‹¾é€‰æ­¤é¡¹ï¼ˆä¸å»ºè®®å‹¾é€‰ï¼‰ã€‚</li>
<li>Hosted -&gt; Deployment pollcy: è¯·é€‰æ‹© Allow redeploy å¦åˆ™æ— æ³•ä¸Šä¼  Docker é•œåƒã€‚</li>
</ul>
<p>å…¶å®ƒçš„ä»“åº“åˆ›å»ºæ–¹æ³•è¯·å„ä½è‡ªå·±æ‘¸ç´¢ï¼Œè¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ª docker (proxy) ç±»å‹çš„ä»“åº“é“¾æ¥åˆ° DockerHub ä¸Šã€‚å†åˆ›å»ºä¸€ä¸ª docker (group) ç±»å‹çš„ä»“åº“æŠŠåˆšæ‰çš„ hosted ä¸ proxy æ·»åŠ åœ¨ä¸€èµ·ã€‚ä¸»æœºåœ¨è®¿é—®çš„æ—¶å€™é»˜è®¤ä¸‹è½½ç§æœ‰ä»“åº“ä¸­çš„é•œåƒï¼Œå¦‚æœæ²¡æœ‰å°†é“¾æ¥åˆ° DockerHub ä¸­ä¸‹è½½å¹¶ç¼“å­˜åˆ° Nexus ä¸­ã€‚</p>
<h2 id="æ·»åŠ è®¿é—®æƒé™"><a href="#æ·»åŠ è®¿é—®æƒé™" class="headerlink" title="æ·»åŠ è®¿é—®æƒé™"></a>æ·»åŠ è®¿é—®æƒé™</h2><p>èœå• <code>Security-&gt;Realms</code> æŠŠ Docker Bearer Token Realm ç§»åˆ°å³è¾¹çš„æ¡†ä¸­ä¿å­˜ã€‚</p>
<p>æ·»åŠ ç”¨æˆ·è§„åˆ™ï¼šèœå• <code>Security-&gt;Roles</code>-&gt;<code>Create role</code> åœ¨ <code>Privlleges</code> é€‰é¡¹æœç´¢ docker æŠŠç›¸åº”çš„è§„åˆ™ç§»åŠ¨åˆ°å³è¾¹çš„æ¡†ä¸­ç„¶åä¿å­˜ã€‚</p>
<p>æ·»åŠ ç”¨æˆ·ï¼šèœå• <code>Security-&gt;Users</code>-&gt;<code>Create local user</code> åœ¨ <code>Roles</code> é€‰é¡¹ä¸­é€‰ä¸­åˆšæ‰åˆ›å»ºçš„è§„åˆ™ç§»åŠ¨åˆ°å³è¾¹çš„çª—å£ä¿å­˜ã€‚</p>
<h2 id="NGINX-åŠ å¯†ä»£ç†"><a href="#NGINX-åŠ å¯†ä»£ç†" class="headerlink" title="NGINX åŠ å¯†ä»£ç†"></a>NGINX åŠ å¯†ä»£ç†</h2><p>è¯ä¹¦çš„ç”Ÿæˆè¯·å‚è§ <a href="https://yeasy.gitbooks.io/docker_practice/content/repository/registry_auth.html" target="_blank" rel="noopener"><code>ç§æœ‰ä»“åº“é«˜çº§é…ç½®</code></a> é‡Œé¢è¯ä¹¦ç”Ÿæˆä¸€èŠ‚ã€‚</p>
<p>NGINX ç¤ºä¾‹é…ç½®å¦‚ä¸‹</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">upstream</span> register</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">server</span> <span class="string">"YourHostName OR IP"</span>:<span class="number">5001</span>; <span class="comment">#ç«¯å£ä¸ºä¸Šé¢æ·»åŠ çš„ç§æœ‰é•œåƒä»“åº“æ˜¯è®¾ç½®çš„ HTTP é€‰é¡¹çš„ç«¯å£å·</span></span><br><span class="line">    <span class="attribute">check</span> interval=<span class="number">3000</span> rise=<span class="number">2</span> fall=<span class="number">10</span> timeout=<span class="number">1000</span> type=http;</span><br><span class="line">    <span class="attribute">check_http_send</span> <span class="string">"HEAD / HTTP/1.0\r\n\r\n"</span>;</span><br><span class="line">    <span class="attribute">check_http_expect_alive</span> http_4xx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">server_name</span> YourDomainName;<span class="comment">#å¦‚æœæ²¡æœ‰ DNS æœåŠ¡å™¨åšè§£æï¼Œè¯·åˆ é™¤æ­¤é€‰é¡¹ä½¿ç”¨æœ¬æœº IP åœ°å€è®¿é—®</span></span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">443</span> ssl;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span> key/example.crt;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> key/example.key;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_session_timeout</span>  <span class="number">5m</span>;</span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span>  HIGH:!aNULL:!MD5;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span>   <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">large_client_header_buffers</span> <span class="number">4</span> <span class="number">32k</span>;</span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">300m</span>;</span><br><span class="line">    <span class="attribute">client_body_buffer_size</span> <span class="number">512k</span>;</span><br><span class="line">    <span class="attribute">proxy_connect_timeout</span> <span class="number">600</span>;</span><br><span class="line">    <span class="attribute">proxy_read_timeout</span>   <span class="number">600</span>;</span><br><span class="line">    <span class="attribute">proxy_send_timeout</span>   <span class="number">600</span>;</span><br><span class="line">    <span class="attribute">proxy_buffer_size</span>    <span class="number">128k</span>;</span><br><span class="line">    <span class="attribute">proxy_buffers</span>       <span class="number">4</span> <span class="number">64k</span>;</span><br><span class="line">    <span class="attribute">proxy_busy_buffers_size</span> <span class="number">128k</span>;</span><br><span class="line">    <span class="attribute">proxy_temp_file_write_size</span> <span class="number">512k</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Port <span class="variable">$server_port</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="variable">$connection_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_redirect</span> <span class="literal">off</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://register;</span><br><span class="line">        <span class="attribute">proxy_read_timeout</span> <span class="number">900s</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Docker-ä¸»æœºè®¿é—®é•œåƒä»“åº“"><a href="#Docker-ä¸»æœºè®¿é—®é•œåƒä»“åº“" class="headerlink" title="Docker ä¸»æœºè®¿é—®é•œåƒä»“åº“"></a>Docker ä¸»æœºè®¿é—®é•œåƒä»“åº“</h2><p>å¦‚æœä¸å¯ç”¨ SSL åŠ å¯†å¯ä»¥é€šè¿‡å‰é¢ç« èŠ‚çš„æ–¹æ³•æ·»åŠ ä¿¡ä»»åœ°å€åˆ° Docker çš„é…ç½®æ–‡ä»¶ä¸­ç„¶åé‡å¯ Docker</p>
<p>ä½¿ç”¨ SSL åŠ å¯†ä»¥åç¨‹åºéœ€è¦è®¿é—®å°±ä¸èƒ½é‡‡ç”¨ä¿®æ”¹é…ç½®çš„è®¿é—®äº†ã€‚å…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ openssl s_client -showcerts -connect YourDomainName OR HostIP:443 &lt;/dev/null 2&gt;/dev/null|openssl x509 -outform PEM &gt;ca.crt</span><br><span class="line">$ cat ca.crt | sudo tee -a /etc/ssl/certs/ca-certificates.crt</span><br><span class="line">$ systemctl restart docker</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ <code>docker login YourDomainName OR HostIP</code> è¿›è¡Œæµ‹è¯•ï¼Œç”¨æˆ·åå¯†ç å¡«å†™ä¸Šé¢ Nexus ä¸­ç”Ÿæˆçš„ã€‚</p>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p>æœ¬æ–‡ç« æ‘˜æŠ„äºï¼š<a href="https://yeasy.gitbooks.io/docker_practice/content/" target="_blank" rel="noopener">https://yeasy.gitbooks.io/docker_practice/content/</a></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Jenkinsæ›´æ¢è¯­è¨€</title>
    <url>/2019/12/04/Jenkins%E6%9B%B4%E6%8D%A2%E8%AF%AD%E8%A8%80/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘å­¦ä¹ Jenkinsä¸­ï¼Œä½¿ç”¨Dockerå®‰è£…å®Œæˆåï¼ŒJenkinsçš„é»˜è®¤è¯­è¨€æ˜¯ç‹—è¡€çš„ç¹ä½“ç‰ˆæœ¬ï¼Œæƒ³æ›´æ¢æˆè‹±æ–‡ç‰ˆæœ¬æˆ–è€…ä¸­æ–‡ç‰ˆæœ¬ã€‚</p>
<a id="more"></a>
<h1 id="æ›´æ¢Googleæµè§ˆå™¨é»˜è®¤è¯­è¨€"><a href="#æ›´æ¢Googleæµè§ˆå™¨é»˜è®¤è¯­è¨€" class="headerlink" title="æ›´æ¢Googleæµè§ˆå™¨é»˜è®¤è¯­è¨€"></a>æ›´æ¢Googleæµè§ˆå™¨é»˜è®¤è¯­è¨€</h1><p>æˆ‘googleä¹‹å‰è®¾ç½®çš„é»˜è®¤è¯­è¨€ç¬¬ä¸€ä½æ˜¯ä¸­æ–‡ç¹ä½“ç‰ˆæœ¬ï¼Œæˆ‘ç°åœ¨ç›´æ¥åˆ é™¤æ‰äº†ã€‚åé¢Jenkinså°±æ›´æ¢å›äº†è‹±æ–‡ç‰ˆæœ¬ã€‚</p>
<p><img src="changegooglelan.png" alt></p>
<h1 id="ä½¿ç”¨Localeæ’ä»¶"><a href="#ä½¿ç”¨Localeæ’ä»¶" class="headerlink" title="ä½¿ç”¨Localeæ’ä»¶"></a>ä½¿ç”¨Localeæ’ä»¶</h1><p>ç¹ä½“ç‰ˆæœ¬ä¸‹æ‰¾åˆ°æ’ä»¶ä¸º<code>ç®¡ç†Jenkins</code>-&gt;<code>å¤–æ›ç¨‹å¼ç®¡ç†</code></p>
<p><img src="findplugin.png" alt></p>
<p>åœ¨å¯ç”¨çš„æ’ä»¶åˆ—è¡¨æœç´¢Localeæ’ä»¶ï¼Œé€‰æ‹©ç›´æ¥å®‰è£…ã€‚</p>
<p><img src="findplugin2.png" alt></p>
<p>å®‰è£…å®Œæˆåï¼Œè¿›å…¥<code>ç®¡ç†Jenkins</code>-&gt;<code>è®¾å®šç³»ç»Ÿ</code></p>
<p><img src="setting.png" alt></p>
<p>åº”ç”¨å¹¶ä¿å­˜å³å¯ã€‚</p>
<blockquote>
<p>è®°ä½Ignore browser preference and force this language to all usersè¿™ä¸ªå•é€‰æ¡†è¦å‹¾é€‰ä¸Šï¼Œå¦åˆ™ä¸ç”Ÿæ•ˆ</p>
</blockquote>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä¸¤ç§æ–¹å¼ä¸­ï¼Œç¬¬äºŒç§ä¸­æ–‡å¥½åƒå¹¶ä¸æ˜¯å®Œå…¨æ”¯æŒï¼Œæœ‰äº›ä¸­æ–‡æœ‰äº›è‹±æ–‡ã€‚</p>
<p>æ‰€ä»¥æˆ‘é€‰æ‹©äº†ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ã€‚å­¦ä¹ çš„æƒ…å†µä¸‹è¿˜æ˜¯å¤šäº›ä¹ æƒ¯è‹±æ–‡å§ã€‚</p>
]]></content>
      <categories>
        <category>Jenkins</category>
      </categories>
      <tags>
        <tag>Jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerå…¥é—¨ï¼ˆä¸‰ï¼‰â€”â€”é•œåƒ</title>
    <url>/2019/12/02/Docker%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%89%EF%BC%89%E2%80%94%E2%80%94%E9%95%9C%E5%83%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Dockeré•œåƒç®€ä»‹"><a href="#Dockeré•œåƒç®€ä»‹" class="headerlink" title="Dockeré•œåƒç®€ä»‹"></a>Dockeré•œåƒç®€ä»‹</h1><p>é•œåƒæ˜¯ Docker çš„ä¸‰å¤§ç»„ä»¶ä¹‹ä¸€ã€‚</p>
<p>Docker è¿è¡Œå®¹å™¨å‰éœ€è¦æœ¬åœ°å­˜åœ¨å¯¹åº”çš„é•œåƒï¼Œå¦‚æœæœ¬åœ°ä¸å­˜åœ¨è¯¥é•œåƒï¼ŒDocker ä¼šä»é•œåƒä»“åº“ä¸‹è½½è¯¥é•œåƒã€‚</p>
<p>æœ¬ç« å°†ä»‹ç»æ›´å¤šå…³äºé•œåƒçš„å†…å®¹ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ä»ä»“åº“è·å–é•œåƒï¼›</li>
<li>ç®¡ç†æœ¬åœ°ä¸»æœºä¸Šçš„é•œåƒ</li>
</ul>
<a id="more"></a>
<h1 id="è·å–é•œåƒ"><a href="#è·å–é•œåƒ" class="headerlink" title="è·å–é•œåƒ"></a>è·å–é•œåƒ</h1><p>ä¹‹å‰æåˆ°è¿‡ï¼Œ<a href="https://hub.docker.com/explore/" target="_blank" rel="noopener">Docker Hub</a> ä¸Šæœ‰å¤§é‡çš„é«˜è´¨é‡çš„é•œåƒå¯ä»¥ç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬å°±è¯´ä¸€ä¸‹æ€ä¹ˆè·å–è¿™äº›é•œåƒã€‚</p>
<p>ä» Docker é•œåƒä»“åº“è·å–é•œåƒçš„å‘½ä»¤æ˜¯ <code>docker pull</code>ã€‚å…¶å‘½ä»¤æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull [é€‰é¡¹] [Docker Registry åœ°å€[:ç«¯å£å·]/]ä»“åº“å[:æ ‡ç­¾]</span><br></pre></td></tr></table></figure>
<p>å…·ä½“çš„é€‰é¡¹å¯ä»¥é€šè¿‡ <code>docker pull --help</code> å‘½ä»¤çœ‹åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬è¯´ä¸€ä¸‹é•œåƒåç§°çš„æ ¼å¼ã€‚</p>
<ul>
<li>Docker é•œåƒä»“åº“åœ°å€ï¼šåœ°å€çš„æ ¼å¼ä¸€èˆ¬æ˜¯ <code>&lt;åŸŸå/IP&gt;[:ç«¯å£å·]</code>ã€‚é»˜è®¤åœ°å€æ˜¯ Docker Hubã€‚</li>
<li>ä»“åº“åï¼šå¦‚ä¹‹å‰æ‰€è¯´ï¼Œè¿™é‡Œçš„ä»“åº“åæ˜¯ä¸¤æ®µå¼åç§°ï¼Œå³ <code>&lt;ç”¨æˆ·å&gt;/&lt;è½¯ä»¶å&gt;</code>ã€‚å¯¹äº Docker Hubï¼Œå¦‚æœä¸ç»™å‡ºç”¨æˆ·åï¼Œåˆ™é»˜è®¤ä¸º <code>library</code>ï¼Œä¹Ÿå°±æ˜¯å®˜æ–¹é•œåƒã€‚</li>
</ul>
<p>æ¯”å¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker pull ubuntu:18.04</span><br><span class="line">18.04: Pulling from library/ubuntu</span><br><span class="line">bf5d46315322: Pull complete</span><br><span class="line">9f13e0ac480c: Pull complete</span><br><span class="line">e8988b5b3097: Pull complete</span><br><span class="line">40af181810e7: Pull complete</span><br><span class="line">e6f7c7e5c03e: Pull complete</span><br><span class="line">Digest: sha256:147913621d9cdea08853f6ba9116c2e27a3ceffecf3b492983ae97c3d643fbbe</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> ubuntu:18.04</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„å‘½ä»¤ä¸­æ²¡æœ‰ç»™å‡º Docker é•œåƒä»“åº“åœ°å€ï¼Œå› æ­¤å°†ä¼šä» Docker Hub è·å–é•œåƒã€‚è€Œé•œåƒåç§°æ˜¯ <code>ubuntu:18.04</code>ï¼Œå› æ­¤å°†ä¼šè·å–å®˜æ–¹é•œåƒ <code>library/ubuntu</code> ä»“åº“ä¸­æ ‡ç­¾ä¸º <code>18.04</code> çš„é•œåƒã€‚</p>
<p>ä»ä¸‹è½½è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¹‹å‰æåŠçš„åˆ†å±‚å­˜å‚¨çš„æ¦‚å¿µï¼Œé•œåƒæ˜¯ç”±å¤šå±‚å­˜å‚¨æ‰€æ„æˆã€‚ä¸‹è½½ä¹Ÿæ˜¯ä¸€å±‚å±‚çš„å»ä¸‹è½½ï¼Œå¹¶éå•ä¸€æ–‡ä»¶ã€‚ä¸‹è½½è¿‡ç¨‹ä¸­ç»™å‡ºäº†æ¯ä¸€å±‚çš„ ID çš„å‰ 12 ä½ã€‚å¹¶ä¸”ä¸‹è½½ç»“æŸåï¼Œç»™å‡ºè¯¥é•œåƒå®Œæ•´çš„ <code>sha256</code> çš„æ‘˜è¦ï¼Œä»¥ç¡®ä¿ä¸‹è½½ä¸€è‡´æ€§ã€‚</p>
<p>åœ¨ä½¿ç”¨ä¸Šé¢å‘½ä»¤çš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šå‘ç°ï¼Œä½ æ‰€çœ‹åˆ°çš„å±‚ ID ä»¥åŠ <code>sha256</code> çš„æ‘˜è¦å’Œè¿™é‡Œçš„ä¸ä¸€æ ·ã€‚è¿™æ˜¯å› ä¸ºå®˜æ–¹é•œåƒæ˜¯ä¸€ç›´åœ¨ç»´æŠ¤çš„ï¼Œæœ‰ä»»ä½•æ–°çš„ bugï¼Œæˆ–è€…ç‰ˆæœ¬æ›´æ–°ï¼Œéƒ½ä¼šè¿›è¡Œä¿®å¤å†ä»¥åŸæ¥çš„æ ‡ç­¾å‘å¸ƒï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿ä»»ä½•ä½¿ç”¨è¿™ä¸ªæ ‡ç­¾çš„ç”¨æˆ·å¯ä»¥è·å¾—æ›´å®‰å…¨ã€æ›´ç¨³å®šçš„é•œåƒã€‚</p>
<p><em>å¦‚æœä» Docker Hub ä¸‹è½½é•œåƒéå¸¸ç¼“æ…¢ï¼Œå¯ä»¥å‚ç…§ <a href="https://yeasy.gitbooks.io/docker_practice/content/install/mirror.html" target="_blank" rel="noopener">é•œåƒåŠ é€Ÿå™¨</a> ä¸€èŠ‚é…ç½®åŠ é€Ÿå™¨ã€‚</em></p>
<h2 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h2><p>æœ‰äº†é•œåƒåï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿä»¥è¿™ä¸ªé•œåƒä¸ºåŸºç¡€å¯åŠ¨å¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨ã€‚ä»¥ä¸Šé¢çš„ <code>ubuntu:18.04</code> ä¸ºä¾‹ï¼Œå¦‚æœæˆ‘ä»¬æ‰“ç®—å¯åŠ¨é‡Œé¢çš„ <code>bash</code> å¹¶ä¸”è¿›è¡Œäº¤äº’å¼æ“ä½œçš„è¯ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -it --rm \</span><br><span class="line">    ubuntu:18.04 \</span><br><span class="line">    bash</span><br><span class="line"></span><br><span class="line">root@e7009c6ce357:/<span class="comment"># cat /etc/os-release</span></span><br><span class="line">NAME=<span class="string">"Ubuntu"</span></span><br><span class="line">VERSION=<span class="string">"18.04.1 LTS (Bionic Beaver)"</span></span><br><span class="line">ID=ubuntu</span><br><span class="line">ID_LIKE=debian</span><br><span class="line">PRETTY_NAME=<span class="string">"Ubuntu 18.04.1 LTS"</span></span><br><span class="line">VERSION_ID=<span class="string">"18.04"</span></span><br><span class="line">HOME_URL=<span class="string">"https://www.ubuntu.com/"</span></span><br><span class="line">SUPPORT_URL=<span class="string">"https://help.ubuntu.com/"</span></span><br><span class="line">BUG_REPORT_URL=<span class="string">"https://bugs.launchpad.net/ubuntu/"</span></span><br><span class="line">PRIVACY_POLICY_URL=<span class="string">"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"</span></span><br><span class="line">VERSION_CODENAME=bionic</span><br><span class="line">UBUNTU_CODENAME=bionic</span><br></pre></td></tr></table></figure>
<p><code>docker run</code> å°±æ˜¯è¿è¡Œå®¹å™¨çš„å‘½ä»¤ï¼Œå…·ä½“æ ¼å¼æˆ‘ä»¬ä¼šåœ¨ <a href="https://yeasy.gitbooks.io/docker_practice/content/container" target="_blank" rel="noopener">å®¹å™¨</a> ä¸€èŠ‚è¿›è¡Œè¯¦ç»†è®²è§£ï¼Œæˆ‘ä»¬è¿™é‡Œç®€è¦çš„è¯´æ˜ä¸€ä¸‹ä¸Šé¢ç”¨åˆ°çš„å‚æ•°ã€‚</p>
<ul>
<li><code>-it</code>ï¼šè¿™æ˜¯ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ <code>-i</code>ï¼šäº¤äº’å¼æ“ä½œï¼Œä¸€ä¸ªæ˜¯ <code>-t</code> ç»ˆç«¯ã€‚æˆ‘ä»¬è¿™é‡Œæ‰“ç®—è¿›å…¥ <code>bash</code> æ‰§è¡Œä¸€äº›å‘½ä»¤å¹¶æŸ¥çœ‹è¿”å›ç»“æœï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦äº¤äº’å¼ç»ˆç«¯ã€‚</li>
<li><code>--rm</code>ï¼šè¿™ä¸ªå‚æ•°æ˜¯è¯´å®¹å™¨é€€å‡ºåéšä¹‹å°†å…¶åˆ é™¤ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºäº†æ’éšœéœ€æ±‚ï¼Œé€€å‡ºçš„å®¹å™¨å¹¶ä¸ä¼šç«‹å³åˆ é™¤ï¼Œé™¤éæ‰‹åŠ¨ <code>docker rm</code>ã€‚æˆ‘ä»¬è¿™é‡Œåªæ˜¯éšä¾¿æ‰§è¡Œä¸ªå‘½ä»¤ï¼Œçœ‹çœ‹ç»“æœï¼Œä¸éœ€è¦æ’éšœå’Œä¿ç•™ç»“æœï¼Œå› æ­¤ä½¿ç”¨ <code>--rm</code> å¯ä»¥é¿å…æµªè´¹ç©ºé—´ã€‚</li>
<li><code>ubuntu:18.04</code>ï¼šè¿™æ˜¯æŒ‡ç”¨ <code>ubuntu:18.04</code> é•œåƒä¸ºåŸºç¡€æ¥å¯åŠ¨å®¹å™¨ã€‚</li>
<li><code>bash</code>ï¼šæ”¾åœ¨é•œåƒååçš„æ˜¯ <strong>å‘½ä»¤</strong>ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯ <code>bash</code>ã€‚</li>
</ul>
<p>è¿›å…¥å®¹å™¨åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Shell ä¸‹æ“ä½œï¼Œæ‰§è¡Œä»»ä½•æ‰€éœ€çš„å‘½ä»¤ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬æ‰§è¡Œäº† <code>cat /etc/os-release</code>ï¼Œè¿™æ˜¯ Linux å¸¸ç”¨çš„æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬çš„å‘½ä»¤ï¼Œä»è¿”å›çš„ç»“æœå¯ä»¥çœ‹åˆ°å®¹å™¨å†…æ˜¯ <code>Ubuntu 18.04.1 LTS</code> ç³»ç»Ÿã€‚</p>
<p>æœ€åæˆ‘ä»¬é€šè¿‡ <code>exit</code> é€€å‡ºäº†è¿™ä¸ªå®¹å™¨ã€‚</p>
<h1 id="åˆ—å‡ºé•œåƒ"><a href="#åˆ—å‡ºé•œåƒ" class="headerlink" title="åˆ—å‡ºé•œåƒ"></a>åˆ—å‡ºé•œåƒ</h1><p>è¦æƒ³åˆ—å‡ºå·²ç»ä¸‹è½½ä¸‹æ¥çš„é•œåƒï¼Œå¯ä»¥ä½¿ç”¨ <code>docker image ls</code> å‘½ä»¤ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls</span><br><span class="line">REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">redis                latest              5f515359c7f8        5 days ago          183 MB</span><br><span class="line">nginx                latest              05a60462f8ba        5 days ago          181 MB</span><br><span class="line">mongo                3.2                 fe9198c04d62        5 days ago          342 MB</span><br><span class="line">&lt;none&gt;               &lt;none&gt;              00285df0df87        5 days ago          342 MB</span><br><span class="line">ubuntu               18.04               f753707788c5        4 weeks ago         127 MB</span><br><span class="line">ubuntu               latest              f753707788c5        4 weeks ago         127 MB</span><br></pre></td></tr></table></figure>
<p>åˆ—è¡¨åŒ…å«äº† <code>ä»“åº“å</code>ã€<code>æ ‡ç­¾</code>ã€<code>é•œåƒ ID</code>ã€<code>åˆ›å»ºæ—¶é—´</code> ä»¥åŠ <code>æ‰€å ç”¨çš„ç©ºé—´</code>ã€‚</p>
<p>å…¶ä¸­ä»“åº“åã€æ ‡ç­¾åœ¨ä¹‹å‰çš„åŸºç¡€æ¦‚å¿µç« èŠ‚å·²ç»ä»‹ç»è¿‡äº†ã€‚<strong>é•œåƒ ID</strong> åˆ™æ˜¯é•œåƒçš„å”¯ä¸€æ ‡è¯†ï¼Œä¸€ä¸ªé•œåƒå¯ä»¥å¯¹åº”å¤šä¸ª <strong>æ ‡ç­¾</strong>ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>ubuntu:18.04</code> å’Œ <code>ubuntu:latest</code> æ‹¥æœ‰ç›¸åŒçš„ IDï¼Œå› ä¸ºå®ƒä»¬å¯¹åº”çš„æ˜¯åŒä¸€ä¸ªé•œåƒã€‚</p>
<h2 id="é•œåƒä½“ç§¯"><a href="#é•œåƒä½“ç§¯" class="headerlink" title="é•œåƒä½“ç§¯"></a>é•œåƒä½“ç§¯</h2><p>å¦‚æœä»”ç»†è§‚å¯Ÿï¼Œä¼šæ³¨æ„åˆ°ï¼Œè¿™é‡Œæ ‡è¯†çš„æ‰€å ç”¨ç©ºé—´å’Œåœ¨ Docker Hub ä¸Šçœ‹åˆ°çš„é•œåƒå¤§å°ä¸åŒã€‚æ¯”å¦‚ï¼Œ<code>ubuntu:18.04</code> é•œåƒå¤§å°ï¼Œåœ¨è¿™é‡Œæ˜¯ <code>127 MB</code>ï¼Œä½†æ˜¯åœ¨ <a href="https://hub.docker.com/r/library/ubuntu/tags/" target="_blank" rel="noopener">Docker Hub</a> æ˜¾ç¤ºçš„å´æ˜¯ <code>50 MB</code>ã€‚è¿™æ˜¯å› ä¸º Docker Hub ä¸­æ˜¾ç¤ºçš„ä½“ç§¯æ˜¯å‹ç¼©åçš„ä½“ç§¯ã€‚åœ¨é•œåƒä¸‹è½½å’Œä¸Šä¼ è¿‡ç¨‹ä¸­é•œåƒæ˜¯ä¿æŒç€å‹ç¼©çŠ¶æ€çš„ï¼Œå› æ­¤ Docker Hub æ‰€æ˜¾ç¤ºçš„å¤§å°æ˜¯ç½‘ç»œä¼ è¾“ä¸­æ›´å…³å¿ƒçš„æµé‡å¤§å°ã€‚è€Œ <code>docker image ls</code> æ˜¾ç¤ºçš„æ˜¯é•œåƒä¸‹è½½åˆ°æœ¬åœ°åï¼Œå±•å¼€çš„å¤§å°ï¼Œå‡†ç¡®è¯´ï¼Œæ˜¯å±•å¼€åçš„å„å±‚æ‰€å ç©ºé—´çš„æ€»å’Œï¼Œå› ä¸ºé•œåƒåˆ°æœ¬åœ°åï¼ŒæŸ¥çœ‹ç©ºé—´çš„æ—¶å€™ï¼Œæ›´å…³å¿ƒçš„æ˜¯æœ¬åœ°ç£ç›˜ç©ºé—´å ç”¨çš„å¤§å°ã€‚</p>
<p>å¦å¤–ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼Œ<code>docker image ls</code> åˆ—è¡¨ä¸­çš„é•œåƒä½“ç§¯æ€»å’Œå¹¶éæ˜¯æ‰€æœ‰é•œåƒå®é™…ç¡¬ç›˜æ¶ˆè€—ã€‚ç”±äº Docker é•œåƒæ˜¯å¤šå±‚å­˜å‚¨ç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥ç»§æ‰¿ã€å¤ç”¨ï¼Œå› æ­¤ä¸åŒé•œåƒå¯èƒ½ä¼šå› ä¸ºä½¿ç”¨ç›¸åŒçš„åŸºç¡€é•œåƒï¼Œä»è€Œæ‹¥æœ‰å…±åŒçš„å±‚ã€‚ç”±äº Docker ä½¿ç”¨ Union FSï¼Œç›¸åŒçš„å±‚åªéœ€è¦ä¿å­˜ä¸€ä»½å³å¯ï¼Œå› æ­¤å®é™…é•œåƒç¡¬ç›˜å ç”¨ç©ºé—´å¾ˆå¯èƒ½è¦æ¯”è¿™ä¸ªåˆ—è¡¨é•œåƒå¤§å°çš„æ€»å’Œè¦å°çš„å¤šã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥ä¾¿æ·çš„æŸ¥çœ‹é•œåƒã€å®¹å™¨ã€æ•°æ®å·æ‰€å ç”¨çš„ç©ºé—´ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker system df</span><br><span class="line"></span><br><span class="line">TYPE                TOTAL               ACTIVE              SIZE                RECLAIMABLE</span><br><span class="line">Images              24                  0                   1.992GB             1.992GB (100%)</span><br><span class="line">Containers          1                   0                   62.82MB             62.82MB (100%)</span><br><span class="line">Local Volumes       9                   0                   652.2MB             652.2MB (100%)</span><br><span class="line">Build Cache                                                 0B                  0B</span><br></pre></td></tr></table></figure>
<h2 id="è™šæ‚¬é•œåƒ"><a href="#è™šæ‚¬é•œåƒ" class="headerlink" title="è™šæ‚¬é•œåƒ"></a>è™šæ‚¬é•œåƒ</h2><p>ä¸Šé¢çš„é•œåƒåˆ—è¡¨ä¸­ï¼Œè¿˜å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç‰¹æ®Šçš„é•œåƒï¼Œè¿™ä¸ªé•œåƒæ—¢æ²¡æœ‰ä»“åº“åï¼Œä¹Ÿæ²¡æœ‰æ ‡ç­¾ï¼Œå‡ä¸º <code></code>ã€‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;none&gt;               &lt;none&gt;              00285df0df87        5 days ago          342 MB</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªé•œåƒåŸæœ¬æ˜¯æœ‰é•œåƒåå’Œæ ‡ç­¾çš„ï¼ŒåŸæ¥ä¸º <code>mongo:3.2</code>ï¼Œéšç€å®˜æ–¹é•œåƒç»´æŠ¤ï¼Œå‘å¸ƒäº†æ–°ç‰ˆæœ¬åï¼Œé‡æ–° <code>docker pull mongo:3.2</code> æ—¶ï¼Œ<code>mongo:3.2</code> è¿™ä¸ªé•œåƒåè¢«è½¬ç§»åˆ°äº†æ–°ä¸‹è½½çš„é•œåƒèº«ä¸Šï¼Œè€Œæ—§çš„é•œåƒä¸Šçš„è¿™ä¸ªåç§°åˆ™è¢«å–æ¶ˆï¼Œä»è€Œæˆä¸ºäº† <code>ã€‚é™¤äº† `docker pull` å¯èƒ½å¯¼è‡´è¿™ç§æƒ…å†µï¼Œ`docker build` ä¹ŸåŒæ ·å¯ä»¥å¯¼è‡´è¿™ç§ç°è±¡ã€‚ç”±äºæ–°æ—§é•œåƒåŒåï¼Œæ—§é•œåƒåç§°è¢«å–æ¶ˆï¼Œä»è€Œå‡ºç°ä»“åº“åã€æ ‡ç­¾å‡ä¸º</code> çš„é•œåƒã€‚è¿™ç±»æ— æ ‡ç­¾é•œåƒä¹Ÿè¢«ç§°ä¸º <strong>è™šæ‚¬é•œåƒ(dangling image)</strong> ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ä¸“é—¨æ˜¾ç¤ºè¿™ç±»é•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls -f dangling=<span class="literal">true</span></span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              00285df0df87        5 days ago          342 MB</span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œè™šæ‚¬é•œåƒå·²ç»å¤±å»äº†å­˜åœ¨çš„ä»·å€¼ï¼Œæ˜¯å¯ä»¥éšæ„åˆ é™¤çš„ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ é™¤ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image prune</span><br></pre></td></tr></table></figure>
<h2 id="ä¸­é—´å±‚é•œåƒ"><a href="#ä¸­é—´å±‚é•œåƒ" class="headerlink" title="ä¸­é—´å±‚é•œåƒ"></a>ä¸­é—´å±‚é•œåƒ</h2><p>ä¸ºäº†åŠ é€Ÿé•œåƒæ„å»ºã€é‡å¤åˆ©ç”¨èµ„æºï¼ŒDocker ä¼šåˆ©ç”¨ <strong>ä¸­é—´å±‚é•œåƒ</strong>ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨ä¸€æ®µæ—¶é—´åï¼Œå¯èƒ½ä¼šçœ‹åˆ°ä¸€äº›ä¾èµ–çš„ä¸­é—´å±‚é•œåƒã€‚é»˜è®¤çš„ <code>docker image ls</code> åˆ—è¡¨ä¸­åªä¼šæ˜¾ç¤ºé¡¶å±‚é•œåƒï¼Œå¦‚æœå¸Œæœ›æ˜¾ç¤ºåŒ…æ‹¬ä¸­é—´å±‚é•œåƒåœ¨å†…çš„æ‰€æœ‰é•œåƒçš„è¯ï¼Œéœ€è¦åŠ  <code>-a</code> å‚æ•°ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls -a</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¼šçœ‹åˆ°å¾ˆå¤šæ— æ ‡ç­¾çš„é•œåƒï¼Œä¸ä¹‹å‰çš„è™šæ‚¬é•œåƒä¸åŒï¼Œè¿™äº›æ— æ ‡ç­¾çš„é•œåƒå¾ˆå¤šéƒ½æ˜¯ä¸­é—´å±‚é•œåƒï¼Œæ˜¯å…¶å®ƒé•œåƒæ‰€ä¾èµ–çš„é•œåƒã€‚è¿™äº›æ— æ ‡ç­¾é•œåƒä¸åº”è¯¥åˆ é™¤ï¼Œå¦åˆ™ä¼šå¯¼è‡´ä¸Šå±‚é•œåƒå› ä¸ºä¾èµ–ä¸¢å¤±è€Œå‡ºé”™ã€‚å®é™…ä¸Šï¼Œè¿™äº›é•œåƒä¹Ÿæ²¡å¿…è¦åˆ é™¤ï¼Œå› ä¸ºä¹‹å‰è¯´è¿‡ï¼Œç›¸åŒçš„å±‚åªä¼šå­˜ä¸€éï¼Œè€Œè¿™äº›é•œåƒæ˜¯åˆ«çš„é•œåƒçš„ä¾èµ–ï¼Œå› æ­¤å¹¶ä¸ä¼šå› ä¸ºå®ƒä»¬è¢«åˆ—å‡ºæ¥è€Œå¤šå­˜äº†ä¸€ä»½ï¼Œæ— è®ºå¦‚ä½•ä½ ä¹Ÿä¼šéœ€è¦å®ƒä»¬ã€‚åªè¦åˆ é™¤é‚£äº›ä¾èµ–å®ƒä»¬çš„é•œåƒåï¼Œè¿™äº›ä¾èµ–çš„ä¸­é—´å±‚é•œåƒä¹Ÿä¼šè¢«è¿å¸¦åˆ é™¤ã€‚</p>
<h2 id="åˆ—å‡ºéƒ¨åˆ†é•œåƒ"><a href="#åˆ—å‡ºéƒ¨åˆ†é•œåƒ" class="headerlink" title="åˆ—å‡ºéƒ¨åˆ†é•œåƒ"></a>åˆ—å‡ºéƒ¨åˆ†é•œåƒ</h2><p>ä¸åŠ ä»»ä½•å‚æ•°çš„æƒ…å†µä¸‹ï¼Œ<code>docker image ls</code> ä¼šåˆ—å‡ºæ‰€æœ‰é¡¶å±‚é•œåƒï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬åªå¸Œæœ›åˆ—å‡ºéƒ¨åˆ†é•œåƒã€‚<code>docker image ls</code> æœ‰å¥½å‡ ä¸ªå‚æ•°å¯ä»¥å¸®åŠ©åšåˆ°è¿™ä¸ªäº‹æƒ…ã€‚</p>
<p>æ ¹æ®ä»“åº“ååˆ—å‡ºé•œåƒ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls ubuntu</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">ubuntu              18.04               f753707788c5        4 weeks ago         127 MB</span><br><span class="line">ubuntu              latest              f753707788c5        4 weeks ago         127 MB</span><br></pre></td></tr></table></figure>
<p>åˆ—å‡ºç‰¹å®šçš„æŸä¸ªé•œåƒï¼Œä¹Ÿå°±æ˜¯è¯´æŒ‡å®šä»“åº“åå’Œæ ‡ç­¾</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls ubuntu:18.04</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">ubuntu              18.04               f753707788c5        4 weeks ago         127 MB</span><br></pre></td></tr></table></figure>
<p>é™¤æ­¤ä»¥å¤–ï¼Œ<code>docker image ls</code> è¿˜æ”¯æŒå¼ºå¤§çš„è¿‡æ»¤å™¨å‚æ•° <code>--filter</code>ï¼Œæˆ–è€…ç®€å†™ <code>-f</code>ã€‚ä¹‹å‰æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ä½¿ç”¨è¿‡æ»¤å™¨æ¥åˆ—å‡ºè™šæ‚¬é•œåƒçš„ç”¨æ³•ï¼Œå®ƒè¿˜æœ‰æ›´å¤šçš„ç”¨æ³•ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›çœ‹åˆ°åœ¨ <code>mongo:3.2</code> ä¹‹åå»ºç«‹çš„é•œåƒï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls -f since=mongo:3.2</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">redis               latest              5f515359c7f8        5 days ago          183 MB</span><br><span class="line">nginx               latest              05a60462f8ba        5 days ago          181 MB</span><br></pre></td></tr></table></figure>
<p>æƒ³æŸ¥çœ‹æŸä¸ªä½ç½®ä¹‹å‰çš„é•œåƒä¹Ÿå¯ä»¥ï¼Œåªéœ€è¦æŠŠ <code>since</code> æ¢æˆ <code>before</code> å³å¯ã€‚</p>
<p>æ­¤å¤–ï¼Œå¦‚æœé•œåƒæ„å»ºæ—¶ï¼Œå®šä¹‰äº† <code>LABEL</code>ï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>LABEL</code> æ¥è¿‡æ»¤ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls -f label=com.example.version=0.1</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="ä»¥ç‰¹å®šæ ¼å¼æ˜¾ç¤º"><a href="#ä»¥ç‰¹å®šæ ¼å¼æ˜¾ç¤º" class="headerlink" title="ä»¥ç‰¹å®šæ ¼å¼æ˜¾ç¤º"></a>ä»¥ç‰¹å®šæ ¼å¼æ˜¾ç¤º</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>docker image ls</code> ä¼šè¾“å‡ºä¸€ä¸ªå®Œæ•´çš„è¡¨æ ¼ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶éæ‰€æœ‰æ—¶å€™éƒ½ä¼šéœ€è¦è¿™äº›å†…å®¹ã€‚æ¯”å¦‚ï¼Œåˆšæ‰åˆ é™¤è™šæ‚¬é•œåƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨ <code>docker image ls</code> æŠŠæ‰€æœ‰çš„è™šæ‚¬é•œåƒçš„ ID åˆ—å‡ºæ¥ï¼Œç„¶åæ‰å¯ä»¥äº¤ç»™ <code>docker image rm</code> å‘½ä»¤ä½œä¸ºå‚æ•°æ¥åˆ é™¤æŒ‡å®šçš„è¿™äº›é•œåƒï¼Œè¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°äº† <code>-q</code> å‚æ•°ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls -q</span><br><span class="line">5f515359c7f8</span><br><span class="line">05a60462f8ba</span><br><span class="line">fe9198c04d62</span><br><span class="line">00285df0df87</span><br><span class="line">f753707788c5</span><br><span class="line">f753707788c5</span><br><span class="line">1e0c3dd64ccd</span><br></pre></td></tr></table></figure>
<p><code>--filter</code> é…åˆ <code>-q</code> äº§ç”Ÿå‡ºæŒ‡å®šèŒƒå›´çš„ ID åˆ—è¡¨ï¼Œç„¶åé€ç»™å¦ä¸€ä¸ª <code>docker</code> å‘½ä»¤ä½œä¸ºå‚æ•°ï¼Œä»è€Œé’ˆå¯¹è¿™ç»„å®ä½“æˆæ‰¹çš„è¿›è¡ŒæŸç§æ“ä½œçš„åšæ³•åœ¨ Docker å‘½ä»¤è¡Œä½¿ç”¨è¿‡ç¨‹ä¸­éå¸¸å¸¸è§ï¼Œä¸ä»…ä»…æ˜¯é•œåƒï¼Œå°†æ¥æˆ‘ä»¬ä¼šåœ¨å„ä¸ªå‘½ä»¤ä¸­çœ‹åˆ°è¿™ç±»æ­é…ä»¥å®Œæˆå¾ˆå¼ºå¤§çš„åŠŸèƒ½ã€‚å› æ­¤æ¯æ¬¡åœ¨æ–‡æ¡£çœ‹åˆ°è¿‡æ»¤å™¨åï¼Œå¯ä»¥å¤šæ³¨æ„ä¸€ä¸‹å®ƒä»¬çš„ç”¨æ³•ã€‚</p>
<p>å¦å¤–ä¸€äº›æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½åªæ˜¯å¯¹è¡¨æ ¼çš„ç»“æ„ä¸æ»¡æ„ï¼Œå¸Œæœ›è‡ªå·±ç»„ç»‡åˆ—ï¼›æˆ–è€…ä¸å¸Œæœ›æœ‰æ ‡é¢˜ï¼Œè¿™æ ·æ–¹ä¾¿å…¶å®ƒç¨‹åºè§£æç»“æœç­‰ï¼Œè¿™å°±ç”¨åˆ°äº† <a href="https://gohugo.io/templates/go-templates/" target="_blank" rel="noopener">Go çš„æ¨¡æ¿è¯­æ³•</a>ã€‚</p>
<p>æ¯”å¦‚ï¼Œä¸‹é¢çš„å‘½ä»¤ä¼šç›´æ¥åˆ—å‡ºé•œåƒç»“æœï¼Œå¹¶ä¸”åªåŒ…å«é•œåƒIDå’Œä»“åº“åï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls --format <span class="string">"&#123;&#123;.ID&#125;&#125;: &#123;&#123;.Repository&#125;&#125;"</span></span><br><span class="line">5f515359c7f8: redis</span><br><span class="line">05a60462f8ba: nginx</span><br><span class="line">fe9198c04d62: mongo</span><br><span class="line">00285df0df87: &lt;none&gt;</span><br><span class="line">f753707788c5: ubuntu</span><br><span class="line">f753707788c5: ubuntu</span><br><span class="line">1e0c3dd64ccd: ubuntu</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…æ‰“ç®—ä»¥è¡¨æ ¼ç­‰è·æ˜¾ç¤ºï¼Œå¹¶ä¸”æœ‰æ ‡é¢˜è¡Œï¼Œå’Œé»˜è®¤ä¸€æ ·ï¼Œä¸è¿‡è‡ªå·±å®šä¹‰åˆ—ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls --format <span class="string">"table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Repository&#125;&#125;\t&#123;&#123;.Tag&#125;&#125;"</span></span><br><span class="line">IMAGE ID            REPOSITORY          TAG</span><br><span class="line">5f515359c7f8        redis               latest</span><br><span class="line">05a60462f8ba        nginx               latest</span><br><span class="line">fe9198c04d62        mongo               3.2</span><br><span class="line">00285df0df87        &lt;none&gt;              &lt;none&gt;</span><br><span class="line">f753707788c5        ubuntu              18.04</span><br><span class="line">f753707788c5        ubuntu              latest</span><br></pre></td></tr></table></figure>
<h1 id="åˆ é™¤æœ¬åœ°é•œåƒ"><a href="#åˆ é™¤æœ¬åœ°é•œåƒ" class="headerlink" title="åˆ é™¤æœ¬åœ°é•œåƒ"></a>åˆ é™¤æœ¬åœ°é•œåƒ</h1><p>å¦‚æœè¦åˆ é™¤æœ¬åœ°çš„é•œåƒï¼Œå¯ä»¥ä½¿ç”¨ <code>docker image rm</code> å‘½ä»¤ï¼Œå…¶æ ¼å¼ä¸ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image rm [é€‰é¡¹] &lt;é•œåƒ1&gt; [&lt;é•œåƒ2&gt; ...]</span><br></pre></td></tr></table></figure>
<h2 id="ç”¨-IDã€é•œåƒåã€æ‘˜è¦åˆ é™¤é•œåƒ"><a href="#ç”¨-IDã€é•œåƒåã€æ‘˜è¦åˆ é™¤é•œåƒ" class="headerlink" title="ç”¨ IDã€é•œåƒåã€æ‘˜è¦åˆ é™¤é•œåƒ"></a>ç”¨ IDã€é•œåƒåã€æ‘˜è¦åˆ é™¤é•œåƒ</h2><p>å…¶ä¸­ï¼Œ<code>&lt;é•œåƒ&gt;</code> å¯ä»¥æ˜¯ <code>é•œåƒçŸ­ ID</code>ã€<code>é•œåƒé•¿ ID</code>ã€<code>é•œåƒå</code> æˆ–è€… <code>é•œåƒæ‘˜è¦</code>ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€äº›é•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls</span><br><span class="line">REPOSITORY                  TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">centos                      latest              0584b3d2cf6d        3 weeks ago         196.5 MB</span><br><span class="line">redis                       alpine              501ad78535f0        3 weeks ago         21.03 MB</span><br><span class="line">docker                      latest              cf693ec9b5c7        3 weeks ago         105.1 MB</span><br><span class="line">nginx                       latest              e43d811ce2f4        5 weeks ago         181.5 MB</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥ç”¨é•œåƒçš„å®Œæ•´ IDï¼Œä¹Ÿç§°ä¸º <code>é•¿ ID</code>ï¼Œæ¥åˆ é™¤é•œåƒã€‚ä½¿ç”¨è„šæœ¬çš„æ—¶å€™å¯èƒ½ä¼šç”¨é•¿ IDï¼Œä½†æ˜¯äººå·¥è¾“å…¥å°±å¤ªç´¯äº†ï¼Œæ‰€ä»¥æ›´å¤šçš„æ—¶å€™æ˜¯ç”¨ <code>çŸ­ ID</code> æ¥åˆ é™¤é•œåƒã€‚<code>docker image ls</code> é»˜è®¤åˆ—å‡ºçš„å°±å·²ç»æ˜¯çŸ­ ID äº†ï¼Œä¸€èˆ¬å–å‰3ä¸ªå­—ç¬¦ä»¥ä¸Šï¼Œåªè¦è¶³å¤ŸåŒºåˆ†äºåˆ«çš„é•œåƒå°±å¯ä»¥äº†ã€‚</p>
<p>æ¯”å¦‚è¿™é‡Œï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ é™¤ <code>redis:alpine</code> é•œåƒï¼Œå¯ä»¥æ‰§è¡Œï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image rm 501</span><br><span class="line">Untagged: redis:alpine</span><br><span class="line">Untagged: redis@sha256:f1ed3708f538b537eb9c2a7dd50dc90a706f7debd7e1196c9264edeea521a86d</span><br><span class="line">Deleted: sha256:501ad78535f015d88872e13fa87a828425117e3d28075d0c117932b05bf189b7</span><br><span class="line">Deleted: sha256:96167737e29ca8e9d74982ef2a0dda76ed7b430da55e321c071f0dbff8c2899b</span><br><span class="line">Deleted: sha256:32770d1dcf835f192cafd6b9263b7b597a1778a403a109e2cc2ee866f74adf23</span><br><span class="line">Deleted: sha256:127227698ad74a5846ff5153475e03439d96d4b1c7f2a449c7a826ef74a2d2fa</span><br><span class="line">Deleted: sha256:1333ecc582459bac54e1437335c0816bc17634e131ea0cc48daa27d32c75eab3</span><br><span class="line">Deleted: sha256:4fc455b921edf9c4aea207c51ab39b10b06540c8b4825ba57b3feed1668fa7c7</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨<code>é•œåƒå</code>ï¼Œä¹Ÿå°±æ˜¯ <code>&lt;ä»“åº“å&gt;:&lt;æ ‡ç­¾&gt;</code>ï¼Œæ¥åˆ é™¤é•œåƒã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image rm centos</span><br><span class="line">Untagged: centos:latest</span><br><span class="line">Untagged: centos@sha256:b2f9d1c0ff5f87a4743104d099a3d561002ac500db1b9bfa02a783a46e0d366c</span><br><span class="line">Deleted: sha256:0584b3d2cf6d235ee310cf14b54667d889887b838d3f3d3033acd70fc3c48b8a</span><br><span class="line">Deleted: sha256:97ca462ad9eeae25941546209454496e1d66749d53dfa2ee32bf1faabd239d38</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ï¼Œæ›´ç²¾ç¡®çš„æ˜¯ä½¿ç”¨ <code>é•œåƒæ‘˜è¦</code> åˆ é™¤é•œåƒã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image ls --digests</span><br><span class="line">REPOSITORY                  TAG                 DIGEST                                                                    IMAGE ID            CREATED             SIZE</span><br><span class="line">node                        slim                sha256:b4f0e0bdeb578043c1ea6862f0d40cc4afe32a4a582f3be235a3b164422be228   6e0c4c8e3913        3 weeks ago         214 MB</span><br><span class="line"></span><br><span class="line">$ docker image rm node@sha256:b4f0e0bdeb578043c1ea6862f0d40cc4afe32a4a582f3be235a3b164422be228</span><br><span class="line">Untagged: node@sha256:b4f0e0bdeb578043c1ea6862f0d40cc4afe32a4a582f3be235a3b164422be228</span><br></pre></td></tr></table></figure>
<h2 id="Untagged-å’Œ-Deleted"><a href="#Untagged-å’Œ-Deleted" class="headerlink" title="Untagged å’Œ Deleted"></a>Untagged å’Œ Deleted</h2><p>å¦‚æœè§‚å¯Ÿä¸Šé¢è¿™å‡ ä¸ªå‘½ä»¤çš„è¿è¡Œè¾“å‡ºä¿¡æ¯çš„è¯ï¼Œä½ ä¼šæ³¨æ„åˆ°åˆ é™¤è¡Œä¸ºåˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»æ˜¯ <code>Untagged</code>ï¼Œå¦ä¸€ç±»æ˜¯ <code>Deleted</code>ã€‚æˆ‘ä»¬ä¹‹å‰ä»‹ç»è¿‡ï¼Œé•œåƒçš„å”¯ä¸€æ ‡è¯†æ˜¯å…¶ ID å’Œæ‘˜è¦ï¼Œè€Œä¸€ä¸ªé•œåƒå¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾ã€‚</p>
<p>å› æ­¤å½“æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢å‘½ä»¤åˆ é™¤é•œåƒçš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åœ¨è¦æ±‚åˆ é™¤æŸä¸ªæ ‡ç­¾çš„é•œåƒã€‚æ‰€ä»¥é¦–å…ˆéœ€è¦åšçš„æ˜¯å°†æ»¡è¶³æˆ‘ä»¬è¦æ±‚çš„æ‰€æœ‰é•œåƒæ ‡ç­¾éƒ½å–æ¶ˆï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„ <code>Untagged</code> çš„ä¿¡æ¯ã€‚å› ä¸ºä¸€ä¸ªé•œåƒå¯ä»¥å¯¹åº”å¤šä¸ªæ ‡ç­¾ï¼Œå› æ­¤å½“æˆ‘ä»¬åˆ é™¤äº†æ‰€æŒ‡å®šçš„æ ‡ç­¾åï¼Œå¯èƒ½è¿˜æœ‰åˆ«çš„æ ‡ç­¾æŒ‡å‘äº†è¿™ä¸ªé•œåƒï¼Œå¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆ <code>Delete</code> è¡Œä¸ºå°±ä¸ä¼šå‘ç”Ÿã€‚æ‰€ä»¥å¹¶éæ‰€æœ‰çš„ <code>docker image rm</code> éƒ½ä¼šäº§ç”Ÿåˆ é™¤é•œåƒçš„è¡Œä¸ºï¼Œæœ‰å¯èƒ½ä»…ä»…æ˜¯å–æ¶ˆäº†æŸä¸ªæ ‡ç­¾è€Œå·²ã€‚</p>
<p>å½“è¯¥é•œåƒæ‰€æœ‰çš„æ ‡ç­¾éƒ½è¢«å–æ¶ˆäº†ï¼Œè¯¥é•œåƒå¾ˆå¯èƒ½ä¼šå¤±å»äº†å­˜åœ¨çš„æ„ä¹‰ï¼Œå› æ­¤ä¼šè§¦å‘åˆ é™¤è¡Œä¸ºã€‚é•œåƒæ˜¯å¤šå±‚å­˜å‚¨ç»“æ„ï¼Œå› æ­¤åœ¨åˆ é™¤çš„æ—¶å€™ä¹Ÿæ˜¯ä»ä¸Šå±‚å‘åŸºç¡€å±‚æ–¹å‘ä¾æ¬¡è¿›è¡Œåˆ¤æ–­åˆ é™¤ã€‚é•œåƒçš„å¤šå±‚ç»“æ„è®©é•œåƒå¤ç”¨å˜å¾—éå¸¸å®¹æ˜“ï¼Œå› æ­¤å¾ˆæœ‰å¯èƒ½æŸä¸ªå…¶å®ƒé•œåƒæ­£ä¾èµ–äºå½“å‰é•œåƒçš„æŸä¸€å±‚ã€‚è¿™ç§æƒ…å†µï¼Œä¾æ—§ä¸ä¼šè§¦å‘åˆ é™¤è¯¥å±‚çš„è¡Œä¸ºã€‚ç›´åˆ°æ²¡æœ‰ä»»ä½•å±‚ä¾èµ–å½“å‰å±‚æ—¶ï¼Œæ‰ä¼šçœŸå®çš„åˆ é™¤å½“å‰å±‚ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼Œæœ‰æ—¶å€™ä¼šå¥‡æ€ªï¼Œä¸ºä»€ä¹ˆæ˜æ˜æ²¡æœ‰åˆ«çš„æ ‡ç­¾æŒ‡å‘è¿™ä¸ªé•œåƒï¼Œä½†æ˜¯å®ƒè¿˜æ˜¯å­˜åœ¨çš„åŸå› ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä¼šå‘ç°æ‰€åˆ é™¤çš„å±‚æ•°å’Œè‡ªå·± <code>docker pull</code> çœ‹åˆ°çš„å±‚æ•°ä¸ä¸€æ ·çš„åŸå› ã€‚</p>
<p>é™¤äº†é•œåƒä¾èµ–ä»¥å¤–ï¼Œè¿˜éœ€è¦æ³¨æ„çš„æ˜¯å®¹å™¨å¯¹é•œåƒçš„ä¾èµ–ã€‚å¦‚æœæœ‰ç”¨è¿™ä¸ªé•œåƒå¯åŠ¨çš„å®¹å™¨å­˜åœ¨ï¼ˆå³ä½¿å®¹å™¨æ²¡æœ‰è¿è¡Œï¼‰ï¼Œé‚£ä¹ˆåŒæ ·ä¸å¯ä»¥åˆ é™¤è¿™ä¸ªé•œåƒã€‚ä¹‹å‰è®²è¿‡ï¼Œå®¹å™¨æ˜¯ä»¥é•œåƒä¸ºåŸºç¡€ï¼Œå†åŠ ä¸€å±‚å®¹å™¨å­˜å‚¨å±‚ï¼Œç»„æˆè¿™æ ·çš„å¤šå±‚å­˜å‚¨ç»“æ„å»è¿è¡Œçš„ã€‚å› æ­¤è¯¥é•œåƒå¦‚æœè¢«è¿™ä¸ªå®¹å™¨æ‰€ä¾èµ–çš„ï¼Œé‚£ä¹ˆåˆ é™¤å¿…ç„¶ä¼šå¯¼è‡´æ•…éšœã€‚å¦‚æœè¿™äº›å®¹å™¨æ˜¯ä¸éœ€è¦çš„ï¼Œåº”è¯¥å…ˆå°†å®ƒä»¬åˆ é™¤ï¼Œç„¶åå†æ¥åˆ é™¤é•œåƒã€‚</p>
<h2 id="ç”¨-docker-image-ls-å‘½ä»¤æ¥é…åˆ"><a href="#ç”¨-docker-image-ls-å‘½ä»¤æ¥é…åˆ" class="headerlink" title="ç”¨ docker image ls å‘½ä»¤æ¥é…åˆ"></a>ç”¨ docker image ls å‘½ä»¤æ¥é…åˆ</h2><p>åƒå…¶å®ƒå¯ä»¥æ‰¿æ¥å¤šä¸ªå®ä½“çš„å‘½ä»¤ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ <code>docker image ls -q</code> æ¥é…åˆä½¿ç”¨ <code>docker image rm</code>ï¼Œè¿™æ ·å¯ä»¥æˆæ‰¹çš„åˆ é™¤å¸Œæœ›åˆ é™¤çš„é•œåƒã€‚æˆ‘ä»¬åœ¨â€œé•œåƒåˆ—è¡¨â€ç« èŠ‚ä»‹ç»è¿‡å¾ˆå¤šè¿‡æ»¤é•œåƒåˆ—è¡¨çš„æ–¹å¼éƒ½å¯ä»¥æ‹¿è¿‡æ¥ä½¿ç”¨ã€‚</p>
<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦åˆ é™¤æ‰€æœ‰ä»“åº“åä¸º <code>redis</code> çš„é•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image rm $(docker image ls -q redis)</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…åˆ é™¤æ‰€æœ‰åœ¨ <code>mongo:3.2</code> ä¹‹å‰çš„é•œåƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker image rm $(docker image ls -q -f before=mongo:3.2)</span><br></pre></td></tr></table></figure>
<p> Linux å‘½ä»¤è¡Œçš„å¼ºå¤§å¯ä»¥å®Œæˆå¾ˆå¤šéå¸¸èµçš„åŠŸèƒ½ã€‚</p>
<h1 id="é•œåƒçš„å®ç°åŸç†"><a href="#é•œåƒçš„å®ç°åŸç†" class="headerlink" title="é•œåƒçš„å®ç°åŸç†"></a>é•œåƒçš„å®ç°åŸç†</h1><p>Docker é•œåƒæ˜¯æ€ä¹ˆå®ç°å¢é‡çš„ä¿®æ”¹å’Œç»´æŠ¤çš„ï¼Ÿ</p>
<p>æ¯ä¸ªé•œåƒéƒ½ç”±å¾ˆå¤šå±‚æ¬¡æ„æˆï¼ŒDocker ä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/UnionFS" target="_blank" rel="noopener">Union FS</a> å°†è¿™äº›ä¸åŒçš„å±‚ç»“åˆåˆ°ä¸€ä¸ªé•œåƒä¸­å»ã€‚</p>
<p>é€šå¸¸ Union FS æœ‰ä¸¤ä¸ªç”¨é€”, ä¸€æ–¹é¢å¯ä»¥å®ç°ä¸å€ŸåŠ© LVMã€RAID å°†å¤šä¸ª disk æŒ‚åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹,å¦ä¸€ä¸ªæ›´å¸¸ç”¨çš„å°±æ˜¯å°†ä¸€ä¸ªåªè¯»çš„åˆ†æ”¯å’Œä¸€ä¸ªå¯å†™çš„åˆ†æ”¯è”åˆåœ¨ä¸€èµ·ï¼ŒLive CD æ­£æ˜¯åŸºäºæ­¤æ–¹æ³•å¯ä»¥å…è®¸åœ¨é•œåƒä¸å˜çš„åŸºç¡€ä¸Šå…è®¸ç”¨æˆ·åœ¨å…¶ä¸Šè¿›è¡Œä¸€äº›å†™æ“ä½œã€‚</p>
<p>Docker åœ¨ AUFS ä¸Šæ„å»ºçš„å®¹å™¨ä¹Ÿæ˜¯åˆ©ç”¨äº†ç±»ä¼¼çš„åŸç†ã€‚</p>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p>æœ¬æ–‡ç« æ‘˜æŠ„äºï¼š<a href="https://yeasy.gitbooks.io/docker_practice/content/" target="_blank" rel="noopener">https://yeasy.gitbooks.io/docker_practice/content/</a></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerå…¥é—¨ï¼ˆäºŒï¼‰â€”â€”å®¹å™¨</title>
    <url>/2019/11/28/Docker%E5%85%A5%E9%97%A8%EF%BC%88%E4%BA%8C%EF%BC%89%E2%80%94%E2%80%94%E5%AE%B9%E5%99%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Dockerå®¹å™¨ç®€ä»‹"><a href="#Dockerå®¹å™¨ç®€ä»‹" class="headerlink" title="Dockerå®¹å™¨ç®€ä»‹"></a>Dockerå®¹å™¨ç®€ä»‹</h1><p>å®¹å™¨æ˜¯ Docker æ˜¯ä¸€æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<p>ç®€å•çš„è¯´ï¼Œå®¹å™¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ï¼Œä»¥åŠå®ƒä»¬çš„è¿è¡Œæ€ç¯å¢ƒã€‚å¯¹åº”çš„ï¼Œè™šæ‹Ÿæœºå¯ä»¥ç†è§£ä¸ºæ¨¡æ‹Ÿè¿è¡Œçš„ä¸€æ•´å¥—æ“ä½œç³»ç»Ÿï¼ˆæä¾›äº†è¿è¡Œæ€ç¯å¢ƒå’Œå…¶ä»–ç³»ç»Ÿç¯å¢ƒï¼‰å’Œè·‘åœ¨ä¸Šé¢çš„åº”ç”¨ã€‚</p>
<a id="more"></a>
<p>æ¥ä¸‹æ¥çœ‹çœ‹å®¹å™¨çš„æ“ä½œä½¿ç”¨ã€‚</p>
<h1 id="å®¹å™¨æ“ä½œ"><a href="#å®¹å™¨æ“ä½œ" class="headerlink" title="å®¹å™¨æ“ä½œ"></a>å®¹å™¨æ“ä½œ</h1><h2 id="å¯åŠ¨å®¹å™¨"><a href="#å¯åŠ¨å®¹å™¨" class="headerlink" title="å¯åŠ¨å®¹å™¨"></a>å¯åŠ¨å®¹å™¨</h2><p>å¯åŠ¨å®¹å™¨æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯åŸºäºé•œåƒæ–°å»ºä¸€ä¸ªå®¹å™¨å¹¶å¯åŠ¨ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å°†åœ¨ç»ˆæ­¢çŠ¶æ€ï¼ˆ<code>stopped</code>ï¼‰çš„å®¹å™¨é‡æ–°å¯åŠ¨ã€‚</p>
<h3 id="æ–°å»ºå¹¶å¯åŠ¨"><a href="#æ–°å»ºå¹¶å¯åŠ¨" class="headerlink" title="æ–°å»ºå¹¶å¯åŠ¨"></a>æ–°å»ºå¹¶å¯åŠ¨</h3><p>æ‰€éœ€è¦çš„å‘½ä»¤ä¸»è¦ä¸º <code>docker run</code>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‘½ä»¤è¾“å‡ºä¸€ä¸ª â€œHello Worldâ€ï¼Œä¹‹åç»ˆæ­¢å®¹å™¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run ubuntu:18.04 /bin/<span class="built_in">echo</span> <span class="string">'Hello world'</span></span><br><span class="line">Unable to find image <span class="string">'ubuntu:18.04'</span> locally</span><br><span class="line">18.04: Pulling from library/ubuntu</span><br><span class="line">7ddbc47eeb70: Pull complete </span><br><span class="line">c1bbdc448b72: Pull complete </span><br><span class="line">8c3b70e39044: Pull complete </span><br><span class="line">45d437916d57: Pull complete </span><br><span class="line">Digest: sha256:6e9f67fa63b0323e9a1e587fd71c561ba48a034504fb804fd26fd8800039835d</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> ubuntu:18.04</span><br><span class="line">Hello world</span><br></pre></td></tr></table></figure>
<p>è¿™è·Ÿåœ¨æœ¬åœ°ç›´æ¥æ‰§è¡Œ <code>/bin/echo &#39;hello world&#39;</code> å‡ ä¹æ„Ÿè§‰ä¸å‡ºä»»ä½•åŒºåˆ«ã€‚</p>
<h3 id="å¯åŠ¨äº¤äº’å¼ç»ˆç«¯"><a href="#å¯åŠ¨äº¤äº’å¼ç»ˆç«¯" class="headerlink" title="å¯åŠ¨äº¤äº’å¼ç»ˆç«¯"></a>å¯åŠ¨äº¤äº’å¼ç»ˆç«¯</h3><p>æˆ‘ä»¬é€šè¿‡ docker çš„ä¸¤ä¸ªå‚æ•° -i -tï¼Œè®© docker è¿è¡Œçš„å®¹å™¨å®ç°<strong>â€œå¯¹è¯â€</strong>çš„èƒ½åŠ›ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -t -i ubuntu:18.04 /bin/bash</span><br><span class="line">root@349a1edaa615:/<span class="comment">#</span></span><br></pre></td></tr></table></figure>
<p>å„ä¸ªå‚æ•°è§£æï¼š</p>
<ul>
<li><strong>-t:</strong> é€‰é¡¹è®©Dockeråˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼ˆpseudo-ttyï¼‰å¹¶ç»‘å®šåˆ°å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¸Š</li>
<li><strong>-i:</strong> åˆ™è®©å®¹å™¨çš„æ ‡å‡†è¾“å…¥ä¿æŒæ‰“å¼€ã€‚</li>
<li><strong>ubuntu:18.04</strong>: ubuntu é•œåƒã€‚</li>
<li><strong>/bin/bash</strong>ï¼šæ”¾åœ¨é•œåƒååçš„æ˜¯å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯ /bin/bashã€‚</li>
</ul>
<p>åœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ‰€åˆ›å»ºçš„ç»ˆç«¯æ¥è¾“å…¥å‘½ä»¤ï¼Œä¾‹å¦‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@349a1edaa615:/<span class="comment"># pwd</span></span><br><span class="line">/</span><br><span class="line">root@349a1edaa615:/<span class="comment"># ls</span></span><br><span class="line">bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">root@349a1edaa615:/<span class="comment"># exit</span></span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>exité€€å‡ºäº¤äº’å¼ Shell</p>
</blockquote>
<p>å½“åˆ©ç”¨ <code>docker run</code> æ¥åˆ›å»ºå®¹å™¨æ—¶ï¼ŒDocker åœ¨åå°è¿è¡Œçš„æ ‡å‡†æ“ä½œåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œä¸å­˜åœ¨å°±ä»å…¬æœ‰ä»“åº“ä¸‹è½½</li>
<li>åˆ©ç”¨é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨</li>
<li>åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚è½½ä¸€å±‚å¯è¯»å†™å±‚</li>
<li>ä»å®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸€ä¸ªè™šæ‹Ÿæ¥å£åˆ°å®¹å™¨ä¸­å»</li>
<li>ä»åœ°å€æ± é…ç½®ä¸€ä¸ª ip åœ°å€ç»™å®¹å™¨</li>
<li>æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åº</li>
<li>æ‰§è¡Œå®Œæ¯•åå®¹å™¨è¢«ç»ˆæ­¢</li>
</ul>
<h3 id="å¯åŠ¨å·²ç»ˆæ­¢å®¹å™¨"><a href="#å¯åŠ¨å·²ç»ˆæ­¢å®¹å™¨" class="headerlink" title="å¯åŠ¨å·²ç»ˆæ­¢å®¹å™¨"></a>å¯åŠ¨å·²ç»ˆæ­¢å®¹å™¨</h3><p>å¯ä»¥åˆ©ç”¨ <code>docker container start</code> å‘½ä»¤ï¼Œç›´æ¥å°†ä¸€ä¸ªå·²ç»ç»ˆæ­¢çš„å®¹å™¨å¯åŠ¨è¿è¡Œã€‚</p>
<p>å®¹å™¨çš„æ ¸å¿ƒä¸ºæ‰€æ‰§è¡Œçš„åº”ç”¨ç¨‹åºï¼Œæ‰€éœ€è¦çš„èµ„æºéƒ½æ˜¯åº”ç”¨ç¨‹åºè¿è¡Œæ‰€å¿…éœ€çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¹¶æ²¡æœ‰å…¶å®ƒçš„èµ„æºã€‚å¯ä»¥åœ¨ä¼ªç»ˆç«¯ä¸­åˆ©ç”¨ <code>ps</code> æˆ– <code>top</code> æ¥æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@181e9d1236d5:/<span class="comment"># ps</span></span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line">    1 pts/0    00:00:00 bash</span><br><span class="line">   11 pts/0    00:00:00 ps</span><br></pre></td></tr></table></figure>
<h2 id="å®ˆæŠ¤æ€è¿è¡Œå®¹å™¨"><a href="#å®ˆæŠ¤æ€è¿è¡Œå®¹å™¨" class="headerlink" title="å®ˆæŠ¤æ€è¿è¡Œå®¹å™¨"></a>å®ˆæŠ¤æ€è¿è¡Œå®¹å™¨</h2><p>å¦‚æœéœ€è¦è®© Docker åœ¨åå°è¿è¡Œè€Œä¸æ˜¯ç›´æ¥æŠŠæ‰§è¡Œå‘½ä»¤çš„ç»“æœè¾“å‡ºåœ¨å½“å‰å®¿ä¸»æœºä¸‹ã€‚æ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  <code>-d</code> å‚æ•°æ¥å®ç°ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d -i -t ubuntu:18.04 /bin/sh</span><br><span class="line">edae8d9d6311b344b3971bafc2a698625242bcf3300e2c850ba1e4ef51d88707</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å®¹å™¨å¯åŠ¨åä¼šè¿›å…¥åå°ã€‚å¦‚æœæƒ³è¦è¿›å…¥å®¹å™¨å¯ä»¥ä½¿ç”¨<code>docker exec</code>å‘½ä»¤ï¼Œåé¢ä¼šé€æ¸è®²è§£åˆ°ã€‚</p>
<blockquote>
<p> <strong>æ³¨ï¼š</strong>å®¹å™¨æ˜¯å¦ä¼šé•¿ä¹…è¿è¡Œï¼Œæ˜¯å’Œ <code>docker run</code> æŒ‡å®šçš„å‘½ä»¤æœ‰å…³ï¼Œå’Œ <code>-d</code> å‚æ•°æ— å…³ã€‚</p>
</blockquote>
<p>ä½¿ç”¨ <code>-d</code> å‚æ•°å¯åŠ¨åä¼šè¿”å›ä¸€ä¸ªå”¯ä¸€çš„ idï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <code>docker container ls</code> å‘½ä»¤æ¥æŸ¥çœ‹å®¹å™¨ä¿¡æ¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container ls</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">edae8d9d6311        ubuntu:18.04        <span class="string">"/bin/sh"</span>           4 minutes ago       Up 4 minutes                            suspicious_pike</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¦è·å–å®¹å™¨çš„è¾“å‡ºä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ <code>docker container logs</code> å‘½ä»¤ã€‚å¦‚<code>docker container logs [container ID or NAMES]</code></p>
</blockquote>
<h2 id="ç»ˆæ­¢å®¹å™¨"><a href="#ç»ˆæ­¢å®¹å™¨" class="headerlink" title="ç»ˆæ­¢å®¹å™¨"></a>ç»ˆæ­¢å®¹å™¨</h2><p>å¯ä»¥ä½¿ç”¨ <code>docker container stop</code> æ¥ç»ˆæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ã€‚</p>
<p>æ­¤å¤–ï¼Œå½“ Docker å®¹å™¨ä¸­æŒ‡å®šçš„åº”ç”¨ç»ˆç»“æ—¶ï¼Œå®¹å™¨ä¹Ÿè‡ªåŠ¨ç»ˆæ­¢ã€‚</p>
<p>ä¾‹å¦‚å¯¹äºä¸Šä¸€ç« èŠ‚ä¸­åªå¯åŠ¨äº†ä¸€ä¸ªç»ˆç«¯çš„å®¹å™¨ï¼Œç”¨æˆ·é€šè¿‡ <code>exit</code> å‘½ä»¤æˆ– <code>Ctrl+d</code> æ¥é€€å‡ºç»ˆç«¯æ—¶ï¼Œæ‰€åˆ›å»ºçš„å®¹å™¨ç«‹åˆ»ç»ˆæ­¢ã€‚</p>
<p>ç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨å¯ä»¥ç”¨ <code>docker container ls -a</code> å‘½ä»¤çœ‹åˆ°ã€‚ä¾‹å¦‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container stop edae</span><br><span class="line">edae</span><br><span class="line">$ docker container ls -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS               NAMES</span><br><span class="line">edae8d9d6311        ubuntu:18.04        <span class="string">"/bin/sh"</span>                7 minutes ago       Exited (137) 36 seconds ago                       suspicious_pike</span><br><span class="line">181e9d1236d5        ubuntu:18.04        <span class="string">"/bin/bash"</span>              2 days ago          Exited (0) 2 days ago                             condescending_feistel</span><br><span class="line">349a1edaa615        ubuntu:18.04        <span class="string">"/bin/bash"</span>              2 days ago          Exited (0) 2 days ago                             suspicious_lehmann</span><br><span class="line">7d6482342da5        ubuntu:18.04        <span class="string">"/bin/echo 'Hello woâ€¦"</span>   2 days ago          Exited (0) 2 days ago                             affectionate_knuth</span><br></pre></td></tr></table></figure>
<p>å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ï¼Œå¯ä»¥é€šè¿‡ <code>docker container start</code> å‘½ä»¤æ¥é‡æ–°å¯åŠ¨ã€‚</p>
<p>æ­¤å¤–ï¼Œ<code>docker container restart</code> å‘½ä»¤ä¼šå°†ä¸€ä¸ªè¿è¡Œæ€çš„å®¹å™¨ç»ˆæ­¢ï¼Œç„¶åå†é‡æ–°å¯åŠ¨å®ƒã€‚</p>
<blockquote>
<p>æŒ‡å®šå®¹å™¨IDæ—¶å¯ä»¥ä¸éœ€è¦è¾“å…¥å®Œæ•´IDï¼Œå¯ä»¥è¾“å…¥IDå‰å‡ ä½éƒ½å¯ä»¥ï¼Œåªè¦èƒ½å¤Ÿè¾¨è¯†åˆ°è¯¥å®¹å™¨å³å¯ã€‚</p>
</blockquote>
<h2 id="è¿›å…¥å®¹å™¨"><a href="#è¿›å…¥å®¹å™¨" class="headerlink" title="è¿›å…¥å®¹å™¨"></a>è¿›å…¥å®¹å™¨</h2><p>åœ¨ä½¿ç”¨ <code>-d</code> å‚æ•°æ—¶ï¼Œå®¹å™¨å¯åŠ¨åä¼šè¿›å…¥åå°ã€‚</p>
<p>æŸäº›æ—¶å€™éœ€è¦è¿›å…¥å®¹å™¨è¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬ä½¿ç”¨ <code>docker attach</code> å‘½ä»¤æˆ– <code>docker exec</code> å‘½ä»¤ï¼Œæ¨èå¤§å®¶ä½¿ç”¨ <code>docker exec</code> å‘½ä»¤ã€‚</p>
<h3 id="attachå‘½ä»¤"><a href="#attachå‘½ä»¤" class="headerlink" title="attachå‘½ä»¤"></a><code>attach</code>å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container ls</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">edae8d9d6311        ubuntu:18.04        <span class="string">"/bin/sh"</span>           9 minutes ago       Up 4 seconds                            suspicious_pike</span><br><span class="line">$ docker attach 243c</span><br><span class="line"><span class="comment"># pwd</span></span><br><span class="line">/</span><br><span class="line"><span class="comment"># exit</span></span><br><span class="line">$ docker container ls</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br></pre></td></tr></table></figure>
<p><em>æ³¨æ„ï¼š</em> å¦‚æœä»è¿™ä¸ª stdin ä¸­ exitï¼Œä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ã€‚</p>
<h3 id="execå‘½ä»¤"><a href="#execå‘½ä»¤" class="headerlink" title="execå‘½ä»¤"></a><code>exec</code>å‘½ä»¤</h3><p><code>docker exec</code> åè¾¹å¯ä»¥è·Ÿå¤šä¸ªå‚æ•°ï¼Œè¿™é‡Œä¸»è¦è¯´æ˜ <code>-i</code> <code>-t</code> å‚æ•°ã€‚</p>
<p>åªç”¨ <code>-i</code> å‚æ•°æ—¶ï¼Œç”±äºæ²¡æœ‰åˆ†é…ä¼ªç»ˆç«¯ï¼Œç•Œé¢æ²¡æœ‰æˆ‘ä»¬ç†Ÿæ‚‰çš„ Linux å‘½ä»¤æç¤ºç¬¦ï¼Œä½†å‘½ä»¤æ‰§è¡Œç»“æœä»ç„¶å¯ä»¥è¿”å›ã€‚</p>
<p>å½“ <code>-i</code> <code>-t</code> å‚æ•°ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œåˆ™å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç†Ÿæ‚‰çš„ Linux å‘½ä»¤æç¤ºç¬¦ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ container ls</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">edae8d9d6311        ubuntu:18.04        <span class="string">"/bin/sh"</span>           13 minutes ago      Up 5 seconds                            suspicious_pike</span><br><span class="line">$ docker <span class="built_in">exec</span> -i edae bash</span><br><span class="line">ls</span><br><span class="line">bin</span><br><span class="line">boot</span><br><span class="line">dev</span><br><span class="line">etc</span><br><span class="line">home</span><br><span class="line">lib</span><br><span class="line">lib64</span><br><span class="line">media</span><br><span class="line">mnt</span><br><span class="line">opt</span><br><span class="line">proc</span><br><span class="line">root</span><br><span class="line">run</span><br><span class="line">sbin</span><br><span class="line">srv</span><br><span class="line">sys</span><br><span class="line">tmp</span><br><span class="line">usr</span><br><span class="line">va</span><br><span class="line">$ docker <span class="built_in">exec</span> -i -t edae bash</span><br><span class="line">root@edae8d9d6311:/<span class="comment"># ls</span></span><br><span class="line">bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">root@edae8d9d6311:/<span class="comment"># exit</span></span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä»è¿™ä¸ª stdin ä¸­ exitï¼Œä¸ä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ¨èå¤§å®¶ä½¿ç”¨ <code>docker exec</code> çš„åŸå› ã€‚</p>
<p>æ›´å¤šå‚æ•°è¯´æ˜è¯·ä½¿ç”¨ <code>docker exec --help</code> æŸ¥çœ‹ã€‚</p>
<h2 id="å¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨"><a href="#å¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨" class="headerlink" title="å¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨"></a>å¯¼å‡ºå’Œå¯¼å…¥å®¹å™¨</h2><h3 id="å¯¼å‡ºå®¹å™¨"><a href="#å¯¼å‡ºå®¹å™¨" class="headerlink" title="å¯¼å‡ºå®¹å™¨"></a>å¯¼å‡ºå®¹å™¨</h3><p>å¦‚æœè¦å¯¼å‡ºæœ¬åœ°æŸä¸ªå®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>docker export</code> å‘½ä»¤ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container ls -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                            PORTS               NAMES</span><br><span class="line">edae8d9d6311        ubuntu:18.04        <span class="string">"/bin/sh"</span>                18 minutes ago      Exited (137) About a minute ago                       suspicious_pike</span><br><span class="line">181e9d1236d5        ubuntu:18.04        <span class="string">"/bin/bash"</span>              2 days ago          Exited (0) 2 days ago                                 condescending_feistel</span><br><span class="line">349a1edaa615        ubuntu:18.04        <span class="string">"/bin/bash"</span>              2 days ago          Exited (0) 2 days ago                                 suspicious_lehmann</span><br><span class="line">7d6482342da5        ubuntu:18.04        <span class="string">"/bin/echo 'Hello woâ€¦"</span>   2 days ago          Exited (0) 2 days ago                                 affectionate_knuth</span><br><span class="line">$ docker <span class="built_in">export</span> edae &gt; ubuntu.zip</span><br></pre></td></tr></table></figure>
<h3 id="å¯¼å…¥å®¹å™¨å¿«ç…§"><a href="#å¯¼å…¥å®¹å™¨å¿«ç…§" class="headerlink" title="å¯¼å…¥å®¹å™¨å¿«ç…§"></a>å¯¼å…¥å®¹å™¨å¿«ç…§</h3><p>å¯ä»¥ä½¿ç”¨ <code>docker import</code> ä»å®¹å™¨å¿«ç…§æ–‡ä»¶ä¸­å†å¯¼å…¥ä¸ºé•œåƒï¼Œä¾‹å¦‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ cat ubuntu.zip | docker import - <span class="built_in">test</span>/ubuntu:v1.0</span><br><span class="line">$ docker image ls</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED              VIRTUAL SIZE</span><br><span class="line"><span class="built_in">test</span>/ubuntu         v1.0                9d37a6082e97        About a minute ago   171.3 MB</span><br></pre></td></tr></table></figure>
<p>æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®š URL æˆ–è€…æŸä¸ªç›®å½•æ¥å¯¼å…¥ï¼Œä¾‹å¦‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker import http://example.com/exampleimage.tgz example/imagerepo</span><br></pre></td></tr></table></figure>
<blockquote>
<p><em>æ³¨ï¼šç”¨æˆ·æ—¢å¯ä»¥ä½¿ç”¨ <code>docker load</code> æ¥å¯¼å…¥é•œåƒå­˜å‚¨æ–‡ä»¶åˆ°æœ¬åœ°é•œåƒåº“ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>docker import</code> æ¥å¯¼å…¥ä¸€ä¸ªå®¹å™¨å¿«ç…§åˆ°æœ¬åœ°é•œåƒåº“ã€‚è¿™ä¸¤è€…çš„åŒºåˆ«åœ¨äºå®¹å™¨å¿«ç…§æ–‡ä»¶å°†ä¸¢å¼ƒæ‰€æœ‰çš„å†å²è®°å½•å’Œå…ƒæ•°æ®ä¿¡æ¯ï¼ˆå³ä»…ä¿å­˜å®¹å™¨å½“æ—¶çš„å¿«ç…§çŠ¶æ€ï¼‰ï¼Œè€Œé•œåƒå­˜å‚¨æ–‡ä»¶å°†ä¿å­˜å®Œæ•´è®°å½•ï¼Œä½“ç§¯ä¹Ÿè¦å¤§ã€‚æ­¤å¤–ï¼Œä»å®¹å™¨å¿«ç…§æ–‡ä»¶å¯¼å…¥æ—¶å¯ä»¥é‡æ–°æŒ‡å®šæ ‡ç­¾ç­‰å…ƒæ•°æ®ä¿¡æ¯ã€‚</em></p>
</blockquote>
<h2 id="åˆ é™¤å®¹å™¨"><a href="#åˆ é™¤å®¹å™¨" class="headerlink" title="åˆ é™¤å®¹å™¨"></a>åˆ é™¤å®¹å™¨</h2><p>å¯ä»¥ä½¿ç”¨ <code>docker container rm</code> æ¥åˆ é™¤ä¸€ä¸ªå¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚ä¾‹å¦‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container rm  edae</span><br><span class="line">edae</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¯ä»¥æ·»åŠ  <code>-f</code> å‚æ•°ã€‚Docker ä¼šå‘é€ <code>SIGKILL</code> ä¿¡å·ç»™å®¹å™¨ã€‚</p>
<p><strong>æ¸…ç†æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨</strong></p>
<p>ç”¨ <code>docker container ls -a</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å·²ç»åˆ›å»ºçš„åŒ…æ‹¬ç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ï¼Œå¦‚æœæ•°é‡å¤ªå¤šè¦ä¸€ä¸ªä¸ªåˆ é™¤å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œç”¨å‘½ä»¤<code>docker container prune</code>å¯ä»¥æ¸…ç†æ‰æ‰€æœ‰å¤„äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container ls -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                  PORTS               NAMES</span><br><span class="line">181e9d1236d5        ubuntu:18.04        <span class="string">"/bin/bash"</span>              2 days ago          Exited (0) 2 days ago                       condescending_feistel</span><br><span class="line">349a1edaa615        ubuntu:18.04        <span class="string">"/bin/bash"</span>              2 days ago          Exited (0) 2 days ago                       suspicious_lehmann</span><br><span class="line">7d6482342da5        ubuntu:18.04        <span class="string">"/bin/echo 'Hello woâ€¦"</span>   2 days ago          Exited (0) 2 days ago                       affectionate_knuth</span><br><span class="line">$ docker container prune</span><br><span class="line">WARNING! This will remove all stopped containers.</span><br><span class="line">Are you sure you want to <span class="built_in">continue</span>? [y/N] y</span><br><span class="line">Deleted Containers:</span><br><span class="line">181e9d1236d54ee898f8f0ebc5349dbcc0cd2368c34f427f7963c9014c9e1dc8</span><br><span class="line">349a1edaa61597acb426a0961059bf5a73ae0b23350774d5cd5c33963c8b2b12</span><br><span class="line">7d6482342da5f695a5351c15ef17acb521f893548db0891154b5c1268227ce7d</span><br><span class="line"></span><br><span class="line">Total reclaimed space: 20B</span><br><span class="line">$ docker container ls -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br></pre></td></tr></table></figure>
<h1 id="æ•°æ®ç®¡ç†"><a href="#æ•°æ®ç®¡ç†" class="headerlink" title="æ•°æ®ç®¡ç†"></a>æ•°æ®ç®¡ç†</h1><p>åœ¨å®¹å™¨ä¸­ç®¡ç†æ•°æ®ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>æ•°æ®å·ï¼ˆVolumesï¼‰</li>
<li>æŒ‚è½½ä¸»æœºç›®å½• (Bind mounts)</li>
</ul>
<h2 id="æ•°æ®å·"><a href="#æ•°æ®å·" class="headerlink" title="æ•°æ®å·"></a>æ•°æ®å·</h2><p><code>æ•°æ®å·</code> æ˜¯ä¸€ä¸ªå¯ä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡ UFSï¼Œå¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ï¼š</p>
<ul>
<li><code>æ•°æ®å·</code> å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«å’Œé‡ç”¨</li>
<li>å¯¹ <code>æ•°æ®å·</code> çš„ä¿®æ”¹ä¼šç«‹é©¬ç”Ÿæ•ˆ</li>
<li>å¯¹ <code>æ•°æ®å·</code> çš„æ›´æ–°ï¼Œä¸ä¼šå½±å“é•œåƒ</li>
<li><code>æ•°æ®å·</code> é»˜è®¤ä¼šä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿å®¹å™¨è¢«åˆ é™¤</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š<code>æ•°æ®å·</code> çš„ä½¿ç”¨ï¼Œç±»ä¼¼äº Linux ä¸‹å¯¹ç›®å½•æˆ–æ–‡ä»¶è¿›è¡Œ mountï¼Œé•œåƒä¸­çš„è¢«æŒ‡å®šä¸ºæŒ‚è½½ç‚¹çš„ç›®å½•ä¸­çš„æ–‡ä»¶ä¼šéšè—æ‰ï¼Œèƒ½æ˜¾ç¤ºçœ‹çš„æ˜¯æŒ‚è½½çš„ <code>æ•°æ®å·</code>ã€‚</p>
</blockquote>
<h3 id="åˆ›å»ºæ•°æ®å·"><a href="#åˆ›å»ºæ•°æ®å·" class="headerlink" title="åˆ›å»ºæ•°æ®å·"></a>åˆ›å»ºæ•°æ®å·</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker volume create my-vol</span><br><span class="line">my-vol</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ‰€æœ‰çš„ <code>æ•°æ®å·</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker volume ls</span><br><span class="line">DRIVER              VOLUME NAME</span><br><span class="line"><span class="built_in">local</span>               my-vol</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸»æœºé‡Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹æŒ‡å®š <code>æ•°æ®å·</code> çš„ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker volume inspect my-vol</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"CreatedAt"</span>: <span class="string">"2019-12-02T03:25:01Z"</span>,</span><br><span class="line">        <span class="string">"Driver"</span>: <span class="string">"local"</span>,</span><br><span class="line">        <span class="string">"Labels"</span>: &#123;&#125;,</span><br><span class="line">        <span class="string">"Mountpoint"</span>: <span class="string">"/var/lib/docker/volumes/my-vol/_data"</span>,</span><br><span class="line">        <span class="string">"Name"</span>: <span class="string">"my-vol"</span>,</span><br><span class="line">        <span class="string">"Options"</span>: &#123;&#125;,</span><br><span class="line">        <span class="string">"Scope"</span>: <span class="string">"local"</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="å¯åŠ¨ä¸€ä¸ªæŒ‚è½½æ•°æ®å·çš„å®¹å™¨"><a href="#å¯åŠ¨ä¸€ä¸ªæŒ‚è½½æ•°æ®å·çš„å®¹å™¨" class="headerlink" title="å¯åŠ¨ä¸€ä¸ªæŒ‚è½½æ•°æ®å·çš„å®¹å™¨"></a>å¯åŠ¨ä¸€ä¸ªæŒ‚è½½æ•°æ®å·çš„å®¹å™¨</h3><p>åœ¨ç”¨ <code>docker run</code> å‘½ä»¤çš„æ—¶å€™ï¼Œä½¿ç”¨ <code>--mount</code> æ ‡è®°æ¥å°† <code>æ•°æ®å·</code> æŒ‚è½½åˆ°å®¹å™¨é‡Œã€‚åœ¨ä¸€æ¬¡ <code>docker run</code> ä¸­å¯ä»¥æŒ‚è½½å¤šä¸ª <code>æ•°æ®å·</code>ã€‚</p>
<p>ä¸‹é¢åˆ›å»ºä¸€ä¸ªåä¸º <code>web</code> çš„å®¹å™¨ï¼Œå¹¶åŠ è½½ä¸€ä¸ª <code>æ•°æ®å·</code> åˆ°å®¹å™¨çš„ <code>/webapp</code> ç›®å½•ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d -P \</span><br><span class="line">    --name web \</span><br><span class="line">    <span class="comment"># -v my-vol:/wepapp \</span></span><br><span class="line">    --mount <span class="built_in">source</span>=my-vol,target=/webapp \</span><br><span class="line">    training/webapp \</span><br><span class="line">    python app.py</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>-P:</strong> éšæœºç«¯å£æ˜ å°„ï¼Œå®¹å™¨å†…éƒ¨ç«¯å£<strong>éšæœº</strong>æ˜ å°„åˆ°ä¸»æœºçš„é«˜ç«¯å£</p>
</blockquote>
<h3 id="æŸ¥çœ‹æ•°æ®å·çš„å…·ä½“ä¿¡æ¯"><a href="#æŸ¥çœ‹æ•°æ®å·çš„å…·ä½“ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹æ•°æ®å·çš„å…·ä½“ä¿¡æ¯"></a>æŸ¥çœ‹æ•°æ®å·çš„å…·ä½“ä¿¡æ¯</h3><p>åœ¨ä¸»æœºé‡Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹ <code>web</code> å®¹å™¨çš„ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker inspect web</span><br></pre></td></tr></table></figure>
<p><code>æ•°æ®å·</code> ä¿¡æ¯åœ¨ â€œMountsâ€ Key ä¸‹é¢</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"Mounts": [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"Type"</span>: <span class="string">"volume"</span>,</span><br><span class="line">        <span class="attr">"Name"</span>: <span class="string">"my-vol"</span>,</span><br><span class="line">        <span class="attr">"Source"</span>: <span class="string">"/var/lib/docker/volumes/my-vol/_data"</span>,</span><br><span class="line">        <span class="attr">"Destination"</span>: <span class="string">"/app"</span>,</span><br><span class="line">        <span class="attr">"Driver"</span>: <span class="string">"local"</span>,</span><br><span class="line">        <span class="attr">"Mode"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"RW"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"Propagation"</span>: <span class="string">""</span></span><br><span class="line">    &#125;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤æ•°æ®å·"><a href="#åˆ é™¤æ•°æ®å·" class="headerlink" title="åˆ é™¤æ•°æ®å·"></a>åˆ é™¤æ•°æ®å·</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker volume rm my-vol</span><br></pre></td></tr></table></figure>
<p><code>æ•°æ®å·</code> æ˜¯è¢«è®¾è®¡ç”¨æ¥æŒä¹…åŒ–æ•°æ®çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹äºå®¹å™¨ï¼ŒDocker ä¸ä¼šåœ¨å®¹å™¨è¢«åˆ é™¤åè‡ªåŠ¨åˆ é™¤ <code>æ•°æ®å·</code>ï¼Œå¹¶ä¸”ä¹Ÿä¸å­˜åœ¨åƒåœ¾å›æ”¶è¿™æ ·çš„æœºåˆ¶æ¥å¤„ç†æ²¡æœ‰ä»»ä½•å®¹å™¨å¼•ç”¨çš„ <code>æ•°æ®å·</code>ã€‚å¦‚æœéœ€è¦åœ¨åˆ é™¤å®¹å™¨çš„åŒæ—¶ç§»é™¤æ•°æ®å·ã€‚å¯ä»¥åœ¨åˆ é™¤å®¹å™¨çš„æ—¶å€™ä½¿ç”¨ <code>docker rm -v</code> è¿™ä¸ªå‘½ä»¤ã€‚</p>
<p>æ— ä¸»çš„æ•°æ®å·å¯èƒ½ä¼šå æ®å¾ˆå¤šç©ºé—´ï¼Œè¦æ¸…ç†è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker volume prune</span><br></pre></td></tr></table></figure>
<h2 id="æŒ‚è½½ä¸»æœºç›®å½•"><a href="#æŒ‚è½½ä¸»æœºç›®å½•" class="headerlink" title="æŒ‚è½½ä¸»æœºç›®å½•"></a>æŒ‚è½½ä¸»æœºç›®å½•</h2><h3 id="æŒ‚è½½ä¸€ä¸ªä¸»æœºç›®å½•ä½œä¸ºæ•°æ®å·"><a href="#æŒ‚è½½ä¸€ä¸ªä¸»æœºç›®å½•ä½œä¸ºæ•°æ®å·" class="headerlink" title="æŒ‚è½½ä¸€ä¸ªä¸»æœºç›®å½•ä½œä¸ºæ•°æ®å·"></a>æŒ‚è½½ä¸€ä¸ªä¸»æœºç›®å½•ä½œä¸ºæ•°æ®å·</h3><p>ä½¿ç”¨ <code>--mount</code> æ ‡è®°å¯ä»¥æŒ‡å®šæŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºçš„ç›®å½•åˆ°å®¹å™¨ä¸­å»ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d -P \</span><br><span class="line">    --name web \</span><br><span class="line">    <span class="comment"># -v /src/webapp:/opt/webapp \</span></span><br><span class="line">    --mount <span class="built_in">type</span>=<span class="built_in">bind</span>,<span class="built_in">source</span>=/src/webapp,target=/opt/webapp \</span><br><span class="line">    training/webapp \</span><br><span class="line">    python app.py</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„å‘½ä»¤åŠ è½½ä¸»æœºçš„ <code>/src/webapp</code> ç›®å½•åˆ°å®¹å™¨çš„ <code>/opt/webapp</code>ç›®å½•ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨è¿›è¡Œæµ‹è¯•çš„æ—¶å€™ååˆ†æ–¹ä¾¿ï¼Œæ¯”å¦‚ç”¨æˆ·å¯ä»¥æ”¾ç½®ä¸€äº›ç¨‹åºåˆ°æœ¬åœ°ç›®å½•ä¸­ï¼Œæ¥æŸ¥çœ‹å®¹å™¨æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚æœ¬åœ°ç›®å½•çš„è·¯å¾„å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼Œä»¥å‰ä½¿ç”¨ <code>-v</code> å‚æ•°æ—¶å¦‚æœæœ¬åœ°ç›®å½•ä¸å­˜åœ¨ Docker ä¼šè‡ªåŠ¨ä¸ºä½ åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç°åœ¨ä½¿ç”¨ <code>--mount</code> å‚æ•°æ—¶å¦‚æœæœ¬åœ°ç›®å½•ä¸å­˜åœ¨ï¼ŒDocker ä¼šæŠ¥é”™ã€‚</p>
<p>Docker æŒ‚è½½ä¸»æœºç›®å½•çš„é»˜è®¤æƒé™æ˜¯ <code>è¯»å†™</code>ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡å¢åŠ  <code>readonly</code> æŒ‡å®šä¸º <code>åªè¯»</code>ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d -P \</span><br><span class="line">    --name web \</span><br><span class="line">    <span class="comment"># -v /src/webapp:/opt/webapp:ro \</span></span><br><span class="line">    --mount <span class="built_in">type</span>=<span class="built_in">bind</span>,<span class="built_in">source</span>=/src/webapp,target=/opt/webapp,<span class="built_in">readonly</span> \</span><br><span class="line">    training/webapp \</span><br><span class="line">    python app.py</span><br></pre></td></tr></table></figure>
<p>åŠ äº† <code>readonly</code> ä¹‹åï¼Œå°±æŒ‚è½½ä¸º <code>åªè¯»</code> äº†ã€‚å¦‚æœä½ åœ¨å®¹å™¨å†… <code>/opt/webapp</code> ç›®å½•æ–°å»ºæ–‡ä»¶ï¼Œä¼šæ˜¾ç¤ºå¦‚ä¸‹é”™è¯¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/opt/webapp <span class="comment"># touch new.txt</span></span><br><span class="line">touch: new.txt: Read-only file system</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥çœ‹æ•°æ®å·çš„å…·ä½“ä¿¡æ¯-1"><a href="#æŸ¥çœ‹æ•°æ®å·çš„å…·ä½“ä¿¡æ¯-1" class="headerlink" title="æŸ¥çœ‹æ•°æ®å·çš„å…·ä½“ä¿¡æ¯"></a>æŸ¥çœ‹æ•°æ®å·çš„å…·ä½“ä¿¡æ¯</h3><p>åœ¨ä¸»æœºé‡Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹ <code>web</code> å®¹å™¨çš„ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker inspect web</span><br></pre></td></tr></table></figure>
<p><code>æŒ‚è½½ä¸»æœºç›®å½•</code> çš„é…ç½®ä¿¡æ¯åœ¨ â€œMountsâ€ Key ä¸‹é¢</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"Mounts": [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"Type"</span>: <span class="string">"bind"</span>,</span><br><span class="line">        <span class="attr">"Source"</span>: <span class="string">"/src/webapp"</span>,</span><br><span class="line">        <span class="attr">"Destination"</span>: <span class="string">"/opt/webapp"</span>,</span><br><span class="line">        <span class="attr">"Mode"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"RW"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"Propagation"</span>: <span class="string">"rprivate"</span></span><br><span class="line">    &#125;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<h3 id="æŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºæ–‡ä»¶ä½œä¸ºæ•°æ®å·"><a href="#æŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºæ–‡ä»¶ä½œä¸ºæ•°æ®å·" class="headerlink" title="æŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºæ–‡ä»¶ä½œä¸ºæ•°æ®å·"></a>æŒ‚è½½ä¸€ä¸ªæœ¬åœ°ä¸»æœºæ–‡ä»¶ä½œä¸ºæ•°æ®å·</h3><p><code>--mount</code> æ ‡è®°ä¹Ÿå¯ä»¥ä»ä¸»æœºæŒ‚è½½å•ä¸ªæ–‡ä»¶åˆ°å®¹å™¨ä¸­</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run --rm -it \</span><br><span class="line">   <span class="comment"># -v $HOME/.bash_history:/root/.bash_history \</span></span><br><span class="line">   --mount <span class="built_in">type</span>=<span class="built_in">bind</span>,<span class="built_in">source</span>=<span class="variable">$HOME</span>/.bash_history,target=/root/.bash_history \</span><br><span class="line">   ubuntu:18.04 \</span><br><span class="line">   bash</span><br><span class="line"></span><br><span class="line">root@2affd44b4667:/<span class="comment"># history</span></span><br><span class="line">1  ls</span><br><span class="line">2  diskutil list</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥è®°å½•åœ¨å®¹å™¨è¾“å…¥è¿‡çš„å‘½ä»¤äº†ã€‚</p>
<h2 id="é€‰æ‹©-v-or-â€“mount-æ ‡å¿—"><a href="#é€‰æ‹©-v-or-â€“mount-æ ‡å¿—" class="headerlink" title="é€‰æ‹© -v or â€“mount æ ‡å¿—"></a>é€‰æ‹© -v or â€“mount æ ‡å¿—</h2><p>æœ€åˆï¼Œ<code>-v</code>æˆ–<code>--volume</code>æ ‡å¿—ç”¨äºç‹¬ç«‹å®¹å™¨ï¼Œè€Œ<code>--mount</code>æ ‡å¿—ç”¨äºç¾¤é›†æœåŠ¡ã€‚ä½†æ˜¯ï¼Œä»Docker 17.06å¼€å§‹ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨<code>--mount</code>ç‹¬ç«‹çš„å®¹å™¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œ<code>--mount</code>æ›´æ˜ç¡®å’Œè¯¦ç»†ã€‚æœ€å¤§çš„åŒºåˆ«åœ¨äº-vè¯­æ³•å°†æ‰€æœ‰é€‰é¡¹ç»„åˆåœ¨ä¸€ä¸ªå­—æ®µä¸­ï¼Œè€Œ<code>--mount</code>è¯­æ³•å°†å®ƒä»¬åˆ†å¼€ã€‚å»ºè®®æ–°å­¦è€…ä½¿ç”¨ã€‚</p>
<p><strong><code>v</code>æˆ–<code>- volume</code>:ç”±ä¸‰ä¸ªå­—æ®µç»„æˆï¼Œç”±å†’å·åˆ†éš”(:)ã€‚å­—æ®µå¿…é¡»æŒ‰ç…§æ­£ç¡®çš„é¡ºåºä¹¦å†™ï¼Œå¹¶ä¸”æ¯ä¸ªå­—æ®µçš„å«ä¹‰éƒ½ä¸æ˜¯ç«‹åˆ»ç¡®å®šã€‚</strong></p>
<ul>
<li>åœ¨å‘½åå·çš„æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªå­—æ®µæ˜¯å·çš„åç§°ï¼Œåœ¨ç»™å®šçš„ä¸»æœºä¸Šæ˜¯æƒŸä¸€çš„ã€‚å¯¹äºåŒ¿åå·ï¼Œçœç•¥äº†ç¬¬ä¸€ä¸ªå­—æ®µã€‚</li>
<li>ç¬¬äºŒä¸ªå­—æ®µæ˜¯åœ¨å®¹å™¨ä¸­å®‰è£…æ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„ã€‚</li>
<li>ç¬¬ä¸‰ä¸ªå­—æ®µæ˜¯å¯é€‰çš„ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„é€‰é¡¹åˆ—è¡¨ï¼Œå¦‚roã€‚ä¸‹é¢è®¨è®ºè¿™äº›é€‰é¡¹ã€‚</li>
</ul>
<p><strong><code>--mount</code>:ç”±å¤šä¸ªé”®-å€¼å¯¹ç»„æˆï¼Œç”±é€—å·åˆ†éš”ï¼Œæ¯ä¸€å¯¹ç”±<code>&lt; key&gt;= &lt;value&gt; tuple(å…ƒç»„ï¼‰</code>ç»„æˆã€‚<code>--mount</code> è¯­æ³•æ¯”<code>- v</code>æˆ–<code>â€”volume</code> æ›´è¯¦ç»†ï¼Œå…¶ä¸­é”®å¯¹çš„é¡ºåºå¹¶ä¸é‡è¦ï¼Œè€Œä¸”æ ‡è®°çš„å€¼æ›´å®¹æ˜“ç†è§£ã€‚</strong></p>
<ul>
<li>æŒ‚è½½çš„ç±»å‹(type)ï¼Œå¯ä»¥æ˜¯ç»‘å®š(bind)ã€å·(volume)æˆ–tmpfsã€‚æœ¬ä¸»é¢˜è®¨è®ºå·ï¼Œå› æ­¤ç±»å‹å°†å§‹ç»ˆæ˜¯å·ã€‚</li>
<li>æŒ‚è½½æºï¼ˆsource)ã€‚å¯¹äºå‘½åå·ï¼Œæ˜¯å·çš„åç§°ã€‚å¯¹äºåŒ¿åå·ï¼Œè¯¥å­—æ®µè¢«çœç•¥ã€‚å¯ä»¥æŒ‡å®šä¸ºsource æˆ–srcã€‚</li>
<li>æŒ‚åœ¨ç›®æ ‡(destination)çš„å€¼æ˜¯å°†æ–‡ä»¶æˆ–ç›®å½•å®‰è£…åœ¨å®¹å™¨ä¸­çš„è·¯å¾„ã€‚å¯ä»¥æŒ‡å®šä¸ºdestinationã€dstæˆ–targetã€‚</li>
<li>å¦‚æœå­˜åœ¨readonlyé€‰é¡¹ï¼Œåˆ™å°†ç»‘å®šæŒ‚è½½å®‰è£…åˆ°å®¹å™¨ä¸­ä½œä¸ºåªè¯»ã€‚</li>
<li>å¯ä»¥ä½¿ç”¨é”®å€¼å¯¹å¤šæ¬¡æŒ‡å®šçš„volume-opté€‰é¡¹.</li>
</ul>
<p>ä¸ç»‘å®šæŒ‚è½½ç›¸åï¼Œæ‰€æœ‰çš„å·çš„é€‰é¡¹å¯¹äº<code>--mount</code> å’Œ<code>-v</code>æ ‡å¿— éƒ½å¯ä»¥ä½¿ç”¨ã€‚å½“å·(volume)ä½œä¸ºæœåŠ¡æ—¶ï¼Œåªæ”¯æŒ<code>--mount</code>ã€‚</p>
<h1 id="å®¹å™¨ç½‘ç»œ"><a href="#å®¹å™¨ç½‘ç»œ" class="headerlink" title="å®¹å™¨ç½‘ç»œ"></a>å®¹å™¨ç½‘ç»œ</h1><p>Docker å…è®¸é€šè¿‡å¤–éƒ¨è®¿é—®å®¹å™¨æˆ–å®¹å™¨äº’è”çš„æ–¹å¼æ¥æä¾›ç½‘ç»œæœåŠ¡ã€‚</p>
<h2 id="å¤–éƒ¨è®¿é—®å®¹å™¨"><a href="#å¤–éƒ¨è®¿é—®å®¹å™¨" class="headerlink" title="å¤–éƒ¨è®¿é—®å®¹å™¨"></a>å¤–éƒ¨è®¿é—®å®¹å™¨</h2><p>å®¹å™¨ä¸­å¯ä»¥è¿è¡Œä¸€äº›ç½‘ç»œåº”ç”¨ï¼Œè¦è®©å¤–éƒ¨ä¹Ÿå¯ä»¥è®¿é—®è¿™äº›åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡ <code>-P</code> æˆ– <code>-p</code> å‚æ•°æ¥æŒ‡å®šç«¯å£æ˜ å°„ã€‚</p>
<p>å½“ä½¿ç”¨ <code>-P</code> æ ‡è®°æ—¶ï¼ŒDocker ä¼šéšæœºæ˜ å°„ä¸€ä¸ª <code>49000~49900</code> çš„ç«¯å£åˆ°å†…éƒ¨å®¹å™¨å¼€æ”¾çš„ç½‘ç»œç«¯å£ã€‚</p>
<p>ä½¿ç”¨ <code>docker container ls</code> å¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°ä¸»æœºçš„ 49155 è¢«æ˜ å°„åˆ°äº†å®¹å™¨çš„ 5000 ç«¯å£ã€‚æ­¤æ—¶è®¿é—®æœ¬æœºçš„ 49155 ç«¯å£å³å¯è®¿é—®å®¹å™¨å†… web åº”ç”¨æä¾›çš„ç•Œé¢ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d -P training/webapp python app.py</span><br><span class="line">ea7fb3aa1ca874847d7469f62f7cdfcd557438453ad08c283416b5d229468db2</span><br><span class="line">$ docker container ls</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                     NAMES</span><br><span class="line">ea7fb3aa1ca8        training/webapp     <span class="string">"python app.py"</span>     About an hour ago   Up About an hour    0.0.0.0:32768-&gt;5000/tcp   serene_buck</span><br></pre></td></tr></table></figure>
<p>åŒæ ·çš„ï¼Œå¯ä»¥é€šè¿‡ <code>docker logs</code> å‘½ä»¤æ¥æŸ¥çœ‹åº”ç”¨çš„ä¿¡æ¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker logs -f serene_buck</span><br><span class="line"> * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)</span><br><span class="line">172.17.0.1 - - [02/Dec/2019 06:27:22] <span class="string">"GET / HTTP/1.1"</span> 200 -</span><br><span class="line">172.17.0.1 - - [02/Dec/2019 06:27:23] <span class="string">"GET /favicon.ico HTTP/1.1"</span> 404 -</span><br></pre></td></tr></table></figure>
<p><code>-p</code> åˆ™å¯ä»¥æŒ‡å®šè¦æ˜ å°„çš„ç«¯å£ï¼Œå¹¶ä¸”ï¼Œåœ¨ä¸€ä¸ªæŒ‡å®šç«¯å£ä¸Šåªå¯ä»¥ç»‘å®šä¸€ä¸ªå®¹å™¨ã€‚æ”¯æŒçš„æ ¼å¼æœ‰ <code>ip:hostPort:containerPort | ip::containerPort | hostPort:containerPort</code>ã€‚</p>
<h3 id="æ˜ å°„æ‰€æœ‰æ¥å£åœ°å€"><a href="#æ˜ å°„æ‰€æœ‰æ¥å£åœ°å€" class="headerlink" title="æ˜ å°„æ‰€æœ‰æ¥å£åœ°å€"></a>æ˜ å°„æ‰€æœ‰æ¥å£åœ°å€</h3><p>ä½¿ç”¨ <code>hostPort:containerPort</code> æ ¼å¼æœ¬åœ°çš„ 8000 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 5000 ç«¯å£ï¼Œå¯ä»¥æ‰§è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d -p 8000:5000 training/webapp python app.py</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶é»˜è®¤ä¼šç»‘å®šæœ¬åœ°æ‰€æœ‰æ¥å£ä¸Šçš„æ‰€æœ‰åœ°å€ã€‚</p>
<h3 id="æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„æŒ‡å®šç«¯å£"><a href="#æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„æŒ‡å®šç«¯å£" class="headerlink" title="æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„æŒ‡å®šç«¯å£"></a>æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„æŒ‡å®šç«¯å£</h3><p>å¯ä»¥ä½¿ç”¨ <code>ip:hostPort:containerPort</code> æ ¼å¼æŒ‡å®šæ˜ å°„ä½¿ç”¨ä¸€ä¸ªç‰¹å®šåœ°å€ï¼Œæ¯”å¦‚ localhost åœ°å€ 127.0.0.1</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d -p 127.0.0.1:5000:5000 training/webapp python app.py</span><br></pre></td></tr></table></figure>
<h3 id="æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„ä»»æ„ç«¯å£"><a href="#æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„ä»»æ„ç«¯å£" class="headerlink" title="æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„ä»»æ„ç«¯å£"></a>æ˜ å°„åˆ°æŒ‡å®šåœ°å€çš„ä»»æ„ç«¯å£</h3><p>ä½¿ç”¨ <code>ip::containerPort</code> ç»‘å®š localhost çš„ä»»æ„ç«¯å£åˆ°å®¹å™¨çš„ 5000 ç«¯å£ï¼Œæœ¬åœ°ä¸»æœºä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªç«¯å£ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d -p 127.0.0.1::5000 training/webapp python app.py</span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥ä½¿ç”¨ <code>udp</code> æ ‡è®°æ¥æŒ‡å®š <code>udp</code> ç«¯å£</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d -p 127.0.0.1:5000:5000/udp training/webapp python app.py</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥çœ‹æ˜ å°„ç«¯å£é…ç½®"><a href="#æŸ¥çœ‹æ˜ å°„ç«¯å£é…ç½®" class="headerlink" title="æŸ¥çœ‹æ˜ å°„ç«¯å£é…ç½®"></a>æŸ¥çœ‹æ˜ å°„ç«¯å£é…ç½®</h3><p>ä½¿ç”¨ <code>docker port</code> æ¥æŸ¥çœ‹å½“å‰æ˜ å°„çš„ç«¯å£é…ç½®ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹åˆ°ç»‘å®šçš„åœ°å€</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker port 5f2b 5000</span><br><span class="line">0.0.0.0:8000</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>å®¹å™¨æœ‰è‡ªå·±çš„å†…éƒ¨ç½‘ç»œå’Œ ip åœ°å€ï¼ˆä½¿ç”¨ <code>docker inspect</code> å¯ä»¥è·å–æ‰€æœ‰çš„å˜é‡ï¼ŒDocker è¿˜å¯ä»¥æœ‰ä¸€ä¸ªå¯å˜çš„ç½‘ç»œé…ç½®ã€‚ï¼‰</li>
<li><code>-p</code> æ ‡è®°å¯ä»¥å¤šæ¬¡ä½¿ç”¨æ¥ç»‘å®šå¤šä¸ªç«¯å£</li>
</ul>
<p>ä¾‹å¦‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -d \</span><br><span class="line">    -p 5000:5000 \</span><br><span class="line">    -p 3000:80 \</span><br><span class="line">    training/webapp \</span><br><span class="line">    python app.py</span><br></pre></td></tr></table></figure>
<h2 id="å®¹å™¨äº’è”"><a href="#å®¹å™¨äº’è”" class="headerlink" title="å®¹å™¨äº’è”"></a>å®¹å™¨äº’è”</h2><h3 id="æ–°å»ºç½‘ç»œ"><a href="#æ–°å»ºç½‘ç»œ" class="headerlink" title="æ–°å»ºç½‘ç»œ"></a>æ–°å»ºç½‘ç»œ</h3><p>ä¸‹é¢å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ Docker ç½‘ç»œã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker network create -d bridge my-net</span><br><span class="line">cea6b6e901d97a319c537895587df6a1256ccc18fc1e6faccfa911ec843e2e64</span><br></pre></td></tr></table></figure>
<p><code>-d</code> å‚æ•°æŒ‡å®š Docker ç½‘ç»œç±»å‹ï¼Œæœ‰ <code>bridge</code> <code>overlay</code>ã€‚å…¶ä¸­ <code>overlay</code> ç½‘ç»œç±»å‹ç”¨äº Swarm modeï¼Œå±äºé«˜çº§ç”¨æ³•äº†ã€‚å…¥é—¨ç« èŠ‚åˆ™ä¸ä»‹ç»äº†ã€‚</p>
<h3 id="è¿æ¥å®¹å™¨"><a href="#è¿æ¥å®¹å™¨" class="headerlink" title="è¿æ¥å®¹å™¨"></a>è¿æ¥å®¹å™¨</h3><p>è¿è¡Œä¸€ä¸ªå®¹å™¨å¹¶è¿æ¥åˆ°æ–°å»ºçš„ <code>my-net</code> ç½‘ç»œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -i -t --rm --name busybox1 --network my-net busybox sh</span><br></pre></td></tr></table></figure>
<p>æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œå†è¿è¡Œä¸€ä¸ªå®¹å™¨å¹¶åŠ å…¥åˆ° <code>my-net</code> ç½‘ç»œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -i -t --rm --name busybox2 --network my-net busybox sh</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Clean up (â€“rm) æŒ‡åœ¨å®¹å™¨è¿è¡Œå®Œä¹‹åè‡ªåŠ¨æ¸…é™¤ï¼Œ<em>æ³¨æ„ï¼šâ€“rm å’Œ -dä¸èƒ½å…±ç”¨ï¼</em></p>
</blockquote>
<p>å†æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯æŸ¥çœ‹å®¹å™¨ä¿¡æ¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker container ls       </span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">4f37d2e62181        busybox             <span class="string">"sh"</span>                48 seconds ago      Up 47 seconds                           busybox2</span><br><span class="line">98b27738599c        busybox             <span class="string">"sh"</span>                2 minutes ago       Up About a minute                       busybox1</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢é€šè¿‡ <code>ping</code> æ¥è¯æ˜ <code>busybox1</code> å®¹å™¨å’Œ <code>busybox2</code> å®¹å™¨å»ºç«‹äº†äº’è”å…³ç³»ã€‚</p>
<p>åœ¨ <code>busybox1</code> å®¹å™¨è¾“å…¥ä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/ <span class="comment"># ping busybox2</span></span><br><span class="line">PING busybox2 (172.18.0.3): 56 data bytes</span><br><span class="line">64 bytes from 172.18.0.3: seq=0 ttl=64 time=0.115 ms</span><br><span class="line">64 bytes from 172.18.0.3: seq=1 ttl=64 time=0.138 ms</span><br><span class="line">64 bytes from 172.18.0.3: seq=2 ttl=64 time=0.139 ms</span><br><span class="line">64 bytes from 172.18.0.3: seq=3 ttl=64 time=0.137 ms</span><br><span class="line">64 bytes from 172.18.0.3: seq=4 ttl=64 time=0.138 ms</span><br><span class="line">64 bytes from 172.18.0.3: seq=5 ttl=64 time=0.138 ms</span><br><span class="line">64 bytes from 172.18.0.3: seq=6 ttl=64 time=0.133 ms</span><br></pre></td></tr></table></figure>
<p>ç”¨ ping æ¥æµ‹è¯•è¿æ¥ <code>busybox2</code> å®¹å™¨ï¼Œå®ƒä¼šè§£ææˆ <code>172.18.0.3</code>ã€‚</p>
<p>åŒç†åœ¨ <code>busybox2</code> å®¹å™¨æ‰§è¡Œ <code>ping busybox1</code>ï¼Œä¹Ÿä¼šæˆåŠŸè¿æ¥åˆ°ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/ <span class="comment"># ping busybox1</span></span><br><span class="line">PING busybox1 (172.18.0.2): 56 data bytes</span><br><span class="line">64 bytes from 172.18.0.2: seq=0 ttl=64 time=0.091 ms</span><br><span class="line">64 bytes from 172.18.0.2: seq=1 ttl=64 time=0.137 ms</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œ<code>busybox1</code> å®¹å™¨å’Œ <code>busybox2</code> å®¹å™¨å»ºç«‹äº†äº’è”å…³ç³»ã€‚</p>
<blockquote>
<p>å¦‚æœæœ‰å¤šä¸ªå®¹å™¨éœ€è¦äº’ç›¸è¿æ¥ï¼Œæ¨èä½¿ç”¨Docker Composeã€‚</p>
</blockquote>
<blockquote>
<p><code>BusyBox</code> æ˜¯ä¸€ä¸ªé›†æˆäº†ä¸€ç™¾å¤šä¸ªæœ€å¸¸ç”¨ Linux å‘½ä»¤å’Œå·¥å…·ï¼ˆå¦‚ <code>cat</code>ã€<code>echo</code>ã€<code>grep</code>ã€<code>mount</code>ã€<code>telnet</code> ç­‰ï¼‰çš„ç²¾ç®€å·¥å…·ç®±ï¼Œå®ƒåªéœ€è¦å‡  MB çš„å¤§å°ï¼Œå¾ˆæ–¹ä¾¿è¿›è¡Œå„ç§å¿«é€ŸéªŒè¯ï¼Œè¢«èª‰ä¸ºâ€œLinux ç³»ç»Ÿçš„ç‘å£«å†›åˆ€â€ã€‚</p>
<p><code>BusyBox</code> å¯è¿è¡Œäºå¤šæ¬¾ <code>POSIX</code> ç¯å¢ƒçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œå¦‚ <code>Linux</code>ï¼ˆåŒ…æ‹¬ <code>Android</code>ï¼‰ã€<code>Hurd</code>ã€<code>FreeBSD</code> ç­‰ã€‚</p>
</blockquote>
<h2 id="é…ç½®DNS"><a href="#é…ç½®DNS" class="headerlink" title="é…ç½®DNS"></a>é…ç½®DNS</h2><p>Docker åˆ©ç”¨è™šæ‹Ÿæ–‡ä»¶æ¥æŒ‚è½½å®¹å™¨çš„ 3 ä¸ªç›¸å…³é…ç½®æ–‡ä»¶ã€‚</p>
<p>åœ¨å®¹å™¨ä¸­ä½¿ç”¨ <code>mount</code> å‘½ä»¤å¯ä»¥çœ‹åˆ°æŒ‚è½½ä¿¡æ¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mount</span><br><span class="line">/dev/disk/by-uuid/1fec...ebdf on /etc/hostname <span class="built_in">type</span> ext4 ...</span><br><span class="line">/dev/disk/by-uuid/1fec...ebdf on /etc/hosts <span class="built_in">type</span> ext4 ...</span><br><span class="line">tmpfs on /etc/resolv.conf <span class="built_in">type</span> tmpfs ...</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æœºåˆ¶å¯ä»¥è®©å®¿ä¸»ä¸»æœº DNS ä¿¡æ¯å‘ç”Ÿæ›´æ–°åï¼Œæ‰€æœ‰ Docker å®¹å™¨çš„ DNS é…ç½®é€šè¿‡ <code>/etc/resolv.conf</code> æ–‡ä»¶ç«‹åˆ»å¾—åˆ°æ›´æ–°ã€‚</p>
<p>é…ç½®å…¨éƒ¨å®¹å™¨çš„ DNS ï¼Œä¹Ÿå¯ä»¥åœ¨ <code>/etc/docker/daemon.json</code> æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹æ¥è®¾ç½®ã€‚</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"dns"</span> : [</span><br><span class="line">    <span class="string">"114.114.114.114"</span>,</span><br><span class="line">    <span class="string">"8.8.8.8"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·æ¯æ¬¡å¯åŠ¨çš„å®¹å™¨ DNS è‡ªåŠ¨é…ç½®ä¸º <code>114.114.114.114</code> å’Œ <code>8.8.8.8</code>ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è¯æ˜å…¶å·²ç»ç”Ÿæ•ˆã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run -it --rm ubuntu:18.04  cat etc/resolv.conf</span><br><span class="line">nameserver 114.114.114.114</span><br><span class="line">nameserver 8.8.8.8</span><br></pre></td></tr></table></figure>
<p>å¦‚æœç”¨æˆ·æƒ³è¦æ‰‹åŠ¨æŒ‡å®šå®¹å™¨çš„é…ç½®ï¼Œå¯ä»¥åœ¨ä½¿ç”¨ <code>docker run</code> å‘½ä»¤å¯åŠ¨å®¹å™¨æ—¶åŠ å…¥å¦‚ä¸‹å‚æ•°ï¼š</p>
<blockquote>
<p><code>-h HOSTNAME</code> æˆ–è€… <code>--hostname=HOSTNAME</code> è®¾å®šå®¹å™¨çš„ä¸»æœºåï¼Œå®ƒä¼šè¢«å†™åˆ°å®¹å™¨å†…çš„ <code>/etc/hostname</code> å’Œ <code>/etc/hosts</code>ã€‚ä½†å®ƒåœ¨å®¹å™¨å¤–éƒ¨çœ‹ä¸åˆ°ï¼Œæ—¢ä¸ä¼šåœ¨ <code>docker container ls</code> ä¸­æ˜¾ç¤ºï¼Œä¹Ÿä¸ä¼šåœ¨å…¶ä»–çš„å®¹å™¨çš„ <code>/etc/hosts</code> çœ‹åˆ°ã€‚</p>
<p><code>--dns=IP_ADDRESS</code> æ·»åŠ  DNS æœåŠ¡å™¨åˆ°å®¹å™¨çš„ <code>/etc/resolv.conf</code> ä¸­ï¼Œè®©å®¹å™¨ç”¨è¿™ä¸ªæœåŠ¡å™¨æ¥è§£ææ‰€æœ‰ä¸åœ¨ <code>/etc/hosts</code> ä¸­çš„ä¸»æœºåã€‚</p>
<p><code>--dns-search=DOMAIN</code> è®¾å®šå®¹å™¨çš„æœç´¢åŸŸï¼Œå½“è®¾å®šæœç´¢åŸŸä¸º <code>.example.com</code> æ—¶ï¼Œåœ¨æœç´¢ä¸€ä¸ªåä¸º host çš„ä¸»æœºæ—¶ï¼ŒDNS ä¸ä»…æœç´¢ hostï¼Œè¿˜ä¼šæœç´¢ <code>host.example.com</code>ã€‚</p>
<p>æ³¨æ„ï¼šå¦‚æœåœ¨å®¹å™¨å¯åŠ¨æ—¶æ²¡æœ‰æŒ‡å®šæœ€åä¸¤ä¸ªå‚æ•°ï¼ŒDocker ä¼šé»˜è®¤ç”¨ä¸»æœºä¸Šçš„<code>/etc/resolv.conf</code> æ¥é…ç½®å®¹å™¨ã€‚</p>
</blockquote>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p>Docker å®˜ç½‘ï¼š<a href="https://www.docker.com/" target="_blank" rel="noopener">https://www.docker.com</a></p>
<p>Github Docker æºç ï¼š<a href="https://github.com/docker/docker-ce" target="_blank" rel="noopener">https://github.com/docker/docker-ce</a></p>
<p>Dockerå‘½ä»¤å¤§å…¨ï¼š<a href="https://www.runoob.com/docker/docker-command-manual.html" target="_blank" rel="noopener">https://www.runoob.com/docker/docker-command-manual.html</a></p>
<p>æœ¬æ–‡ç« æ‘˜æŠ„äºï¼š<a href="https://yeasy.gitbooks.io/docker_practice/content/" target="_blank" rel="noopener">https://yeasy.gitbooks.io/docker_practice/content/</a></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dockerå…¥é—¨ï¼ˆä¸€ï¼‰â€”â€”åŸºæœ¬æ¦‚å¿µä¸å®‰è£…</title>
    <url>/2019/11/27/Docker%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Dockerç®€ä»‹"><a href="#Dockerç®€ä»‹" class="headerlink" title="Dockerç®€ä»‹"></a>Dockerç®€ä»‹</h1><p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼ŒåŸºäº <a href="https://www.runoob.com/go/go-tutorial.html" target="_blank" rel="noopener">Go è¯­è¨€</a> å¹¶éµä» Apache2.0 åè®®å¼€æºã€‚</p>
<p>Docker å¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚</p>
<p>å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ï¼ˆç±»ä¼¼ iPhone çš„ appï¼‰,æ›´é‡è¦çš„æ˜¯å®¹å™¨æ€§èƒ½å¼€é”€æä½ã€‚</p>
<p>Docker ä» 17.03 ç‰ˆæœ¬ä¹‹ååˆ†ä¸º CEï¼ˆCommunity Edition: ç¤¾åŒºç‰ˆï¼‰ å’Œ EEï¼ˆEnterprise Edition: ä¼ä¸šç‰ˆï¼‰</p>
<a id="more"></a>
<p>Docker ä½¿ç”¨ <code>Google</code> å…¬å¸æ¨å‡ºçš„ <a href="https://golang.org/" target="_blank" rel="noopener">Go è¯­è¨€</a> è¿›è¡Œå¼€å‘å®ç°ï¼ŒåŸºäº <code>Linux</code> å†…æ ¸çš„ <a href="https://zh.wikipedia.org/wiki/Cgroups" target="_blank" rel="noopener">cgroup</a>ï¼Œ<a href="https://en.wikipedia.org/wiki/Linux_namespaces" target="_blank" rel="noopener">namespace</a>ï¼Œä»¥åŠ <a href="https://en.wikipedia.org/wiki/Aufs" target="_blank" rel="noopener">AUFS</a> ç±»çš„ <a href="https://en.wikipedia.org/wiki/Union_mount" target="_blank" rel="noopener">Union FS</a> ç­‰æŠ€æœ¯ï¼Œå¯¹è¿›ç¨‹è¿›è¡Œå°è£…éš”ç¦»ï¼Œå±äº <a href="https://en.wikipedia.org/wiki/Operating-system-level_virtualization" target="_blank" rel="noopener">æ“ä½œç³»ç»Ÿå±‚é¢çš„è™šæ‹ŸåŒ–æŠ€æœ¯</a>ã€‚ç”±äºéš”ç¦»çš„è¿›ç¨‹ç‹¬ç«‹äºå®¿ä¸»å’Œå…¶å®ƒçš„éš”ç¦»çš„è¿›ç¨‹ï¼Œå› æ­¤ä¹Ÿç§°å…¶ä¸ºå®¹å™¨ã€‚æœ€åˆå®ç°æ˜¯åŸºäº <a href="https://linuxcontainers.org/lxc/introduction/" target="_blank" rel="noopener">LXC</a>ï¼Œä» 0.7 ç‰ˆæœ¬ä»¥åå¼€å§‹å»é™¤ <code>LXC</code>ï¼Œè½¬è€Œä½¿ç”¨è‡ªè¡Œå¼€å‘çš„ <a href="https://github.com/docker/libcontainer" target="_blank" rel="noopener">libcontainer</a>ï¼Œä» 1.11 å¼€å§‹ï¼Œåˆ™è¿›ä¸€æ­¥æ¼”è¿›ä¸ºä½¿ç”¨ <a href="https://github.com/opencontainers/runc" target="_blank" rel="noopener">runC</a> å’Œ <a href="https://github.com/containerd/containerd" target="_blank" rel="noopener">containerd</a>ã€‚</p>
<p><img src="docker-on-linux.png" alt></p>
<blockquote>
<p><code>runc</code> æ˜¯ä¸€ä¸ª Linux å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºæ ¹æ® <a href="https://github.com/opencontainers/runtime-spec" target="_blank" rel="noopener">OCIå®¹å™¨è¿è¡Œæ—¶è§„èŒƒ</a> åˆ›å»ºå’Œè¿è¡Œå®¹å™¨ã€‚</p>
<p><code>containerd</code> æ˜¯ä¸€ä¸ªå®ˆæŠ¤ç¨‹åºï¼Œå®ƒç®¡ç†å®¹å™¨ç”Ÿå‘½å‘¨æœŸï¼Œæä¾›äº†åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œå®¹å™¨å’Œç®¡ç†é•œåƒçš„æœ€å°åŠŸèƒ½é›†ã€‚</p>
</blockquote>
<p>Dockeråœ¨å®¹å™¨çš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†è¿›ä¸€æ­¥çš„å°è£…ï¼Œä»æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œäº’è”åˆ°è¿›ç¨‹éš”ç¦»ç­‰ç­‰ï¼Œæå¤§çš„ç®€åŒ–äº†å®¹å™¨çš„åˆ›å»ºå’Œç»´æŠ¤ã€‚ä½¿å¾— <code>Docker</code> æŠ€æœ¯æ¯”è™šæ‹ŸæœºæŠ€æœ¯æ›´ä¸ºè½»ä¾¿ã€å¿«æ·ã€‚</p>
<p>ä¸‹é¢çš„å›¾ç‰‡æ¯”è¾ƒäº† <strong>Docker</strong> å’Œä¼ ç»Ÿè™šæ‹ŸåŒ–æ–¹å¼çš„ä¸åŒä¹‹å¤„ã€‚ä¼ ç»Ÿè™šæ‹ŸæœºæŠ€æœ¯æ˜¯è™šæ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶åï¼Œåœ¨å…¶ä¸Šè¿è¡Œä¸€ä¸ªå®Œæ•´æ“ä½œç³»ç»Ÿï¼Œåœ¨è¯¥ç³»ç»Ÿä¸Šå†è¿è¡Œæ‰€éœ€åº”ç”¨è¿›ç¨‹ï¼›è€Œå®¹å™¨å†…çš„åº”ç”¨è¿›ç¨‹ç›´æ¥è¿è¡Œäºå®¿ä¸»çš„å†…æ ¸ï¼Œå®¹å™¨å†…æ²¡æœ‰è‡ªå·±çš„å†…æ ¸ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰è¿›è¡Œç¡¬ä»¶è™šæ‹Ÿã€‚å› æ­¤å®¹å™¨è¦æ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºæ›´ä¸ºè½»ä¾¿ã€‚</p>
<p><img src="virtualization.png" alt></p>
<p><img src="docker.png" alt></p>
<h1 id="Dockerä¼˜ç‚¹"><a href="#Dockerä¼˜ç‚¹" class="headerlink" title="Dockerä¼˜ç‚¹"></a>Dockerä¼˜ç‚¹</h1><p> Docker æ˜¯ä¸€ä¸ªç”¨äºå¼€å‘ï¼Œäº¤ä»˜å’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å¼€æ”¾å¹³å°ã€‚Docker ä½¿æ‚¨èƒ½å¤Ÿå°†åº”ç”¨ç¨‹åºä¸åŸºç¡€æ¶æ„åˆ†å¼€ï¼Œä»è€Œå¯ä»¥å¿«é€Ÿäº¤ä»˜è½¯ä»¶ã€‚å€ŸåŠ© Dockerï¼Œæ‚¨å¯ä»¥ä¸ç®¡ç†åº”ç”¨ç¨‹åºç›¸åŒçš„æ–¹å¼æ¥ç®¡ç†åŸºç¡€æ¶æ„ã€‚é€šè¿‡åˆ©ç”¨ Docker çš„æ–¹æ³•æ¥å¿«é€Ÿäº¤ä»˜ï¼Œæµ‹è¯•å’Œéƒ¨ç½²ä»£ç ï¼Œæ‚¨å¯ä»¥å¤§å¤§å‡å°‘ç¼–å†™ä»£ç å’Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œä»£ç ä¹‹é—´çš„å»¶è¿Ÿã€‚ </p>
<h2 id="å¿«é€Ÿï¼Œä¸€è‡´åœ°äº¤ä»˜æ‚¨çš„åº”ç”¨ç¨‹åº"><a href="#å¿«é€Ÿï¼Œä¸€è‡´åœ°äº¤ä»˜æ‚¨çš„åº”ç”¨ç¨‹åº" class="headerlink" title="å¿«é€Ÿï¼Œä¸€è‡´åœ°äº¤ä»˜æ‚¨çš„åº”ç”¨ç¨‹åº"></a>å¿«é€Ÿï¼Œä¸€è‡´åœ°äº¤ä»˜æ‚¨çš„åº”ç”¨ç¨‹åº</h2><p>Docker å…è®¸å¼€å‘äººå‘˜ä½¿ç”¨æ‚¨æä¾›çš„åº”ç”¨ç¨‹åºæˆ–æœåŠ¡çš„æœ¬åœ°å®¹å™¨åœ¨æ ‡å‡†åŒ–ç¯å¢ƒä¸­å·¥ä½œï¼Œä»è€Œç®€åŒ–äº†å¼€å‘çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>å®¹å™¨éå¸¸é€‚åˆæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ï¼ˆCI / CDï¼‰å·¥ä½œæµç¨‹ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹æ–¹æ¡ˆï¼š</p>
<ul>
<li>æ‚¨çš„å¼€å‘äººå‘˜åœ¨æœ¬åœ°ç¼–å†™ä»£ç ï¼Œå¹¶ä½¿ç”¨ Docker å®¹å™¨ä¸åŒäº‹å…±äº«ä»–ä»¬çš„å·¥ä½œã€‚</li>
<li>ä»–ä»¬ä½¿ç”¨ Docker å°†å…¶åº”ç”¨ç¨‹åºæ¨é€åˆ°æµ‹è¯•ç¯å¢ƒä¸­ï¼Œå¹¶æ‰§è¡Œè‡ªåŠ¨æˆ–æ‰‹åŠ¨æµ‹è¯•ã€‚</li>
<li>å½“å¼€å‘äººå‘˜å‘ç°é”™è¯¯æ—¶ï¼Œä»–ä»¬å¯ä»¥åœ¨å¼€å‘ç¯å¢ƒä¸­å¯¹å…¶è¿›è¡Œä¿®å¤ï¼Œç„¶åå°†å…¶é‡æ–°éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒä¸­ï¼Œä»¥è¿›è¡Œæµ‹è¯•å’ŒéªŒè¯ã€‚</li>
<li>æµ‹è¯•å®Œæˆåï¼Œå°†ä¿®è¡¥ç¨‹åºæ¨é€ç»™ç”Ÿäº§ç¯å¢ƒï¼Œå°±åƒå°†æ›´æ–°çš„é•œåƒæ¨é€åˆ°ç”Ÿäº§ç¯å¢ƒä¸€æ ·ç®€å•ã€‚</li>
</ul>
<h2 id="å“åº”å¼éƒ¨ç½²å’Œæ‰©å±•"><a href="#å“åº”å¼éƒ¨ç½²å’Œæ‰©å±•" class="headerlink" title="å“åº”å¼éƒ¨ç½²å’Œæ‰©å±•"></a>å“åº”å¼éƒ¨ç½²å’Œæ‰©å±•</h2><p>Docker æ˜¯åŸºäºå®¹å™¨çš„å¹³å°ï¼Œå…è®¸é«˜åº¦å¯ç§»æ¤çš„å·¥ä½œè´Ÿè½½ã€‚Docker å®¹å™¨å¯ä»¥åœ¨å¼€å‘äººå‘˜çš„æœ¬æœºä¸Šï¼Œæ•°æ®ä¸­å¿ƒçš„ç‰©ç†æˆ–è™šæ‹Ÿæœºä¸Šï¼Œäº‘æœåŠ¡ä¸Šæˆ–æ··åˆç¯å¢ƒä¸­è¿è¡Œã€‚</p>
<p>Docker çš„å¯ç§»æ¤æ€§å’Œè½»é‡çº§çš„ç‰¹æ€§ï¼Œè¿˜å¯ä»¥ä½¿æ‚¨è½»æ¾åœ°å®ŒæˆåŠ¨æ€ç®¡ç†çš„å·¥ä½œè´Ÿæ‹…ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡éœ€æ±‚æŒ‡ç¤ºï¼Œå®æ—¶æ‰©å±•æˆ–æ‹†é™¤åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ã€‚</p>
<h2 id="æ›´è½»æ¾çš„ç»´æŠ¤å’Œæ‰©å±•"><a href="#æ›´è½»æ¾çš„ç»´æŠ¤å’Œæ‰©å±•" class="headerlink" title="æ›´è½»æ¾çš„ç»´æŠ¤å’Œæ‰©å±•"></a>æ›´è½»æ¾çš„ç»´æŠ¤å’Œæ‰©å±•</h2><p> Docker ä½¿ç”¨çš„åˆ†å±‚å­˜å‚¨ä»¥åŠé•œåƒçš„æŠ€æœ¯ï¼Œä½¿å¾—åº”ç”¨é‡å¤éƒ¨åˆ†çš„å¤ç”¨æ›´ä¸ºå®¹æ˜“ï¼Œä¹Ÿä½¿å¾—åº”ç”¨çš„ç»´æŠ¤æ›´æ–°æ›´åŠ ç®€å•ï¼ŒåŸºäºåŸºç¡€é•œåƒè¿›ä¸€æ­¥æ‰©å±•é•œåƒä¹Ÿå˜å¾—éå¸¸ç®€å•ã€‚æ­¤å¤–ï¼Œ<code>Docker</code> å›¢é˜ŸåŒå„ä¸ªå¼€æºé¡¹ç›®å›¢é˜Ÿä¸€èµ·ç»´æŠ¤äº†ä¸€å¤§æ‰¹é«˜è´¨é‡çš„ <a href="https://hub.docker.com/search/?type=image&amp;image_filter=official" target="_blank" rel="noopener">å®˜æ–¹é•œåƒ</a>ï¼Œæ—¢å¯ä»¥ç›´æ¥åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Œåˆå¯ä»¥ä½œä¸ºåŸºç¡€è¿›ä¸€æ­¥å®šåˆ¶ï¼Œå¤§å¤§çš„é™ä½äº†åº”ç”¨æœåŠ¡çš„é•œåƒåˆ¶ä½œæˆæœ¬ã€‚ </p>
<h2 id="åœ¨åŒä¸€ç¡¬ä»¶ä¸Šè¿è¡Œæ›´å¤šå·¥ä½œè´Ÿè½½"><a href="#åœ¨åŒä¸€ç¡¬ä»¶ä¸Šè¿è¡Œæ›´å¤šå·¥ä½œè´Ÿè½½" class="headerlink" title="åœ¨åŒä¸€ç¡¬ä»¶ä¸Šè¿è¡Œæ›´å¤šå·¥ä½œè´Ÿè½½"></a>åœ¨åŒä¸€ç¡¬ä»¶ä¸Šè¿è¡Œæ›´å¤šå·¥ä½œè´Ÿè½½</h2><p> Docker è½»å·§å¿«é€Ÿã€‚å®ƒä¸ºåŸºäºè™šæ‹Ÿæœºç®¡ç†ç¨‹åºçš„è™šæ‹Ÿæœºæä¾›äº†å¯è¡Œã€ç»æµã€é«˜æ•ˆçš„æ›¿ä»£æ–¹æ¡ˆï¼Œå› æ­¤æ‚¨å¯ä»¥åˆ©ç”¨æ›´å¤šçš„è®¡ç®—èƒ½åŠ›æ¥å®ç°ä¸šåŠ¡ç›®æ ‡ã€‚Docker éå¸¸é€‚åˆäºé«˜å¯†åº¦ç¯å¢ƒä»¥åŠä¸­å°å‹éƒ¨ç½²ï¼Œè€Œæ‚¨å¯ä»¥ç”¨æ›´å°‘çš„èµ„æºåšæ›´å¤šçš„äº‹æƒ…ã€‚ </p>
<h2 id="å¯¹æ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºæ€»ç»“"><a href="#å¯¹æ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºæ€»ç»“" class="headerlink" title="å¯¹æ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºæ€»ç»“"></a>å¯¹æ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºæ€»ç»“</h2><table>
<thead>
<tr>
<th style="text-align:left">ç‰¹æ€§</th>
<th style="text-align:left">å®¹å™¨</th>
<th style="text-align:left">è™šæ‹Ÿæœº</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">å¯åŠ¨</td>
<td style="text-align:left">ç§’çº§</td>
<td style="text-align:left">åˆ†é’Ÿçº§</td>
</tr>
<tr>
<td style="text-align:left">ç¡¬ç›˜ä½¿ç”¨</td>
<td style="text-align:left">ä¸€èˆ¬ä¸º <code>MB</code></td>
<td style="text-align:left">ä¸€èˆ¬ä¸º <code>GB</code></td>
</tr>
<tr>
<td style="text-align:left">æ€§èƒ½</td>
<td style="text-align:left">æ¥è¿‘åŸç”Ÿ</td>
<td style="text-align:left">å¼±äº</td>
</tr>
<tr>
<td style="text-align:left">ç³»ç»Ÿæ”¯æŒé‡</td>
<td style="text-align:left">å•æœºæ”¯æŒä¸Šåƒä¸ªå®¹å™¨</td>
<td style="text-align:left">ä¸€èˆ¬å‡ åä¸ª</td>
</tr>
</tbody>
</table>
<h1 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h1><p>Docker åŒ…æ‹¬ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µ</p>
<ul>
<li>é•œåƒï¼ˆ<code>Image</code>ï¼‰</li>
<li>å®¹å™¨ï¼ˆ<code>Container</code>ï¼‰</li>
<li>ä»“åº“ï¼ˆ<code>Repository</code>ï¼‰</li>
</ul>
<h2 id="é•œåƒ"><a href="#é•œåƒ" class="headerlink" title="é•œåƒ"></a>é•œåƒ</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ“ä½œç³»ç»Ÿåˆ†ä¸ºå†…æ ¸å’Œç”¨æˆ·ç©ºé—´ã€‚å¯¹äº Linux è€Œè¨€ï¼Œå†…æ ¸å¯åŠ¨åï¼Œä¼šæŒ‚è½½ <code>root</code> æ–‡ä»¶ç³»ç»Ÿä¸ºå…¶æä¾›ç”¨æˆ·ç©ºé—´æ”¯æŒã€‚è€Œ Docker é•œåƒï¼ˆImageï¼‰ï¼Œå°±ç›¸å½“äºæ˜¯ä¸€ä¸ª <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ <code>ubuntu:18.04</code> å°±åŒ…å«äº†å®Œæ•´çš„ä¸€å¥— Ubuntu 18.04 æœ€å°ç³»ç»Ÿçš„ <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<p>Docker é•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚</p>
<h3 id="åˆ†å±‚å­˜å‚¨"><a href="#åˆ†å±‚å­˜å‚¨" class="headerlink" title="åˆ†å±‚å­˜å‚¨"></a>åˆ†å±‚å­˜å‚¨</h3><p>å› ä¸ºé•œåƒåŒ…å«æ“ä½œç³»ç»Ÿå®Œæ•´çš„ <code>root</code> æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶ä½“ç§¯å¾€å¾€æ˜¯åºå¤§çš„ï¼Œå› æ­¤åœ¨ Docker è®¾è®¡æ—¶ï¼Œå°±å……åˆ†åˆ©ç”¨ <a href="https://en.wikipedia.org/wiki/Union_mount" target="_blank" rel="noopener">Union FS</a> çš„æŠ€æœ¯ï¼Œå°†å…¶è®¾è®¡ä¸ºåˆ†å±‚å­˜å‚¨çš„æ¶æ„ã€‚æ‰€ä»¥ä¸¥æ ¼æ¥è¯´ï¼Œé•œåƒå¹¶éæ˜¯åƒä¸€ä¸ª ISO é‚£æ ·çš„æ‰“åŒ…æ–‡ä»¶ï¼Œé•œåƒåªæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„æ¦‚å¿µï¼Œå…¶å®é™…ä½“ç°å¹¶éç”±ä¸€ä¸ªæ–‡ä»¶ç»„æˆï¼Œè€Œæ˜¯ç”±ä¸€ç»„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œæˆ–è€…è¯´ï¼Œç”±å¤šå±‚æ–‡ä»¶ç³»ç»Ÿè”åˆç»„æˆã€‚</p>
<p>é•œåƒæ„å»ºæ—¶ï¼Œä¼šä¸€å±‚å±‚æ„å»ºï¼Œå‰ä¸€å±‚æ˜¯åä¸€å±‚çš„åŸºç¡€ã€‚æ¯ä¸€å±‚æ„å»ºå®Œå°±ä¸ä¼šå†å‘ç”Ÿæ”¹å˜ï¼Œåä¸€å±‚ä¸Šçš„ä»»ä½•æ”¹å˜åªå‘ç”Ÿåœ¨è‡ªå·±è¿™ä¸€å±‚ã€‚æ¯”å¦‚ï¼Œåˆ é™¤å‰ä¸€å±‚æ–‡ä»¶çš„æ“ä½œï¼Œå®é™…ä¸æ˜¯çœŸçš„åˆ é™¤å‰ä¸€å±‚çš„æ–‡ä»¶ï¼Œè€Œæ˜¯ä»…åœ¨å½“å‰å±‚æ ‡è®°ä¸ºè¯¥æ–‡ä»¶å·²åˆ é™¤ã€‚åœ¨æœ€ç»ˆå®¹å™¨è¿è¡Œçš„æ—¶å€™ï¼Œè™½ç„¶ä¸ä¼šçœ‹åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯å®é™…ä¸Šè¯¥æ–‡ä»¶ä¼šä¸€ç›´è·Ÿéšé•œåƒã€‚å› æ­¤ï¼Œåœ¨æ„å»ºé•œåƒçš„æ—¶å€™ï¼Œéœ€è¦é¢å¤–å°å¿ƒï¼Œæ¯ä¸€å±‚å°½é‡åªåŒ…å«è¯¥å±‚éœ€è¦æ·»åŠ çš„ä¸œè¥¿ï¼Œä»»ä½•é¢å¤–çš„ä¸œè¥¿åº”è¯¥åœ¨è¯¥å±‚æ„å»ºç»“æŸå‰æ¸…ç†æ‰ã€‚</p>
<p>åˆ†å±‚å­˜å‚¨çš„ç‰¹å¾è¿˜ä½¿å¾—é•œåƒçš„å¤ç”¨ã€å®šåˆ¶å˜çš„æ›´ä¸ºå®¹æ˜“ã€‚ç”šè‡³å¯ä»¥ç”¨ä¹‹å‰æ„å»ºå¥½çš„é•œåƒä½œä¸ºåŸºç¡€å±‚ï¼Œç„¶åè¿›ä¸€æ­¥æ·»åŠ æ–°çš„å±‚ï¼Œä»¥å®šåˆ¶è‡ªå·±æ‰€éœ€çš„å†…å®¹ï¼Œæ„å»ºæ–°çš„é•œåƒã€‚</p>
<p>å…³äºé•œåƒæ„å»ºï¼Œå°†ä¼šåœ¨åç»­ç›¸å…³ç« èŠ‚ä¸­åšè¿›ä¸€æ­¥çš„è®²è§£ã€‚</p>
<h2 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h2><p>é•œåƒï¼ˆ<code>Image</code>ï¼‰å’Œå®¹å™¨ï¼ˆ<code>Container</code>ï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ <code>ç±»</code> å’Œ <code>å®ä¾‹</code> ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</p>
<p>å®¹å™¨çš„å®è´¨æ˜¯è¿›ç¨‹ï¼Œä½†ä¸ç›´æ¥åœ¨å®¿ä¸»æ‰§è¡Œçš„è¿›ç¨‹ä¸åŒï¼Œå®¹å™¨è¿›ç¨‹è¿è¡Œäºå±äºè‡ªå·±çš„ç‹¬ç«‹çš„ <a href="https://en.wikipedia.org/wiki/Linux_namespaces" target="_blank" rel="noopener">å‘½åç©ºé—´</a>ã€‚å› æ­¤å®¹å™¨å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„ <code>root</code> æ–‡ä»¶ç³»ç»Ÿã€è‡ªå·±çš„ç½‘ç»œé…ç½®ã€è‡ªå·±çš„è¿›ç¨‹ç©ºé—´ï¼Œç”šè‡³è‡ªå·±çš„ç”¨æˆ· ID ç©ºé—´ã€‚å®¹å™¨å†…çš„è¿›ç¨‹æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒé‡Œï¼Œä½¿ç”¨èµ·æ¥ï¼Œå°±å¥½åƒæ˜¯åœ¨ä¸€ä¸ªç‹¬ç«‹äºå®¿ä¸»çš„ç³»ç»Ÿä¸‹æ“ä½œä¸€æ ·ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—å®¹å™¨å°è£…çš„åº”ç”¨æ¯”ç›´æ¥åœ¨å®¿ä¸»è¿è¡Œæ›´åŠ å®‰å…¨ã€‚ä¹Ÿå› ä¸ºè¿™ç§éš”ç¦»çš„ç‰¹æ€§ï¼Œå¾ˆå¤šäººåˆå­¦ Docker æ—¶å¸¸å¸¸ä¼šæ··æ·†å®¹å™¨å’Œè™šæ‹Ÿæœºã€‚</p>
<p>å‰é¢è®²è¿‡é•œåƒä½¿ç”¨çš„æ˜¯åˆ†å±‚å­˜å‚¨ï¼Œå®¹å™¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æ¯ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶ï¼Œæ˜¯ä»¥é•œåƒä¸ºåŸºç¡€å±‚ï¼Œåœ¨å…¶ä¸Šåˆ›å»ºä¸€ä¸ªå½“å‰å®¹å™¨çš„å­˜å‚¨å±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç§°è¿™ä¸ªä¸ºå®¹å™¨è¿è¡Œæ—¶è¯»å†™è€Œå‡†å¤‡çš„å­˜å‚¨å±‚ä¸º <strong>å®¹å™¨å­˜å‚¨å±‚</strong>ã€‚</p>
<p>å®¹å™¨å­˜å‚¨å±‚çš„ç”Ÿå­˜å‘¨æœŸå’Œå®¹å™¨ä¸€æ ·ï¼Œå®¹å™¨æ¶ˆäº¡æ—¶ï¼Œå®¹å™¨å­˜å‚¨å±‚ä¹Ÿéšä¹‹æ¶ˆäº¡ã€‚å› æ­¤ï¼Œä»»ä½•ä¿å­˜äºå®¹å™¨å­˜å‚¨å±‚çš„ä¿¡æ¯éƒ½ä¼šéšå®¹å™¨åˆ é™¤è€Œä¸¢å¤±ã€‚</p>
<p>æŒ‰ç…§ Docker æœ€ä½³å®è·µçš„è¦æ±‚ï¼Œå®¹å™¨ä¸åº”è¯¥å‘å…¶å­˜å‚¨å±‚å†…å†™å…¥ä»»ä½•æ•°æ®ï¼Œå®¹å™¨å­˜å‚¨å±‚è¦ä¿æŒæ— çŠ¶æ€åŒ–ã€‚æ‰€æœ‰çš„æ–‡ä»¶å†™å…¥æ“ä½œï¼Œéƒ½åº”è¯¥ä½¿ç”¨ <strong>æ•°æ®å·ï¼ˆVolumeï¼‰</strong>ã€æˆ–è€…ç»‘å®šå®¿ä¸»ç›®å½•ï¼Œåœ¨è¿™äº›ä½ç½®çš„è¯»å†™ä¼šè·³è¿‡å®¹å™¨å­˜å‚¨å±‚ï¼Œç›´æ¥å¯¹å®¿ä¸»ï¼ˆæˆ–ç½‘ç»œå­˜å‚¨ï¼‰å‘ç”Ÿè¯»å†™ï¼Œå…¶æ€§èƒ½å’Œç¨³å®šæ€§æ›´é«˜ã€‚</p>
<p>æ•°æ®å·çš„ç”Ÿå­˜å‘¨æœŸç‹¬ç«‹äºå®¹å™¨ï¼Œå®¹å™¨æ¶ˆäº¡ï¼Œæ•°æ®å·ä¸ä¼šæ¶ˆäº¡ã€‚å› æ­¤ï¼Œä½¿ç”¨æ•°æ®å·åï¼Œå®¹å™¨åˆ é™¤æˆ–è€…é‡æ–°è¿è¡Œä¹‹åï¼Œæ•°æ®å´ä¸ä¼šä¸¢å¤±ã€‚</p>
<h2 id="ä»“åº“"><a href="#ä»“åº“" class="headerlink" title="ä»“åº“"></a>ä»“åº“</h2><h3 id="Docker-Registry"><a href="#Docker-Registry" class="headerlink" title="Docker Registry"></a>Docker Registry</h3><p>é•œåƒæ„å»ºå®Œæˆåï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„åœ¨å½“å‰å®¿ä¸»æœºä¸Šè¿è¡Œï¼Œä½†æ˜¯ï¼Œå¦‚æœéœ€è¦åœ¨å…¶å®ƒæœåŠ¡å™¨ä¸Šä½¿ç”¨è¿™ä¸ªé•œåƒï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªé›†ä¸­çš„å­˜å‚¨ã€åˆ†å‘é•œåƒçš„æœåŠ¡ï¼Œ<a href="https://yeasy.gitbooks.io/docker_practice/content/repository/registry.html" target="_blank" rel="noopener">Docker Registry</a> å°±æ˜¯è¿™æ ·çš„æœåŠ¡ã€‚</p>
<p>ä¸€ä¸ª <strong>Docker Registry</strong> ä¸­å¯ä»¥åŒ…å«å¤šä¸ª <strong>ä»“åº“</strong>ï¼ˆ<code>Repository</code>ï¼‰ï¼›æ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ª <strong>æ ‡ç­¾</strong>ï¼ˆ<code>Tag</code>ï¼‰ï¼›æ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒã€‚</p>
<p>é€šå¸¸ï¼Œä¸€ä¸ªä»“åº“ä¼šåŒ…å«åŒä¸€ä¸ªè½¯ä»¶ä¸åŒç‰ˆæœ¬çš„é•œåƒï¼Œè€Œæ ‡ç­¾å°±å¸¸ç”¨äºå¯¹åº”è¯¥è½¯ä»¶çš„å„ä¸ªç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>&lt;ä»“åº“å&gt;:&lt;æ ‡ç­¾&gt;</code> çš„æ ¼å¼æ¥æŒ‡å®šå…·ä½“æ˜¯è¿™ä¸ªè½¯ä»¶å“ªä¸ªç‰ˆæœ¬çš„é•œåƒã€‚å¦‚æœä¸ç»™å‡ºæ ‡ç­¾ï¼Œå°†ä»¥ <code>latest</code> ä½œä¸ºé»˜è®¤æ ‡ç­¾ã€‚</p>
<p>ä»¥ <a href="https://hub.docker.com/_/ubuntu" target="_blank" rel="noopener">Ubuntu é•œåƒ</a> ä¸ºä¾‹ï¼Œ<code>ubuntu</code> æ˜¯ä»“åº“çš„åå­—ï¼Œå…¶å†…åŒ…å«æœ‰ä¸åŒçš„ç‰ˆæœ¬æ ‡ç­¾ï¼Œå¦‚ï¼Œ<code>16.04</code>, <code>18.04</code>ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>ubuntu:16.04</code>ï¼Œæˆ–è€… <code>ubuntu:18.04</code> æ¥å…·ä½“æŒ‡å®šæ‰€éœ€å“ªä¸ªç‰ˆæœ¬çš„é•œåƒã€‚å¦‚æœå¿½ç•¥äº†æ ‡ç­¾ï¼Œæ¯”å¦‚ <code>ubuntu</code>ï¼Œé‚£å°†è§†ä¸º <code>ubuntu:latest</code>ã€‚</p>
<p>ä»“åº“åç»å¸¸ä»¥ <em>ä¸¤æ®µå¼è·¯å¾„</em> å½¢å¼å‡ºç°ï¼Œæ¯”å¦‚ <code>jwilder/nginx-proxy</code>ï¼Œå‰è€…å¾€å¾€æ„å‘³ç€ Docker Registry å¤šç”¨æˆ·ç¯å¢ƒä¸‹çš„ç”¨æˆ·åï¼Œåè€…åˆ™å¾€å¾€æ˜¯å¯¹åº”çš„è½¯ä»¶åã€‚ä½†è¿™å¹¶éç»å¯¹ï¼Œå–å†³äºæ‰€ä½¿ç”¨çš„å…·ä½“ Docker Registry çš„è½¯ä»¶æˆ–æœåŠ¡ã€‚</p>
<h3 id="Docker-Registry-å…¬å¼€æœåŠ¡"><a href="#Docker-Registry-å…¬å¼€æœåŠ¡" class="headerlink" title="Docker Registry å…¬å¼€æœåŠ¡"></a>Docker Registry å…¬å¼€æœåŠ¡</h3><p>Docker Registry å…¬å¼€æœåŠ¡æ˜¯å¼€æ”¾ç»™ç”¨æˆ·ä½¿ç”¨ã€å…è®¸ç”¨æˆ·ç®¡ç†é•œåƒçš„ Registry æœåŠ¡ã€‚ä¸€èˆ¬è¿™ç±»å…¬å¼€æœåŠ¡å…è®¸ç”¨æˆ·å…è´¹ä¸Šä¼ ã€ä¸‹è½½å…¬å¼€çš„é•œåƒï¼Œå¹¶å¯èƒ½æä¾›æ”¶è´¹æœåŠ¡ä¾›ç”¨æˆ·ç®¡ç†ç§æœ‰é•œåƒã€‚</p>
<p>æœ€å¸¸ä½¿ç”¨çš„ Registry å…¬å¼€æœåŠ¡æ˜¯å®˜æ–¹çš„ <a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a>ï¼Œè¿™ä¹Ÿæ˜¯é»˜è®¤çš„ Registryï¼Œå¹¶æ‹¥æœ‰å¤§é‡çš„é«˜è´¨é‡çš„å®˜æ–¹é•œåƒã€‚é™¤æ­¤ä»¥å¤–ï¼Œè¿˜æœ‰ <a href="https://coreos.com/" target="_blank" rel="noopener">CoreOS</a> çš„ <a href="https://quay.io/repository/" target="_blank" rel="noopener">Quay.io</a>ï¼ŒCoreOS ç›¸å…³çš„é•œåƒå­˜å‚¨åœ¨è¿™é‡Œï¼›Google çš„ <a href="https://cloud.google.com/container-registry/" target="_blank" rel="noopener">Google Container Registry</a>ï¼Œ<a href="https://kubernetes.io/" target="_blank" rel="noopener">Kubernetes</a> çš„é•œåƒä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªæœåŠ¡ã€‚</p>
<p>ç”±äºæŸäº›åŸå› ï¼Œåœ¨å›½å†…è®¿é—®è¿™äº›æœåŠ¡å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ã€‚å›½å†…çš„ä¸€äº›äº‘æœåŠ¡å•†æä¾›äº†é’ˆå¯¹ Docker Hub çš„é•œåƒæœåŠ¡ï¼ˆ<code>Registry Mirror</code>ï¼‰ï¼Œè¿™äº›é•œåƒæœåŠ¡è¢«ç§°ä¸º<strong>åŠ é€Ÿå™¨</strong>ã€‚å¸¸è§çš„æœ‰ <a href="https://cr.console.aliyun.com/#/accelerator" target="_blank" rel="noopener">é˜¿é‡Œäº‘åŠ é€Ÿå™¨</a>ã€<a href="https://www.daocloud.io/mirror#accelerator-doc" target="_blank" rel="noopener">DaoCloud åŠ é€Ÿå™¨</a> ç­‰ã€‚ä½¿ç”¨åŠ é€Ÿå™¨ä¼šç›´æ¥ä»å›½å†…çš„åœ°å€ä¸‹è½½ Docker Hub çš„é•œåƒï¼Œæ¯”ç›´æ¥ä» Docker Hub ä¸‹è½½é€Ÿåº¦ä¼šæé«˜å¾ˆå¤šã€‚</p>
<p>å›½å†…ä¹Ÿæœ‰ä¸€äº›äº‘æœåŠ¡å•†æä¾›ç±»ä¼¼äº Docker Hub çš„å…¬å¼€æœåŠ¡ã€‚æ¯”å¦‚ <a href="https://hub.tenxcloud.com/" target="_blank" rel="noopener">æ—¶é€Ÿäº‘é•œåƒä»“åº“</a>ã€<a href="https://c.163.com/hub#/m/library/" target="_blank" rel="noopener">ç½‘æ˜“äº‘é•œåƒæœåŠ¡</a>ã€<a href="https://hub.daocloud.io/" target="_blank" rel="noopener">DaoCloud é•œåƒå¸‚åœº</a>ã€<a href="https://cr.console.aliyun.com/" target="_blank" rel="noopener">é˜¿é‡Œäº‘é•œåƒåº“</a> ç­‰ã€‚</p>
<h3 id="ç§æœ‰-Docker-Registry"><a href="#ç§æœ‰-Docker-Registry" class="headerlink" title="ç§æœ‰ Docker Registry"></a>ç§æœ‰ Docker Registry</h3><p>é™¤äº†ä½¿ç”¨å…¬å¼€æœåŠ¡å¤–ï¼Œç”¨æˆ·è¿˜å¯ä»¥åœ¨æœ¬åœ°æ­å»ºç§æœ‰ Docker Registryã€‚Docker å®˜æ–¹æä¾›äº† <a href="https://hub.docker.com/_/registry/" target="_blank" rel="noopener">Docker Registry</a> é•œåƒï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åšä¸ºç§æœ‰ Registry æœåŠ¡ã€‚åœ¨ <a href="https://yeasy.gitbooks.io/docker_practice/content/repository/registry.html" target="_blank" rel="noopener">ç§æœ‰ä»“åº“</a> ä¸€èŠ‚ä¸­ï¼Œä¼šæœ‰è¿›ä¸€æ­¥çš„æ­å»ºç§æœ‰ Registry æœåŠ¡çš„è®²è§£ã€‚</p>
<p>å¼€æºçš„ Docker Registry é•œåƒåªæä¾›äº† <a href="https://docs.docker.com/registry/spec/api/" target="_blank" rel="noopener">Docker Registry API</a> çš„æœåŠ¡ç«¯å®ç°ï¼Œè¶³ä»¥æ”¯æŒ <code>docker</code> å‘½ä»¤ï¼Œä¸å½±å“ä½¿ç”¨ã€‚ä½†ä¸åŒ…å«å›¾å½¢ç•Œé¢ï¼Œä»¥åŠé•œåƒç»´æŠ¤ã€ç”¨æˆ·ç®¡ç†ã€è®¿é—®æ§åˆ¶ç­‰é«˜çº§åŠŸèƒ½ã€‚åœ¨å®˜æ–¹çš„å•†ä¸šåŒ–ç‰ˆæœ¬ <a href="https://docs.docker.com/datacenter/dtr/2.0/" target="_blank" rel="noopener">Docker Trusted Registry</a> ä¸­ï¼Œæä¾›äº†è¿™äº›é«˜çº§åŠŸèƒ½ã€‚</p>
<p>é™¤äº†å®˜æ–¹çš„ Docker Registry å¤–ï¼Œè¿˜æœ‰ç¬¬ä¸‰æ–¹è½¯ä»¶å®ç°äº† Docker Registry APIï¼Œç”šè‡³æä¾›äº†ç”¨æˆ·ç•Œé¢ä»¥åŠä¸€äº›é«˜çº§åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œ<a href="https://github.com/goharbor/harbor" target="_blank" rel="noopener">Harbor</a> å’Œ <a href="https://yeasy.gitbooks.io/docker_practice/content/repository/nexus3_registry.html" target="_blank" rel="noopener">Sonatype Nexus</a>ã€‚</p>
<h1 id="Dockerå®‰è£…"><a href="#Dockerå®‰è£…" class="headerlink" title="Dockerå®‰è£…"></a>Dockerå®‰è£…</h1><p>Docker åˆ†ä¸º CE å’Œ EE ä¸¤å¤§ç‰ˆæœ¬ã€‚CE å³ç¤¾åŒºç‰ˆï¼ˆå…è´¹ï¼Œæ”¯æŒå‘¨æœŸ 7 ä¸ªæœˆï¼‰ï¼ŒEE å³ä¼ä¸šç‰ˆï¼Œå¼ºè°ƒå®‰å…¨ï¼Œä»˜è´¹ä½¿ç”¨ï¼Œæ”¯æŒå‘¨æœŸ 24 ä¸ªæœˆã€‚</p>
<p>Docker CE åˆ†ä¸º <code>stable</code> <code>test</code> å’Œ <code>nightly</code> ä¸‰ä¸ªæ›´æ–°é¢‘é“ã€‚æ¯å…­ä¸ªæœˆå‘å¸ƒä¸€ä¸ª <code>stable</code> ç‰ˆæœ¬ (<code>18.09</code>, <code>19.03</code>, <code>19.09</code>â€¦)ã€‚</p>
<p>å®˜æ–¹ç½‘ç«™ä¸Šæœ‰å„ç§ç¯å¢ƒä¸‹çš„ <a href="https://docs.docker.com/install/" target="_blank" rel="noopener">å®‰è£…æŒ‡å—</a>ï¼Œè¿™é‡Œä¸»è¦ä»‹ç» Docker CE åœ¨ <code>Linux</code> ã€ <code>macOS</code> ä¸Šçš„å®‰è£…ã€‚</p>
<h2 id="Linuxâ€”CentOS"><a href="#Linuxâ€”CentOS" class="headerlink" title="Linuxâ€”CentOS"></a>Linuxâ€”CentOS</h2><h3 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h3><p> Docker CE æ”¯æŒ 64 ä½ç‰ˆæœ¬ CentOS 7ï¼Œå¹¶ä¸”è¦æ±‚å†…æ ¸ç‰ˆæœ¬ä¸ä½äº 3.10ã€‚ CentOS 7 æ»¡è¶³æœ€ä½å†…æ ¸çš„è¦æ±‚ï¼Œä½†ç”±äºå†…æ ¸ç‰ˆæœ¬æ¯”è¾ƒä½ï¼Œéƒ¨åˆ†åŠŸèƒ½ï¼ˆå¦‚ <code>overlay2</code> å­˜å‚¨å±‚é©±åŠ¨ï¼‰æ— æ³•ä½¿ç”¨ï¼Œå¹¶ä¸”éƒ¨åˆ†åŠŸèƒ½å¯èƒ½ä¸å¤ªç¨³å®šã€‚ </p>
<h3 id="å¸è½½æ—§ç‰ˆæœ¬"><a href="#å¸è½½æ—§ç‰ˆæœ¬" class="headerlink" title="å¸è½½æ—§ç‰ˆæœ¬"></a>å¸è½½æ—§ç‰ˆæœ¬</h3><p> æ—§ç‰ˆæœ¬çš„ Docker ç§°ä¸º <code>docker</code> æˆ–è€… <code>docker-engine</code>ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¸è½½æ—§ç‰ˆæœ¬ï¼š </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-selinux \</span><br><span class="line">                  docker-engine-selinux \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨yumå®‰è£…"><a href="#ä½¿ç”¨yumå®‰è£…" class="headerlink" title="ä½¿ç”¨yumå®‰è£…"></a>ä½¿ç”¨yumå®‰è£…</h3><p> æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–åŒ…ï¼š </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo yum install -y yum-utils \</span><br><span class="line">           device-mapper-persistent-data \</span><br><span class="line">           lvm2</span><br></pre></td></tr></table></figure>
<p>é‰´äºå›½å†…ç½‘ç»œé—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨å›½å†…æºï¼Œå®˜æ–¹æºè¯·åœ¨æ³¨é‡Šä¸­æŸ¥çœ‹ã€‚</p>
<p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ·»åŠ  <code>yum</code> è½¯ä»¶æºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://mirrors.ustc.edu.cn/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®˜æ–¹æº</span></span><br><span class="line"><span class="comment"># $ sudo yum-config-manager \</span></span><br><span class="line"><span class="comment">#     --add-repo \</span></span><br><span class="line"><span class="comment">#     https://download.docker.com/linux/centos/docker-ce.repo</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p> å¦‚æœéœ€è¦æµ‹è¯•ç‰ˆæœ¬çš„ Docker CE è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo yum-config-manager --<span class="built_in">enable</span> docker-ce-test</span><br></pre></td></tr></table></figure>
<blockquote>
<p> å¦‚æœéœ€è¦æ¯æ—¥æ„å»ºç‰ˆæœ¬çš„ Docker CE è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo yum-config-manager --<span class="built_in">enable</span> docker-ce-nightly</span><br></pre></td></tr></table></figure>
<h3 id="å®‰è£…Docker-CE"><a href="#å®‰è£…Docker-CE" class="headerlink" title="å®‰è£…Docker CE"></a>å®‰è£…Docker CE</h3><p> æ›´æ–° <code>yum</code> è½¯ä»¶æºç¼“å­˜ï¼Œå¹¶å®‰è£… <code>docker-ce</code>ã€‚ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo yum makecache fast</span><br><span class="line">$ sudo yum install docker-ce</span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…"><a href="#ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…" class="headerlink" title="ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…"></a>ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…</h3><p> åœ¨æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒä¸­ Docker å®˜æ–¹ä¸ºäº†ç®€åŒ–å®‰è£…æµç¨‹ï¼Œæä¾›äº†ä¸€å¥—ä¾¿æ·çš„å®‰è£…è„šæœ¬ï¼ŒCentOS ç³»ç»Ÿä¸Šå¯ä»¥ä½¿ç”¨è¿™å¥—è„šæœ¬å®‰è£…ï¼Œå¦å¤–å¯ä»¥é€šè¿‡ <code>--mirror</code> é€‰é¡¹ä½¿ç”¨å›½å†…æºè¿›è¡Œå®‰è£…ï¼š </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl -fsSL get.docker.com -o get-docker.sh</span><br><span class="line">$ sudo sh get-docker.sh --mirror Aliyun</span><br><span class="line"><span class="comment"># $ sudo sh get-docker.sh --mirror AzureChinaCloud</span></span><br></pre></td></tr></table></figure>
<p> æ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œè„šæœ¬å°±ä¼šè‡ªåŠ¨çš„å°†ä¸€åˆ‡å‡†å¤‡å·¥ä½œåšå¥½ï¼Œå¹¶ä¸”æŠŠ Docker CE çš„ç¨³å®š(stable)ç‰ˆæœ¬å®‰è£…åœ¨ç³»ç»Ÿä¸­ã€‚ </p>
<h3 id="å¯åŠ¨Docker"><a href="#å¯åŠ¨Docker" class="headerlink" title="å¯åŠ¨Docker"></a>å¯åŠ¨Docker</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo systemctl <span class="built_in">enable</span> docker</span><br><span class="line">$ sudo systemctl start docker</span><br></pre></td></tr></table></figure>
<h3 id="å»ºç«‹-docker-ç”¨æˆ·ç»„"><a href="#å»ºç«‹-docker-ç”¨æˆ·ç»„" class="headerlink" title="å»ºç«‹ docker ç”¨æˆ·ç»„"></a>å»ºç«‹ docker ç”¨æˆ·ç»„</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>docker</code> å‘½ä»¤ä¼šä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/Unix_domain_socket" target="_blank" rel="noopener">Unix socket</a> ä¸ Docker å¼•æ“é€šè®¯ã€‚è€Œåªæœ‰ <code>root</code> ç”¨æˆ·å’Œ <code>docker</code> ç»„çš„ç”¨æˆ·æ‰å¯ä»¥è®¿é—® Docker å¼•æ“çš„ Unix socketã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸€èˆ¬ Linux ç³»ç»Ÿä¸Šä¸ä¼šç›´æ¥ä½¿ç”¨ <code>root</code> ç”¨æˆ·ã€‚å› æ­¤ï¼Œæ›´å¥½åœ°åšæ³•æ˜¯å°†éœ€è¦ä½¿ç”¨ <code>docker</code> çš„ç”¨æˆ·åŠ å…¥ <code>docker</code> ç”¨æˆ·ç»„ã€‚</p>
<p>å»ºç«‹ <code>docker</code> ç»„ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo groupadd docker</span><br></pre></td></tr></table></figure>
<p> å°†å½“å‰ç”¨æˆ·åŠ å…¥ <code>docker</code> ç»„ï¼š </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo usermod -aG docker <span class="variable">$USER</span></span><br></pre></td></tr></table></figure>
<p> é€€å‡ºå½“å‰ç»ˆç«¯å¹¶é‡æ–°ç™»å½•ï¼Œè¿›è¡Œå¦‚ä¸‹æµ‹è¯•ã€‚ </p>
<h3 id="æµ‹è¯•-Docker-æ˜¯å¦å®‰è£…æ­£ç¡®"><a href="#æµ‹è¯•-Docker-æ˜¯å¦å®‰è£…æ­£ç¡®" class="headerlink" title="æµ‹è¯• Docker æ˜¯å¦å®‰è£…æ­£ç¡®"></a>æµ‹è¯• Docker æ˜¯å¦å®‰è£…æ­£ç¡®</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run hello-world</span><br><span class="line"></span><br><span class="line">Unable to find image <span class="string">'hello-world:latest'</span> locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">d1725b59e92d: Pull complete</span><br><span class="line">Digest: sha256:0add3ace90ecb4adbf7777e9aacf18357296e799f81cabc9fde470971e499788</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">"hello-world"</span> image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure>
<p> è‹¥èƒ½æ­£å¸¸è¾“å‡ºä»¥ä¸Šä¿¡æ¯ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚ </p>
<blockquote>
<p>ä¸ªäººä½œä¸ºå¼€å‘è€…ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨å®å¡”è¿›è¡Œå®‰è£…ï¼Œbt.cnå®‰è£…åå¯ä»¥æŸ¥çœ‹è½¯ä»¶å•†åº—æ‰¾åˆ°dockerç›´æ¥è¿›è¡Œå®‰è£…ã€‚å¯¹äºå¼€å‘è€…è€Œè¨€æ›´åŠ æ–¹ä¾¿ä½¿ç”¨ã€‚</p>
</blockquote>
<h2 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h2><h3 id="ç³»ç»Ÿè¦æ±‚-1"><a href="#ç³»ç»Ÿè¦æ±‚-1" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h3><p> <a href="https://docs.docker.com/docker-for-mac/" target="_blank" rel="noopener">Docker Desktop for Mac</a> è¦æ±‚ç³»ç»Ÿæœ€ä½ä¸º macOS Sierra 10.12ã€‚ </p>
<h3 id="Homebrew-å®‰è£…"><a href="#Homebrew-å®‰è£…" class="headerlink" title="Homebrew å®‰è£…"></a>Homebrew å®‰è£…</h3><p> <a href="https://brew.sh/" target="_blank" rel="noopener">Homebrew</a> çš„ <a href="https://caskroom.github.io/" target="_blank" rel="noopener">Cask</a> å·²ç»æ”¯æŒ Docker Desktop for Macï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ Homebrew Cask æ¥è¿›è¡Œå®‰è£…ï¼š </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew cask install docker</span><br></pre></td></tr></table></figure>
<h3 id="æ‰‹åŠ¨ä¸‹è½½å®‰è£…"><a href="#æ‰‹åŠ¨ä¸‹è½½å®‰è£…" class="headerlink" title="æ‰‹åŠ¨ä¸‹è½½å®‰è£…"></a>æ‰‹åŠ¨ä¸‹è½½å®‰è£…</h3><p> <a href="https://hub.docker.com/editions/community/docker-ce-desktop-mac" target="_blank" rel="noopener">https://hub.docker.com/editions/community/docker-ce-desktop-mac</a> </p>
<p><a href="https://docs.docker.com/toolbox/overview/" target="_blank" rel="noopener">https://docs.docker.com/toolbox/overview/</a></p>
<p>ä¹Ÿå¯ä»¥ç‚¹å‡»ä»¥ä¸‹é“¾æ¥ç›´æ¥ä¸‹è½½ <a href="https://download.docker.com/mac/stable/Docker.dmg" target="_blank" rel="noopener">Stable</a> æˆ– <a href="https://download.docker.com/mac/edge/Docker.dmg" target="_blank" rel="noopener">Edge</a> ç‰ˆæœ¬çš„ Docker Desktop for Macã€‚</p>
<blockquote>
<p>ç‚¹å‡»é“¾æ¥æ³¨å†ŒDocker IDå³å¯ä¸‹è½½ã€‚å‚»ç“œå¼å®‰è£…ã€‚å®‰è£…åç‚¹å‡»å›¾æ ‡è¿è¡Œå³å¯ã€‚</p>
<p>å¯å…³æ‰å¼€æœºè‡ªå¯ã€‚preference -&gt; general -&gt; start Docker Desktop when you log in</p>
</blockquote>
<p>å¯åŠ¨ç»ˆç«¯åï¼Œé€šè¿‡å‘½ä»¤å¯ä»¥æ£€æŸ¥å®‰è£…åçš„ Docker ç‰ˆæœ¬ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker --version</span><br><span class="line">Docker version 19.03.5, build 633a0ea</span><br><span class="line">$ docker-compose --version</span><br><span class="line">docker-compose version 1.24.1, build 4667896b</span><br><span class="line">$ docker-machine --version</span><br><span class="line">docker-machine version 0.16.2, build bd45ab13</span><br></pre></td></tr></table></figure>
<h2 id="é•œåƒåŠ é€Ÿå™¨"><a href="#é•œåƒåŠ é€Ÿå™¨" class="headerlink" title="é•œåƒåŠ é€Ÿå™¨"></a>é•œåƒåŠ é€Ÿå™¨</h2><p>å›½å†…ä» Docker Hub æ‹‰å–é•œåƒæœ‰æ—¶ä¼šé‡åˆ°å›°éš¾ï¼Œæ­¤æ—¶å¯ä»¥é…ç½®é•œåƒåŠ é€Ÿå™¨ã€‚å›½å†…å¾ˆå¤šäº‘æœåŠ¡å•†éƒ½æä¾›äº†å›½å†…åŠ é€Ÿå™¨æœåŠ¡ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><a href="https://github.com/Azure/container-service-for-azure-china/blob/master/aks/README.md#22-container-registry-proxy" target="_blank" rel="noopener">Azure ä¸­å›½é•œåƒ <code>https://dockerhub.azk8s.cn</code></a></li>
<li><a href="https://cr.console.aliyun.com/cn-hangzhou/mirrors" target="_blank" rel="noopener">é˜¿é‡Œäº‘åŠ é€Ÿå™¨(éœ€ç™»å½•è´¦å·è·å–)</a></li>
<li><a href="https://kirk-enterprise.github.io/hub-docs/#/user-guide/mirror" target="_blank" rel="noopener">ä¸ƒç‰›äº‘åŠ é€Ÿå™¨ <code>https://reg-mirror.qiniu.com</code></a></li>
</ul>
<blockquote>
<p>ç”±äºé•œåƒæœåŠ¡å¯èƒ½å‡ºç°å®•æœºï¼Œå»ºè®®åŒæ—¶é…ç½®å¤šä¸ªé•œåƒã€‚</p>
<p>å›½å†…å„å¤§äº‘æœåŠ¡å•†å‡æä¾›äº† Docker é•œåƒåŠ é€ŸæœåŠ¡ï¼Œå»ºè®®æ ¹æ®è¿è¡Œ Docker çš„äº‘å¹³å°é€‰æ‹©å¯¹åº”çš„é•œåƒåŠ é€ŸæœåŠ¡ï¼Œå…·ä½“è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</p>
</blockquote>
<p>è¿™é‡Œä»¥ Azure ä¸­å›½é•œåƒ <code>https://dockerhub.azk8s.cn</code> ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚</p>
<h3 id="Ubuntu-16-04-ã€Debian-8-ã€CentOS-7"><a href="#Ubuntu-16-04-ã€Debian-8-ã€CentOS-7" class="headerlink" title="Ubuntu 16.04+ã€Debian 8+ã€CentOS 7"></a>Ubuntu 16.04+ã€Debian 8+ã€CentOS 7</h3><p> å¯¹äºä½¿ç”¨ <a href="https://www.freedesktop.org/wiki/Software/systemd/" target="_blank" rel="noopener">systemd</a> çš„ç³»ç»Ÿï¼Œè¯·åœ¨ <code>/etc/docker/daemon.json</code> ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨è¯·æ–°å»ºè¯¥æ–‡ä»¶ï¼‰ </p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"registry-mirrors"</span>: [</span><br><span class="line">    <span class="string">"https://dockerhub.azk8s.cn"</span>,</span><br><span class="line">    <span class="string">"https://reg-mirror.qiniu.com"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p> æ³¨æ„ï¼Œä¸€å®šè¦ä¿è¯è¯¥æ–‡ä»¶ç¬¦åˆ json è§„èŒƒï¼Œå¦åˆ™ Docker å°†ä¸èƒ½å¯åŠ¨ã€‚ </p>
</blockquote>
<p> ä¹‹åé‡æ–°å¯åŠ¨æœåŠ¡ã€‚ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo systemctl daemon-reload</span><br><span class="line">$ sudo systemctl restart docker</span><br></pre></td></tr></table></figure>
<blockquote>
<p> æ³¨æ„ï¼šå¦‚æœæ‚¨ä¹‹å‰æŸ¥çœ‹æ—§æ•™ç¨‹ï¼Œä¿®æ”¹äº† <code>docker.service</code> æ–‡ä»¶å†…å®¹ï¼Œè¯·å»æ‰æ‚¨æ·»åŠ çš„å†…å®¹ï¼ˆ<code>--registry-mirror=https://dockerhub.azk8s.cn</code>ï¼‰ã€‚ </p>
</blockquote>
<h3 id="macOS-1"><a href="#macOS-1" class="headerlink" title="macOS"></a>macOS</h3><p> å¯¹äºä½¿ç”¨ macOS çš„ç”¨æˆ·ï¼Œåœ¨ä»»åŠ¡æ ç‚¹å‡» Docker Desktop åº”ç”¨å›¾æ ‡ -&gt; <code>Perferences</code>ï¼Œåœ¨å·¦ä¾§å¯¼èˆªèœå•é€‰æ‹© <code>Docker Engine</code>ï¼Œåœ¨å³ä¾§åƒä¸‹è¾¹ä¸€æ ·ç¼–è¾‘ json æ–‡ä»¶ã€‚ä¿®æ”¹å®Œæˆä¹‹åï¼Œç‚¹å‡» <code>Apply &amp; Restart</code> æŒ‰é’®ï¼ŒDocker å°±ä¼šé‡å¯å¹¶åº”ç”¨é…ç½®çš„é•œåƒåœ°å€äº†ã€‚ </p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"registry-mirrors"</span>: [</span><br><span class="line">    <span class="string">"https://dockerhub.azk8s.cn"</span>,</span><br><span class="line">    <span class="string">"https://reg-mirror.qiniu.com"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ"><a href="#æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ" class="headerlink" title="æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ"></a>æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ</h3><p> æ‰§è¡Œ <code>$ docker info</code>ï¼Œå¦‚æœä»ç»“æœä¸­çœ‹åˆ°äº†å¦‚ä¸‹å†…å®¹ï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Registry Mirrors:</span><br><span class="line"> https://dockerhub.azk8s.cn/</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p>Docker å®˜ç½‘ï¼š<a href="https://www.docker.com/" target="_blank" rel="noopener">https://www.docker.com</a></p>
<p>Github Docker æºç ï¼š<a href="https://github.com/docker/docker-ce" target="_blank" rel="noopener">https://github.com/docker/docker-ce</a></p>
<p>Dockerå‘½ä»¤å¤§å…¨ï¼š<a href="https://www.runoob.com/docker/docker-command-manual.html" target="_blank" rel="noopener">https://www.runoob.com/docker/docker-command-manual.html</a></p>
<p>æœ¬æ–‡ç« æ‘˜æŠ„äºï¼š<a href="https://yeasy.gitbooks.io/docker_practice/content/" target="_blank" rel="noopener">https://yeasy.gitbooks.io/docker_practice/content/</a></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>äº†è§£JSON Web Token</title>
    <url>/2019/11/11/%E4%BA%86%E8%A7%A3JSON-Web-Token/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>JSON Web Tokenï¼ˆç¼©å†™ JWTï¼‰æ˜¯ç›®å‰æœ€æµè¡Œçš„è·¨åŸŸè®¤è¯è§£å†³æ–¹æ¡ˆã€‚<a href="https://jwt.io" target="_blank" rel="noopener">JWT</a></p>
<a id="more"></a>
<h1 id="è·¨åŸŸè®¤è¯é—®é¢˜"><a href="#è·¨åŸŸè®¤è¯é—®é¢˜" class="headerlink" title="è·¨åŸŸè®¤è¯é—®é¢˜"></a>è·¨åŸŸè®¤è¯é—®é¢˜</h1><p>äº’è”ç½‘æœåŠ¡ç¦»ä¸å¼€ç”¨æˆ·è®¤è¯ã€‚ä¸€èˆ¬æµç¨‹æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p>
<blockquote>
<p>1ã€ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€ç”¨æˆ·åå’Œå¯†ç ã€‚</p>
<p>2ã€æœåŠ¡å™¨éªŒè¯é€šè¿‡åï¼Œåœ¨å½“å‰å¯¹è¯ï¼ˆsessionï¼‰é‡Œé¢ä¿å­˜ç›¸å…³æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·è§’è‰²ã€ç™»å½•æ—¶é—´ç­‰ç­‰ã€‚</p>
<p>3ã€æœåŠ¡å™¨å‘ç”¨æˆ·è¿”å›ä¸€ä¸ª session_idï¼Œå†™å…¥ç”¨æˆ·çš„ Cookieã€‚</p>
<p>4ã€ç”¨æˆ·éšåçš„æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œéƒ½ä¼šé€šè¿‡ Cookieï¼Œå°† session_id ä¼ å›æœåŠ¡å™¨ã€‚</p>
<p>5ã€æœåŠ¡å™¨æ”¶åˆ° session_idï¼Œæ‰¾åˆ°å‰æœŸä¿å­˜çš„æ•°æ®ï¼Œç”±æ­¤å¾—çŸ¥ç”¨æˆ·çš„èº«ä»½ã€‚</p>
</blockquote>
<p>è¿™ç§æ¨¡å¼çš„é—®é¢˜åœ¨äºï¼Œæ‰©å±•æ€§ï¼ˆscalingï¼‰ä¸å¥½ã€‚å•æœºå½“ç„¶æ²¡æœ‰é—®é¢˜ï¼Œå¦‚æœæ˜¯æœåŠ¡å™¨é›†ç¾¤ï¼Œæˆ–è€…æ˜¯è·¨åŸŸçš„æœåŠ¡å¯¼å‘æ¶æ„ï¼Œå°±è¦æ±‚ session æ•°æ®å…±äº«ï¼Œæ¯å°æœåŠ¡å™¨éƒ½èƒ½å¤Ÿè¯»å– sessionã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼ŒA ç½‘ç«™å’Œ B ç½‘ç«™æ˜¯åŒä¸€å®¶å…¬å¸çš„å…³è”æœåŠ¡ã€‚ç°åœ¨è¦æ±‚ï¼Œç”¨æˆ·åªè¦åœ¨å…¶ä¸­ä¸€ä¸ªç½‘ç«™ç™»å½•ï¼Œå†è®¿é—®å¦ä¸€ä¸ªç½‘ç«™å°±ä¼šè‡ªåŠ¨ç™»å½•ï¼Œè¯·é—®æ€ä¹ˆå®ç°ï¼Ÿ</p>
<p>ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ session æ•°æ®æŒä¹…åŒ–ï¼Œå†™å…¥æ•°æ®åº“æˆ–åˆ«çš„æŒä¹…å±‚ã€‚å„ç§æœåŠ¡æ”¶åˆ°è¯·æ±‚åï¼Œéƒ½å‘æŒä¹…å±‚è¯·æ±‚æ•°æ®ã€‚è¿™ç§æ–¹æ¡ˆçš„ä¼˜ç‚¹æ˜¯æ¶æ„æ¸…æ™°ï¼Œç¼ºç‚¹æ˜¯å·¥ç¨‹é‡æ¯”è¾ƒå¤§ã€‚å¦å¤–ï¼ŒæŒä¹…å±‚ä¸‡ä¸€æŒ‚äº†ï¼Œå°±ä¼šå•ç‚¹å¤±è´¥ã€‚</p>
<p>å¦ä¸€ç§æ–¹æ¡ˆæ˜¯æœåŠ¡å™¨ç´¢æ€§ä¸ä¿å­˜ session æ•°æ®äº†ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½å‘å›æœåŠ¡å™¨ã€‚JWT å°±æ˜¯è¿™ç§æ–¹æ¡ˆçš„ä¸€ä¸ªä»£è¡¨ã€‚</p>
<h1 id="JWTåŸç†"><a href="#JWTåŸç†" class="headerlink" title="JWTåŸç†"></a>JWTåŸç†</h1><p>JWT çš„åŸç†æ˜¯ï¼ŒæœåŠ¡å™¨è®¤è¯ä»¥åï¼Œç”Ÿæˆä¸€ä¸ª JSON å¯¹è±¡ï¼Œå‘å›ç»™ç”¨æˆ·ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"username"</span>: <span class="string">"å¼ ä¸‰"</span>,</span><br><span class="line">  <span class="attr">"role"</span>: <span class="string">"ç®¡ç†å‘˜"</span>,</span><br><span class="line">  <span class="attr">"exp"</span>: <span class="string">"2018å¹´7æœˆ1æ—¥0ç‚¹0åˆ†"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥åï¼Œç”¨æˆ·ä¸æœåŠ¡ç«¯é€šä¿¡çš„æ—¶å€™ï¼Œéƒ½è¦å‘å›è¿™ä¸ª JSON å¯¹è±¡ã€‚æœåŠ¡å™¨å®Œå…¨åªé è¿™ä¸ªå¯¹è±¡è®¤å®šç”¨æˆ·èº«ä»½ã€‚ä¸ºäº†é˜²æ­¢ç”¨æˆ·ç¯¡æ”¹æ•°æ®ï¼ŒæœåŠ¡å™¨åœ¨ç”Ÿæˆè¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šåŠ ä¸Šç­¾åï¼ˆè¯¦è§åæ–‡ï¼‰ã€‚</p>
<p>æœåŠ¡å™¨å°±ä¸ä¿å­˜ä»»ä½• session æ•°æ®äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡å™¨å˜æˆæ— çŠ¶æ€äº†ï¼Œä»è€Œæ¯”è¾ƒå®¹æ˜“å®ç°æ‰©å±•ã€‚</p>
<h1 id="JWTçš„æ•°æ®ç»“æ„"><a href="#JWTçš„æ•°æ®ç»“æ„" class="headerlink" title="JWTçš„æ•°æ®ç»“æ„"></a>JWTçš„æ•°æ®ç»“æ„</h1><p>å®é™…çš„ JWT å¤§æ¦‚å°±åƒä¸‹é¢è¿™æ ·ã€‚</p>
<p><img src="jsonwebtoken.png" alt></p>
<p>å®ƒæ˜¯ä¸€ä¸ªå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œä¸­é—´ç”¨ç‚¹ï¼ˆ<code>.</code>ï¼‰åˆ†éš”æˆä¸‰ä¸ªéƒ¨åˆ†ã€‚æ³¨æ„ï¼ŒJWT å†…éƒ¨æ˜¯æ²¡æœ‰æ¢è¡Œçš„ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†ä¾¿äºå±•ç¤ºï¼Œå°†å®ƒå†™æˆäº†å‡ è¡Œã€‚</p>
<p>JWT çš„ä¸‰ä¸ªéƒ¨åˆ†ä¾æ¬¡å¦‚ä¸‹ï¼š</p>
<ul>
<li>Headerï¼ˆå¤´éƒ¨ï¼‰</li>
<li>Payloadï¼ˆè´Ÿè½½ï¼‰</li>
<li>Signatureï¼ˆç­¾åï¼‰</li>
</ul>
<p>å†™æˆä¸€è¡Œï¼Œå°±æ˜¯<code>Header.Payload.Signature</code>ã€‚</p>
<p><img src="jsonwebtoken1.jpg" alt></p>
<h2 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h2><p>Header éƒ¨åˆ†æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œæè¿° JWT çš„å…ƒæ•°æ®ï¼Œé€šå¸¸æ˜¯ä¸‹é¢çš„æ ·å­ã€‚</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"alg"</span>: <span class="string">"HS256"</span>,</span><br><span class="line">  <span class="attr">"typ"</span>: <span class="string">"JWT"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>alg</code>å±æ€§è¡¨ç¤ºç­¾åçš„ç®—æ³•ï¼ˆalgorithmï¼‰ï¼Œé»˜è®¤æ˜¯ HMAC SHA256ï¼ˆå†™æˆ HS256ï¼‰ï¼›<code>typ</code>å±æ€§è¡¨ç¤ºè¿™ä¸ªä»¤ç‰Œï¼ˆtokenï¼‰çš„ç±»å‹ï¼ˆtypeï¼‰ï¼ŒJWT ä»¤ç‰Œç»Ÿä¸€å†™ä¸º<code>JWT</code>ã€‚</p>
<p>æœ€åï¼Œå°†ä¸Šé¢çš„ JSON å¯¹è±¡ä½¿ç”¨ Base64URL ç®—æ³•ï¼ˆè¯¦è§åæ–‡ï¼‰è½¬æˆå­—ç¬¦ä¸²ã€‚</p>
<h2 id="Payload"><a href="#Payload" class="headerlink" title="Payload"></a>Payload</h2><p>Payload éƒ¨åˆ†ä¹Ÿæ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œç”¨æ¥å­˜æ”¾å®é™…éœ€è¦ä¼ é€’çš„æ•°æ®ã€‚JWT è§„å®šäº†7ä¸ªå®˜æ–¹å­—æ®µï¼Œä¾›é€‰ç”¨ã€‚</p>
<ul>
<li>iss (issuer)ï¼šç­¾å‘äºº</li>
<li>exp (expiration time)ï¼šè¿‡æœŸæ—¶é—´</li>
<li>sub (subject)ï¼šä¸»é¢˜</li>
<li>aud (audience)ï¼šå—ä¼—</li>
<li>nbf (Not Before)ï¼šç”Ÿæ•ˆæ—¶é—´</li>
<li>iat (Issued At)ï¼šç­¾å‘æ—¶é—´</li>
<li>jti (JWT ID)ï¼šç¼–å·</li>
</ul>
<p>é™¤äº†å®˜æ–¹å­—æ®µï¼Œä½ è¿˜å¯ä»¥åœ¨è¿™ä¸ªéƒ¨åˆ†å®šä¹‰ç§æœ‰å­—æ®µï¼Œä¸‹é¢å°±æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"sub"</span>: <span class="string">"1234567890"</span>,</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"John Doe"</span>,</span><br><span class="line">  <span class="attr">"admin"</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼ŒJWT é»˜è®¤æ˜¯ä¸åŠ å¯†çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥è¯»åˆ°ï¼Œæ‰€ä»¥ä¸è¦æŠŠç§˜å¯†ä¿¡æ¯æ”¾åœ¨è¿™ä¸ªéƒ¨åˆ†ã€‚</p>
<p>è¿™ä¸ª JSON å¯¹è±¡ä¹Ÿè¦ä½¿ç”¨ Base64URL ç®—æ³•è½¬æˆå­—ç¬¦ä¸²ã€‚</p>
<h2 id="Signature"><a href="#Signature" class="headerlink" title="Signature"></a>Signature</h2><p>Signature éƒ¨åˆ†æ˜¯å¯¹å‰ä¸¤éƒ¨åˆ†çš„ç­¾åï¼Œé˜²æ­¢æ•°æ®ç¯¡æ”¹ã€‚</p>
<p>é¦–å…ˆï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªå¯†é’¥ï¼ˆsecretï¼‰ã€‚è¿™ä¸ªå¯†é’¥åªæœ‰æœåŠ¡å™¨æ‰çŸ¥é“ï¼Œä¸èƒ½æ³„éœ²ç»™ç”¨æˆ·ã€‚ç„¶åï¼Œä½¿ç”¨ Header é‡Œé¢æŒ‡å®šçš„ç­¾åç®—æ³•ï¼ˆé»˜è®¤æ˜¯ HMAC SHA256ï¼‰ï¼ŒæŒ‰ç…§ä¸‹é¢çš„å…¬å¼äº§ç”Ÿç­¾åã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HMACSHA256(</span><br><span class="line">  base64UrlEncode(header) + &quot;.&quot; +</span><br><span class="line">  base64UrlEncode(payload),</span><br><span class="line">  secret)</span><br></pre></td></tr></table></figure>
<p>ç®—å‡ºç­¾åä»¥åï¼ŒæŠŠ Headerã€Payloadã€Signature ä¸‰ä¸ªéƒ¨åˆ†æ‹¼æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯ä¸ªéƒ¨åˆ†ä¹‹é—´ç”¨â€ç‚¹â€ï¼ˆ<code>.</code>ï¼‰åˆ†éš”ï¼Œå°±å¯ä»¥è¿”å›ç»™ç”¨æˆ·ã€‚</p>
<h2 id="Base64URL"><a href="#Base64URL" class="headerlink" title="Base64URL"></a>Base64URL</h2><p>å‰é¢æåˆ°ï¼ŒHeader å’Œ Payload ä¸²å‹åŒ–çš„ç®—æ³•æ˜¯ Base64URLã€‚è¿™ä¸ªç®—æ³•è·Ÿ Base64 ç®—æ³•åŸºæœ¬ç±»ä¼¼ï¼Œä½†æœ‰ä¸€äº›å°çš„ä¸åŒã€‚</p>
<p>JWT ä½œä¸ºä¸€ä¸ªä»¤ç‰Œï¼ˆtokenï¼‰ï¼Œæœ‰äº›åœºåˆå¯èƒ½ä¼šæ”¾åˆ° URLï¼ˆæ¯”å¦‚ api.example.com/?token=xxxï¼‰ã€‚Base64 æœ‰ä¸‰ä¸ªå­—ç¬¦<code>+</code>ã€<code>/</code>å’Œ<code>=</code>ï¼Œåœ¨ URL é‡Œé¢æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œæ‰€ä»¥è¦è¢«æ›¿æ¢æ‰ï¼š<code>=</code>è¢«çœç•¥ã€<code>+</code>æ›¿æ¢æˆ<code>-</code>ï¼Œ<code>/</code>æ›¿æ¢æˆ<code>_</code> ã€‚è¿™å°±æ˜¯ Base64URL ç®—æ³•ã€‚</p>
<h1 id="JWT-çš„ä½¿ç”¨æ–¹å¼"><a href="#JWT-çš„ä½¿ç”¨æ–¹å¼" class="headerlink" title="JWT çš„ä½¿ç”¨æ–¹å¼"></a>JWT çš„ä½¿ç”¨æ–¹å¼</h1><p>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„ JWTï¼Œå¯ä»¥å‚¨å­˜åœ¨ Cookie é‡Œé¢ï¼Œä¹Ÿå¯ä»¥å‚¨å­˜åœ¨ localStorageã€‚</p>
<p>æ­¤åï¼Œå®¢æˆ·ç«¯æ¯æ¬¡ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œéƒ½è¦å¸¦ä¸Šè¿™ä¸ª JWTã€‚ä½ å¯ä»¥æŠŠå®ƒæ”¾åœ¨ Cookie é‡Œé¢è‡ªåŠ¨å‘é€ï¼Œä½†æ˜¯è¿™æ ·ä¸èƒ½è·¨åŸŸï¼Œæ‰€ä»¥æ›´å¥½çš„åšæ³•æ˜¯æ”¾åœ¨ HTTP è¯·æ±‚çš„å¤´ä¿¡æ¯<code>Authorization</code>å­—æ®µé‡Œé¢ã€‚</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">Authorization</span>: Bearer &lt;token&gt;</span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ç§åšæ³•æ˜¯ï¼Œè·¨åŸŸçš„æ—¶å€™ï¼ŒJWT å°±æ”¾åœ¨ POST è¯·æ±‚çš„æ•°æ®ä½“é‡Œé¢ã€‚</p>
<blockquote>
<p>åœ¨nodeä¸­ä½¿ç”¨jwtï¼š<a href="https://segmentfault.com/a/1190000009494020" target="_blank" rel="noopener">jsonwebtokenä¸­æ–‡æ–‡æ¡£</a> ï½œ <a href="https://www.npmjs.com/package/jsonwebtoken" target="_blank" rel="noopener">jsonwebtoken npm</a></p>
</blockquote>
<h1 id="JWT-çš„å‡ ä¸ªç‰¹ç‚¹"><a href="#JWT-çš„å‡ ä¸ªç‰¹ç‚¹" class="headerlink" title="JWT çš„å‡ ä¸ªç‰¹ç‚¹"></a>JWT çš„å‡ ä¸ªç‰¹ç‚¹</h1><p>ï¼ˆ1ï¼‰JWT é»˜è®¤æ˜¯ä¸åŠ å¯†ï¼Œä½†ä¹Ÿæ˜¯å¯ä»¥åŠ å¯†çš„ã€‚ç”ŸæˆåŸå§‹ Token ä»¥åï¼Œå¯ä»¥ç”¨å¯†é’¥å†åŠ å¯†ä¸€æ¬¡ã€‚</p>
<p>ï¼ˆ2ï¼‰JWT ä¸åŠ å¯†çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½å°†ç§˜å¯†æ•°æ®å†™å…¥ JWTã€‚</p>
<p>ï¼ˆ3ï¼‰JWT ä¸ä»…å¯ä»¥ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯ä»¥ç”¨äºäº¤æ¢ä¿¡æ¯ã€‚æœ‰æ•ˆä½¿ç”¨ JWTï¼Œå¯ä»¥é™ä½æœåŠ¡å™¨æŸ¥è¯¢æ•°æ®åº“çš„æ¬¡æ•°ã€‚</p>
<p>ï¼ˆ4ï¼‰JWT çš„æœ€å¤§ç¼ºç‚¹æ˜¯ï¼Œç”±äºæœåŠ¡å™¨ä¸ä¿å­˜ session çŠ¶æ€ï¼Œå› æ­¤æ— æ³•åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­åºŸæ­¢æŸä¸ª tokenï¼Œæˆ–è€…æ›´æ”¹ token çš„æƒé™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ JWT ç­¾å‘äº†ï¼Œåœ¨åˆ°æœŸä¹‹å‰å°±ä¼šå§‹ç»ˆæœ‰æ•ˆï¼Œé™¤éæœåŠ¡å™¨éƒ¨ç½²é¢å¤–çš„é€»è¾‘ã€‚</p>
<p>ï¼ˆ5ï¼‰JWT æœ¬èº«åŒ…å«äº†è®¤è¯ä¿¡æ¯ï¼Œä¸€æ—¦æ³„éœ²ï¼Œä»»ä½•äººéƒ½å¯ä»¥è·å¾—è¯¥ä»¤ç‰Œçš„æ‰€æœ‰æƒé™ã€‚ä¸ºäº†å‡å°‘ç›—ç”¨ï¼ŒJWT çš„æœ‰æ•ˆæœŸåº”è¯¥è®¾ç½®å¾—æ¯”è¾ƒçŸ­ã€‚å¯¹äºä¸€äº›æ¯”è¾ƒé‡è¦çš„æƒé™ï¼Œä½¿ç”¨æ—¶åº”è¯¥å†æ¬¡å¯¹ç”¨æˆ·è¿›è¡Œè®¤è¯ã€‚</p>
<p>ï¼ˆ6ï¼‰ä¸ºäº†å‡å°‘ç›—ç”¨ï¼ŒJWT ä¸åº”è¯¥ä½¿ç”¨ HTTP åè®®æ˜ç ä¼ è¾“ï¼Œè¦ä½¿ç”¨ HTTPS åè®®ä¼ è¾“ã€‚</p>
<h1 id="JWTä¼˜ç‚¹"><a href="#JWTä¼˜ç‚¹" class="headerlink" title="JWTä¼˜ç‚¹"></a>JWTä¼˜ç‚¹</h1><p>ä½¿ç”¨ JSON Web Token ä¿æŠ¤åº”ç”¨å®‰å…¨ï¼Œä½ è‡³å°‘å¯ä»¥è·å¾—ä»¥ä¸‹å‡ ä¸ªä¼˜åŠ¿ï¼š</p>
<p>æ›´å°‘çš„æ•°æ®åº“è¿æ¥ï¼šå› å…¶åŸºäºç®—æ³•æ¥å®ç°èº«ä»½è®¤è¯ï¼Œåœ¨ä½¿ç”¨ JWT æ—¶æŸ¥è¯¢æ•°æ®çš„æ¬¡æ•°æ›´å°‘(æ›´å°‘çš„æ•°æ®è¿æ¥ä¸ç­‰äºä¸è¿æ¥æ•°æ®åº“)ï¼Œå¯ä»¥è·å¾—æ›´å¿«çš„ç³»ç»Ÿå“åº”æ—¶é—´ã€‚æ„å»ºæ›´ç®€å•ï¼šå¦‚æœä½ çš„åº”ç”¨ç¨‹åºæœ¬èº«æ˜¯æ— çŠ¶æ€çš„ï¼Œé‚£ä¹ˆé€‰æ‹© JWT å¯ä»¥åŠ å¿«ç³»ç»Ÿæ„å»ºè¿‡ç¨‹ã€‚</p>
<p>è·¨æœåŠ¡è°ƒç”¨ï¼šä½ å¯ä»¥æ„å»ºä¸€ä¸ªè®¤è¯ä¸­å¿ƒæ¥å¤„ç†ç”¨æˆ·èº«ä»½è®¤è¯å’Œå‘æ”¾ç­¾åçš„å·¥ä½œï¼Œå…¶ä»–åº”ç”¨æœåŠ¡åœ¨åç»­çš„ç”¨æˆ·è¯·æ±‚ä¸­ä¸éœ€è¦(ç†è®ºä¸Š)åœ¨è¯¢é—®è®¤è¯ä¸­å¿ƒï¼Œå¯ä½¿ç”¨è‡ªæœ‰çš„å…¬é’¥å¯¹ç”¨æˆ·ç­¾åè¿›è¡ŒéªŒè¯ã€‚</p>
<p>æ— çŠ¶æ€ï¼šä½ ä¸éœ€è¦å‘ä¼ ç»Ÿçš„ Web åº”ç”¨é‚£æ ·å°†ç”¨æˆ·çŠ¶æ€ä¿å­˜äº Session ä¸­ã€‚</p>
<h1 id="JWTå¼Šç«¯"><a href="#JWTå¼Šç«¯" class="headerlink" title="JWTå¼Šç«¯"></a>JWTå¼Šç«¯</h1><p>JWT ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œä½¿ç”¨ JWT ä¹Ÿä¼šå¸¦æ¥è¯¸å¤šé—®é¢˜ã€‚å°±ä¸ªäººä½¿ç”¨æƒ…å†µï¼Œä½¿ç”¨ JWT æ—¶å¯èƒ½ä¼šé¢ä¸´ä»¥ä¸‹å‡ ä¸ªéº»çƒ¦ï¼š</p>
<ul>
<li>ä¸¥é‡ä¾èµ–äºç§˜é’¥ï¼šJWT çš„ç”Ÿæˆä¸è§£æè¿‡ç¨‹éƒ½éœ€è¦ä¾èµ–äºç§˜é’¥(Secret)ï¼Œä¸”éƒ½ä»¥ç¡¬ç¼–ç çš„æ–¹å¼å­˜åœ¨äºç³»ç»Ÿä¸­(ä¹Ÿæœ‰æ”¾åœ¨å¤–éƒ¨é…ç½®æ–‡ä»¶ä¸­çš„)ã€‚å¦‚æœç§˜é’¥ä¸å°å¿ƒæ³„éœ²ï¼Œç³»ç»Ÿçš„å®‰å…¨æ€§å°†æ”¶åˆ°å¨èƒã€‚</li>
<li>æœåŠ¡ç«¯æ— æ³•ç®¡ç†å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼šå¦‚æœç”¨æˆ·èº«ä»½å‘ç”Ÿå¼‚å¸¸(ä¿¡æ¯æ³„éœ²ï¼Œæˆ–è€…è¢«æ”»å‡»)ï¼ŒæœåŠ¡ç«¯å¾ˆéš¾å‘æ“ä½œ Session é‚£æ ·ä¸»åŠ¨å°†å¼‚å¸¸ç”¨æˆ·è¿›è¡Œéš”ç¦»ã€‚</li>
<li>æœåŠ¡ç«¯æ— æ³•ä¸»åŠ¨æ¨é€æ¶ˆæ¯ï¼šæœåŠ¡ç«¯ç”±äºæ˜¯æ— çŠ¶æ€çš„ï¼Œä»–å°†æ— æ³•ä½¿ç”¨åƒ Session é‚£æ ·çš„æ–¹å¼æ¨é€æ¶ˆæ¯åˆ°å®¢æˆ·ç«¯ï¼Œä¾‹å¦‚è¿‡æœŸæ—¶é—´å°†è‡³ï¼ŒæœåŠ¡ç«¯æ— æ³•ä¸»åŠ¨ä¸ºç”¨æˆ·ç»­çº¦ï¼Œéœ€è¦å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘èµ·ç»­çº¦è¯·æ±‚ã€‚</li>
<li>å†—ä½™çš„æ•°æ®å¼€é”€ï¼šä¸€ä¸ª JWT ç­¾åçš„å¤§å°è¦è¿œæ¯”ä¸€ä¸ª Session ID é•¿å¾ˆå¤šï¼Œå¦‚æœä½ å¯¹æœ‰æ•ˆè½½è·(payload)ä¸­çš„æ•°æ®ä¸åšæœ‰æ•ˆæ§åˆ¶ï¼Œå…¶é•¿åº¦ä¼šæˆå‡ ä½•å€æ•°å¢é•¿ï¼Œä¸”åœ¨æ¯ä¸€æ¬¡è¯·æ±‚æ—¶éƒ½éœ€è¦è´Ÿæ‹…é¢å¤–çš„ç½‘ç»œå¼€é”€ã€‚</li>
<li>JSON Web Token å¾ˆæµè¡Œï¼Œä½†æ˜¯å®ƒç›¸æ¯”äº Session,OIDC(OpenId Connect)ç­‰æŠ€æœ¯è¿˜æ¯”è¾ƒæ–°ï¼Œæ”¯æŒ JSON Web Token çš„åº“è¿˜æ¯”è¾ƒå°‘ï¼Œè€Œä¸” JWT ä¹Ÿå¹¶éæ¯”ä¼ ç»Ÿ Session æ›´å®‰å…¨ï¼Œä»–ä»¬éƒ½æ²¡æœ‰è§£å†³ CSRF å’Œ XSS çš„é—®é¢˜ã€‚å› æ­¤ï¼Œåœ¨å†³å®šä½¿ç”¨ JWT å‰ï¼Œä½ éœ€è¦ä»”ç»†è€ƒè™‘å…¶åˆ©å¼Šã€‚</li>
</ul>
<h1 id="å®‰å…¨éšæ‚£æ€è€ƒ"><a href="#å®‰å…¨éšæ‚£æ€è€ƒ" class="headerlink" title="å®‰å…¨éšæ‚£æ€è€ƒ"></a>å®‰å…¨éšæ‚£æ€è€ƒ</h1><p><strong>è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœå®¢æˆ·ç«¯çš„ JWT ä»¤ç‰Œæ³„éœ²æˆ–è€…è¢«ç›—å–ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆä¸¥é‡çš„åæœï¼Ÿæœ‰ä»€ä¹ˆè¡¥æ•‘æªæ–½ï¼Ÿ</strong></p>
<ul>
<li>å¦‚æœå•çº¯çš„ä¾é  JSON Web Token è§£å†³ç”¨æˆ·è®¤è¯çš„æ‰€æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆç³»ç»Ÿçš„å®‰å…¨æ€§å°†æ˜¯è„†å¼±çš„ã€‚ç”±äº JWT ä»¤ç‰Œå­˜å‚¨äºå®¢æˆ·ç«¯ä¸­ï¼Œä¸€æ—¦å®¢æˆ·ç«¯å­˜å‚¨çš„ä»¤ç‰Œå‘ç”Ÿæ³„éœ²äº‹ä»¶æˆ–è€…è¢«æ”»å‡»ï¼Œæ”»å‡»è€…å°±å¯ä»¥è½»è€Œæ˜“ä¸¾çš„ä¼ªé€ ç”¨æˆ·èº«ä»½å»ä¿®æ”¹/åˆ é™¤ç³»ç»Ÿèµ„æºï¼Œå²å¦‚æŒ‰ JWT è‡ªå¸¦è¿‡æœŸæ—¶é—´ï¼Œä½†åœ¨è¿‡æœŸä¹‹å‰ï¼Œæ”»å‡»è€…å¯ä»¥è‚†æ— å¿Œæƒ®çš„æ“ä½œç³»ç»Ÿæ•°æ®ã€‚é€šè¿‡ç®—æ³•æ¥æ ¡éªŒç”¨æˆ·èº«ä»½åˆæ³•æ€§æ˜¯ JWT çš„ä¼˜åŠ¿ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æœ€å¤§çš„å¼Šç«¯â€”â€”å®ƒå¤ªè¿‡äºä¾èµ–ç®—æ³•ã€‚</li>
<li>åè§‚ä¼ ç»Ÿçš„ç”¨æˆ·è®¤è¯æªæ–½ï¼Œé€šå¸¸ä¼šåŒ…å«å¤šç§ç»„åˆï¼Œå¦‚æ‰‹æœºéªŒè¯ç ï¼Œäººè„¸è¯†åˆ«ï¼Œè¯­éŸ³è¯†åˆ«ï¼ŒæŒ‡çº¹é”ç­‰ã€‚ç”¨æˆ·åå’Œå¯†ç åªåšç”¨æˆ·èº«ä»½è¯†åˆ«ä½¿ç”¨ï¼Œå½“ç”¨æˆ·åå’Œå¯†ç æ³„éœ²åï¼Œåœ¨é‡åˆ°æ•æ„Ÿæ“ä½œæ—¶(å¦‚æ–°å¢ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼Œä¸‹è½½ï¼Œä¸Šä¼ )ï¼Œéƒ½ä¼šé‡‡ç”¨å¦å¤–çš„æ–¹å¼å¯¹ç”¨æˆ·çš„åˆæ³•æ€§è¿›è¡ŒéªŒè¯(å‘é€éªŒè¯ç ï¼Œé‚®ç®±éªŒè¯ç ï¼ŒæŒ‡çº¹ä¿¡æ¯ç­‰)ä»¥ç¡®ä¿æ•°æ®å®‰å…¨ã€‚</li>
<li>ä¸ä¼ ç»Ÿçš„èº«ä»½éªŒè¯æ–¹å¼ç›¸æ¯”ï¼ŒJWT è¿‡å¤šçš„ä¾èµ–äºç®—æ³•ï¼Œç¼ºä¹çµæ´»æ€§ï¼Œè€Œä¸”æœåŠ¡ç«¯å¾€å¾€æ˜¯è¢«åŠ¨æ‰§è¡Œç”¨æˆ·èº«ä»½éªŒè¯æ“ä½œï¼Œæ— æ³•åŠæ—¶å¯¹å¼‚å¸¸ç”¨æˆ·è¿›è¡Œéš”ç¦»ã€‚é‚£æ˜¯å¦æœ‰è¡¥æ•‘æªæ–½å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚æ¥ä¸‹æ¥ï¼Œå°†ä»‹ç»åœ¨å‘ç”Ÿä»¤ç‰Œæ³„éœ²äº‹ä»¶åï¼Œå¦‚ä½•ä¿è¯ç³»ç»Ÿçš„å®‰å…¨ã€‚</li>
</ul>
<h1 id="é˜²èŒƒæ‰‹æ®µ"><a href="#é˜²èŒƒæ‰‹æ®µ" class="headerlink" title="é˜²èŒƒæ‰‹æ®µ"></a>é˜²èŒƒæ‰‹æ®µ</h1><p>ä¸ç®¡æ˜¯åŸºäº Sessions è¿˜æ˜¯åŸºäº JSON Web Tokenï¼Œä¸€æ—¦å¯†ä»¤è¢«ç›—å–ï¼Œéƒ½æ˜¯ä¸€ä»¶æ£˜æ‰‹çš„äº‹æƒ…ã€‚æ¥ä¸‹æ¥ï¼Œå°†è®²è¿°åŸºäº JSON Web Token çš„æ–¹å¼å‘ç”Ÿä»¤ç‰Œæ³„éœ²æ˜¯è¯¥é‡‡å–ä»€ä¹ˆæ ·çš„æªæ–½(è§£å†³æ–¹æ¡ˆåŒ…å«ä½†ä¸å±€é™ä¸æœ¬æ–‡æ‰€æ¶‰åŠçš„å†…å®¹)ã€‚</p>
<p>ä¸ºäº†é˜²æ­¢ç”¨æˆ· JWT ä»¤ç‰Œæ³„éœ²è€Œå¨èƒç³»ç»Ÿå®‰å…¨ï¼Œä½ å¯ä»¥åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å®Œå–„ç³»ç»ŸåŠŸèƒ½ï¼š</p>
<ol>
<li>æ¸…é™¤å·²æ³„éœ²çš„ä»¤ç‰Œï¼šæ­¤æ–¹æ¡ˆæœ€ç›´æ¥ï¼Œä¹Ÿå®¹æ˜“å®ç°ï¼Œä½ éœ€å°† JWT ä»¤ç‰Œåœ¨æœåŠ¡ç«¯ä¹Ÿå­˜å‚¨ä¸€ä»½ï¼Œè‹¥å‘ç°æœ‰å¼‚å¸¸çš„ä»¤ç‰Œå­˜åœ¨ï¼Œåˆ™ä»æœåŠ¡ç«¯ä»¤ç‰Œåˆ—è¡¨ä¸­å°†æ­¤å¼‚å¸¸ä»¤ç‰Œæ¸…é™¤ã€‚å½“ç”¨æˆ·å‘èµ·è¯·æ±‚æ—¶ï¼Œå¼ºåˆ¶ç”¨æˆ·é‡æ–°è¿›è¡Œèº«ä»½éªŒè¯ï¼Œç›´è‡³éªŒè¯æˆåŠŸã€‚å¯¹äºæœåŠ¡ç«¯çš„ä»¤ç‰Œå­˜å‚¨ï¼Œå¯ä»¥å€ŸåŠ© Redis ç­‰ç¼“å­˜æœåŠ¡å™¨è¿›è¡Œç®¡ç†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Ehcache å°†ä»¤ç‰Œä¿¡æ¯å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚</li>
<li>æ•æ„Ÿæ“ä½œä¿æŠ¤ï¼šåœ¨æ¶‰åŠåˆ°è¯¸å¦‚æ–°å¢ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼Œä¸Šä¼ ï¼Œä¸‹è½½ç­‰æ•æ„Ÿæ€§æ“ä½œæ—¶ï¼Œå®šæœŸ(30åˆ†é’Ÿï¼Œ15åˆ†é’Ÿç”šè‡³æ›´çŸ­)æ£€æŸ¥ç”¨æˆ·èº«ä»½ï¼Œå¦‚æ‰‹æœºéªŒè¯ç ï¼Œæ‰«æäºŒç»´ç ç­‰æ‰‹æ®µï¼Œç¡®è®¤æ“ä½œè€…æ˜¯ç”¨æˆ·æœ¬äººã€‚å¦‚æœèº«ä»½éªŒè¯ä¸é€šè¿‡ï¼Œåˆ™ç»ˆæ­¢è¯·æ±‚ï¼Œå¹¶è¦æ±‚é‡æ–°éªŒè¯ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚</li>
<li>åœ°åŸŸæ£€æŸ¥ï¼šé€šå¸¸ç”¨æˆ·ä¼šåœ¨ä¸€ä¸ªç›¸å¯¹å›ºå®šçš„åœ°ç†èŒƒå›´å†…è®¿é—®åº”ç”¨ç¨‹åºï¼Œå¯ä»¥å°†åœ°ç†ä½ç½®ä¿¡æ¯ä½œä¸ºä¸€ä¸ªè¾…åŠ©æ¥ç”„åˆ«ç”¨æˆ·çš„ JWT ä»¤ç‰Œæ˜¯å¦å­˜åœ¨é—®é¢˜ã€‚å¦‚æœå‘ç°ç”¨æˆ·Aç”±ç»å¸¸æ‰€åœ¨çš„åœ°åŒº 1 å˜åˆ°äº†ç›¸å¯¹è¾ƒè¿œçš„åœ°åŒº 2 ï¼Œæˆ–è€…é¢‘ç¹åœ¨å¤šä¸ªåœ°åŒºé—´åˆ‡æ¢ï¼Œä¸ç®¡ç”¨æˆ·æœ‰æ²¡æœ‰å¯èƒ½åœ¨çŸ­æ—¶é—´å†…åœ¨å¤šä¸ªåœ°åŸŸæ´»åŠ¨(ä¸€èˆ¬ä¸å¯èƒ½)ï¼Œéƒ½åº”å½“ç»ˆæ­¢å½“å‰è¯·æ±‚ï¼Œå¼ºåˆ¶ç”¨æˆ·é‡æ–°è¿›è¡ŒéªŒè¯èº«ä»½ï¼Œé¢å‘æ–°çš„ JWT ä»¤ç‰Œï¼Œå¹¶æé†’(æˆ–è¦æ±‚)ç”¨æˆ·é‡ç½®å¯†ç ã€‚</li>
<li>ç›‘æ§è¯·æ±‚é¢‘ç‡ï¼šå¦‚æœ JWT å¯†ä»¤è¢«ç›—å–ï¼Œæ”»å‡»è€…æˆ–é€šè¿‡æŸäº›å·¥å…·ä¼ªé€ ç”¨æˆ·èº«ä»½ï¼Œé«˜é¢‘æ¬¡çš„å¯¹ç³»ç»Ÿå‘é€è¯·æ±‚ï¼Œä»¥å¥—å–ç”¨æˆ·æ•°æ®ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œå¯ä»¥ç›‘æ§ç”¨æˆ·åœ¨å•ä½æ—¶é—´å†…çš„è¯·æ±‚æ¬¡æ•°ï¼Œå½“å•ä½æ—¶é—´å†…çš„è¯·æ±‚æ¬¡æ•°è¶…å‡ºé¢„å®šé˜ˆå€¼å€¼ï¼Œåˆ™åˆ¤å®šè¯¥ç”¨æˆ·å¯†ä»¤æ˜¯æœ‰é—®é¢˜çš„ã€‚ä¾‹å¦‚ 1 ç§’å†…è¿ç»­è¶…è¿‡ 5 æ¬¡è¯·æ±‚ï¼Œåˆ™è§†ä¸ºç”¨æˆ·èº«ä»½éæ³•ï¼ŒæœåŠ¡ç«¯ç»ˆæ­¢è¯·æ±‚å¹¶å¼ºåˆ¶å°†è¯¥ç”¨æˆ·çš„ JWT å¯†ä»¤æ¸…é™¤ï¼Œç„¶åå›è·³åˆ°è®¤è¯ä¸­å¿ƒå¯¹ç”¨æˆ·èº«ä»½è¿›è¡ŒéªŒè¯ã€‚</li>
<li>å®¢æˆ·ç«¯ç¯å¢ƒæ£€æŸ¥ï¼šå¯¹äºä¸€äº›ç§»åŠ¨ç«¯åº”ç”¨æ¥è¯´ï¼Œå¯ä»¥å°†ç”¨æˆ·ä¿¡æ¯ä¸è®¾å¤‡(æ‰‹æœº,å¹³æ¿)çš„æœºå™¨ç è¿›è¡Œç»‘å®šï¼Œå¹¶å­˜å‚¨äºæœåŠ¡ç«¯ä¸­ï¼Œå½“å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œå¯ä»¥å…ˆæ ¡éªŒå®¢æˆ·ç«¯çš„æœºå™¨ç ä¸æœåŠ¡ç«¯çš„æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœä¸åŒ¹é…ï¼Œåˆ™è§†ä¸ºéæ³•è¯·æ±‚ï¼Œå¹¶ç»ˆæ­¢ç”¨æˆ·çš„åç»­è¯·æ±‚ã€‚</li>
</ol>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://jwt.io/introduction/" target="_blank" rel="noopener">https://jwt.io/introduction/</a></p>
]]></content>
      <categories>
        <category>æ¶æ„ä¹‹è·¯</category>
      </categories>
      <tags>
        <tag>Json Web Token</tag>
      </tags>
  </entry>
  <entry>
    <title>ç†è§£OAuth 2.0</title>
    <url>/2019/10/25/%E7%90%86%E8%A7%A3OAuth-2-0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘éœ€è¦æ¥å…¥åˆ°ç¬¬ä¸‰æ–¹åº”ç”¨ç™»é™†æ¥è§¦åˆ°äº†è¿™ä¸ª<a href="http://en.wikipedia.org/wiki/OAuth" target="_blank" rel="noopener">OAuth</a>æ¦‚å¿µï¼Œå®ƒæ˜¯ä¸€ä¸ªå…³äºæˆæƒï¼ˆauthorizationï¼‰çš„å¼€æ”¾ç½‘ç»œæ ‡å‡†ï¼Œåœ¨å…¨ä¸–ç•Œå¾—åˆ°å¹¿æ³›åº”ç”¨ï¼ˆQQï¼ŒGithubï¼Œå¾®åšç­‰ï¼‰ï¼Œç›®å‰çš„ç‰ˆæœ¬æ˜¯2.0ç‰ˆã€‚</p>
<p>æ‰€ä»¥è®°å½•ä¸‹OAuth 2.0çš„è®¾è®¡æ€è·¯å’Œè¿è¡Œæµç¨‹ï¼Œåšä¸€ä¸ªç®€æ˜é€šä¿—çš„è§£é‡Šï¼Œä¸»è¦å‚è€ƒææ–™ä¸º<a href="http://www.rfcreader.com/#rfc6749" target="_blank" rel="noopener">RFC 6749</a>ã€‚</p>
<a id="more"></a>
<h1 id="åè¯å®šä¹‰"><a href="#åè¯å®šä¹‰" class="headerlink" title="åè¯å®šä¹‰"></a>åè¯å®šä¹‰</h1><p>åœ¨è¯¦ç»†è®²è§£OAuth 2.0ä¹‹å‰ï¼Œéœ€è¦äº†è§£å‡ ä¸ªä¸“ç”¨åè¯ã€‚å®ƒä»¬å¯¹è¯»æ‡‚åé¢çš„è®²è§£ï¼Œå°¤å…¶æ˜¯å‡ å¼ å›¾ï¼Œè‡³å…³é‡è¦ã€‚</p>
<ul>
<li><strong>Third-party application</strong>ï¼šç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºï¼Œæœ¬æ–‡ä¸­åˆç§°â€å®¢æˆ·ç«¯â€ï¼ˆclientï¼‰ï¼Œå³ä¸Šä¸€èŠ‚ä¾‹å­ä¸­çš„â€äº‘å†²å°â€ã€‚</li>
<li><strong>HTTP service</strong>ï¼šHTTPæœåŠ¡æä¾›å•†ï¼Œæœ¬æ–‡ä¸­ç®€ç§°â€æœåŠ¡æä¾›å•†â€ã€‚</li>
<li><strong>User Agent</strong>ï¼šç”¨æˆ·ä»£ç†ï¼Œæœ¬æ–‡ä¸­å°±æ˜¯æŒ‡æµè§ˆå™¨ã€‚</li>
<li><strong>Authorization server</strong>ï¼šè®¤è¯æœåŠ¡å™¨ï¼Œå³æœåŠ¡æä¾›å•†ä¸“é—¨ç”¨æ¥å¤„ç†è®¤è¯çš„æœåŠ¡å™¨ã€‚</li>
<li><strong>Resource server</strong>ï¼šèµ„æºæœåŠ¡å™¨ï¼Œå³æœåŠ¡æä¾›å•†å­˜æ”¾ç”¨æˆ·ç”Ÿæˆçš„èµ„æºçš„æœåŠ¡å™¨ã€‚å®ƒä¸è®¤è¯æœåŠ¡å™¨ï¼Œå¯ä»¥æ˜¯åŒä¸€å°æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸åŒçš„æœåŠ¡å™¨ã€‚</li>
</ul>
<blockquote>
<p>OAuthçš„ä½œç”¨å°±æ˜¯è®©â€å®¢æˆ·ç«¯â€å®‰å…¨å¯æ§åœ°è·å–â€ç”¨æˆ·â€çš„æˆæƒï¼Œä¸â€æœåŠ¡å•†æä¾›å•†â€è¿›è¡Œäº’åŠ¨ã€‚</p>
</blockquote>
<h1 id="OAuthçš„æ€è·¯"><a href="#OAuthçš„æ€è·¯" class="headerlink" title="OAuthçš„æ€è·¯"></a>OAuthçš„æ€è·¯</h1><p>OAuthåœ¨â€å®¢æˆ·ç«¯â€ä¸â€æœåŠ¡æä¾›å•†â€ä¹‹é—´ï¼Œè®¾ç½®äº†ä¸€ä¸ªæˆæƒå±‚ï¼ˆauthorization layerï¼‰ã€‚â€å®¢æˆ·ç«¯â€ä¸èƒ½ç›´æ¥ç™»å½•â€æœåŠ¡æä¾›å•†â€ï¼Œåªèƒ½ç™»å½•æˆæƒå±‚ï¼Œä»¥æ­¤å°†ç”¨æˆ·ä¸å®¢æˆ·ç«¯åŒºåˆ†å¼€æ¥ã€‚â€å®¢æˆ·ç«¯â€ç™»å½•æˆæƒå±‚æ‰€ç”¨çš„ä»¤ç‰Œï¼ˆtokenï¼‰ï¼Œä¸ç”¨æˆ·çš„å¯†ç ä¸åŒã€‚ç”¨æˆ·å¯ä»¥åœ¨ç™»å½•çš„æ—¶å€™ï¼ŒæŒ‡å®šæˆæƒå±‚ä»¤ç‰Œçš„æƒé™èŒƒå›´å’Œæœ‰æ•ˆæœŸã€‚</p>
<p>â€œå®¢æˆ·ç«¯â€ç™»å½•æˆæƒå±‚ä»¥åï¼Œâ€æœåŠ¡æä¾›å•†â€æ ¹æ®ä»¤ç‰Œçš„æƒé™èŒƒå›´å’Œæœ‰æ•ˆæœŸï¼Œå‘â€å®¢æˆ·ç«¯â€å¼€æ”¾ç”¨æˆ·å‚¨å­˜çš„èµ„æ–™ã€‚</p>
<h1 id="è¿è¡Œæµç¨‹"><a href="#è¿è¡Œæµç¨‹" class="headerlink" title="è¿è¡Œæµç¨‹"></a>è¿è¡Œæµç¨‹</h1><p>OAuth 2.0çš„è¿è¡Œæµç¨‹å¦‚ä¸‹å›¾ï¼Œæ‘˜è‡ªRFC 6749ã€‚</p>
<p><img src="1.png" alt></p>
<blockquote>
<p>ï¼ˆAï¼‰ç”¨æˆ·æ‰“å¼€å®¢æˆ·ç«¯ä»¥åï¼Œå®¢æˆ·ç«¯è¦æ±‚ç”¨æˆ·ç»™äºˆæˆæƒã€‚</p>
<p>ï¼ˆBï¼‰ç”¨æˆ·åŒæ„ç»™äºˆå®¢æˆ·ç«¯æˆæƒã€‚</p>
<p>ï¼ˆCï¼‰å®¢æˆ·ç«¯ä½¿ç”¨ä¸Šä¸€æ­¥è·å¾—çš„æˆæƒï¼Œå‘è®¤è¯æœåŠ¡å™¨ç”³è¯·ä»¤ç‰Œã€‚</p>
<p>ï¼ˆDï¼‰è®¤è¯æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯è¿›è¡Œè®¤è¯ä»¥åï¼Œç¡®è®¤æ— è¯¯ï¼ŒåŒæ„å‘æ”¾ä»¤ç‰Œã€‚</p>
<p>ï¼ˆEï¼‰å®¢æˆ·ç«¯ä½¿ç”¨ä»¤ç‰Œï¼Œå‘èµ„æºæœåŠ¡å™¨ç”³è¯·è·å–èµ„æºã€‚</p>
<p>ï¼ˆFï¼‰èµ„æºæœåŠ¡å™¨ç¡®è®¤ä»¤ç‰Œæ— è¯¯ï¼ŒåŒæ„å‘å®¢æˆ·ç«¯å¼€æ”¾èµ„æºã€‚</p>
</blockquote>
<p>ä¸Šé¢å…­ä¸ªæ­¥éª¤ä¹‹ä¸­ï¼ŒBæ˜¯å…³é”®ï¼Œå³ç”¨æˆ·æ€æ ·æ‰èƒ½ç»™äºå®¢æˆ·ç«¯æˆæƒã€‚æœ‰äº†è¿™ä¸ªæˆæƒä»¥åï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥è·å–ä»¤ç‰Œï¼Œè¿›è€Œå‡­ä»¤ç‰Œè·å–èµ„æºã€‚</p>
<p>ä¸‹é¢è®²è§£å®¢æˆ·ç«¯è·å–æˆæƒçš„å››ç§æ¨¡å¼ã€‚</p>
<h1 id="å®¢æˆ·ç«¯çš„æˆæƒæ¨¡å¼"><a href="#å®¢æˆ·ç«¯çš„æˆæƒæ¨¡å¼" class="headerlink" title="å®¢æˆ·ç«¯çš„æˆæƒæ¨¡å¼"></a>å®¢æˆ·ç«¯çš„æˆæƒæ¨¡å¼</h1><p>å®¢æˆ·ç«¯å¿…é¡»å¾—åˆ°ç”¨æˆ·çš„æˆæƒï¼ˆauthorization grantï¼‰ï¼Œæ‰èƒ½è·å¾—ä»¤ç‰Œï¼ˆaccess tokenï¼‰ã€‚OAuth 2.0å®šä¹‰äº†å››ç§æˆæƒæ–¹å¼ã€‚</p>
<ul>
<li>æˆæƒç æ¨¡å¼ï¼ˆauthorization codeï¼‰</li>
<li>ç®€åŒ–æ¨¡å¼ï¼ˆimplicitï¼‰</li>
<li>å¯†ç æ¨¡å¼ï¼ˆresource owner password credentialsï¼‰</li>
<li>å®¢æˆ·ç«¯æ¨¡å¼ï¼ˆclient credentialsï¼‰</li>
</ul>
<h2 id="æˆæƒç æ¨¡å¼"><a href="#æˆæƒç æ¨¡å¼" class="headerlink" title="æˆæƒç æ¨¡å¼"></a>æˆæƒç æ¨¡å¼</h2><p>æˆæƒç æ¨¡å¼ï¼ˆauthorization codeï¼‰æ˜¯åŠŸèƒ½æœ€å®Œæ•´ã€æµç¨‹æœ€ä¸¥å¯†çš„æˆæƒæ¨¡å¼ã€‚å®ƒçš„ç‰¹ç‚¹å°±æ˜¯é€šè¿‡å®¢æˆ·ç«¯çš„åå°æœåŠ¡å™¨ï¼Œä¸â€æœåŠ¡æä¾›å•†â€çš„è®¤è¯æœåŠ¡å™¨è¿›è¡Œäº’åŠ¨ã€‚</p>
<p><img src="authorizationcode.png" alt></p>
<p>å®ƒçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ï¼ˆAï¼‰ç”¨æˆ·è®¿é—®å®¢æˆ·ç«¯ï¼Œåè€…å°†å‰è€…å¯¼å‘è®¤è¯æœåŠ¡å™¨ã€‚</p>
<p>ï¼ˆBï¼‰ç”¨æˆ·é€‰æ‹©æ˜¯å¦ç»™äºˆå®¢æˆ·ç«¯æˆæƒã€‚</p>
<p>ï¼ˆCï¼‰å‡è®¾ç”¨æˆ·ç»™äºˆæˆæƒï¼Œè®¤è¯æœåŠ¡å™¨å°†ç”¨æˆ·å¯¼å‘å®¢æˆ·ç«¯äº‹å…ˆæŒ‡å®šçš„â€é‡å®šå‘URIâ€ï¼ˆredirection URIï¼‰ï¼ŒåŒæ—¶é™„ä¸Šä¸€ä¸ªæˆæƒç ã€‚</p>
<p>ï¼ˆDï¼‰å®¢æˆ·ç«¯æ”¶åˆ°æˆæƒç ï¼Œé™„ä¸Šæ—©å…ˆçš„â€é‡å®šå‘URIâ€ï¼Œå‘è®¤è¯æœåŠ¡å™¨ç”³è¯·ä»¤ç‰Œã€‚è¿™ä¸€æ­¥æ˜¯åœ¨å®¢æˆ·ç«¯çš„åå°çš„æœåŠ¡å™¨ä¸Šå®Œæˆçš„ï¼Œå¯¹ç”¨æˆ·ä¸å¯è§ã€‚</p>
<p>ï¼ˆEï¼‰è®¤è¯æœåŠ¡å™¨æ ¸å¯¹äº†æˆæƒç å’Œé‡å®šå‘URIï¼Œç¡®è®¤æ— è¯¯åï¼Œå‘å®¢æˆ·ç«¯å‘é€è®¿é—®ä»¤ç‰Œï¼ˆaccess tokenï¼‰å’Œæ›´æ–°ä»¤ç‰Œï¼ˆrefresh tokenï¼‰ã€‚</p>
</blockquote>
<p>ä¸‹é¢æ˜¯ä¸Šé¢è¿™äº›æ­¥éª¤æ‰€éœ€è¦çš„å‚æ•°ã€‚</p>
<p>Aæ­¥éª¤ä¸­ï¼Œå®¢æˆ·ç«¯ç”³è¯·è®¤è¯çš„URIï¼ŒåŒ…å«ä»¥ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>response_typeï¼šè¡¨ç¤ºæˆæƒç±»å‹ï¼Œå¿…é€‰é¡¹ï¼Œæ­¤å¤„çš„å€¼å›ºå®šä¸ºâ€codeâ€</li>
<li>client_idï¼šè¡¨ç¤ºå®¢æˆ·ç«¯çš„IDï¼Œå¿…é€‰é¡¹</li>
<li>redirect_uriï¼šè¡¨ç¤ºé‡å®šå‘URIï¼Œå¯é€‰é¡¹</li>
<li>scopeï¼šè¡¨ç¤ºç”³è¯·çš„æƒé™èŒƒå›´ï¼Œå¯é€‰é¡¹</li>
<li>stateï¼šè¡¨ç¤ºå®¢æˆ·ç«¯çš„å½“å‰çŠ¶æ€ï¼Œå¯ä»¥æŒ‡å®šä»»æ„å€¼ï¼Œè®¤è¯æœåŠ¡å™¨ä¼šåŸå°ä¸åŠ¨åœ°è¿”å›è¿™ä¸ªå€¼ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line">GET /authorize?response_type=code&amp;client_id=s6BhdRkqt3&amp;state=xyz</span><br><span class="line">        &amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: server.example.com</span><br></pre></td></tr></table></figure>
<p>Cæ­¥éª¤ä¸­ï¼ŒæœåŠ¡å™¨å›åº”å®¢æˆ·ç«¯çš„URIï¼ŒåŒ…å«ä»¥ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>codeï¼šè¡¨ç¤ºæˆæƒç ï¼Œå¿…é€‰é¡¹ã€‚è¯¥ç çš„æœ‰æ•ˆæœŸåº”è¯¥å¾ˆçŸ­ï¼Œé€šå¸¸è®¾ä¸º10åˆ†é’Ÿï¼Œå®¢æˆ·ç«¯åªèƒ½ä½¿ç”¨è¯¥ç ä¸€æ¬¡ï¼Œå¦åˆ™ä¼šè¢«æˆæƒæœåŠ¡å™¨æ‹’ç»ã€‚è¯¥ç ä¸å®¢æˆ·ç«¯IDå’Œé‡å®šå‘URIï¼Œæ˜¯ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚</li>
<li>stateï¼šå¦‚æœå®¢æˆ·ç«¯çš„è¯·æ±‚ä¸­åŒ…å«è¿™ä¸ªå‚æ•°ï¼Œè®¤è¯æœåŠ¡å™¨çš„å›åº”ä¹Ÿå¿…é¡»ä¸€æ¨¡ä¸€æ ·åŒ…å«è¿™ä¸ªå‚æ•°ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 <span class="number">302</span> Found</span><br><span class="line"><span class="attribute">Location</span>: https://client.example.com/cb?code=SplxlOBeZQQYbYS6WxSbIA</span><br><span class="line">          &amp;state=xyz</span><br></pre></td></tr></table></figure>
<p>Dæ­¥éª¤ä¸­ï¼Œå®¢æˆ·ç«¯å‘è®¤è¯æœåŠ¡å™¨ç”³è¯·ä»¤ç‰Œçš„HTTPè¯·æ±‚ï¼ŒåŒ…å«ä»¥ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>grant_typeï¼šè¡¨ç¤ºä½¿ç”¨çš„æˆæƒæ¨¡å¼ï¼Œå¿…é€‰é¡¹ï¼Œæ­¤å¤„çš„å€¼å›ºå®šä¸ºâ€authorization_codeâ€ã€‚</li>
<li>codeï¼šè¡¨ç¤ºä¸Šä¸€æ­¥è·å¾—çš„æˆæƒç ï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>redirect_uriï¼šè¡¨ç¤ºé‡å®šå‘URIï¼Œå¿…é€‰é¡¹ï¼Œä¸”å¿…é¡»ä¸Aæ­¥éª¤ä¸­çš„è¯¥å‚æ•°å€¼ä¿æŒä¸€è‡´ã€‚</li>
<li>client_idï¼šè¡¨ç¤ºå®¢æˆ·ç«¯IDï¼Œå¿…é€‰é¡¹ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/token</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: server.example.com</span><br><span class="line"><span class="attribute">Authorization</span>: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</span><br><span class="line"><span class="attribute">Content-Type</span>: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">grant_type=authorization_code&amp;code=SplxlOBeZQQYbYS6WxSbIA</span><br><span class="line">&amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb</span><br></pre></td></tr></table></figure>
<p>Eæ­¥éª¤ä¸­ï¼Œè®¤è¯æœåŠ¡å™¨å‘é€çš„HTTPå›å¤ï¼ŒåŒ…å«ä»¥ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>access_tokenï¼šè¡¨ç¤ºè®¿é—®ä»¤ç‰Œï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>token_typeï¼šè¡¨ç¤ºä»¤ç‰Œç±»å‹ï¼Œè¯¥å€¼å¤§å°å†™ä¸æ•æ„Ÿï¼Œå¿…é€‰é¡¹ï¼Œå¯ä»¥æ˜¯bearerç±»å‹æˆ–macç±»å‹ã€‚</li>
<li>expires_inï¼šè¡¨ç¤ºè¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œå¿…é¡»å…¶ä»–æ–¹å¼è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</li>
<li>refresh_tokenï¼šè¡¨ç¤ºæ›´æ–°ä»¤ç‰Œï¼Œç”¨æ¥è·å–ä¸‹ä¸€æ¬¡çš„è®¿é—®ä»¤ç‰Œï¼Œå¯é€‰é¡¹ã€‚</li>
<li>scopeï¼šè¡¨ç¤ºæƒé™èŒƒå›´ï¼Œå¦‚æœä¸å®¢æˆ·ç«¯ç”³è¯·çš„èŒƒå›´ä¸€è‡´ï¼Œæ­¤é¡¹å¯çœç•¥ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Content-Type</span>: application/json;charset=UTF-8</span><br><span class="line"><span class="attribute">Cache-Control</span>: no-store</span><br><span class="line"><span class="attribute">Pragma</span>: no-cache</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">		"access_token":"2YotnFZFEjr1zCsicMWpAA",</span><br><span class="line">		"token_type":"example",</span><br><span class="line">		"expires_in":3600,</span><br><span class="line">		"refresh_token":"tGzv3JOkF0XG5Qx2TlKWIA",</span><br><span class="line">		"example_parameter":"example_value"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œç›¸å…³å‚æ•°ä½¿ç”¨JSONæ ¼å¼å‘é€ï¼ˆContent-Type: application/jsonï¼‰ã€‚æ­¤å¤–ï¼ŒHTTPå¤´ä¿¡æ¯ä¸­æ˜ç¡®æŒ‡å®šä¸å¾—ç¼“å­˜ã€‚</p>
<h2 id="ç®€åŒ–æ¨¡å¼"><a href="#ç®€åŒ–æ¨¡å¼" class="headerlink" title="ç®€åŒ–æ¨¡å¼"></a>ç®€åŒ–æ¨¡å¼</h2><p>ç®€åŒ–æ¨¡å¼ï¼ˆimplicit grant typeï¼‰ä¸é€šè¿‡ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºçš„æœåŠ¡å™¨ï¼Œç›´æ¥åœ¨æµè§ˆå™¨ä¸­å‘è®¤è¯æœåŠ¡å™¨ç”³è¯·ä»¤ç‰Œï¼Œè·³è¿‡äº†â€æˆæƒç â€è¿™ä¸ªæ­¥éª¤ï¼Œå› æ­¤å¾—åã€‚æ‰€æœ‰æ­¥éª¤åœ¨æµè§ˆå™¨ä¸­å®Œæˆï¼Œä»¤ç‰Œå¯¹è®¿é—®è€…æ˜¯å¯è§çš„ï¼Œä¸”å®¢æˆ·ç«¯ä¸éœ€è¦è®¤è¯ã€‚</p>
<p><img src="implicitgranttype.png" alt></p>
<p>å®ƒçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ï¼ˆAï¼‰å®¢æˆ·ç«¯å°†ç”¨æˆ·å¯¼å‘è®¤è¯æœåŠ¡å™¨ã€‚</p>
<p>ï¼ˆBï¼‰ç”¨æˆ·å†³å®šæ˜¯å¦ç»™äºå®¢æˆ·ç«¯æˆæƒã€‚</p>
<p>ï¼ˆCï¼‰å‡è®¾ç”¨æˆ·ç»™äºˆæˆæƒï¼Œè®¤è¯æœåŠ¡å™¨å°†ç”¨æˆ·å¯¼å‘å®¢æˆ·ç«¯æŒ‡å®šçš„â€é‡å®šå‘URIâ€ï¼Œå¹¶åœ¨URIçš„Hashéƒ¨åˆ†åŒ…å«äº†è®¿é—®ä»¤ç‰Œã€‚</p>
<p>ï¼ˆDï¼‰æµè§ˆå™¨å‘èµ„æºæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œå…¶ä¸­ä¸åŒ…æ‹¬ä¸Šä¸€æ­¥æ”¶åˆ°çš„Hashå€¼ã€‚</p>
<p>ï¼ˆEï¼‰èµ„æºæœåŠ¡å™¨è¿”å›ä¸€ä¸ªç½‘é¡µï¼Œå…¶ä¸­åŒ…å«çš„ä»£ç å¯ä»¥è·å–Hashå€¼ä¸­çš„ä»¤ç‰Œã€‚</p>
<p>ï¼ˆFï¼‰æµè§ˆå™¨æ‰§è¡Œä¸Šä¸€æ­¥è·å¾—çš„è„šæœ¬ï¼Œæå–å‡ºä»¤ç‰Œã€‚</p>
<p>ï¼ˆGï¼‰æµè§ˆå™¨å°†ä»¤ç‰Œå‘ç»™å®¢æˆ·ç«¯ã€‚</p>
</blockquote>
<p>ä¸‹é¢æ˜¯ä¸Šé¢è¿™äº›æ­¥éª¤æ‰€éœ€è¦çš„å‚æ•°ã€‚</p>
<p>Aæ­¥éª¤ä¸­ï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„HTTPè¯·æ±‚ï¼ŒåŒ…å«ä»¥ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>response_typeï¼šè¡¨ç¤ºæˆæƒç±»å‹ï¼Œæ­¤å¤„çš„å€¼å›ºå®šä¸ºâ€tokenâ€ï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>client_idï¼šè¡¨ç¤ºå®¢æˆ·ç«¯çš„IDï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>redirect_uriï¼šè¡¨ç¤ºé‡å®šå‘çš„URIï¼Œå¯é€‰é¡¹ã€‚</li>
<li>scopeï¼šè¡¨ç¤ºæƒé™èŒƒå›´ï¼Œå¯é€‰é¡¹ã€‚</li>
<li>stateï¼šè¡¨ç¤ºå®¢æˆ·ç«¯çš„å½“å‰çŠ¶æ€ï¼Œå¯ä»¥æŒ‡å®šä»»æ„å€¼ï¼Œè®¤è¯æœåŠ¡å™¨ä¼šåŸå°ä¸åŠ¨åœ°è¿”å›è¿™ä¸ªå€¼ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line">GET /authorize?response_type=token&amp;client_id=s6BhdRkqt3&amp;state=xyz</span><br><span class="line">        &amp;redirect_uri=https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: server.example.com</span><br></pre></td></tr></table></figure>
<p>Cæ­¥éª¤ä¸­ï¼Œè®¤è¯æœåŠ¡å™¨å›åº”å®¢æˆ·ç«¯çš„URIï¼ŒåŒ…å«ä»¥ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>access_tokenï¼šè¡¨ç¤ºè®¿é—®ä»¤ç‰Œï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>token_typeï¼šè¡¨ç¤ºä»¤ç‰Œç±»å‹ï¼Œè¯¥å€¼å¤§å°å†™ä¸æ•æ„Ÿï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>expires_inï¼šè¡¨ç¤ºè¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œå¿…é¡»å…¶ä»–æ–¹å¼è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</li>
<li>scopeï¼šè¡¨ç¤ºæƒé™èŒƒå›´ï¼Œå¦‚æœä¸å®¢æˆ·ç«¯ç”³è¯·çš„èŒƒå›´ä¸€è‡´ï¼Œæ­¤é¡¹å¯çœç•¥ã€‚</li>
<li>stateï¼šå¦‚æœå®¢æˆ·ç«¯çš„è¯·æ±‚ä¸­åŒ…å«è¿™ä¸ªå‚æ•°ï¼Œè®¤è¯æœåŠ¡å™¨çš„å›åº”ä¹Ÿå¿…é¡»ä¸€æ¨¡ä¸€æ ·åŒ…å«è¿™ä¸ªå‚æ•°ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 <span class="number">302</span> Found</span><br><span class="line"><span class="attribute">Location</span>: http://example.com/cb#access_token=2YotnFZFEjr1zCsicMWpAA</span><br><span class="line">               &amp;state=xyz&amp;token_type=example&amp;expires_in=3600</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè®¤è¯æœåŠ¡å™¨ç”¨HTTPå¤´ä¿¡æ¯çš„Locationæ ï¼ŒæŒ‡å®šæµè§ˆå™¨é‡å®šå‘çš„ç½‘å€ã€‚æ³¨æ„ï¼Œåœ¨è¿™ä¸ªç½‘å€çš„Hashéƒ¨åˆ†åŒ…å«äº†ä»¤ç‰Œã€‚</p>
<p>æ ¹æ®ä¸Šé¢çš„Dæ­¥éª¤ï¼Œä¸‹ä¸€æ­¥æµè§ˆå™¨ä¼šè®¿é—®LocationæŒ‡å®šçš„ç½‘å€ï¼Œä½†æ˜¯Hashéƒ¨åˆ†ä¸ä¼šå‘é€ã€‚æ¥ä¸‹æ¥çš„Eæ­¥éª¤ï¼ŒæœåŠ¡æä¾›å•†çš„èµ„æºæœåŠ¡å™¨å‘é€è¿‡æ¥çš„ä»£ç ï¼Œä¼šæå–å‡ºHashä¸­çš„ä»¤ç‰Œã€‚</p>
<h2 id="å¯†ç æ¨¡å¼"><a href="#å¯†ç æ¨¡å¼" class="headerlink" title="å¯†ç æ¨¡å¼"></a>å¯†ç æ¨¡å¼</h2><p>å¯†ç æ¨¡å¼ï¼ˆResource Owner Password Credentials Grantï¼‰ä¸­ï¼Œç”¨æˆ·å‘å®¢æˆ·ç«¯æä¾›è‡ªå·±çš„ç”¨æˆ·åå’Œå¯†ç ã€‚å®¢æˆ·ç«¯ä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼Œå‘â€æœåŠ¡å•†æä¾›å•†â€ç´¢è¦æˆæƒã€‚</p>
<p>åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œç”¨æˆ·å¿…é¡»æŠŠè‡ªå·±çš„å¯†ç ç»™å®¢æˆ·ç«¯ï¼Œä½†æ˜¯å®¢æˆ·ç«¯ä¸å¾—å‚¨å­˜å¯†ç ã€‚è¿™é€šå¸¸ç”¨åœ¨ç”¨æˆ·å¯¹å®¢æˆ·ç«¯é«˜åº¦ä¿¡ä»»çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯æ˜¯æ“ä½œç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œæˆ–è€…ç”±ä¸€ä¸ªè‘—åå…¬å¸å‡ºå“ã€‚è€Œè®¤è¯æœåŠ¡å™¨åªæœ‰åœ¨å…¶ä»–æˆæƒæ¨¡å¼æ— æ³•æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½è€ƒè™‘ä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚</p>
<p><img src="ResourceOwnerPasswordCredentialsGrant.png" alt></p>
<p>å®ƒçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ï¼ˆAï¼‰ç”¨æˆ·å‘å®¢æˆ·ç«¯æä¾›ç”¨æˆ·åå’Œå¯†ç ã€‚</p>
<p>ï¼ˆBï¼‰å®¢æˆ·ç«¯å°†ç”¨æˆ·åå’Œå¯†ç å‘ç»™è®¤è¯æœåŠ¡å™¨ï¼Œå‘åè€…è¯·æ±‚ä»¤ç‰Œã€‚</p>
<p>ï¼ˆCï¼‰è®¤è¯æœåŠ¡å™¨ç¡®è®¤æ— è¯¯åï¼Œå‘å®¢æˆ·ç«¯æä¾›è®¿é—®ä»¤ç‰Œã€‚</p>
</blockquote>
<p>Bæ­¥éª¤ä¸­ï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„HTTPè¯·æ±‚ï¼ŒåŒ…å«ä»¥ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>grant_typeï¼šè¡¨ç¤ºæˆæƒç±»å‹ï¼Œæ­¤å¤„çš„å€¼å›ºå®šä¸ºâ€passwordâ€ï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>usernameï¼šè¡¨ç¤ºç”¨æˆ·åï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>passwordï¼šè¡¨ç¤ºç”¨æˆ·çš„å¯†ç ï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>scopeï¼šè¡¨ç¤ºæƒé™èŒƒå›´ï¼Œå¯é€‰é¡¹ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/token</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: server.example.com</span><br><span class="line"><span class="attribute">Authorization</span>: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</span><br><span class="line"><span class="attribute">Content-Type</span>: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">grant_type=password&amp;username=johndoe&amp;password=A3ddj3w</span><br></pre></td></tr></table></figure>
<p>Cæ­¥éª¤ä¸­ï¼Œè®¤è¯æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€è®¿é—®ä»¤ç‰Œï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Content-Type</span>: application/json;charset=UTF-8</span><br><span class="line"><span class="attribute">Cache-Control</span>: no-store</span><br><span class="line"><span class="attribute">Pragma</span>: no-cache</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">   "access_token":"2YotnFZFEjr1zCsicMWpAA",</span><br><span class="line">   "token_type":"example",</span><br><span class="line">   "expires_in":3600,</span><br><span class="line">   "refresh_token":"tGzv3JOkF0XG5Qx2TlKWIA",</span><br><span class="line">   "example_parameter":"example_value"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå„ä¸ªå‚æ•°çš„å«ä¹‰å‚è§ã€Šæˆæƒç æ¨¡å¼ã€‹ä¸€èŠ‚ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯ä¸å¾—ä¿å­˜ç”¨æˆ·çš„å¯†ç ã€‚</p>
<blockquote>
<p>ä¸ªäººè§‰å¾—è¿™ç§æ¨¡å¼å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œç”¨æˆ·éœ€è¦å¯¹ä½ çš„ç³»ç»Ÿéœ€è¦æœ‰æå¤§çš„ä¿¡ä»»åº¦æ‰ä¼šè¿™æ ·åšï¼Œæ‰€ä»¥å¾ˆå°‘ä¼šæœ‰è¿™ç§æ¨¡å¼çš„æˆæƒæ–¹å¼ã€‚</p>
</blockquote>
<h2 id="å®¢æˆ·ç«¯æ¨¡å¼"><a href="#å®¢æˆ·ç«¯æ¨¡å¼" class="headerlink" title="å®¢æˆ·ç«¯æ¨¡å¼"></a>å®¢æˆ·ç«¯æ¨¡å¼</h2><p>å®¢æˆ·ç«¯æ¨¡å¼ï¼ˆClient Credentials Grantï¼‰æŒ‡å®¢æˆ·ç«¯ä»¥è‡ªå·±çš„åä¹‰ï¼Œè€Œä¸æ˜¯ä»¥ç”¨æˆ·çš„åä¹‰ï¼Œå‘â€æœåŠ¡æä¾›å•†â€è¿›è¡Œè®¤è¯ã€‚ä¸¥æ ¼åœ°è¯´ï¼Œå®¢æˆ·ç«¯æ¨¡å¼å¹¶ä¸å±äºOAuthæ¡†æ¶æ‰€è¦è§£å†³çš„é—®é¢˜ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œç”¨æˆ·ç›´æ¥å‘å®¢æˆ·ç«¯æ³¨å†Œï¼Œå®¢æˆ·ç«¯ä»¥è‡ªå·±çš„åä¹‰è¦æ±‚â€æœåŠ¡æä¾›å•†â€æä¾›æœåŠ¡ï¼Œå…¶å®ä¸å­˜åœ¨æˆæƒé—®é¢˜ã€‚</p>
<p><img src="ClientCredentialsGrant.png" alt></p>
<p>å®ƒçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ï¼ˆAï¼‰å®¢æˆ·ç«¯å‘è®¤è¯æœåŠ¡å™¨è¿›è¡Œèº«ä»½è®¤è¯ï¼Œå¹¶è¦æ±‚ä¸€ä¸ªè®¿é—®ä»¤ç‰Œã€‚</p>
<p>ï¼ˆBï¼‰è®¤è¯æœåŠ¡å™¨ç¡®è®¤æ— è¯¯åï¼Œå‘å®¢æˆ·ç«¯æä¾›è®¿é—®ä»¤ç‰Œã€‚</p>
</blockquote>
<p>Aæ­¥éª¤ä¸­ï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„HTTPè¯·æ±‚ï¼ŒåŒ…å«ä»¥ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>grant<em>typeï¼šè¡¨ç¤ºæˆæƒç±»å‹ï¼Œæ­¤å¤„çš„å€¼å›ºå®šä¸ºâ€client</em>credentialsâ€ï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>scopeï¼šè¡¨ç¤ºæƒé™èŒƒå›´ï¼Œå¯é€‰é¡¹ã€‚</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/token</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: server.example.com</span><br><span class="line"><span class="attribute">Authorization</span>: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</span><br><span class="line"><span class="attribute">Content-Type</span>: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">grant_type=client_credentials</span><br></pre></td></tr></table></figure>
<p>è®¤è¯æœåŠ¡å™¨å¿…é¡»ä»¥æŸç§æ–¹å¼ï¼ŒéªŒè¯å®¢æˆ·ç«¯èº«ä»½ã€‚</p>
<p>Bæ­¥éª¤ä¸­ï¼Œè®¤è¯æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€è®¿é—®ä»¤ç‰Œï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">HTTP/1.1 <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Content-Type</span>: application/json;charset=UTF-8</span><br><span class="line"><span class="attribute">Cache-Control</span>: no-store</span><br><span class="line"><span class="attribute">Pragma</span>: no-cache</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">   "access_token":"2YotnFZFEjr1zCsicMWpAA",</span><br><span class="line">   "token_type":"example",</span><br><span class="line">   "expires_in":3600,</span><br><span class="line">   "example_parameter":"example_value"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå„ä¸ªå‚æ•°çš„å«ä¹‰å‚è§ã€Šæˆæƒç æ¨¡å¼ã€‹ä¸€èŠ‚ã€‚</p>
<h1 id="æ›´æ–°ä»¤ç‰Œ"><a href="#æ›´æ–°ä»¤ç‰Œ" class="headerlink" title="æ›´æ–°ä»¤ç‰Œ"></a>æ›´æ–°ä»¤ç‰Œ</h1><p>å¦‚æœç”¨æˆ·è®¿é—®çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯çš„â€è®¿é—®ä»¤ç‰Œâ€å·²ç»è¿‡æœŸï¼Œåˆ™éœ€è¦ä½¿ç”¨â€æ›´æ–°ä»¤ç‰Œâ€ç”³è¯·ä¸€ä¸ªæ–°çš„è®¿é—®ä»¤ç‰Œã€‚</p>
<p>å®¢æˆ·ç«¯å‘å‡ºæ›´æ–°ä»¤ç‰Œçš„HTTPè¯·æ±‚ï¼ŒåŒ…å«ä»¥ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>grant<em>typeï¼šè¡¨ç¤ºä½¿ç”¨çš„æˆæƒæ¨¡å¼ï¼Œæ­¤å¤„çš„å€¼å›ºå®šä¸ºâ€refresh</em>tokenâ€ï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>refresh_tokenï¼šè¡¨ç¤ºæ—©å‰æ”¶åˆ°çš„æ›´æ–°ä»¤ç‰Œï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>scopeï¼šè¡¨ç¤ºç”³è¯·çš„æˆæƒèŒƒå›´ï¼Œä¸å¯ä»¥è¶…å‡ºä¸Šä¸€æ¬¡ç”³è¯·çš„èŒƒå›´ï¼Œå¦‚æœçœç•¥è¯¥å‚æ•°ï¼Œåˆ™è¡¨ç¤ºä¸ä¸Šä¸€æ¬¡ä¸€è‡´ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/token</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: server.example.com</span><br><span class="line"><span class="attribute">Authorization</span>: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW</span><br><span class="line"><span class="attribute">Content-Type</span>: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">grant_type=refresh_token&amp;refresh_token=tGzv3JOkF0XG5Qx2TlKWIA</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html</a></p>
<p><a href="https://www.bilibili.com/video/av35979732?from=search&amp;seid=13491637330338351260" target="_blank" rel="noopener">https://www.bilibili.com/video/av35979732?from=search&amp;seid=13491637330338351260</a></p>
]]></content>
      <categories>
        <category>æ¶æ„ä¹‹è·¯</category>
      </categories>
      <tags>
        <tag>OAuth 2.0</tag>
      </tags>
  </entry>
  <entry>
    <title>Gradleæ„å»ºè„šæœ¬</title>
    <url>/2019/10/17/Gradle%E6%9E%84%E5%BB%BA%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>Gradleæä¾›äº†ä¸€ç§é¢†åŸŸç‰¹å®šè¯­è¨€ï¼Œç›®å‰åŒæ—¶æ”¯æŒ Groovy å’Œ Kotlin ã€‚åœ¨ Groovy æ„å»ºè„šæœ¬ä¸­ï¼ˆ.gradle) ä½ å¯ä»¥ä½¿ç”¨ä»»ä½• Groovy å…ƒç´ ã€‚</p>
<p>åœ¨ Kotlin æ„å»ºè„šæœ¬ä¸­ (.gradle.kts) ä½ å¯ä»¥ä½¿ç”¨ä»»ä½• Kotlin å…ƒç´ ã€‚</p>
<a id="more"></a>
<h1 id="é¡¹ç›®ï¼ˆProjectï¼‰å’Œä»»åŠ¡ï¼ˆTaskï¼‰"><a href="#é¡¹ç›®ï¼ˆProjectï¼‰å’Œä»»åŠ¡ï¼ˆTaskï¼‰" class="headerlink" title="é¡¹ç›®ï¼ˆProjectï¼‰å’Œä»»åŠ¡ï¼ˆTaskï¼‰"></a>é¡¹ç›®ï¼ˆProjectï¼‰å’Œä»»åŠ¡ï¼ˆTaskï¼‰</h1><p>Gradle æ„å»ºçš„ä¸€åˆ‡éƒ½æ˜¯åŸºäºä¸¤ä¸ªæ¦‚å¿µ ï¼šé¡¹ç›®å’Œä»»åŠ¡ï¼›</p>
<p>ä¸€ä¸ªæ„å»ºæ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªé¡¹ç›®ç»„æˆçš„ã€‚</p>
<p>é¡¹ç›®çš„æ¦‚å¿µæ¯”è¾ƒæŠ½è±¡ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª Project ç”¨äºç”Ÿæˆä¸€ä¸ª jar,ä¹Ÿå¯ä»¥å®šä¹‰ä¸ªé¡¹ç›®ç”¨äºç”Ÿæˆ war åŒ…ï¼Œè¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªé¡¹ç›®ç”¨äºå‘å¸ƒä¸Šä¼ ä½ çš„ warç­‰ã€‚</p>
<p>ä¸€ä¸ªé¡¹ç›®å°±æ˜¯åœ¨ä½ çš„ä¸šåŠ¡èŒƒå›´å†…ï¼Œè¢«ä½ æŠ½è±¡å‡ºæ¥çš„ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œä½ å¯ä»¥æ ¹æ®å·¥ç¨‹çš„å®é™…æƒ…å†µæŠ½è±¡å½’ç±»ï¼Œæœ€åè¿™ä¸€ä¸ªä¸ªçš„é¡¹ç›®ç»„æˆäº†æ•´ä¸ª Gradle æ„å»ºã€‚</p>
<p>ä¸€ä¸ªé¡¹ç›®åˆåŒ…å«å¾ˆå¤šä¸ªä»»åŠ¡ï¼Œæ¯ä¸ªé¡¹ç›®æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡ç»„æˆçš„ã€‚</p>
<p>ä»»åŠ¡å°±æ˜¯ä¸€ä¸ªæ“ä½œï¼Œä¸€ä¸ªåŸå­æ€§çš„æ“ä½œã€‚æ¯”å¦‚æ‰“ä¸ª jar åŒ…ï¼Œå¤åˆ¶ä¸€ä»½æ–‡ä»¶ï¼Œç¼–è¯‘ä¸€æ¬¡ java ä»£ç ç­‰ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªä»»åŠ¡ã€‚</p>
<h1 id="build-gradle-amp-Project-API"><a href="#build-gradle-amp-Project-API" class="headerlink" title="build.gradle &amp; Project API"></a>build.gradle &amp; Project API</h1><p>æ¯ä¸ªé¡¹ç›®éƒ½æœ‰ä¸€ä¸ª build.gradle æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯è¯¥é¡¹ç›®çš„æ„å»ºå…¥å£ï¼Œå¯ä»¥åœ¨è¿™è¿™ä¸ªæ–‡ä»¶é‡Œå¯¹è¯¥é¡¹ç›®è¿›è¡Œé…ç½®ï¼Œæ¯”å¦‚é…ç½®ç‰ˆæœ¬ï¼Œéœ€è¦å“ªäº›æ’ä»¶ï¼Œä¾èµ–å“ªäº›åº“ç­‰ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡é…ç½®è¿™ä¸ªæ–‡ä»¶æè¿°æˆ‘ä»¬çš„æ„å»ºï¼Œè¿™å…¶å®å°±æ˜¯ä¸€ä¸ªé…ç½®è„šæœ¬ã€‚</p>
<p>æ¯ä¸€ä¸ªè„šæœ¬åœ¨æ‰§è¡Œçš„æ—¶å€™éƒ½ä¼šè¢«å…³è”åˆ°ä¸€ä¸ª Project å®ä¾‹ä¸Šã€‚</p>
<p>åœ¨æ„å»ºç”Ÿå‘½å‘¨æœŸçš„åˆå§‹åŒ–é˜¶æ®µï¼ŒGradle ä¼šä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºä¸€ä¸ª Project å®ä¾‹ï¼Œå¹¶æ ¹æ® build.gradleçš„å†…å®¹é…ç½®è¿™ä¸ªå®ä¾‹ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ª build.gradle çš„é…ç½®éƒ½ä¼šè¢«é…ç½®åˆ° Project å®ä¾‹ä¸Šã€‚</p>
<p>å®é™…ä¸Šï¼Œbuild.gradle ä¸­å‡ ä¹æ‰€æœ‰çš„é¡¶çº§å±æ€§å’Œä»£ç å—éƒ½æ˜¯ Project ç±»çš„ APIï¼Œ</p>
<p>ä¸‹é¢é€šè¿‡è®¿é—® Project.name å±æ€§éªŒè¯ä¸€ä¸‹ã€‚</p>
<p>åœ¨ <code>build.gradle</code></p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">println <span class="string">"name is $name"</span></span><br><span class="line">println <span class="string">"project.name is $&#123;project.name&#125;"</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œ build ä»»åŠ¡ï¼Œä½ å°†ä¼šå¾—åˆ°ä¸‹é¢çš„è¾“å‡º,è¾“å‡ºçš„å€¼éƒ½æ˜¯ é¡¹ç›®çš„åå­—</p>
</blockquote>
<p>ç¬¬ä¸€æ¡è¯­å¥ä½¿ç”¨çš„æ˜¯Projectçš„é¡¶çº§å±æ€§ã€‚</p>
<p>ç¬¬äºŒæ¡è¯­å¥ä½¿ç”¨çš„ project å±æ€§ å¯ä»¥åœ¨è„šæœ¬çš„ä»»ä½•åœ°æ–¹è®¿é—®ï¼Œå®ƒä»£è¡¨çš„æ˜¯å½“å‰è„šæœ¬çš„Projectå¯¹è±¡ã€‚</p>
<p>åªæœ‰åœ¨ä½ å®šä¹‰äº†å’ŒProjectçš„æˆå‘˜ï¼ˆæ–¹æ³•ï¼Œå±æ€§ï¼‰åŒåçš„æ—¶å€™æ‰éœ€è¦ä½¿ç”¨ project ï¼Œå…¶ä»–æ—¶å€™ç›´æ¥ä½¿ç”¨ åç§°å³å¯è®¿é—®ï¼Œä¾‹å¦‚ç¬¬ä¸€æ¡è¯­å¥ã€‚</p>
<p><strong>ä¸€ä¸ªæ„å»ºæ˜¯ç”±å¤šä¸ªProjectç»„æˆçš„ï¼Œæ˜¯é€šè¿‡é¡¹ç›®æ ‘çš„å½¢å¼è¡¨ç¤ºçš„ã€‚</strong></p>
<p>å¯ä»¥åœ¨é¡¹ç›®æ ‘çš„æ ¹é¡¹ç›®å¯¹æ‰€æœ‰çš„é¡¹ç›®ç»Ÿä¸€é…ç½®ä¸€äº›é…ç½®ã€‚ä¾‹å¦‚ï¼Œåº”ç”¨çš„æ’ä»¶ï¼Œä¾èµ–çš„ Maven ä¸­å¿ƒåº“ç­‰ã€‚</p>
<p>ä¸ºæ‰€æœ‰å­é¡¹ç›®é…ç½®ä»“åº“ä¸º jcenter</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">subprojects&#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä¸ºæ‰€æœ‰å­é¡¹ç›®é…ç½® ä½¿ç”¨ Java æ’ä»¶</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">subprojects&#123;</span><br><span class="line">    apply <span class="string">plugin:</span><span class="string">'java'</span></span><br><span class="line">    repositories &#123;</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é™¤äº† subprojects è¿˜æœ‰ allprojects ,ä»åå­—å°±å¯ä»¥çœ‹å‡ºæ¥è¿™ä¸ä»…æ˜¯å¯¹å­é¡¹ç›®çš„é…ç½®è€Œæ˜¯å¯¹æ‰€æœ‰é¡¹ç›®çš„é…ç½®ã€‚</p>
<p>è¿™ä¸¤ä¸ªé…ç½®å…¶å®æ˜¯ä¸¤ä¸ªæ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ªé—­åŒ…å‚æ•°ï¼Œå¯¹é¡¹ç›®è¿›è¡Œéå†ï¼Œéå†çš„è¿‡ç¨‹ä¸­è°ƒç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„é—­åŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨é—­åŒ…é‡Œé…ç½®ï¼Œæ‰“å°ï¼Œè¾“å‡ºæˆ–è€…ä¿®æ”¹ Project çš„å±æ€§ã€‚</p>
<h1 id="Projectçš„å±æ€§"><a href="#Projectçš„å±æ€§" class="headerlink" title="Projectçš„å±æ€§"></a>Projectçš„å±æ€§</h1><p>Project å¯¹è±¡çš„å±æ€§åœ¨ è„šæœ¬å…¨å±€éƒ½æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚</p>
<p>ä¸‹é¢åˆ—å‡ºä¸€äº›å¸¸ç”¨çš„å±æ€§ï¼Œæ›´å…¨çš„å±æ€§å¯ä»¥åœ¨ Project API ä¸­æŸ¥è¯¢ã€‚</p>
<table>
<thead>
<tr>
<th>åå­—</th>
<th>ç±»å‹</th>
<th>é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>project</td>
<td>Project</td>
<td>Project å®ä¾‹</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>é¡¹ç›®åå­—</td>
</tr>
<tr>
<td>path</td>
<td>String</td>
<td>é¡¹ç›®çš„ç»å¯¹è·¯å¾„</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>é¡¹ç›®æè¿°</td>
</tr>
<tr>
<td>projectDir</td>
<td>File</td>
<td>é…ç½®è„šæœ¬æ‰€åœ¨çš„ç›®å½•</td>
</tr>
<tr>
<td>buildDir</td>
<td>File</td>
<td>projectDir/build è¾“å‡ºç›®å½•</td>
</tr>
<tr>
<td>group</td>
<td>Object</td>
<td>æœªæŒ‡å®š</td>
</tr>
<tr>
<td>version</td>
<td>Object</td>
<td>æœªæŒ‡å®š</td>
</tr>
<tr>
<td>ant</td>
<td>AntBuilder</td>
<td>AntBuilder å®ä¾‹</td>
</tr>
</tbody>
</table>
<h1 id="settings-gradle"><a href="#settings-gradle" class="headerlink" title="settings.gradle"></a>settings.gradle</h1><p>è¿™ä¸ªæ–‡ä»¶æ˜¯ç”± Gradle çº¦å®šå‘½åçš„ï¼Œé»˜è®¤åä¸º settings.gradle ï¼Œåœ¨åˆå§‹åŒ–é˜¶æ®µè¢«æ‰§è¡Œã€‚</p>
<p>å¯¹äºå¤šé¡¹ç›®æ„å»ºï¼Œå¿…é¡»åœ¨è¿™é‡Œå£°æ˜è¦å‚ä¸æ„å»ºçš„æ‰€æœ‰é¡¹ç›®ã€‚å¯¹äºå•é¡¹ç›®æ„å»ºå°±æ˜¯å¯é€‰çš„äº†ï¼Œå¯æœ‰å¯æ— ã€‚</p>
<p>Gradle æ˜¯å¦‚ä½•å¯»æ‰¾ settings.gradle çš„ï¼Ÿ</p>
<p>1.åœ¨å½“å‰ç›®å½•å¯»æ‰¾2.æ²¡æœ‰æ‰¾åˆ°çš„è¯å°±å»çˆ¶ç›®å½•å¯»æ‰¾3.ä»ç„¶æ²¡æœ‰æ‰¾åˆ°å°±æ˜¯æ˜¯å•é¡¹ç›®æ„å»ºäº†4.å¦‚æœæ‰¾åˆ°äº†å°±æ˜¯ç¡®å®šå…¶ä¸­çš„é¡¹ç›®ï¼Œå¦‚æœå½“å‰æ‰§è¡Œçš„é¡¹ç›®åœ¨ settings.gradle æœ‰å®šä¹‰å°±æ‰§è¡Œå¤šé¡¹ç›®æ„å»ºï¼Œå¦åˆ™å°±æ‰§è¡Œå•é¡¹ç›®æ„å»ºã€‚</p>
<p>ä¸€ä¸ªè„šæœ¬çš„å±æ€§è®¿é—®å’Œæ–¹æ³•è°ƒç”¨æ˜¯å§”æ‰˜ç»™ Project ç±»çš„å®ä¾‹çš„ï¼Œ</p>
<p>ç±»ä¼¼çš„ settings.gradle çš„å±æ€§è®¿é—®å’Œæ–¹æ³•è°ƒç”¨æ˜¯å§”æ‰˜ç»™ Settings ç±»çš„å®ä¾‹å¯¹è±¡çš„ã€‚</p>
<h1 id="script-API"><a href="#script-API" class="headerlink" title="script API"></a>script API</h1><p>å½“ Gradle æ‰§è¡Œ Groovy è„šæœ¬(.gradle)æ—¶ï¼Œä¼šç¼–è¯‘è„šæœ¬åˆ°å®ç°äº† <code>Script</code> çš„ç±»ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒScript æ¥å£ä¸­çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½å¯ä»¥åœ¨è„šæœ¬ä¸­ä½¿ç”¨ã€‚</p>
<p>å½“ Gradle æ‰§è¡Œ Kotlin è„šæœ¬(.gradle.kts)æ—¶,ä¼šç¼–è¯‘è„šæœ¬åˆ° <code>KotlinBuildScript</code>çš„å­ç±»ä¸­ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ KotlinBuildScript ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½å¯ä»¥åœ¨è„šæœ¬ä¸­ä½¿ç”¨ã€‚</p>
<p>æ›´è¯¦ç»†çš„å¯ä»¥å‚è€ƒ KotlinSettingsScript å’Œ KotlinInitScript ç±»ï¼Œåˆ†åˆ«ç”¨äºè®¾ç½®è„šæœ¬å’Œinitè„šæœ¬ã€‚</p>
<p>å†™çš„ç¡®å®æ˜¯è„šæœ¬ï¼Œä½†ä¸æ˜¯ç®€å•çš„è„šæœ¬ã€‚åœ¨è„šæœ¬é‡Œå¯ä»¥å®šä¹‰ Class ï¼Œå†…éƒ¨ç±»ï¼Œå¯¼å…¥åŒ…ï¼Œå®šä¹‰æ–¹æ³•ã€å¸¸é‡ã€æ¥å£ç­‰ã€‚</p>
<p>ä¸è¦æŠŠå®ƒå½“ä½œç®€å•çš„è„šæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥çµæ´»çš„ä½¿ç”¨ Java ï¼ŒGroovy ï¼ŒKotlin å’Œ Gradle.</p>
<p>ä¾‹å¦‚ å®šä¹‰ä¸€ä¸ªè·å–å½“å‰æ—¥æœŸçš„æ–¹æ³•</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> buildTime()&#123;</span><br><span class="line">     <span class="keyword">def</span> date = <span class="keyword">new</span> Date()</span><br><span class="line">     <span class="keyword">def</span> formattedDate = date.format(<span class="string">'yyyyMMdd'</span>)</span><br><span class="line">     <span class="keyword">return</span> formattedDate</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h1 id="å˜é‡-amp-é¢å¤–çš„è‡ªå®šä¹‰å±æ€§"><a href="#å˜é‡-amp-é¢å¤–çš„è‡ªå®šä¹‰å±æ€§" class="headerlink" title="å˜é‡ &amp; é¢å¤–çš„è‡ªå®šä¹‰å±æ€§"></a>å˜é‡ &amp; é¢å¤–çš„è‡ªå®šä¹‰å±æ€§</h1><p>Gradle æ”¯æŒä¸¤ç§å˜é‡ ï¼š</p>
<ul>
<li>å±€éƒ¨å˜é‡</li>
<li>è‡ªå®šä¹‰å±æ€§</li>
</ul>
<h2 id="å±€éƒ¨å˜é‡"><a href="#å±€éƒ¨å˜é‡" class="headerlink" title="å±€éƒ¨å˜é‡"></a>å±€éƒ¨å˜é‡</h2><p>å±€éƒ¨å˜é‡ä½¿ç”¨ def å…³é”®å­—å£°æ˜ï¼Œå±€éƒ¨å˜é‡åªèƒ½åœ¨å£°æ˜çš„èŒƒå›´å†…å¯è§ã€‚</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> myName = <span class="string">'local var'</span></span><br></pre></td></tr></table></figure>
<h1 id="é¢å¤–çš„è‡ªå®šä¹‰å±æ€§"><a href="#é¢å¤–çš„è‡ªå®šä¹‰å±æ€§" class="headerlink" title="é¢å¤–çš„è‡ªå®šä¹‰å±æ€§"></a>é¢å¤–çš„è‡ªå®šä¹‰å±æ€§</h1><p>Gradle é¢†åŸŸæ¨¡å‹ä¸­ æ‰€æœ‰çš„å¯¹è±¡ éƒ½å¯ä»¥æ·»åŠ é¢å¤–çš„è‡ªå®šä¹‰å±æ€§ã€‚</p>
<p>é€šè¿‡å¯¹è±¡çš„ ext å±æ€§å®ç°å¯¹è‡ªå®šä¹‰å±æ€§çš„æ·»åŠ ï¼Œè®¿é—®ï¼Œè®¾ç½®å€¼çš„æ“ä½œã€‚</p>
<p>æ·»åŠ ä¹‹åå¯ä»¥é€šè¿‡ ext å±æ€§å¯¹è‡ªå®šä¹‰å±æ€§è¯»å–å’Œè®¾ç½®ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æ·»åŠ å¤šä¸ªè‡ªå®šä¹‰å±æ€§ã€‚</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¸º project æ·»åŠ ä¸€ä¸ª age å±æ€§ å¹¶èµ‹å€¼ 20</span></span><br><span class="line"> ext.age = <span class="number">20</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">//ä¸º project æ·»åŠ ä¸¤ä¸ªå±æ€§</span></span><br><span class="line"> ext&#123;</span><br><span class="line">     phone =<span class="number">110</span></span><br><span class="line">     address = <span class="string">'404'</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> task myTask &#123;</span><br><span class="line">     <span class="comment">//ä¸º myTask ä»»åŠ¡æ·»åŠ å±æ€§</span></span><br><span class="line">     ext.myProperty = <span class="string">"myValue"</span></span><br><span class="line"> &#125;</span><br><span class="line"> task extra&#123;</span><br><span class="line">      doLast&#123;</span><br><span class="line">          println <span class="string">"project : age= $&#123;project.ext.age&#125;,phone= $&#123;project.ext.phone&#125; , address = $&#123;project.ext.address&#125;"</span></span><br><span class="line">          println <span class="string">"myTask :  $&#123;myTask.myProperty&#125;"</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ›å»ºä¸€ä¸ªä»»åŠ¡"><a href="#åˆ›å»ºä¸€ä¸ªä»»åŠ¡" class="headerlink" title="åˆ›å»ºä¸€ä¸ªä»»åŠ¡"></a>åˆ›å»ºä¸€ä¸ªä»»åŠ¡</h1><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task hello &#123;</span><br><span class="line">     doLast &#123;</span><br><span class="line">         println <span class="string">'Hello world!'</span></span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ task çœ‹ç€åƒä¸€ä¸ªå…³é”®å­—ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„åŸå‹æ˜¯ TaskContainer.create(ï¼‰</p>
<p>ä»»åŠ¡çš„åˆ›å»ºå°±æ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ç»™ Project æ·»åŠ ä¸€ä¸ª Task ç±»å‹çš„å±æ€§ï¼›</p>
<p>æ‰€ä»¥æ‰èƒ½ä½¿ç”¨ä»»åŠ¡åå­—å¼•ç”¨ä¸€äº›APIï¼Œä¾‹å¦‚ä¸ºä»»åŠ¡æ·»åŠ é¢å¤–çš„å±æ€§ã€‚</p>
<h1 id="ä»»åŠ¡ä¾èµ–å’Œä»»åŠ¡æ’åº"><a href="#ä»»åŠ¡ä¾èµ–å’Œä»»åŠ¡æ’åº" class="headerlink" title="ä»»åŠ¡ä¾èµ–å’Œä»»åŠ¡æ’åº"></a>ä»»åŠ¡ä¾èµ–å’Œä»»åŠ¡æ’åº</h1><p>ä¸€ä¸ªä»»åŠ¡å¯ä»¥ä¾èµ–å…¶ä»–ä»»åŠ¡æˆ–è€…åœ¨å…¶ä»–ä»»åŠ¡æ‰§è¡Œåå†æ‰§è¡Œã€‚</p>
<p>Gradle ç¡®ä¿åœ¨æ‰§è¡Œä»»åŠ¡æ—¶éµå®ˆæ‰€æœ‰ä»»åŠ¡ä¾èµ–æ€§å’Œæ’åºè§„åˆ™ï¼Œä»¥ä¾¿åœ¨æ‰€æœ‰ä¾èµ–é¡¹å’Œä»»ä½• â€œå¿…é¡»è¿è¡Œâ€ çš„ä»»åŠ¡æ‰§è¡Œä¹‹åå†æ‰§è¡Œä»»åŠ¡ã€‚</p>
<p>Gradle ä¸ºæˆ‘ä»¬æä¾›äº†å‡ ä¸ªæ–¹æ³•ç”¨æ¥æ§åˆ¶ä»»åŠ¡çš„ä¾èµ–å’Œæ’åºï¼Œå°±æ˜¯ä¸‹é¢è¿™å‡ ä¸ª</p>
<ul>
<li>Task.dependsOn(java.lang.Object[])</li>
<li>Task.setDependsOn(java.lang.Iterable)</li>
<li>Task.mustRunAfter(java.lang.Object[])</li>
<li>Task.setMustRunAfter(java.lang.Iterable)</li>
<li>Task.shouldRunAfter(java.lang.Object[])</li>
<li>Task.setShouldRunAfter(java.lang.Iterable)</li>
</ul>
<p>è¿™äº›æ–¹æ³•å¯ä»¥æ¥æ”¶ ä»»åŠ¡ï¼Œä»»åŠ¡åå­—ï¼Œè·¯å¾„ç­‰ï¼Œå…·ä½“å‚æ•°å¯ä»¥åœ¨ <a href="https://docs.gradle.org/current/userguide/more_about_tasks.html" target="_blank" rel="noopener">Taskæ–‡æ¡£</a> é‡ŒæŸ¥çœ‹</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task hello &#123;</span><br><span class="line">     doLast &#123;</span><br><span class="line">         println <span class="string">'Hello world!'</span></span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> task taskX &#123;</span><br><span class="line">     dependsOn hello</span><br><span class="line">     doLast&#123;</span><br><span class="line">         println <span class="string">"I'm  $name."</span></span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> task taskY &#123;</span><br><span class="line">     doFirst &#123;</span><br><span class="line">         println <span class="string">"I'm $name."</span></span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœ taskX è¦ä¾èµ– taskY çš„è¯ï¼Œå¹¶ä¸èƒ½ç›´æ¥å¼•ç”¨ï¼Œå› ä¸º taskY æ˜¯åœ¨ taskX ä¹‹åå®šä¹‰çš„ã€‚</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">task taskX &#123;</span><br><span class="line">     dependsOn <span class="string">'taskY'</span></span><br><span class="line">     doLast&#123;</span><br><span class="line">         println <span class="string">"I'm  $name."</span></span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h1 id="é»˜è®¤ä»»åŠ¡"><a href="#é»˜è®¤ä»»åŠ¡" class="headerlink" title="é»˜è®¤ä»»åŠ¡"></a>é»˜è®¤ä»»åŠ¡</h1><p>åœ¨æ²¡æœ‰æŒ‡å®šæ‰§è¡Œä»»åŠ¡çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨è„šæœ¬ä¸­å®šä¹‰é»˜è®¤ä»»åŠ¡ï¼Œä½¿ç”¨ defaultTasks æ–¹æ³•</p>
<p>è¿™ä¸ªæ–¹æ³•æ¥æ”¶ å­—ç¬¦ä¸²å‚æ•°ï¼Œä¼ å…¥ä»»åŠ¡çš„åç§°å³å¯</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">defaultTasks <span class="string">'hello'</span>,<span class="string">'taskY'</span></span><br></pre></td></tr></table></figure>
<h1 id="å¤–éƒ¨ä¾èµ–"><a href="#å¤–éƒ¨ä¾èµ–" class="headerlink" title="å¤–éƒ¨ä¾èµ–"></a>å¤–éƒ¨ä¾èµ–</h1><p>ç”¨æ·»åŠ å¤–éƒ¨ä¾èµ–ï¼Œå¿…é¡»æ·»åŠ ä¾èµ–æ‰€åœ¨ä»“åº“ã€‚ä¾‹å¦‚ jcenter,mavenï¼Œgoogleç­‰</p>
<p>æ·»åŠ  google ä»“åº“</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        mavenCentral()</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ Android çš„é¡¹ç›®ä¸­ï¼Œè¿™éƒ½æ˜¯æ”¾åœ¨æ ¹é¡¹ç›®é‡Œçš„ allprojects æ–¹æ³•é‡Œï¼Œå¯¹æ‰€æœ‰é¡¹ç›®ç»Ÿä¸€é…ç½®</p>
<p>æ·»åŠ å¤–éƒ¨ä¾èµ–</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    implementation <span class="string">'io.reactivex.rxjava2:rxjava:2.1.2'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ Android ä¸­ä¾èµ–çš„æ·»åŠ æ”¾åœ¨äº†å„ä¸ªmodule ä¸­ï¼ŒæŒ‰éœ€æ·»åŠ ï¼Œå“ªä¸ªæ¨¡å—éœ€è¦åœ¨å“ªä¸ªæ¨¡å—çš„æ„å»ºè„šæœ¬é‡Œæ·»åŠ ã€‚</p>
<p>ä¾èµ–å±æ€§åˆ†ä¸ºä¸‰éƒ¨åˆ†</p>
<ul>
<li>groupï¼šè¿™ä¸ªå±æ€§ç”¨æ¥æ ‡è¯†ä¸€ä¸ªç»„ç»‡ã€å…¬å¸æˆ–è€…é¡¹ç›®ï¼Œå¯ä»¥ç”¨ç‚¹å·åˆ†éš”ï¼Œä¾‹å¦‚ä¸Šé¢çš„ io.reactivex.rxjava2</li>
<li>nameï¼šnameå±æ€§å”¯ä¸€çš„æè¿°äº†è¿™ä¸ªä¾èµ–ï¼Œä¾‹å¦‚ä¸Šé¢çš„ rxjava</li>
<li>versionï¼šä¸€ä¸ªåº“å¯ä»¥æœ‰å¾ˆå¤šä¸ªç‰ˆæœ¬ã€‚ä¾‹å¦‚ä¸Šé¢çš„ 2.1.2</li>
</ul>
<p>å…¶ä¸­ implementation ä¸ºé…ç½®é¡¹ï¼Œé…ç½®ä¹Ÿæœ‰å¾ˆå¤šç§ç±»å‹ï¼Œ</p>
<table>
<thead>
<tr>
<th>æ–°é…ç½®(3.0å)</th>
<th>å¼ƒç”¨é…ç½®(3.0å‰)</th>
<th>è¯´æ˜</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>implementation</code></td>
<td><code>compile</code></td>
<td>ä¾èµ–é¡¹åœ¨ç¼–è¯‘æ—¶å¯¹æ¨¡å—å¯ç”¨ï¼Œå¹¶ä¸”ä»…åœ¨è¿è¡Œæ—¶å¯¹æ¨¡å—çš„æ¶ˆè´¹è€…å¯ç”¨ã€‚ å¯¹äºå¤§å‹å¤šé¡¹ç›®æ„å»ºï¼Œä½¿ç”¨<code>implementation</code>è€Œä¸æ˜¯<code>api/compile</code>å¯ä»¥æ˜¾è‘—ç¼©çŸ­æ„å»ºæ—¶é—´ï¼Œå› ä¸ºå®ƒå¯ä»¥å‡å°‘æ„å»ºç³»ç»Ÿéœ€è¦é‡æ–°ç¼–è¯‘çš„é¡¹ç›®é‡ã€‚ å¤§å¤šæ•°åº”ç”¨å’Œæµ‹è¯•æ¨¡å—éƒ½åº”ä½¿ç”¨æ­¤é…ç½®ã€‚</td>
<td>ä½¿ç”¨<code>implementation</code>æ–¹å¼æ¥ä¾èµ–é¡¹ç›®æˆ–åº“ï¼Œè¯¥åº“åœ¨ç¼–è¯‘æ—¶ï¼Œåªå¯¹å½“å‰çš„moduleå¯è§ï¼Œå¯¹å…¶ä»–çš„moduleä¸å¯è§ã€‚</td>
</tr>
<tr>
<td><code>api</code></td>
<td><code>compile</code></td>
<td>ä¾èµ–é¡¹åœ¨ç¼–è¯‘æ—¶å¯¹æ¨¡å—å¯ç”¨ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶è¿˜å¯¹æ¨¡å—çš„æ¶ˆè´¹è€…å¯ç”¨ã€‚ æ­¤é…ç½®çš„è¡Œä¸ºç±»ä¼¼äº<code>compile</code>ï¼ˆç°åœ¨å·²å¼ƒç”¨ï¼‰ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ‚¨åº”å½“ä»…åœ¨åº“æ¨¡å—ä¸­ä½¿ç”¨å®ƒã€‚ åº”ç”¨æ¨¡å—åº”ä½¿ç”¨<code>implementation</code>ï¼Œé™¤éæ‚¨æƒ³è¦å°†å…¶ API å…¬å¼€ç»™å•ç‹¬çš„æµ‹è¯•æ¨¡å—ã€‚</td>
<td>ä½¿ç”¨<code>api</code>æ–¹å¼æ¥ä¾èµ–é¡¹ç›®æˆ–åº“ï¼Œè¯¥åº“åœ¨ç¼–è¯‘å’Œè¿è¡Œæ—¶éƒ½å¯ä»¥å¯¹å…¶ä»–moduleå¯è§ã€‚</td>
</tr>
<tr>
<td><code>compileOnly</code></td>
<td><code>provided</code></td>
<td>ä¾èµ–é¡¹ä»…åœ¨ç¼–è¯‘æ—¶å¯¹æ¨¡å—å¯ç”¨ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘æˆ–è¿è¡Œæ—¶å¯¹å…¶æ¶ˆè´¹è€…ä¸å¯ç”¨ã€‚ æ­¤é…ç½®çš„è¡Œä¸ºç±»ä¼¼äº<code>provided</code>ï¼ˆç°åœ¨å·²å¼ƒç”¨ï¼‰ã€‚</td>
<td>ä½¿ç”¨<code>compileOnly</code>æ–¹å¼æ¥ä¾èµ–é¡¹ç›®æˆ–åº“ï¼Œè¯¥åº“ä»…åœ¨ç¼–è¯‘æ—¶æœ‰æ•ˆå¯ç”¨ã€‚</td>
</tr>
<tr>
<td><code>runtimeOnly</code></td>
<td><code>apk</code></td>
<td>ä¾èµ–é¡¹ä»…åœ¨è¿è¡Œæ—¶å¯¹æ¨¡å—åŠå…¶æ¶ˆè´¹è€…å¯ç”¨ã€‚ æ­¤é…ç½®çš„è¡Œä¸ºç±»ä¼¼äº<code>apk</code>ï¼ˆç°åœ¨å·²å¼ƒç”¨ï¼‰ã€‚</td>
<td>ä½¿ç”¨<code>runtimeOnly</code>æ–¹å¼æ¥ä¾èµ–é¡¹ç›®æˆ–åº“ï¼Œè¯¥åº“ä»…åœ¨è¿è¡Œæ—¶æœ‰æ•ˆå¯ç”¨ã€‚</td>
</tr>
</tbody>
</table>
<blockquote>
<p>æœ€åç•™ä¸ª DSL çš„æŸ¥è¯¢åœ°å€ï¼š<a href="https://docs.gradle.org/current/dsl/index.html" target="_blank" rel="noopener">https://docs.gradle.org/current/dsl/index.html</a></p>
</blockquote>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.cnblogs.com/skymxc/p/buildscript.html" target="_blank" rel="noopener">https://www.cnblogs.com/skymxc/p/buildscript.html</a></p>
<p><a href="https://www.jianshu.com/p/d183c3b554e5" target="_blank" rel="noopener">https://www.jianshu.com/p/d183c3b554e5</a></p>
<p><a href="https://docs.gradle.org/" target="_blank" rel="noopener">https://docs.gradle.org/</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Gradle</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾è§£TCP/IPåè®®</title>
    <url>/2019/10/16/%E5%9B%BE%E8%A7%A3TCP-IP%E5%8D%8F%E8%AE%AE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="TCP-IP-åè®®æ—"><a href="#TCP-IP-åè®®æ—" class="headerlink" title="TCP/IP åè®®æ—"></a>TCP/IP åè®®æ—</h1><p>Internet çš„æ ¸å¿ƒåè®®å°±æ˜¯ TCP/IPï¼Œå¹¿æ³›åº”ç”¨äºå±€åŸŸç½‘å’Œå¹¿åŸŸç½‘ï¼Œç›®å‰å·²æœ‰20+å¹´å‘å±•å²ï¼Œæ˜¯ç°ç”¨å›½é™…é€šè¡Œæ ‡å‡†ã€‚TCP/IP æ˜¯ä¸ªåè®®æ—ï¼ŒåŒ…å«æœ‰å¤šç§åè®®ï¼Œç½‘ç»œæ¨¡å‹åŠåˆ†å±‚å¦‚å›¾æ‰€ç¤º</p>
<a id="more"></a>
<p><img src="1.jpg" alt></p>
<h1 id="TCP-IP-äº”å±‚ç½‘ç»œæ¨¡å‹"><a href="#TCP-IP-äº”å±‚ç½‘ç»œæ¨¡å‹" class="headerlink" title="TCP/IP äº”å±‚ç½‘ç»œæ¨¡å‹"></a>TCP/IP äº”å±‚ç½‘ç»œæ¨¡å‹</h1><p><strong>åº”ç”¨å±‚ï¼š</strong>åº”ç”¨ç¨‹åºé€šè¿‡TCP/IPäº’è”ç½‘ç»œåå‘é€ã€æ¥å—æ•°æ®ã€‚é€‰æ‹©æ‰€éœ€æœåŠ¡ç±»å‹ï¼ŒæŒ‰ç…§ä¼ è¾“å±‚è¦æ±‚ç»„ç»‡æ•°æ®ï¼Œå‘ä¸‹ä¼ é€’æŠ¥æ–‡åºåˆ—æˆ–å­—èŠ‚æµ2ç§ç±»å‹ã€‚</p>
<p><strong>ä¼ è¾“å±‚ï¼š</strong>æä¾›åº”ç”¨å±‚é—´é€šä¿¡æœåŠ¡ï¼Œåˆç§°ç«¯åˆ°ç«¯é€šä¿¡ã€‚æä¾›å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡ï¼Œç¡®ä¿æ•°æ®å‡†ç¡®ã€æœ‰åºé€è¾¾ç›®çš„åœ°ã€‚æ•°æ®å‘é€åéœ€å¯¹æ–¹å›é€ç¡®è®¤ä¿¡æ¯ï¼Œæœ‰ä¸¢å¤±çš„æ•°æ®éœ€å‘é€æ–¹é‡å‘åˆ†ç»„ã€‚ä¼ è¾“çš„å¯¹è±¡æ˜¯ä¼ è¾“å±‚åˆ†ç»„ã€‚</p>
<p><strong>ç½‘ç»œå±‚ï¼š</strong>åˆç§°<strong>IPå±‚</strong>ï¼Œè´Ÿè´£æœºå™¨é—´é€šä¿¡ï¼Œæ¥æ”¶åˆ°ä¼ è¾“å±‚è¯·æ±‚åï¼Œå‘ç›®çš„åœ°ä¼ é€ä¿¡æ¯åˆ†ç»„ã€‚æ­¤åˆ†ç»„ä¼šè¢«å°è£…è¿›IPæ•°æ®æŠ¥ä¸­ï¼Œç”±è·¯ç”±é€‰æ‹©ç®—æ³•å†³å®šç›´é€ç›®çš„åœ°æˆ–å‘ç»™è·¯ç”±ï¼Œç„¶åå°†æ•°æ®å‘ä¸‹ä¼ é€’ç»™ç½‘ç»œæ¥å£å±‚ã€‚æ¥æ”¶åˆ°æ•°æ®æŠ¥æ—¶ï¼Œæ£€éªŒæ­£ç¡®æ€§ï¼Œç”±è·¯ç”±é€‰æ‹©ç®—æ³•å†³å®šæœ¬åœ°å¤„ç†æˆ–è½¬å‘ï¼Œè‹¥ç›®çš„åœ°å±äºæœ¬æœºæ‰€åœ¨ç½‘ç»œï¼Œå°±æŠŠæ•°æ®æŠ¥çš„æŠ¥å¤´å‰¥å»ï¼Œé€‰æ‹©é€‚å½“çš„ä¼ è¾“å±‚åè®®å‘ä¸Šä¼ é€’åˆ†ç»„ã€‚</p>
<p><strong>è¿æ¥å±‚ï¼š</strong>åˆç§°<strong>æ•°æ®é“¾è·¯å±‚</strong>ï¼Œå¤„äºTCP/IPåè®®å±‚ä¹‹ä¸‹ï¼Œè´Ÿè´£æ¥æ”¶IPæ•°æ®æŠ¥å¹¶å°†æ•°æ®æŠ¥é€šè¿‡é€‰å®šç½‘ç»œå‘é€å‡ºå»</p>
<p><strong>ç¡¬ä»¶å±‚ï¼š</strong>å¤„ç†è¿æ¥ç½‘ç»œçš„ç¡¬ä»¶éƒ¨åˆ†ã€‚åŒ…æ‹¬æ§åˆ¶æ“ä½œç³»ç»Ÿã€ç¡¬ä»¶çš„è®¾å¤‡é©±åŠ¨ã€NICï¼ˆNetwork Interface Cardï¼Œç½‘ç»œé€‚é…å™¨ï¼Œå³ç½‘å¡ï¼‰ï¼ŒåŠå…‰çº¤ç­‰ ç‰©ç†å¯è§éƒ¨åˆ†ï¼ˆè¿˜åŒ…æ‹¬è¿æ¥å™¨ç­‰ä¸€åˆ‡ä¼ è¾“åª’ä»‹ï¼‰</p>
<h1 id="TCP-IP-å†…å«åè®®èŒè´£"><a href="#TCP-IP-å†…å«åè®®èŒè´£" class="headerlink" title="TCP/IP å†…å«åè®®èŒè´£"></a>TCP/IP å†…å«åè®®èŒè´£</h1><p><img src="2.jpg" alt></p>
<h1 id="TCP-IP-åè®®ä¼ è¾“æ•°æ®æµç¨‹"><a href="#TCP-IP-åè®®ä¼ è¾“æ•°æ®æµç¨‹" class="headerlink" title="TCP/IP åè®®ä¼ è¾“æ•°æ®æµç¨‹"></a>TCP/IP åè®®ä¼ è¾“æ•°æ®æµç¨‹</h1><p>ä¼ è¾“æ§åˆ¶åè®®ï¼ˆTransmission Control Protocol,TCPï¼‰æ˜¯ Internet ä¼ è¾“å±‚åè®®ï¼Œæä¾›é¢å‘è¿æ¥çš„å¯é ä¼ è¾“æœåŠ¡ï¼Œå¯é æ€§ç”±é‡å‘æŠ€æœ¯ä¿è¯ã€‚TCP æŠ¥æ–‡é¦–éƒ¨çš„å¤§å°ä¸€å®šæ˜¯4å­—èŠ‚çš„å€æ•°ï¼Œå…¶ä¸­å›ºå®šé¦–éƒ¨å¤§å°ä¸º20å­—èŠ‚ä¸”ä¸å˜</p>
<p><img src="3.jpg" alt></p>
<p>TCP æ•°æ®åŒ…ç¤ºæ„å›¾</p>
<p>ACKï¼šç¡®è®¤ä½ï¼Œå½“å®ƒçš„å€¼ä¸º1æ—¶ï¼Œç¡®è®¤å·æ‰æ˜¯æœ‰æ•ˆçš„<br>SYNï¼šåŒæ­¥è¯·æ±‚ï¼ŒTCPè¿æ¥ä¸­è¿æ¥åŒæ–¹åå•†åˆå§‹çš„åºå·<br>RSTï¼šå¤ä½ï¼ŒTCPè¿æ¥ä¸­æ•°æ®ä¼ è¾“å‘ç”Ÿå¼‚å¸¸éœ€è¦é‡æ–°å‘é€<br>FIN ï¼šé€šä¿¡ç»“æŸåï¼Œå½“å®ƒçš„å€¼ä¸º1æ—¶æ‹†é™¤è¿æ¥</p>
<p><strong>TCP ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥</strong></p>
<p>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€SYNåŒ…ï¼ˆsyn=iï¼‰åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥SYN_SENDçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ã€‚SYNè¡¨ç¤ºåŒæ­¥åºåˆ—ç¼–ç ï¼ˆSynchronize Sequence Numbersï¼‰</p>
<p>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°synåŒ…ï¼Œå¿…é¡»ç¡®è®¤å®¢æˆ·çš„SYNï¼ˆack=i+1ï¼‰ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå‘é€ä¸€ä¸ªSYNåŒ…ï¼ˆseq=jï¼‰ï¼Œå³SYN+ACKåŒ…ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RECVçŠ¶æ€</p>
<p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACKçš„åŒ…åï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ…ACK(j+1)ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹</p>
<p><img src="4.jpg" alt></p>
<p><strong>TCP æ­£å¸¸æ•°æ®ä¼ è¾“è¿‡ç¨‹</strong></p>
<p>æœ¬å›¾è¡¨ç¤ºä¼ è¾“2ä¸ªæ•°æ®æŠ¥çš„è¿‡ç¨‹ã€‚ä¸»æœºAå‘Bå‘é€ç¬¬ä¸€ä¸ª N å­—èŠ‚çš„æ•°æ®åŒ…ï¼ŒSEQä¸º i ï¼Œä¸»æœºBæ”¶åˆ°åéœ€è¦ç«‹å³å‘ä¸»æœºAå‘é€ç¡®è®¤ACKåŒ…ï¼ŒACK = i + N +1 ï¼Œè¿™æ ·ä¸»æœºAæ‰å¯ç¡®è®¤æ•°æ®ä¼ è¾“æˆåŠŸã€‚ç¬¬äºŒä¸ªæ•°æ®åŒ…ä¼ è¾“æ—¶ï¼ŒSEQæ•°å€¼ = Rï¼Œä¸»æœºBæ”¶åˆ°åç«‹å³å›ä¼ ACKï¼Œæ­¤æ—¶ACK = R + N + 1ï¼Œä¹‹åæ•°æ®åŒ…ä¼ è¾“çš„è¿‡ç¨‹æŒç»­æ­¤æµç¨‹ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å‘é€æ–¹åªæœ‰æ”¶åˆ°ç›®æ ‡æ–¹çš„ç¡®è®¤åŒ…åæ‰ä¼šæ¸…é™¤ç¼“å†²åŒºä¸­çš„æ•°æ®</p>
<p>ACKç¡®è®¤ä½ = SEQæ•°æ®ç¼–å· + ä¼ é€’çš„å­—èŠ‚æ•°N + 1ã€‚ç¬¬ä¸€ä¸ªå­—èŠ‚çš„SEQç¼–å·ç”±æœ¬åœ°éšæœºäº§ç”Ÿï¼ŒSEQ+Nçš„ä½œç”¨æ˜¯ä¸ºäº†è®©ä¸»æœºAç¡®è®¤å‘é€ç»™ä¸»æœºBçš„æ•°æ®æ˜¯å¦å…¨éƒ¨æ¥æ”¶ / æ˜¯å¦å‡ºç°ä¸¢å¤±</p>
<p><img src="5.jpg" alt></p>
<p><strong>TCP æ•°æ®é‡ä¼ ä¸å¿«é‡ä¼ </strong></p>
<ul>
<li><strong>æ•°æ®é‡ä¼ </strong>ï¼šä¸»æœºAå‘ä¸»æœºBä¼ é€æ•°æ®ï¼Œä½†ä¸­é—´å‘ç”Ÿé”™è¯¯ï¼Œä¸»æœºBæœªèƒ½æ”¶åˆ°ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œä¸»æœºAæœªæ”¶åˆ°ä¸»æœºBçš„ACKç¡®è®¤åŒ…ï¼Œæ•…ä¸»æœºAå†æ¬¡é‡ä¼ æ­¤æ•°æ®åŒ…ã€‚ä¸»æœºAæ¯æ¬¡å‘é€æ•°æ®æ—¶éƒ½ä¼šå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œè§„å®šæ—¶é—´æ²¡æ”¶åˆ°å“åº”åŒ…åˆ™å¯åŠ¨é‡ä¼ </li>
<li><strong>å¿«é‡ä¼ </strong>ï¼šé‡ä¼ å‘ç”Ÿåœ¨è¶…æ—¶ä¹‹åï¼Œä½†å½“ä¸»æœºAæ”¶åˆ°3ä¸ªä»¥ä¸Šé‡å¤çš„ACKï¼Œå…¶å®å°±è¯´æ˜æœ‰æ•°æ®ä¸¢å¤±ï¼Œä¹Ÿéœ€è¦é‡ä¼ ï¼Œæ­¤æ—¶é‡ä¼ å®šæ—¶å™¨è¿˜æ²¡æœ‰ç»“æŸï¼Œæ‰€ä»¥å«å¿«é€Ÿé‡ä¼ </li>
</ul>
<p><img src="6.jpg" alt></p>
<p><strong>TCP å››æ¬¡æŒ¥æ‰‹ç»“æŸè¿æ¥</strong></p>
<p>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„æ•°æ®ä¼ é€ï¼Œå®¢æˆ·ç«¯è¿›å…¥FIN_WAIT_1çŠ¶æ€</p>
<p>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯æ”¶åˆ°FINåï¼Œå‘é€ä¸€ä¸ªACKç»™å®¢æˆ·ç«¯ï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼ˆä¸SYNç›¸åŒï¼Œä¸€ä¸ªFINå ç”¨ä¸€ä¸ªåºå·ï¼‰ï¼ŒæœåŠ¡ç«¯è¿›å…¥CLOSE_WAITçŠ¶æ€</p>
<p>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯å‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­æœåŠ¡ç«¯åˆ°å®¢æˆ·ç«¯çš„æ•°æ®ä¼ é€ï¼ŒæœåŠ¡ç«¯è¿›å…¥LAST_ACKçŠ¶æ€</p>
<p>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°FINåï¼Œå®¢æˆ·ç«¯è¿›å…¥TIME_WAITçŠ¶æ€ï¼Œæ¥ç€å‘é€ä¸€ä¸ªACKç»™æœåŠ¡ç«¯ï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼ŒæœåŠ¡ç«¯è¿›å…¥CLOSEDçŠ¶æ€ï¼Œå®Œæˆå››æ¬¡æŒ¥æ‰‹</p>
<p><img src="7.jpg" alt></p>
<h1 id="IP-åè®®æ•°æ®ä¼ è¾“æµç¨‹"><a href="#IP-åè®®æ•°æ®ä¼ è¾“æµç¨‹" class="headerlink" title="IP åè®®æ•°æ®ä¼ è¾“æµç¨‹"></a>IP åè®®æ•°æ®ä¼ è¾“æµç¨‹</h1><p>ç½‘ç»œåè®®ï¼ˆInternet Protocol,IPï¼‰é€šå¸¸è¢«è®¤ä¸ºæä¾›çš„æ˜¯æ— è¿æ¥å’Œä¸å¯é çš„ï¼Œä½†å®é™…ä¸Šï¼Œåœ¨ç½‘ç»œæ€§èƒ½è‰¯å¥½çš„æƒ…å†µä¸‹ï¼ŒIPä¼ é€çš„æ•°æ®èƒ½å¤Ÿå®Œå¥½æ— æŸçš„åˆ°è¾¾ç›®çš„åœ°</p>
<p>æ— è¿æ¥æ˜¯æŒ‡æ²¡æœ‰ç¡®å®šç›®æ ‡ç³»ç»Ÿæ˜¯å¦å·²åšå¥½æ¥æ”¶æ•°æ®çš„å‡†å¤‡ä¹‹å‰å°±å‘é€æ•°æ®ã€‚ä¸å¯é æ˜¯æŒ‡ç›®çš„ç³»ç»Ÿä¸å¯¹æˆåŠŸå®Œæˆæ¥æ”¶åˆ°çš„åˆ†ç»„è¿›è¡Œç¡®è®¤</p>
<p><img src="8.jpg" alt></p>
<p><strong>IP å‘é€æ•°æ®</strong></p>
<p>å‘é€æ•°æ®æ—¶ï¼Œæºè®¡ç®—æœºä¸Šçš„IPåè®®éœ€è¦ç¡®å®šç›®çš„åœ°æ˜¯å¦åœ¨åŒä¸€ç½‘ç»œï¼Œè‹¥ç›®çš„åœ°åœ¨åŒä¸€ç½‘ç»œï¼Œä½¿ç”¨ç›´è¾¾é€šä¿¡ï¼Œè‹¥ä¸åœ¨åŒä¸€ç½‘ç»œï¼Œåˆ™éœ€è¦é€šè¿‡ç½‘å…³æˆ–è·¯ç”±å™¨å®Œæˆé€šä¿¡ï¼š</p>
<p>ä¸»æœºAç»„è£…ç›®çš„IPåœ°å€ä¸ºä¸»æœºBçš„æ•°æ®æŠ¥ï¼Œä¹‹åè¿›è¡Œè·¯ç”±é€‰æ‹©ï¼Œå†å°†æ¬¡æ•°æ®æŠ¥å‘é€è‡³é»˜è®¤è·¯ç”±å™¨ï¼ˆç”±APRåœ°å€è§£æç¡®å®šè·¯ç”±å™¨ï¼Œå¾—åˆ°ä¸‹ä¸€é»˜è®¤è·¯ç”±å™¨IPåœ°å€ä¸MACåœ°å€çš„æ˜ å°„å…³ç³»ï¼Œç„¶åä»¥è¯¥MACåœ°å€ä¸ºå¸§çš„ç›®çš„åœ°å€å½¢æˆä¸€ä¸ªå¸§ï¼Œå¹¶å°†IPæ•°æ®æŠ¥å°è£…åœ¨å¸§çš„æ•°æ®åŒºï¼Œæœ€åç”±å…·ä½“çš„ç‰©ç†ç½‘ç»œï¼ˆä»¥å¤ªç½‘ï¼‰å®Œæˆæ•°æ®æŠ¥çš„çœŸæ­£ä¼ è¾“ï¼‰</p>
<p><strong>IP è½¬å‘æ•°æ®</strong></p>
<p>è·¯ç”±å™¨æ¥æ”¶åˆ°ä¸»æœºAçš„æ•°æ®å¸§åï¼Œå»æ‰å¸§å¤´å¹¶å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œå‘ç°æ­¤æ•°æ®æŠ¥çš„ç›®çš„åœ°éæœ¬åœ°ï¼Œéœ€è¦å°†å…¶è½¬å‘ï¼Œç”±è·¯ç”±é€‰æ‹©ç®—æ³•åŠæœ¬åœ°è·¯ç”±è¡¨ç¡®å®šä¸‹ä¸€è·³è·¯ç”±å™¨åœ°å€ï¼Œé€šè¿‡ARPåœ°å€è§£æç¡®å®šä¸‹ä¸€è·³è·¯ç”±çš„IPåœ°å€ä¸MACåœ°å€çš„æ˜ å°„å…³ç³»åï¼Œå°†è¯¥MACåœ°å€ä½œä¸ºæ•°æ®å¸§çš„ç›®çš„åœ°å°†æ•°æ®æŠ¥å°è£…ä¸ºæ•°æ®å¸§ï¼Œé€šè¿‡ä»¥å¤ªç½‘å®Œæˆæ•°æ®è½¬å‘ã€‚é‡å¤æ­¤æ­¥éª¤ç›´åˆ°ç¬¬Nä¸ªè·¯ç”±å™¨ä¸ç›®çš„åœ°ç›´è¿ï¼Œé€šè¿‡ARPåœ°å€è§£æç¡®å®šç›®çš„ä¸»æœºçš„IPåœ°å€ä¸MACåœ°å€çš„æ˜ å°„å…³ç³»ï¼Œåˆ©ç”¨è¯¥MACåœ°å€ä½œä¸ºå¸§çš„ç›®çš„åœ°å€ï¼Œå°†IPæ•°æ®æŠ¥å°è£…æˆå¸§ï¼Œå¹¶ç”±ä»¥å¤ªç½‘å®ç°æ•°æ®çš„çœŸæ­£ä¼ é€’</p>
<p><strong>IP æ¥æ”¶æ•°æ®</strong></p>
<p>ä¸»æœºBæ¥æ”¶åˆ°æ•°æ®å¸§åï¼Œè§£å°è¯¥å¸§å¹¶å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œç¡®å®šæœ¬æœºå³ä¸ºç›®çš„åœ°å€åï¼Œå°†æ•°æ®æŠ¥ä¸­å°è£…çš„æ•°æ®äº¤ç”±ä¸Šå±‚åè®®è¿›è¡Œå¤„ç†ï¼Œéšå³é€å±‚å¤„ç†å¹¶ä¸Šäº¤ç›´åˆ°åº”ç”¨å±‚ï¼Œå®Œæˆæ­¤æ¬¡é€šä¿¡</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><strong>TCP/IP äº”å¤§é‡è¦ç‰¹æ€§</strong></p>
<p><strong>é€»è¾‘ç¼–å€</strong>ï¼šé€šè¿‡IPåœ°å€+ä¸»æœºIDï¼Œç¡®ä¿è®¡ç®—æœºå¯å¯»</p>
<p><strong>è·¯ç”±é€‰æ‹©</strong>ï¼šé€šè¿‡ç½‘ç»œè·¯å¾„é€‰æ‹©åè®®ï¼Œç¡®ä¿æ•°æ®åŒ…åˆ°è¾¾ç›®çš„åœ°</p>
<p><strong>åŸŸåè§£æ</strong>ï¼šå°†åŸŸåæ˜ å°„ä¸ºIPåœ°å€ï¼Œä½¿ç”¨åŸŸåä¸€æ˜¯ä¾¿äºè®°å¿†ï¼ŒäºŒæ˜¯åŸŸåç›¸å¯¹å›ºå®šä¸å˜</p>
<p><strong>é”™è¯¯æ£€æµ‹</strong>ï¼šç¡®ä¿åˆ†ç»„äº¤æ¢çš„å¯é æ€§ä¼ é€’ï¼Œç¡®è®¤æ•°æ®æ­£å¸¸æ¥æ”¶</p>
<p><strong>æµé‡æ§åˆ¶</strong>ï¼šç›‘æµ‹ç½‘ç»œæµé‡ï¼Œé˜²æ­¢ç½‘ç»œæ‹¥å¡å‡ºç°</p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>TCP/IP</tag>
      </tags>
  </entry>
  <entry>
    <title>è½¯ä»¶å·¥ç¨‹ä¹‹ç€‘å¸ƒæ¨¡å‹</title>
    <url>/2019/10/03/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B9%8B%E7%80%91%E5%B8%83%E6%A8%A1%E5%9E%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è½¯ä»¶å·¥ç¨‹ï¼ˆsoftware engineeringï¼‰çš„æœ¬è´¨ï¼šç”¨å·¥ç¨‹åŒ–çš„æ–¹æ³•å»è§„èŒƒè½¯ä»¶å¼€å‘ï¼Œè®©é¡¹ç›®å¯ä»¥æŒ‰æ—¶å®Œæˆã€æˆæœ¬å¯æ§ã€è´¨é‡æœ‰ä¿éšœã€‚</p>
<p>è€Œç€‘å¸ƒæ¨¡å‹åˆ™ç®—æ˜¯ç°ä»£å·¥ç¨‹è½¯ä»¶çš„èµ·æºï¼Œè½¯ä»¶å·¥ç¨‹çš„å‘å±•ï¼Œå¾ˆå¤šéƒ½æ˜¯æ„å»ºäºç€‘å¸ƒæ¨¡å‹åŸºç¡€ä¹‹ä¸Šçš„ã€‚</p>
<a id="more"></a>
<h1 id="ç€‘å¸ƒæ¨¡å‹çš„è¯ç”Ÿ"><a href="#ç€‘å¸ƒæ¨¡å‹çš„è¯ç”Ÿ" class="headerlink" title="ç€‘å¸ƒæ¨¡å‹çš„è¯ç”Ÿ"></a>ç€‘å¸ƒæ¨¡å‹çš„è¯ç”Ÿ</h1><p>ä¸ºäº†è§£å†³è½¯ä»¶å±æœºä¸­çš„è¿™äº›é—®é¢˜ï¼Œåœ¨ 1970 å¹´ï¼ŒWinston Royce åšå£«å€Ÿé‰´äº†å…¶ä»–å·¥ç¨‹é¢†åŸŸçš„æ€æƒ³ï¼Œæ¯”å¦‚å»ºç­‘å·¥ç¨‹ï¼Œæå‡ºäº†ç€‘å¸ƒå¼€å‘æ¨¡å‹ï¼ŒæŒ‡å‡ºè½¯ä»¶å¼€å‘åº”æœ‰å®Œæ•´ä¹‹å‘¨æœŸï¼Œå¹¶å°†è½¯ä»¶å¼€å‘è¿‡ç¨‹åˆ†æˆäº†è‹¥å¹²é˜¶æ®µã€‚åƒç€‘å¸ƒä¸€æ ·ï¼Œä»ä¸Šå¾€ä¸‹ï¼Œå®Œæˆä¸€ä¸ªé˜¶æ®µç»§ç»­ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚</p>
<p><img src="pubumoxing.jpeg" alt></p>
<p>ç€‘å¸ƒæ¨¡å‹æŠŠæ•´ä¸ªé¡¹ç›®è¿‡ç¨‹åˆ†æˆäº†å…­ä¸ªä¸»è¦é˜¶æ®µï¼š</p>
<ul>
<li><p>ä¸€ã€é—®é¢˜çš„å®šä¹‰åŠè§„åˆ’</p>
<p>è¿™ä¸ªé˜¶æ®µæ˜¯éœ€æ±‚æ–¹å’Œå¼€å‘æ–¹å…±åŒç¡®å®šè½¯ä»¶å¼€å‘ç›®æ ‡ï¼ŒåŒæ—¶è¿˜è¦åšå¯è¡Œæ€§ç ”ç©¶ï¼Œä»¥ç¡®å®šé¡¹ç›®å¯è¡Œã€‚è¿™ä¸ªé˜¶æ®µä¼šäº§ç”Ÿéœ€æ±‚æ–‡æ¡£å’Œå¯è¡Œæ€§ç ”ç©¶æŠ¥å‘Šã€‚</p>
</li>
<li><p>äºŒã€éœ€æ±‚åˆ†æ</p>
<p>å¯¹éœ€æ±‚æ–¹æå‡ºçš„æ‰€æœ‰éœ€æ±‚ï¼Œè¿›è¡Œè¯¦ç»†çš„åˆ†æã€‚è¿™ä¸ªé˜¶æ®µéœ€è¦å’Œå®¢æˆ·åå¤ç¡®è®¤ï¼Œä»¥ä¿è¯èƒ½å……åˆ†ç†è§£å®¢æˆ·éœ€æ±‚ã€‚æœ€ç»ˆå½¢æˆéœ€æ±‚åˆ†ææ–‡æ¡£ã€‚</p>
</li>
<li><p>ä¸‰ã€è½¯ä»¶è®¾è®¡</p>
<p>æ ¹æ®éœ€æ±‚åˆ†æçš„ç»“æœï¼Œå¯¹æ•´ä¸ªè½¯ä»¶ç³»ç»Ÿè¿›è¡ŒæŠ½è±¡å’Œè®¾è®¡ï¼Œå¦‚ç³»ç»Ÿæ¡†æ¶è®¾è®¡ï¼Œæ•°æ®åº“è®¾è®¡ç­‰ç­‰ã€‚æœ€ç»ˆè¡Œç¨‹æ¶æ„è®¾è®¡æ–‡æ¡£ã€‚</p>
</li>
<li><p>å››ã€ç¨‹åºç¼–ç </p>
<p>å°†æ¶æ„è®¾è®¡å’Œç•Œé¢è®¾è®¡çš„ç»“æœè½¬æ¢æˆè®¡ç®—æœºèƒ½è¿è¡Œçš„ç¨‹åºä»£ç ã€‚</p>
</li>
<li><p>äº”ã€è½¯ä»¶æµ‹è¯•</p>
<p>åœ¨ç¼–ç å®Œæˆåï¼Œå¯¹å¯è¿è¡Œçš„ç»“æœå¯¹ç…§éœ€æ±‚åˆ†ææ–‡æ¡£è¿›è¡Œä¸¥å¯†çš„æµ‹è¯•ã€‚å¦‚æœæµ‹è¯•å‘ç°é—®é¢˜ï¼Œéœ€è¦è¿›è¡Œä¿®å¤ã€‚æœ€ç»ˆæµ‹è¯•å®Œæˆåï¼Œå½¢æˆæµ‹è¯•æŠ¥å‘Šã€‚</p>
</li>
<li><p>å…­ã€è¿è¡Œç»´æŠ¤</p>
<p>åœ¨è½¯ä»¶å¼€å‘å®Œæˆï¼Œæ­£å¼è¿è¡Œä¸Šçº¿åï¼Œéœ€è¦ç»§ç»­ç»´æŠ¤ï¼Œä¿®å¤é”™è¯¯å’Œå¢åŠ åŠŸèƒ½ï¼Œäº¤ä»˜æ—¶è¦æä¾›è¯´æ˜æ–‡æ¡£ã€‚</p>
</li>
</ul>
<blockquote>
<p>ç€‘å¸ƒæ¨¡å‹åœ¨æå‡ºåï¼Œå› ä¸ºå…¶ç®€å•å¯è¡Œï¼Œåˆ‡å®æœ‰æ•ˆï¼Œé©¬ä¸Šå°±åœ¨å¾ˆå¤šè½¯ä»¶é¡¹ç›®ä¸­åº”ç”¨èµ·æ¥ï¼Œä¸€ç›´åˆ° 2000 å¹´å‰åï¼Œéƒ½æ˜¯æœ€ä¸»æµçš„è½¯ä»¶å¼€å‘æ¨¡å‹ï¼Œå³ä½¿åˆ°ç°åœ¨ï¼Œä½ ä¹Ÿèƒ½åœ¨å¾ˆå¤šè½¯ä»¶é¡¹ç›®ä¸­çœ‹åˆ°å®ƒçš„å½±å­ã€‚</p>
<p><strong>ä¹Ÿæ˜¯ä»é‚£æ—¶å¼€å§‹ï¼Œæœ‰äº†â€œè½¯ä»¶ç”Ÿå‘½å‘¨æœŸâ€(Software Life Cycle,SLC) çš„æ¦‚å¿µã€‚</strong></p>
</blockquote>
<h1 id="ç€‘å¸ƒæ¨¡å‹è¿›è¡Œå¼€å‘é¡¹ç›®"><a href="#ç€‘å¸ƒæ¨¡å‹è¿›è¡Œå¼€å‘é¡¹ç›®" class="headerlink" title="ç€‘å¸ƒæ¨¡å‹è¿›è¡Œå¼€å‘é¡¹ç›®"></a>ç€‘å¸ƒæ¨¡å‹è¿›è¡Œå¼€å‘é¡¹ç›®</h1><p>è™½ç„¶ç°åœ¨ç€‘å¸ƒæ¨¡å‹å·²ç»ä¸æ˜¯æœ€ä¸»æµçš„å¼€å‘æ¨¡å¼ã€‚</p>
<p><strong>ä½†æ˜¯ä¸ç®¡ä»€ä¹ˆè½¯ä»¶é¡¹ç›®ï¼Œä¸ç®¡é‡‡ç”¨ä»€ä¹ˆå¼€å‘æ¨¡å¼ï¼Œæœ‰å››ç§æ´»åŠ¨æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œé‚£å°±æ˜¯éœ€æ±‚ã€è®¾è®¡ã€ç¼–ç å’Œæµ‹è¯•ã€‚è€Œè¿™å››é¡¹æ´»åŠ¨ï¼Œéƒ½æ˜¯èµ·æºè‡ªç€‘å¸ƒæ¨¡å‹ï¼Œä¹Ÿæ˜¯ç€‘å¸ƒæ¨¡å‹ä¸­æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚</strong></p>
<p>è¿™é‡Œä½¿ç”¨æ¡ˆä¾‹æ¥ç›´è§‚ç†è§£ä¸€ä¸‹ç”¨ç€‘å¸ƒæ¨¡å‹è¿›è¡Œå¼€å‘æ•´ä¸ªè½¯ä»¶çš„è¿‡ç¨‹ã€‚</p>
<p><strong>é—®é¢˜çš„å®šä¹‰åŠé¡¹ç›®è§„åˆ’é˜¶æ®µ</strong></p>
<p>å…¬å¸è€æ¿æ‰“ç®—åšä¸€ä¸ªæ¸¸æˆé¢†åŸŸçš„ç¤¾äº¤ç½‘ç«™ï¼Œé—®é¢˜å¾ˆæ˜ç¡®ï¼Œå°±æ˜¯ä¸€ä¸ªç¤¾äº¤ç½‘ç«™ï¼Œå¹¶ä¸”ç”¨æˆ·èƒ½æŒ‰ç…§æ¸¸æˆæ¥äº¤å‹ã€‚è‡³äºå¯è¡Œæ€§åˆ†æï¼Œæ€»å¤šç¤¾äº¤æ˜¯å·²ç»å¾ˆç«çš„äº‹æƒ…äº†ï¼Œä¼¼ä¹æ˜¯å¯è¡Œçš„ã€‚é‚£ä¹ˆå°±ç«‹é¡¹äº†ã€‚</p>
<p>ç„¶åè€æ¿å°±é—®é¡¹ç›®ç»ç†ï¼Œè¿™æ ·çš„ä¸€ä¸ªç½‘ç«™ï¼Œå¤§æ¦‚éœ€è¦å¤šä¹…åšå¾—å‡ºæ¥ï¼Ÿé¡¹ç›®ç»ç†å›ç­”ï¼Œå¦‚æ­¤å¤æ‚çš„ç½‘ç«™å¤§æ¦‚éœ€è¦åŠå¹´å‡ºæ¥ä¸€ä¸ªç‰ˆæœ¬ï¼Œè€æ¿è¯´åŠå¹´å¤ªä¹…äº†ï¼Œç»™ä½ ä¸‰ä¸ªæœˆå§ï¼Œæœ€åè®¨ä»·è¿˜ä»·ï¼Œå†³å®šå››ä¸ªæœˆä¸Šçº¿ã€‚</p>
<p>äºæ˜¯é¡¹ç›®ç»ç†æŒ‰ç…§å››ä¸ªæœˆå¼€å§‹äº†å€’æ¨é¡¹ç›®è®¡åˆ’ï¼š</p>
<blockquote>
<p>éœ€æ±‚åˆ†æâ€”â€”2å‘¨</p>
<p>è½¯ä»¶è®¾è®¡â€”â€”4å‘¨</p>
<p>ç¨‹åºç¼–ç â€”â€”6å‘¨</p>
<p>è½¯ä»¶æµ‹è¯•â€”â€”4å‘¨</p>
</blockquote>
<p><strong>éœ€æ±‚åˆ†æçš„é˜¶æ®µ</strong></p>
<p>åœ¨é¡¹ç›®ç«‹é¡¹åï¼Œäº§å“ç»ç†é¦–å…ˆå’Œè€æ¿å……åˆ†çš„æ²Ÿé€šï¼Œäº†è§£è€æ¿çš„æƒ³æ³•æ˜¯ä»€ä¹ˆï¼Œè¦åšä¸€ä¸ªä»€ä¹ˆæ ·çš„ç½‘ç«™ã€‚åœ¨äº†è§£è€æ¿çš„æƒ³æ³•åï¼Œäº§å“ç»ç†å¯¹å¸‚åœºä¸ŠåŒç±»çš„ç¤¾äº¤ç½‘ç«™è¿›è¡Œäº†è°ƒç ”ï¼Œç„¶åç”¨åŸå‹å·¥å…·è®¾è®¡äº†ç½‘ç«™çš„åŸå‹ã€‚åŸå‹è™½ç„¶å¾ˆç®€é™‹ï¼Œä½†æ˜¯ä»åŸå‹å¯ä»¥çœ‹å‡ºæ¥ï¼Œé¡¹ç›®è¦åšæˆä»€ä¹ˆæ ·å­ï¼Œä¾¿äºç¡®è®¤éœ€æ±‚ã€‚</p>
<p>åŸå‹æ‹¿ç»™è€æ¿çœ‹åï¼Œè€æ¿å†æ ¹æ®è‡ªå·±çš„æƒ³æ³•æä¸€äº›åé¦ˆï¼Œè¿™æ ·åå¤æ²Ÿé€šç¡®è®¤ï¼Œåœ¨åŸå‹è®¾è®¡ç¡®è®¤æ¸…æ¥šåï¼Œäº§å“ç»ç†å¼€å§‹æ’°å†™äº§å“è®¾è®¡æ–‡æ¡£ï¼Œå°†åŸå‹è®¾è®¡è½å®åˆ°æ–‡æ¡£ï¼Œå°†æ•´ä¸ªç½‘ç«™åˆ’åˆ†æˆä¸åŒçš„åŠŸèƒ½æ¨¡å—ï¼Œä¾‹å¦‚ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æ·»åŠ å¥½å‹ç­‰ï¼Œç¡®å®šæ¯ä¸ªåŠŸèƒ½æ¨¡å—éœ€è¦å“ªäº›åŠŸèƒ½ã€‚</p>
<p>è¿™ä¸ªé˜¶æ®µäº§å“ç»ç†æ˜¯æœ€å¿™çš„ï¼Œé‚£è¿™æ—¶å€™å…¶ä»–äººåœ¨å¹²å˜›å‘¢ï¼Ÿå…¶ä»–äººéƒ½è¿˜æŒºè½»æ¾çš„ï¼Œæ¶æ„å¸ˆç ”ç©¶ç½‘ä¸Šæµè¡Œçš„ç¤¾äº¤ç½‘ç«™éƒ½é‡‡ç”¨ä»€ä¹ˆæ¶æ„ï¼Œç¨‹åºå‘˜ã€æµ‹è¯•çœ‹çœ‹æŠ€æœ¯æ–‡æ¡£ã€‚</p>
<p>è™½ç„¶æœ€ç»ˆç¡®å®šäº†äº§å“è®¾è®¡æ–‡æ¡£ï¼Œä½†æ˜¯å› ä¸ºä¸­é—´åå¤ç¡®è®¤çš„æ—¶é—´è¿‡é•¿ï¼ŒåŸå®š 2 å‘¨èƒ½å®Œæˆçš„éœ€æ±‚åˆ†æï¼Œæœ€åæ‹–åˆ°äº† 3 å‘¨ã€‚é¡¹ç›®ç»ç†ä¸€çœ‹ï¼Œæœ€ç»ˆä¸Šçº¿æ—¶é—´ç‚¹æ²¡æ³•å»¶ï¼Œé‚£å°±åªå¥½å‹ç¼©ç¼–ç æ—¶é—´äº†ï¼Œä¸è¡ŒåŠ åŠ ç­ï¼</p>
<p>é¡¹ç›®è®¡åˆ’å˜æˆäº†ï¼š</p>
<blockquote>
<p>éœ€æ±‚åˆ†æâ€”â€”3å‘¨</p>
<p>è½¯ä»¶è®¾è®¡â€”â€”4å‘¨</p>
<p>ç¨‹åºç¼–ç â€”â€”5å‘¨</p>
<p>è½¯ä»¶æµ‹è¯•â€”â€”4å‘¨</p>
</blockquote>
<p><strong>è½¯ä»¶è®¾è®¡</strong></p>
<p>äº§å“ç»ç†çš„äº§å“è®¾è®¡æ–‡æ¡£ç¡®å®šåï¼Œæ¶æ„å¸ˆå¼€å§‹åšæ¶æ„è®¾è®¡ï¼ŒUI è®¾è®¡å¸ˆå¼€å§‹è®¾è®¡ UIï¼Œæµ‹è¯•ç»ç†å¼€å§‹é’ˆå¯¹äº§å“è®¾è®¡æ–‡æ¡£å†™æµ‹è¯•ç”¨ä¾‹ï¼Œäº§å“ç»ç†è¿˜è¦è¿›ä¸€æ­¥è®¾è®¡äº¤äº’ã€‚</p>
<p>ç”±äºå‰æœŸåŸå‹è®¾è®¡å·¥ä½œåšçš„å¥½ï¼Œæ‰€ä»¥ UI è®¾è®¡è¿˜æ˜¯å¾ˆé¡ºåˆ©çš„ï¼Œä¸»é£æ ¼å®šä¸‹æ¥ä»¥åï¼Œå„ä¸ªç•Œé¢å°±æ˜¯ç»†èŠ‚çš„ç¡®è®¤äº†ã€‚</p>
<p>å› ä¸ºäº§å“è®¾è®¡æ–‡æ¡£å†™çš„è¯¦ç»†ï¼Œè¾“å…¥è¾“å‡ºå¾ˆæ¸…æ¥šï¼Œæµ‹è¯•ç”¨ä¾‹ä¹Ÿè¿›å±•é¡ºåˆ©ã€‚</p>
<p>è‡³äºæ¶æ„è®¾è®¡è¿™è¾¹ï¼Œæ¶æ„å¸ˆå¾ˆæœ‰ç»éªŒï¼Œå…ˆæŠŠæ•´ä½“æ¶æ„ç¡®å®šï¼Œå†™äº†ä¸ªæŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£ï¼Œå’Œå¤§å®¶ä¸€èµ·å¼€ä¼šè®¨è®ºï¼Œå‡ æ¬¡åç¡®è®¤äº†æ•´ä½“æŠ€æœ¯æ–¹æ¡ˆã€‚æŒ‰ç…§åŠŸèƒ½æ¨¡å—ä¸€æ‹†åˆ†ï¼ŒæŠŠå…¶ä¸­ä¸€ä¸ªåŠŸèƒ½æ¨¡å—åšäº†ä¸€ä¸ªæ ·æ¿ï¼Œç„¶åæŠŠå„ä¸ªå­æ¨¡å—åˆ†ç»™å¼€å‘äººå‘˜ï¼Œå¤§å®¶ä¸€èµ·ååŠ©åšè¯¦ç»†è®¾è®¡ï¼Œç„¶åå†åˆ†åˆ«ç¡®è®¤ã€‚</p>
<p>å¤§å®¶éƒ½å¦‚ç«å¦‚è¼åœ°å¿™èµ·æ¥äº†ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œè½¯ä»¶è®¾è®¡ 4 å‘¨åº”è¯¥èƒ½å®Œæˆï¼Œå¯ä»¥è¿›å…¥ç¼–ç é˜¶æ®µäº†ã€‚ä½†æ˜¯è½¯ä»¶è®¾è®¡è¿›è¡Œåˆ°ç¬¬ 3 å‘¨çš„æ—¶å€™ï¼Œè€æ¿çš„æƒ³æ³•å‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚</p>
<p>å› ä¸ºå¸‚åœºä¸Šå·²ç»æœ‰äº†æ¸¸æˆç¤¾äº¤çš„ç½‘ç«™ï¼Œè€Œä¸”è¿è¥ç»“æœä¸ç®—å¤ªå¥½ï¼Œè€Œç½‘é¡µæ¸¸æˆæ­£æµè¡Œï¼Œå¦‚æœæˆ‘ä»¬çš„å¹³å°èƒ½æ¥å…¥ç½‘é¡µæ¸¸æˆï¼Œè¿™ä¼šæ˜¯ä¸ªä¸é”™çš„æœºä¼šã€‚</p>
<p>äºæ˜¯éœ€æ±‚å˜æ›´äº†ï¼Œæˆ‘ä»¬è¦èƒ½å’Œå…¶ä»–ç½‘é¡µæ¸¸æˆçš„ç”¨æˆ·ç³»ç»Ÿå¯¹æ¥ï¼Œè¿™ä¸ªéœ€æ±‚æœ€å¼€å§‹æ˜¯æ²¡æœ‰æå‡ºæ¥ï¼Œä¹Ÿæ²¡æœ‰è€ƒè™‘çš„ã€‚</p>
<p>é¡¹ç›®ç»ç†è€ƒè™‘å†ä¸‰ï¼Œå†³å®šè¿˜æ˜¯æ¥å—è¿™ä¸ªéœ€æ±‚å˜æ›´ï¼Œä½†æ˜¯å¸Œæœ›èƒ½å¤šä¸€äº›æ—¶é—´ï¼Œè€æ¿æ²¡åŒæ„ï¼Œè®¤ä¸ºæ—¶é—´ç‚¹å¾ˆé‡è¦ï¼Œå“ªæ€•ç ä¸€ç‚¹åŠŸèƒ½ï¼Œç‰ºç‰²ä¸€ç‚¹è´¨é‡ä¹Ÿè¦å¦‚æœŸä¸Šçº¿ã€‚ä½†å°±ç®—è¿™æ—¶å€™ç åŠŸèƒ½ï¼Œè®¾è®¡å·¥ä½œè¿˜æ˜¯å°‘ä¸äº†å¤šå°‘ã€‚</p>
<p>äºæ˜¯äº§å“ç»ç†é‡æ–°ä¿®æ”¹ç›¸åº”åŸå‹ï¼Œå†ç¡®è®¤ï¼Œå†é‡æ–°ä¿®æ”¹äº§å“è®¾è®¡æ–‡æ¡£ã€‚å˜æ›´å®Œåï¼ŒUI è®¾è®¡çš„ç›¸å…³é¡µé¢é‡æ–°ä¿®æ”¹è®¾è®¡ã€æµ‹è¯•äººå‘˜ä¿®æ”¹æµ‹è¯•ç”¨ä¾‹ï¼Œæœ€è‹¦çš„æ˜¯æ¶æ„å¸ˆï¼Œå½“åˆæ²¡æœ‰è€ƒè™‘åˆ°è¦å’Œå…¶ä»–ç”¨æˆ·ç³»ç»Ÿå¯¹æ¥ï¼Œç°åœ¨ç”¨æˆ·ç³»ç»Ÿçš„è®¾è®¡éƒ½è¦é‡æ–°è€ƒè™‘äº†ã€‚</p>
<p>äºæ˜¯ä¸ºäº†èµ¶è¿›åº¦ï¼Œé¡¹ç›®ç»„å¼€å§‹åŠ ç­ï¼Œå³ä½¿å¦‚æ­¤ï¼Œè½¯ä»¶è®¾è®¡é˜¶æ®µä¹Ÿæ¨è¿Ÿåˆ°äº†ç¬¬ 5 å‘¨æ‰å‹‰å¼ºå®Œæˆã€‚</p>
<p>é¡¹ç›®è®¡åˆ’åˆå˜äº†ï¼š</p>
<blockquote>
<p>éœ€æ±‚åˆ†æâ€”â€”3å‘¨</p>
<p>è½¯ä»¶è®¾è®¡â€”â€”5å‘¨</p>
<p>ç¨‹åºç¼–ç â€”â€”5å‘¨</p>
<p>è½¯ä»¶æµ‹è¯•â€”â€”3å‘¨</p>
</blockquote>
<p><strong>ç¨‹åºç¼–ç </strong></p>
<p>äºè¿›å…¥ç¼–ç é˜¶æ®µäº†ï¼Œä¸ºäº†ä¿è¯è¿›åº¦ï¼ŒåŠ ç­è¿˜åœ¨ç»§ç»­ï¼Œå“ªæ€•å‰æœŸåšäº†å¤§é‡çš„è®¾è®¡ï¼ŒçœŸåˆ°ç¼–ç çš„æ—¶å€™è¿˜æ˜¯æœ‰å¥½å¤šæ²¡æœ‰è€ƒè™‘åˆ°çš„ï¼ŒåŒæ—¶å„ä¸ªæ¨¡å—ä¹‹é—´è¿˜å­˜åœ¨ç›¸äº’ä¾èµ–ï¼Œæœ‰æ—¶å€™è™½ç„¶è‡ªå·±åŠŸèƒ½å¼€å‘å®Œæˆï¼Œè¿˜éœ€è¦ç­‰å¾…å…¶ä»–äººçš„åŠŸèƒ½å®Œæˆæ‰èƒ½è°ƒè¯•ï¼Œæ‰€ä»¥ 5 å‘¨æ—¶é—´å¾ˆå¿«å°±è¿‡å»äº†ï¼Œè€Œç¨‹åºè¿˜ä¸èƒ½å®Œæ•´åœ°è·‘èµ·æ¥ã€‚</p>
<p>å…¶å®ä¸­é—´è¿˜æœ‰ä¸ªå°æ’æ›²ï¼Œè€æ¿è§‰å¾—è¿˜è¦åŠ ä¸Šæ”¯ä»˜çš„åŠŸèƒ½ï¼Œä½†æ˜¯é¡¹ç›®ç»ç†è§‰å¾—è¿™ä¸ªé˜¶æ®µæ”¹éœ€æ±‚å·²ç»ä¸å¯èƒ½äº†ï¼Œä»¥è¾èŒä¸ºå¨èƒæ€»ç®—é¡¶å›å»äº†ï¼Œæ‰“ç®—æ”¾åœ¨ä¸‹ä¸ªç‰ˆæœ¬åŠ ä¸Šã€‚</p>
<p>ç»ˆäºåˆ°ç¬¬ 6 å‘¨çš„æ—¶å€™ï¼Œæœ‰äº†ä¸€ä¸ªå‹‰å¼ºå¯ä»¥æµ‹è¯•çš„ç‰ˆæœ¬ã€‚</p>
<p>é¡¹ç›®è®¡åˆ’ç°åœ¨å˜æˆäº†ï¼š</p>
<blockquote>
<p>éœ€æ±‚åˆ†æâ€”â€”3å‘¨</p>
<p>è½¯ä»¶è®¾è®¡â€”â€”5å‘¨</p>
<p>ç¨‹åºç¼–ç â€”â€”6å‘¨</p>
<p>è½¯ä»¶æµ‹è¯•â€”â€”2å‘¨</p>
</blockquote>
<p><strong>è½¯ä»¶æµ‹è¯•</strong></p>
<p>ç•™ç»™æµ‹è¯•çš„æ—¶é—´åªæœ‰ä¸¤å‘¨äº†ï¼Œä½†æ˜¯å‰æœŸå®åœ¨ bug å¤ªå¤šï¼Œä¸¤å‘¨æµ‹è¯•æ—¶é—´è¿‡å»ï¼Œè½¯ä»¶è´¨é‡è¿˜æ˜¯å¾ˆç³Ÿç³•ï¼Œå®Œå…¨æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œäºæ˜¯é¡¹ç›®ä¸å¾—ä¸å»¶æœŸï¼Œä¸€ç›´å»¶æœŸäº† 4 å‘¨åï¼Œæ‰ç®—å…·å¤‡ä¸Šçº¿æ¡ä»¶ã€‚</p>
<p>æ‰€ä»¥æœ€ç»ˆçš„é¡¹ç›®è®¡åˆ’å·®ä¸å¤šæ˜¯ï¼š</p>
<blockquote>
<p>éœ€æ±‚åˆ†æâ€”â€”3å‘¨</p>
<p>è½¯ä»¶è®¾è®¡â€”â€”5å‘¨</p>
<p>ç¨‹åºç¼–ç â€”â€”6å‘¨</p>
<p>è½¯ä»¶æµ‹è¯•â€”â€”6å‘¨</p>
</blockquote>
<p>ä¸åŸå®šè®¡åˆ’å»¶è¿Ÿäº†4å‘¨ã€‚</p>
<p><strong>è¿è¡Œç»´æŠ¤</strong></p>
<p>ç½‘ç«™ä¸Šçº¿åï¼Œå¥½åœ¨å‰æœŸå¹¶æ²¡æœ‰å¤šå°‘ç”¨æˆ·ï¼Œä½†æ˜¯çº¿ä¸Š Bug è¿˜æ˜¯ä¸å°‘ï¼Œéœ€è¦ç»§ç»­ä¿®å¤çº¿ä¸Šå‘ç°çš„ Bugã€‚</p>
<h1 id="ç€‘å¸ƒæ¨¡å‹çš„ä¼˜ç¼ºç‚¹"><a href="#ç€‘å¸ƒæ¨¡å‹çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="ç€‘å¸ƒæ¨¡å‹çš„ä¼˜ç¼ºç‚¹"></a>ç€‘å¸ƒæ¨¡å‹çš„ä¼˜ç¼ºç‚¹</h1><h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ul>
<li>ç®€å•æ˜“è¡Œã€‚</li>
<li>å¯ä»¥æŒ‰ç…§é˜¶æ®µæ£€æŸ¥ï¼Œèƒ½åŠæ—¶å‘ç°é—®é¢˜ã€‚</li>
<li>å‰ä¸€ä¸ªé˜¶æ®µå®Œæˆåï¼Œå°±å¯ä»¥é‡ç‚¹å…³æ³¨ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚</li>
<li>æœ‰å¾ˆå¥½çš„åˆ†å·¥åä½œã€‚</li>
<li>å¯¹è´¨é‡æœ‰ä¿éšœã€‚</li>
</ul>
<h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><ul>
<li>éš¾ä»¥å“åº”éœ€æ±‚çš„å˜æ›´ï¼Œå½“éœ€æ±‚å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¶Šåˆ°åæœŸä»£ä»·è¶Šå¤§ã€‚</li>
<li>å·¥ä½œé‡åˆ†å¸ƒä¸å‡è¡¡ã€‚ä¾‹å¦‚å‰æœŸå¼€å‘ã€æµ‹è¯•äººå‘˜æ— æ³•å‚ä¸ï¼Œè€ŒåæœŸå¼€å‘ã€æµ‹è¯•äººå‘˜åˆç‰¹åˆ«å¿™ç¢Œã€‚</li>
<li>å‰æœŸè¿›åº¦å—é˜»ï¼Œä¼šä¸€ç›´å‹ç¼©åç»­é˜¶æ®µæ—¶é—´ï¼Œå¯¼è‡´å»¶æœŸæˆ–å½±å“è´¨é‡ã€‚</li>
<li>ä¸€ç›´åˆ°æœ€åé˜¶æ®µæ‰èƒ½çœ‹åˆ°ç»“æœã€‚</li>
</ul>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ç€‘å¸ƒæ¨¡å‹çš„å‡ºç°ï¼Œä¹Ÿè§£å†³äº†è½¯ä»¶é¡¹ç›®å¼€å‘ä¸­çš„å‡ ä¸ªé‡è¦é—®é¢˜ã€‚</p>
<ul>
<li><strong>è®©è½¯ä»¶å¼€å‘è¿‡ç¨‹æœ‰åºå¯æ§ã€‚</strong>ç€‘å¸ƒæ¨¡å‹çš„æ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®çš„ä»»åŠ¡ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®çš„äº¤ä»˜äº§ç‰©ï¼Œéƒ½æœ‰ç›¸åº”çš„é‡Œç¨‹ç¢‘ã€‚è¿™äº›è®©æ•´ä¸ªè¿‡ç¨‹æ›´å¯æ§ï¼Œè€Œä¸”èƒ½åŠæ—©å‘ç°é—®é¢˜ã€‚</li>
<li><strong>è®©åˆ†å·¥åä½œå˜æˆå¯èƒ½ã€‚</strong>ç€‘å¸ƒæ¨¡å‹çš„å…­ä¸ªé˜¶æ®µï¼Œä¹Ÿè®©è½¯ä»¶å¼€å‘äº§ç”Ÿç›¸åº”çš„åŸºç¡€åˆ†å·¥ï¼šé¡¹ç›®ç»ç†ã€äº§å“ç»ç†ã€æ¶æ„å¸ˆã€è½¯ä»¶å·¥ç¨‹å¸ˆã€æµ‹è¯•å·¥ç¨‹å¸ˆã€è¿ç»´å·¥ç¨‹å¸ˆã€‚</li>
<li><strong>è´¨é‡æœ‰ä¿éšœã€‚</strong>ç€‘å¸ƒæ¨¡å‹æ¯ä¸ªé˜¶æ®µéƒ½éœ€è¦äº¤ä»˜ç›¸åº”çš„æ–‡æ¡£ï¼Œè€Œæ–‡æ¡£çš„æ’°å†™å’Œè¯„å®¡ï¼Œå¯ä»¥å¸®åŠ©åœ¨åŠ¨æ‰‹ä¹‹å‰æŠŠé—®é¢˜æ²Ÿé€šæ¸…æ¥šï¼Œæƒ³æ¸…æ¥šã€‚ç€‘å¸ƒæ¨¡å‹åœ¨ç¼–ç ç»“æŸåï¼Œä¼šæœ‰ä¸¥å¯†çš„æµ‹è¯•ï¼Œåªæœ‰æµ‹è¯•éªŒæ”¶é€šè¿‡åï¼Œæ‰èƒ½ä¸Šçº¿å‘å¸ƒã€‚è¿™äº›æªæ–½éƒ½è®©è½¯ä»¶çš„è´¨é‡æ›´æœ‰ä¿éšœã€‚</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>æå®¢æ—¶é—´ â€”â€”ã€Šè½¯ä»¶å·¥ç¨‹ä¹‹ç¾ã€‹</p>
]]></content>
      <categories>
        <category>æ¶æ„ä¹‹è·¯</category>
      </categories>
      <tags>
        <tag>è½¯ä»¶å·¥ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>githubå’ŒgitåŸºæ“</title>
    <url>/2019/09/25/github%E5%92%8Cgit%E5%9F%BA%E6%93%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸€äº›Git å’Œ GitHubåŸºæ“ã€‚</p>
<a id="more"></a>
<h1 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h1><h2 id="å¿«æ·é”®-t-å’Œ-w"><a href="#å¿«æ·é”®-t-å’Œ-w" class="headerlink" title="å¿«æ·é”®: t å’Œ w"></a>å¿«æ·é”®: t å’Œ w</h2><p>åœ¨ä½ çš„æºç æµè§ˆé¡µé¢ï¼ŒæŒ‰ <strong>t</strong> å¯ä»¥å¿«é€Ÿè¿›å…¥æ¨¡ç³Šæ–‡ä»¶åæœç´¢æ¨¡å¼ï¼š</p>
<p><img src="1.png" alt></p>
<p>åœ¨ä½ ä»“åº“ä¸»é¡µï¼ŒæŒ‰ <strong>w</strong> å¯ä»¥å¿«é€Ÿè¿›è¡Œåˆ†æ”¯è¿‡æ»¤ï¼š</p>
<p><img src="2.png" alt></p>
<p>åœ¨ä»»æ„ GitHub é¡µé¢ä¸­ï¼ŒæŒ‰ <strong>?</strong> å±•ç¤ºå½“å‰é¡µé¢å¯ç”¨çš„å¿«æ·é”®ï¼š</p>
<p><img src="3.png" alt></p>
<h2 id="å¿½ç•¥ç©ºæ ¼-w-1"><a href="#å¿½ç•¥ç©ºæ ¼-w-1" class="headerlink" title="å¿½ç•¥ç©ºæ ¼: ?w=1"></a>å¿½ç•¥ç©ºæ ¼: ?w=1</h2><p>åœ¨ä»»æ„çš„ diff URL æ·»åŠ  <strong>?w=1</strong> ç”¨æ¥æ•´ç†ç¼©è¿›:</p>
<p><img src="4.jpg" alt></p>
<h2 id="æŒ‰èŒƒå›´è¿‡æ»¤æäº¤è®°å½•-master-time-master"><a href="#æŒ‰èŒƒå›´è¿‡æ»¤æäº¤è®°å½•-master-time-master" class="headerlink" title="æŒ‰èŒƒå›´è¿‡æ»¤æäº¤è®°å½•: master@{time}..master"></a>æŒ‰èŒƒå›´è¿‡æ»¤æäº¤è®°å½•: master@{time}..master</h2><p>ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªå¯¹æ¯”é¡µé¢é€šè¿‡ä½¿ç”¨ URL github.com/user/repo/compare/{range}ã€‚èŒƒå›´ (range) å¯ä»¥æ˜¯ä¸¤ä¸ª SHA ä¾‹å¦‚ sha1â€¦sha2 æˆ–è€…ä¸¤ä¸ªåˆ†æ”¯åç§°ä¾‹å¦‚ masterâ€¦my-branchã€‚èŒƒå›´åŒæ—¶ä¹Ÿéå¸¸æ™ºèƒ½çš„æ”¯æŒä½¿ç”¨æ—¶é—´ä½œä¸ºå…³æ³¨ç‚¹ã€‚ä½ å¯ä»¥é€šè¿‡ master@{1.day.ago}â€¦master è¿‡æ»¤ä»æ˜¨å¤©å¼€å§‹çš„æäº¤ã€‚ä¾‹å¦‚ï¼šé“¾æ¥ï¼Œ<a href="https://github.com/rails/rails/compare/master@{1.day.ago}â€¦master" target="_blank" rel="noopener">https://github.com/rails/rails/compare/master@{1.day.ago}â€¦master</a> æ˜¾ç¤º Rails é¡¹ç›®ä¸­å…¨éƒ¨æ˜¨å¤©å¼€å§‹çš„æäº¤è®°å½•å’Œå˜åŒ–ï¼š</p>
<p><img src="5.jpg" alt></p>
<p>##æŒ‰ä½œè€…è¿‡æ»¤æäº¤è®°å½•: ?author=github_handle</p>
<p>ä½ å¯ä»¥é€šè¿‡åœ¨å¯¹æ¯”é¡µé¢URLä¸­å¢åŠ  ?author=github_handle æ¥æŒ‰ä½œè€…è¿‡æ»¤æäº¤è®°å½•ã€‚ä¾‹å¦‚ï¼šé“¾æ¥ <a href="https://github.com/dynjs/dynjs/commits/master?author=jingweno" target="_blank" rel="noopener">https://github.com/dynjs/dynjs/commits/master?author=jingweno</a> æ˜¾ç¤º jingweno å¯¹ <strong>Dynjs</strong> çš„æäº¤è®°å½•ï¼š</p>
<p><img src="6.jpg" alt></p>
<h2 id="diff-å’Œ-patch"><a href="#diff-å’Œ-patch" class="headerlink" title=".diff å’Œ .patch"></a>.diff å’Œ .patch</h2><p>åœ¨æ¯”è¾ƒé¡µé¢ã€åˆå¹¶è¯·æ±‚é¡µé¢æˆ–è€…è¯„è®ºé¡µé¢çš„URLåå¢åŠ  .diff æˆ–è€… .patchï¼Œå¯ä»¥å¾—åˆ° diff æˆ–è€… patch çš„æ–‡æœ¬æ ¼å¼ã€‚ä¾‹å¦‚ï¼šé“¾æ¥ <a href="https://github.com/rails/rails/compare/master@{1.day.ago}â€¦master.patch" target="_blank" rel="noopener">https://github.com/rails/rails/compare/master@{1.day.ago}â€¦master.patch</a> æ˜¾ç¤ºRailsé¡¹ç›®ä¸­å…¨éƒ¨æ˜¨å¤©å¼€å§‹çš„æäº¤è®°å½•å’Œå˜åŒ–çš„æ–‡æœ¬æ ¼å¼ï¼š</p>
<p><img src="7.jpg" alt></p>
<h2 id="é“¾æ¥è¡Œ"><a href="#é“¾æ¥è¡Œ" class="headerlink" title="é“¾æ¥è¡Œ"></a>é“¾æ¥è¡Œ</h2><p>åœ¨æ–‡ä»¶å±•ç¤ºé¡µé¢ï¼Œç‚¹å‡»æŸè¡Œæˆ–è€…é€šè¿‡æŒ‰ SHIFT é€‰æ‹©å¤šè¡Œï¼ŒURL ä¼šæœ‰ç›¸åº”çš„æ”¹å˜ã€‚å¦‚æœä½ è¦ç»™ä½ çš„é˜Ÿå‹åˆ†äº«ä¸€æ®µä»£ç æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼š</p>
<p><img src="8.jpg" alt></p>
<h2 id="è‡ªåŠ¨é“¾æ¥"><a href="#è‡ªåŠ¨é“¾æ¥" class="headerlink" title="è‡ªåŠ¨é“¾æ¥"></a>è‡ªåŠ¨é“¾æ¥</h2><p>åœ¨åˆå¹¶è¯·æ±‚ã€é—®é¢˜ã€æˆ–è€…ä»»ä½•è¯„è®ºä¸­ï¼Œshaå’Œé—®é¢˜ç (ä¾‹å¦‚ï¼š#1)ä¼šè¢«è‡ªåŠ¨é“¾æ¥ã€‚å¹¶ä¸”ï¼Œä½ ä¹Ÿå¯ä»¥é“¾æ¥å…¶å®ƒä»“åº“çš„ sha æˆ–è€…é—®é¢˜ç ï¼Œæ ¼å¼ï¼š<code>user/repo@sha1</code> æˆ–è€… <code>user/repo#1</code>ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªè¯„è®ºä¸­é€šè¿‡shaè‡ªåŠ¨é“¾æ¥çš„ä¾‹å­ï¼š</p>
<p><img src="9.jpg" alt></p>
<h2 id="hub"><a href="#hub" class="headerlink" title="hub"></a>hub</h2><p>Hub æ˜¯ GitHubçš„å‘½ä»¤è¡Œã€‚å®ƒæä¾›äº†Gitå’ŒGithubä¹‹é—´çš„é›†æˆã€‚ä¸€ä¸ªæœ€æœ‰ç”¨çš„å‘½ä»¤å°±æ˜¯åœ¨å‘½ä»¤è¡Œè¾“å…¥ hub pull-request åˆ›å»ºpull requestã€‚è¯¦è§ <strong>readme.</strong>ï¼ˆ<a href="https://github.com/defunkt/hub#commandsï¼‰ã€‚" target="_blank" rel="noopener">https://github.com/defunkt/hub#commandsï¼‰ã€‚</a></p>
<h1 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h1><h2 id="Gitå·¥ä½œæµç¨‹"><a href="#Gitå·¥ä½œæµç¨‹" class="headerlink" title="Gitå·¥ä½œæµç¨‹"></a>Gitå·¥ä½œæµç¨‹</h2><p><img src="Gitå·¥ä½œæµç¨‹.webp" alt></p>
<p>ä»¥ä¸ŠåŒ…æ‹¬ä¸€äº›ç®€å•è€Œå¸¸ç”¨çš„å‘½ä»¤ï¼Œä½†æ˜¯å…ˆä¸å…³å¿ƒè¿™äº›ï¼Œå…ˆæ¥äº†è§£ä¸‹é¢è¿™4ä¸ªä¸“æœ‰åè¯ã€‚</p>
<ul>
<li>Workspaceï¼šå·¥ä½œåŒº</li>
<li>Index / Stageï¼šæš‚å­˜åŒº</li>
<li>Repositoryï¼šä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰</li>
<li>Remoteï¼šè¿œç¨‹ä»“åº“</li>
</ul>
<p><strong>å·¥ä½œåŒº</strong></p>
<p>ç¨‹åºå‘˜è¿›è¡Œå¼€å‘æ”¹åŠ¨çš„åœ°æ–¹ï¼Œæ˜¯ä½ å½“å‰çœ‹åˆ°çš„ï¼Œä¹Ÿæ˜¯æœ€æ–°çš„ã€‚</p>
<p>å¹³å¸¸æˆ‘ä»¬å¼€å‘å°±æ˜¯æ‹·è´è¿œç¨‹ä»“åº“ä¸­çš„ä¸€ä¸ªåˆ†æ”¯ï¼ŒåŸºäºè¯¥åˆ†æ”¯è¿›è¡Œå¼€å‘ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­å°±æ˜¯å¯¹å·¥ä½œåŒºçš„æ“ä½œã€‚</p>
<p><strong>æš‚å­˜åŒº</strong></p>
<p>.gitç›®å½•ä¸‹çš„indexæ–‡ä»¶, æš‚å­˜åŒºä¼šè®°å½•<code>git add</code>æ·»åŠ æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯(æ–‡ä»¶åã€å¤§å°ã€timestampâ€¦)ï¼Œä¸ä¿å­˜æ–‡ä»¶å®ä½“, é€šè¿‡idæŒ‡å‘æ¯ä¸ªæ–‡ä»¶å®ä½“ã€‚å¯ä»¥ä½¿ç”¨<code>git status</code>æŸ¥çœ‹æš‚å­˜åŒºçš„çŠ¶æ€ã€‚æš‚å­˜åŒºæ ‡è®°äº†ä½ å½“å‰å·¥ä½œåŒºä¸­ï¼Œå“ªäº›å†…å®¹æ˜¯è¢«gitç®¡ç†çš„ã€‚</p>
<p>å½“ä½ å®ŒæˆæŸä¸ªéœ€æ±‚æˆ–åŠŸèƒ½åéœ€è¦æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œé‚£ä¹ˆç¬¬ä¸€æ­¥å°±æ˜¯é€šè¿‡<code>git add</code>å…ˆæäº¤åˆ°æš‚å­˜åŒºï¼Œè¢«gitç®¡ç†ã€‚</p>
<p><strong>æœ¬åœ°ä»“åº“</strong></p>
<p>ä¿å­˜äº†å¯¹è±¡è¢«æäº¤ è¿‡çš„å„ä¸ªç‰ˆæœ¬ï¼Œæ¯”èµ·å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å†…å®¹ï¼Œå®ƒè¦æ›´æ—§ä¸€äº›ã€‚</p>
<p><code>git commit</code>ååŒæ­¥indexçš„ç›®å½•æ ‘åˆ°æœ¬åœ°ä»“åº“ï¼Œæ–¹ä¾¿ä»ä¸‹ä¸€æ­¥é€šè¿‡<code>git push</code>åŒæ­¥æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“çš„åŒæ­¥ã€‚</p>
<p><strong>è¿œç¨‹ä»“åº“</strong></p>
<p>è¿œç¨‹ä»“åº“çš„å†…å®¹å¯èƒ½è¢«åˆ†å¸ƒåœ¨å¤šä¸ªåœ°ç‚¹çš„å¤„äºåä½œå…³ç³»çš„æœ¬åœ°ä»“åº“ä¿®æ”¹ï¼Œå› æ­¤å®ƒå¯èƒ½ä¸æœ¬åœ°ä»“åº“åŒæ­¥ï¼Œä¹Ÿå¯èƒ½ä¸åŒæ­¥ï¼Œä½†æ˜¯å®ƒçš„å†…å®¹æ˜¯æœ€æ—§çš„ã€‚</p>
<h2 id="å¸¸ç”¨Gitå‘½ä»¤"><a href="#å¸¸ç”¨Gitå‘½ä»¤" class="headerlink" title="å¸¸ç”¨Gitå‘½ä»¤"></a>å¸¸ç”¨Gitå‘½ä»¤</h2><p><img src="gitcommandtable.jpeg" alt></p>
<h3 id="add"><a href="#add" class="headerlink" title="add"></a>add</h3><p>addç›¸å…³å‘½ä»¤å¾ˆç®€å•ï¼Œä¸»è¦å®ç°å°†å·¥ä½œåŒºä¿®æ”¹çš„å†…å®¹æäº¤åˆ°æš‚å­˜åŒºï¼Œäº¤ç”±gitç®¡ç†ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>git add .</strong></th>
<th><strong>æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>git add </strong></td>
<td><strong>æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•</strong></td>
</tr>
<tr>
<td style="text-align:left"><strong>git add </strong></td>
<td><strong>æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº</strong></td>
</tr>
</tbody>
</table>
<h3 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h3><p>commitç›¸å…³å‘½ä»¤ä¹Ÿå¾ˆç®€å•ï¼Œä¸»è¦å®ç°å°†æš‚å­˜åŒºçš„å†…å®¹æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œå¹¶ä½¿å¾—å½“å‰åˆ†æ”¯çš„HEADå‘åç§»åŠ¨ä¸€ä¸ªæäº¤ç‚¹ã€‚</p>
<table>
<thead>
<tr>
<th><strong>git commit -m </strong></th>
<th><strong>æäº¤æš‚å­˜åŒºåˆ°æœ¬åœ°ä»“åº“,messageä»£è¡¨è¯´æ˜ä¿¡æ¯</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>git commit  -m </strong></td>
<td><strong>æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°æœ¬åœ°ä»“åº“</strong></td>
</tr>
<tr>
<td><strong>git commit â€“amend -m </strong></td>
<td><strong>ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤</strong></td>
</tr>
</tbody>
</table>
<h3 id="branch"><a href="#branch" class="headerlink" title="branch"></a>branch</h3><p>æ¶‰åŠåˆ°åä½œï¼Œè‡ªç„¶ä¼šæ¶‰åŠåˆ°åˆ†æ”¯ï¼Œå…³äºåˆ†æ”¯ï¼Œå¤§æ¦‚æœ‰å±•ç¤ºåˆ†æ”¯ï¼Œåˆ‡æ¢åˆ†æ”¯ï¼Œåˆ›å»ºåˆ†æ”¯ï¼Œåˆ é™¤åˆ†æ”¯è¿™å››ç§æ“ä½œã€‚</p>
<table>
<thead>
<tr>
<th><strong>git branch</strong></th>
<th><strong>åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>git branch -r</strong></td>
<td><strong>åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</strong></td>
</tr>
<tr>
<td><strong>git branch -a</strong></td>
<td><strong>åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯</strong></td>
</tr>
<tr>
<td><strong>git branch </strong></td>
<td><strong>æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</strong></td>
</tr>
<tr>
<td><strong>git checkout -b </strong></td>
<td><strong>æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</strong></td>
</tr>
<tr>
<td><strong>git branch â€“track </strong></td>
<td><strong>æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»</strong></td>
</tr>
<tr>
<td><strong>git checkout </strong></td>
<td><strong>åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº</strong></td>
</tr>
<tr>
<td><strong>git branch -d </strong></td>
<td><strong>åˆ é™¤åˆ†æ”¯</strong></td>
</tr>
<tr>
<td><strong>git push origin â€“delete </strong></td>
<td><strong>åˆ é™¤è¿œç¨‹åˆ†æ”¯</strong></td>
</tr>
</tbody>
</table>
<h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><p>mergeå‘½ä»¤æŠŠä¸åŒçš„åˆ†æ”¯åˆå¹¶èµ·æ¥ã€‚å¦‚ä¸Šå›¾ï¼Œåœ¨å®é™…å¼€æ”¾ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä»masteråˆ†æ”¯ä¸­åˆ‡å‡ºä¸€ä¸ªåˆ†æ”¯ï¼Œç„¶åè¿›è¡Œå¼€å‘å®Œæˆéœ€æ±‚ï¼Œä¸­é—´ç»è¿‡R3,R4,R5çš„commitè®°å½•ï¼Œæœ€åå¼€å‘å®Œæˆéœ€è¦åˆå…¥masterä¸­ï¼Œè¿™ä¾¿ç”¨åˆ°äº†mergeã€‚</p>
<table>
<thead>
<tr>
<th><strong>git fetch </strong></th>
<th><strong>mergeä¹‹å‰å…ˆæ‹‰ä¸€ä¸‹è¿œç¨‹ä»“åº“æœ€æ–°ä»£ç </strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>git merge </strong></td>
<td><strong>åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</strong></td>
</tr>
</tbody>
</table>
<p>ä¸€èˆ¬åœ¨mergeä¹‹åï¼Œä¼šå‡ºç°conflictï¼Œéœ€è¦é’ˆå¯¹å†²çªæƒ…å†µï¼Œæ‰‹åŠ¨è§£é™¤å†²çªã€‚ä¸»è¦æ˜¯å› ä¸ºä¸¤ä¸ªç”¨æˆ·ä¿®æ”¹äº†åŒä¸€æ–‡ä»¶çš„åŒä¸€å—åŒºåŸŸã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œéœ€è¦æ‰‹åŠ¨è§£é™¤ã€‚</p>
<p><img src="æ‰‹åŠ¨è§£é™¤.webp" alt></p>
<h3 id="rebase"><a href="#rebase" class="headerlink" title="rebase"></a>rebase</h3><p>rebaseåˆç§°ä¸ºè¡åˆï¼Œæ˜¯åˆå¹¶çš„å¦å¤–ä¸€ç§é€‰æ‹©ã€‚</p>
<p>åœ¨å¼€å§‹é˜¶æ®µï¼Œæˆ‘ä»¬å¤„äºnewåˆ†æ”¯ä¸Šï¼Œæ‰§è¡Œ<code>git rebase dev</code>ï¼Œé‚£ä¹ˆnewåˆ†æ”¯ä¸Šæ–°çš„commitéƒ½åœ¨masteråˆ†æ”¯ä¸Šé‡æ¼”ä¸€éï¼Œæœ€åcheckoutåˆ‡æ¢å›åˆ°newåˆ†æ”¯ã€‚è¿™ä¸€ç‚¹ä¸mergeæ˜¯ä¸€æ ·çš„ï¼Œåˆå¹¶å‰åæ‰€å¤„çš„åˆ†æ”¯å¹¶æ²¡æœ‰æ”¹å˜ã€‚<code>git rebase dev</code>ï¼Œé€šä¿—çš„è§£é‡Šå°±æ˜¯newåˆ†æ”¯æƒ³ç«™åœ¨devçš„è‚©è†€ä¸Šç»§ç»­ä¸‹å»ã€‚rebaseä¹Ÿéœ€è¦æ‰‹åŠ¨è§£å†³å†²çªã€‚</p>
<blockquote>
<p>å¦‚æœä½ æƒ³ä¿ç•™å®Œæ•´çš„å†å²è®°å½•ï¼Œå¹¶ä¸”æƒ³è¦é¿å…é‡å†™commit historyçš„é£é™©ï¼Œä½ åº”è¯¥é€‰æ‹©ä½¿ç”¨git merge</p>
</blockquote>
<h3 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h3><p>resetå‘½ä»¤æŠŠå½“å‰åˆ†æ”¯æŒ‡å‘å¦ä¸€ä¸ªä½ç½®ï¼Œå¹¶ä¸”ç›¸åº”çš„å˜åŠ¨å·¥ä½œåŒºå’Œæš‚å­˜åŒºã€‚</p>
<table>
<thead>
<tr>
<th><strong>git reset â€”soft </strong></th>
<th>åªæ”¹å˜æäº¤ç‚¹ï¼Œæš‚å­˜åŒºå’Œå·¥ä½œç›®å½•çš„å†…å®¹éƒ½ä¸æ”¹å˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>git reset â€”mixed </strong></td>
<td><strong>æ”¹å˜æäº¤ç‚¹ï¼ŒåŒæ—¶æ”¹å˜æš‚å­˜åŒºçš„å†…å®¹</strong></td>
</tr>
<tr>
<td><strong>git reset â€”hard </strong></td>
<td><strong>æš‚å­˜åŒºã€å·¥ä½œåŒºçš„å†…å®¹éƒ½ä¼šè¢«ä¿®æ”¹åˆ°ä¸æäº¤ç‚¹å®Œå…¨ä¸€è‡´çš„çŠ¶æ€</strong></td>
</tr>
<tr>
<td><strong>git reset â€“hard HEAD</strong></td>
<td><strong>è®©å·¥ä½œåŒºå›åˆ°ä¸Šæ¬¡æäº¤æ—¶çš„çŠ¶æ€</strong></td>
</tr>
</tbody>
</table>
<h3 id="revert"><a href="#revert" class="headerlink" title="revert"></a>revert</h3><p>git revertç”¨ä¸€ä¸ªæ–°æäº¤æ¥æ¶ˆé™¤ä¸€ä¸ªå†å²æäº¤æ‰€åšçš„ä»»ä½•ä¿®æ”¹ã€‚</p>
<p><strong>revertä¸resetçš„åŒºåˆ«</strong></p>
<ul>
<li>git revertæ˜¯ç”¨ä¸€æ¬¡æ–°çš„commitæ¥å›æ»šä¹‹å‰çš„commitï¼Œgit resetæ˜¯ç›´æ¥åˆ é™¤æŒ‡å®šçš„commitã€‚</li>
<li>åœ¨å›æ»šè¿™ä¸€æ“ä½œä¸Šçœ‹ï¼Œæ•ˆæœå·®ä¸å¤šã€‚ä½†æ˜¯åœ¨æ—¥åç»§ç»­mergeä»¥å‰çš„è€ç‰ˆæœ¬æ—¶æœ‰åŒºåˆ«ã€‚å› ä¸ºgit revertæ˜¯ç”¨ä¸€æ¬¡é€†å‘çš„commitâ€œä¸­å’Œâ€ä¹‹å‰çš„æäº¤ï¼Œå› æ­¤æ—¥ååˆå¹¶è€çš„branchæ—¶ï¼Œå¯¼è‡´è¿™éƒ¨åˆ†æ”¹å˜ä¸ä¼šå†æ¬¡å‡ºç°ï¼Œå‡å°‘å†²çªã€‚ä½†æ˜¯git resetæ˜¯ä¹‹é—´æŠŠæŸäº›commitåœ¨æŸä¸ªbranchä¸Šåˆ é™¤ï¼Œå› è€Œå’Œè€çš„branchå†æ¬¡mergeæ—¶ï¼Œè¿™äº›è¢«å›æ»šçš„commitåº”è¯¥è¿˜ä¼šè¢«å¼•å…¥ï¼Œäº§ç”Ÿå¾ˆå¤šå†²çªã€‚å…³äºè¿™ä¸€ç‚¹ï¼Œä¸å¤ªç†è§£çš„å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ã€‚</li>
<li>git reset æ˜¯æŠŠHEADå‘åç§»åŠ¨äº†ä¸€ä¸‹ï¼Œè€Œgit revertæ˜¯HEADç»§ç»­å‰è¿›ï¼Œåªæ˜¯æ–°çš„commitçš„å†…å®¹å’Œè¦revertçš„å†…å®¹æ­£å¥½ç›¸åï¼Œèƒ½å¤ŸæŠµæ¶ˆè¦è¢«revertçš„å†…å®¹ã€‚</li>
</ul>
<h3 id="push"><a href="#push" class="headerlink" title="push"></a>push</h3><p>ä¸Šä¼ æœ¬åœ°ä»“åº“åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“åˆ†æ”¯ï¼Œå®ç°åŒæ­¥ã€‚</p>
<table>
<thead>
<tr>
<th>git push <remote><branch></branch></remote></th>
<th>ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>git push  â€“force</strong></td>
<td><strong>å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çª</strong></td>
</tr>
<tr>
<td><strong>git push  â€“all</strong></td>
<td><strong>æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</strong></td>
</tr>
</tbody>
</table>
<h3 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h3><table>
<thead>
<tr>
<th>git status</th>
<th>æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>git log</strong></td>
<td><strong>æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å²</strong></td>
</tr>
<tr>
<td><strong>git diff</strong></td>
<td><strong>æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚</strong></td>
</tr>
<tr>
<td><strong>git diff HEAD</strong></td>
<td><strong>æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚</strong></td>
</tr>
<tr>
<td><strong>git cherry-pick </strong></td>
<td><strong>é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯</strong></td>
</tr>
</tbody>
</table>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>Git æ˜¯ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„å·¥å…·ã€‚Gitæ“ä½œå¸¸ç”¨çš„å‘½ä»¤éƒ½åœ¨è¿™é‡Œäº†ã€‚äº†è§£å®ƒå¯ä»¥ç›´æ¥è®©ä½ æ›´æœ‰æ•ˆç‡å¹¶æˆä¸ºä¸€ä¸ªæ›´æœ‰æ‰åçš„ç¨‹åºå‘˜ã€‚GitHubï¼Œåœ¨å¦ä¸€ä¸ªæ–¹é¢ï¼Œåœ¨ Git åŸºç¡€ä¸Šæä¾›ä¾¿åˆ©çš„å›¢é˜Ÿåˆä½œç‰¹æ€§ã€‚æœ‰èƒ½åŠ›ä½¿ç”¨ GitHub ä¹Ÿä¼šæé«˜ä½ æ—¥å¸¸æ•ˆç‡ã€‚</p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSä¹‹å®‰è£…æœåŠ¡å™¨ä¸Šçš„IPAåŒ…</title>
    <url>/2019/09/11/IOS%E4%B9%8B%E5%AE%89%E8%A3%85%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84IPA%E5%8C%85/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å¦‚æœæƒ³è¦å°†å¯¼å‡ºçš„ad-hocåŒ…æˆ–è€…ä¼ä¸šçº§åˆ«å¼€å‘è€…è´¦å·æ‰èƒ½å¤Ÿæ‰“åŒ…çš„in-houseçš„ipaåŒ…é€šè¿‡è‡ªå·±æœåŠ¡å™¨ä¸Šä¸‹è½½å®‰è£…çš„è¯ï¼Œè¿˜éœ€è¦ä¸€äº›ç®€å•çš„é…ç½®ã€‚</p>
<a id="more"></a>
<h1 id="éƒ¨ç½²å‡†å¤‡"><a href="#éƒ¨ç½²å‡†å¤‡" class="headerlink" title="éƒ¨ç½²å‡†å¤‡"></a>éƒ¨ç½²å‡†å¤‡</h1><p>å‡†å¤‡æ–‡ä»¶ï¼šä¸€ä¸ªplistæ–‡ä»¶ï¼Œipaå®‰è£…åŒ…ï¼Œç½‘é¡µä¸‹è½½é¡µé¢ï¼ˆå¯ä¸éœ€è¦ï¼‰ï¼Œ<code>57*57</code>åƒç´ iconä¸<code>512*512</code>åƒç´ iconã€‚</p>
<p>è¿™é‡Œåˆ©ç”¨githubæ¥è¿›è¡Œæµ‹è¯•æ‰“åŒ…å‘å¸ƒåº”ç”¨ã€‚githubä»“åº“æµ‹è¯•å®Œå°±ä¼šåˆ é™¤ï¼Œéœ€è¦è‡ªè¡Œè¿›è¡Œå‡†å¤‡ã€‚</p>
<p>ç”±äºæœ¬äººæ²¡æœ‰ä¼ä¸šçº§åˆ«çš„å¼€å‘è€…è´¦å·ï¼Œåªèƒ½é€šè¿‡æ‰“åŒ…ad-hocåŒ…æ¥è¿›è¡Œæµ‹è¯•ã€‚ad-hocåŒ…å¦‚æœprofileç­¾åæ–‡ä»¶ä¸­æ²¡æœ‰å®‰è£…åœ¨å·²æœ‰çš„æµ‹è¯•è®¾å¤‡ä¸Šæ˜¯æ— æ³•å®‰è£…ä½¿ç”¨çš„ã€‚è€Œä¼ä¸šçº§åˆ«çš„in-houseåŒ…åªéœ€è¦ä¿¡ä»»å³å¯ã€‚</p>
<blockquote>
<p>plistæ–‡ä»¶åœ¨IOS7ä¹‹åä»…æ”¯æŒéƒ¨ç½²åœ¨httpsã€‚</p>
</blockquote>
<h2 id="plistæ–‡ä»¶"><a href="#plistæ–‡ä»¶" class="headerlink" title="plistæ–‡ä»¶"></a>plistæ–‡ä»¶</h2><p>ä¸€ä¸ªplistæ¨¡ç‰ˆï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>items<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>assets<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">string</span>&gt;</span>software-package<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span>url<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">string</span>&gt;</span>ipaå®‰è£…åŒ…è·¯å¾„<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">string</span>&gt;</span>display-image<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span>url<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">string</span>&gt;</span>57*57åƒç´ iconè·¯å¾„<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">string</span>&gt;</span>full-size-image<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span>url<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">string</span>&gt;</span>512*512åƒç´ iconè·¯å¾„<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>metadata<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">key</span>&gt;</span>bundle-identifier<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">string</span>&gt;</span>cn.sweetlover.jytools<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">key</span>&gt;</span>bundle-version<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">string</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">string</span>&gt;</span>software<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">key</span>&gt;</span>title<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">string</span>&gt;</span>jytools<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ–è€…åœ¨æ‰“åŒ…çš„æ—¶å€™ä¸€å¹¶ä½¿ç”¨xcodeç”Ÿæˆ</p>
<p><img src="plist.png" alt></p>
<p>nextåï¼Œå¡«å†™å®Œå³å¯ã€‚</p>
<p><img src="plist2.png" alt></p>
<p>å¯¼å‡ºåä¼šçœ‹åˆ°ä¸€ä¸ªmanifest.plistæ–‡ä»¶å°±æ˜¯æ‰€éœ€è¦ç”¨åˆ°çš„æ–‡ä»¶ã€‚</p>
<blockquote>
<p>åœ¨ç”Ÿæˆçš„æ—¶å€™å¯ä»¥éšä¾¿å¡«å†™ä¸€äº›httpsçš„åŸŸåå³å¯ï¼Œä½†æ˜¯çœŸæ­£å‘å¸ƒæ—¶å€™è¿˜æ˜¯éœ€è¦ä¿®æ”¹å¥½é…ç½®ã€‚</p>
</blockquote>
<h1 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h1><p><strong>å¯ä»¥å…ˆä¸Šä¼ ipaåŒ…å’Œiconæ–‡ä»¶ä¸Šä¼ åˆ°githubï¼Œè·å–åˆ°ä¸‹è½½è·¯å¾„ä¹‹åå¡«å†™åˆ°plistæ–‡ä»¶å½“ä¸­ï¼Œç„¶åå†å°†plistæ–‡ä»¶ä¸Šä¼ åˆ°githubã€‚</strong></p>
<p>Demoå®Œæ•´plistæ–‡ä»¶é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">key</span>&gt;</span>items<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>assets<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">string</span>&gt;</span>software-package<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span>url<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">string</span>&gt;</span>https://github.com/hackycy/mitaoquan/raw/master/jytools.ipa<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">string</span>&gt;</span>display-image<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span>url<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">string</span>&gt;</span>https://github.com/hackycy/mitaoquan/raw/master/icon-57.png<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">string</span>&gt;</span>full-size-image<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">key</span>&gt;</span>url<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">string</span>&gt;</span>https://github.com/hackycy/mitaoquan/raw/master/icon-512.png<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">key</span>&gt;</span>metadata<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">key</span>&gt;</span>bundle-identifier<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">string</span>&gt;</span>net.cn.sweetlover.mitaoquan<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">key</span>&gt;</span>bundle-version<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">string</span>&gt;</span>1.5<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">key</span>&gt;</span>kind<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">string</span>&gt;</span>software<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">key</span>&gt;</span>title<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">string</span>&gt;</span>mitao<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>githubç›®å½•ï¼š</p>
<p><img src="public.png" alt></p>
<p>è·å–plistæ–‡ä»¶çš„è·¯å¾„ï¼Œé€šè¿‡</p>
<p><img src="public2.png" alt></p>
<p>æ¡ˆä¾‹ä¸­è·å–çš„plistæ–‡ä»¶è·¯å¾„ä¸º<code>https://raw.githubusercontent.com/hackycy/mitaoquan/master/manifest.plist</code></p>
<p>æœ€åé€šè¿‡<code>itms-services://?action=download-manifest&amp;url=</code>åé¢æ‹¼æ¥ä¸Šplistçš„urlå³å¯ã€‚</p>
<p><strong>demoä¸­ä¸º<code>itms-services://?action=download-manifest&amp;url=https://raw.githubusercontent.com/hackycy/mitaoquan/master/manifest.plist</code></strong></p>
<blockquote>
<p>å‰ç«¯å¯ä»¥ç›´æ¥é€šè¿‡location.hrefæˆ–è€…aæ ‡ç­¾ç­‰è·³è½¬è¯¥é“¾æ¥å³å¯å®‰è£…ã€‚æœ¬åœ°æµ‹è¯•å¯ä»¥ç›´æ¥ç”¨safariæ‰“å¼€ä¸Šé¢çš„åœ°å€å³å¯å®‰è£…</p>
</blockquote>
<p>è¿™é‡Œç›´æ¥æœ¬åœ°æµ‹è¯•ï¼Œå¤åˆ¶è¯¥é“¾æ¥åˆ°safariç›´æ¥æ‰“å¼€å®‰è£…ã€‚</p>
<p><img src="public3.png" alt></p>
<p><img src="public4.png" alt></p>
<h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><p>é€šè¿‡<code>itms-services</code>åè®®ï¼Œåœ¨safariæµè§ˆå™¨å¯ä»¥ç›´æ¥åœ¨iosè®¾å¤‡ä¸Šå®‰è£…åº”ç”¨ç¨‹åºã€‚<code>itms-services</code>åè®®éœ€è¦ä¸€ä¸ªplisté…ç½®æ–‡ä»¶ã€‚<code>itms-services://?action=download-manifest&amp;url=</code>æ˜¯å›ºå®šä¸å˜çš„ï¼Œurlæ ¹æ®ç¯å¢ƒå˜åŒ–ã€‚</p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSä¹‹App Storeå®Œæ•´ä¸Šæ¶æµç¨‹</title>
    <url>/2019/08/20/IOS%E4%B9%8BApp-Store%E5%AE%8C%E6%95%B4%E4%B8%8A%E6%9E%B6%E6%B5%81%E7%A8%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘åœ¨å¤„ç†App Storeä¸Šæ¶çš„é—®é¢˜ï¼Œå’ŒAndroidçš„æ‰“åŒ…æµç¨‹æ¯”èµ·æ¥çš„ç¡®æ¯”è¾ƒæ£˜æ‰‹äº›ï¼Œå› ä¸ºæ¶‰åŠåˆ°å¾ˆå¤šçš„ä¸€äº›æ¦‚å¿µï¼Œç°åœ¨ä¹Ÿå®Œæ•´çš„æ¢³ç†å¹¶è®°å½•ä¸€ä¸‹ã€‚</p>
<a id="more"></a>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‘å¸ƒä¸Šæ¶éƒ½éœ€è¦ä¸€ä¸ªè‹¹æœå¼€å‘è€…è´¦å·ï¼Œå…è´¹çš„è´¦å·æ˜¯æœ‰è¯¸å¤šé™åˆ¶çš„ã€‚</p>
<p><strong>è‹¹æœå¼€å‘è€…å¸å·ä½“ç³»</strong></p>
<p><strong>Apple Developerï¼š</strong>ç›´æ¥åœ¨<a href="https://link.juejin.im/?target=https%3A%2F%2Fdeveloper.apple.com%2F" target="_blank" rel="noopener">Apple Developer</a>ç™»å½•ï¼ŒåŒæ„Apple Developeråè®®åçš„è´¦å·ï¼Œå…è´¹ï¼Œåªå¯ä»¥ä½¿ç”¨Xcodeè¿›è¡ŒçœŸæœºè°ƒè¯•ï¼ŒXcode 7ä¹‹åè‹¹æœæ¨å‡ºçš„åŠŸèƒ½</p>
<p><strong>Apple Developer Programï¼š</strong>åˆ†ä¸ªäººå’Œç»„ç»‡ç±»å‹ï¼Œè´¹ç”¨éƒ½æ˜¯æ¯å¹´ 99 ç¾å…ƒï¼Œå¯ä»¥ä½¿ç”¨Xcodeè¿›è¡ŒçœŸæœºè°ƒè¯•ï¼Œæ‰“åŒ…Ad-Hocæµ‹è¯•ï¼Œåœ¨App Storeå‘å¸ƒApp</p>
<p><strong>Apple Developer Enterprise Programï¼š</strong>ä¼ä¸šè´¦å·ï¼Œè´¹ç”¨æ˜¯æ¯å¹´ 299 ç¾å…ƒï¼Œå¯ä»¥ä½¿ç”¨Xcodeè¿›è¡ŒçœŸæœºè°ƒè¯•ï¼Œæ‰“åŒ…Ad-Hocæµ‹è¯•ï¼Œæ‰“åŒ…In-House Appï¼Œä½†ä¸èƒ½åœ¨App Storeå‘å¸ƒApp</p>
<p>ä¸åŒå®‰è£…æ–¹å¼å¯¹åº”çš„è¯ä¹¦ç±»å‹</p>
<ul>
<li>éApp Store<ul>
<li>Developmentï¼ˆçœŸæœºè°ƒè¯•ï¼‰ï¼šiOS App Development</li>
<li>Ad Hocï¼šiOS Distribution (App Store and Ad Hoc)</li>
<li>Enterpriseï¼šiOS Distribution (In-House and Ad Hoc)</li>
</ul>
</li>
<li>App Storeï¼šiOS Distribution (App Store and Ad Hoc)</li>
</ul>
<p>åœ¨iOSçš„é¡¹ç›®ä¸­ï¼Œåªè¦ä¸æ˜¯è¿è¡Œåœ¨æ¨¡æ‹Ÿå™¨ä¸Šï¼Œéƒ½ä¼šæ¶‰åŠåˆ°å¼€å‘è€…å¸å·ã€è¯ä¹¦ã€<code>Provisioning Profile</code>è¿™äº›æ¦‚å¿µã€‚</p>
<p><strong>å…è´¹è´¦å·çš„é™åˆ¶ï¼š</strong></p>
<ul>
<li>åˆ›å»ºçš„<code>Provisioning Profile</code>æœ‰æ•ˆæœŸåªæœ‰7å¤©</li>
<li>åœ¨7å¤©å†…æœ€å¤šæ³¨å†Œ10ä¸ªBundle Id</li>
<li>åªèƒ½åŒæ—¶æ³¨å†Œ3å°iOSè®¾å¤‡</li>
<li>åœ¨åŒä¸€å°iOSè®¾å¤‡ä¸Šï¼Œåªèƒ½åŒæ—¶å®‰è£…3ä¸ªä½¿ç”¨å…è´¹è´¦å·ç­¾åçš„Appã€‚å½“è¯¥è®¾å¤‡ä¸Šå·²ç»å­˜åœ¨3ä¸ªAppï¼Œåˆ™æ— æ³•å®‰è£…ä»»ä½•å…è´¹è´¦å·ç­¾åçš„ä»»ä½•Appï¼Œå°±ç®—æ˜¯é‚£3ä¸ªAppå…¶ä¸­ä¸€ä¸ªä¹Ÿä¸è¡Œï¼Œåªèƒ½å…ˆæŠŠå…¶ä¸­ä¸€ä¸ªåˆ é™¤</li>
</ul>
<blockquote>
<p>ä»¥ä¸‹ä»‹ç»æ˜¯ä»¥æˆ‘çš„Apple Developer Programä¸ªäººè´¦å·æ¥è¿›è¡Œæ¼”ç¤º</p>
</blockquote>
<h1 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h1><p>è¯ä¹¦ã€åŠ å¯†ç­‰åŸç†è¿™é‡Œä¸ä½œä»‹ç»ï¼Œä¸»è¦è®²è§£ä¸€äº›IOSæ‰€å¿…è¦çš„æ¦‚å¿µã€‚</p>
<h2 id="certSigningRequest"><a href="#certSigningRequest" class="headerlink" title=".certSigningRequest"></a>.certSigningRequest</h2><p>åœ¨<code>Mac</code>ä¸­çš„<code>é’¥åŒ™ä¸²è®¿é—®</code>é‡Œçš„ <code>è¯ä¹¦åŠ©ç† -&gt; ä»è¯ä¹¦é¢å‘æœºæ„è¯·æ±‚è¯ä¹¦</code>ï¼š</p>
<p><img src="certSigningRequest.png" alt></p>
<p>æœ€åä¼šåˆ›å»ºå‡ºä¸€ä¸ª<code>.certSigningRequest</code>æ–‡ä»¶ï¼Œå…¶å®è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯åˆ›å»ºäº†ä¸€å¯¹å…¬ç§é’¥</p>
<p><img src="certSigningRequest2.png" alt></p>
<ul>
<li>å…¶ä¸­<code>.certSigningRequest</code>æ–‡ä»¶ä¿å­˜ç€<ul>
<li>ç”³è¯·è€…ä¿¡æ¯ç”³è¯·è€…çš„å…¬é’¥</li>
<li>æ‘˜è¦ç®—æ³•</li>
<li>å…¬é’¥åŠ å¯†ç®—æ³•</li>
</ul>
</li>
<li>ç§é’¥ä¿å­˜åœ¨ <code>keychain</code>ä¸­</li>
</ul>
<h2 id="AppleWWDRCAè¯ä¹¦"><a href="#AppleWWDRCAè¯ä¹¦" class="headerlink" title="AppleWWDRCAè¯ä¹¦"></a>AppleWWDRCAè¯ä¹¦</h2><p><code>iOS</code>ä»¥åŠ <code>mac OS</code>ï¼ˆåœ¨å®‰è£… Xcode æ—¶ï¼‰å°†è‡ªåŠ¨å®‰è£… <code>AppleWWDRCA.cer</code>è¿™ä¸ªä¸­é—´è¯ä¹¦ï¼ˆIntermediate Certificatesï¼‰ï¼Œå®ƒå®é™…ä¸Šå°±æ˜¯ iOSï¼ˆå¼€å‘ï¼‰è¯ä¹¦çš„è¯ä¹¦ï¼Œå³æ ¹è¯ä¹¦ï¼ˆApple Root Certificateï¼‰ã€‚</p>
<h2 id="iOS-App-Developmentè¯ä¹¦"><a href="#iOS-App-Developmentè¯ä¹¦" class="headerlink" title="iOS App Developmentè¯ä¹¦"></a>iOS App Developmentè¯ä¹¦</h2><p>iOSçš„å¼€å‘è¯ä¹¦ï¼Œåœ¨å¼€å‘é˜¶æ®µè¿›è¡ŒçœŸæœºæµ‹è¯•æ—¶éœ€è¦ç”¨åˆ°çš„è¯ä¹¦ã€‚å¯ä»¥åœ¨è‹¹æœå¼€å‘ç½‘ç«™ä¸Šæ‰‹åŠ¨åˆ›å»ºï¼Œéœ€è¦ä¸Šä¼ <code>.certSigningRequest</code>æ–‡ä»¶ï¼›æˆ–è€…ä½¿ç”¨Xcodeè‡ªåŠ¨åˆ›å»ºã€‚</p>
<h2 id="iOS-Distributionè¯ä¹¦"><a href="#iOS-Distributionè¯ä¹¦" class="headerlink" title="iOS Distributionè¯ä¹¦"></a>iOS Distributionè¯ä¹¦</h2><p>iOSçš„å‘å¸ƒè¯ä¹¦ï¼Œå¯ä»¥ç”¨äºè¿›è¡Œ <code>Ad Hoc</code> æµ‹è¯•ã€æ‰“åŒ…ä¸Šä¼ åˆ° <code>App Store</code> æˆ–è€…æ‰“åŒ…æˆ <code>Enterpriseeï¼ˆIn-Houseï¼‰</code> ç±»å‹ä¾›ä¼ä¸šå†…éƒ¨ä½¿ç”¨ã€‚å¯ä»¥åœ¨è‹¹æœå¼€å‘ç½‘ç«™ä¸Šæ‰‹åŠ¨åˆ›å»ºï¼Œéœ€è¦ä¸Šä¼ <code>.certSigningRequest</code>æ–‡ä»¶ï¼›æˆ–è€…ä½¿ç”¨Xcodeè‡ªåŠ¨åˆ›å»ºã€‚</p>
<h2 id="p12"><a href="#p12" class="headerlink" title=".p12"></a>.p12</h2><p>åœ¨<code>Mac</code>çš„<code>é’¥åŒ™ä¸²è®¿é—®</code>é‡Œé€‰æ‹©ä¸€å¼ è¯ä¹¦ï¼Œå³å‡»è¯¥è¯ä¹¦ï¼Œé€‰æ‹©<code>å¯¼å‡º&quot;xxxxx&quot;</code>ï¼Œç„¶åè®¾ç½®å¯†ç ï¼Œå¯ä»¥å¯¼å‡ºè¯¥è¯ä¹¦å¯¹åº”çš„<code>.p12</code>æ–‡ä»¶ã€‚<code>.p12</code>æ–‡ä»¶åŒ…å«ä¸ªäººä¿¡æ¯ã€å…¬é’¥å’Œç§é’¥ï¼Œä¹Ÿå°±æ˜¯<code>è¯ä¹¦ + ç§é’¥</code>ã€‚iOSç±»å‹çš„æ¯ç§è¯ä¹¦åŒæ—¶å­˜åœ¨æ•°é‡æœ‰é™åˆ¶ï¼Œè€Œè¯ä¹¦æ˜¯ä¾é <code>mac OS</code>ä¸Šçš„<code>.certSigningRequest</code>æ–‡ä»¶åˆ›å»ºçš„ï¼Œæ‰€ä»¥æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ¯ç§ç±»å‹çš„è¯ä¹¦åªèƒ½åœ¨æœ‰é™çš„Macç”µè„‘ä¸Šä½¿ç”¨ï¼Œå¦‚æœéœ€è¦åœ¨æ›´å¤šä¸åŒçš„Macç”µè„‘ä¸Šè¿›è¡ŒAppå¼€å‘ã€æµ‹è¯•ã€ç­¾åï¼Œå¯ä»¥å¯¼å‡ºå¯¹åº”<code>.p12</code>æ–‡ä»¶ä»£æ›¿è¯ä¹¦æ¥ä½¿ç”¨ã€‚</p>
<p><img src="p12.png" alt></p>
<h2 id="Provisioning-Profile"><a href="#Provisioning-Profile" class="headerlink" title="Provisioning Profile"></a>Provisioning Profile</h2><p><code>Provisioning Profile</code>çš„æ–‡ä»¶æ ¼å¼ä¸º<code>.mobileprovision</code>ï¼Œé‡Œé¢åŒ…å«ç€</p>
<ul>
<li>å¯ä»¥ä½¿ç”¨çš„è¯ä¹¦</li>
<li>App IDï¼Œç”± TeamID å’Œ BundleID ç»„åˆè€Œæˆï¼Œç±»ä¼¼äº <code>A1B2C3D4.com.domain.appName</code>å½¢å¼</li>
<li>å¯å®‰è£…è¯¥Appçš„è®¾å¤‡åˆ—è¡¨çš„UDID</li>
<li>Entitlementsï¼Œæˆæƒæ–‡ä»¶ï¼Œåˆ—å‡ºäº†Appå¯ä»¥è¿›è¡Œå“ªäº›è¡Œä¸º</li>
<li>ä»¥ä¸Šä¿¡æ¯çš„ç­¾å</li>
</ul>
<p>åœ¨è‹¹æœå¼€å‘ç½‘ç«™ä¸Šæ‰‹åŠ¨åˆ›å»ºï¼Œæˆ–è€…ä½¿ç”¨Xcodeè‡ªåŠ¨åˆ›å»ºã€‚</p>
<h2 id="ipa"><a href="#ipa" class="headerlink" title=".ipa"></a>.ipa</h2><p><code>.ipa</code>æ–‡ä»¶æ˜¯iOSä¸Šçš„Appå®‰è£…æ–‡ä»¶ï¼Œå…¶å®å®ƒåªæ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œç­‰åŒäº<code>.zip</code>æ ¼å¼ï¼Œç”¨<code>mac OS</code>è‡ªå¸¦çš„<code>å½’æ¡£å®ç”¨å·¥å…·</code>å¯ä»¥ç›´æ¥å¯¹å®ƒè§£å‹ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢çš„å†…å®¹</p>
<p><img src="ipa.png" alt></p>
<h2 id="app"><a href="#app" class="headerlink" title=".app"></a>.app</h2><p>å³å‡»<code>.app</code>æ–‡ä»¶ï¼Œé€‰æ‹©<code>æ˜¾ç¤ºåŒ…å†…å®¹</code>ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢çš„å†…å®¹</p>
<p><img src="app.png" alt></p>
<p><code>.app</code>æ–‡ä»¶ä¸»è¦åŒ…å«ä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li><code>Mach-O</code>æ ¼å¼çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªAppæœ€é‡è¦çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬ç¼–å†™çš„<code>Objective-C</code>ã€<code>Swift</code>ä»£ç éƒ½è¢«ç¼–è¯‘åœ¨é‡Œé¢</li>
<li>èµ„æºæ–‡ä»¶ï¼ŒåŒ…æ‹¬ï¼š<code>.bundle</code>æ–‡ä»¶ï¼Œ<code>.framework</code>æ–‡ä»¶ï¼Œ<code>.dylib</code>æ–‡ä»¶ï¼Œ<code>.nib</code>æ–‡ä»¶ï¼Œå›¾ç‰‡æ–‡ä»¶ï¼ŒéŸ³è§†é¢‘æ–‡ä»¶ï¼Œå­—ä½“æ–‡ä»¶ç­‰æ‰€æœ‰é¡¹ç›®ç”¨åˆ°çš„æ–‡ä»¶</li>
<li><code>CodeResources</code>ï¼Œç­¾åä¿¡æ¯</li>
<li><code>embedded.mobileprovision</code>æ–‡ä»¶ï¼Œæˆ–è€…<code>entitlements</code>æ–‡ä»¶<ul>
<li>å¯¹äºæ²¡æœ‰ä¸Šä¼ App Storeçš„<code>.app</code>æ–‡ä»¶ï¼Œé‡Œé¢ä¼šåŒ…å«<code>embedded.mobileprovision</code>æ–‡ä»¶ï¼Œæ²¡æœ‰<code>entitlements</code>æ–‡ä»¶</li>
<li>App Storeä¸‹è½½çš„<code>.app</code>æ–‡ä»¶ï¼Œé‡Œé¢ä¼šåŒ…å«<code>.entitlements</code>æ–‡ä»¶ï¼Œæ²¡æœ‰<code>embedded.mobileprovision</code>æ–‡ä»¶</li>
</ul>
</li>
</ul>
<h1 id="Automatic-signing"><a href="#Automatic-signing" class="headerlink" title="Automatic signing"></a>Automatic signing</h1><p>åœ¨Xcode 7ä¹‹å‰ï¼Œåªæœ‰åŠ å…¥åˆ°Apple Developer Programï¼ˆå³ä»˜è´¹ï¼‰æ‰èƒ½è¿›è¡ŒçœŸæœºè°ƒè¯•ï¼ŒXcode 7ä¹‹åè‹¹æœæ¨å‡ºäº†<code>Automatic signing</code>åŠŸèƒ½ï¼Œåªè¦åœ¨Xcodeä¸Šç™»é™†Apple IDï¼Œå°±ä¼šè‡ªåŠ¨ç®¡ç†è¯ä¹¦å’ŒProvisioning Profileï¼ŒåŒæ—¶æ²¡æœ‰åŠ å…¥Apple Developer Programçš„è´¦å·ä¹Ÿèƒ½è¿›è¡ŒçœŸæœºè°ƒè¯•ã€‚</p>
<p><img src="automanagesigning.png" alt></p>
<p>å‹¾é€‰Xcodeä¸­çš„<code>AutoMatically manager signing</code>ï¼Œé€‰æ‹©å¯¹åº”çš„<code>Team</code>åï¼Œæ— è®ºæ˜¯åŠ å…¥Apple Developer Programçš„è´¦å·ï¼ˆå³ä»˜è´¹è´¦å·ï¼‰è¿˜æ˜¯Apple Developerçš„è´¦å·ï¼ˆå³å…è´¹è´¦å·ï¼‰ï¼š</p>
<ul>
<li>å¦‚æœXcodeæ²¡æœ‰å¸®è¯¥è´¦å·è‡ªåŠ¨ç”Ÿæˆè¿‡<code>iOS App Development</code>ç±»å‹çš„è¯ä¹¦ï¼Œ æ— è®ºåœ¨è‹¹æœåå°æ˜¯å¦å·²ç»å­˜åœ¨å…¶ä»–<code>iOS App Development</code>ç±»å‹çš„è¯ä¹¦ï¼Œéƒ½ä¼šç”Ÿæˆä¸€å¼ æ–°çš„<code>iOS App Development</code>ç±»å‹è¯ä¹¦ï¼Œè¯ä¹¦åç§°çš„æ ¼å¼æ˜¯ï¼šå¼€å‘è€…è´¦å·åç§°(å½“å‰Macç”µè„‘åç§°)ï¼Œ å¦‚ï¼šBrian Hui (Danielsçš„MacBook Pro)ï¼ŒåŒæ—¶ä¼šä¿å­˜åœ¨å½“å‰Macç”µè„‘çš„<code>keychain</code>ä¸­</li>
<li>å…è´¹è´¦å·æ— æ³•è¿›å…¥è‹¹æœçš„ç®¡ç†è¯ä¹¦åå°ï¼Œä½†å¯ä»¥çŒœæµ‹å‡ºåœ¨è‹¹æœåå°ä¹Ÿä¼šå­˜åœ¨è¯¥è¯ä¹¦</li>
<li>å¦‚æœXcodeæ²¡æœ‰å¸®è¯¥Appçš„Bundle IDè‡ªåŠ¨ç”Ÿæˆè¿‡å¯¹åº”çš„<code>Provisioning Profile</code>ï¼Œå°±ä¼šä½¿ç”¨ä¸Šé¢é‚£å¼ è¯ä¹¦ç”Ÿæˆä¸€ä¸ª<code>Provisioning Profile</code>ï¼Œä¿å­˜åœ¨<code>~/Library/MobileDevice/Provisioning Profiles</code>ï¼Œä½†åœ¨è‹¹æœåå°åˆ™ä¸ä¼šå­˜åœ¨è¿™ä¸ª<code>Provisioning Profile</code></li>
<li>å¦‚æœåœ¨<code>é’¥åŒ™ä¸²è®¿é—®</code>ä¸­åˆ é™¤äº†é‚£å¼ è¯ä¹¦ï¼ŒXcodeä¼šæç¤ºä½ çš„è´¦å·æœ‰<code>iOS App Development</code>ç±»å‹çš„è¯ä¹¦ï¼Œä½†è¿™å°ç”µè„‘æ²¡æœ‰å®‰è£…ï¼Œéœ€è¦å…ˆæŠŠé‚£å¼ è¯ä¹¦<code>Revoke</code>ï¼Œ<code>Revoke</code>åä¼šå†æ¬¡é‡å¤å‰é¢çš„æ­¥éª¤ï¼Œç”Ÿæˆæ–°çš„è¯ä¹¦å’Œ<code>Provisioning Profile</code></li>
<li>å¦‚æœåœ¨<code>~/Library/MobileDevice/Provisioning Profiles</code>é‡Œé¢ï¼Œåˆ é™¤äº†è¯¥<code>Provisioning Profile</code>æ–‡ä»¶ï¼ŒXcodeä¼šé©¬ä¸Šé‡æ–°ç”Ÿæˆ<code>Provisioning Profile</code></li>
</ul>
<p>åœ¨ä½¿ç”¨Xcodeçš„<code>Automatic signing</code>åŠŸèƒ½çš„å‰æä¸‹ï¼Œè¿›è¡Œ<code>Archive</code>ï¼Œç„¶å<code>Distribute App</code>çš„æ—¶å€™ï¼Œé€‰æ‹©é<code>Development</code>çš„é€‰é¡¹ï¼Œå†é€‰æ‹©AutoMatically manager signing</p>
<ul>
<li>å¦‚æœæœ¬åœ°å­˜åœ¨<code>iOS Distribution</code>ç±»å‹çš„è¯ä¹¦ï¼Œåˆ™ä¼šç›´æ¥è¿›è¡Œé‡ç­¾å</li>
<li>å¦‚æœæ²¡æœ‰å­˜åœ¨<code>iOS Distribution</code>ç±»å‹çš„è¯ä¹¦ï¼Œè€Œè‹¹æœçš„åå°æœ‰ï¼Œåˆ™ä¼šå‘Šè¯‰ä½ ï¼Œè¯¥è´¦å·å­˜åœ¨<code>iOS Distribution</code>ç±»å‹çš„è¯ä¹¦ï¼Œä½†è¿™å°ç”µè„‘æ²¡æœ‰å®‰è£…ï¼Œè¯·è”ç³»åˆ›å»ºäººæ‹¿åˆ°å¤‡ä»½ï¼ˆ.p12æ–‡ä»¶ï¼‰è¿›è¡Œå®‰è£…ï¼Œå½“ä½ å®‰è£…äº†è¯¥è¯ä¹¦ï¼ˆæˆ–è€….p12æ–‡ä»¶ï¼‰ï¼Œåˆ™ä¼šç›´æ¥è¿›è¡Œé‡ç­¾å</li>
<li>å¦‚æœæ²¡æœ‰å­˜åœ¨<code>iOS Distribution</code>ç±»å‹çš„è¯ä¹¦ï¼Œè€Œè‹¹æœçš„åå°ä¹Ÿæ²¡æœ‰ï¼Œåˆ™Xcodeä¼šè¯¢é—®ä½ æ˜¯å¦éœ€è¦ç”Ÿæˆ<code>iOS Distribution</code>ç±»å‹çš„è¯ä¹¦ï¼Œå¦‚æœé€‰æ‹©éœ€è¦ï¼Œåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆ<code>iOS Distribution</code>ç±»å‹çš„è¯ä¹¦ï¼Œå¹¶ä¸”å»ºè®®ä½ ä¿å­˜åœ¨æœ¬åœ°ï¼Œè¯ä¹¦åç§°çš„æ ¼å¼æ˜¯ï¼šTeam Nameï¼Œ å¦‚ï¼šHutchison Telephone (Macau) Company Limitedï¼ŒåŒæ—¶ä½¿ç”¨è¿™å¼ è¯ä¹¦ç”Ÿæˆä¸€ä¸ª<code>Provisioning Profile</code>ï¼Œä¿å­˜åœ¨<code>~/Library/MobileDevice/Provisioning Profiles</code>ï¼Œä½†åœ¨è‹¹æœåå°åˆ™ä¸ä¼šå­˜åœ¨è¿™ä¸ª`Provisioning Profileã€‚</li>
</ul>
<h2 id="Xcodeå¯¹Provisioning-Profileçš„éªŒè¯"><a href="#Xcodeå¯¹Provisioning-Profileçš„éªŒè¯" class="headerlink" title="Xcodeå¯¹Provisioning Profileçš„éªŒè¯"></a>Xcodeå¯¹Provisioning Profileçš„éªŒè¯</h2><p>Xcodeæ€ä¹ˆæŠŠAppå’Œè¯ä¹¦ã€<code>Provisioning Profile</code>ç»‘å®šåœ¨ä¸€èµ·å‘¢ï¼Ÿä»€ä¹ˆæ—¶å€™éœ€è¦ä¸€å¼ æ–°çš„è¯ä¹¦ï¼Œä»€ä¹ˆæ—¶å€™éœ€è¦ä¸€ä¸ªæ–°çš„<code>Provisioning Profile</code>ï¼Ÿ</p>
<p>Bundle IDæ˜¯Appçš„å”¯ä¸€æ ‡è¯†ï¼ŒAppå’Œè¯ä¹¦ã€<code>Provisioning Profile</code>ç»‘å®šåœ¨ä¸€èµ·ï¼Œå…¶å®å°±æ˜¯Bundle IDå’Œè¯ä¹¦ã€<code>Provisioning Profile</code>ç»‘å®šåœ¨ä¸€èµ·ï¼Œä¸¤ç§æƒ…å†µï¼š</p>
<h3 id="Automatic-signing-1"><a href="#Automatic-signing-1" class="headerlink" title="Automatic signing"></a>Automatic signing</h3><p>Bundle IDä¸å¼€å‘è€…è´¦å·ç»‘å®šã€‚ä½¿ç”¨<code>Automatic signing</code>æ—¶ï¼Œé€‰æ‹©å¼€å‘è€…è´¦å·ï¼ˆTeamï¼‰åï¼ŒXcodeä¼šæ ¹æ®å¼€å‘è€…è´¦å·å»æœ¬åœ°æ£€ç´¢æ˜¯å¦å­˜åœ¨è¯¥è´¦å·å¯¹åº”çš„<code>Provisioning Profile</code>ï¼Œå†éªŒè¯æ˜¯å¦å­˜åœ¨ä¸è¯¥Bundle IDåŒ¹é…çš„<code>Provisioning Profile</code>ï¼Œå†æ ¹æ®<code>Provisioning Profile</code>å»æœ¬åœ°æ£€ç´¢æ˜¯å¦å­˜åœ¨å¯¹åº”çš„è¯ä¹¦ï¼Œéƒ½éªŒè¯é€šè¿‡ï¼Œåˆ™ä¼šè®¾ç½®æˆåŠŸã€‚å¦‚æœä¸å­˜åœ¨<code>Provisioning Profile</code>ï¼Œåˆ™ä¼šåˆ¤æ–­è¯¥Bundle IDæ˜¯å¦å·²ç»è¢«å…¶ä»–è´¦å·æ³¨å†Œï¼Œå¦‚æœå·²ç»è¢«å…¶ä»–è´¦å·æ³¨å†Œï¼Œåˆ™æ•´ä¸ªæµç¨‹å¤±è´¥ï¼Œéœ€è¦é€‰æ‹©å¯¹åº”çš„è´¦å·ã€‚å¦‚æœè¯¥Bundle IDæ²¡æœ‰è¢«å…¶ä»–è´¦å·æ³¨å†Œæˆ–è€…è´¦å·å·²ç»å¯¹åº”ä¸Šï¼Œåˆ™æŒ‰ç…§æ–‡ç« å‰é¢æ‰€è¯´çš„æ­¥éª¤ï¼Œæœ€åç”Ÿæˆ<code>Provisioning Profile</code>ã€‚</p>
<h3 id="æ²¡æœ‰ä½¿ç”¨Automatic-signing"><a href="#æ²¡æœ‰ä½¿ç”¨Automatic-signing" class="headerlink" title="æ²¡æœ‰ä½¿ç”¨Automatic signing"></a>æ²¡æœ‰ä½¿ç”¨Automatic signing</h3><p>éœ€è¦æ‰‹åŠ¨é€‰æ‹©<code>Provisioning Profile</code>ï¼Œå½“é€‰æ‹©äº†å…¶ä¸­ä¸€ä¸ª<code>Provisioning Profile</code>æ—¶ï¼Œåˆ™ä¼šåˆ†åˆ«éªŒè¯Bundle IDæ˜¯å¦å¯¹åº”ã€<code>Provisioning Profile</code>æ˜¯å¦è¿‡æœŸã€æ˜¯å¦å­˜åœ¨å¯¹åº”çš„è¯ä¹¦ã€Appçš„æƒé™æ˜¯å¦å¯¹åº”ã€è¯ä¹¦çš„ç±»å‹å’Œ<code>Code Signing Identity</code>è®¾ç½®æ˜¯å¦å¯¹åº”ï¼Œå¦‚æœéƒ½é€šè¿‡éªŒè¯ï¼Œåˆ™ä¼šè®¾ç½®æˆåŠŸã€‚</p>
<h1 id="App-Storeä¸Šæ¶æ‰“åŒ…æµç¨‹"><a href="#App-Storeä¸Šæ¶æ‰“åŒ…æµç¨‹" class="headerlink" title="App Storeä¸Šæ¶æ‰“åŒ…æµç¨‹"></a>App Storeä¸Šæ¶æ‰“åŒ…æµç¨‹</h1><p>xcodeæ„å»ºå¥½ä¸€ä¸ªbundle idä¸º<code>cn.sweetlover.uploadstore</code>çš„é¡¹ç›®ï¼Œå‡è®¾å·²ä¸ºä¸€ä¸ªæ­£å¸¸çš„é¡¹ç›®APPã€‚</p>
<blockquote>
<p>ç©ºdemoçš„APPæ˜¯æ— æ³•æ„å»ºæˆåŠŸçš„ã€‚</p>
</blockquote>
<p>å‡†å¤‡å¥½ä¸€ä¸ªå¼€å‘è€…è´¦å·ï¼Œå¹¶ç™»é™†<a href="https://developer.apple.com/" target="_blank" rel="noopener">è‹¹æœå¼€å‘è€…å®˜ç½‘</a>ï¼Œé€‰æ‹©<code>Certificates, IDs &amp; Profiles</code>ï¼š</p>
<p><img src="appstore2.png" alt></p>
<h2 id="åˆ›å»ºAPP-ID"><a href="#åˆ›å»ºAPP-ID" class="headerlink" title="åˆ›å»ºAPP ID"></a>åˆ›å»ºAPP ID</h2><p>é€‰æ‹©<code>Identifiers</code>ï¼Œåˆ›å»ºä¸€ä¸ªAPP IDï¼š</p>
<p><img src="appstore5.png" alt></p>
<p>è¿™é‡Œåˆ›å»ºä¸€ä¸ªBundleIDä¸º<code>cn.sweetlover.uploadstore</code>ï¼ŒBundleIDæ ¼å¼è¿™é‡Œä¸ç»†è®²äº†ã€‚</p>
<p><img src="appstore3.png" alt></p>
<p>ä¸‹é¢çš„é€‰æ‹©æ˜¯æƒ³è¦è®©ä½ APPæ‰€æ¥å…¥çš„èƒ½åŠ›ï¼Œä¾‹å¦‚å¸¸ç”¨çš„æ¨é€åŠŸèƒ½</p>
<p><img src="appstore4.png" alt></p>
<p>é€‰æ‹©ç»§ç»­ï¼Œå¹¶æ³¨å†Œåï¼Œä¼šçœ‹åˆ°<code>Identifiers</code>ä¼šå‡ºç°ä½ åˆšåˆšåˆ›å»ºçš„APP IDï¼š</p>
<p><img src="appstore6.png" alt></p>
<h2 id="æ³¨å†Œæµ‹è¯•è®¾å¤‡"><a href="#æ³¨å†Œæµ‹è¯•è®¾å¤‡" class="headerlink" title="æ³¨å†Œæµ‹è¯•è®¾å¤‡"></a>æ³¨å†Œæµ‹è¯•è®¾å¤‡</h2><p>é€‰æ‹©<code>Devices</code>ï¼Œæ·»åŠ </p>
<p><img src="appstore7.png" alt></p>
<p>å¡«å†™è®¾å¤‡åç§°å’ŒUDIDå³å¯ï¼ŒUDIDå¯ä»¥ä½¿ç”¨ITunesæŸ¥çœ‹ã€‚</p>
<p><img src="appstore8.png" alt></p>
<h2 id="åˆ›å»ºCSR"><a href="#åˆ›å»ºCSR" class="headerlink" title="åˆ›å»ºCSR"></a>åˆ›å»ºCSR</h2><p>æ‰“å¼€<code>Mac</code>-&gt;<code>é’¥åŒ™ä¸²è®¿é—®</code>-&gt;<code>è¯ä¹¦åŠ©ç†</code>-&gt;<code>ä»è¯ä¹¦é¢å‘æœºæ„è¯·æ±‚è¯ä¹¦..</code>ï¼Œå¡«å†™ï¼Œå¹¶é€‰æ‹©å­˜å‚¨åˆ°ç£ç›˜</p>
<p><img src="appstore10.png" alt></p>
<p><img src="appstore11.png" alt></p>
<h2 id="åˆ›å»ºè¯ä¹¦"><a href="#åˆ›å»ºè¯ä¹¦" class="headerlink" title="åˆ›å»ºè¯ä¹¦"></a>åˆ›å»ºè¯ä¹¦</h2><p>é€‰æ‹©<code>Certificates</code>ï¼Œæ·»åŠ </p>
<h3 id="åˆ›å»ºå¼€å‘è¯ä¹¦"><a href="#åˆ›å»ºå¼€å‘è¯ä¹¦" class="headerlink" title="åˆ›å»ºå¼€å‘è¯ä¹¦"></a>åˆ›å»ºå¼€å‘è¯ä¹¦</h3><p>é€‰æ‹©<code>IOS App Development</code>ï¼Œå¹¶ç»§ç»­</p>
<p><img src="appstore9.png" alt></p>
<p>ä¸Šä¼ CSRæ–‡ä»¶ï¼Œå³é€‰æ‹©æˆ‘ä»¬åˆšåˆšåˆ›å»ºå¥½çš„CSRæ–‡ä»¶ã€‚å¹¶ç»§ç»­</p>
<p><img src="appstore12.png" alt></p>
<p>åˆ›å»ºå¥½åï¼Œé€‰æ‹©ä¸‹è½½è¯ä¹¦ï¼ŒåŒå‡»å®‰è£…ï¼š</p>
<p><img src="appstore13.png" alt></p>
<p>æ‰“å¼€é’¥åŒ™ä¸²è®¿é—®å³å¯çœ‹åˆ°æˆ‘ä»¬åˆšåˆšå®‰è£…å¥½çš„è¯ä¹¦</p>
<p><img src="appstore14.png" alt></p>
<p>å‘å¸ƒè¯ä¹¦å°±åˆ›å»ºå®Œæ¯•äº†ã€‚</p>
<h3 id="åˆ›å»ºå‘å¸ƒè¯ä¹¦"><a href="#åˆ›å»ºå‘å¸ƒè¯ä¹¦" class="headerlink" title="åˆ›å»ºå‘å¸ƒè¯ä¹¦"></a>åˆ›å»ºå‘å¸ƒè¯ä¹¦</h3><p>é‡å¤ä¸Šè¿°åˆ›å»ºå¼€å‘è¯ä¹¦çš„æ­¥éª¤ï¼Œåªä¸è¿‡é€‰é¡¹å‘ç”Ÿå˜åŒ–ï¼š</p>
<p><img src="appstore15.png" alt></p>
<p>æœ€åä¸‹è½½å®‰è£…ï¼Œçœ‹åˆ°é’¥åŒ™ä¸²è®¿é—®å‡ºç°è¯ä¹¦å³å¯</p>
<p><img src="appstore16.png" alt></p>
<h2 id="åˆ›å»ºProfiles"><a href="#åˆ›å»ºProfiles" class="headerlink" title="åˆ›å»ºProfiles"></a>åˆ›å»ºProfiles</h2><p>é€‰æ‹©<code>Profiles</code></p>
<h3 id="åˆ›å»ºå¼€å‘Provisioning-Profile"><a href="#åˆ›å»ºå¼€å‘Provisioning-Profile" class="headerlink" title="åˆ›å»ºå¼€å‘Provisioning Profile"></a>åˆ›å»ºå¼€å‘Provisioning Profile</h3><p>é€‰æ‹©<code>IOS App Development</code>ï¼Œå¹¶ç»§ç»­</p>
<p><img src="appstore17.png" alt></p>
<p>é€‰æ‹©å¥½æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„APP IDï¼Œå¦‚<code>cn.sweetlover.uploadstore</code>ï¼Œå¹¶ç»§ç»­</p>
<p><img src="appstore18.png" alt></p>
<p>é€‰æ‹©å¼€å‘è¯ä¹¦ï¼Œå¹¶ç»§ç»­</p>
<p><img src="appstore19.png" alt></p>
<p>é€‰æ‹©æµ‹è¯•è®¾å¤‡ï¼Œå¹¶ç»§ç»­</p>
<p><img src="appstore20.png" alt></p>
<p>å¡«å†™Provisioning Profile Nameï¼Œå¹¶é€‰æ‹©ç”Ÿæˆ</p>
<p><img src="appstore21.png" alt></p>
<p>ä¸‹è½½å¹¶åŒå‡»å®‰è£…ï¼š</p>
<p><img src="appstore22.png" alt></p>
<p><img src="appstore24.png" alt></p>
<p>xcodeç­¾åæ–¹å¼é€‰æ‹©æ‰‹åŠ¨ä»¥ä¾¿æŸ¥çœ‹ï¼š</p>
<p><img src="appstore23.png" alt></p>
<h3 id="åˆ›å»ºå‘å¸ƒProvisioning-Profile"><a href="#åˆ›å»ºå‘å¸ƒProvisioning-Profile" class="headerlink" title="åˆ›å»ºå‘å¸ƒProvisioning Profile"></a>åˆ›å»ºå‘å¸ƒProvisioning Profile</h3><p>é‡å¤ä¸Šè¿°åˆ›å»ºå¼€å‘è¯ä¹¦çš„æ­¥éª¤ï¼Œåªä¸è¿‡é€‰é¡¹å‘ç”Ÿå˜åŒ–ï¼š</p>
<p><img src="appstore25.png" alt></p>
<p>xcodeï¼š</p>
<p><img src="appstore26.png" alt></p>
<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p>å¦‚æœä¸å®‰è£…è¯ä¹¦ï¼Œé€‰æ‹©profileï¼Œxcodeä¼šæŠ¥é”™ç¼ºå°‘è¯ä¹¦æ–‡ä»¶ï¼š</p>
<p><img src="appstore27.png" alt></p>
<h2 id="App-Store-Connectå‘å¸ƒ"><a href="#App-Store-Connectå‘å¸ƒ" class="headerlink" title="App Store Connectå‘å¸ƒ"></a>App Store Connectå‘å¸ƒ</h2><h3 id="APPåˆ›å»º"><a href="#APPåˆ›å»º" class="headerlink" title="APPåˆ›å»º"></a>APPåˆ›å»º</h3><p>ç‚¹å‡»<code>Account</code>ç™»é™†åç‚¹å‡»<code>App Store Connect</code>ï¼Œé€‰æ‹©<code>æˆ‘çš„App</code></p>
<p><img src="appstore1.png" alt></p>
<p>æ–°å»ºAPPï¼Œå¡«å†™å¥½èµ„æ–™ï¼Œå¹¶åˆ›å»ºï¼Œåˆ›å»ºåè¿›å…¥APPï¼Œç¼–è¾‘APPåº”ç”¨ä¿¡æ¯å’Œå®šä»·æƒ…å†µ</p>
<p><img src="appstore28.png" alt></p>
<p><img src="appstore30.png" alt></p>
<h3 id="ç‰ˆæœ¬æäº¤"><a href="#ç‰ˆæœ¬æäº¤" class="headerlink" title="ç‰ˆæœ¬æäº¤"></a>ç‰ˆæœ¬æäº¤</h3><p>é¦–æ¬¡æäº¤ä¼šå‡ºç°ä»¥ä¸‹ç•Œé¢ï¼Œå¡«å†™å¥½é‡Œé¢æ‰€éœ€è¦çš„èµ„æ–™ï¼Œé‡Œé¢éƒ½å¯æŒ‰ç…§æç¤ºè¿›è¡Œç¼–å†™ã€‚</p>
<p><img src="appstore32.png" alt></p>
<p>å¦‚æœå·²ç»å‘å¸ƒäº†ï¼Œéœ€è¦ç»§ç»­å‘ç‰ˆæœ¬ï¼Œåˆ™ç‚¹å‡»</p>
<p><img src="appstore33.png" alt></p>
<p>ç”±äºé¦–æ¬¡æäº¤è¿˜æœªä¸Šæ¶è¿‡ï¼Œæ‰€ä»¥æŒ‰é’®æ˜¯ç½®ç°çš„çŠ¶æ€ï¼Œæ— æ³•ç‚¹å‡»ã€‚</p>
<h2 id="Xcode-Archiveæ„å»ºç‰ˆæœ¬"><a href="#Xcode-Archiveæ„å»ºç‰ˆæœ¬" class="headerlink" title="Xcode Archiveæ„å»ºç‰ˆæœ¬"></a>Xcode Archiveæ„å»ºç‰ˆæœ¬</h2><p>è¿›å…¥<code>Xcode</code>é€‰æ‹©<code>Product</code>-&gt;<code>Archive</code>ï¼Œæ³¨æ„ä¸è¦é€‰ä¸­åˆ°æ¨¡æ‹Ÿå™¨ï¼Œè¦é€‰ä¸­<code>Generic IOS Device</code>ã€‚å› ä¸ºä¸Šæ¶çš„åŒ…ä¸æ˜¯é’ˆå¯¹æŸç§è®¾å¤‡æ¥è¿›è¡ŒArchiveçš„ã€‚</p>
<p><img src="appstore34.png" alt></p>
<p>å‡ºç°ä»¥ä¸‹ç•Œé¢ï¼Œé€‰æ‹©Distrubite Appï¼Œå¦‚æœArchiveè¿‡å¤šæ¬¡ç‰ˆæœ¬ä¹Ÿä¼šå‡ºç°ä»¥å¾€çš„ç‰ˆæœ¬ã€‚</p>
<p><img src="appstore35.png" alt></p>
<p>é€‰æ‹©IOS App Store</p>
<p><img src="appstore36.png" alt></p>
<p>è¿™é‡Œç›´æ¥é€‰æ‹©ä¸Šä¼ ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å¯¼å‡ºæˆIPAï¼Œä½¿ç”¨Application Loaderè¿›è¡Œå‘å¸ƒã€‚</p>
<p><img src="appstore37.png" alt></p>
<p>next~</p>
<p><img src="appstore38.png" alt></p>
<p>é€‰æ‹©å¥½å‘å¸ƒçš„è¯ä¹¦å’Œprofileæ–‡ä»¶</p>
<p><img src="appstore39.png" alt></p>
<p>é€‰æ‹©ä¸Šä¼ å³å¯ã€‚</p>
<p><img src="appstore40.png" alt></p>
<p>ç»è¿‡ä¸€æ®µæ¼«é•¿çš„æ—¶é—´ç­‰å¾…åï¼Œå›åˆ°App Store Connectçš„é¡µé¢ä¸­ï¼Œå¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´ç­‰åˆ°ï¼Œå»ºç½®ç‰ˆæœ¬åå‡ºç°æŒ‰é’®å³å¯é€‰æ‹©æ„å»ºå¥½çš„ç‰ˆæœ¬ã€‚</p>
<p><img src="appstore41.png" alt></p>
<p>å¡«å†™å¥½æ‰€éœ€è¦çš„èµ„æ–™å°±å¯ä»¥æäº¤å®¡æ ¸äº†ã€‚</p>
<h1 id="å…³äºApplication-Loader"><a href="#å…³äºApplication-Loader" class="headerlink" title="å…³äºApplication Loader"></a>å…³äºApplication Loader</h1><p>æ‰“å¼€<code>Xcode</code> -&gt; <code>Open Developer Tool</code> -&gt; <code>Application Loader</code>ï¼Œç™»é™†ä½ çš„APP IDã€‚</p>
<p><img src="applicationloader.png" alt></p>
<p>å¯†ç ç™»é™†éAPPLE IDçš„å¯†ç ï¼Œéœ€è¦ç™»å½•appleid.apple.comä¸Šï¼Œè¾“å…¥AppleIDå¯†ç åä¼šäº§ç”Ÿä¸€ä¸ªå¯†ç ï¼Œå»<code>Application Loader</code>ä¸­è¾“å…¥äº§ç”Ÿçš„å¯†ç å³å¯ã€‚</p>
<p><img src="applicationloader2.png" alt></p>
<h1 id="å…³äºTestFlight"><a href="#å…³äºTestFlight" class="headerlink" title="å…³äºTestFlight"></a>å…³äºTestFlight</h1><p>ç­‰ä¸Šä¼ æ„å»ºç‰ˆæœ¬å¤„ç†å®Œæˆåï¼Œä¸€èˆ¬ä¼šæ˜¾ç¤ºç¼ºå°‘å‡ºå£åˆè§„è¯æ˜ã€‚ç‚¹å‡»é»„è‰²æç¤ºé‚£ï¼Œåœ¨å¼¹å‡ºçš„é¡µé¢é€‰æ‹©å¦ï¼Œç‚¹å‡»å¼€å§‹å†…éƒ¨æµ‹è¯•ã€‚</p>
<p><img src="testflight.png" alt></p>
<p>é€‰æ‹©App Store connectç”¨æˆ·é€‰é¡¹ï¼Œç‚¹å‡»æµ‹è¯•å‘˜æ—è¾¹+å·ï¼Œé€‰æ‹©æµ‹è¯•çš„è‹¹æœè´¦å·ï¼</p>
<p><img src="testflight2.png" alt></p>
<p>ç„¶åæ‰‹æœºç«¯ä¸‹è½½TestFlightåï¼Œå…‘æ¢é‚€è¯·ç å³å¯ã€‚</p>
<h1 id="Appå®¡æ ¸æŒ‡å—"><a href="#Appå®¡æ ¸æŒ‡å—" class="headerlink" title="Appå®¡æ ¸æŒ‡å—"></a>Appå®¡æ ¸æŒ‡å—</h1><p>App Store Review Guidelinesï¼š<a href="https://developer.apple.com/app-store/review/guidelines/" target="_blank" rel="noopener">https://developer.apple.com/app-store/review/guidelines/</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>QPSã€TPSã€PVã€UVã€GMVã€IPã€RPSæ¦‚å¿µè§£é‡Š</title>
    <url>/2019/08/20/QPS%E3%80%81TPS%E3%80%81PV%E3%80%81UV%E3%80%81GMV%E3%80%81IP%E3%80%81RPS%E6%A6%82%E5%BF%B5%E8%A7%A3%E9%87%8A/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¹‹å‰çœ‹åˆ°ä¸€äº›QPSã€TPSã€PVç­‰çš„ä¸€äº›åè¯ï¼Œä¹Ÿè¿˜æ²¡æ¸…æ¥šå®ƒä»¬çš„æ„æ€ï¼ŒæŸ¥äº†ä¸€ä¸‹èµ„æ–™å¹¶è®°å½•ä¸€ä¸‹ã€‚</p>
<a id="more"></a>
<h1 id="QPS"><a href="#QPS" class="headerlink" title="QPS"></a><strong>QPS</strong></h1><p>Queries Per Secondï¼Œæ¯ç§’æŸ¥è¯¢æ•°ã€‚æ¯ç§’èƒ½å¤Ÿå“åº”çš„æŸ¥è¯¢æ¬¡æ•°ã€‚</p>
<p>QPSæ˜¯å¯¹ä¸€ä¸ªç‰¹å®šçš„æŸ¥è¯¢æœåŠ¡å™¨åœ¨è§„å®šæ—¶é—´å†…æ‰€å¤„ç†æµé‡å¤šå°‘çš„è¡¡é‡æ ‡å‡†ï¼Œåœ¨å› ç‰¹ç½‘ä¸Šï¼Œä½œä¸ºåŸŸåç³»ç»ŸæœåŠ¡å™¨çš„æœºå™¨çš„æ€§èƒ½ç»å¸¸ç”¨æ¯ç§’æŸ¥è¯¢ç‡æ¥è¡¡é‡ã€‚æ¯ç§’çš„å“åº”è¯·æ±‚æ•°ï¼Œä¹Ÿå³æ˜¯æœ€å¤§ååèƒ½åŠ›ã€‚</p>
<h1 id="TPS"><a href="#TPS" class="headerlink" title="TPS"></a><strong>TPS</strong></h1><p>Transactions Per Second çš„ç¼©å†™ï¼Œæ¯ç§’å¤„ç†çš„äº‹åŠ¡æ•°ç›®ã€‚ä¸€ä¸ªäº‹åŠ¡æ˜¯æŒ‡ä¸€ä¸ªå®¢æˆ·æœºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ç„¶åæœåŠ¡å™¨åšå‡ºååº”çš„è¿‡ç¨‹ã€‚å®¢æˆ·æœºåœ¨å‘é€è¯·æ±‚æ—¶å¼€å§‹è®¡æ—¶ï¼Œæ”¶åˆ°æœåŠ¡å™¨å“åº”åç»“æŸè®¡æ—¶ï¼Œä»¥æ­¤æ¥è®¡ç®—ä½¿ç”¨çš„æ—¶é—´å’Œå®Œæˆçš„äº‹åŠ¡ä¸ªæ•°ï¼Œæœ€ç»ˆåˆ©ç”¨è¿™äº›ä¿¡æ¯ä½œå‡ºçš„è¯„ä¼°åˆ†ã€‚</p>
<p>TPS çš„è¿‡ç¨‹åŒ…æ‹¬ï¼šå®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯ã€æœåŠ¡ç«¯å†…éƒ¨å¤„ç†ã€æœåŠ¡ç«¯è¿”å›å®¢æˆ·ç«¯ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè®¿é—®ä¸€ä¸ª Index é¡µé¢ä¼šè¯·æ±‚æœåŠ¡å™¨ 3 æ¬¡ï¼ŒåŒ…æ‹¬ä¸€æ¬¡ htmlï¼Œä¸€æ¬¡ cssï¼Œä¸€æ¬¡ jsï¼Œé‚£ä¹ˆè®¿é—®è¿™ä¸€ä¸ªé¡µé¢å°±ä¼šäº§ç”Ÿä¸€ä¸ªâ€œTâ€ï¼Œäº§ç”Ÿä¸‰ä¸ªâ€œQâ€ã€‚</p>
<h1 id="PV"><a href="#PV" class="headerlink" title="PV"></a><strong>PV</strong></h1><p>ï¼ˆpage viewï¼‰å³é¡µé¢æµè§ˆé‡ï¼Œé€šå¸¸æ˜¯è¡¡é‡ä¸€ä¸ªç½‘ç»œæ–°é—»é¢‘é“æˆ–ç½‘ç«™ç”šè‡³ä¸€æ¡ç½‘ç»œæ–°é—»çš„ä¸»è¦æŒ‡æ ‡ã€‚æˆ·æ¯ä¸€æ¬¡å¯¹ç½‘ç«™ä¸­çš„æ¯ä¸ªé¡µé¢è®¿é—®å‡è¢«è®°å½• 1 æ¬¡ã€‚ç”¨æˆ·å¯¹åŒä¸€é¡µé¢çš„å¤šæ¬¡åˆ·æ–°ï¼Œè®¿é—®é‡ç´¯è®¡ã€‚</p>
<p>æ ¹æ®è¿™ä¸ªç‰¹æ€§ï¼Œåˆ·ç½‘ç«™çš„ PV å°±å¾ˆå¥½åˆ·äº†ã€‚</p>
<p>ä¸ PV ç›¸å…³çš„è¿˜æœ‰ <strong>RV</strong>ï¼Œå³é‡å¤è®¿é—®è€…æ•°é‡ï¼ˆrepeat visitorsï¼‰ã€‚</p>
<h1 id="UV"><a href="#UV" class="headerlink" title="UV"></a><strong>UV</strong></h1><p>è®¿é—®æ•°ï¼ˆUnique Visitorï¼‰æŒ‡ç‹¬ç«‹è®¿å®¢è®¿é—®æ•°ï¼Œç»Ÿè®¡1å¤©å†…è®¿é—®æŸç«™ç‚¹çš„ç”¨æˆ·æ•°(ä»¥ cookie ä¸ºä¾æ®)ï¼Œä¸€å°ç”µè„‘ç»ˆç«¯ä¸ºä¸€ä¸ªè®¿å®¢ã€‚</p>
<h1 id="IP"><a href="#IP" class="headerlink" title="IP"></a><strong>IP</strong></h1><p>ï¼ˆInternet Protocolï¼‰ç‹¬ç«‹ IP æ•°ï¼Œæ˜¯æŒ‡ 1 å¤©å†…å¤šå°‘ä¸ªç‹¬ç«‹çš„ IP æµè§ˆäº†é¡µé¢ï¼Œå³ç»Ÿè®¡ä¸åŒçš„ IP æµè§ˆç”¨æˆ·æ•°é‡ã€‚åŒä¸€ IP ä¸ç®¡è®¿é—®äº†å‡ ä¸ªé¡µé¢ï¼Œç‹¬ç«‹ IP æ•°å‡ä¸º 1ï¼›ä¸åŒçš„ IP æµè§ˆé¡µé¢ï¼Œè®¡æ•°ä¼šåŠ  1ã€‚IP æ˜¯åŸºäºç”¨æˆ·å¹¿åŸŸç½‘ IP åœ°å€æ¥åŒºåˆ†ä¸åŒçš„è®¿é—®è€…çš„ï¼Œæ‰€ä»¥ï¼Œå¤šä¸ªç”¨æˆ·ï¼ˆå¤šä¸ªå±€åŸŸç½‘ IPï¼‰åœ¨åŒä¸€ä¸ªè·¯ç”±å™¨ï¼ˆåŒä¸€ä¸ªå¹¿åŸŸç½‘ IPï¼‰å†…ä¸Šç½‘ï¼Œå¯èƒ½è¢«è®°å½•ä¸ºä¸€ä¸ªç‹¬ç«‹ IP è®¿é—®è€…ã€‚å¦‚æœç”¨æˆ·ä¸æ–­æ›´æ¢ IPï¼Œåˆ™æœ‰å¯èƒ½è¢«å¤šæ¬¡ç»Ÿè®¡ã€‚</p>
<h1 id="GMV"><a href="#GMV" class="headerlink" title="GMV"></a><strong>GMV</strong></h1><p>æ˜¯ Gross Merchandise Volume çš„ç®€ç§°ã€‚åªè¦æ˜¯è®¢å•ï¼Œä¸ç®¡æ¶ˆè´¹è€…æ˜¯å¦ä»˜æ¬¾ã€å–å®¶æ˜¯å¦å‘è´§ã€æ˜¯å¦é€€è´§ï¼Œéƒ½å¯æ”¾è¿› GMV ã€‚</p>
<h1 id="RPS"><a href="#RPS" class="headerlink" title="RPS"></a><strong>RPS</strong></h1><p>ä»£è¡¨ååç‡ï¼Œå³ Requests Per Second çš„ç¼©å†™ã€‚ååç‡æ˜¯æœåŠ¡å™¨å¹¶å‘å¤„ç†èƒ½åŠ›çš„é‡åŒ–æè¿°ï¼Œå•ä½æ˜¯ reqs/sï¼ŒæŒ‡çš„æ˜¯æŸä¸ªå¹¶å‘ç”¨æˆ·æ•°ä¸‹å•ä½æ—¶é—´å†…å¤„ç†çš„è¯·æ±‚æ•°ã€‚<br>æŸä¸ªå¹¶å‘ç”¨æˆ·æ•°ä¸‹å•ä½æ—¶é—´å†…èƒ½å¤„ç†çš„æœ€å¤§çš„è¯·æ±‚æ•°ï¼Œç§°ä¹‹ä¸ºæœ€å¤§ååç‡ã€‚</p>
<blockquote>
<p>æœ‰äººæŠŠ RPS è¯´ç­‰æ•ˆäº QPSã€‚å…¶å®å¯ä»¥çœ‹ä½œåŒä¸€ä¸ªç»Ÿè®¡æ–¹å¼ï¼Œåªæ˜¯å«æ³•ä¸åŒè€Œå·²ã€‚RPS/QPSï¼Œå¯ä»¥ä½¿ç”¨ apche ab å·¥å…·è¿›è¡Œæµ‹é‡ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>QPSã€TPSã€PVã€UVã€GMVã€IPã€RPS</tag>
      </tags>
  </entry>
  <entry>
    <title>Android SharedPreferencesä½¿ç”¨</title>
    <url>/2019/08/13/Android-SharedPreferences%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Sharedpreferencesæ˜¯Androidå¹³å°ä¸Šä¸€ä¸ªè½»é‡çº§çš„å­˜å‚¨ç±»ï¼Œç”¨æ¥ä¿å­˜åº”ç”¨ç¨‹åºçš„å„ç§é…ç½®ä¿¡æ¯ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªä»¥â€œé”®-å€¼â€å¯¹çš„æ–¹å¼ä¿å­˜æ•°æ®çš„xmlæ–‡ä»¶ï¼Œå…¶æ–‡ä»¶ä¿å­˜åœ¨<code>/data/data/${pkg}/shared_prefs</code>ç›®å½•ä¸‹ã€‚åœ¨å…¨å±€å˜é‡ä¸Šçœ‹ï¼Œå…¶ä¼˜ç‚¹æ˜¯ä¸ä¼šäº§ç”ŸApplication ã€ é™æ€å˜é‡çš„OOMï¼ˆout of memoryï¼‰å’Œç©ºæŒ‡é’ˆé—®é¢˜ï¼Œå…¶ç¼ºç‚¹æ˜¯æ•ˆç‡æ²¡æœ‰ä¸Šé¢çš„ä¸¤ç§æ–¹æ³•é«˜ã€‚<strong>SharedPreferenceså®ç°æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†ä¸æ˜¯è¿›ç¨‹å®‰å…¨çš„ã€‚</strong></p>
<a id="more"></a>
<h1 id="è·å–SharedPreferences"><a href="#è·å–SharedPreferences" class="headerlink" title="è·å–SharedPreferences"></a>è·å–SharedPreferences</h1><p>ä½¿ç”¨ SharedPreferences æ¥å­˜å‚¨æ•°æ®ï¼Œé¦–å…ˆéœ€è¦è·å–åˆ° SharedPreferences å¯¹è±¡ã€‚Androidä¸­ä¸»è¦æä¾›äº†ä¸¤ç§æ–¹æ³•ç”¨äºå¾—åˆ° SharedPreferences å¯¹è±¡ã€‚</p>
<h2 id="Context-ç±»ä¸­çš„-getSharedPreferences-æ–¹æ³•ï¼š"><a href="#Context-ç±»ä¸­çš„-getSharedPreferences-æ–¹æ³•ï¼š" class="headerlink" title="Context ç±»ä¸­çš„ getSharedPreferences()æ–¹æ³•ï¼š"></a>Context ç±»ä¸­çš„ getSharedPreferences()æ–¹æ³•ï¼š</h2><p>æ­¤æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºæŒ‡å®š SharedPreferences æ–‡ä»¶çš„åç§°ï¼Œå¦‚æœæŒ‡å®šçš„æ–‡ä»¶ä¸å­˜åœ¨åˆ™ä¼šåˆ›å»ºä¸€ä¸ªï¼Œç¬¬äºŒä¸ªå‚æ•°ç”¨äºæŒ‡å®šæ“ä½œæ¨¡å¼ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ¨¡å¼å¯ä»¥é€‰æ‹©ã€‚<code>MODE_PRIVATE</code> æ˜¯é»˜è®¤çš„æ“ä½œæ¨¡å¼ï¼Œå’Œç›´æ¥ä¼ å…¥ 0 æ•ˆæœæ˜¯ç›¸åŒçš„ã€‚<br><code>MODE_WORLD_READABLE</code> å’Œ <code>MODE_WORLD_WRITEABLE</code> è¿™ä¸¤ç§æ¨¡å¼å·²åœ¨ Android 4.2 ç‰ˆæœ¬ä¸­è¢«åºŸå¼ƒã€‚</p>
<ul>
<li><strong>Context.MODE_PRIVATEï¼š</strong>ä¸ºé»˜è®¤æ“ä½œæ¨¡å¼,ä»£è¡¨è¯¥æ–‡ä»¶æ˜¯ç§æœ‰æ•°æ®,åªèƒ½è¢«åº”ç”¨æœ¬èº«è®¿é—®,åœ¨è¯¥æ¨¡å¼ä¸‹,å†™å…¥çš„å†…å®¹ä¼šè¦†ç›–åŸæ–‡ä»¶çš„å†…å®¹ï¼›</li>
<li><strong>Context.MODE_APPENDï¼š</strong>æ¨¡å¼ä¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨,å­˜åœ¨å°±å¾€æ–‡ä»¶è¿½åŠ å†…å®¹,å¦åˆ™å°±åˆ›å»ºæ–°æ–‡ä»¶ï¼›</li>
<li><strong>Context.MODE_WORLD_READABLEï¼š</strong>è¡¨ç¤ºå½“å‰æ–‡ä»¶å¯ä»¥è¢«å…¶ä»–åº”ç”¨è¯»å–ï¼›</li>
<li><strong>Context.MODE_WORLD_WRITEABLEï¼š</strong>è¡¨ç¤ºå½“å‰æ–‡ä»¶å¯ä»¥è¢«å…¶ä»–åº”ç”¨å†™å…¥ï¼›</li>
</ul>
<h2 id="PreferenceManager-ç±»ä¸­çš„-getDefaultSharedPreferences-æ–¹æ³•ï¼š"><a href="#PreferenceManager-ç±»ä¸­çš„-getDefaultSharedPreferences-æ–¹æ³•ï¼š" class="headerlink" title="PreferenceManager ç±»ä¸­çš„ getDefaultSharedPreferences()æ–¹æ³•ï¼š"></a>PreferenceManager ç±»ä¸­çš„ getDefaultSharedPreferences()æ–¹æ³•ï¼š</h2><p>è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª Context å‚æ•°ï¼Œå¹¶è‡ªåŠ¨ä½¿ç”¨å½“å‰åº”ç”¨ç¨‹åºçš„åŒ…åä½œä¸ºå‰ç¼€æ¥å‘½å SharedPreferences æ–‡ä»¶ã€‚<del>[å·²åºŸå¼ƒ]</del></p>
<h1 id="SharedPreferencesçš„ä½¿ç”¨"><a href="#SharedPreferencesçš„ä½¿ç”¨" class="headerlink" title="SharedPreferencesçš„ä½¿ç”¨"></a>SharedPreferencesçš„ä½¿ç”¨</h1><p>SharedPreferenceså¯¹è±¡æœ¬èº«åªèƒ½è·å–æ•°æ®è€Œä¸æ”¯æŒå­˜å‚¨å’Œä¿®æ”¹,å­˜å‚¨ä¿®æ”¹æ˜¯é€šè¿‡SharedPreferences.edit()è·å–çš„å†…éƒ¨æ¥å£Editorå¯¹è±¡å®ç°ã€‚</p>
<h2 id="å­˜å‚¨æ•°æ®"><a href="#å­˜å‚¨æ•°æ®" class="headerlink" title="å­˜å‚¨æ•°æ®"></a>å­˜å‚¨æ•°æ®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SharedPreferences sp = getSharedPreferences(<span class="string">"user"</span>, Context.MODE_PRIVATE);</span><br><span class="line">SharedPreferences.Editor editor = sp.edit();</span><br><span class="line">editor.putBoolean(<span class="string">"isBoy"</span>, <span class="keyword">true</span>);</span><br><span class="line">editor.putString(<span class="string">"username"</span>, <span class="string">"xiaohong"</span>);</span><br><span class="line">editor.putInt(<span class="string">"wage"</span>, <span class="number">6000</span>);</span><br><span class="line">editor.commit();</span><br></pre></td></tr></table></figure>
<h2 id="è¯»å–æ•°æ®"><a href="#è¯»å–æ•°æ®" class="headerlink" title="è¯»å–æ•°æ®"></a>è¯»å–æ•°æ®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SharedPreferences sp = getSharedPreferences(<span class="string">"user"</span>, Context.MODE_PRIVATE);</span><br><span class="line">String username = sp.getString(<span class="string">"username"</span>, <span class="string">""</span>);</span><br><span class="line"><span class="keyword">boolean</span> isBoy = sp.getBoolean(<span class="string">"isBoy"</span>, <span class="keyword">false</span>);</span><br><span class="line"><span class="keyword">int</span> wage = sp.getInt(<span class="string">"wage"</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<h2 id="åˆ é™¤æŒ‡å®šæ•°æ®"><a href="#åˆ é™¤æŒ‡å®šæ•°æ®" class="headerlink" title="åˆ é™¤æŒ‡å®šæ•°æ®"></a>åˆ é™¤æŒ‡å®šæ•°æ®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SharedPreferences sp = getSharedPreferences(<span class="string">"user"</span>, Context.MODE_PRIVATE);</span><br><span class="line">SharedPreferences.Editor editor = sp.edit();</span><br><span class="line">editor.remove(<span class="string">"wage"</span>);</span><br><span class="line">editor.commit();</span><br></pre></td></tr></table></figure>
<h2 id="æ¸…ç©ºæ•°æ®"><a href="#æ¸…ç©ºæ•°æ®" class="headerlink" title="æ¸…ç©ºæ•°æ®"></a>æ¸…ç©ºæ•°æ®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SharedPreferences sp = getSharedPreferences(<span class="string">"user"</span>, Context.MODE_PRIVATE);</span><br><span class="line">SharedPreferences.Editor editor = sp.edit();</span><br><span class="line">editor.clear();</span><br><span class="line">editor.commit();</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„</strong>ï¼šå¦‚æœåœ¨ Fragment ä¸­ä½¿ç”¨SharedPreferences æ—¶ï¼Œéœ€è¦æ”¾åœ¨onAttach(Activity activity)é‡Œé¢è¿›è¡ŒSharedPreferencesçš„åˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šæŠ¥ç©ºæŒ‡é’ˆ å³ getActivity()ä¼šå¯èƒ½è¿”å›null ï¼</p>
<h2 id="è¯»å†™å…¶ä»–åº”ç”¨çš„SharedPreferences"><a href="#è¯»å†™å…¶ä»–åº”ç”¨çš„SharedPreferences" class="headerlink" title="è¯»å†™å…¶ä»–åº”ç”¨çš„SharedPreferences"></a>è¯»å†™å…¶ä»–åº”ç”¨çš„SharedPreferences</h2><p>â€ƒ1. åœ¨åˆ›å»ºSharedPreferencesæ—¶ï¼ŒæŒ‡å®šMODE_WORLD_READABLEæ¨¡å¼ï¼Œè¡¨æ˜è¯¥SharedPreferencesæ•°æ®å¯ä»¥è¢«å…¶ä»–ç¨‹åºè¯»å–ï¼›<br>â€ƒ2. åˆ›å»ºå…¶ä»–åº”ç”¨ç¨‹åºå¯¹åº”çš„Contextï¼›<br>â€ƒ3. ä½¿ç”¨å…¶ä»–ç¨‹åºçš„Contextè·å–å¯¹åº”çš„SharedPreferencesï¼›<br>â€ƒ4. å¦‚æœæ˜¯å†™å…¥æ•°æ®ï¼Œä½¿ç”¨Editoræ¥å£å³å¯ï¼Œæ‰€æœ‰å…¶ä»–æ“ä½œå‡å’Œå‰é¢ä¸€è‡´ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//è¿™é‡Œçš„com.example.mpreferences å°±æ˜¯åº”ç”¨çš„åŒ…å</span></span><br><span class="line">  Context mcontext = createPackageContext(<span class="string">"com.example.mpreferences"</span>, CONTEXT_IGNORE_SECURITY);</span><br><span class="line">  SharedPreferences msharedpreferences = mcontext.getSharedPreferences(<span class="string">"name_preference"</span>, MODE_PRIVATE);</span><br><span class="line">  <span class="keyword">int</span> count = msharedpreferences.getInt(<span class="string">"count"</span>, <span class="number">0</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (PackageManager.NameNotFoundException e) &#123;</span><br><span class="line">  e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="SharedPreferences-Editorå¯¹è±¡ä¸­commitå’Œapplyçš„åŒºåˆ«"><a href="#SharedPreferences-Editorå¯¹è±¡ä¸­commitå’Œapplyçš„åŒºåˆ«" class="headerlink" title="SharedPreferences.Editorå¯¹è±¡ä¸­commitå’Œapplyçš„åŒºåˆ«"></a>SharedPreferences.Editorå¯¹è±¡ä¸­commitå’Œapplyçš„åŒºåˆ«</h1><ul>
<li>applyæ²¡æœ‰è¿”å›å€¼è€Œcommitè¿”å›booleanè¡¨æ˜ä¿®æ”¹æ˜¯å¦æäº¤æˆåŠŸ ï¼›</li>
<li>commitæ˜¯æŠŠå†…å®¹åŒæ­¥æäº¤åˆ°ç¡¬ç›˜çš„ï¼Œè€Œapplyå…ˆç«‹å³æŠŠä¿®æ”¹æäº¤åˆ°å†…å­˜ï¼Œç„¶åå¼€å¯ä¸€ä¸ªå¼‚æ­¥çš„çº¿ç¨‹æäº¤åˆ°ç¡¬ç›˜ï¼Œå¹¶ä¸”å¦‚æœæäº¤å¤±è´¥ï¼Œä½ ä¸ä¼šæ”¶åˆ°ä»»ä½•é€šçŸ¥ã€‚</li>
<li>æ‰€æœ‰commitæäº¤æ˜¯åŒæ­¥è¿‡ç¨‹ï¼Œæ•ˆç‡ä¼šæ¯”applyå¼‚æ­¥æäº¤çš„é€Ÿåº¦æ…¢ï¼Œåœ¨ä¸å…³å¿ƒæäº¤ç»“æœæ˜¯å¦æˆåŠŸçš„æƒ…å†µä¸‹ï¼Œä¼˜å…ˆè€ƒè™‘applyæ–¹æ³•ã€‚</li>
<li>applyæ˜¯ä½¿ç”¨å¼‚æ­¥çº¿ç¨‹å†™å…¥ç£ç›˜ï¼Œcommitæ˜¯åŒæ­¥å†™å…¥ç£ç›˜ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ä¸»çº¿ç¨‹ä½¿ç”¨çš„commitçš„æ—¶å€™ï¼Œéœ€è¦è€ƒè™‘æ˜¯å¦ä¼šå‡ºç°ANRé—®é¢˜ã€‚ï¼ˆä¸é€‚åˆå¤§é‡æ•°æ®å­˜å‚¨ï¼‰</li>
</ul>
<h1 id="æŸ¥çœ‹Sharedpreferencesd-ä¿å­˜æ•°æ®çš„xmlæ–‡ä»¶"><a href="#æŸ¥çœ‹Sharedpreferencesd-ä¿å­˜æ•°æ®çš„xmlæ–‡ä»¶" class="headerlink" title="æŸ¥çœ‹Sharedpreferencesd ä¿å­˜æ•°æ®çš„xmlæ–‡ä»¶"></a>æŸ¥çœ‹Sharedpreferencesd ä¿å­˜æ•°æ®çš„xmlæ–‡ä»¶</h1><p>æ¨¡æ‹Ÿå™¨ä¸‹ç›´æ¥æ‰“å¼€æ‰“å¼€ASï¼Œæ‰¾åˆ°çª—å£å³ä¸‹è§’çš„<code>Device File Explorer</code>è¿›è¡ŒæŸ¥çœ‹ï¼š</p>
<p><img src="file.png" alt></p>
<blockquote>
<p>çœŸæœºç¯å¢ƒä¸‹éœ€è¦rootã€‚</p>
</blockquote>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://juejin.im/post/5adc444df265da0b886d00bc" target="_blank" rel="noopener">https://juejin.im/post/5adc444df265da0b886d00bc</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSä¹‹NSUserDefaults</title>
    <url>/2019/08/12/IOS%E4%B9%8BNSUserDefaults/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="æ¦‚è§ˆ"><a href="#æ¦‚è§ˆ" class="headerlink" title="æ¦‚è§ˆ"></a>æ¦‚è§ˆ</h1><p><code>NSUserDefaults</code>ç±»æä¾›äº†ä¸€ä¸ªä¸é»˜è®¤ç³»ç»Ÿäº¤äº’çš„ç¼–ç¨‹æ¥å£ã€‚é»˜è®¤ç³»ç»Ÿå…è®¸åº”ç”¨ç¨‹åºè‡ªå®šä¹‰å…¶è¡Œä¸ºä»¥åŒ¹é…ç”¨æˆ·çš„é¦–é€‰é¡¹ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å…è®¸ç”¨æˆ·æŒ‡å®šå…¶é¦–é€‰çš„æµ‹é‡å•ä½æˆ–åª’ä½“æ’­æ”¾é€Ÿåº¦ã€‚åº”ç”¨ç¨‹åºé€šè¿‡ä¸ºç”¨æˆ·é»˜è®¤æ•°æ®åº“ä¸­çš„ä¸€ç»„å‚æ•°æŒ‡å®šå€¼æ¥å­˜å‚¨è¿™äº›é¦–é€‰é¡¹ã€‚è¿™äº›å‚æ•°è¢«ç§°ä¸ºé»˜è®¤å€¼ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸ç”¨äºç¡®å®šåº”ç”¨ç¨‹åºå¯åŠ¨æ—¶çš„é»˜è®¤çŠ¶æ€æˆ–é»˜è®¤æƒ…å†µä¸‹çš„è¡Œä¸ºæ–¹å¼ã€‚åœ¨è¿è¡Œæ—¶ï¼Œä½¿ç”¨<code>NSUserDefaults</code>å¯¹è±¡ä»ç”¨æˆ·çš„é»˜è®¤æ•°æ®åº“ä¸­è¯»å–åº”ç”¨ç¨‹åºä½¿ç”¨çš„é»˜è®¤å€¼ã€‚nsUserDefaultsç¼“å­˜ä¿¡æ¯ï¼Œä»¥é¿å…æ¯æ¬¡éœ€è¦é»˜è®¤å€¼æ—¶éƒ½å¿…é¡»æ‰“å¼€ç”¨æˆ·çš„é»˜è®¤æ•°æ®åº“ã€‚å½“æ‚¨è®¾ç½®é»˜è®¤å€¼æ—¶ï¼Œå®ƒä¼šåœ¨æ‚¨çš„è¿›ç¨‹å†…åŒæ­¥æ›´æ”¹ï¼Œå¹¶å¼‚æ­¥æ›´æ”¹ä¸ºæŒä¹…å­˜å‚¨å’Œå…¶ä»–è¿›ç¨‹ã€‚</p>
<a id="more"></a>
<p><img src="overview.png" alt></p>
<p>å¦‚æœæ˜¯ä¸€äº›å¤§å‹æ•°æ®ï¼Œæ¯«æ— ç–‘é—®æ˜¯ç”¨ä¸€äº›SQLiteæˆ–è€…FMDBç­‰æ¥å­˜å‚¨å¤§é‡æ•°æ®ã€‚ä½†æ˜¯åˆä¸€äº›è½»é‡çº§åˆ«çš„æ•°æ®ï¼Œä¾‹å¦‚ç”¨æˆ·çš„ä¿¡æ¯ã€ç”¨æˆ·çš„åå¥½è®¾ç½®ï¼Œä½¿ç”¨è¯¥ç±»æ˜¯æœ€ä¸ºç®€å•æ–¹ä¾¿çš„ã€‚å®ƒé€šè¿‡é”®å€¼å¯¹çš„æ–¹å¼æ¥æ¥å­˜å‚¨ä¸€ç³»åˆ—çš„åå¥½è®¾ç½®æ¥æŠŠå¯¹è±¡å­˜å‚¨/è¯»å–ç›¸åº”çš„<code>plist</code>æ–‡ä»¶ä¸­ã€‚é‚£ä¹ˆæ—¢ç„¶æ˜¯ä¸€ä¸ª<code>plist</code>ï¼Œåˆ™NSUserDefaultsèƒ½å¤Ÿå­˜å‚¨çš„æ•°æ®ç±»å‹æœ‰<a href="https://developer.apple.com/documentation/foundation/nsdata?language=objc" target="_blank" rel="noopener"><code>NSData</code></a>, <a href="https://developer.apple.com/documentation/foundation/nsstring?language=objc" target="_blank" rel="noopener"><code>NSString</code></a>, <a href="https://developer.apple.com/documentation/foundation/nsnumber?language=objc" target="_blank" rel="noopener"><code>NSNumber</code></a>, <a href="https://developer.apple.com/documentation/foundation/nsdate?language=objc" target="_blank" rel="noopener"><code>NSDate</code></a>, <a href="https://developer.apple.com/documentation/foundation/nsarray?language=objc" target="_blank" rel="noopener"><code>NSArray</code></a>, å’Œ<a href="https://developer.apple.com/documentation/foundation/nsdictionary?language=objc" target="_blank" rel="noopener"><code>NSDictionary</code></a>ã€‚å¦‚æœéœ€è¦å­˜å‚¨æŸäº›ä¸æ”¯æŒçš„ç±»å‹ï¼Œå¯ä»¥å…ˆå°†å…¶å½’æ¡£ä¸ºNSDataç±»å‹å†è¿›è¡Œå­˜å‚¨ã€‚</p>
<p><strong>NSUserDefaults</strong>æ˜¯ä¸€ä¸ªå•ä¾‹ç±»ï¼Œåœ¨æ•´ä¸ªç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼ŒåŒæ—¶ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è·å–æ–¹å¼ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSUserDefaults</span> *defaults = [<span class="built_in">NSUserDefaults</span> standardUserDefaults];</span><br></pre></td></tr></table></figure>
<h1 id="å­˜å‚¨æ•°æ®"><a href="#å­˜å‚¨æ•°æ®" class="headerlink" title="å­˜å‚¨æ•°æ®"></a>å­˜å‚¨æ•°æ®</h1><p>å­˜å‚¨ä¸€äº›é»˜è®¤æ”¯æŒçš„æ•°æ®ç±»å‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å­˜å‚¨æ•°æ®</span></span><br><span class="line">[defaults setObject:<span class="string">@"hackycy"</span> forKey:<span class="string">@"username"</span>];</span><br><span class="line">[defaults setInteger:<span class="number">22</span> forKey:<span class="string">@"age"</span>];</span><br><span class="line">[defaults setBool:<span class="literal">YES</span> forKey:<span class="string">@"isBoy"</span>];</span><br><span class="line">[defaults setFloat:<span class="number">1.73</span> forKey:<span class="string">@"mmForHeight"</span>];</span><br><span class="line">[defaults setURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"https://hackycy.github.io"</span>] forKey:<span class="string">@"blog"</span>];</span><br><span class="line">[defaults setDouble:<span class="number">7500</span> forKey:<span class="string">@"wage"</span>];</span><br></pre></td></tr></table></figure>
<p><strong>æ›´å¤šæ–¹æ³•</strong></p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Setting Default Values</span></span><br><span class="line">- setObject:forKey:</span><br><span class="line"><span class="comment">//Sets the value of the specified default key.</span></span><br><span class="line"></span><br><span class="line">- setFloat:forKey:</span><br><span class="line"><span class="comment">//Sets the value of the specified default key to the specified float value.</span></span><br><span class="line"></span><br><span class="line">- setDouble:forKey:</span><br><span class="line"><span class="comment">//Sets the value of the specified default key to the double value.</span></span><br><span class="line"></span><br><span class="line">- setInteger:forKey:</span><br><span class="line"><span class="comment">//Sets the value of the specified default key to the specified integer value.</span></span><br><span class="line"></span><br><span class="line">- setBool:forKey:</span><br><span class="line"><span class="comment">//Sets the value of the specified default key to the specified Boolean value.</span></span><br><span class="line"></span><br><span class="line">- setURL:forKey:</span><br><span class="line"><span class="comment">//Sets the value of the specified default key to the specified URL.</span></span><br></pre></td></tr></table></figure>
<h1 id="è¯»å–æ•°æ®"><a href="#è¯»å–æ•°æ®" class="headerlink" title="è¯»å–æ•°æ®"></a>è¯»å–æ•°æ®</h1><p>ä»ä¸Šé¢å­˜å‚¨çš„æ•°æ®ä¸­è¯»å–å¹¶æ‰“å°ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–æ•°æ®   </span></span><br><span class="line"><span class="built_in">NSString</span> *username = [defaults stringForKey:<span class="string">@"username"</span>];</span><br><span class="line"><span class="built_in">NSInteger</span> age = [defaults integerForKey:<span class="string">@"age"</span>];</span><br><span class="line"><span class="built_in">BOOL</span> isBoy = [defaults boolForKey:<span class="string">@"isBoy"</span>];</span><br><span class="line"><span class="keyword">float</span> mmForHeight = [defaults floatForKey:<span class="string">@"mmForHeight"</span>];</span><br><span class="line"><span class="built_in">NSURL</span> *blog = [defaults URLForKey:<span class="string">@"blog"</span>];</span><br><span class="line"><span class="keyword">double</span> wage = [defaults doubleForKey:<span class="string">@"wage"</span>];</span><br><span class="line"><span class="built_in">NSData</span> *imageData = [defaults objectForKey:<span class="string">@"avatar"</span>];</span><br><span class="line"><span class="keyword">self</span>.imageView.image = [<span class="built_in">UIImage</span> imageWithData:imageData];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"username : %@, age : %lu, isBoy : %@, mmForHeight : %f, blog : %@, wage : %f"</span>, username, (<span class="keyword">unsigned</span> <span class="keyword">long</span>)age, isBoy ? <span class="string">@"boy"</span> : <span class="string">@"girl"</span>, mmForHeight, blog, wage);</span><br></pre></td></tr></table></figure>
<p><strong>æ›´å¤šæ–¹æ³•</strong></p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Getting Default Values</span></span><br><span class="line">- objectForKey:</span><br><span class="line"><span class="comment">//Returns the object associated with the specified key.</span></span><br><span class="line"></span><br><span class="line">- URLForKey:</span><br><span class="line"><span class="comment">//Returns the URL associated with the specified key.</span></span><br><span class="line"></span><br><span class="line">- arrayForKey:</span><br><span class="line"><span class="comment">//Returns the array associated with the specified key.</span></span><br><span class="line"></span><br><span class="line">- dictionaryForKey:</span><br><span class="line"><span class="comment">//Returns the dictionary object associated with the specified key.</span></span><br><span class="line"></span><br><span class="line">- stringForKey:</span><br><span class="line"><span class="comment">//Returns the string associated with the specified key.</span></span><br><span class="line"></span><br><span class="line">- stringArrayForKey:</span><br><span class="line"><span class="comment">//Returns the array of strings associated with the specified key.</span></span><br><span class="line"></span><br><span class="line">- dataForKey:</span><br><span class="line"><span class="comment">//Returns the data object associated with the specified key.</span></span><br><span class="line"></span><br><span class="line">- boolForKey:</span><br><span class="line"><span class="comment">//Returns the Boolean value associated with the specified key.</span></span><br><span class="line"></span><br><span class="line">- integerForKey:</span><br><span class="line"><span class="comment">//Returns the integer value associated with the specified key.</span></span><br><span class="line"></span><br><span class="line">- floatForKey:</span><br><span class="line"><span class="comment">//Returns the float value associated with the specified key.</span></span><br><span class="line"></span><br><span class="line">- doubleForKey:</span><br><span class="line"><span class="comment">//Returns the double value associated with the specified key.</span></span><br><span class="line"></span><br><span class="line">- dictionaryRepresentation</span><br><span class="line"><span class="comment">//Returns a dictionary that contains a union of all key-value pairs in the domains in the search list.</span></span><br></pre></td></tr></table></figure>
<h1 id="registerDefaults"><a href="#registerDefaults" class="headerlink" title="registerDefaults"></a>registerDefaults</h1><p>å…ˆè®©æˆ‘ä»¬æ¥çœ‹ä¸€ç§æƒ…å†µï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">BOOL</span> isNeedShowGuide = [defaults boolForKey:<span class="string">@"isNeedShowGuide"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, isNeedShowGuide ? <span class="string">@"YES"</span> : <span class="string">@"NO"</span>);</span><br></pre></td></tr></table></figure>
<p>LOGï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="number">2019</span><span class="number">-08</span><span class="number">-13</span> <span class="number">11</span>:<span class="number">54</span>:<span class="number">29.402946</span>+<span class="number">0800</span> nsuserdefaultdemo[<span class="number">4616</span>:<span class="number">174076</span>] <span class="literal">NO</span></span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬APPé¦–æ¬¡å¯åŠ¨æ—¶éœ€è¦è¿›å…¥ä¸€ä¸ªå¼•å¯¼é¡µï¼Œé€šè¿‡è¯¥<code>isNeedShowGuide</code>æ¥åˆ¤æ–­æ˜¯å¦è¿›å…¥å¼•å¯¼é¡µï¼Œè€Œé¦–æ¬¡è¿›å…¥æ˜¯éœ€è¦YESçš„æƒ…å†µä¸‹è¿›å…¥å¼•å¯¼é¡µï¼Œåç»­å°†å€¼è®¾ç½®ä¸ºNOã€‚ä½†æ˜¯é€šè¿‡æ‰“å°è¯¥å€¼æ—¶è·å–åˆ°çš„ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„å€¼ï¼Œå› ä¸ºè¯¥å€¼å¦‚æœè®¾ç½®è¿‡æ‰ä¼šè¿è¡Œæ­£ç¡®ã€‚ä½†æ˜¯æ²¡æœ‰è®¾ç½®è¿‡è¯¥å€¼ä¹Ÿæ²¡æœ‰è¯¥é»˜è®¤å€¼åˆ™é»˜è®¤è¿”å›çš„æ˜¯NOã€‚</p>
<p>é‚£ä¹ˆè¿™é‡Œå°±éœ€è¦ç”¨åˆ°<code>registerDefaults</code>æ–¹æ³•äº†ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">[[<span class="built_in">NSUserDefaults</span> standardUserDefaults] registerDefaults:@&#123;</span><br><span class="line">    <span class="string">@"isNeedShowGuide"</span> : @YES</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨è·å–<code>isNeedShowGuide</code>ä¹‹å‰å…ˆè°ƒç”¨äº†<code>registerDefaults</code>æ–¹æ³•è®¾ç½®äº†å®ƒçš„é»˜è®¤å€¼ï¼Œåé¢è·å–çš„æ—¶å€™å³ä½¿æ²¡æœ‰å†è®¾ç½®å€¼ä¹Ÿä¼šè·å–åˆ°é»˜è®¤è®¾ç½®çš„å€¼ï¼Œå°±ä¸ä¼šå‡ºç°ä¸Šè¿°è·å–é»˜è®¤å€¼å°´å°¬çš„æƒ…å†µäº†ã€‚</p>
<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å…ˆé»˜è®¤ä¿å­˜ä¸€ä¸ªplistæ–‡ä»¶åœ¨é¡¹ç›®ç›®å½•ä¸­æ¥è®¾ç½®é»˜è®¤å€¼æ¥æ–¹ä¾¿è¯»å–ï¼Œæ¥å‡å°‘ä»£ç é‡ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSURL</span> *plistUrl = [[<span class="built_in">NSBundle</span> mainBundle] URLForResource:<span class="string">@"DefaultPreferences"</span> withExtension:<span class="string">@"plist"</span>];</span><br><span class="line"><span class="built_in">NSDictionary</span> *defaultPreferences = [<span class="built_in">NSDictionary</span> dictionaryWithContentsOfURL:plistUrl];</span><br><span class="line">[[<span class="built_in">NSUserDefaults</span> standardUserDefaults] registerDefaults:defaultPreferences];</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼š</strong><code>registerDefaults</code> è®¾ç½®çš„é»˜è®¤å€¼æ˜¯ä¸ä¼šæŒä¹…åŒ–å­˜å‚¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ¯æ¬¡å¯åŠ¨ APP çš„æ—¶å€™ï¼Œéƒ½éœ€è¦è¿™æ ·è®¾ç½®ä¸€éã€‚æ‰€ä»¥<code>application:didFinishLaunchingWithOptions</code>æ˜¯æœ€åˆé€‚çš„åœ°æ–¹ã€‚</p>
<h1 id="NSUserDefaultsåŸŸ"><a href="#NSUserDefaultsåŸŸ" class="headerlink" title="NSUserDefaultsåŸŸ"></a>NSUserDefaultsåŸŸ</h1><p>NSUserDefaults è¿˜æœ‰ä¸€ä¸ª Domain çš„æ¦‚å¿µï¼Œå½“æˆ‘ä»¬è°ƒç”¨ <code>[NSUserDefaults standardUserDefaults]</code>æ–¹æ³•æ—¶ï¼Œå°±ä¼šåˆå§‹åŒ– <code>NSUserDefaults</code>ï¼Œ å¹¶ä¸”å®ƒé»˜è®¤ä¼šåŒ…å« 5 ä¸ª Domainï¼Œ åˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><strong>NSArgumentDomain</strong>ï¼šæœ€é«˜ä¼˜å…ˆæƒ</li>
<li><strong>Application</strong>ï¼šå®ƒå­˜å‚¨ç€ä½ appé€šè¿‡<code>NSUserDefaults set...forKey</code>æ·»åŠ çš„è®¾ç½®</li>
<li><strong>NSGlobalDomain</strong>ï¼šå­˜å‚¨ç€ç³»ç»Ÿçš„è®¾ç½®</li>
<li><strong>Languages</strong>ï¼šåŒ…æ‹¬åœ°åŒºã€æ—¥æœŸç­‰</li>
<li><strong>NSRegistrationDomain</strong>ï¼šä»…æœ‰è¾ƒä½çš„ä¼˜å…ˆæƒï¼Œåªæœ‰åœ¨åº”ç”¨åŸŸæ²¡æœ‰æ‰¾åˆ°å€¼æ—¶æ‰ä»æ³¨å†ŒåŸŸå»å¯»æ‰¾ã€‚</li>
</ul>
<p>æ¥è§£é‡Šä¸€ä¸‹ï¼Œæ¯”å¦‚è°ƒç”¨äº†ä¸‹é¢çš„ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">[[<span class="built_in">NSUserDefaults</span> standardUserDefaults] setBool:<span class="literal">NO</span> forKey:<span class="string">@"isNeedShowGuide"</span>];</span><br></pre></td></tr></table></figure>
<p>è¿™å¥è¯ä¼šå°†è®¾ç½®çš„keyå’Œå€¼å­˜å‚¨åœ¨äº†<code>Application</code>åŸŸä¸­ï¼Œä½† <code>NSUserDefaults</code> è¿˜åŒ…æ‹¬äº†å…¶ä»– 4 ä¸ªåŸŸï¼Œå¦‚æœæˆ‘ä»¬æ¯æ¬¡è°ƒç”¨è¯»å–æ•°æ®çš„æ–¹æ³•çš„æ—¶å€™ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">[[<span class="built_in">NSUserDefaults</span> standardUserDefaults] boolForKey:<span class="string">@"isNeedShowGuide"</span>]</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆå…¶å®åº•å±‚çš„å°±ä¼šè¿›è¡Œä¸€æ¬¡æœç´¢ï¼Œæœç´¢é¡ºåºä¸ºï¼š</p>
<p><code>NSArgumentDomain</code> -&gt; <code>Application</code> -&gt; <code>NSGlobalDomain</code> -&gt; <code>Languages</code> -&gt; <code>NSRegistrationDomain</code></p>
<p>è€Œä¹‹å‰ä¸¾çš„ä¾‹å­æ¥è¯´ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰é€šè¿‡<code>setBool:forkey:</code>æ–¹æ³•æ¥è®¾ç½®è¯¥å€¼ï¼Œæ‰€ä»¥<code>Application</code>åŸŸä¸­å¹¶æ²¡æœ‰è¯¥å€¼ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨äº†<code>registerDefaults</code>å°†å®ƒè®¾ç½®åˆ°äº†<code>NSRegistrationDomain</code>åŸŸä¸­ã€‚</p>
<p>æ‰€ä»¥æŒ‰ç…§<code>NSUserDefaults</code> çš„é»˜è®¤æœç´¢é¡ºåºï¼Œå°±ä¼šæ‰¾åˆ°æœ€å <code>NSRegistrationDomain</code> åŸŸä¸­çš„é‚£ä¸ª <code>isNeedShowGuide</code>ï¼Œ ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„é»˜è®¤å€¼ YES äº†ã€‚</p>
<h1 id="å­˜å‚¨è·¯å¾„"><a href="#å­˜å‚¨è·¯å¾„" class="headerlink" title="å­˜å‚¨è·¯å¾„"></a>å­˜å‚¨è·¯å¾„</h1><p>NSUserDefaults æ•°æ®å­˜æ”¾åœ¨æ²™ç›’ <code>Library/Preferences/</code> ç›®å½•ä¸‹ï¼Œä¸€ä¸ªä»¥ä½ åŒ…åå‘½åçš„<code>.plist</code>æ–‡ä»¶ã€‚</p>
<p>é€šè¿‡ä»£ç è·å–è·¯å¾„åï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *path = <span class="built_in">NSHomeDirectory</span>();</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"path : %@"</span>, path);</span><br></pre></td></tr></table></figure>
<p>å°†è·¯å¾„å¤åˆ¶åˆ°Finderä¸­ï¼Œå‰å¾€ï¼š</p>
<p><img src="cunchu.png" alt></p>
<h1 id="å…³äºsynchronizeæ–¹æ³•"><a href="#å…³äºsynchronizeæ–¹æ³•" class="headerlink" title="å…³äºsynchronizeæ–¹æ³•"></a>å…³äºsynchronizeæ–¹æ³•</h1><p>è¯¥æ–¹æ³•æ˜¯ä¸ºäº†å¼ºåˆ¶å­˜å‚¨ï¼Œä½†å…¶å®æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œè¯¥æ–¹æ³•ç³»ç»Ÿä¼šé»˜è®¤è°ƒç”¨ã€‚</p>
<blockquote>
<p>Waits for any pending asynchronous updates to the defaults database and returns; this method is unnecessary and shouldnâ€™t be used.</p>
<p>ç­‰å¾…é»˜è®¤æ•°æ®åº“çš„ä»»ä½•æŒ‚èµ·çš„å¼‚æ­¥æ›´æ–°å¹¶è¿”å›; æ­¤æ–¹æ³•æ˜¯ä¸å¿…è¦çš„ï¼Œä¸åº”ä½¿ç”¨ã€‚</p>
</blockquote>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="https://developer.apple.com/documentation/foundation/nsuserdefaults?language=objc" target="_blank" rel="noopener">https://developer.apple.com/documentation/foundation/nsuserdefaults?language=objc</a></p>
<p><a href="http://swiftcafe.io/post/nsuserdefaults" target="_blank" rel="noopener">http://swiftcafe.io/post/nsuserdefaults</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>Android TextViewæ›´æ¢å­—ä½“</title>
    <url>/2019/08/07/Android-TextView%E6%9B%B4%E6%8D%A2%E5%AD%97%E4%BD%93/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨å¼€å‘UIæ—¶æœ‰æ—¶ä¼šæ¶‰åŠåˆ°TextViewè®¾ç½®å­—ä½“æ ·å¼ï¼ŒTextViewä¸­åœ¨xmlä¸‹ä»…å¯ä»¥è®¾ç½®è‡ªå¸¦çš„å­—ä½“æ ·å¼ï¼š</p>
<a id="more"></a>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">android:typeface="monospace"</span><br></pre></td></tr></table></figure>
<p>è‡ªå¸¦æœ‰å››ç§æ–‡å­—ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>monospace</li>
<li>normal</li>
<li>sans</li>
<li>serif</li>
</ul>
<p>çœ‹çœ‹è¿è¡Œæ•ˆæœåçš„æ ·å¼ï¼š</p>
<p><img src="systtf.png" alt></p>
<p>æœ‰æ—¶å€™UIéœ€è¦è®¾å®šç‰¹å®šå­—ä½“çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç»™åœ¨ä»£ç ä¸­TextViewè®¾ç½®ç‰¹å®šçš„å­—ä½“ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬éšä¾¿ä¸‹è½½ä¸€äº›å­—ä½“ï¼š<a href="https://www.sentyfont.com/download.htm" target="_blank" rel="noopener">https://www.sentyfont.com/download.htm</a></p>
<p>æ”¾åœ¨Assetsç›®å½•ä¸‹ï¼š</p>
<p><img src="demo1.png" alt></p>
<blockquote>
<p>æ³¨æ„ç•™æ„ç›®å½•ç»“æ„ï¼Œdemoå°†å­—ä½“æ–‡ä»¶æ”¾åœ¨äº†fontsç›®å½•ä¸‹</p>
</blockquote>
<p>ç„¶ååœ¨ä»£ç ä¸­è®¾ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">TextView tv = findViewById(R.id.tv);</span><br><span class="line">Typeface tf = Typeface.createFromAsset(<span class="keyword">this</span>.getAssets(), <span class="string">"fonts/HanyiSentyVimalkirti.ttf"</span>);</span><br><span class="line">tv.setTypeface(tf);</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="demo2.png" alt></p>
<blockquote>
<p>å­—ä½“æ–‡ä»¶otfç­‰éƒ½æ”¯æŒã€‚</p>
<p>å­—ä½“åŒ…è¿‡å¤§å¯ä»¥å°†ä½¿ç”¨åˆ°çš„å­—æå–å‡ºæ¥ï¼Œä¸ç”¨å°†æ‰€æœ‰å­—ä½“éƒ½æ‰“åŒ…æˆä¸€ä¸ªttfã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Android è½¯é”®ç›˜imeOptionsäº‹ä»¶å“åº”</title>
    <url>/2019/07/31/Android-%E8%BD%AF%E9%94%AE%E7%9B%98imeOptions%E4%BA%8B%E4%BB%B6%E5%93%8D%E5%BA%94/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨ä¸€äº›ç™»é™†ï¼Œæœç´¢çš„è¿‡ç¨‹ä¸­ï¼Œè¾“å…¥æ¡†åœ¨ç”¨æˆ·è¾“å…¥å®Œåç‚¹å‡»è½¯é”®ç›˜çš„å›è½¦ã€æœç´¢ç­‰çš„æŒ‰é’®å³å¯å®Œæˆç™»é™†æˆ–è€…æœç´¢çš„åŠŸèƒ½ï¼Œä¸å¿…è¦å†è®©ç”¨æˆ·å†æ¬¡ç‚¹å‡»é¡µé¢ä¸Šçš„ç™»é™†æˆ–è€…æœç´¢æŒ‰é’®æ‰èƒ½å¤Ÿè¿›è¡Œæ“ä½œã€‚</p>
<a id="more"></a>
<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>ç”¨å›¾æ¥è¯´è¯å§ï¼Œä¸‹å›¾æ˜¯ä¸€ä¸ªé«˜å¾·åœ°å›¾çš„ä¸€ä¸ªæœç´¢æ¡†ï¼š</p>
<p><img src="demo.png" alt></p>
<p>ä½ ä»¬ä¼šå‘ç°å¹¶æ²¡æœ‰æœç´¢æŒ‰é’®ï¼Œè€Œæ˜¯åœ¨é”®ç›˜çš„å³ä¸‹è§’æœ‰ä¸€ä¸ªå°å›¾æ ‡(æ”¾å¤§é•œå›¾æ ‡æˆ–è€…æœç´¢å­—æ ·)ï¼Œè¿™ä»£è¡¨çš„æ˜¯æœç´¢çš„åŠ¨ä½œï¼Œç‚¹å‡»åå°±å¯ä»¥è¿›è¡Œæœç´¢ã€‚</p>
<p>è€Œåœ¨ä¸€ä¸ªæµè§ˆå™¨ä¸‹çš„ä¸€ä¸ªè¾“å…¥æ¡†æ—¶ï¼Œè½¯é”®ç›˜ä¹Ÿä¼šæœ‰ç›¸å¯¹åº”çš„å˜åŒ–ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="demo2.png" alt></p>
<p>å¡«å†™ç½‘å€åç‚¹å‡»è½¯é”®ç›˜çš„è½¬åˆ°å³å¯åˆ°è¾¾è¾“å…¥çš„ç½‘é¡µã€‚</p>
<h1 id="imeOptions"><a href="#imeOptions" class="headerlink" title="imeOptions"></a>imeOptions</h1><p>ä¸Šé¢æ¦‚è¿°ä¸Šçš„ä¸¤ä¸ªåŠŸèƒ½ä½¿å¾—EditTextæ‹¥æœ‰å›¾æ ‡å˜åŒ–çš„èƒ½åŠ›å°±æ˜¯<code>android:imeOptions</code>å±æ€§ã€‚</p>
<p>è€ŒEditorInfoç±»æºç ä¸­ä¸€å…±æä¾›äº†ä»¥ä¸‹å±æ€§ä¾›æˆ‘ä»¬é€‰æ‹©</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> IME_ACTION_DONE = <span class="number">6</span>; <span class="comment">//å¯¹åº”actionDone</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> IME_ACTION_GO = <span class="number">2</span>;  <span class="comment">//å¯¹åº”actionGo</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> IME_ACTION_NEXT = <span class="number">5</span>;  <span class="comment">//å¯¹åº”actionNext</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> IME_ACTION_NONE = <span class="number">1</span>;  <span class="comment">//å¯¹åº”actionNone</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> IME_ACTION_PREVIOUS = <span class="number">7</span>;  <span class="comment">//å¯¹åº”actionPrevious</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> IME_ACTION_SEARCH = <span class="number">3</span>;  <span class="comment">//å¯¹åº”actionSearch</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> IME_ACTION_SEND = <span class="number">4</span>;  <span class="comment">//å¯¹åº”actionSearch</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> IME_ACTION_UNSPECIFIED = <span class="number">0</span>;  <span class="comment">//å¯¹åº”actionUnspecified</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åœ¨xmlä¸­ç¼–å†™å¯¹åº”çš„EditTextï¼Œæ¥ç›´æ¥æ¼”ç¤ºä¸‹ç†è§£å®ƒä»¬çš„å®ç”¨æ„ä¹‰ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ScrollView</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/actionGo"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:imeOptions</span>=<span class="string">"actionGo"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">"actionGo"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:singleLine</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"45dp"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/actionSearch"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:imeOptions</span>=<span class="string">"actionSearch"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">"actionSearch"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:singleLine</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"45dp"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/actionNext"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:imeOptions</span>=<span class="string">"actionNext"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">"actionNext"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:singleLine</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"45dp"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/actionNone"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:imeOptions</span>=<span class="string">"actionNone"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">"actionNone"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:singleLine</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"45dp"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/actionDone"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:imeOptions</span>=<span class="string">"actionDone"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">"actionDone"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:singleLine</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"45dp"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/actionSend"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:imeOptions</span>=<span class="string">"actionSend"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">"actionSend"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:singleLine</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"45dp"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/actionPrevious"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:imeOptions</span>=<span class="string">"actionPrevious"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">"actionPrevious"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:singleLine</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"45dp"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/actionUnspecified"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:imeOptions</span>=<span class="string">"actionUnspecified"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:hint</span>=<span class="string">"actionUnspecified"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:singleLine</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"45dp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ScrollView</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="demo3.png" alt></p>
<blockquote>
<p><strong>æ³¨æ„ï¼šè¯¥å±æ€§å¿…é¡»é…ç½®<code>android:singleLine=&quot;true&quot;</code>å±æ€§æˆ–è€…é…åˆ<code>android:maxLines=&quot;1&quot;</code>ä¸<code>android:inputType=&quot;number&quot;</code>ç»“åˆä½¿ç”¨ã€‚ç¼ºä¸€ä¸å¯ã€‚å³ä¾¿singleLineå·²ç»è¢«åºŸå¼ƒï¼Œåˆæˆ–è€…å•çº¯ä½¿ç”¨maxLinesæ˜¯æ— æ•ˆçš„ã€‚</strong></p>
</blockquote>
<p>å¯¹EditTextæŒ‡å®šä¸åŒçš„imeOptionsä¹‹åï¼Œå°±éœ€è¦å®ç°OnEditorActionListener ä¸­çš„onEditorAction()æ–¹æ³•ï¼Œç„¶åæ ¹æ®ä¸åŒçš„åŠ¨ä½œæ‰§è¡Œè¿›è¡Œå“åº”ã€‚ </p>
<p>å¯¹äºactionDoneã€actionNextå’ŒactionPreviousï¼Œç³»ç»Ÿéƒ½è‡ªå·±è¿›è¡Œäº†éƒ¨åˆ†å¤„ç†ã€‚ </p>
<ul>
<li>actionDoneï¼šéšè—è¾“å…¥æ³• </li>
<li>actionNextï¼šè·³åˆ°ä¸‹ä¸€ä¸ªEditText </li>
<li>actionPreviousï¼šè·³åˆ°ä¸Šä¸€ä¸ªEditText</li>
</ul>
<p>æˆ‘ä»¬ä½¿ç”¨æ¡ˆä¾‹ä¸­å®ç°ä»¥ä¸€ä¸ªæœç´¢çš„ä¾‹å­å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> EditText actionSearch;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        actionSearch = findViewById(R.id.actionSearch);</span><br><span class="line"></span><br><span class="line">        actionSearch.setOnEditorActionListener(<span class="keyword">new</span> TextView.OnEditorActionListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onEditorAction</span><span class="params">(TextView textView, <span class="keyword">int</span> actionId, KeyEvent keyEvent)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(actionId == EditorInfo.IME_ACTION_SEARCH) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(actionSearch.getText().toString().isEmpty()) &#123;</span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"å†…å®¹ä¸èƒ½ä¸ºç©º"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"æ‚¨æœç´¢çš„å†…å®¹æ˜¯ï¼š"</span> + actionSearch.getText().toString(), Toast.LENGTH_SHORT).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//åªè´Ÿè´£æœç´¢äº‹ä»¶å¤„ç†ï¼Œå…¶ä»–å¤„ç†äº¤å›åˆ°ç³»ç»Ÿçš„é»˜è®¤å¤„ç†</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="demo4.png" alt></p>
<blockquote>
<p>éƒ¨åˆ†ç¬¬ä¸‰æ–¹çš„è¾“å…¥æ³•ï¼Œå¯¹EditorInfoæ”¯æŒçš„ä¸ä¸€æ ·ï¼Œæœ‰çš„åŠŸèƒ½å®ç°äº†ï¼Œä½†æ˜¯å¯¹åº”çš„å›¾æ ‡æ²¡æœ‰ä¿®æ”¹è¿‡æ¥ï¼Œæœ‰çš„å¹²è„†åŠŸèƒ½å°±æ²¡æœ‰å®ç°ã€‚</p>
</blockquote>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><code>actionDone</code>  - å®Œæˆ - å¯¹åº” <code>EditorInfo.IME_ACTION_DONE</code><br><code>actionGo</code> - å‰è¿› - å¯¹åº” <code>EditorInfo.IME_ACTION_GO</code><br><code>actionNext</code> - ä¸‹ä¸€é¡¹ - å¯¹åº” <code>EditorInfo.IME_ACTION_NEXT</code><br><code>actionNone</code> - æ— åŠ¨ä½œ - å¯¹åº” <code>EditorInfo.IME_ACTION_NONE</code><br><code>actionPrevious</code> - ä¸Šä¸€é¡¹ - å¯¹åº” <code>EditorInfo.IME_ACTION_PREVIOUS</code><br><code>actionSearch</code> - æœç´¢ - å¯¹åº” <code>EditorInfo.IME_ACTION_SEARCH</code><br><code>actionUnspecified</code> - æœªæŒ‡å®š - <code>å¯¹åº” EditorInfo.IME_ACTION_UNSPECIFIED</code><br><code>actionSend</code> - å‘é€ - å¯¹åº” <code>EditorInfo.IME_ACTION_SEND</code></p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://blog.csdn.net/liuweiballack/article/details/46708697" target="_blank" rel="noopener">https://blog.csdn.net/liuweiballack/article/details/46708697</a></p>
<p><a href="https://www.jianshu.com/p/d5c419bb4e19" target="_blank" rel="noopener">https://www.jianshu.com/p/d5c419bb4e19</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>EditText</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSä¹‹UITableViewä½¿ç”¨</title>
    <url>/2019/07/18/IOS%E4%B9%8BUITableView%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç®€è¿°"><a href="#ç®€è¿°" class="headerlink" title="ç®€è¿°"></a>ç®€è¿°</h1><p>iOSçš„<code>UITableView</code>æ˜¾ç¤ºå•åˆ—å‚ç›´æ»šåŠ¨å†…å®¹ã€‚è¡¨æ ¼ä¸­çš„æ¯ä¸€è¡Œéƒ½åŒ…å«ä¸€æ®µåº”ç”¨å†…å®¹ã€‚ä¾‹å¦‚ï¼Œâ€œè”ç³»äººâ€åº”ç”¨ç¨‹åºåœ¨å•ç‹¬çš„è¡Œä¸­æ˜¾ç¤ºæ¯ä¸ªè”ç³»äººçš„å§“åï¼Œâ€œè®¾ç½®â€åº”ç”¨ç¨‹åºçš„ä¸»é¡µé¢æ˜¾ç¤ºå¯ç”¨çš„è®¾ç½®ç»„ã€‚æ‚¨å¯ä»¥å°†è¡¨é…ç½®ä¸ºæ˜¾ç¤ºå•ä¸ªé•¿è¡Œåˆ—è¡¨ï¼Œä¹Ÿå¯ä»¥å°†ç›¸å…³è¡Œåˆ†ç»„ä¸ºå¤šä¸ªéƒ¨åˆ†ï¼Œä»¥ä¾¿æ›´è½»æ¾åœ°å¯¼èˆªå†…å®¹ã€‚</p>
<a id="more"></a>
<p><img src="tableviewpreview.png" alt></p>
<h1 id="UITableView"><a href="#UITableView" class="headerlink" title="UITableView"></a><a href="https://developer.apple.com/documentation/uikit/uitableview" target="_blank" rel="noopener">UITableView</a></h1><p><code>UITableView</code>ç®¡ç†è¡¨çš„åŸºæœ¬å¤–è§‚ï¼Œæä¾›æ˜¾ç¤ºå®é™…å†…å®¹çš„å•å…ƒæ ¼ï¼ˆå¯¹è±¡ï¼‰ã€‚æ ‡å‡†å•å…ƒæ ¼é…ç½®æ˜¾ç¤ºæ–‡æœ¬å’Œå›¾åƒçš„ç®€å•ç»„åˆï¼Œä½†æ‚¨å¯ä»¥å®šä¹‰æ˜¾ç¤ºæ‰€éœ€å†…å®¹çš„è‡ªå®šä¹‰å•å…ƒæ ¼ã€‚æ‚¨è¿˜å¯ä»¥æä¾›é¡µçœ‰å’Œé¡µè„šè§†å›¾ï¼Œä»¥ä¾¿ä¸ºå•å…ƒæ ¼ç»„æä¾›å…¶ä»–ä¿¡æ¯ã€‚</p>
<p><code>UITableView</code>æœ‰ä¸¤ç§é£æ ¼ï¼š<code>UITableViewStylePlain</code>å’Œ<code>UITableViewStyleGrouped</code>ã€‚è¿™ä¸¤è€…æ“ä½œèµ·æ¥å…¶å®å¹¶æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œåªæ˜¯åè€…æŒ‰åˆ†ç»„æ ·å¼æ˜¾ç¤ºå‰è€…æŒ‰ç…§æ™®é€šæ ·å¼æ˜¾ç¤ºè€Œå·²ã€‚å¤§å®¶å…ˆçœ‹ä¸€ä¸‹ä¸¤è€…çš„åº”ç”¨ï¼š</p>
<p><img src="groupandnonggroup.png" alt></p>
<p><strong>UITableViewçš„å±‚æ¬¡ç»“æ„</strong></p>
<p><img src="tableviewintro.png" alt></p>
<h2 id="ç±»æ–¹æ³•"><a href="#ç±»æ–¹æ³•" class="headerlink" title="ç±»æ–¹æ³•"></a>ç±»æ–¹æ³•</h2><h3 id="åˆ›å»ºè¡¨è§†å›¾"><a href="#åˆ›å»ºè¡¨è§†å›¾" class="headerlink" title="åˆ›å»ºè¡¨è§†å›¾"></a>åˆ›å»ºè¡¨è§†å›¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">init</span>(frame: <span class="type">CGRect</span>, style: <span class="type">UITableView</span>.<span class="type">Style</span>)</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–å¹¶è¿”å›å…·æœ‰ç»™å®šæ¡†æ¶å’Œæ ·å¼çš„è¡¨è§†å›¾å¯¹è±¡ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">init</span>?(coder: <span class="type">NSCoder</span>)</span><br></pre></td></tr></table></figure>
<h3 id="æä¾›è¡¨æ ¼çš„æ•°æ®å’Œå•å…ƒæ ¼"><a href="#æä¾›è¡¨æ ¼çš„æ•°æ®å’Œå•å…ƒæ ¼" class="headerlink" title="æä¾›è¡¨æ ¼çš„æ•°æ®å’Œå•å…ƒæ ¼"></a>æä¾›è¡¨æ ¼çš„æ•°æ®å’Œå•å…ƒæ ¼</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dataSource: <span class="type">UITableViewDataSource?</span></span><br><span class="line"><span class="comment">//å……å½“è¡¨è§†å›¾æ•°æ®æºçš„å¯¹è±¡ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> prefetchDataSource: <span class="type">UITableViewDataSourcePrefetching?</span></span><br><span class="line"><span class="comment">//å……å½“è¡¨è§†å›¾çš„é¢„å–æ•°æ®æºçš„å¯¹è±¡ï¼Œæ¥æ”¶å³å°†åˆ°æ¥çš„å•å…ƒæ•°æ®è¦æ±‚çš„é€šçŸ¥ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">UITableViewDataSource</span></span></span><br><span class="line"><span class="class">//æ‚¨ç”¨äºç®¡ç†æ•°æ®å¹¶ä¸ºè¡¨è§†å›¾æä¾›å•å…ƒæ ¼çš„å¯¹è±¡é‡‡ç”¨çš„æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">protocol</span> <span class="title">UITableViewDataSourcePrefetching</span></span></span><br><span class="line"><span class="class">//ä¸€ç§åè®®ï¼Œæä¾›è¡¨è§†å›¾æ•°æ®è¦æ±‚çš„é¢„å…ˆè­¦å‘Šï¼Œå…è®¸æ‚¨å°½æ—©å¯åŠ¨å¯èƒ½é•¿æ—¶é—´è¿è¡Œçš„æ•°æ®æ“ä½œã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é‡ç”¨è¡¨è§†å›¾å•å…ƒæ ¼"><a href="#é‡ç”¨è¡¨è§†å›¾å•å…ƒæ ¼" class="headerlink" title="é‡ç”¨è¡¨è§†å›¾å•å…ƒæ ¼"></a>é‡ç”¨è¡¨è§†å›¾å•å…ƒæ ¼</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">register</span><span class="params">(UINib?, forCellReuseIdentifier: String)</span></span></span><br><span class="line"><span class="comment">//æ³¨å†ŒåŒ…å«å…·æœ‰æŒ‡å®šæ ‡è¯†ç¬¦ä¸‹çš„è¡¨è§†å›¾çš„å•å…ƒæ ¼çš„nibå¯¹è±¡ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">register</span><span class="params">(AnyClass?, forCellReuseIdentifier: String)</span></span></span><br><span class="line"><span class="comment">//æ³¨å†Œç”¨äºåˆ›å»ºæ–°è¡¨æ ¼å•å…ƒæ ¼çš„ç±»ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dequeueReusableCell</span><span class="params">(withIdentifier: String, <span class="keyword">for</span>: IndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span></span><br><span class="line"><span class="comment">//è¿”å›æŒ‡å®šé‡ç”¨æ ‡è¯†ç¬¦çš„å¯é‡ç”¨è¡¨è§†å›¾å•å…ƒå¯¹è±¡ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°è¡¨ä¸­ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dequeueReusableCell</span><span class="params">(withIdentifier: String)</span></span> -&gt; <span class="type">UITableViewCell?</span></span><br><span class="line"><span class="comment">//è¿”å›æŒ‰å…¶æ ‡è¯†ç¬¦å®šä½çš„å¯é‡ç”¨è¡¨è§†å›¾å•å…ƒå¯¹è±¡ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é‡ç”¨éƒ¨åˆ†é¡µçœ‰å’Œé¡µè„š"><a href="#é‡ç”¨éƒ¨åˆ†é¡µçœ‰å’Œé¡µè„š" class="headerlink" title="é‡ç”¨éƒ¨åˆ†é¡µçœ‰å’Œé¡µè„š"></a>é‡ç”¨éƒ¨åˆ†é¡µçœ‰å’Œé¡µè„š</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">register</span><span class="params">(UINib?, forHeaderFooterViewReuseIdentifier: String)</span></span></span><br><span class="line"><span class="comment">//ä½¿ç”¨æŒ‡å®šæ ‡è¯†ç¬¦ä¸‹çš„è¡¨è§†å›¾æ³¨å†ŒåŒ…å«é¡µçœ‰æˆ–é¡µè„šçš„nibå¯¹è±¡ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">register</span><span class="params">(AnyClass?, forHeaderFooterViewReuseIdentifier: String)</span></span></span><br><span class="line"><span class="comment">//æ³¨å†Œä¸€ä¸ªç±»ï¼Œç”¨äºåˆ›å»ºæ–°çš„è¡¨å¤´æˆ–é¡µè„šè§†å›¾ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dequeueReusableHeaderFooterView</span><span class="params">(withIdentifier: String)</span></span> -&gt; <span class="type">UITableViewHeaderFooterView?</span></span><br><span class="line"><span class="comment">//è¿”å›ç”±å…¶æ ‡è¯†ç¬¦å®šä½çš„å¯é‡ç”¨é¡µçœ‰æˆ–é¡µè„šè§†å›¾ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ç®¡ç†ä¸è¡¨çš„äº¤äº’"><a href="#ç®¡ç†ä¸è¡¨çš„äº¤äº’" class="headerlink" title="ç®¡ç†ä¸è¡¨çš„äº¤äº’"></a>ç®¡ç†ä¸è¡¨çš„äº¤äº’</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> delegate: <span class="type">UITableViewDelegate?</span></span><br><span class="line"><span class="comment">//å……å½“è¡¨è§†å›¾å§”æ‰˜çš„å¯¹è±¡ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">UITableViewDelegate</span></span></span><br><span class="line"><span class="class">//ç®¡ç†é€‰æ‹©ï¼Œé…ç½®èŠ‚é¡µçœ‰å’Œé¡µè„šï¼Œåˆ é™¤å’Œé‡æ–°æ’åºå•å…ƒæ ¼ä»¥åŠåœ¨è¡¨æ ¼è§†å›¾ä¸­æ‰§è¡Œå…¶ä»–æ“ä½œçš„æ–¹æ³•ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®è¡¨çš„å¤–è§‚"><a href="#é…ç½®è¡¨çš„å¤–è§‚" class="headerlink" title="é…ç½®è¡¨çš„å¤–è§‚"></a>é…ç½®è¡¨çš„å¤–è§‚</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> style: <span class="type">UITableView</span>.<span class="type">Style</span></span><br><span class="line"><span class="comment">//è¡¨æ ¼è§†å›¾çš„æ ·å¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">UITableView</span>.<span class="title">Style</span></span></span><br><span class="line"><span class="class">//è¡¨è§†å›¾æ ·å¼çš„å¸¸é‡ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">tableHeaderView</span>: <span class="title">UIView</span>?</span></span><br><span class="line"><span class="class">//æ˜¾ç¤ºåœ¨è¡¨æ ¼å†…å®¹ä¸Šæ–¹çš„è§†å›¾ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">tableFooterView</span>: <span class="title">UIView</span>?</span></span><br><span class="line"><span class="class">//æ˜¾ç¤ºåœ¨è¡¨æ ¼å†…å®¹ä¸‹æ–¹çš„è§†å›¾ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">backgroundView</span>: <span class="title">UIView</span>?</span></span><br><span class="line"><span class="class">//è¡¨è§†å›¾çš„èƒŒæ™¯è§†å›¾ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®å•å…ƒæ ¼é«˜åº¦å’Œå¸ƒå±€"><a href="#é…ç½®å•å…ƒæ ¼é«˜åº¦å’Œå¸ƒå±€" class="headerlink" title="é…ç½®å•å…ƒæ ¼é«˜åº¦å’Œå¸ƒå±€"></a>é…ç½®å•å…ƒæ ¼é«˜åº¦å’Œå¸ƒå±€</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> rowHeight: <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//è¡¨è§†å›¾ä¸­æ¯è¡Œçš„é»˜è®¤é«˜åº¦ï¼ˆä»¥ç£…ä¸ºå•ä½ï¼‰ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> estimatedRowHeight: <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//è¡¨è§†å›¾ä¸­è¡Œçš„ä¼°è®¡é«˜åº¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cellLayoutMarginsFollowReadableWidth: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå•å…ƒæ ¼è¾¹è·æ˜¯å¦ä»å¯è¯»å†…å®¹æŒ‡å—çš„å®½åº¦æ´¾ç”Ÿã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> insetsContentViewsToSafeArea: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºè¡¨è§†å›¾æ˜¯å¦å°†å…¶å†…å®¹è§†å›¾é‡æ–°å®šä½åœ¨å½“å‰å®‰å…¨åŒºåŸŸå†…ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®é¡µçœ‰å’Œé¡µè„šé«˜åº¦"><a href="#é…ç½®é¡µçœ‰å’Œé¡µè„šé«˜åº¦" class="headerlink" title="é…ç½®é¡µçœ‰å’Œé¡µè„šé«˜åº¦"></a>é…ç½®é¡µçœ‰å’Œé¡µè„šé«˜åº¦</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sectionHeaderHeight: <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//è¡¨è§†å›¾ä¸­èŠ‚æ ‡é¢˜çš„é«˜åº¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sectionFooterHeight: <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//è¡¨æ ¼è§†å›¾ä¸­éƒ¨åˆ†é¡µè„šçš„é«˜åº¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> estimatedSectionHeaderHeight: <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//è¡¨è§†å›¾ä¸­èŠ‚æ ‡é¢˜çš„ä¼°è®¡é«˜åº¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> estimatedSectionFooterHeight: <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//è¡¨æ ¼è§†å›¾ä¸­éƒ¨åˆ†é¡µè„šçš„ä¼°è®¡é«˜åº¦ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="è‡ªå®šä¹‰åˆ†éš”ç¬¦å¤–è§‚"><a href="#è‡ªå®šä¹‰åˆ†éš”ç¬¦å¤–è§‚" class="headerlink" title="è‡ªå®šä¹‰åˆ†éš”ç¬¦å¤–è§‚"></a>è‡ªå®šä¹‰åˆ†éš”ç¬¦å¤–è§‚</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> separatorStyle: <span class="type">UITableViewCell</span>.<span class="type">SeparatorStyle</span></span><br><span class="line"><span class="comment">//ç”¨ä½œåˆ†éš”ç¬¦çš„è¡¨æ ¼å•å…ƒæ ¼çš„æ ·å¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">UITableViewCell</span>.<span class="title">SeparatorStyle</span></span></span><br><span class="line"><span class="class">//ç”¨ä½œåˆ†éš”ç¬¦çš„å•å…ƒæ ¼æ ·å¼ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">separatorColor</span>: <span class="title">UIColor</span>?</span></span><br><span class="line"><span class="class">//è¡¨è§†å›¾ä¸­åˆ†éš”ç¬¦è¡Œçš„é¢œè‰²ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">separatorEffect</span>: <span class="title">UIVisualEffect</span>?</span></span><br><span class="line"><span class="class">//åº”ç”¨äºè¡¨åˆ†éš”ç¬¦çš„æ•ˆæœã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">separatorInset</span>: <span class="title">UIEdgeInsets</span></span></span><br><span class="line"><span class="class">//å•å…ƒæ ¼åˆ†éš”ç¬¦çš„é»˜è®¤æ’å…¥ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">separatorInsetReference</span>: <span class="title">UITableView</span>.<span class="title">SeparatorInsetReference</span></span></span><br><span class="line"><span class="class">//åº”è¯¥å¦‚ä½•è§£é‡Šåˆ†éš”ç¬¦æ’å…¥å€¼çš„æŒ‡ç¤ºç¬¦ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">enum</span> <span class="title">UITableView</span>.<span class="title">SeparatorInsetReference</span></span></span><br><span class="line"><span class="class">//æŒ‡ç¤ºå¦‚ä½•è§£é‡Šè¡¨è§†å›¾çš„åˆ†éš”ç¬¦æ’å…¥å€¼çš„å¸¸é‡ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="è·å–è¡Œæ•°å’ŒèŠ‚æ•°"><a href="#è·å–è¡Œæ•°å’ŒèŠ‚æ•°" class="headerlink" title="è·å–è¡Œæ•°å’ŒèŠ‚æ•°"></a>è·å–è¡Œæ•°å’ŒèŠ‚æ•°</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">numberOfRows</span><span class="params">(inSection: Int)</span></span> -&gt; <span class="type">Int</span></span><br><span class="line"><span class="comment">//è¿”å›æŒ‡å®šèŠ‚ä¸­çš„è¡Œæ•°ï¼ˆè¡¨æ ¼å•å…ƒæ ¼ï¼‰ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> numberOfSections: <span class="type">Int</span></span><br><span class="line"><span class="comment">//è¡¨è§†å›¾ä¸­çš„èŠ‚æ•°ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="è·å–å•å…ƒæ ¼å’ŒåŸºäºèŠ‚çš„è§†å›¾"><a href="#è·å–å•å…ƒæ ¼å’ŒåŸºäºèŠ‚çš„è§†å›¾" class="headerlink" title="è·å–å•å…ƒæ ¼å’ŒåŸºäºèŠ‚çš„è§†å›¾"></a>è·å–å•å…ƒæ ¼å’ŒåŸºäºèŠ‚çš„è§†å›¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cellForRow</span><span class="params">(at: IndexPath)</span></span> -&gt; <span class="type">UITableViewCell?</span></span><br><span class="line"><span class="comment">//è¿”å›æŒ‡å®šç´¢å¼•è·¯å¾„çš„è¡¨æ ¼å•å…ƒæ ¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">headerView</span><span class="params">(forSection: Int)</span></span> -&gt; <span class="type">UITableViewHeaderFooterView?</span></span><br><span class="line"><span class="comment">//è¿”å›ä¸æŒ‡å®šèŠ‚ç›¸å…³è”çš„æ ‡é¢˜è§†å›¾ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">footerView</span><span class="params">(forSection: Int)</span></span> -&gt; <span class="type">UITableViewHeaderFooterView?</span></span><br><span class="line"><span class="comment">//è¿”å›ä¸æŒ‡å®šèŠ‚ç›¸å…³è”çš„é¡µè„šè§†å›¾ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">indexPath</span><span class="params">(<span class="keyword">for</span>: UITableViewCell)</span></span> -&gt; <span class="type">IndexPath?</span></span><br><span class="line"><span class="comment">//è¿”å›è¡¨ç¤ºç»™å®šè¡¨è§†å›¾å•å…ƒæ ¼çš„è¡Œå’Œéƒ¨åˆ†çš„ç´¢å¼•è·¯å¾„ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">indexPathForRow</span><span class="params">(at: CGPoint)</span></span> -&gt; <span class="type">IndexPath?</span></span><br><span class="line"><span class="comment">//è¿”å›æ ‡è¯†ç»™å®šç‚¹å¤„çš„è¡Œå’ŒèŠ‚çš„ç´¢å¼•è·¯å¾„ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">indexPathsForRows</span><span class="params">(<span class="keyword">in</span>: CGRect)</span></span> -&gt; [<span class="type">IndexPath</span>]?</span><br><span class="line"><span class="comment">//ç´¢å¼•è·¯å¾„æ•°ç»„ï¼Œæ¯ä¸ªç´¢å¼•è·¯å¾„è¡¨ç¤ºç”±ç»™å®šçŸ©å½¢åŒ…å›´çš„è¡Œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> visibleCells: [<span class="type">UITableViewCell</span>]</span><br><span class="line"><span class="comment">//è¡¨è§†å›¾ä¸­å¯è§çš„è¡¨æ ¼å•å…ƒæ ¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> indexPathsForVisibleRows: [<span class="type">IndexPath</span>]?</span><br><span class="line"><span class="comment">//ç´¢å¼•è·¯å¾„æ•°ç»„ï¼Œæ¯ä¸ªç´¢å¼•è·¯å¾„æ ‡è¯†è¡¨è§†å›¾ä¸­çš„å¯è§è¡Œã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é€‰æ‹©è¡Œ"><a href="#é€‰æ‹©è¡Œ" class="headerlink" title="é€‰æ‹©è¡Œ"></a>é€‰æ‹©è¡Œ</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> indexPathForSelectedRow: <span class="type">IndexPath?</span></span><br><span class="line"><span class="comment">//æ ‡è¯†æ‰€é€‰è¡Œçš„è¡Œå’Œéƒ¨åˆ†çš„ç´¢å¼•è·¯å¾„ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> indexPathsForSelectedRows: [<span class="type">IndexPath</span>]?</span><br><span class="line"><span class="comment">//è¡¨ç¤ºæ‰€é€‰è¡Œçš„ç´¢å¼•è·¯å¾„ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">selectRow</span><span class="params">(at: IndexPath?, animated: Bool, scrollPosition: UITableView.ScrollPosition)</span></span></span><br><span class="line"><span class="comment">//é€‰æ‹©ç”±ç´¢å¼•è·¯å¾„æ ‡è¯†çš„è¡¨è§†å›¾ä¸­çš„è¡Œï¼Œå¯é€‰æ‹©å°†è¡Œæ»šåŠ¨åˆ°è¡¨è§†å›¾ä¸­çš„æŸä¸ªä½ç½®ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deselectRow</span><span class="params">(at: IndexPath, animated: Bool)</span></span></span><br><span class="line"><span class="comment">//å–æ¶ˆé€‰æ‹©ç”±ç´¢å¼•è·¯å¾„æ ‡è¯†çš„ç»™å®šè¡Œï¼Œå¹¶é€‰æ‹©ä¸ºå–æ¶ˆé€‰æ‹©è®¾ç½®åŠ¨ç”»ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> allowsSelection: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥é€‰æ‹©è¡Œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> allowsMultipleSelection: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºç¡®å®šç”¨æˆ·æ˜¯å¦å¯ä»¥åœ¨ç¼–è¾‘æ¨¡å¼ä¹‹å¤–é€‰æ‹©å¤šä¸ªè¡Œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> allowsSelectionDuringEditing: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºç¡®å®šç”¨æˆ·åœ¨è¡¨è§†å›¾å¤„äºç¼–è¾‘æ¨¡å¼æ—¶æ˜¯å¦å¯ä»¥é€‰æ‹©å•å…ƒæ ¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> allowsMultipleSelectionDuringEditing: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œæ§åˆ¶ç”¨æˆ·æ˜¯å¦å¯ä»¥åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹åŒæ—¶é€‰æ‹©å¤šä¸ªå•å…ƒæ ¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">let</span> <span class="title">selectionDidChangeNotification</span>: <span class="title">NSNotification</span>.<span class="title">Name</span></span></span><br><span class="line"><span class="class">//å‘å¸ƒè¡¨è§†å›¾ä¸­çš„é€‰å®šè¡Œå‘ç”Ÿæ›´æ”¹æ—¶å‘å¸ƒã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æ’å…¥ï¼Œåˆ é™¤å’Œç§»åŠ¨è¡Œå’ŒèŠ‚"><a href="#æ’å…¥ï¼Œåˆ é™¤å’Œç§»åŠ¨è¡Œå’ŒèŠ‚" class="headerlink" title="æ’å…¥ï¼Œåˆ é™¤å’Œç§»åŠ¨è¡Œå’ŒèŠ‚"></a>æ’å…¥ï¼Œåˆ é™¤å’Œç§»åŠ¨è¡Œå’ŒèŠ‚</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">insertRows</span><span class="params">(at: [IndexPath], with: UITableView.RowAnimation)</span></span></span><br><span class="line"><span class="comment">//åœ¨è¡¨è§†å›¾ä¸­æ’å…¥ç”±ç´¢å¼•è·¯å¾„æ•°ç»„æ ‡è¯†çš„ä½ç½®çš„è¡Œï¼Œå¹¶æä¾›åŠ¨ç”»æ’å…¥çš„é€‰é¡¹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deleteRows</span><span class="params">(at: [IndexPath], with: UITableView.RowAnimation)</span></span></span><br><span class="line"><span class="comment">//åˆ é™¤ç´¢å¼•è·¯å¾„æ•°ç»„æŒ‡å®šçš„è¡Œï¼Œå¹¶å¸¦æœ‰ä¸ºåˆ é™¤è®¾ç½®åŠ¨ç”»çš„é€‰é¡¹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">insertSections</span><span class="params">(IndexSet, with: UITableView.RowAnimation)</span></span></span><br><span class="line"><span class="comment">//åœ¨è¡¨è§†å›¾ä¸­æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªéƒ¨åˆ†ï¼Œå¹¶æä¾›åŠ¨ç”»æ’å…¥çš„é€‰é¡¹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">deleteSections</span><span class="params">(IndexSet, with: UITableView.RowAnimation)</span></span></span><br><span class="line"><span class="comment">//åˆ é™¤è¡¨è§†å›¾ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªéƒ¨åˆ†ï¼Œå¹¶å¸¦æœ‰ä¸ºåˆ é™¤è®¾ç½®åŠ¨ç”»çš„é€‰é¡¹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">UITableView</span>.<span class="title">RowAnimation</span></span></span><br><span class="line"><span class="class">//æ’å…¥æˆ–åˆ é™¤è¡Œæ—¶ä½¿ç”¨çš„åŠ¨ç”»ç±»å‹ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">func</span> <span class="title">moveRow</span>(<span class="title">at</span>: <span class="title">IndexPath</span>, <span class="title">to</span>: <span class="title">IndexPath</span>)</span></span><br><span class="line"><span class="class">//å°†æŒ‡å®šä½ç½®çš„è¡Œç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">func</span> <span class="title">moveSection</span>(<span class="title">Int</span>, <span class="title">toSection</span>: <span class="title">Int</span>)</span></span><br><span class="line"><span class="class">//å°†èŠ‚ç§»åŠ¨åˆ°è¡¨è§†å›¾ä¸­çš„æ–°ä½ç½®ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="å¯¹è¡Œå’ŒèŠ‚æ‰§è¡Œæ‰¹é‡æ›´æ–°"><a href="#å¯¹è¡Œå’ŒèŠ‚æ‰§è¡Œæ‰¹é‡æ›´æ–°" class="headerlink" title="å¯¹è¡Œå’ŒèŠ‚æ‰§è¡Œæ‰¹é‡æ›´æ–°"></a>å¯¹è¡Œå’ŒèŠ‚æ‰§è¡Œæ‰¹é‡æ›´æ–°</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">performBatchUpdates</span><span class="params">(<span class="params">(<span class="params">()</span></span></span></span> -&gt; <span class="type">Void</span>)?, completion: ((<span class="type">Bool</span>) -&gt; <span class="type">Void</span>)?)</span><br><span class="line"><span class="comment">//åŠ¨ç”»å¤šä¸ªæ’å…¥ï¼Œåˆ é™¤ï¼Œé‡æ–°åŠ è½½å’Œç§»åŠ¨æ“ä½œä½œä¸ºä¸€ç»„ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">beginUpdates</span><span class="params">()</span></span></span><br><span class="line"><span class="comment">//å¼€å§‹ä¸€ç³»åˆ—æ–¹æ³•è°ƒç”¨ï¼Œæ’å…¥ï¼Œåˆ é™¤æˆ–é€‰æ‹©è¡¨è§†å›¾çš„è¡Œå’Œéƒ¨åˆ†ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">endUpdates</span><span class="params">()</span></span></span><br><span class="line"><span class="comment">//ç»“æŸä¸€ç³»åˆ—æ–¹æ³•è°ƒç”¨ï¼Œæ’å…¥ï¼Œåˆ é™¤ï¼Œé€‰æ‹©æˆ–é‡æ–°åŠ è½½è¡¨è§†å›¾çš„è¡Œå’Œéƒ¨åˆ†ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®è¡¨ç´¢å¼•"><a href="#é…ç½®è¡¨ç´¢å¼•" class="headerlink" title="é…ç½®è¡¨ç´¢å¼•"></a>é…ç½®è¡¨ç´¢å¼•</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> sectionIndexMinimumDisplayRowCount: <span class="type">Int</span></span><br><span class="line"><span class="comment">//ç”¨äºåœ¨è¡¨çš„å³è¾¹ç¼˜æ˜¾ç¤ºç´¢å¼•åˆ—è¡¨çš„è¡¨è¡Œæ•°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sectionIndexColor: <span class="type">UIColor?</span></span><br><span class="line"><span class="comment">//ç”¨äºè¡¨è§†å›¾ç´¢å¼•æ–‡æœ¬çš„é¢œè‰²ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sectionIndexBackgroundColor: <span class="type">UIColor?</span></span><br><span class="line"><span class="comment">//ç”¨äºè¡¨è§†å›¾çš„èŠ‚ç´¢å¼•èƒŒæ™¯çš„é¢œè‰²ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sectionIndexTrackingBackgroundColor: <span class="type">UIColor?</span></span><br><span class="line"><span class="comment">//ç”¨äºè¡¨è§†å›¾çš„ç´¢å¼•èƒŒæ™¯åŒºåŸŸçš„é¢œè‰²ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">let</span> <span class="title">indexSearch</span>: <span class="title">String</span></span></span><br><span class="line"><span class="class">//ç”¨äºå°†æ”¾å¤§é•œå›¾æ ‡æ·»åŠ åˆ°è¡¨è§†å›¾çš„èŠ‚ç´¢å¼•çš„å¸¸é‡ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é‡æ–°åŠ è½½è¡¨è§†å›¾"><a href="#é‡æ–°åŠ è½½è¡¨è§†å›¾" class="headerlink" title="é‡æ–°åŠ è½½è¡¨è§†å›¾"></a>é‡æ–°åŠ è½½è¡¨è§†å›¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> hasUncommittedUpdates: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºè¡¨è§†å›¾çš„å¤–è§‚æ˜¯å¦åŒ…å«æœªåœ¨å…¶æ•°æ®æºä¸­åæ˜ çš„æ›´æ”¹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reloadData</span><span class="params">()</span></span></span><br><span class="line"><span class="comment">//é‡æ–°åŠ è½½è¡¨è§†å›¾çš„è¡Œå’Œéƒ¨åˆ†ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reloadRows</span><span class="params">(at: [IndexPath], with: UITableView.RowAnimation)</span></span></span><br><span class="line"><span class="comment">//ä½¿ç”¨ç»™å®šçš„åŠ¨ç”»æ•ˆæœé‡æ–°åŠ è½½æŒ‡å®šçš„è¡Œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reloadSections</span><span class="params">(IndexSet, with: UITableView.RowAnimation)</span></span></span><br><span class="line"><span class="comment">//ä½¿ç”¨ç»™å®šçš„åŠ¨ç”»æ•ˆæœé‡æ–°åŠ è½½æŒ‡å®šçš„éƒ¨åˆ†ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reloadSectionIndexTitles</span><span class="params">()</span></span></span><br><span class="line"><span class="comment">//é‡æ–°åŠ è½½è¡¨è§†å›¾å³ä¾§ç´¢å¼•æ ä¸­çš„é¡¹ç›®ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ç®¡ç†æ‹–åŠ¨äº¤äº’"><a href="#ç®¡ç†æ‹–åŠ¨äº¤äº’" class="headerlink" title="ç®¡ç†æ‹–åŠ¨äº¤äº’"></a>ç®¡ç†æ‹–åŠ¨äº¤äº’</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dragDelegate: <span class="type">UITableViewDragDelegate?</span></span><br><span class="line"><span class="comment">//å§”æ‰˜å¯¹è±¡ç®¡ç†ä»è¡¨è§†å›¾ä¸­æ‹–åŠ¨é¡¹ç›®ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">UITableViewDragDelegate</span></span></span><br><span class="line"><span class="class">//ç”¨äºä»è¡¨è§†å›¾å¯åŠ¨æ‹–åŠ¨çš„ç•Œé¢ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">hasActiveDrag</span>: <span class="title">Bool</span></span></span><br><span class="line"><span class="class">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦ä»è¡¨è§†å›¾ä¸­æå‡è¡Œå¹¶ä¸”å°šæœªåˆ é™¤ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">dragInteractionEnabled</span>: <span class="title">Bool</span></span></span><br><span class="line"><span class="class">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºè¡¨è§†å›¾æ˜¯å¦æ”¯æŒåº”ç”¨ä¹‹é—´çš„æ‹–æ”¾ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ç®¡ç†ä¸¢å¼ƒäº¤äº’"><a href="#ç®¡ç†ä¸¢å¼ƒäº¤äº’" class="headerlink" title="ç®¡ç†ä¸¢å¼ƒäº¤äº’"></a>ç®¡ç†ä¸¢å¼ƒäº¤äº’</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dropDelegate: <span class="type">UITableViewDropDelegate?</span></span><br><span class="line"><span class="comment">//ç®¡ç†å°†å†…å®¹åˆ é™¤åˆ°è¡¨è§†å›¾ä¸­çš„å§”æ‰˜å¯¹è±¡ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">UITableViewDropDelegate</span></span></span><br><span class="line"><span class="class">//ç”¨äºå¤„ç†çš„æ¥å£åœ¨è¡¨è§†å›¾ä¸­ä¸¢å¼ƒã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">hasActiveDrop</span>: <span class="title">Bool</span></span></span><br><span class="line"><span class="class">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºè¡¨è§†å›¾å½“å‰æ˜¯å¦æ­£åœ¨è·Ÿè¸ªæ”¾ç½®ä¼šè¯ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æ»šåŠ¨è¡¨è§†å›¾"><a href="#æ»šåŠ¨è¡¨è§†å›¾" class="headerlink" title="æ»šåŠ¨è¡¨è§†å›¾"></a>æ»šåŠ¨è¡¨è§†å›¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">scrollToRow</span><span class="params">(at: IndexPath, at: UITableView.ScrollPosition, animated: Bool)</span></span></span><br><span class="line"><span class="comment">//æ»šåŠ¨è¡¨è§†å›¾ï¼Œç›´åˆ°ç´¢å¼•è·¯å¾„æ ‡è¯†çš„è¡Œä½äºå±å¹•ä¸Šçš„ç‰¹å®šä½ç½®ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">scrollToNearestSelectedRow</span><span class="params">(at: UITableView.ScrollPosition, animated: Bool)</span></span></span><br><span class="line"><span class="comment">//æ»šåŠ¨è¡¨æ ¼è§†å›¾ï¼Œä»¥ä¾¿æœ€æ¥è¿‘è¡¨æ ¼è§†å›¾ä¸­æŒ‡å®šä½ç½®çš„é€‰å®šè¡Œä½äºè¯¥ä½ç½®ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">UITableView</span>.<span class="title">ScrollPosition</span></span></span><br><span class="line"><span class="class">//è¡¨æ ¼è§†å›¾ä¸­çš„ä½ç½®ï¼ˆé¡¶éƒ¨ï¼Œä¸­é—´ï¼Œåº•éƒ¨ï¼‰ï¼Œæ»šåŠ¨ç»™å®šè¡Œã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="å°†è¡¨ç½®äºç¼–è¾‘æ¨¡å¼"><a href="#å°†è¡¨ç½®äºç¼–è¾‘æ¨¡å¼" class="headerlink" title="å°†è¡¨ç½®äºç¼–è¾‘æ¨¡å¼"></a>å°†è¡¨ç½®äºç¼–è¾‘æ¨¡å¼</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setEditing</span><span class="params">(Bool, animated: Bool)</span></span></span><br><span class="line"><span class="comment">//åˆ‡æ¢è¡¨æ ¼è§†å›¾è¿›å‡ºç¼–è¾‘æ¨¡å¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> isEditing: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºç¡®å®šè¡¨è§†å›¾æ˜¯å¦å¤„äºç¼–è¾‘æ¨¡å¼ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="è·å–è¡¨æ ¼çš„ç»˜å›¾åŒºåŸŸ"><a href="#è·å–è¡¨æ ¼çš„ç»˜å›¾åŒºåŸŸ" class="headerlink" title="è·å–è¡¨æ ¼çš„ç»˜å›¾åŒºåŸŸ"></a>è·å–è¡¨æ ¼çš„ç»˜å›¾åŒºåŸŸ</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rect</span><span class="params">(forSection: Int)</span></span> -&gt; <span class="type">CGRect</span></span><br><span class="line"><span class="comment">//è¿”å›è¡¨è§†å›¾çš„æŒ‡å®šéƒ¨åˆ†çš„ç»˜å›¾åŒºåŸŸã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rectForRow</span><span class="params">(at: IndexPath)</span></span> -&gt; <span class="type">CGRect</span></span><br><span class="line"><span class="comment">//è¿”å›ç”±ç´¢å¼•è·¯å¾„æ ‡è¯†çš„è¡Œçš„ç»˜å›¾åŒºåŸŸã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rectForFooter</span><span class="params">(inSection: Int)</span></span> -&gt; <span class="type">CGRect</span></span><br><span class="line"><span class="comment">//è¿”å›æŒ‡å®šèŠ‚çš„é¡µè„šçš„ç»˜å›¾åŒºåŸŸã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rectForHeader</span><span class="params">(inSection: Int)</span></span> -&gt; <span class="type">CGRect</span></span><br><span class="line"><span class="comment">//è¿”å›æŒ‡å®šèŠ‚çš„æ ‡é¢˜çš„ç»˜å›¾åŒºåŸŸã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="è®°ä½æœ€åä¸€ä¸ªèšç„¦çš„å•å…ƒæ ¼"><a href="#è®°ä½æœ€åä¸€ä¸ªèšç„¦çš„å•å…ƒæ ¼" class="headerlink" title="è®°ä½æœ€åä¸€ä¸ªèšç„¦çš„å•å…ƒæ ¼"></a>è®°ä½æœ€åä¸€ä¸ªèšç„¦çš„å•å…ƒæ ¼</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> remembersLastFocusedIndexPath: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºè¡¨è§†å›¾æ˜¯å¦åº”è‡ªåŠ¨å°†ç„¦ç‚¹è¿”å›åˆ°ä¸Šä¸€ä¸ªç„¦ç‚¹ç´¢å¼•è·¯å¾„å¤„çš„å•å…ƒæ ¼ã€‚</span></span><br></pre></td></tr></table></figure>
<h1 id="UITableViewCell"><a href="#UITableViewCell" class="headerlink" title="UITableViewCell"></a><a href="https://developer.apple.com/documentation/uikit/uitableviewcell" target="_blank" rel="noopener">UITableViewCell</a></h1><p>UITableViewCellå¯¹è±¡æ˜¯ç®¡ç†å•ä¸ªè¡¨è¡Œå†…å®¹çš„ä¸“ç”¨è§†å›¾ç±»å‹ã€‚æ‚¨ä¸»è¦ä½¿ç”¨å•å…ƒæ ¼æ¥ç»„ç»‡å’Œæ˜¾ç¤ºåº”ç”¨ç¨‹åºçš„è‡ªå®šä¹‰å†…å®¹ï¼Œä½†UITableViewCellæä¾›äº†ä¸€äº›ç‰¹å®šçš„è‡ªå®šä¹‰ä»¥æ”¯æŒä¸è¡¨ç›¸å…³çš„è¡Œä¸ºï¼š</p>
<ul>
<li><p>å°†é€‰å®šå†…å®¹æˆ–çªå‡ºæ˜¾ç¤ºé¢œè‰²åº”ç”¨äºå•å…ƒæ ¼ã€‚</p>
</li>
<li><p>æ·»åŠ æ ‡å‡†é™„ä»¶è§†å›¾ï¼Œå¦‚è¯¦ç»†ä¿¡æ¯æˆ–æŠ«éœ²æ§åˆ¶ã€‚</p>
</li>
<li><p>å°†å•å…ƒæ ¼ç½®äºå¯ç¼–è¾‘çŠ¶æ€ã€‚</p>
</li>
<li><p>ç¼©è¿›å•å…ƒæ ¼å†…å®¹ä»¥åœ¨è¡¨ä¸­åˆ›å»ºå¯è§†å±‚æ¬¡ç»“æ„ã€‚</p>
</li>
</ul>
<blockquote>
<p>A <code>UITableViewCell</code> object is a specialized type of view that manages the content of a single table row. You use cells primarily to organize and present your appâ€™s custom content, but <code>UITableViewCell</code> provides some specific customizations to support table-related behaviors, including:</p>
<ul>
<li>Applying a selection or highlight color to the cell.</li>
<li>Adding standard accessory views, such as a detail or disclosure control.</li>
<li>Putting the cell into an editable state.</li>
<li>Indenting the cellâ€™s content to create a visual hierarchy in your table.</li>
</ul>
<p>Your appâ€™s content occupies most of the cellâ€™s bounds, but the cell may adjust that space to make room for other content. Cells display accessory views on the trailing edge of their content area. When you put your table into edit mode, the cell adds a delete control to the leading edge of its content area, and optionally swaps out an accessory view for a reorder control.</p>
</blockquote>
<p><strong>UITableViewCellStyle/UITableViewCell.CellStyle</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UITableViewCell</span> </span>&#123;</span><br><span class="line">		<span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">CellStyle</span> : <span class="title">Int</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> `<span class="keyword">default</span>`  <span class="comment">//å…·æœ‰æ–‡æœ¬æ ‡ç­¾ï¼ˆé»‘è‰²å’Œå·¦å¯¹é½ï¼‰å’Œå¯é€‰å›¾åƒè§†å›¾çš„å•å…ƒæ ¼çš„ç®€å•æ ·å¼ã€‚</span></span><br><span class="line">        <span class="keyword">case</span> value1			<span class="comment">//å•å…ƒæ ¼æ ·å¼ï¼Œå•å…ƒæ ¼å·¦ä¾§å¸¦æœ‰æ ‡ç­¾ï¼Œå·¦å¯¹é½å’Œé»‘è‰²æ–‡æœ¬; åœ¨å³ä¾§æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œè“è‰²æ–‡å­—è¾ƒå°ï¼Œå³å¯¹é½ã€‚â€œè®¾ç½®â€åº”ç”¨ç¨‹åºä½¿ç”¨æ­¤æ ·å¼çš„å•å…ƒæ ¼ã€‚</span></span><br><span class="line">        <span class="keyword">case</span> value2			<span class="comment">//å•å…ƒæ ¼æ ·å¼ï¼Œå•å…ƒæ ¼å·¦ä¾§å¸¦æœ‰æ ‡ç­¾ï¼Œæ–‡æœ¬å³å¯¹é½ï¼Œè“è‰²; åœ¨å•å…ƒæ ¼çš„å³ä¾§æ˜¯å¦ä¸€ä¸ªæ ‡ç­¾ï¼Œå…¶ä¸­è¾ƒå°çš„æ–‡æœ¬æ˜¯å·¦å¯¹é½å’Œé»‘è‰²ã€‚ç”µè¯/è”ç³»äººåº”ç”¨ç¨‹åºä½¿ç”¨æ­¤æ ·å¼çš„å•å…ƒæ ¼ã€‚</span></span><br><span class="line">        <span class="keyword">case</span> subtitle 	<span class="comment">//å•å…ƒæ ¼çš„æ ·å¼ï¼Œé¡¶éƒ¨å¸¦æœ‰å·¦å¯¹é½æ ‡ç­¾ï¼Œä¸‹é¢å¸¦æœ‰å·¦å¯¹é½æ ‡ç­¾ï¼Œå¸¦æœ‰è¾ƒå°çš„ç°è‰²æ–‡æœ¬ã€‚</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, <span class="built_in">UITableViewCellStyle</span>) &#123;</span><br><span class="line">    <span class="built_in">UITableViewCellStyleDefault</span>,    </span><br><span class="line">    <span class="built_in">UITableViewCellStyleValue1</span>,        </span><br><span class="line">    <span class="built_in">UITableViewCellStyleValue2</span>,        </span><br><span class="line">    <span class="built_in">UITableViewCellStyleSubtitle</span>    </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><img src="cellstyle.png" alt></p>
<p><strong>Cellçš„å±‚æ¬¡ç»“æ„</strong></p>
<p><img src="cellintro.png" alt></p>
<h2 id="ç±»æ–¹æ³•-1"><a href="#ç±»æ–¹æ³•-1" class="headerlink" title="ç±»æ–¹æ³•"></a>ç±»æ–¹æ³•</h2><h3 id="åˆ›å»ºè¡¨è§†å›¾å•å…ƒæ ¼"><a href="#åˆ›å»ºè¡¨è§†å›¾å•å…ƒæ ¼" class="headerlink" title="åˆ›å»ºè¡¨è§†å›¾å•å…ƒæ ¼"></a>åˆ›å»ºè¡¨è§†å›¾å•å…ƒæ ¼</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">init</span>(style: <span class="type">UITableViewCell</span>.<span class="type">CellStyle</span>, reuseIdentifier: <span class="type">String?</span>)</span><br><span class="line"><span class="comment">//ä½¿ç”¨æ ·å¼å’Œé‡ç”¨æ ‡è¯†ç¬¦åˆå§‹åŒ–è¡¨æ ¼å•å…ƒæ ¼å¹¶å°†å…¶è¿”å›ç»™è°ƒç”¨è€…ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">UITableViewCell</span>.<span class="title">CellStyle</span></span></span><br><span class="line"><span class="class">//å„ç§æ ·å¼ç»†èƒçš„æšä¸¾ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">init</span>?(<span class="title">coder</span>: <span class="title">NSCoder</span>)</span></span><br></pre></td></tr></table></figure>
<h3 id="é‡ç”¨"><a href="#é‡ç”¨" class="headerlink" title="é‡ç”¨"></a>é‡ç”¨</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reuseIdentifier: <span class="type">String?</span></span><br><span class="line"><span class="comment">//ç”¨äºæ ‡è¯†å¯é‡ç”¨å•å…ƒçš„å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">prepareForReuse</span><span class="params">()</span></span></span><br><span class="line"><span class="comment">//å‡†å¤‡ä¸€ä¸ªå¯é‡ç”¨çš„å•å…ƒæ ¼ä»¥ä¾›è¡¨è§†å›¾å§”æ‰˜é‡ç”¨ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æŒ‡å®šæ ‡å‡†å•å…ƒæ ¼æ ·å¼çš„å†…å®¹"><a href="#æŒ‡å®šæ ‡å‡†å•å…ƒæ ¼æ ·å¼çš„å†…å®¹" class="headerlink" title="æŒ‡å®šæ ‡å‡†å•å…ƒæ ¼æ ·å¼çš„å†…å®¹"></a>æŒ‡å®šæ ‡å‡†å•å…ƒæ ¼æ ·å¼çš„å†…å®¹</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> textLabel: <span class="type">UILabel?</span></span><br><span class="line"><span class="comment">//ç”¨äºè¡¨æ ¼å•å…ƒæ ¼ä¸»è¦æ–‡æœ¬å†…å®¹çš„æ ‡ç­¾ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> detailTextLabel: <span class="type">UILabel?</span></span><br><span class="line"><span class="comment">//è¡¨æ ¼å•å…ƒæ ¼çš„è¾…åŠ©æ ‡ç­¾ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> imageView: <span class="type">UIImageView?</span></span><br><span class="line"><span class="comment">//è¡¨æ ¼å•å…ƒæ ¼çš„å›¾åƒè§†å›¾ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="è®¿é—®å•å…ƒæ ¼å¯¹è±¡çš„è§†å›¾"><a href="#è®¿é—®å•å…ƒæ ¼å¯¹è±¡çš„è§†å›¾" class="headerlink" title="è®¿é—®å•å…ƒæ ¼å¯¹è±¡çš„è§†å›¾"></a>è®¿é—®å•å…ƒæ ¼å¯¹è±¡çš„è§†å›¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> contentView: <span class="type">UIView</span></span><br><span class="line"><span class="comment">//å•å…ƒæ ¼å¯¹è±¡çš„å†…å®¹è§†å›¾ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> backgroundView: <span class="type">UIView?</span></span><br><span class="line"><span class="comment">//è¯¥è§†å›¾ç”¨ä½œå•å…ƒæ ¼çš„èƒŒæ™¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> selectedBackgroundView: <span class="type">UIView?</span></span><br><span class="line"><span class="comment">//è§†å›¾åœ¨é€‰ä¸­æ—¶ç”¨ä½œå•å…ƒæ ¼çš„èƒŒæ™¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> multipleSelectionBackgroundView: <span class="type">UIView?</span></span><br><span class="line"><span class="comment">//å½“è¡¨è§†å›¾å…è®¸å¤šè¡Œé€‰æ‹©æ—¶ï¼Œç”¨äºé€‰å®šå•å…ƒæ ¼çš„èƒŒæ™¯è§†å›¾ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ç®¡ç†é™„ä»¶è§†å›¾"><a href="#ç®¡ç†é™„ä»¶è§†å›¾" class="headerlink" title="ç®¡ç†é™„ä»¶è§†å›¾"></a>ç®¡ç†é™„ä»¶è§†å›¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> accessoryType: <span class="type">UITableViewCell</span>.<span class="type">AccessoryType</span></span><br><span class="line"><span class="comment">//å•å…ƒåº”ä½¿ç”¨çš„æ ‡å‡†é™„ä»¶è§†å›¾çš„ç±»å‹ï¼ˆæ­£å¸¸çŠ¶æ€ï¼‰ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> accessoryView: <span class="type">UIView?</span></span><br><span class="line"><span class="comment">//åœ¨å•å…ƒæ ¼çš„å³ä¾§ï¼ˆæ­£å¸¸çŠ¶æ€ï¼‰ä½¿ç”¨çš„è§†å›¾ï¼Œé€šå¸¸ç”¨ä½œæ§ä»¶ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> editingAccessoryType: <span class="type">UITableViewCell</span>.<span class="type">AccessoryType</span></span><br><span class="line"><span class="comment">//å•å…ƒæ ¼åº”åœ¨è¡¨æ ¼è§†å›¾çš„ç¼–è¾‘çŠ¶æ€ä¸­ä½¿ç”¨çš„æ ‡å‡†é™„ä»¶è§†å›¾çš„ç±»å‹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> editingAccessoryView: <span class="type">UIView?</span></span><br><span class="line"><span class="comment">//åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹ï¼Œé€šå¸¸ç”¨ä½œå•å…ƒæ ¼å³ä¾§æ§ä»¶çš„è§†å›¾ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">UITableViewCell</span>.<span class="title">AccessoryType</span></span></span><br><span class="line"><span class="class">//å•å…ƒä½¿ç”¨çš„æ ‡å‡†é™„ä»¶æ§ä»¶çš„ç±»å‹ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ç®¡ç†å•å…ƒæ ¼é€‰æ‹©å’Œçªå‡ºæ˜¾ç¤º"><a href="#ç®¡ç†å•å…ƒæ ¼é€‰æ‹©å’Œçªå‡ºæ˜¾ç¤º" class="headerlink" title="ç®¡ç†å•å…ƒæ ¼é€‰æ‹©å’Œçªå‡ºæ˜¾ç¤º"></a>ç®¡ç†å•å…ƒæ ¼é€‰æ‹©å’Œçªå‡ºæ˜¾ç¤º</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> selectionStyle: <span class="type">UITableViewCell</span>.<span class="type">SelectionStyle</span></span><br><span class="line"><span class="comment">//ç»†èƒçš„é€‰æ‹©æ–¹å¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">UITableViewCell</span>.<span class="title">SelectionStyle</span></span></span><br><span class="line"><span class="class">//é€‰å®šå•å…ƒæ ¼çš„æ ·å¼ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">isSelected</span>: <span class="title">Bool</span></span></span><br><span class="line"><span class="class">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦é€‰æ‹©äº†å•å…ƒæ ¼ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">func</span> <span class="title">setSelected</span>(<span class="title">Bool</span>, <span class="title">animated</span>: <span class="title">Bool</span>)</span></span><br><span class="line"><span class="class">//è®¾ç½®å•å…ƒæ ¼çš„é€‰å®šçŠ¶æ€ï¼Œå¯é€‰åœ°ä¸ºçŠ¶æ€ä¹‹é—´çš„è¿‡æ¸¡è®¾ç½®åŠ¨ç”»ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">isHighlighted</span>: <span class="title">Bool</span></span></span><br><span class="line"><span class="class">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå•å…ƒæ ¼æ˜¯å¦çªå‡ºæ˜¾ç¤ºã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">func</span> <span class="title">setHighlighted</span>(<span class="title">Bool</span>, <span class="title">animated</span>: <span class="title">Bool</span>)</span></span><br><span class="line"><span class="class">//è®¾ç½®å•å…ƒæ ¼çš„çªå‡ºæ˜¾ç¤ºçŠ¶æ€ï¼Œå¯é€‰åœ°ä¸ºçŠ¶æ€ä¹‹é—´çš„è¿‡æ¸¡è®¾ç½®åŠ¨ç”»ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ç¼–è¾‘å•å…ƒæ ¼"><a href="#ç¼–è¾‘å•å…ƒæ ¼" class="headerlink" title="ç¼–è¾‘å•å…ƒæ ¼"></a>ç¼–è¾‘å•å…ƒæ ¼</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isEditing: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå•å…ƒæ ¼æ˜¯å¦å¤„äºå¯ç¼–è¾‘çŠ¶æ€ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setEditing</span><span class="params">(Bool, animated: Bool)</span></span></span><br><span class="line"><span class="comment">//åˆ‡æ¢æ¥æ”¶å™¨è¿›å…¥å’Œé€€å‡ºç¼–è¾‘æ¨¡å¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> editingStyle: <span class="type">UITableViewCell</span>.<span class="type">EditingStyle</span></span><br><span class="line"><span class="comment">//å•å…ƒæ ¼çš„ç¼–è¾‘æ ·å¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">UITableViewCell</span>.<span class="title">EditingStyle</span></span></span><br><span class="line"><span class="class">//å•å…ƒæ ¼ä½¿ç”¨çš„ç¼–è¾‘æ§ä»¶ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">showingDeleteConfirmation</span>: <span class="title">Bool</span></span></span><br><span class="line"><span class="class">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå•å…ƒæ ¼å½“å‰æ˜¯å¦æ˜¾ç¤ºåˆ é™¤ç¡®è®¤æŒ‰é’®ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">var</span> <span class="title">showsReorderControl</span>: <span class="title">Bool</span></span></span><br><span class="line"><span class="class">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºç¡®å®šå•å…ƒæ ¼æ˜¯å¦æ˜¾ç¤ºé‡æ–°æ’åºæ§ä»¶ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æ‹–åŠ¨è¡Œ"><a href="#æ‹–åŠ¨è¡Œ" class="headerlink" title="æ‹–åŠ¨è¡Œ"></a>æ‹–åŠ¨è¡Œ</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> userInteractionEnabledWhileDragging: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºç”¨æˆ·åœ¨æ‹–åŠ¨å•å…ƒæ ¼æ—¶æ˜¯å¦å¯ä»¥ä¸å•å…ƒæ ¼è¿›è¡Œäº¤äº’ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">dragStateDidChange</span><span class="params">(UITableViewCell.DragState)</span></span></span><br><span class="line"><span class="comment">//é€šçŸ¥å•å…ƒæ ¼å…¶æ‹–åŠ¨çŠ¶æ€å·²æ›´æ”¹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">UITableViewCell</span>.<span class="title">DragState</span></span></span><br><span class="line"><span class="class">//æŒ‡ç¤ºæ‹–åŠ¨æ“ä½œä¸­æ¶‰åŠçš„è¡Œçš„å½“å‰çŠ¶æ€çš„å¸¸é‡ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é€‚åº”çŠ¶æ€è½¬å˜"><a href="#é€‚åº”çŠ¶æ€è½¬å˜" class="headerlink" title="é€‚åº”çŠ¶æ€è½¬å˜"></a>é€‚åº”çŠ¶æ€è½¬å˜</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">willTransition</span><span class="params">(to: UITableViewCell.StateMask)</span></span></span><br><span class="line"><span class="comment">//è¢«è°ƒç”¨ä»¥é€šçŸ¥å•å…ƒæ ¼å®ƒå°†è¦è½¬æ¢åˆ°æ–°çš„å•å…ƒçŠ¶æ€ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">didTransition</span><span class="params">(to: UITableViewCell.StateMask)</span></span></span><br><span class="line"><span class="comment">//è¢«è°ƒç”¨ä»¥é€šçŸ¥å•å…ƒæ ¼å®ƒå·²è½¬æ¢åˆ°æ–°çš„å•å…ƒçŠ¶æ€ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">UITableViewCell</span>.<span class="title">StateMask</span></span></span><br><span class="line"><span class="class">//å¸¸é‡ç”¨äºåœ¨çŠ¶æ€ä¹‹é—´è½¬æ¢æ—¶ç¡®å®šå•å…ƒæ ¼çš„æ–°çŠ¶æ€ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ç®¡ç†å†…å®¹ç¼©è¿›"><a href="#ç®¡ç†å†…å®¹ç¼©è¿›" class="headerlink" title="ç®¡ç†å†…å®¹ç¼©è¿›"></a>ç®¡ç†å†…å®¹ç¼©è¿›</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> indentationLevel: <span class="type">Int</span></span><br><span class="line"><span class="comment">//å•å…ƒæ ¼å†…å®¹çš„ç¼©è¿›çº§åˆ«ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> indentationWidth: <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//å•å…ƒæ ¼å†…å®¹çš„æ¯ä¸ªç¼©è¿›çº§åˆ«çš„å®½åº¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> shouldIndentWhileEditing: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºæ§åˆ¶è¡¨è§†å›¾å¤„äºç¼–è¾‘æ¨¡å¼æ—¶æ˜¯å¦ç¼©è¿›å•å…ƒæ ¼èƒŒæ™¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> separatorInset: <span class="type">UIEdgeInsets</span></span><br><span class="line"><span class="comment">//åœ¨å•å…ƒæ ¼ä¸‹æ–¹ç»˜åˆ¶çš„åˆ†éš”çº¿çš„æ’å…¥å€¼ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ç®¡ç†ç„¦ç‚¹"><a href="#ç®¡ç†ç„¦ç‚¹" class="headerlink" title="ç®¡ç†ç„¦ç‚¹"></a>ç®¡ç†ç„¦ç‚¹</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> focusStyle: <span class="type">UITableViewCell</span>.<span class="type">FocusStyle</span></span><br><span class="line"><span class="comment">//èšç„¦æ—¶çš„å¤–è§‚ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">UITableViewCell</span>.<span class="title">FocusStyle</span></span></span><br><span class="line"><span class="class">//èšç„¦çš„é£æ ¼ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">UITableViewCell</span>.<span class="title">SeparatorStyle</span></span></span><br><span class="line"><span class="class">ç”¨ä½œåˆ†éš”ç¬¦çš„å•å…ƒæ ¼æ ·å¼ã€‚</span></span><br></pre></td></tr></table></figure>
<h1 id="UITableViewDelegate"><a href="#UITableViewDelegate" class="headerlink" title="UITableViewDelegate"></a><a href="https://developer.apple.com/documentation/uikit/uitableviewdelegate" target="_blank" rel="noopener">UITableViewDelegate</a></h1><p><code>UITableViewDelegate</code>ç”¨æ¥ç®¡ç†é€‰æ‹©ï¼Œé…ç½®èŠ‚é¡µçœ‰å’Œé¡µè„šï¼Œåˆ é™¤å’Œé‡æ–°æ’åºå•å…ƒæ ¼ä»¥åŠåœ¨è¡¨æ ¼è§†å›¾ä¸­æ‰§è¡Œå…¶ä»–æ“ä½œçš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>åˆ›å»ºå’Œç®¡ç†è‡ªå®šä¹‰é¡µçœ‰å’Œé¡µè„šè§†å›¾ã€‚</li>
<li>æŒ‡å®šè¡Œï¼Œé¡µçœ‰å’Œé¡µè„šçš„è‡ªå®šä¹‰é«˜åº¦ã€‚</li>
<li>æä¾›é«˜åº¦ä¼°è®¡ä»¥è·å¾—æ›´å¥½çš„æ»šåŠ¨æ”¯æŒã€‚</li>
<li>ç¼©è¿›è¡Œå†…å®¹ã€‚</li>
<li>å“åº”è¡Œé€‰æ‹©ã€‚</li>
<li>å“åº”è¡¨è¡Œä¸­çš„æ»‘åŠ¨å’Œå…¶ä»–æ“ä½œã€‚</li>
<li>æ”¯æŒç¼–è¾‘è¡¨æ ¼çš„å†…å®¹ã€‚</li>
</ul>
<h2 id="åè®®æ–¹æ³•ï¼š"><a href="#åè®®æ–¹æ³•ï¼š" class="headerlink" title="åè®®æ–¹æ³•ï¼š"></a><strong>åè®®æ–¹æ³•ï¼š</strong></h2><h3 id="é…ç½®è¡¨è§†å›¾è¡Œ"><a href="#é…ç½®è¡¨è§†å›¾è¡Œ" class="headerlink" title="é…ç½®è¡¨è§†å›¾è¡Œ"></a>é…ç½®è¡¨è§†å›¾è¡Œ</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, willDisplay: UITableViewCell, forRowAt: IndexPath)</span></span></span><br><span class="line"><span class="comment">//å‘Šè¯‰å§”æ‰˜è¡¨è§†å›¾æ˜¯å¦è¦ä¸ºç‰¹å®šè¡Œç»˜åˆ¶å•å…ƒæ ¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, indentationLevelForRowAt: IndexPath)</span></span> -&gt; <span class="type">Int</span></span><br><span class="line"><span class="comment">//è¦æ±‚å§”æ‰˜è€…è¿”å›ç»™å®šéƒ¨åˆ†ä¸­æŸè¡Œçš„ç¼©è¿›çº§åˆ«ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, shouldSpringLoadRowAt: IndexPath, with: UISpringLoadedInteractionContext)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line"><span class="comment">//è¢«è°ƒç”¨ä»¥å…è®¸æ‚¨å¾®è°ƒè¡¨ä¸­è¡Œçš„å¼¹ç°§åŠ è½½è¡Œä¸ºã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="å“åº”è¡Œé€‰æ‹©"><a href="#å“åº”è¡Œé€‰æ‹©" class="headerlink" title="å“åº”è¡Œé€‰æ‹©"></a>å“åº”è¡Œé€‰æ‹©</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, willSelectRowAt: IndexPath)</span></span> -&gt; <span class="type">IndexPath?</span></span><br><span class="line"><span class="comment">//å‘Šè¯‰å§”æ‰˜è€…å³å°†é€‰æ‹©æŒ‡å®šçš„è¡Œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, didSelectRowAt: IndexPath)</span></span></span><br><span class="line"><span class="comment">//å‘Šè¯‰å§”æ‰˜è€…ç°åœ¨é€‰æ‹©äº†æŒ‡å®šçš„è¡Œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, willDeselectRowAt: IndexPath)</span></span> -&gt; <span class="type">IndexPath?</span></span><br><span class="line"><span class="comment">//å‘Šè¯‰å§”æ‰˜è€…å³å°†å–æ¶ˆé€‰æ‹©æŒ‡å®šçš„è¡Œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, didDeselectRowAt: IndexPath)</span></span></span><br><span class="line"><span class="comment">//å‘Šè¯‰ä»£ç†ç°åœ¨å–æ¶ˆé€‰æ‹©æŒ‡å®šçš„è¡Œã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æä¾›è‡ªå®šä¹‰é¡µçœ‰å’Œé¡µè„šè§†å›¾"><a href="#æä¾›è‡ªå®šä¹‰é¡µçœ‰å’Œé¡µè„šè§†å›¾" class="headerlink" title="æä¾›è‡ªå®šä¹‰é¡µçœ‰å’Œé¡µè„šè§†å›¾"></a>æä¾›è‡ªå®šä¹‰é¡µçœ‰å’Œé¡µè„šè§†å›¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, viewForHeaderInSection: Int)</span></span> -&gt; <span class="type">UIView?</span></span><br><span class="line"><span class="comment">//è¦æ±‚å§”æ‰˜ä½¿è§†å›¾å¯¹è±¡æ˜¾ç¤ºåœ¨è¡¨è§†å›¾çš„æŒ‡å®šéƒ¨åˆ†çš„æ ‡é¢˜ä¸­ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, viewForFooterInSection: Int)</span></span> -&gt; <span class="type">UIView?</span></span><br><span class="line"><span class="comment">//è¦æ±‚å§”æ‰˜ä½¿è§†å›¾å¯¹è±¡æ˜¾ç¤ºåœ¨è¡¨è§†å›¾çš„æŒ‡å®šéƒ¨åˆ†çš„é¡µè„šä¸­ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, willDisplayHeaderView: UIView, forSection: Int)</span></span></span><br><span class="line"><span class="comment">//å‘Šè¯‰å§”æ‰˜è¡¨è¯¥è¡¨å³å°†æ˜¾ç¤ºæŒ‡å®šèŠ‚çš„æ ‡é¢˜è§†å›¾ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, willDisplayFooterView: UIView, forSection: Int)</span></span></span><br><span class="line"><span class="comment">//å‘Šè¯‰ä»£ç†è¯¥è¡¨å³å°†æ˜¾ç¤ºæŒ‡å®šéƒ¨åˆ†çš„é¡µè„šè§†å›¾ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æä¾›é¡µçœ‰ï¼Œé¡µè„šå’Œè¡Œé«˜"><a href="#æä¾›é¡µçœ‰ï¼Œé¡µè„šå’Œè¡Œé«˜" class="headerlink" title="æä¾›é¡µçœ‰ï¼Œé¡µè„šå’Œè¡Œé«˜"></a>æä¾›é¡µçœ‰ï¼Œé¡µè„šå’Œè¡Œé«˜</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, heightForRowAt: IndexPath)</span></span> -&gt; <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†ç”¨äºæŒ‡å®šä½ç½®çš„è¡Œçš„é«˜åº¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, heightForHeaderInSection: Int)</span></span> -&gt; <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†ç”¨äºç‰¹å®šéƒ¨åˆ†æ ‡é¢˜çš„é«˜åº¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, heightForFooterInSection: Int)</span></span> -&gt; <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†ç”¨äºç‰¹å®šéƒ¨åˆ†çš„é¡µè„šçš„é«˜åº¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">let</span> <span class="title">automaticDimension</span>: <span class="title">CGFloat</span></span></span><br><span class="line"><span class="class">//è¡¨ç¤ºç»™å®šç»´åº¦çš„é»˜è®¤å€¼çš„å¸¸é‡ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¼°è®¡è¡¨æ ¼å†…å®¹çš„é«˜åº¦"><a href="#ä¼°è®¡è¡¨æ ¼å†…å®¹çš„é«˜åº¦" class="headerlink" title="ä¼°è®¡è¡¨æ ¼å†…å®¹çš„é«˜åº¦"></a>ä¼°è®¡è¡¨æ ¼å†…å®¹çš„é«˜åº¦</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, estimatedHeightForRowAt: IndexPath)</span></span> -&gt; <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†æŒ‡å®šä½ç½®ä¸­è¡Œçš„ä¼°è®¡é«˜åº¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, estimatedHeightForHeaderInSection: Int)</span></span> -&gt; <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†ç‰¹å®šéƒ¨åˆ†æ ‡é¢˜çš„ä¼°è®¡é«˜åº¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, estimatedHeightForFooterInSection: Int)</span></span> -&gt; <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†ç‰¹å®šéƒ¨åˆ†çš„é¡µè„šä¼°è®¡é«˜åº¦ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ç®¡ç†é™„ä»¶è§†å›¾-1"><a href="#ç®¡ç†é™„ä»¶è§†å›¾-1" class="headerlink" title="ç®¡ç†é™„ä»¶è§†å›¾"></a>ç®¡ç†é™„ä»¶è§†å›¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, accessoryButtonTappedForRowWith: IndexPath)</span></span></span><br><span class="line"><span class="comment">//å‘Šè¯‰ä»£ç†ç”¨æˆ·ç‚¹å‡»äº†æŒ‡å®šè¡Œçš„è¯¦ç»†ä¿¡æ¯æŒ‰é’®ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="å“åº”è¡ŒåŠ¨ä½œ"><a href="#å“åº”è¡ŒåŠ¨ä½œ" class="headerlink" title="å“åº”è¡ŒåŠ¨ä½œ"></a>å“åº”è¡ŒåŠ¨ä½œ</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, leadingSwipeActionsConfigurationForRowAt: IndexPath)</span></span> -&gt; <span class="type">UISwipeActionsConfiguration?</span></span><br><span class="line"><span class="comment">//è¿”å›è¦åœ¨è¡Œçš„å‰æ²¿æ˜¾ç¤ºçš„æ»‘åŠ¨æ“ä½œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, trailingSwipeActionsConfigurationForRowAt: IndexPath)</span></span> -&gt; <span class="type">UISwipeActionsConfiguration?</span></span><br><span class="line"><span class="comment">//è¿”å›è¦åœ¨è¡Œçš„åç¼˜æ˜¾ç¤ºçš„æ»‘åŠ¨æ“ä½œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, shouldShowMenuForRowAt: IndexPath)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†æ˜¯å¦åº”è¯¥ä¸ºæŸä¸€è¡Œæ˜¾ç¤ºç¼–è¾‘èœå•ã€‚ --å¼ƒç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, canPerformAction: Selector, forRowAt: IndexPath, withSender: <span class="keyword">Any</span>?)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†æ˜¯å¦ç¼–è¾‘èœå•åº”çœç•¥ç»™å®šè¡Œçš„å¤åˆ¶æˆ–ç²˜è´´å‘½ä»¤ã€‚-- å¼ƒç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, performAction: Selector, forRowAt: IndexPath, withSender: <span class="keyword">Any</span>?)</span></span></span><br><span class="line"><span class="comment">//å‘ŠçŸ¥å§”æ‰˜å¯¹ç»™å®šè¡Œçš„å†…å®¹æ‰§è¡Œå¤åˆ¶æˆ–ç²˜è´´æ“ä½œã€‚-- å¼ƒç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, editActionsForRowAt: IndexPath)</span></span> -&gt; [<span class="type">UITableViewRowAction</span>]?</span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†æ˜¯å¦å“åº”æŒ‡å®šè¡Œä¸­çš„æ»‘åŠ¨è€Œæ˜¾ç¤ºçš„æ“ä½œã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ç®¡ç†è¡¨æ ¼è§†å›¾äº®ç‚¹"><a href="#ç®¡ç†è¡¨æ ¼è§†å›¾äº®ç‚¹" class="headerlink" title="ç®¡ç†è¡¨æ ¼è§†å›¾äº®ç‚¹"></a>ç®¡ç†è¡¨æ ¼è§†å›¾äº®ç‚¹</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, shouldHighlightRowAt: IndexPath)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†æ˜¯å¦åº”çªå‡ºæ˜¾ç¤ºæŒ‡å®šçš„è¡Œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, didHighlightRowAt: IndexPath)</span></span></span><br><span class="line"><span class="comment">//å‘Šè¯‰ä»£ç†æŒ‡å‡ºçš„è¡Œå·²çªå‡ºæ˜¾ç¤ºã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, didUnhighlightRowAt: IndexPath)</span></span></span><br><span class="line"><span class="comment">//å‘Šè¯‰å§”æ‰˜ï¼Œçªå‡ºæ˜¾ç¤ºå·²ä»æŒ‡å®šç´¢å¼•è·¯å¾„çš„è¡Œä¸­åˆ é™¤ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ç¼–è¾‘è¡¨è¡Œ"><a href="#ç¼–è¾‘è¡¨è¡Œ" class="headerlink" title="ç¼–è¾‘è¡¨è¡Œ"></a>ç¼–è¾‘è¡¨è¡Œ</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, willBeginEditingRowAt: IndexPath)</span></span></span><br><span class="line"><span class="comment">//å‘Šè¯‰ä»£ç†è¡¨è§†å›¾å³å°†è¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, didEndEditingRowAt: IndexPath?)</span></span></span><br><span class="line"><span class="comment">//å‘Šè¯‰ä»£ç†è¡¨è§†å›¾å·²ç¦»å¼€ç¼–è¾‘æ¨¡å¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, editingStyleForRowAt: IndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span>.<span class="type">EditingStyle</span></span><br><span class="line"><span class="comment">//å‘ä»£è¡¨è¯¢é—®è¡¨è§†å›¾ä¸­ç‰¹å®šä½ç½®çš„è¡Œçš„ç¼–è¾‘æ ·å¼ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, titleForDeleteConfirmationButtonForRowAt: IndexPath)</span></span> -&gt; <span class="type">String?</span></span><br><span class="line"><span class="comment">//æ›´æ”¹åˆ é™¤ç¡®è®¤æŒ‰é’®çš„é»˜è®¤æ ‡é¢˜ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, shouldIndentWhileEditingRowAt: IndexPath)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†åœ¨è¡¨è§†å›¾å¤„äºç¼–è¾‘æ¨¡å¼æ—¶æ˜¯å¦åº”ç¼©è¿›æŒ‡å®šè¡Œçš„èƒŒæ™¯ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é‡æ–°æ’åºè¡¨è¡Œ"><a href="#é‡æ–°æ’åºè¡¨è¡Œ" class="headerlink" title="é‡æ–°æ’åºè¡¨è¡Œ"></a>é‡æ–°æ’åºè¡¨è¡Œ</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, targetIndexPathForMoveFromRowAt: IndexPath, toProposedIndexPath: IndexPath)</span></span> -&gt; <span class="type">IndexPath</span></span><br><span class="line"><span class="comment">//è¦æ±‚å§”æ‰˜è€…è¿”å›ä¸€ä¸ªæ–°çš„ç´¢å¼•è·¯å¾„ä»¥é‡æ–°å®šä½å»ºè®®çš„è¡Œç§»åŠ¨ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="è·Ÿè¸ªåˆ é™¤è§†å›¾"><a href="#è·Ÿè¸ªåˆ é™¤è§†å›¾" class="headerlink" title="è·Ÿè¸ªåˆ é™¤è§†å›¾"></a>è·Ÿè¸ªåˆ é™¤è§†å›¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, canFocusRowAt: IndexPath)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†æ˜¯å¦æŒ‡å®šç´¢å¼•è·¯å¾„çš„å•å…ƒæ ¼æœ¬èº«æ˜¯å¯èšç„¦çš„ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, shouldUpdateFocusIn: UITableViewFocusUpdateContext)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line"><span class="comment">//è¯¢é—®ä»£ç†æ˜¯å¦å…è®¸å‘ç”Ÿä¸Šä¸‹æ–‡æŒ‡å®šçš„ç„¦ç‚¹æ›´æ–°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, didUpdateFocusIn: UITableViewFocusUpdateContext, with: UIFocusAnimationCoordinator)</span></span></span><br><span class="line"><span class="comment">//å‘Šè¯‰å§”æ‰˜è€…åˆšåˆšå‘ç”Ÿäº†ä¸Šä¸‹æ–‡æŒ‡å®šçš„ç„¦ç‚¹æ›´æ–°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">indexPathForPreferredFocusedView</span><span class="params">(<span class="keyword">in</span>: UITableView)</span></span> -&gt; <span class="type">IndexPath?</span></span><br><span class="line"><span class="comment">//å‘å§”æ‰˜è¯¢é—®é¦–é€‰ç„¦ç‚¹è§†å›¾çš„è¡¨è§†å›¾çš„ç´¢å¼•è·¯å¾„ã€‚</span></span><br></pre></td></tr></table></figure>
<h1 id="UITableViewDataSource"><a href="#UITableViewDataSource" class="headerlink" title="UITableViewDataSource"></a>UITableViewDataSource</h1><p><code>UITableViewDataSource</code>ç”¨äºç®¡ç†æ•°æ®å¹¶ä¸ºè¡¨è§†å›¾æä¾›å•å…ƒæ ¼çš„å¯¹è±¡é‡‡ç”¨çš„æ–¹æ³•ã€‚</p>
<p><code>UITableView</code>ä»…ç®¡ç†å…¶æ•°æ®çš„è¡¨ç¤º; ä»–ä»¬ä¸ç®¡ç†æ•°æ®æœ¬èº«ã€‚è¦ç®¡ç†æ•°æ®ï¼Œè¯·ä¸ºè¡¨æä¾›æ•°æ®æºå¯¹è±¡ï¼Œå³å®ç°åè®®çš„å¯¹è±¡ã€‚æ•°æ®æºå¯¹è±¡å“åº”æ¥è‡ªè¡¨çš„ä¸æ•°æ®ç›¸å…³çš„è¯·æ±‚ã€‚å®ƒè¿˜å¯ä»¥ç›´æ¥ç®¡ç†è¡¨æ ¼çš„æ•°æ®ï¼Œæˆ–ä¸åº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†åè°ƒä»¥ç®¡ç†è¯¥æ•°æ®ã€‚</p>
<ul>
<li>æŒ‡å®šè¡¨ä¸­çš„èŠ‚å’Œè¡Œæ•°ã€‚</li>
<li>ä¸ºè¡¨çš„æ¯ä¸€è¡Œæä¾›å•å…ƒæ ¼ã€‚</li>
<li>ä¸ºèŠ‚æ ‡é¢˜å’Œé¡µè„šæä¾›æ ‡é¢˜ã€‚</li>
<li>é…ç½®è¡¨çš„ç´¢å¼•ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</li>
<li>å“åº”éœ€è¦æ›´æ”¹åŸºç¡€æ•°æ®çš„ç”¨æˆ·æˆ–è¡¨å¯åŠ¨çš„æ›´æ–°ã€‚</li>
</ul>
<p><strong>æŒ‡å®šè¡Œå’ŒèŠ‚çš„ä½ç½®</strong></p>
<p><code>UITableView</code>ä½¿ç”¨<code>NSIndexPath</code>å¯¹è±¡çš„<code>row</code>å’Œ<code>section</code>å±æ€§æ¥è¿›è¡Œå•å…ƒæ ¼çš„ä½ç½®å®šä½ã€‚è¡Œç´¢å¼•å’ŒèŠ‚ç´¢å¼•æ˜¯ä»é›¶å¼€å§‹çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€èŠ‚ä½äºç´¢å¼•0ï¼Œç¬¬äºŒèŠ‚ä½äºç´¢å¼•1ï¼Œä¾æ­¤ç±»æ¨ã€‚åŒæ ·ï¼Œæ¯ä¸ªèŠ‚çš„ç¬¬ä¸€è¡Œä½äºç´¢å¼•0å¤„ï¼Œè¿™æ„å‘³ç€æ‚¨éœ€è¦èŠ‚å€¼å’Œè¡Œå€¼æ¥å”¯ä¸€æ ‡è¯†è¡Œã€‚å¦‚æœè¡¨æ²¡æœ‰èŠ‚ï¼Œåˆ™åªéœ€è¦è¡Œå€¼ã€‚</p>
<p><img src="rowandsection.png" alt></p>
<p><strong>è¯¥åè®®å¿…é¡»å®ç°ä¸¤ä¸ªæ–¹æ³•</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Return the number of rows for the table.     </span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Provide a cell object for each row.</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, cellForRowAt indexPath: IndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</span><br><span class="line">   <span class="comment">// Fetch a cell of the appropriate type.</span></span><br><span class="line">   <span class="keyword">let</span> cell = tableView.dequeueReusableCell(withIdentifier: <span class="string">"cellTypeIdentifier"</span>, <span class="keyword">for</span>: indexPath)</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// Configure the cellâ€™s contents.</span></span><br><span class="line">   cell.textLabel!.text = <span class="string">"Cell text"</span></span><br><span class="line">       </span><br><span class="line">   <span class="keyword">return</span> cell</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨æ­¤åè®®çš„å…¶ä»–æ–¹æ³•ä¸ºè¡¨å¯ç”¨ç‰¹å®šåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¿…é¡»å®ç°è¯¥æ–¹æ³•ä»¥å¯ç”¨è¡Œçš„æ»‘åŠ¨åˆ°åˆ é™¤åŠŸèƒ½ã€‚<a href="https://developer.apple.com/documentation/uikit/uitableviewdatasource/1614871-tableview" target="_blank" rel="noopener"><code>tableView(_:commit:forRowAt:)</code></a></p>
</blockquote>
<h2 id="åè®®æ–¹æ³•"><a href="#åè®®æ–¹æ³•" class="headerlink" title="åè®®æ–¹æ³•"></a><strong>åè®®æ–¹æ³•</strong></h2><h3 id="æä¾›è¡Œæ•°å’ŒèŠ‚æ•°"><a href="#æä¾›è¡Œæ•°å’ŒèŠ‚æ•°" class="headerlink" title="æä¾›è¡Œæ•°å’ŒèŠ‚æ•°"></a>æä¾›è¡Œæ•°å’ŒèŠ‚æ•°</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, numberOfRowsInSection: Int)</span></span> -&gt; <span class="type">Int</span></span><br><span class="line"><span class="comment">//å‘Šè¯‰æ•°æ®æºè¿”å›è¡¨è§†å›¾çš„ç»™å®šéƒ¨åˆ†ä¸­çš„è¡Œæ•°ã€‚-- éœ€è¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">numberOfSections</span><span class="params">(<span class="keyword">in</span>: UITableView)</span></span> -&gt; <span class="type">Int</span></span><br><span class="line"><span class="comment">//è¦æ±‚æ•°æ®æºè¿”å›è¡¨è§†å›¾ä¸­çš„èŠ‚æ•°ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æä¾›å•å…ƒæ ¼ï¼Œé¡µçœ‰å’Œé¡µè„š"><a href="#æä¾›å•å…ƒæ ¼ï¼Œé¡µçœ‰å’Œé¡µè„š" class="headerlink" title="æä¾›å•å…ƒæ ¼ï¼Œé¡µçœ‰å’Œé¡µè„š"></a>æä¾›å•å…ƒæ ¼ï¼Œé¡µçœ‰å’Œé¡µè„š</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, cellForRowAt: IndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span></span><br><span class="line"><span class="comment">//è¦æ±‚å•å…ƒæ ¼çš„æ•°æ®æºæ’å…¥è¡¨è§†å›¾çš„ç‰¹å®šä½ç½®ã€‚-- éœ€è¦ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, titleForHeaderInSection: Int)</span></span> -&gt; <span class="type">String?</span></span><br><span class="line"><span class="comment">//å‘æ•°æ®æºè¯¢é—®è¡¨è§†å›¾çš„æŒ‡å®šéƒ¨åˆ†çš„æ ‡é¢˜çš„æ ‡é¢˜ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, titleForFooterInSection: Int)</span></span> -&gt; <span class="type">String?</span></span><br><span class="line"><span class="comment">//å‘æ•°æ®æºè¯¢é—®è¡¨è§†å›¾çš„æŒ‡å®šéƒ¨åˆ†çš„é¡µè„šæ ‡é¢˜ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æ’å…¥æˆ–åˆ é™¤è¡¨æ ¼è¡Œ"><a href="#æ’å…¥æˆ–åˆ é™¤è¡¨æ ¼è¡Œ" class="headerlink" title="æ’å…¥æˆ–åˆ é™¤è¡¨æ ¼è¡Œ"></a>æ’å…¥æˆ–åˆ é™¤è¡¨æ ¼è¡Œ</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, commit: UITableViewCell.EditingStyle, forRowAt: IndexPath)</span></span></span><br><span class="line"><span class="comment">//è¦æ±‚æ•°æ®æºæäº¤æ’å…¥æˆ–åˆ é™¤æ¥æ”¶å™¨ä¸­çš„æŒ‡å®šè¡Œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, canEditRowAt: IndexPath)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line"><span class="comment">//è¦æ±‚æ•°æ®æºéªŒè¯ç»™å®šè¡Œæ˜¯å¦å¯ç¼–è¾‘ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é‡æ–°æ’åºè¡¨è¡Œ-1"><a href="#é‡æ–°æ’åºè¡¨è¡Œ-1" class="headerlink" title="é‡æ–°æ’åºè¡¨è¡Œ"></a>é‡æ–°æ’åºè¡¨è¡Œ</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, canMoveRowAt: IndexPath)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line"><span class="comment">//è¯¢é—®æ•°æ®æºæ˜¯å¦å¯ä»¥å°†ç»™å®šè¡Œç§»åŠ¨åˆ°è¡¨è§†å›¾ä¸­çš„å¦ä¸€ä¸ªä½ç½®ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, moveRowAt: IndexPath, to: IndexPath)</span></span></span><br><span class="line"><span class="comment">//å‘ŠçŸ¥æ•°æ®æºå°†è¡¨è§†å›¾ä¸­ç‰¹å®šä½ç½®çš„è¡Œç§»åŠ¨åˆ°å¦ä¸€ä¸ªä½ç½®ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é…ç½®ç´¢å¼•"><a href="#é…ç½®ç´¢å¼•" class="headerlink" title="é…ç½®ç´¢å¼•"></a>é…ç½®ç´¢å¼•</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sectionIndexTitles</span><span class="params">(<span class="keyword">for</span>: UITableView)</span></span> -&gt; [<span class="type">String</span>]?</span><br><span class="line"><span class="comment">//è¦æ±‚æ•°æ®æºè¿”å›è¡¨è§†å›¾éƒ¨åˆ†çš„æ ‡é¢˜ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(UITableView, sectionForSectionIndexTitle: String, at: Int)</span></span> -&gt; <span class="type">Int</span></span><br><span class="line"><span class="comment">//è¦æ±‚æ•°æ®æºè¿”å›å…·æœ‰ç»™å®šæ ‡é¢˜å’ŒèŠ‚æ ‡é¢˜ç´¢å¼•çš„èŠ‚çš„ç´¢å¼•ã€‚</span></span><br></pre></td></tr></table></figure>
<h1 id="UITableViewController"><a href="#UITableViewController" class="headerlink" title="UITableViewController"></a>UITableViewController</h1><p>ä¸€ä¸ªç”¨äºä¸“é—¨ç®¡ç†UITableViewçš„æ§åˆ¶å™¨ã€‚</p>
<p>å½“æ¥å£ç”±è¡¨è§†å›¾å’Œå¾ˆå°‘æˆ–æ²¡æœ‰å…¶ä»–å†…å®¹ç»„æˆæ—¶ï¼Œå­ç±»UITableViewControllerã€‚è¡¨è§†å›¾æ§åˆ¶å™¨å·²ç»é‡‡ç”¨äº†ç®¡ç†è¡¨è§†å›¾å†…å®¹å’Œå“åº”æ›´æ”¹æ‰€éœ€çš„åè®®ã€‚æ­¤å¤–ï¼ŒUITableViewControllerå®ç°ä»¥ä¸‹è¡Œä¸ºï¼š</p>
<ul>
<li>å®ƒè‡ªåŠ¨åŠ è½½å­˜æ¡£åœ¨æ•…äº‹æ¿æˆ–NIBæ–‡ä»¶ä¸­çš„è¡¨è§†å›¾ã€‚ä½¿ç”¨TableViewå±æ€§è®¿é—®è¡¨è§†å›¾ã€‚</li>
<li>å®ƒå°†è¡¨è§†å›¾çš„æ•°æ®æºå’Œå§”æ‰˜è®¾ç½®ä¸ºselfã€‚</li>
<li>å®ƒå®ç°äº†<code>viewWillAppear(_:)</code>æ–¹æ³•ï¼Œå¹¶åœ¨ç¬¬ä¸€æ¬¡å‡ºç°æ—¶è‡ªåŠ¨ä¸ºå…¶è¡¨è§†å›¾é‡æ–°åŠ è½½æ•°æ®ã€‚æ¯æ¬¡æ˜¾ç¤ºè¡¨è§†å›¾æ—¶ï¼Œå®ƒéƒ½ä¼šæ¸…é™¤å…¶é€‰æ‹©ï¼ˆæœ‰åŠ¨ç”»æˆ–æ— åŠ¨ç”»ï¼Œå…·ä½“å–å†³äºè¯·æ±‚ï¼‰ï¼›æ‚¨å¯ä»¥é€šè¿‡æ›´æ”¹<code>ClearSSelectionOnView</code>å°†æ˜¾ç¤ºå±æ€§ä¸­çš„å€¼æ¥ç¦ç”¨æ­¤è¡Œä¸ºã€‚</li>
<li>å®ƒå®ç°äº†<code>viewDidAppear(_:)</code>ï¼Œå¹¶åœ¨è¡¨è§†å›¾ç¬¬ä¸€æ¬¡å‡ºç°æ—¶è‡ªåŠ¨é—ªçƒæ»šåŠ¨æŒ‡ç¤ºå™¨ã€‚</li>
<li>å®ƒå®ç°<code>setEditing(_:animated:)</code>æ–¹æ³•ï¼Œå¹¶åœ¨ç”¨æˆ·ç‚¹å‡»å¯¼èˆªæ ä¸­çš„ç¼–è¾‘å®ŒæˆæŒ‰é’®æ—¶è‡ªåŠ¨åˆ‡æ¢è¡¨çš„ç¼–è¾‘æ¨¡å¼ã€‚</li>
<li>å®ƒä¼šè‡ªåŠ¨è°ƒæ•´å…¶è¡¨è§†å›¾çš„å¤§å°ï¼Œä»¥é€‚åº”å±å¹•é”®ç›˜çš„å¤–è§‚æˆ–æ¶ˆå¤±ã€‚</li>
</ul>
<p>ä¸ºæ‰€ç®¡ç†çš„æ¯ä¸ªè¡¨è§†å›¾åˆ›å»ºUITableViewControllerçš„è‡ªå®šä¹‰å­ç±»ã€‚åˆå§‹åŒ–è¡¨è§†å›¾æ§åˆ¶å™¨æ—¶ï¼Œå¿…é¡»æŒ‡å®šè¡¨è§†å›¾çš„æ ·å¼ï¼ˆæ™®é€šæˆ–åˆ†ç»„ï¼‰ã€‚æ‚¨è¿˜å¿…é¡»é‡å†™æ•°æ®æºå’Œå§”æ‰˜æ–¹æ³•ï¼Œä»¥ä¾¿ç”¨æ•°æ®å¡«å……è¡¨ã€‚æ‚¨å¯ä»¥é‡å†™<code>loadView()</code>æˆ–ä»»ä½•å…¶ä»–è¶…ç±»æ–¹æ³•ï¼Œä½†å¦‚æœè¿™æ ·åšï¼Œè¯·ç¡®ä¿è°ƒç”¨è¯¥æ–¹æ³•çš„è¶…ç±»å®ç°ï¼Œé€šå¸¸ä½œä¸ºç¬¬ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ã€‚</p>
<h1 id="UITableViewçš„é™æ€å•å…ƒæ ¼"><a href="#UITableViewçš„é™æ€å•å…ƒæ ¼" class="headerlink" title="UITableViewçš„é™æ€å•å…ƒæ ¼"></a>UITableViewçš„é™æ€å•å…ƒæ ¼</h1><p>é™æ€å•å…ƒæ ¼ï¼šä¸ä¼šéšæ•°æ®çš„æ”¹å˜è€Œæ”¹å˜ï¼Œå½“åœ¨storyboardä¸­åˆ›å»ºå¥½åï¼Œæ˜¾ç¤ºçš„æ•°æ®å†…å®¹å’Œæ¨¡æ¿æ ·å¼éƒ½å›ºå®šä¸å˜ã€‚éœ€è¦ä¿®æ”¹ï¼Œåªèƒ½åœ¨storyboardä¸­ä¿®æ”¹ã€‚</p>
<p><strong>åœ¨storyboardæ–‡ä»¶ä¸­é…ç½®é™æ€è¡¨ï¼š</strong></p>
<ol>
<li>å°†<a href="https://developer.apple.com/documentation/uikit/uitableviewcontroller" target="_blank" rel="noopener"><code>UITableViewController</code></a>å¯¹è±¡æ·»åŠ åˆ°æ•…äº‹æ¿ã€‚</li>
<li>é€‰æ‹©è¡¨è§†å›¾æ§åˆ¶å™¨çš„è¡¨è§†å›¾ã€‚</li>
<li>å°†è¡¨è§†å›¾çš„â€œå†…å®¹â€å±æ€§ï¼ˆåœ¨â€œå±æ€§â€æ£€æŸ¥å™¨ä¸­ï¼‰æ›´æ”¹ä¸º<code>Static Cells</code>ã€‚</li>
<li>ä½¿ç”¨è¡¨è§†å›¾çš„Sectionså±æ€§æŒ‡å®šè¡¨çš„èŠ‚æ•°ã€‚</li>
<li>å°†æ¯ä¸ªéƒ¨åˆ†çš„Rowå±æ€§è®¾ç½®ä¸ºæ‰€éœ€çš„è¡Œæ•°ã€‚</li>
<li>ä½¿ç”¨æ‰€éœ€çš„è§†å›¾å’Œå†…å®¹é…ç½®æ¯ä¸ªå•å…ƒæ ¼ã€‚</li>
</ol>
<p><strong>æ³¨æ„</strong>ï¼šä¸èƒ½é€šè¿‡åœ¨UIViewä¸­æ‹–æ‹½UITableViewçš„æ–¹å¼æ¥ä½¿ç”¨é™æ€å•å…ƒæ ¼ï¼Œéœ€è¦åˆ›å»ºæ–°çš„UITableViewControllerï¼Œå¹¶åœ¨å±æ€§ä¸­å°†contentæ”¹ä¸ºStatic Cellsã€‚å¦åˆ™ä¼šæŠ¥è¯¥é”™è¯¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">error: Static table views are only valid when embedded <span class="keyword">in</span> UITableViewController instances [12]</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨é™æ€æ•°æ®çš„è¡¨è§†å›¾éœ€è¦ä¸€ä¸ª<a href="https://developer.apple.com/documentation/uikit/uitableviewcontroller" target="_blank" rel="noopener"><code>UITableViewController</code></a>å¯¹è±¡æ¥ç®¡ç†è¯¥æ•°æ®ã€‚</p>
<p><strong>å•å…ƒæ ¼Cellçš„Accessoryå±æ€§</strong></p>
<p>é€šè¿‡è®¾ç½®å•å…ƒæ ¼çš„Accessoryå±æ€§æ¥æ”¹å˜å•å…ƒæ ¼å³ä¾§çš„å›¾æ ‡æ ·å¼ï¼Œè¯¥å±æ€§åç§°ä¸ºaccessoryTypeï¼Œå®ƒæ˜¯ä¸€ä¸ªUITableViewCellAccessoryTypeç±»å‹çš„æšä¸¾ï¼Œæšä¸¾é‡ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">UITableViewCellAccessoryNone</span></span><br><span class="line">  <span class="comment">//å•å…ƒæ ¼å³ä¾§æ²¡æœ‰æ ‡å¿—</span></span><br><span class="line"><span class="built_in">UITableViewCellAccessoryDisclosureIndicator</span></span><br><span class="line">  <span class="comment">//å•å…ƒæ ¼å³ä¾§æœ‰å‘å³çš„å°ç®­å¤´æ ‡å¿—</span></span><br><span class="line"><span class="built_in">UITableViewCellAccessoryDetailDisclosureButton</span></span><br><span class="line">  <span class="comment">//å•å…ƒæ ¼å³ä¾§æœ‰ä¸€ä¸ªè¯¦ç»†ä¿¡æ¯æ ‡å¿—å’Œä¸€ä¸ªå‘å³å°ç®­å¤´æ ‡å¿—</span></span><br><span class="line"><span class="built_in">UITableViewCellAccessoryCheckmark</span></span><br><span class="line">  <span class="comment">//å•å…ƒæ ¼å³ä¾§æœ‰ä¸€ä¸ªå¯¹å‹¾æ ‡å¿—</span></span><br><span class="line"><span class="built_in">UITableViewCellAccessoryDetailButton</span></span><br><span class="line">  <span class="comment">//å•å…ƒæ ¼å³ä¾§æœ‰ä¸€ä¸ªè¯¦ç»†ä¿¡æ¯æ ‡å¿—</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>é€šè¿‡cellçš„<code>accessoryView</code>å±æ€§æ¥è‡ªå®šä¹‰è¾…åŠ©æŒ‡ç¤ºè§†å›¾,ä¼˜å…ˆçº§æ¯”<code>accessoryType</code>é«˜</p>
<p>å…³äºå®ƒçš„ä½¿ç”¨ï¼šå¦‚æœæŸä¸ªç•Œé¢ä»åŠ è½½å®Œæ¯•åå°±å§‹ç»ˆä¸ä¼šå˜åŒ–ï¼Œåˆ™å¯ä»¥ä½¿ç”¨é™æ€å•å…ƒæ ¼ã€‚å¦åˆ™åº”ä½¿ç”¨åŠ¨æ€å•å…ƒæ ¼ã€‚é™æ€å•å…ƒæ ¼æ˜¯åœ¨storyboardä¸­åˆ›å»ºçš„ï¼Œä½†æ˜¯å®ƒä»ç„¶æ˜¯å¯ä»¥äº¤äº’çš„ã€‚</p>
</blockquote>
<h2 id="æ¡ˆä¾‹1ï¼šä»¿ä¸€ä¸‹å¾®ä¿¡æˆ‘çš„"><a href="#æ¡ˆä¾‹1ï¼šä»¿ä¸€ä¸‹å¾®ä¿¡æˆ‘çš„" class="headerlink" title="æ¡ˆä¾‹1ï¼šä»¿ä¸€ä¸‹å¾®ä¿¡æˆ‘çš„"></a>æ¡ˆä¾‹1ï¼šä»¿ä¸€ä¸‹å¾®ä¿¡æˆ‘çš„</h2><p><img src="wechatme.jpeg" alt></p>
<p>åœ¨storyboardä¸­åˆ›å»ºä¸€ä¸ªUItableViewControllerï¼Œå¹¶å°†TableViewçš„ç±»å‹è®¾ç½®ä¸º<code>static cells</code>,å¹¶è®¾ç½®èŠ‚æ•°ï¼š</p>
<p><img src="staticlizi1.png" alt></p>
<p>å°†TableVIewçš„æ ·å¼è®¾ç½®ä¸ºGroupï¼š</p>
<p><img src="staticlizi6.png" alt></p>
<p>æ·»åŠ <code>TableViewCell</code>ï¼š</p>
<p><img src="staticlizi2.png" alt></p>
<p>è®¾ç½®<code>TableViewCell</code>çš„æ ·å¼ï¼Œæ¡ˆä¾‹è®¾ç½®ä¸ºBasicå³å¯ã€‚</p>
<p><img src="staticlizi3.png" alt></p>
<p>è®¾ç½®æ ‡é¢˜ï¼Œå›¾ç‰‡ï¼Œé…ç½®æ¯èŠ‚ä¸­çš„è¡Œæ•°ã€‚è®¾ç½®å®Œåçš„æ ·å¼ï¼š</p>
<p><img src="staticlizi4.png" alt></p>
<p>ä¹Ÿå¯ä»¥é…ç½®ä¸€ä¸‹section headerçš„é«˜åº¦</p>
<p><img src="staticlizi5.png" alt></p>
<p>å¦‚æœéœ€è¦è®¾ç½®å°ç®­å¤´åˆ™å¯ä»¥é€‰æ‹©Accessoryå±æ€§</p>
<p><img src="staticlizi8.png" alt></p>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="staticlizi7.png" alt></p>
<h2 id="æ¡ˆä¾‹2ï¼šä»¿è®¾ç½®"><a href="#æ¡ˆä¾‹2ï¼šä»¿è®¾ç½®" class="headerlink" title="æ¡ˆä¾‹2ï¼šä»¿è®¾ç½®"></a>æ¡ˆä¾‹2ï¼šä»¿è®¾ç½®</h2><p>æˆ‘ä»¬é€šå¸¸ä¼šåœ¨ä¸€äº›appä¸­çœ‹åˆ°ä¸€äº›è®¾ç½®ç•Œé¢ï¼Œä¸€èˆ¬éƒ½ä¼šä½¿ç”¨é™æ€å•å…ƒæ ¼æ¥å®ç°ï¼Œä½†æ˜¯æ¥çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼Œ</p>
<p><img src="staticlizi22.png" alt></p>
<p>å¯ä»¥çœ‹åˆ°æ¨é€æŒ‰é’®æ˜¯ç»è¿‡ä¸€äº›åŠ¨æ€å˜åŒ–çš„ï¼Œé‚£ä¹ˆå¦‚ä½•ç”¨é™æ€å•å…ƒæ ¼å®ç°å‘¢ï¼Œæ¥ä»¿é€ ä¸€ä¸‹ã€‚</p>
<p>åœ¨storyboardä¸­ï¼Œä½¿ç”¨UITableViewControllerè¿›è¡Œå›¾ä¸­çš„è®¾ç½®</p>
<p><img src="staticlizi23.png" alt></p>
<p>ç„¶åæ–°å»ºä¸€ä¸ªSettingTableViewControllerï¼Œåœ¨storyboardä¸­å°†controlleræŒ‡å‘è¯¥ç±»ï¼Œå®ç°ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SettingTableViewController</span>: <span class="title">UITableViewController</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">var</span> cell: <span class="type">UITableViewCell!</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="keyword">let</span> settingswitch = <span class="type">UISwitch</span>(frame: .zero)</span><br><span class="line">        settingswitch.isOn = <span class="literal">true</span></span><br><span class="line">        cell.detailTextLabel?.isHidden = settingswitch.isOn</span><br><span class="line">        settingswitch.addTarget(<span class="keyword">self</span>, action: #selector(onSwitch(sender:)), <span class="keyword">for</span>: <span class="type">UIControl</span>.<span class="type">Event</span>.valueChanged)</span><br><span class="line">        cell.accessoryView = settingswitch</span><br><span class="line">        <span class="comment">// Uncomment the following line to preserve selection between presentations</span></span><br><span class="line">        <span class="comment">// self.clearsSelectionOnViewWillAppear = false</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Uncomment the following line to display an Edit button in the navigation bar for this view controller.</span></span><br><span class="line">        <span class="comment">// self.navigationItem.rightBarButtonItem = self.editButtonItem</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">onSwitch</span><span class="params">(sender: UISwitch)</span></span> &#123;</span><br><span class="line">        cell.detailTextLabel?.isHidden = sender.isOn</span><br><span class="line">        <span class="keyword">if</span> sender.isOn &#123;</span><br><span class="line">            cell.detailTextLabel?.text = <span class="literal">nil</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            cell.detailTextLabel?.text = <span class="string">"ä½ å¯èƒ½é”™è¿‡é‡è¦é€šçŸ¥ï¼Œç‚¹å‡»æ‰“å¼€"</span></span><br><span class="line">        &#125;</span><br><span class="line">        cell.layoutSubviews()</span><br><span class="line"><span class="comment">//        print(cell.detailTextLabel?.text)</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<p><img src="staticlizi24.png" alt></p>
<h1 id="UITableViewçš„åŠ¨æ€å•å…ƒæ ¼"><a href="#UITableViewçš„åŠ¨æ€å•å…ƒæ ¼" class="headerlink" title="UITableViewçš„åŠ¨æ€å•å…ƒæ ¼"></a>UITableViewçš„åŠ¨æ€å•å…ƒæ ¼</h1><p>ä½¿ç”¨è¡¨æ ¼ï¼ˆ<strong>UITableView</strong>ï¼‰æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å…¶é‡‡ç”¨é™æ€å•å…ƒæ ¼ï¼ˆ<strong>Static Cell</strong>ï¼‰è¿˜æ˜¯åŠ¨æ€å•å…ƒæ ¼ï¼ˆ<strong>Dynamic Cell</strong>ï¼‰ã€‚å‰è€…ä½¿ç”¨æ–¹ä¾¿ï¼Œä½†æ˜¯åè€…æ›´åŠ çµæ´»ã€‚ä¸Šé¢å·²ç»æŠŠä¸€äº›éœ€è¦ç”¨åˆ°çš„åè®®ï¼Œç±»å·²ç»ä»‹ç»äº†ä¸€éã€‚è¿™é‡Œæˆ‘ä»¬ç”¨æ¡ˆä¾‹æ¥å®æˆ˜ä¸€éã€‚</p>
<p>å‡å¦‚è¿™é‡Œæˆ‘ä»¬æœ‰ä¸€æ‰¹è‹±é›„è”ç›Ÿè‹±é›„çš„æ•°æ®ï¼Œå­˜æ”¾åœ¨é¡¹ç›®é‡Œï¼Œæ˜¯ä¸€ä¸ªplistæ–‡ä»¶ã€‚</p>
<p><img src="dataplist.png" alt></p>
<p>å»ºç«‹ä¸€ä¸ªæ¨¡å‹Heroç±»</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Hero</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String?</span></span><br><span class="line">    <span class="keyword">var</span> icon: <span class="type">String?</span></span><br><span class="line">    <span class="keyword">var</span> intro: <span class="type">String?</span></span><br><span class="line">    <span class="keyword">var</span> url: <span class="type">String?</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(dict: [<span class="type">String</span>: <span class="type">AnyObject</span>]) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name = dict[<span class="string">"name"</span>] <span class="keyword">as</span>? <span class="type">String</span></span><br><span class="line">        <span class="keyword">self</span>.icon = dict[<span class="string">"icon"</span>] <span class="keyword">as</span>? <span class="type">String</span></span><br><span class="line">        <span class="keyword">self</span>.intro = dict[<span class="string">"intro"</span>] <span class="keyword">as</span>? <span class="type">String</span></span><br><span class="line">        <span class="keyword">self</span>.url = dict[<span class="string">"url"</span>] <span class="keyword">as</span>? <span class="type">String</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸ä½¿ç”¨<code>UITableViewController</code>ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>UIViewController</code>æ¥å»ºç«‹ä¸€ä¸ª<code>UITableViewController</code>ã€‚å¹¶å®ç°<code>UITableViewDelegate</code>, <code>UITableViewDataSource</code>åè®®ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DymViewController</span>: <span class="title">UIViewController</span>, <span class="title">UITableViewDelegate</span>, <span class="title">UITableViewDataSource</span></span></span><br></pre></td></tr></table></figure>
<p>æ–°å»ºä¸€ä¸ª<code>UITableView</code>æˆå‘˜å˜é‡ï¼Œå¹¶åœ¨viewDIdLoadåˆå§‹åŒ–ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">var</span> tableview: <span class="type">UITableView!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">  <span class="comment">//å¦‚æœä¸æŒ‡å®štableViewçš„æ ·å¼ï¼Œåˆ™é»˜è®¤ä½¿ç”¨UITableViewStylePlainæ ·å¼ã€‚</span></span><br><span class="line">  <span class="keyword">self</span>.tableview = <span class="type">UITableView</span>(frame: <span class="keyword">self</span>.view.frame, style: <span class="type">UITableView</span>.<span class="type">Style</span>.plain);</span><br><span class="line">  <span class="keyword">self</span>.tableview.delegate = <span class="keyword">self</span>;</span><br><span class="line">  <span class="keyword">self</span>.tableview.dataSource = <span class="keyword">self</span>;</span><br><span class="line">  <span class="keyword">self</span>.view.addSubview(<span class="keyword">self</span>.tableview)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ–°å»ºä¸€ä¸ªdataç±»æ¥ç®¡ç†ç”¨äºå±•ç¤ºUITableViewçš„æ•°æ®ç±»</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> data: [<span class="type">Hero</span>] &#123;</span><br><span class="line">  <span class="keyword">let</span> plistdata = <span class="type">NSArray</span>(contentsOfFile: <span class="type">Bundle</span>.main.path(forResource: <span class="string">"heros"</span>, ofType: <span class="string">"plist"</span>)!)!</span><br><span class="line">  <span class="keyword">var</span> heros: [<span class="type">Hero</span>] = [<span class="type">Hero</span>]()</span><br><span class="line">  <span class="keyword">var</span> hero: <span class="type">Hero</span></span><br><span class="line">  <span class="keyword">for</span> item <span class="keyword">in</span> plistdata &#123;</span><br><span class="line">    hero = <span class="type">Hero</span>(dict: item <span class="keyword">as</span>! [<span class="type">String</span>: <span class="type">AnyObject</span>])</span><br><span class="line">    heros.append(hero)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> heros</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ç°UITableVIewDataSourceé‡è¦çš„ä¸¤ä¸ªåè®®æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> data.<span class="built_in">count</span>;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, cellForRowAt indexPath: IndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</span><br><span class="line">  <span class="comment">//åˆ›å»ºæ ·å¼ä¸ºBasicçš„UItableViewCell</span></span><br><span class="line">  <span class="keyword">let</span> cell = <span class="type">UITableViewCell</span>(style: <span class="type">UITableViewCell</span>.<span class="type">CellStyle</span>.subtitle, reuseIdentifier: <span class="literal">nil</span>)</span><br><span class="line">  cell.imageView?.image = <span class="type">UIImage</span>(named: data[indexPath.row].icon!)</span><br><span class="line">  cell.textLabel?.text = data[indexPath.row].name</span><br><span class="line">  cell.detailTextLabel?.text = data[indexPath.row].intro</span><br><span class="line">  <span class="keyword">return</span> cell;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="dymlizi1.png" alt></p>
<blockquote>
<p>æ€§èƒ½ä¼˜åŒ–åœ¨è¿™é‡Œä¸è€ƒè™‘</p>
</blockquote>
<p><strong>ä½†æ˜¯è‹±é›„ä¹Ÿæœ‰åˆ†ç±»ï¼Œæ¯”å¦‚æœ‰æˆ˜å£«ã€æ³•å¸ˆã€å°„æ‰‹ç­‰çš„åˆ†ç±»ï¼Œæˆ‘ä»¬å†ä¿®æ”¹ä¸€ä¸‹plistçš„æ–‡ä»¶ã€‚</strong></p>
<p><img src="dymlizi2.png" alt></p>
<p>å†æ–°å»ºä¸€ä¸ªplistå­˜æ”¾å½’ç±»çš„è¯‘æ–‡ã€‚</p>
<p><img src="dymlizi3.png" alt></p>
<p>æ–°å»ºä¸€ä¸ªDymGroupViewControllerï¼Œè¿™é‡Œä¸åœ¨åŸæ¥ä»£ç ä¿®æ”¹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DymGroupViewController</span>: <span class="title">UIViewController</span>, <span class="title">UITableViewDelegate</span>, <span class="title">UITableViewDataSource</span></span></span><br></pre></td></tr></table></figure>
<p>æ–°å»ºä¸€ä¸ª<code>UITableView</code>æˆå‘˜å˜é‡ï¼Œå¹¶åœ¨viewDIdLoadåˆå§‹åŒ–ã€‚è¿™é‡Œæ³¨æ„ï¼ŒTableViewçš„æ ·å¼è¦åšæ”¹å˜ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">var</span> tableview: <span class="type">UITableView!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">  <span class="comment">//å¦‚æœä¸æŒ‡å®štableViewçš„æ ·å¼ï¼Œåˆ™é»˜è®¤ä½¿ç”¨UITableViewStylePlainæ ·å¼ã€‚</span></span><br><span class="line">  <span class="keyword">self</span>.tableview = <span class="type">UITableView</span>(frame: <span class="keyword">self</span>.view.frame, style: <span class="type">UITableView</span>.<span class="type">Style</span>.grouped);</span><br><span class="line">  <span class="keyword">self</span>.tableview.delegate = <span class="keyword">self</span>;</span><br><span class="line">  <span class="keyword">self</span>.tableview.dataSource = <span class="keyword">self</span>;</span><br><span class="line">  <span class="keyword">self</span>.view.addSubview(<span class="keyword">self</span>.tableview)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„æ•°æ®è·å–ä¹Ÿæœ‰å¾ˆå¤§çš„æ”¹åŠ¨</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ†ç±»keyæ•°ç»„ï¼šä¾‹å¦‚Supportã€Tank</span></span><br><span class="line"><span class="keyword">var</span> categoryname: [<span class="type">String</span>] &#123;</span><br><span class="line">  <span class="keyword">let</span> plistdata = <span class="type">NSDictionary</span>(contentsOfFile: <span class="type">Bundle</span>.main.path(forResource: <span class="string">"category"</span>, ofType: <span class="string">"plist"</span>)!)!</span><br><span class="line">  <span class="keyword">return</span> plistdata.allKeys <span class="keyword">as</span>! [<span class="type">String</span>]</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//å¯¹åº”åˆ†ç±»keyæ•°ç»„çš„è¯‘æ–‡ï¼šä¾‹å¦‚Supportå¯¹åº”è¾…åŠ©ï¼ŒTankå¯¹åº”å¦å…‹</span></span><br><span class="line"><span class="keyword">var</span> categoryvalue: [<span class="type">String</span>] &#123;</span><br><span class="line">  <span class="keyword">let</span> plistdata = <span class="type">NSDictionary</span>(contentsOfFile: <span class="type">Bundle</span>.main.path(forResource: <span class="string">"category"</span>, ofType: <span class="string">"plist"</span>)!)!</span><br><span class="line">  <span class="keyword">return</span> plistdata.allValues <span class="keyword">as</span>! [<span class="type">String</span>]</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//æ‰€æœ‰è‹±é›„æ•°æ®çš„å­˜æ”¾ï¼Œå¹¶åˆ†ç±»å­˜æ”¾äº†è‹±é›„çš„åˆ†ç±»ï¼Œå³ç”¨keyæ¥å­˜æ”¾å¯¹åº”ä¸€ä¸ªè‹±é›„çš„åˆ—è¡¨æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> data: [<span class="type">String</span>: <span class="type">Array</span>&lt;<span class="type">Hero</span>&gt;] &#123;</span><br><span class="line">  <span class="keyword">let</span> plistdata = <span class="type">NSDictionary</span>(contentsOfFile: <span class="type">Bundle</span>.main.path(forResource: <span class="string">"herosgroup"</span>, ofType: <span class="string">"plist"</span>)!)!</span><br><span class="line">  <span class="keyword">var</span> rd: [<span class="type">String</span>: <span class="type">Array</span>&lt;<span class="type">Hero</span>&gt;] = [<span class="type">String</span>: <span class="type">Array</span>&lt;<span class="type">Hero</span>&gt;]()</span><br><span class="line">  <span class="keyword">var</span> heros: [<span class="type">Hero</span>]</span><br><span class="line">  <span class="keyword">for</span> (items,value) <span class="keyword">in</span> plistdata &#123;</span><br><span class="line">    heros = [<span class="type">Hero</span>]()</span><br><span class="line">    <span class="keyword">var</span> hero: <span class="type">Hero</span></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> value <span class="keyword">as</span>! [[<span class="type">String</span>: <span class="type">AnyObject</span>]] &#123;</span><br><span class="line">      hero = <span class="type">Hero</span>(dict: item)</span><br><span class="line">      heros.append(hero)</span><br><span class="line">    &#125;</span><br><span class="line">    rd[items <span class="keyword">as</span>! <span class="type">String</span>] = heros</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> rd</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®å¥½å¯¹åº”çš„sectionæ•°å’Œå¯¹åº”sectionæ•°çš„è¡Œæ•°ï¼Œå¹¶è®¾ç½®section headerçš„æ ‡é¢˜ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„å±•ç¤º</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">numberOfSections</span><span class="params">(<span class="keyword">in</span> tableView: UITableView)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> categoryname.<span class="built_in">count</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹åº”æ¯ä¸ªåˆ†ç»„ä¸‹çš„è‹±é›„åˆ—è¡¨æ•°é‡</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, numberOfRowsInSection section: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> data[categoryname[section]]!.<span class="built_in">count</span></span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//åˆ—è¡¨çš„å±•ç¤º</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, cellForRowAt indexPath: IndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> cell: <span class="type">UITableViewCell</span> = <span class="type">UITableViewCell</span>(style: <span class="type">UITableViewCell</span>.<span class="type">CellStyle</span>.subtitle, reuseIdentifier: <span class="literal">nil</span>)</span><br><span class="line">  <span class="keyword">let</span> hero = data[categoryname[indexPath.section]]![indexPath.row]</span><br><span class="line">  cell.imageView?.image = <span class="type">UIImage</span>(named: hero.icon!)</span><br><span class="line">  cell.textLabel?.text = hero.name</span><br><span class="line">  cell.detailTextLabel?.text = hero.intro</span><br><span class="line">  <span class="keyword">return</span> cell</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, titleForHeaderInSection section: Int)</span></span> -&gt; <span class="type">String?</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> categoryvalue[section]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="dymlizi4.png" alt></p>
<p>åˆ°è¿™ä¸€æ­¥åï¼Œæˆ‘ä»¬ä¼šå‘ç°ç‚¹å‡»åˆ—è¡¨æ²¡æœ‰ååº”ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸‹è·³è½¬åˆ°ç½‘é¡µï¼Œè‹±é›„æ•°æ®é‡Œé¢æœ‰ä¸€ä¸ªurlå±æ€§å°±æ˜¯è·³è½¬çš„åœ°å€ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, didSelectRowAt indexPath: IndexPath)</span></span> &#123;</span><br><span class="line">  <span class="built_in">print</span>(indexPath.row, indexPath.section)</span><br><span class="line">  <span class="keyword">let</span> url = <span class="type">URL</span>(string: data[categoryname[indexPath.section]]![indexPath.row].url!)!</span><br><span class="line">  <span class="type">UIApplication</span>.shared.openURL(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è·³è½¬åæ•ˆæœï¼š</p>
<p><img src="dymlizi5.png" alt></p>
<h1 id="è‡ªå®šä¹‰UITableViewCell"><a href="#è‡ªå®šä¹‰UITableViewCell" class="headerlink" title="è‡ªå®šä¹‰UITableViewCell"></a>è‡ªå®šä¹‰UITableViewCell</h1><h2 id="é™æ€å•å…ƒæ ¼ä¸­ä½¿ç”¨è‡ªå®šä¹‰Cell"><a href="#é™æ€å•å…ƒæ ¼ä¸­ä½¿ç”¨è‡ªå®šä¹‰Cell" class="headerlink" title="é™æ€å•å…ƒæ ¼ä¸­ä½¿ç”¨è‡ªå®šä¹‰Cell"></a>é™æ€å•å…ƒæ ¼ä¸­ä½¿ç”¨è‡ªå®šä¹‰Cell</h2><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://developer.apple.com/documentation/uikit/uitableview" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/uitableview</a></p>
<p><a href="https://developer.apple.com/documentation/uikit/uitableviewdatasource" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/uitableviewdatasource</a></p>
<p><a href="https://developer.apple.com/documentation/uikit/uitableviewdelegate" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/uitableviewdelegate</a></p>
<p><a href="https://developer.apple.com/documentation/uikit/uitableviewcell" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/uitableviewcell</a></p>
<p><a href="https://developer.apple.com/documentation/uikit/views_and_controls/table_views/filling_a_table_with_data" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/views_and_controls/table_views/filling_a_table_with_data</a></p>
<p><a href="https://developer.apple.com/documentation/uikit/views_and_controls/table_views/configuring_the_cells_for_your_table" target="_blank" rel="noopener">https://developer.apple.com/documentation/uikit/views_and_controls/table_views/configuring_the_cells_for_your_table</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title>XcodeæŠ¥é”™ä¿®å¤Multiple commands produce</title>
    <url>/2019/07/13/Xcode%E6%8A%A5%E9%94%99%E4%BF%AE%E5%A4%8DMultiple-commands-produce/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>Xcodeç‰ˆæœ¬ï¼š10.2.1</strong></p>
<p>ä»Šå¤©å¯¼å…¥äº†ä¸€ä¸ªDemoé¡¹ç›®ï¼Œå‡ºç°äº†<strong>Multiple commands produce</strong>é”™è¯¯ï¼Œè®°å½•ä¸‹è§£å†³åŠæ³•ã€‚</p>
<a id="more"></a>
<p>Xcode10ä½¿ç”¨äº†ä¸€ä¸ªçš„æ–°åˆ›å»ºç³»ç»Ÿï¼Œæ¯”ä¹‹å‰çš„æä¾›æ›´å¥½çš„å¯é æ€§ä¸åˆ›å»ºæ€§èƒ½ï¼Œè€Œä¸”å¯ä»¥è·å–é¡¹ç›®é…ç½®é—®é¢˜ï¼ˆé»˜è®¤è®¾ç½®æ–°åˆ›å»ºç³»ç»Ÿï¼‰</p>
<blockquote>
<p>Build System</p>
<p>Again, Xcode 10 uses a new build system. The new build system provides improved reliability and build performance, and it catches project configuration problems that the legacy build system does not.<br>The legacy build system is still available in Xcode 10. To use the legacy build system, select it in the File &gt; Project/Workspace Settings sheet. Projects configured to use the legacy build system will display an orange hammer icon in the Activity View.</p>
</blockquote>
<p>åœ¨è‹¹æœæ–‡æ¡£ä¸­ï¼ŒæåŠXcode10ä¸­çš„å…³äºæ—§é¡¹ç›®New Build Systemæ›´æ”¹é€‚é…ä¸­æåŠåˆ°ä»¥ä¸‹ä¸¤ç‚¹</p>
<blockquote>
<p>The new build system has stricter checks for cycles between elements in the build in order to prevent unnecessary rebuilds.</p>
<p>It is an error for any individual file in the build to be produced by more than one build command. For example, if two targets each declare the same output file from a shell script phase, factor out the declaration of the output file into a single target.</p>
</blockquote>
<p>New Build Systemä¼šå¯¹æ„å»ºä¸­çš„å…ƒç´ å¾ªç¯è¿›è¡Œä¸¥æ ¼çš„æ£€æŸ¥ï¼Œé¿å…ä¸å¿…è¦çš„é‡å»ºï¼Œè¿™ä¸ªä¹Ÿæ˜¯é”™è¯¯å‡ºç°çš„åŸå› ã€‚</p>
<p><strong>é”™è¯¯ä¿¡æ¯</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">error: Multiple commands produce <span class="string">'/Users/zjyzy/Library/Developer/Xcode/DerivedData/UMengComDemo-eisszriydfvwtlgnymkievxxjndx/Build/Products/Debug-iphonesimulator/UMengComDemo.app/Info.plist'</span>:</span><br><span class="line">1) Target <span class="string">'UMengComDemo'</span> (project <span class="string">'UMengComDemo'</span>) has copy <span class="built_in">command</span> from <span class="string">'/Users/zjyzy/WorkPlace/xcode/AllDemo/test/MultiFunctioniOSDemo/UMengComDemo/Info.plist'</span> to <span class="string">'/Users/zjyzy/Library/Developer/Xcode/DerivedData/UMengComDemo-eisszriydfvwtlgnymkievxxjndx/Build/Products/Debug-iphonesimulator/UMengComDemo.app/Info.plist'</span></span><br><span class="line">2) Target <span class="string">'UMengComDemo'</span> (project <span class="string">'UMengComDemo'</span>) has process <span class="built_in">command</span> with output <span class="string">'/Users/zjyzy/Library/Developer/Xcode/DerivedData/UMengComDemo-eisszriydfvwtlgnymkievxxjndx/Build/Products/Debug-iphonesimulator/UMengComDemo.app/Info.plist'</span></span><br></pre></td></tr></table></figure>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li><p>ä¸ä½¿ç”¨<code>New Build System</code></p>
<p>æ‰“å¼€<code>Xcode</code> &gt; <code>File</code> &gt; <code>Project Setting</code></p>
<p><img src="fix1.png" alt></p>
<p>å°†<code>Build System</code>é€‰é¡¹é€‰æ‹©ä¸º<code>Legacy Build System</code>å³å¯ã€‚</p>
</li>
<li><p>æ ¹æ®å‡ºé”™ä¿¡æ¯ï¼Œåœ¨æ–°åˆ›å»ºç³»ç»Ÿæ¨¡å¼ä¸‹ï¼Œå»é™¤å¤šä½™çš„å¼•ç”¨é‡å»º</p>
<p><img src="fix2.png" alt></p>
<p>åœ¨<code>target</code> -&gt; <code>Build phase</code> &gt; <code>Copy Bundle Resource</code> ä¸­æ‰¾åˆ°<code>info.plist</code>ï¼Œç§»é™¤æ‰<code>info.plist</code>å³å¯ã€‚</p>
</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.jianshu.com/p/fdb1421f3c8b" target="_blank" rel="noopener">https://www.jianshu.com/p/fdb1421f3c8b</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>XcodeæŠ¥é”™ä¿®å¤SWIFT_VERSION '3.0' is unsupported, supported versions are:4.0,4.2,5.0</title>
    <url>/2019/07/13/Xcode%E6%8A%A5%E9%94%99%E4%BF%AE%E5%A4%8DSWIFT-VERSION-3-0-is-unsupported-supported-versions-are-4-0-4-2-5-0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>Xcodeç‰ˆæœ¬ï¼š10.2.1</strong></p>
<p>ä»Šå¤©å¯¼å…¥äº†ä¸€ä¸ªDemoé¡¹ç›®ï¼Œå‡ºç°äº†SWIFT_VERSION â€˜3.0â€™ is unsupported, supported versions are: 4.0, 4.2, 5.0.é”™è¯¯ï¼Œè®°å½•ä¸‹è§£å†³åŠæ³•ã€‚</p>
<a id="more"></a>
<p><img src="errorpic.png" alt></p>
<p><img src="errorpic2.png" alt></p>
<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>
<p>æ‰¾åˆ°å‘ç”Ÿé”™è¯¯çš„Targetï¼š</p>
<p><img src="fix1.png" alt></p>
<p><img src="fix2.png" alt></p>
<p>æ­¥éª¤ï¼š <code>${Target}</code> &gt;<code>Build Settings</code> &gt; <code>Swift Compiler - Language</code> &gt; <code>Swift Language Version</code>é€‰æ‹©æ”¯æŒçš„ç‰ˆæœ¬å³å¯ã€‚</p>
<p><img src="fix3.png" alt></p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.jianshu.com/p/bdfcb8759dee" target="_blank" rel="noopener">https://www.jianshu.com/p/bdfcb8759dee</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>Android Oåº”ç”¨å›¾æ ‡é€‚é…</title>
    <url>/2019/07/13/Android-O%E5%BA%94%E7%94%A8%E5%9B%BE%E6%A0%87%E9%80%82%E9%85%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Android 8.0ç°åœ¨å·²ç»å¾ˆæ™®åŠäº†ï¼Œç”šè‡³æœ‰çš„å‚å•†å·²ç»å¼€å§‹å‡çº§åˆ°Android Pï¼Œè‡³å°‘æˆ‘çš„ä¸‰æ˜Ÿä¸Šä¸ªæ˜ŸæœŸä¹Ÿæ˜¯7æœˆåˆå°±å¼€å§‹æ¨é€Android Pè®©æˆ‘æ›´æ–°è‡ªå·±çš„æ‰‹æœºç³»ç»Ÿäº†ï¼Œé‚£ä¹ˆåº”ç”¨å›¾æ ‡çš„é€‚é…å°±è‚¯å®šæ˜¯æ¿ä¸Šé’‰é’‰çš„äº‹æƒ…äº†ã€‚</p>
<a id="more"></a>
<h1 id="å‰æ™¯"><a href="#å‰æ™¯" class="headerlink" title="å‰æ™¯"></a>å‰æ™¯</h1><p><strong>æ‰‹æœºåº”ç”¨å›¾æ ‡çš„å†å²</strong>ï¼šå…¶å®è¦ä»è‹¹æœå¼€å§‹è®²èµ·ã€‚åœ¨ä¸Šä¸–çºª80å¹´ä»£ï¼Œè‹¹æœè¿˜åœ¨è®¾è®¡Lisaå’ŒMacintoshç”µè„‘çš„æ—¶å€™ï¼Œä¹”å¸ƒæ–¯å°±æ˜¯ä¸ªåœ†è§’çŸ©å½¢çš„ç‹‚çƒ­æ”¯æŒè€…ã€‚å½“æ—¶è‹¹æœçš„å·¥ç¨‹å¸ˆå†™å‡ºäº†ä¸€å¥—ç»å¦™çš„ç®—æ³•ï¼Œå¯ä»¥åœ¨ç”µè„‘ä¸Šç»˜åˆ¶å‡ºåœ†å’Œæ¤­åœ†ï¼Œæ‰€æœ‰è§‚çœ‹è€…éƒ½è¢«éœ‡æƒŠäº†ï¼Œé™¤äº†ä¹”å¸ƒæ–¯ï¼Œå› ä¸ºä¹”å¸ƒæ–¯è§‰å¾—åœ†å’Œæ¤­åœ†è™½ç„¶ä¹Ÿä¸é”™ï¼Œä½†æ˜¯å¦‚æœèƒ½ç»˜åˆ¶å‡ºå¸¦åœ†è§’çš„çŸ©å½¢å°±æ›´å¥½äº†ã€‚å½“æ—¶é‚£ä½å·¥ç¨‹å¸ˆè§‰å¾—è¿™æ˜¯ä¸å¯èƒ½å®ç°çš„ï¼Œè€Œä¸”ä¹Ÿå®Œå…¨ç”¨ä¸ç€åœ†è§’çŸ©å½¢ï¼Œèƒ½æ»¡è¶³åŸºæœ¬çš„ç»˜å›¾éœ€æ±‚å°±å¯ä»¥äº†ã€‚ä¹”å¸ƒæ–¯æ„¤æ€’åœ°æ‹‰ç€ä»–èµ°äº†3æ¡è¡—ï¼ŒæŒ‡å‡ºå¤§è¡—ä¸Šå„ç§åº”ç”¨åœ†è§’çŸ©å½¢çš„ä¾‹å­ï¼Œæœ€åé‚£ä½å·¥ç¨‹å¸ˆç¬¬äºŒå¤©å°±åšå‡ºäº†ç»˜åˆ¶åœ†è§’çŸ©å½¢çš„åŠŸèƒ½ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨2007å¹´ä¸€ä»£iPhoneè¯ç”Ÿçš„æ—¶å€™ï¼Œæ‰€æœ‰åº”ç”¨ç¨‹åºçš„å›¾æ ‡éƒ½æ¯«ä¸å‡ºä¹æ„æ–™åœ°ä½¿ç”¨äº†åœ†è§’çŸ©å½¢å›¾æ ‡ï¼Œå³ä½¿æ˜¯ç¬¬ä¸‰æ–¹åº”ç”¨ä¹Ÿè¢«å¼ºåˆ¶è¦æ±‚ä½¿ç”¨åœ†è§’çŸ©å½¢å›¾æ ‡ï¼Œå¹¶ä¸”è¿™ä¸€è§„åˆ™ä¸€ç›´å»¶ç»­åˆ°äº†ä»Šå¤©çš„iOS 11å½“ä¸­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="iosicon.jpg" alt></p>
<p>ç›¸åï¼ŒAndroidç³»ç»Ÿåœ¨è®¾è®¡çš„æ—¶å€™å°±ä¸å–œæ¬¢è‹¹æœè¿™æ ·çš„å°é—­ä¸å¼ºåˆ¶ï¼Œè€Œæ˜¯é€‰æ‹©äº†è‡ªç”±ä¸å¼€æ”¾ï¼Œå¯¹åº”ç”¨å›¾æ ‡çš„å½¢çŠ¶ä¸åšä»»ä½•å¼ºåˆ¶è¦æ±‚ï¼Œå¼€å‘è€…ä»¬å¯ä»¥è‡ªç”±è¿›è¡Œé€‰æ‹©ï¼š</p>
<p><img src="androidicon.jpg" alt></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨Androidä¸Šï¼Œåº”ç”¨å›¾æ ‡å¯ä»¥æ˜¯æ–¹å½¢ã€åœ†å½¢ã€åœ†è§’çŸ©å½¢ã€æˆ–è€…æ˜¯å…¶ä»–ä»»æ„ä¸è§„åˆ™å›¾å½¢ã€‚</p>
<p>æœ¬æ¥å°±æ˜¯ä¸¤å®¶å…¬å¸ä¸åŒçš„è®¾è®¡ç†å¿µï¼Œä¹Ÿè¯´ä¸ä¸Šå­°é«˜å­°ä½ã€‚ä½†ç”±äºAndroidæ“ä½œç³»ç»Ÿæ˜¯å¼€æºçš„ï¼Œå›½å†…ä¸€äº›æ‰‹æœºå‚å•†åœ¨å®šåˆ¶æ“ä½œç³»ç»Ÿçš„æ—¶å€™å°±æŠŠè¿™ä¸€ç‰¹æ€§ç»™æ”¹äº†ã€‚æ¯”å¦‚å°ç±³æ‰‹æœºï¼Œå°±é€‰æ‹©äº†å‘è‹¹æœé æ‹¢ï¼Œå¼ºåˆ¶è¦æ±‚åº”ç”¨å›¾æ ‡åœ†è§’åŒ–ã€‚å¦‚æœæŸäº›åº”ç”¨çš„å›¾æ ‡ä¸æ˜¯åœ†è§’çŸ©å½¢çš„å‘¢ï¼Ÿå°ç±³ç³»ç»Ÿä¼šè‡ªåŠ¨ç»™å®ƒåŠ ä¸Šä¸€ä¸ªåœ†è§’çš„æ•ˆæœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="miicon.jpg" alt></p>
<p>å°ç±³çš„è¿™ç§åšæ³•çœ‹ä¸Šå»æ˜¯å‘è‹¹æœå­¦ä¹ ï¼Œä½†å®é™…ä¸Šæ˜¯ç›¸å½“æ¶å¿ƒçš„ã€‚å› ä¸ºè°éƒ½å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™ç§è‡ªåŠ¨æ·»åŠ çš„åœ†è§’çŸ©å½¢éå¸¸ä¸‘ï¼Œå› æ­¤å¾ˆå¤šå…¬å¸å°±ç´¢æ€§ç›´æ¥å°†åº”ç”¨çš„å›¾æ ‡éƒ½è®¾è®¡æˆåœ†è§’çŸ©å½¢çš„ï¼Œæ­£å¥½Androidå’ŒiOSéƒ½ç”¨åŒä¸€å¥—å›¾æ ‡è¿˜çœäº‹äº†ã€‚</p>
<p>ä½†æ˜¯è¿™å°±è®©Googleä¸å¼€å¿ƒäº†ï¼Œè¿™ä¸æ˜¯å˜å‘å¼ºåˆ¶è¦æ±‚å¼€å‘è€…å¿…é¡»å°†å›¾æ ‡è®¾è®¡æˆåœ†è§’çŸ©å½¢å—ï¼Ÿäºæ˜¯åœ¨å»å¹´çš„Google I/Oå¤§ä¼šä¸Šï¼ŒGoogleç‚¹åæ‰¹è¯„äº†å°ç±³çš„è¿™ç§åšæ³•ï¼Œè¯´å…¶è¿åäº†Androidè‡ªç”±å’Œå¼€æ”¾çš„ç†å¿µã€‚</p>
<p>é™¤äº†å˜å‘å¼ºåˆ¶è¦æ±‚åº”ç”¨å›¾æ ‡åœ†è§’åŒ–ï¼Œå°ç±³çš„è¿™ç§å¤„ç†æ–¹å¼è¿˜æœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œå°±æ˜¯å¦‚æœåº”ç”¨å›¾æ ‡çš„åœ†è§’å¼§åº¦å’Œå°ç±³ç³»ç»Ÿè¦æ±‚çš„ä¸åŒï¼Œé‚£ä¹ˆä¼šå‡ºç°å¼‚å¸¸ä¸‘é™‹çš„æ•ˆæœã€‚</p>
<p><img src="miicon2.webp" alt></p>
<p>è¯¥é—®é¢˜ä¹Ÿå­˜åœ¨äº†éå¸¸ä¹‹ä¹…ï¼ŒGoogleå¤šå¹´æ¥å¯¹æ­¤ä¹Ÿæ˜¯çä¸€åªçœ¼é—­ä¸€åªçœ¼ã€‚ç»ˆäºåœ¨Android 8.0ç³»ç»Ÿä¸­ï¼ŒGoogleä¸‹å®šå†³å¿ƒè¦å¥½å¥½æ•´æ²»ä¸€ä¸‹Androidåº”ç”¨å›¾æ ‡çš„è§„èŒƒæ€§äº†ã€‚</p>
<blockquote>
<p>åŸæ–‡æ¥è‡ªéƒ­æ—</p>
</blockquote>
<h1 id="8-0ç³»ç»Ÿçš„åº”ç”¨å›¾æ ‡é€‚é…"><a href="#8-0ç³»ç»Ÿçš„åº”ç”¨å›¾æ ‡é€‚é…" class="headerlink" title="8.0ç³»ç»Ÿçš„åº”ç”¨å›¾æ ‡é€‚é…"></a>8.0ç³»ç»Ÿçš„åº”ç”¨å›¾æ ‡é€‚é…</h1><p>è¿™ä¸ªé—®é¢˜å¯¹äºGoogleæ¥è¯´è¿˜æ˜¯æŒºéš¾è§£å†³çš„ã€‚å› ä¸ºGoogleä¸€ç›´åœ¨å¼ºè°ƒè‡ªç”±ä¸å¼€æ”¾ï¼Œé‚£ä¹ˆå°ç±³å¼ºåˆ¶è¦æ±‚æ‰€æœ‰åº”ç”¨å›¾æ ‡éƒ½å¿…é¡»åœ†è§’åŒ–ä¹Ÿæ˜¯äººå®¶çš„è‡ªç”±å‘€ï¼Œä½ ä¸å‡†äººå®¶è¿™ä¹ˆå¹²æ˜¯ä¸æ˜¯æœ¬èº«å°±è¿èƒŒäº†è‡ªç”±å’Œå¼€æ”¾çš„ç†å¿µå‘¢ï¼Ÿå½“ç„¶æˆ‘ä»¬åœ¨è¿™é‡Œè®¨è®ºè¿™ä¸ªï¼Œæœ‰ç‚¹åƒè®¨è®ºå…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹çš„æ„Ÿè§‰ï¼Œä¸è¿‡Googleè¿˜æ˜¯æƒ³å‡ºäº†ä¸€å¥—å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ä»Android 8.0ç³»ç»Ÿå¼€å§‹ï¼Œåº”ç”¨ç¨‹åºçš„å›¾æ ‡è¢«åˆ†ä¸ºäº†ä¸¤å±‚ï¼šå‰æ™¯å±‚å’ŒèƒŒæ™¯å±‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡åº”ç”¨å›¾æ ‡çš„æ—¶å€™ï¼Œéœ€è¦å°†å‰æ™¯å’ŒèƒŒæ™¯éƒ¨åˆ†åˆ†ç¦»ï¼Œå‰æ™¯ç”¨æ¥å±•ç¤ºåº”ç”¨å›¾æ ‡çš„Logoï¼ŒèƒŒæ™¯ç”¨æ¥è¡¬æ‰˜åº”ç”¨å›¾æ ‡çš„Logoã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒèƒŒæ™¯å±‚åœ¨è®¾è®¡çš„æ—¶å€™åªå…è®¸å®šä¹‰é¢œè‰²å’Œçº¹ç†ï¼Œä½†æ˜¯ä¸èƒ½å®šä¹‰å½¢çŠ¶ã€‚</p>
<p>é‚£ä¹ˆåº”ç”¨å›¾æ ‡çš„å½¢çŠ¶ç”±è°æ¥å®šä¹‰å‘¢ï¼ŸGoogleå°†è¿™ä¸ªæƒåˆ©å°±äº¤ç»™æ‰‹æœºå‚å•†äº†ã€‚ä¸æ˜¯æœ‰äº›æ‰‹æœºå‚å•†å–œæ¬¢å­¦ä¹ è‹¹æœçš„åœ†è§’å›¾æ ‡å—ï¼Ÿæ²¡é—®é¢˜ï¼Œç”±äºåº”ç”¨å›¾æ ‡çš„è®¾è®¡åˆ†ä¸ºäº†ä¸¤å±‚ï¼Œæ‰‹æœºå‚å•†åªéœ€è¦åœ¨è¿™ä¸¤å±‚ä¹‹ä¸Šå†ç›–ä¸Šä¸€å±‚maskï¼Œè¿™ä¸ªmaskå¯ä»¥æ˜¯åœ†è§’çŸ©å½¢ã€åœ†å½¢æˆ–è€…æ˜¯æ–¹å½¢ç­‰ç­‰ï¼Œè§†å…·ä½“æ‰‹æœºå‚å•†è€Œå®šï¼Œå°±å¯ä»¥ç¬é—´è®©æ‰‹æœºä¸Šçš„æ‰€æœ‰åº”ç”¨å›¾æ ‡éƒ½å˜æˆç›¸åŒçš„è§„èŒƒã€‚åŸç†ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="oicon.gif" alt></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡ŒèƒŒæ™¯å±‚æ˜¯ä¸€å¼ è“è‰²çš„ç½‘æ ¼å›¾ï¼Œå‰æ™¯å±‚æ˜¯ä¸€å¼ Androidæœºå™¨äººLogoå›¾ï¼Œç„¶åç›–ä¸Šä¸€å±‚åœ†å½¢çš„maskï¼Œæœ€ç»ˆå°±è£å‰ªå‡ºäº†ä¸€å¼ åœ†å½¢çš„åº”ç”¨å›¾æ ‡ã€‚</p>
<p>å®˜æ–¹å‘½åä¸ºAdaptive Iconsã€‚</p>
<blockquote>
<p>å¦‚æœä½ çš„APPä¸­çš„targetSdkVersionæ˜¯ä½äº26çš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¸ç”¨è¿›è¡Œåº”ç”¨å›¾æ ‡é€‚é…ï¼ŒAndroid 8.0ç³»ç»Ÿä»ç„¶æ˜¯å‘ä¸‹å…¼å®¹çš„ã€‚ä½†æ˜¯å¦‚æœä½ å°†targetSdkVersionæŒ‡å®šåˆ°äº†26æˆ–è€…æ›´é«˜ï¼Œé‚£ä¹ˆAndroidç³»ç»Ÿå°±ä¼šè®¤ä¸ºä½ çš„APPå·²ç»åšå¥½äº†8.0ç³»ç»Ÿçš„é€‚é…å·¥ä½œï¼Œå½“ç„¶åŒ…æ‹¬äº†åº”ç”¨å›¾æ ‡çš„é€‚é…ã€‚(å›¾æ ‡ä¼šæœ‰ç‚¹ä¸‘)</p>
</blockquote>
<h1 id="é€‚é…æ–¹æ¡ˆ"><a href="#é€‚é…æ–¹æ¡ˆ" class="headerlink" title="é€‚é…æ–¹æ¡ˆ"></a>é€‚é…æ–¹æ¡ˆ</h1><p>Android Studio 3.0ä»¥ä¸Šçš„ç‰ˆæœ¬ä¸­å·²ç»å†…ç½®äº†8.0ç³»ç»Ÿåº”ç”¨å›¾æ ‡é€‚é…çš„åŠŸèƒ½ã€‚</p>
<p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶æŸ¥çœ‹appçš„gradleæ˜¯å¦å·²ç»å°†targetSdkVersionè®¾ç½®ä¸º26ã€‚</p>
<p>åœ¨æŸ¥çœ‹ä¸€ä¸‹AndroidManifest.xmlæ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">"@mipmap/ic_launcher"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:label</span>=<span class="string">"IconDemo"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:roundIcon</span>=<span class="string">"@mipmap/ic_launcher_round"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">"@style/AppTheme"</span>&gt;</span></span><br><span class="line">  //.....</span><br><span class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬éœ€è¦å…³æ³¨çš„ç‚¹æ˜¯android:iconè¿™ä¸ªå±æ€§ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å°†åº”ç”¨çš„å›¾æ ‡æŒ‡å®šä¸ºäº†mipmapç›®å½•ä¸‹çš„ic_launcheræ–‡ä»¶ã€‚</p>
<blockquote>
<p>è¿˜æœ‰ä¸€ä¸ªandroid:roundIconå±æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªåªé€‚ç”¨åœ¨Android 7.1ç³»ç»Ÿä¸Šçš„è¿‡æ¸¡ç‰ˆæœ¬ï¼Œå¾ˆå¿«å°±è¢«8.0ç³»ç»Ÿçš„åº”ç”¨å›¾æ ‡é€‚é…æ‰€æ›¿ä»£äº†ï¼Œæˆ‘ä»¬ä¸ç”¨å»ç®¡å®ƒã€‚</p>
</blockquote>
<p><img src="shipei1.png" alt></p>
<p>åœ¨å’Œä»¥å‰ç‰ˆæœ¬ä¸ä¸€æ ·çš„åœ°æ–¹å°±åœ¨äºå¤šäº†ä¸€ä¸ª<code>mipmap-anydpi-v26</code>çš„ç›®å½•ï¼Œè¯¥ç›®å½•ä¼šä½¿å¾—Android 8.0æˆ–ä»¥ä¸Šç³»ç»Ÿçš„æ‰‹æœºï¼Œéƒ½ä¼šä½¿ç”¨è¿™ä¸ªç›®å½•ä¸‹çš„ic_launcheræ¥ä½œä¸ºå›¾æ ‡ã€‚</p>
<p>mipmap-anydpi-v26ç›®å½•ä¸‹çš„ic_launcherå¹¶ä¸æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œè€Œæ˜¯ä¸€ä¸ªXMLæ–‡ä»¶ï¼Œæˆ‘ä»¬æ‰“å¼€è¿™ä¸ªæ–‡ä»¶çœ‹ä¸€ä¸‹ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">adaptive-icon</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">background</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/ic_launcher_background"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">foreground</span> <span class="attr">android:drawable</span>=<span class="string">"@drawable/ic_launcher_foreground"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">adaptive-icon</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ä¸ª8.0ç³»ç»Ÿåº”ç”¨å›¾æ ‡é€‚é…çš„æ ‡å‡†å†™æ³•ï¼Œåœ¨<code>&lt;adaptive-icon&gt;</code>æ ‡ç­¾ä¸­å®šä¹‰ä¸€ä¸ª<code>&lt;background&gt;</code>æ ‡ç­¾ç”¨äºæŒ‡å®šå›¾æ ‡çš„èƒŒæ™¯å±‚ï¼Œå®šä¹‰ä¸€ä¸ª<code>&lt;foreground&gt;</code>æ ‡ç­¾ç”¨äºæŒ‡å®šå›¾æ ‡çš„å‰æ™¯å±‚ã€‚</p>
<p>å†æ‰“å¼€ic_launcher_backgroundå’Œic_launcher_foregroundåï¼Œå‘ç°ä»–ä»¬åªæ˜¯ä¸€ä¸ªä½¿ç”¨SVGæ ¼å¼ç»˜åˆ¶å‡ºæ¥çš„å¸¦çº¹ç†çš„åº•å›¾ã€‚</p>
<blockquote>
<p>SVGæ ¼å¼çš„å›¾ç‰‡éƒ½æ˜¯ä½¿ç”¨AIã€PSç­‰å›¾åƒç¼–è¾‘è½¯ä»¶åˆ¶ä½œä¹‹åå¯¼å‡ºçš„ï¼ŒåŸºæœ¬æ²¡æœ‰äººå¯ä»¥æ‰‹å·¥ç¼–å†™SVGå›¾ç‰‡ã€‚</p>
</blockquote>
<p>ä¸€èˆ¬é¡¹ç›®ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨PNGã€JPGç­‰æ ¼å¼çš„å›¾ç‰‡ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªèƒŒæ™¯è‰²ä¹Ÿå¯ä»¥ã€‚</p>
<p><img src="runprev.png" alt></p>
<p>è¿™å°±æ˜¯ä¸€ä¸ªå‰æ™¯å±‚ç›–åœ¨èƒŒæ™¯å±‚ä¸Šï¼Œç„¶åå†è¢«åœ†å½¢maskè¿›è¡Œè£å‰ªä¹‹åçš„æ•ˆæœã€‚</p>
<h1 id="å¼€å§‹é€‚é…"><a href="#å¼€å§‹é€‚é…" class="headerlink" title="å¼€å§‹é€‚é…"></a>å¼€å§‹é€‚é…</h1><p>è¿™é‡Œçš„è¯æ‹¿æ¨ç‰¹çš„å›¾æ ‡ä½œä¸ºä¾‹å­ï¼Œæ¡ˆä¾‹å›¾åœ¨ä¸‹æ–¹ï¼š</p>
<p><img src="tuite.png" alt></p>
<p><img src="tuite_forge.png" alt></p>
<p>èƒŒæ™¯è‰²ç”¨PSæå–å‡ºæ¥çš„é¢œè‰²å€¼æ˜¯#1da2f2ã€‚</p>
<p>å›¾æ ‡å·²ç»å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬å¼€å§‹åšå›¾æ ‡é€‚é…äº†ï¼Œå›åˆ°é¡¹ç›®ä¸­ï¼Œç„¶åæŒ‰ä¸‹Windowsï¼šCtrl+Shift+A / Macï¼šcommand+shft+A å¿«æ·é”®ï¼Œå¹¶è¾“å…¥Image Assetï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="imageassets.png" alt></p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥å¯¹ç€app(module)ç›®å½•ä¸‹å³é”®æ–°å»º</p>
<p><img src="imageassetsother.png" alt></p>
<p>ç‚¹å‡»å›è½¦é”®æ‰“å¼€Asset Studioç¼–è¾‘å™¨ï¼Œåœ¨è¿™é‡Œå°±å¯ä»¥è¿›è¡Œåº”ç”¨å›¾æ ‡é€‚é…äº†ã€‚</p>
<p><img src="adapter1.png" alt></p>
<p>è¿™ä¸ªAsset Studioç¼–è¾‘å™¨éå¸¸ç®€å•å¥½ç”¨ï¼Œä¸€å­¦å°±ä¼šã€‚å·¦è¾¹æ˜¯æ“ä½œåŒºåŸŸï¼Œå³è¾¹æ˜¯é¢„è§ˆåŒºåŸŸã€‚</p>
<p>å…ˆæ¥çœ‹æ“ä½œåŒºåŸŸï¼Œç¬¬ä¸€è¡Œçš„<code>Icon Type</code>ä¸­é€‰æ‹©<code>Adaptive and Legacy</code>ï¼Œè¡¨ç¤ºåŒæ—¶åˆ›å»ºå…¼å®¹8.0ç³»ç»Ÿä»¥åŠè€ç‰ˆæœ¬ç³»ç»Ÿçš„åº”ç”¨å›¾æ ‡ã€‚ç¬¬äºŒè¡Œçš„Nameç”¨äºæŒ‡å®šåº”ç”¨å›¾æ ‡çš„åç§°ï¼Œè¿™é‡Œä¹Ÿä¿æŒé»˜è®¤å³å¯ã€‚æ¥ä¸‹æ¥çš„ä¸‰ä¸ªé¡µç­¾ï¼Œ<code>Foreground Layer</code>ç”¨äºç¼–è¾‘å‰æ™¯å±‚ï¼Œ<code>Background Layer</code>ç”¨äºç¼–è¾‘èƒŒæ™¯å±‚ï¼Œ<code>Legacy</code>ç”¨äºç¼–è¾‘è€ç‰ˆæœ¬ç³»ç»Ÿçš„å›¾æ ‡ã€‚</p>
<p>å†æ¥çœ‹é¢„è§ˆåŒºåŸŸï¼Œè¿™ä¸ªå°±ååˆ†ç®€å•äº†ï¼Œç”¨äºé¢„è§ˆåº”ç”¨å›¾æ ‡çš„æœ€ç»ˆæ•ˆæœã€‚åœ¨é¢„è§ˆåŒºåŸŸä¸­ç»™å‡ºäº†å¯èƒ½ç”Ÿæˆçš„å›¾æ ‡å½¢çŠ¶ï¼ŒåŒ…æ‹¬åœ†å½¢ã€åœ†è§’çŸ©å½¢ã€æ–¹å½¢ç­‰ç­‰ã€‚</p>
<p><strong>æ³¨æ„æ¯ä¸ªé¢„è§ˆå›¾æ ‡ä¸­éƒ½æœ‰ä¸€ä¸ªåœ†åœˆï¼Œè¿™ä¸ªåœ†åœˆå«ä½œå®‰å…¨åŒºåŸŸï¼Œå¿…é¡»è¦ä¿è¯å›¾æ ‡çš„å‰æ™¯å±‚å®Œå…¨å¤„äºå®‰å…¨åŒºåŸŸå½“ä¸­æ‰è¡Œï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°å›¾æ ‡è¢«æ‰‹æœºå‚å•†çš„maskè£å‰ªæ‰çš„æƒ…å†µã€‚</strong></p>
<p>æ”¾ä¸€å¼ GIFæ“ä½œè¿‡ç¨‹ï¼š(PS:å›¾æ¯”è¾ƒå¤§ï¼Œä¸å¤ªæ‡‚çš„å‹ç¼©)</p>
<p><img src="demo.gif" alt></p>
<p>Android Studioä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆé€‚é…8.0ç³»ç»Ÿçš„åº”ç”¨å›¾æ ‡ï¼Œä»¥åŠé€‚é…è€ç‰ˆæœ¬ç³»ç»Ÿçš„åº”ç”¨å›¾æ ‡ã€‚</p>
<p>æ¥çœ‹çœ‹è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="demo2.png" alt></p>
<p>è¿™é‡Œé€‚é…å°±å®Œæˆå•¦ã€‚</p>
<h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><p>Asset Studioè‡ªåŠ¨ç”Ÿæˆçš„ic_launcherå›¾æ ‡å’Œic_launcher_roundåˆ†è¾¨ç‡æ¯”è¾ƒä½ï¼Œåœ¨vivoå‚å•†ä¸Šæ¶åº”ç”¨è¿‡ç¨‹ä¸­è¢«æç¤ºå‡ºå°†å…¶æ›¿æ¢ä¸ºé«˜æ¸…å›¾æ ‡ï¼ŒæŒ‰ç…§vivoæç¤ºæ›¿æ¢å³å¯ã€‚</p>
<h1 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Layer Name - å›¾å±‚åç§°</span><br><span class="line">Resize - åˆ¶å®šå¤§å°</span><br><span class="line">Round Icon - ä»…é’ˆå¯¹android 7.1 iconå¤„ç†</span><br><span class="line">Google Play Store Icon - åœ¨google playå•†åº—ä¸­å±•ç¤ºå›¾æ ‡</span><br><span class="line">Icon Type - Launcher Icons(Legacy only)</span><br><span class="line">Asset Type - èµ„æºç±»å‹ï¼Œå¯é€‰å›¾ç‰‡ï¼Œå‰ªåˆ‡ç”»ï¼Œæ–‡æœ¬</span><br><span class="line">Path - èµ„æºè·¯å¾„</span><br><span class="line">Name - å¦‚æœæ‚¨ä¸æƒ³ä½¿ç”¨é»˜è®¤åç§°ï¼Œå¯ä»¥é”®å…¥ä¸€ä¸ªæ–°åç§°ã€‚å¦‚æœèµ„æºåç§°å·²åœ¨é¡¹ç›®ä¸­å­˜åœ¨ï¼ˆå‘å¯¼åº•éƒ¨å‡ºç°é”™è¯¯æç¤ºï¼‰ï¼Œå®ƒå°†è¢«è¦†ç›–ã€‚åç§°åªèƒ½åŒ…å«å°å†™å­—ç¬¦ã€ä¸‹åˆ’çº¿å’Œæ•°å­—ã€‚</span><br><span class="line">Trim - è¦è°ƒæ•´æºèµ„äº§ä¸­å›¾æ ‡å›¾å½¢ä¸è¾¹æ¡†ä¹‹é—´çš„è¾¹è·ï¼Œè¯·é€‰æ‹© Yesã€‚æ­¤æ“ä½œå°†ç§»é™¤é€æ˜ç©ºé—´ï¼ŒåŒæ—¶ä¿ç•™çºµæ¨ªæ¯”ã€‚è¦ä¿æŒæºèµ„äº§ä¸å˜ï¼Œè¯·é€‰æ‹© Noã€‚é»˜è®¤å€¼ä¸ºï¼šNo</span><br><span class="line">Padding - å¦‚æœæ‚¨æƒ³è¦è°ƒæ•´å…¨éƒ¨å››ä¾§çš„æºèµ„äº§å†…è¾¹è·ï¼Œè¯·ç§»åŠ¨æ»‘å—ã€‚é€‰æ‹© -10% å’Œ 50% ä¹‹é—´çš„å€¼ã€‚å¦‚æœæ‚¨ä¹Ÿé€‰æ‹©äº† Trimï¼Œåˆ™é¦–å…ˆä¼šè¿›è¡Œå‰ªè£ã€‚é»˜è®¤å€¼ä¸ºï¼š0%</span><br><span class="line">Foreground - è¦æ›´æ”¹ Clip Art æˆ– Text å›¾æ ‡çš„å‰æ™¯è‰²ï¼Œè¯·ç‚¹å‡»å­—æ®µã€‚åœ¨ Select Color å¯¹è¯æ¡†ä¸­ï¼ŒæŒ‡å®šé¢œè‰²ï¼Œç„¶åç‚¹å‡» Chooseã€‚å­—æ®µä¸­ä¼šæ˜¾ç¤ºæ–°å€¼ã€‚é»˜è®¤å€¼ä¸ºï¼š000000</span><br><span class="line">Background - è¦æ›´æ”¹èƒŒæ™¯è‰²ï¼Œè¯·ç‚¹å‡»å­—æ®µã€‚åœ¨ Select Color å¯¹è¯æ¡†ä¸­ï¼ŒæŒ‡å®šé¢œè‰²ï¼Œç„¶åç‚¹å‡» Chooseã€‚å­—æ®µä¸­ä¼šæ˜¾ç¤ºæ–°å€¼ã€‚é»˜è®¤å€¼ä¸ºï¼šFFFFFF</span><br><span class="line">Scaling - è¦é€‚åˆå›¾æ ‡å¤§å°ï¼Œè¯·é€‰æ‹© Crop æˆ– Shrink to Fitã€‚é€‰æ‹©è£å‰ªï¼Œå›¾åƒè¾¹ç¼˜ä¼šè¢«å‰ªåˆ‡ï¼›é€‰æ‹©ç¼©å‡ï¼Œå›¾åƒè¾¹ç¼˜ä¸ä¼šè¢«å‰ªåˆ‡ã€‚æºèµ„äº§ä»ç„¶ä¸åˆé€‚æ—¶ï¼Œå¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥è°ƒæ•´å†…è¾¹è·ã€‚é»˜è®¤å€¼ä¸ºï¼šShrink to Fit</span><br><span class="line">Shape - è¦ä¸ºæ‚¨çš„æºèµ„äº§æ·»åŠ èƒŒæ™¯ï¼Œè¯·é€‰æ‹©å½¢çŠ¶ï¼Œé€‰é¡¹åŒ…æ‹¬åœ†ã€æ­£æ–¹å½¢ã€ç«–ç›´çŸ©å½¢æˆ–æ°´å¹³çŸ©å½¢ã€‚è¦æƒ³ä½¿ç”¨é€æ˜çš„èƒŒæ™¯ï¼Œè¯·é€‰æ‹© Noneã€‚é»˜è®¤å€¼ä¸ºï¼šSquare</span><br><span class="line">Effect - å¦‚æœæ‚¨æƒ³è¦ä¸ºæ­£æ–¹å½¢æˆ–çŸ©å½¢çš„å³ä¸Šè§’æ·»åŠ æŠ˜è§’æ•ˆæœï¼Œè¯·é€‰æ‹© DogEarã€‚å¦‚æœä¸éœ€è¦ï¼Œè¯·é€‰æ‹© Noneã€‚é»˜è®¤å€¼ä¸ºï¼šNone</span><br></pre></td></tr></table></figure>
<p><a href="https://developer.android.com/studio/write/image-asset-studio?hl=zh-cn" target="_blank" rel="noopener">https://developer.android.com/studio/write/image-asset-studio?hl=zh-cn</a></p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://medium.com/google-design/understanding-android-adaptive-icons-cee8a9de93e2" target="_blank" rel="noopener">https://medium.com/google-design/understanding-android-adaptive-icons-cee8a9de93e2</a></p>
<p><a href="https://mp.weixin.qq.com/s/WxgHJ1stBjokPi6lTUd1Mg" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/WxgHJ1stBjokPi6lTUd1Mg</a></p>
<p><a href="https://developer.android.com/guide/practices/ui_guidelines/icon_design_adaptive" target="_blank" rel="noopener">https://developer.android.com/guide/practices/ui_guidelines/icon_design_adaptive</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³Android Studioâ€”â€”No toolchains found in the NDK toolchains folder for ABI with prefix: mips64el-linux-androidé”™è¯¯</title>
    <url>/2019/07/12/%E8%A7%A3%E5%86%B3Android-Studio%E2%80%94%E2%80%94No-toolchains-found-in-the-NDK-toolchains-folder-for-ABI-with-prefix-mips64el-linux-android%E9%94%99%E8%AF%AF/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä»Šå¤©å¯¼å…¥äº†ä¸€ä¸ªæ¯”è¾ƒè€ä¸€äº›çš„é¡¹ç›®ï¼ŒASä¸€ç›´æç¤ºå‡ºè¯¥é”™è¯¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">No toolchains found <span class="keyword">in</span> the NDK toolchains folder <span class="keyword">for</span> ABI with prefix: mips64el-linux-android</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>æŸ¥äº†ç½‘ä¸Šä¸€äº›è§£å†³åŠæ³•ï¼Œå¯ç”¨çš„åŠæ³•æ˜¯è¯¥åŠæ³•ï¼š</p>
<p><strong>è§£å†³æ–¹æ¡ˆ1ï¼š</strong></p>
<ol>
<li>ä¿®æ”¹build.gradleä¸­çš„Gradle Build Toolç‰ˆæœ¬ï¼Œæ”¹ä¸º3.1ä»¥åŠä»¥ä¸Šç‰ˆæœ¬</li>
<li>å°†Android Studioå‡çº§åˆ°3.1ä»¥åŠä»¥ä¸Šç‰ˆæœ¬</li>
</ol>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    classpath <span class="string">'com.android.tools.build:gradle:3.2.0'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>é—®é¢˜åŸå› ï¼š</strong></p>
<p>NDKçš„æ›´æ–°è®°å½•é‡Œæœ‰ä¸€æ®µè¯ï¼š</p>
<blockquote>
<p>This version of the NDK is incompatible with the Android Gradle plugin<br>version 3.0 or older. If you see an error like<br><code>No toolchains found in the NDK toolchains folder for ABI with prefix: mips64el-linux-android</code>,<br>update your project file to [use plugin version 3.1 or newer]. You will also<br>need to upgrade to Android Studio 3.1 or newer.</p>
</blockquote>
<p>å³æ–°ç‰ˆæœ¬çš„NDKä¸3.0åŠä»¥å‰æ—§ç‰ˆçš„Android Gradle pluginæ’ä»¶ä¸å…¼å®¹</p>
<p><strong>è§£å†³æ–¹æ¡ˆ2</strong></p>
<p>æ‰¾åˆ°NDKçš„é…ç½®ç›®å½•<code>File</code>-&gt;<code>Project Structure</code>-&gt;<code>SDK Location</code></p>
<p><img src="ndklocaltion.png" alt></p>
<p>æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿›å…¥åˆ°Android NDK Locationç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /Users/zjyzy/Library/Android/sdk/ndk-bundle</span><br></pre></td></tr></table></figure>
<p>åœ¨è¿›å…¥åˆ°toolchainsç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> toolchains</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥ï¼Œå³é…ç½®è½¯è¿æ¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ln -sf aarch64-linux-android-4.9 mips64el-linux-android</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æˆ–è€…ln -s arm-linux-androideabi-4.9 mipsel-linux-android</p>
</blockquote>
<p>å³å¯è§£å†³ã€‚</p>
<blockquote>
<p>åˆ é™¤åˆ™ç›´æ¥ä½¿ç”¨å‘½ä»¤<code>rm -rf mips64el-linux-android</code></p>
</blockquote>
<p><strong>è§£å†³æ–¹æ¡ˆ3</strong></p>
<p>å»Androidå®˜ç½‘ä¸‹è½½ï¼Œæ–¹æ¡ˆæœªå°è¯•ã€‚</p>
<p>æ”¾ä¸ªåˆ«äººçš„é“¾æ¥ï¼š<a href="https://blog.csdn.net/qq_24118527/article/details/82867864" target="_blank" rel="noopener">https://blog.csdn.net/qq_24118527/article/details/82867864</a></p>
<p><strong>è§£å†³æ–¹æ¡ˆ4</strong></p>
<blockquote>
<p>å‡çº§åˆ°Android Studio 3.1.2ç‰ˆæœ¬åï¼ŒåŸæœ‰çš„NDKç”±r16å‡çº§åˆ°r17ï¼Œå› ä¸ºr17ä¸å†æ”¯æŒmipsï¼Œå¯¼è‡´<code>ndk-bundle/toolchains/mips64el-linux-android-4.9/prebuilt/linux-x86_64/bin/mips64el-linux-android-strip</code> æ‰¾ä¸åˆ°, å¯¼è‡´ç¼–è¯‘æŠ¥ï¼š<strong>Error:org.gradle.process.internal.ExecException: A problem occurred starting process â€˜command â€˜â€¦\ndk-bundle\toolchains\aarch64-linux-android-4.9\prebuilt\windows-x86_64\bin\aarch64-linux-android-stripâ€™â€™</strong>ã€‚</p>
</blockquote>
<p>ç½‘ä¸Šæ‰¾åˆ°çš„è§£å†³åŠæ³•æ˜¯åˆ æ‰NDKæˆ–è€…é™çº§ä½¿ç”¨r16çš„NDKï¼Œè¿™å…¶å®æ˜¯æ²»æ ‡ä¸æ²»æœ¬çš„ï¼Œè¿™é‡Œçš„è§£å†³åŠæ³•æ˜¯åœ¨<code>build.gradle</code>è„šæœ¬é‡Œæ’é™¤mips</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">Â  Â  defaultConfig &#123;</span><br><span class="line">Â  Â  Â  Â  ndk &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="comment">//æ”¯æŒçš„CPUæ¶æ„ï¼Œå¦‚armeabiã€x86ã€mipsç­‰</span></span><br><span class="line">Â  Â  Â  Â  Â  Â  abiFilters <span class="string">"armeabi"</span>, <span class="string">"x86"</span></span><br><span class="line">Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  packagingOptions &#123;</span><br><span class="line">Â  Â  Â  Â  doNotStrip <span class="string">'*/mips/*.so'</span></span><br><span class="line">Â  Â  Â  Â  doNotStrip <span class="string">'*/mips64/*.so'</span></span><br><span class="line">Â  Â  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‚é˜…ï¼š<a href="https://stackoverflow.com/questions/42739916/aarch64-linux-android-strip-file-missing" target="_blank" rel="noopener">https://stackoverflow.com/questions/42739916/aarch64-linux-android-strip-file-missing</a></p>
<p><strong>æ€»ç»“</strong></p>
<p>å…¶å®ä¸»è¦æ˜¯å› ä¸ºé¡¹ç›®ä¸­NDK17åŠä»¥ä¸Šç‰ˆæœ¬å’ŒNDK16ç‰ˆæœ¬ä¸å†å…¼å®¹äº†ï¼Œå¦‚æœæ—§é¡¹ç›®ç¼–è¯‘ä¸é€šè¿‡å¹¶ä¸”è¿˜éœ€è¦æ”¯æŒmipså¯ä»¥é‡æ–°å†ä¸‹è½½ä¸€æ¬¡NDK16çš„ç¯å¢ƒã€‚</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Studio</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSä¹‹UIViewController</title>
    <url>/2019/07/10/IOS%E4%B9%8BUIViewController/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>UIViewControllerï¼ˆè§†å›¾æ§åˆ¶å™¨ï¼‰ï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯ MVC è®¾è®¡æ¨¡å¼ä¸­çš„æ§åˆ¶å™¨éƒ¨åˆ†ã€‚UIViewController åœ¨ UIKit ä¸­ä¸»è¦åŠŸèƒ½æ˜¯ç”¨äºæ§åˆ¶ç”»é¢çš„åˆ‡æ¢ï¼Œå…¶ä¸­çš„ <code>view</code> å±æ€§ï¼ˆUIView ç±»å‹ï¼‰ç®¡ç†æ•´ä¸ªç”»é¢çš„å¤–è§‚ã€‚</p>
<a id="more"></a>
<h1 id="UIViewControllerç”Ÿå‘½å‘¨æœŸ"><a href="#UIViewControllerç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="UIViewControllerç”Ÿå‘½å‘¨æœŸ"></a>UIViewControllerç”Ÿå‘½å‘¨æœŸ</h1><p>ç”¨ç½‘ä¸Šæ‹¿æ¥çš„ä¸€å¼ å›¾ï¼š</p>
<p><img src="lifecycle.jpg" alt></p>
<p>ViewController ç”Ÿå‘½å‘¨æœŸçš„ç¬¬ä¸€æ­¥æ˜¯åˆå§‹åŒ–ã€‚ä¸è¿‡å…·ä½“è°ƒç”¨çš„æ–¹æ³•è¿˜æœ‰æ‰€ä¸åŒã€‚å¦‚æœä½¿ç”¨ StoryBoard æ¥åˆ›å»º ViewControllerï¼Œæˆ‘ä»¬ä¸éœ€è¦æ˜¾å¼åœ°å»åˆå§‹åŒ–ï¼ŒStoryboard ä¼šè‡ªåŠ¨ä½¿ç”¨ <code>initWithCoder:</code> è¿›è¡Œåˆå§‹åŒ–ã€‚å¦‚æœä¸ä½¿ç”¨ StoryBoardï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>init:</code> å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œ<code>init:</code> å‡½æ•°åœ¨å®ç°è¿‡ç¨‹ä¸­è¿˜ä¼šè°ƒç”¨ <code>initWithNibName:bundle:</code>ã€‚ </p>
<blockquote>
<p>å°½é‡é¿å…åœ¨ VC å¤–éƒ¨è°ƒç”¨ <code>initWithNibName:bundle:</code>ï¼Œè€Œæ˜¯æŠŠå®ƒæ”¾åœ¨ VC çš„å†…éƒ¨ï¼ˆå‚è€ƒ<a href="https://stackoverflow.com/questions/2224077/when-should-i-initialize-a-view-controller-using-initwithnibname" target="_blank" rel="noopener">è¿™é‡Œ</a>ï¼‰ã€‚</p>
</blockquote>
<p>åˆå§‹åŒ–å®Œæˆåï¼ŒVC çš„ç”Ÿå‘½å‘¨æœŸä¼šç»è¿‡ä¸‹é¢å‡ ä¸ªå‡½æ•°ï¼š</p>
<ul>
<li><p>(void)loadView</p>
<p>æ­¤æ—¶ï¼Œæ§åˆ¶å™¨çš„ view è¿˜æœªåˆå§‹åŒ–ï¼Œå¯ä»¥é€šè¿‡é‡å†™è¿™ä¸ªæ–¹æ³•è‡ªå®šä¹‰æ§åˆ¶å™¨çš„ Viewï¼Œå¦‚æœè¿™æ ·åšï¼Œé‚£å°±ä¸èƒ½è°ƒç”¨<code>[super loadView]</code>ï¼ˆä¸Šé¢ä»£ç è°ƒç”¨æ˜¯ä¸ºäº†æ–¹ä¾¿æ‰“å°ï¼Œä¸ç„¶å±å¹•å°±æ˜¯é»‘çš„ï¼‰ã€‚</p>
</li>
<li><p>(void)viewDidLoad</p>
<p>åœ¨æ§åˆ¶å™¨çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå®ƒåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œæ­¤æ—¶ï¼Œview å·²ç»åˆå§‹åŒ–å¥½ï¼Œéå¸¸é€‚åˆåšä¸€äº›é¡µé¢çš„åˆå§‹åŒ–ä»»åŠ¡ã€‚ç”±äºæ­¤æ—¶ view çš„ bounds å°šæœªç¡®å®šï¼Œæ‰€ä»¥ä¸é€‚åˆå†™ frame ç±»å‹çš„å¸ƒå±€ä»£ç ï¼Œä½†æ˜¯ç»™è§†å›¾æ·»åŠ çº¦æŸæ²¡æœ‰å½±å“ã€‚</p>
</li>
<li><p>(void)viewWillAppear</p>
<p>å®ƒä¼šåœ¨æ§åˆ¶å™¨çš„è§†å›¾å°†è¦å‡ºç°åœ¨å±å¹•ä¸­æ—¶è¢«è°ƒç”¨ï¼Œåœ¨æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸä¸­å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡ã€‚åœ¨æ­¤å¤„ï¼Œé€‚åˆåšä¸€äº›ä¸è§†å›¾å‡ºç°ç›¸å…³è”çš„ä»»åŠ¡ï¼Œä¾‹å¦‚æ”¹å˜çŠ¶æ€æ çš„æ–¹å‘ã€é£æ ¼ã€‚</p>
</li>
<li><p>(void)viewWillLayoutSubviews</p>
<p>å½“ view çš„å­è§†å›¾å³å°†å¸ƒå±€æ—¶ï¼Œæ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œè§¦å‘çš„æ¡ä»¶æ˜¯ï¼š</p>
<ul>
<li>view è¢«æ·»åŠ åˆ°è§†å›¾å±‚æ¬¡ä¸­</li>
<li>view çš„ bounds å‘ç”Ÿäº†æ”¹å˜</li>
<li>è°ƒç”¨äº† <code>- setNeedsLayout</code>æ–¹æ³•</li>
<li>è°ƒç”¨äº† <code>- layoutIfNeeded</code>æ–¹æ³•</li>
</ul>
<p>è¿™ä¸ªæ–¹æ³•æ˜¯å†™ frame å¸ƒå±€ä»£ç çš„å¥½åœ°æ–¹ï¼Œå°† view çš„å­è§†å›¾å¸ƒå±€å¥½ï¼Œæ¯æ¬¡ view å¤§å°å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå…¶å­è§†å›¾å¸ƒå±€ä¹Ÿä¼šç›¸åº”æ”¹å˜ã€‚</p>
</li>
<li><p>(void)viewDidLayoutSubviews</p>
<p>å½“ view çš„å­è§†å›¾å·²ç»å¸ƒå±€æ—¶ï¼Œæ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œè§¦å‘æ¡ä»¶åŒä¸Šã€‚</p>
</li>
<li><p>(void)viewDidAppear</p>
<p>å®ƒä¼šåœ¨æ§åˆ¶å™¨çš„è§†å›¾å‡ºç°åœ¨å±å¹•åè¢«è°ƒç”¨ï¼Œæ­¤æ—¶ï¼Œview çš„ bounds å·²ç»ç¡®å®šï¼Œä¸è¿‡åœ¨è¿™é‡Œå†™å¸ƒå±€ç›¸å…³ä»£ç ï¼Œå¯èƒ½ä¼šåæ˜ åˆ°å±å¹•ä¸Šã€‚</p>
</li>
<li><p>(void)viewWillDisappear</p>
<p>è§†å›¾å³å°†ä»å±å¹•ä¸­æ¶ˆå¤±æ—¶è§¦å‘ã€‚</p>
</li>
<li><p>(void)viewDidDisappear</p>
<p>è§†å›¾ä»å±å¹•ä¸­æ¶ˆå¤±åè§¦å‘ã€‚</p>
</li>
</ul>
<p>ä»£ç æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)loadView</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">super</span> loadView];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewWillAppear:(<span class="built_in">BOOL</span>)animated</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillAppear:animated];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewWillLayoutSubviews</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillLayoutSubviews];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLayoutSubviews</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLayoutSubviews];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidAppear:(<span class="built_in">BOOL</span>)animated</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidAppear:animated];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewWillDisappear:(<span class="built_in">BOOL</span>)animated</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillDisappear:animated];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidDisappear:(<span class="built_in">BOOL</span>)animated</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillDisappear:animated];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, <span class="built_in">NSStringFromSelector</span>(_cmd));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Demo[3268:99911] loadView</span><br><span class="line">Demo[3268:99911] viewDidLoad</span><br><span class="line">Demo[3268:99911] viewWillAppear:</span><br><span class="line">Demo[3268:99911] viewWillLayoutSubviews</span><br><span class="line">Demo[3268:99911] viewDidLayoutSubviews</span><br><span class="line">Demo[3268:99911] viewDidAppear:</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯å•ä¸ªæ§åˆ¶å™¨æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ª AViewController(ç®€ç§° Avc) å’Œ BViewController (ç®€ç§° Bvc)ï¼Œé€šè¿‡ navigationController çš„ push å®ç° Avc åˆ° Bvc çš„è·³è½¬ï¼Œä¸‹é¢æ˜¯å„ä¸ªæ–¹æ³•çš„æ‰§è¡Œæ‰§è¡Œé¡ºåºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">A viewDidLoad  </span><br><span class="line">A viewWillAppear  </span><br><span class="line">A viewDidAppear  </span><br><span class="line">B viewDidLoad  </span><br><span class="line">A viewWillDisappear  </span><br><span class="line">B viewWillAppear  </span><br><span class="line">A viewDidDisappear  </span><br><span class="line">B viewDidAppear</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå†ä» Bvc è·³å› Avcï¼Œä¼šäº§ç”Ÿä¸‹é¢çš„æ‰§è¡Œé¡ºåºï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">B viewWillDisappear  </span><br><span class="line">A viewWillAppear  </span><br><span class="line">B viewDidDisappear  </span><br><span class="line">A viewDidAppear</span><br></pre></td></tr></table></figure>
<p>å¯è§ viewDidLoad åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œå†ç¬¬äºŒæ¬¡è·³å› Avc çš„æ—¶å€™ï¼ŒAViewController ä»ç„¶å­˜åœ¨äºå†…å­˜ä¸­ï¼Œä¹Ÿå°±ä¸éœ€è¦ load äº†ã€‚</p>
<p>æ³¨æ„ä¸Šé¢çš„ç”Ÿå‘½å‘¨æœŸä¸­éƒ½æ²¡æœ‰æåˆ°æœ‰å…³ ViewController é”€æ¯çš„å†…å®¹ï¼Œåœ¨ iOS 4 &amp; 5 ä¸­ ViewController ä¸­æœ‰ä¸€ä¸ª <code>viewDidUnload</code> æ–¹æ³•ã€‚å½“å†…å­˜ä¸è¶³ï¼Œåº”ç”¨æ”¶åˆ° Memory warning æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨å½“å‰æ²¡åœ¨ç•Œé¢ä¸Šçš„ ViewController çš„ <code>viewDidUnload</code>æ–¹æ³•ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™äº›æœªæ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šçš„ ViewController æ˜¯ UINavigationController Push æ ˆä¸­æœªåœ¨æ ˆé¡¶çš„ ViewControllerï¼Œä»¥åŠ UITabBarViewController ä¸­æœªæ˜¾ç¤ºçš„å­ ViewControllerã€‚è¿™äº› View Controller éƒ½ä¼šåœ¨ Memory Warning äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œè¢«ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ <code>viewDidUnload</code>æ–¹æ³•ã€‚</p>
<blockquote>
<p>ä» iOS 6 å¼€å§‹ï¼ŒviewDidUnload æ–¹æ³•è¢«åºŸå¼ƒæ‰äº†ï¼Œåº”ç”¨å—åˆ° memory warning æ—¶ä¹Ÿä¸ä¼šå†è°ƒç”¨ viewDidUnload æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡é‡è½½ <code>- (void)didReceiveMemoryWarning</code> å’Œ <code>-(void)dealloc</code> æ¥è¿›è¡Œæ¸…ç†å·¥ä½œã€‚</p>
</blockquote>
<h1 id="æ§åˆ¶å™¨-View-çš„åˆ›å»ºå’Œç”Ÿå‘½å‘¨æœŸ"><a href="#æ§åˆ¶å™¨-View-çš„åˆ›å»ºå’Œç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="æ§åˆ¶å™¨ View çš„åˆ›å»ºå’Œç”Ÿå‘½å‘¨æœŸ"></a>æ§åˆ¶å™¨ View çš„åˆ›å»ºå’Œç”Ÿå‘½å‘¨æœŸ</h1><p><img src="viewlife.png" alt></p>
<p>å›¾ä¸­æ§åˆ¶å™¨viewçš„åŠ è½½è¿‡ç¨‹ä¸­æœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„æ–¹æ³•ï¼šä¸€ä¸ªæ˜¯loadViewï¼Œå¦å¤–ä¸€ä¸ªæ˜¯viewDidLoadã€‚</p>
<p><strong>loadViewæ–¹æ³•</strong><br>ä½œç”¨ï¼šloadViewæ–¹æ³•æ˜¯ç”¨æ¥è´Ÿè´£åˆ›å»ºUIViewControllerçš„viewã€‚</p>
<p>é¦–å…ˆåˆ¤æ–­ä¸‹æœ‰æ²¡æœ‰æŒ‡å®šstoryboardæˆ–è€…xib,å¦‚æœæŒ‡å®š,å°±ä¼šåŠ è½½å®ƒä»¬æè¿°çš„æ§åˆ¶å™¨çš„view,å¦‚æœæ²¡æœ‰æŒ‡å®š,åˆ›å»ºä¸€ä¸ªç©ºçš„viewã€‚<br>ä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼šæ¯æ¬¡è®¿é—®UIViewControllerçš„viewï¼Œå½“viewä¸ºnilï¼Œå°±ä¼šè°ƒç”¨loadViewæ–¹æ³•ã€‚</p>
<p><strong>viewDidLoad</strong></p>
<p>ä½œç”¨ï¼šä¸€èˆ¬æˆ‘ä»¬ä¼šåœ¨è¿™é‡Œåšç•Œé¢ä¸Šçš„åˆå§‹åŒ–æ“ä½œï¼Œæ¯”å¦‚å¾€viewä¸­æ·»åŠ ä¸€äº›å­è§†å›¾ç­‰ã€‚<br>ä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼šæ¯å½“viewåˆ›å»ºå®Œæ¯•çš„æ—¶å€™ï¼Œæœ€ç»ˆéƒ½ä¼šè°ƒç”¨viewDidLoadæ–¹æ³•ã€‚</p>
<blockquote>
<ol>
<li>é€šè¿‡storyboardåˆ›å»ºçš„æ§åˆ¶å™¨ï¼Œæˆ–è€…é€šè¿‡xibåˆ›å»ºçš„æ§åˆ¶å™¨çš„viewï¼Œç³»ç»Ÿä¼šå¸®æˆ‘ä»¬åŠ è½½æ§åˆ¶å™¨çš„viewï¼Œå…·ä½“å†…éƒ¨å®ç°å¯ä»¥çœ‹<a href="https://link.juejin.im/?target=http%3A%2F%2Fwww.jianshu.com%2Fp%2Faf2a6a438a0a" target="_blank" rel="noopener">iOS-UIWindowè¯¦è§£</a>ï¼Œåœ¨æ­¤ä¸åœ¨èµ˜è¿°</li>
<li><code>ViewController *vc = [[ViewController alloc]init];</code><br>åº•å±‚ä¹Ÿä¼šè°ƒç”¨<code>-(instancetype)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil</code>æ–¹æ³•ã€‚<br>(1).åˆ¤æ–­ä¸‹æœ‰æ²¡æœ‰æŒ‡å®šnibName,å¦‚æœæŒ‡å®šäº†,å°±ä¼šå»åŠ è½½æŒ‡å®šçš„xib<br>(2).å¦‚æœæ²¡æœ‰æŒ‡å®š,å°±ä¼šåˆ¤æ–­ä¸‹æœ‰æ²¡æœ‰è·Ÿæ§åˆ¶å™¨ç±»ååŒåçš„xib,æœ‰,å°±ä¼šå»åŠ è½½<br>(3).åˆ¤æ–­ä¸‹æœ‰æ²¡æœ‰è·Ÿæ§åˆ¶å™¨ç±»ååŒåçš„xib,ä½†æ˜¯åç¼€ä¸å¸¦Controllerçš„xib,å¦‚æœæœ‰,å°±ä¼šå»åŠ è½½<br>(4).å¦‚æœæ²¡æœ‰ä»»ä½•xibæè¿°æ§åˆ¶å™¨çš„view,å°±ä¸ä¼šåŠ è½½xibã€‚ä¼šåˆ›å»ºä¸€ä¸ªé¢œè‰²ä¸ºclearColorçš„viewã€‚</li>
</ol>
</blockquote>
<h1 id="æ§åˆ¶å™¨viewåŠ è½½çš„å‡ ç§æ–¹å¼"><a href="#æ§åˆ¶å™¨viewåŠ è½½çš„å‡ ç§æ–¹å¼" class="headerlink" title="æ§åˆ¶å™¨viewåŠ è½½çš„å‡ ç§æ–¹å¼"></a>æ§åˆ¶å™¨viewåŠ è½½çš„å‡ ç§æ–¹å¼</h1><h2 id="é€šè¿‡storyboardåŠ è½½"><a href="#é€šè¿‡storyboardåŠ è½½" class="headerlink" title="é€šè¿‡storyboardåŠ è½½"></a>é€šè¿‡storyboardåŠ è½½</h2><p>å½“æ§åˆ¶å™¨é€šè¿‡storyboardåŠ è½½æ—¶ï¼Œéœ€è¦æŒ‡å®šstoryboardçš„åç§°ï¼Œæ§åˆ¶å™¨viewæœ€ç»ˆå°±æ˜¯storyboardæ‰€æè¿°çš„æ ·å­ï¼Œè¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œä¸åšè¯¦ç»†é˜è¿°</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">UIStoryboard</span> *storyboard = [<span class="built_in">UIStoryboard</span> storyboardWithName:<span class="string">@"TestViewController"</span> bundle:<span class="literal">nil</span>];</span><br><span class="line">TestViewController *testVC = [storyboard instantiateInitialViewController];</span><br><span class="line">[<span class="keyword">self</span>.navigationController pushViewController:testVC animated:<span class="literal">YES</span>];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¦è®°ä½åœ¨ attributes inspectorä¸­å°† Is Initial View Controlleré€‰é¡¹å‹¾ä¸Š</p>
</blockquote>
<p>æˆ–è€…è·å–æŒ‡å®šStoryboardä¸­Storyboard IDçš„æŸä¸ªViewControllerï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">UIStoryboard</span> *sb = [<span class="built_in">UIStoryboard</span> storyboardWithName:<span class="string">@"Main"</span> bundle:<span class="literal">nil</span>];</span><br><span class="line">SBIDTableViewController *mtvc = [sb instantiateViewControllerWithIdentifier:<span class="string">@"sbid"</span>];</span><br></pre></td></tr></table></figure>
<h2 id="é€šè¿‡xibåŠ è½½"><a href="#é€šè¿‡xibåŠ è½½" class="headerlink" title="é€šè¿‡xibåŠ è½½"></a>é€šè¿‡xibåŠ è½½</h2><p>å½“æ§åˆ¶å™¨viewé€šè¿‡xibåŠ è½½çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸‰ç§æƒ…å†µ</p>
<p><strong>1ã€æŒ‡å®šxibåç§°</strong></p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)touchesBegan:(<span class="built_in">NSSet</span>&lt;<span class="built_in">UITouch</span> *&gt; *)touches withEvent:(<span class="built_in">UIEvent</span> *)event&#123;</span><br><span class="line">  TestViewController *testVC = [[TestViewController alloc] initWithNibName:<span class="string">@"OtherViewController"</span> bundle:<span class="literal">nil</span>];</span><br><span class="line">  [<span class="keyword">self</span>.navigationController pushViewController:testVC animated:<span class="literal">YES</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬æŒ‡å®šäº†xibçš„åç§°ï¼ŒloadViewæ–¹æ³•å°±ä¼šå»åŠ è½½å¯¹åº”çš„xib</p>
<p><strong>2ã€ä¸æŒ‡å®šxibåç§°</strong></p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)touchesBegan:(<span class="built_in">NSSet</span>&lt;<span class="built_in">UITouch</span> *&gt; *)touches withEvent:(<span class="built_in">UIEvent</span> *)event&#123;</span><br><span class="line">  TestViewController *testVC = [[TestViewController alloc] init];</span><br><span class="line">  [<span class="keyword">self</span>.navigationController pushViewController:testVC animated:<span class="literal">YES</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“æ²¡æœ‰æŒ‡å®šxibåç§°ï¼Œåˆ†ä¸¤ç§æƒ…å†µï¼šå¦‚æœæœ‰æ§åˆ¶å™¨åŒåçš„xibåˆ™åŠ è½½ï¼Œä¾‹å¦‚TestViewControllerä¼šåŠ è½½TestViewController.xibã€‚å¦‚æœæ²¡æœ‰ä¸æ§åˆ¶å™¨åŒåçš„xibæ–‡ä»¶æ—¶ï¼Œä¼šåŠ è½½å‰ç¼€ä¸æ§åˆ¶å™¨åç›¸åŒè€Œä¸å¸¦controllerçš„xibï¼ˆTestView.xibï¼‰</p>
<p><strong>3ã€ä¸é€šè¿‡sb\xibåŠ è½½</strong></p>
<p>æŠŠxibå’Œsbæ–‡ä»¶éƒ½åˆ é™¤æ‰ï¼Œä»€ä¹ˆéƒ½ä¸åŠ è½½ã€‚åˆ™ä¼šé»˜è®¤åˆ›å»ºä¸€ä¸ªUIViewï¼Œè™½ç„¶æ˜¾ç¤ºä¸ºé»‘è‰²ï¼Œä½†å…¶å®è¯¥é¢œè‰²æ˜¯UIWindowçš„ã€‚</p>
<p><img src="zindex1.png" alt></p>
<p><strong>4ã€é‡å†™loadViewæ–¹æ³•</strong></p>
<p>é‡å†™æ§åˆ¶å™¨çš„loadViewæ–¹æ³•:</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)loadView&#123;</span><br><span class="line">  <span class="keyword">self</span>.view = [[<span class="built_in">UIImageView</span> alloc] init];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ§åˆ¶å™¨viewåŠ è½½å‡ºæ¥çš„æ—¶å€™å°±æ˜¯æˆ‘ä»¬è®¾ç½®çš„UIImageViewã€‚å¦‚æœé‡å†™è¯¥æ–¹æ³•é‡Œé¢ä»€ä¹ˆä¹Ÿä¸å†™ï¼Œå’Œä¸é€šè¿‡sb\xibåŠ è½½æ–¹å¼çš„è¿è¡Œç»“æœç›¸åŒã€‚ä¸è¿‡ä¸¤è€…åŒºåˆ«æ˜¯è¿™ç§æ–¹å¼å¹¶æ²¡æœ‰åˆ›å»ºUIViewã€‚</p>
<p><img src="zindex2.png" alt></p>
<p><strong>ç»“è®ºï¼š</strong></p>
<ul>
<li>é‡å†™loadViewæ–¹æ³•ï¼Œåˆ™ä¼šæ ¹æ®é‡å†™çš„loadViewæ–¹æ³•åˆ›å»ºview</li>
<li>æ§åˆ¶å™¨é€šè¿‡storyboardåŠ è½½ï¼Œåˆ™æ ¹æ®storyboardçš„æè¿°åˆ›å»ºview</li>
<li>æ§åˆ¶å™¨viewé€šè¿‡xibåŠ è½½ï¼Œåˆ™æ ¹æ®nibNameå¯¹åº”çš„xibåˆ›å»ºview</li>
<li>æ²¡æœ‰æŒ‡å®šnibNameï¼Œåˆ™æ ¹æ®ä¸æ§åˆ¶å™¨åŒåçš„xibåˆ›å»ºview</li>
<li>æ²¡æœ‰åŒåçš„xibï¼Œåˆ™æ ¹æ®ä¸æ§åˆ¶å™¨åå‰ç¼€ç›¸åŒä¸å¸¦controllerçš„xibåˆ›å»ºview</li>
<li>å¦‚æœéƒ½æ²¡æœ‰ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªç©ºç™½çš„xib</li>
<li>storyboardåŠ è½½çš„æ˜¯æ§åˆ¶å™¨åŠæ§åˆ¶å™¨viewï¼Œè€ŒxibåŠ è½½çš„ä»…ä»…åªæ˜¯æ§åˆ¶å™¨çš„view</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://hit-alibaba.github.io/interview/iOS/Cocoa-Touch/UIViewController.html" target="_blank" rel="noopener">https://hit-alibaba.github.io/interview/iOS/Cocoa-Touch/UIViewController.html</a></p>
<p><a href="http://blog.devtang.com/blog/2013/05/18/goodbye-viewdidunload/" target="_blank" rel="noopener">http://blog.devtang.com/blog/2013/05/18/goodbye-viewdidunload/</a></p>
<p><a href="https://www.jianshu.com/p/23a83706d773" target="_blank" rel="noopener">https://www.jianshu.com/p/23a83706d773</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
        <tag>Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidåº”ç”¨å†…ç¦æ­¢å±å¹•æˆªå›¾</title>
    <url>/2019/07/09/Android%E5%BA%94%E7%94%A8%E5%86%85%E7%A6%81%E6%AD%A2%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸€ä¸ªæ™šä¸Šåœ¨çœ‹äº†ä¸€ä¸‹å¾®ä¿¡çš„æ”¶ä»˜æ¬¾åŠŸèƒ½ï¼Œæƒ³æˆªä¸ªå›¾ï¼Œçªç„¶å‘ç°æç¤ºäº†ä¸€å¥<strong>ç”±äºå—å®‰å…¨æ”¿ç­–é™åˆ¶ï¼Œæ— æ³•æˆªå–å±å¹•æˆªå›¾</strong>ï¼Œå†ç ”ç©¶äº†ä¸€ä¸‹æ‰‹æœºçš„å…¶ä»–APPï¼Œä¸­å›½å»ºè®¾é“¶è¡ŒAPPä¸Šä¹Ÿæœ‰è¯¥æç¤ºï¼Œå‡ºäºå¥½å¥‡ï¼ŒæŸ¥é˜…äº†ä¸€ä¸‹è¯¥åŠŸèƒ½çš„å®ç°æ–¹å¼ã€‚</p>
<a id="more"></a>
<p>è¯¥åŠŸèƒ½çš„å®ç°æ–¹å¼å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨<code>setContentView</code>å‰åŠ ä¸Šä¸€å¥ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">getWindow().setFlags(WindowManager.LayoutParams.FLAG_SECURE, WindowManager.LayoutParams.FLAG_SECURE);</span><br></pre></td></tr></table></figure>
<p><img src="demo.jpeg" alt></p>
<p>Googleå®˜æ–¹å¯¹äº<a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SECURE" target="_blank" rel="noopener">FLAG_SECURE</a>çš„è§£é‡Šï¼š</p>
<blockquote>
<p>Display flag: Indicates that the display has a secure video output and supports compositing secure surfaces.</p>
<p>If this flag is set then the display device has a secure video output and is capable of showing secure surfaces. It may also be capable of showing <code>protected buffers</code>.</p>
<p>If this flag is not set then the display device may not have a secure video output; the user may see a blank region on the screen instead of the contents of secure surfaces or protected buffers.</p>
<p>Secure surfaces are used to prevent content rendered into those surfaces by applications from appearing in screenshots or from being viewed on non-secure displays. Protected buffers are used by secure video decoders for a similar purpose.</p>
<p>An application creates a window with a secure surface by specifying the <code>WindowManager.LayoutParams#FLAG_SECURE</code>window flag. Likewise, an application creates a <code>SurfaceView</code> with a secure surface by calling <code>SurfaceView#setSecure</code> before attaching the secure view to its containing window.</p>
<p>An application can use the absence of this flag as a hint that it should not create secure surfaces or protected buffers on this display because the content may not be visible. For example, if the flag is not set then the application may choose not to show content on this display, show an informative error message, select an alternate content stream or adopt a different strategy for decoding content that does not rely on secure surfaces or protected buffers.</p>
<p><strong>See also:</strong></p>
<ul>
<li><code>getFlags()</code></li>
</ul>
<p>Constant Value: 2 (0x00000002)</p>
</blockquote>
<p>åœ¨è®¾ç½®äº†è¯¥FLAGåï¼Œå‘ç°è¯¥FLAGè¿˜å¯ä»¥å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>é˜»æ­¢å±å¹•æˆªå›¾</li>
<li>åœ¨ä»»åŠ¡åˆ‡æ¢ç•Œé¢ä¸­ï¼ˆRecent appsï¼‰åªæ˜¾ç¤ºåº”ç”¨åå­—å’Œå›¾æ ‡ï¼Œä¸ä¼šæ˜¾ç¤ºAPPå…·ä½“å†…å®¹ã€‚</li>
</ul>
<p><strong>å‚è€ƒèµ„æ–™</strong></p>
<p><a href="https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SECURE" target="_blank" rel="noopener">https://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SECURE</a></p>
<p><a href="https://developer.android.com/reference/android/view/Display.html#FLAG_SECURE" target="_blank" rel="noopener">https://developer.android.com/reference/android/view/Display.html#FLAG_SECURE</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSä¹‹UIAlertControllerä½¿ç”¨</title>
    <url>/2019/07/08/IOS%E4%B9%8BUIAlertController%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å½“åº”ç”¨éœ€è¦å‘ç”¨æˆ·æç¤ºä¸€äº›é‡è¦ä¿¡æ¯æˆ–è€…æç¤ºç”¨æˆ·è¿›è¡Œé€‰æ‹©æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è­¦å‘Šæ¡†(Alert)æˆ–è€…æ“ä½œè¡¨(Action Sheet)æ¥è¿›è¡Œæç¤ºç”¨æˆ·ã€‚ä¸‹å›¾ä¸­å·¦ä¾§æ˜¯è­¦å‘Šæ¡†ï¼Œå³ä¾§æ˜¯æ“ä½œè¡¨ã€‚</p>
<a id="more"></a>
<p><img src="tip.png" alt></p>
<p>è‡ªiOS 8å¼€å§‹ï¼ŒAppleç”¨ç»§æ‰¿è‡ª<code>UIViewController</code>çš„<code>UIAlertController</code>å–ä»£äº†<code>UIAlertView</code>å’Œ<code>UIAlertSheet</code>ã€‚</p>
<p>è­¦æŠ¥æ§åˆ¶å™¨ï¼ˆUIAlertControllerï¼‰è™½ç„¶æœ‰è­¦å‘Šæ¡†å’Œæ“ä½œè¡¨ä¸¤ç§å½¢å¼ï¼Œä½†å…¶åˆ›å»ºæ­¥éª¤æ˜¯ä¸€æ ·çš„ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ol>
<li>åˆ›å»º<code>UIAlertController</code>ï¼ŒæŒ‡å®šè­¦æŠ¥æ§åˆ¶å™¨æ ·å¼ã€‚</li>
<li>å‘è­¦æŠ¥æ§åˆ¶å™¨æ·»åŠ æŒ‰é’®ã€‚</li>
<li>æ˜¾ç¤º<code>UIAlertController</code>ã€‚</li>
</ol>
<blockquote>
<p>â€œ UIAlertView is deprecated. Use UIAlertController with a preferredStyle of UIAlertControllerStyleAlert instead.â€</p>
<p>â€œUIActionSheet is deprecated. Use UIAlertController with a preferredStyle of UIAlertControllerStyleActionSheet instead. â€œ</p>
</blockquote>
<h1 id="åˆ›å»ºè­¦å‘Šæ¡†"><a href="#åˆ›å»ºè­¦å‘Šæ¡†" class="headerlink" title="åˆ›å»ºè­¦å‘Šæ¡†"></a>åˆ›å»ºè­¦å‘Šæ¡†</h1><h2 id="åˆ›å»ºè­¦å‘Šæ§åˆ¶å™¨"><a href="#åˆ›å»ºè­¦å‘Šæ§åˆ¶å™¨" class="headerlink" title="åˆ›å»ºè­¦å‘Šæ§åˆ¶å™¨"></a>åˆ›å»ºè­¦å‘Šæ§åˆ¶å™¨</h2><p>åˆ›å»º<code>UIAlertController</code>å¾ˆç®€å•ï¼Œä¸éœ€è¦è®¾ç½®ä»£ç†æˆ–è€…æŒ‡å®šæŒ‰é’®</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">UIAlertController</span> *alert = [<span class="built_in">UIAlertController</span> alertControllerWithTitle:<span class="string">@"æ ‡é¢˜"</span> message:<span class="string">@"è¿™æ˜¯message"</span> preferredStyle:<span class="built_in">UIAlertControllerStyleAlert</span>];</span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, <span class="built_in">UIAlertControllerStyle</span>) &#123;</span><br><span class="line">    <span class="built_in">UIAlertControllerStyleActionSheet</span> = <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">UIAlertControllerStyleAlert</span></span><br><span class="line">&#125; <span class="built_in">NS_ENUM_AVAILABLE_IOS</span>(<span class="number">8</span>_0);</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„<code>preferredStyle:</code>å‚æ•°æœ‰<code>UIAlertControllerStyleAlert</code>å’Œ<code>UIAlertControllerStyleActionSheet</code>ä¸¤ç§ï¼Œè¿™é‡Œæˆ‘ä»¬è¦åˆ›å»ºçš„æ˜¯<em>Alert View</em>ï¼Œæ‰€ä»¥ä½¿ç”¨ç¬¬ä¸€ç§ã€‚</p>
<h2 id="æ·»åŠ æŒ‰é’®"><a href="#æ·»åŠ æŒ‰é’®" class="headerlink" title="æ·»åŠ æŒ‰é’®"></a>æ·»åŠ æŒ‰é’®</h2><p><code>UIAlertAction</code>å¯¹è±¡ç”±æ ‡é¢˜ã€æ ·å¼å’Œç”¨æˆ·å•å‡»è¯¥æŒ‰é’®æ—¶è¿è¡Œçš„ä»£ç å—ä¸‰éƒ¨åˆ†ç»„æˆã€‚<code>UIAlertActionStyle</code>æœ‰ä¸‰ç§æ ·å¼ã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSInteger</span>, <span class="built_in">UIAlertActionStyle</span>) &#123;</span><br><span class="line">    <span class="comment">// å¸¸è§„æ ·å¼</span></span><br><span class="line">    <span class="built_in">UIAlertActionStyleDefault</span> = <span class="number">0</span>,</span><br><span class="line">    <span class="comment">// å–æ¶ˆæ ·å¼</span></span><br><span class="line">    <span class="built_in">UIAlertActionStyleCancel</span>,</span><br><span class="line">    <span class="comment">// è­¦ç¤ºæ ·å¼ï¼ŒæŒ‰é’®å­—ä½“ä¸ºçº¢è‰²</span></span><br><span class="line">    <span class="built_in">UIAlertActionStyleDestructive</span></span><br><span class="line">&#125; <span class="built_in">NS_ENUM_AVAILABLE_IOS</span>(<span class="number">8</span>_0);</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">UIAlertAction</span> *sure = [<span class="built_in">UIAlertAction</span> actionWithTitle:<span class="string">@"ç¡®å®š"</span> style:<span class="built_in">UIAlertActionStyleDefault</span> handler:^(<span class="built_in">UIAlertAction</span> * _Nonnull action) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"ç¡®å®š"</span>);</span><br><span class="line">    &#125;];</span><br><span class="line"><span class="built_in">UIAlertAction</span> *cancel = [<span class="built_in">UIAlertAction</span> actionWithTitle:<span class="string">@"å–æ¶ˆ"</span> style:<span class="built_in">UIAlertActionStyleCancel</span> handler:^(<span class="built_in">UIAlertAction</span> * _Nonnull action) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"å–æ¶ˆ"</span>);</span><br><span class="line">    &#125;];</span><br><span class="line">[alert addAction:sure];</span><br><span class="line">[alert addAction:cancel];</span><br></pre></td></tr></table></figure>
<h2 id="æ˜¾ç¤ºè­¦å‘Šæ¡†"><a href="#æ˜¾ç¤ºè­¦å‘Šæ¡†" class="headerlink" title="æ˜¾ç¤ºè­¦å‘Šæ¡†"></a>æ˜¾ç¤ºè­¦å‘Šæ¡†</h2><p>æ˜¾ç¤ºalert</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">[<span class="keyword">self</span> presentViewController:alert animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="alert.png" alt></p>
<p>å¦‚æœå†æ·»åŠ ä¸€ä¸ªresetæŒ‰é’®å¹¶è®¾ç½®æˆ<code>UIAlertActionStyleDestructive</code>æ ·å¼ï¼Œå†çœ‹çœ‹æ•ˆæœ</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="built_in">UIAlertAction</span> *reset = [<span class="built_in">UIAlertAction</span> actionWithTitle:<span class="string">@"Reset"</span> style:<span class="built_in">UIAlertActionStyleDestructive</span> handler:^(<span class="built_in">UIAlertAction</span> * _Nonnull action) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Reset Action"</span>);</span><br><span class="line">&#125;];</span><br><span class="line">[alert addAction:reset];</span><br><span class="line"><span class="comment">//show</span></span><br><span class="line">[<span class="keyword">self</span> presentViewController:alert animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<p><img src="alert2.png" alt></p>
<p>åªè¦ä¸Šé¢æœ‰<code>UIAlertActionStyleCancel</code>æ ·å¼çš„æŒ‰é’®ï¼Œè¯¥æŒ‰é’®æ€»æ˜¯åœ¨æœ€åº•éƒ¨ï¼Œå…¶ä»–æŒ‰é’®é¡ºåºç”±æ·»åŠ é¡ºåºå†³å®šã€‚å¦‚æœåŒ…å«<code>UIAlertActionStyleDestructive</code>æ ·å¼çš„æŒ‰é’®ï¼Œä¸€èˆ¬å…ˆæ·»åŠ ï¼Œä»¥ä¾¿åœ¨ç¬¬ä¸€ä¸ªä½ç½®æ˜¾ç¤ºã€‚æ¯ä¸€ä¸ªè­¦æŠ¥æ§åˆ¶å™¨åªèƒ½åŒ…å«ä¸€ä¸ª<em>Cancel</em>æŒ‰é’®ï¼Œå¦‚æœä½ æ·»åŠ äº†ä¸¤ä¸ªæˆ–å¤šä¸ªï¼Œåœ¨è¿è¡Œæ—¶ä¼šæŠ›å‡º<code>NSInternalInconsistencyException</code>çš„å¼‚å¸¸ã€‚</p>
<blockquote>
<p><strong>UIAlertActionStyleDefault å’Œ UIAlertActionStyleCancel çš„åŒºåˆ«</strong></p>
<p>æ·»åŠ UIAlertActionStyleCancelæ ·å¼åï¼Œåœ¨UIAlertActionåªæœ‰ä¸¤ä¸ªæ—¶ï¼ŒUIAlertActionStyleCancelæ ·å¼çš„actionéƒ½ä¼šæŒ‰è‹¹æœçš„é»˜è®¤é£æ ¼æŠŠå–æ¶ˆæŒ‰é’®æ”¾åœ¨å·¦è¾¹ï¼›</p>
<p>æ·»åŠ UIAlertActionStyleCancelæ ·å¼åï¼Œåœ¨UIAlertActionæœ‰ä¸‰ä¸ªåŠå…¶ä»¥ä¸Šçš„æ—¶å€™ï¼ŒUIAlertActionStyleCancelæ ·å¼çš„actionä¼šæ˜¾ç¤ºåœ¨æœ€ä¸‹é¢ã€‚</p>
<p>è€Œæ·»åŠ UIAlertActionStyleDefaultæ ·å¼æ—¶ï¼Œä¸ä½ addActionåˆ°alertControllerä¸Šçš„é¡ºåºæœ‰å…³ã€‚</p>
<p><strong>UIAlertActionStyleDestructive è­¦ç¤ºæ ·å¼</strong></p>
<p>è­¦ç¤ºæ ·å¼çš„æŒ‰é’®ä¼šå˜æˆçº¢è‰²ã€‚æ ¹æ®è‹¹æœå®˜æ–¹çš„å®šä¹‰ï¼Œâ€œè­¦ç¤ºâ€æ ·å¼çš„æŒ‰é’®æ˜¯ç”¨åœ¨å¯èƒ½ä¼šæ”¹å˜æˆ–åˆ é™¤æ•°æ®çš„æ“ä½œä¸Šï¼Œå› æ­¤ç”¨äº†çº¢è‰²çš„é†’ç›®æ ‡è¯†æ¥è­¦ç¤ºç”¨æˆ·ã€‚</p>
</blockquote>
<h2 id="åˆ›å»ºå¸¦è¾“å…¥æ¡†çš„è­¦å‘Šæ¡†"><a href="#åˆ›å»ºå¸¦è¾“å…¥æ¡†çš„è­¦å‘Šæ¡†" class="headerlink" title="åˆ›å»ºå¸¦è¾“å…¥æ¡†çš„è­¦å‘Šæ¡†"></a>åˆ›å»ºå¸¦è¾“å…¥æ¡†çš„è­¦å‘Šæ¡†</h2><p><code>UIAlerController</code>çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯æˆ‘ä»¬å¯ä»¥å‘è­¦æŠ¥æ§åˆ¶å™¨ä¸­æ·»åŠ ä»»æ„æ•°é‡çš„<code>UITextField</code>ä½œä¸ºè­¦æŠ¥æ§åˆ¶å™¨å†…å®¹è§†å›¾ä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>æ¯”å¦‚è¿™é‡Œç”¨ä¸€ä¸ªç™»å½•æ¡†æ¥è¿›è¡Œä¸¾ä¾‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–UIAlertControllerå®ä¾‹</span></span><br><span class="line"><span class="built_in">UIAlertController</span> *alert = [<span class="built_in">UIAlertController</span> alertControllerWithTitle:<span class="string">@"ç™»å½•æ¡†"</span> message:<span class="string">@"è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç "</span> preferredStyle:<span class="built_in">UIAlertControllerStyleAlert</span>];</span><br><span class="line"><span class="comment">//åˆ›å»ºUIAlertAction</span></span><br><span class="line"><span class="built_in">UIAlertAction</span> *sure = [<span class="built_in">UIAlertAction</span> actionWithTitle:<span class="string">@"ç™»é™†"</span> style:<span class="built_in">UIAlertActionStyleDefault</span> handler:^(<span class="built_in">UIAlertAction</span> * _Nonnull action) &#123;</span><br><span class="line">		<span class="comment">//è·å–textFieldå®ä¾‹ï¼Œæ ¹æ®æ·»åŠ çš„é¡ºåºè·å–</span></span><br><span class="line">		<span class="built_in">UITextField</span> *loginname = alert.textFields.firstObject;</span><br><span class="line">		<span class="built_in">UITextField</span> *pwd = alert.textFields.lastObject;</span><br><span class="line">		<span class="built_in">NSLog</span>(<span class="string">@"name:%@,  pwd:%@"</span>, loginname.text, pwd.text);</span><br><span class="line">&#125;];</span><br><span class="line"><span class="built_in">UIAlertAction</span> *cancel = [<span class="built_in">UIAlertAction</span> actionWithTitle:<span class="string">@"å–æ¶ˆ"</span> style:<span class="built_in">UIAlertActionStyleCancel</span> handler:^(<span class="built_in">UIAlertAction</span> * _Nonnull action) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"å–æ¶ˆ"</span>);        </span><br><span class="line">&#125;];</span><br><span class="line"><span class="comment">//æ·»åŠ åˆ°UIAlertControllerå®ä¾‹</span></span><br><span class="line">[alert addAction:sure];</span><br><span class="line">[alert addAction:cancel];</span><br><span class="line"><span class="comment">//æ·»åŠ TextField</span></span><br><span class="line">[alert addTextFieldWithConfigurationHandler:^(<span class="built_in">UITextField</span> * _Nonnull textField) &#123;</span><br><span class="line">   [textField setPlaceholder:<span class="string">@"name"</span>];</span><br><span class="line">&#125;];</span><br><span class="line">[alert addTextFieldWithConfigurationHandler:^(<span class="built_in">UITextField</span> * _Nonnull textField) &#123;</span><br><span class="line">    [textField setPlaceholder:<span class="string">@"password"</span>];</span><br><span class="line">    textField.secureTextEntry = <span class="literal">YES</span>;</span><br><span class="line">&#125;];</span><br><span class="line">[<span class="keyword">self</span> presentViewController:alert animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="alerttextfield.png" alt></p>
<h1 id="åˆ›å»ºæ“ä½œè¡¨Action-Sheet"><a href="#åˆ›å»ºæ“ä½œè¡¨Action-Sheet" class="headerlink" title="åˆ›å»ºæ“ä½œè¡¨Action Sheet"></a>åˆ›å»ºæ“ä½œè¡¨Action Sheet</h1><p>æ“ä½œè¡¨ä¸€èˆ¬ç”¨äºä¸ºç”¨æˆ·æä¾›ä¸€ç»„å¯ä¾›é€‰æ‹©çš„æ“ä½œé€‰é¡¹ï¼Œå¦‚åˆ é™¤ã€æ¢å¤ç­‰ã€‚ä¸€èˆ¬æ ¹æ®è®¾å¤‡å°ºå¯¸å¤§å°å†³å®šå‘ˆç°å½¢å¼ï¼Œåœ¨iPhoneä¸Šï¼Œæ“ä½œè¡¨ç”±åº•éƒ¨æ»‘å‡ºï¼›åœ¨iPadä¸Šï¼Œæ“ä½œè¡¨ä»¥å¼¹å‡ºæ¡†ï¼ˆpopover)å½¢å¼å‡ºç°ã€‚</p>
<p>åˆ›å»ºæ“ä½œè¡¨çš„æ–¹æ³•ä¸è­¦å‘Šæ¡†ç±»ä¼¼ï¼Œå”¯ä¸€ä¸åŒåœ¨äº<code>preferredStyle:</code>å‚æ•°çš„é€‰æ‹©ã€‚åœ¨<code>showActionSheet:</code>æ–¹æ³•ä¸­åˆ›å»ºæ“ä½œè¡¨ã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">UIAlertController</span> *sheet = [<span class="built_in">UIAlertController</span> alertControllerWithTitle:<span class="string">@"æ ‡é¢˜"</span> message:<span class="string">@"è¿™æ˜¯message"</span> preferredStyle:<span class="built_in">UIAlertControllerStyleActionSheet</span>];</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ Action Sheetçš„æŒ‰é’®å’Œæ·»åŠ è­¦å‘Šæ¡†çš„æŒ‰é’®ä»£ç è¡Œä¸ºæ˜¯ä¸€è‡´çš„ã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">UIAlertAction</span> *sure = [<span class="built_in">UIAlertAction</span> actionWithTitle:<span class="string">@"ç¡®å®š"</span> style:<span class="built_in">UIAlertActionStyleDefault</span> handler:^(<span class="built_in">UIAlertAction</span> * _Nonnull action) &#123;</span><br><span class="line">		<span class="built_in">NSLog</span>(<span class="string">@"ç¡®å®š"</span>);</span><br><span class="line">&#125;];</span><br><span class="line"><span class="built_in">UIAlertAction</span> *reset = [<span class="built_in">UIAlertAction</span> actionWithTitle:<span class="string">@"é‡ç½®"</span> style:<span class="built_in">UIAlertActionStyleDestructive</span> handler:^(<span class="built_in">UIAlertAction</span> * _Nonnull action) &#123;</span><br><span class="line">		<span class="built_in">NSLog</span>(<span class="string">@"é‡ç½®"</span>);</span><br><span class="line">&#125;];</span><br><span class="line"><span class="built_in">UIAlertAction</span> *cancel = [<span class="built_in">UIAlertAction</span> actionWithTitle:<span class="string">@"å–æ¶ˆ"</span> style:<span class="built_in">UIAlertActionStyleCancel</span> handler:^(<span class="built_in">UIAlertAction</span> * _Nonnull action) &#123;</span><br><span class="line">		<span class="built_in">NSLog</span>(<span class="string">@"å–æ¶ˆ"</span>);</span><br><span class="line">&#125;];</span><br><span class="line">[sheet addAction:sure];</span><br><span class="line">[sheet addAction:cancel];</span><br><span class="line">[sheet addAction:reset];</span><br><span class="line"><span class="comment">//show</span></span><br><span class="line">[<span class="keyword">self</span> presentViewController:sheet animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="actionsheet.png" alt></p>
<p>å¦‚æœ<code>Action Sheet</code>ä¸­æœ‰å–æ¶ˆæŒ‰é’®ï¼Œå–æ¶ˆæŒ‰é’®æ¯æ¬¡éƒ½ä¼šåœ¨åº•éƒ¨æ˜¾ç¤ºï¼Œå…¶ä»–æŒ‰é’®ä¼šæŒ‰ç…§æ·»åŠ çš„é¡ºåºæ˜¾ç¤ºã€‚åœ¨Action Sheetå†…ä¸èƒ½æ·»åŠ æ–‡æœ¬æ¡†ã€‚å¦‚æœä½ æ·»åŠ äº†æ–‡æœ¬æ¡†ï¼Œåœ¨è¿è¡Œæ—¶ä¼šæŠ›å‡ºä¸‹é¢çš„å¼‚å¸¸æé†’ï¼š</p>
<blockquote>
<p>Terminating app due to uncaught exception â€˜NSInternalInconsistencyExceptionâ€™, reason: â€˜Text fields can only be added to an alert controller of style UIAlertControllerStyleAlertâ€™</p>
</blockquote>
<p>å¦‚ä¸Šé¢è¯´åˆ°çš„ï¼Œåœ¨iPadä¸­Action Sheetä»¥å¼¹å‡ºæ¡†çš„å½¢å¼å‘ˆç°ã€‚å¼¹å‡ºæ¡†æ€»æ˜¯éœ€è¦ä¸€ä¸ªé”šç‚¹ï¼Œé”šç‚¹å¯ä»¥æ˜¯æºè§†å›¾ï¼Œä¹Ÿå¯ä»¥æ˜¯æŒ‰é’®ã€‚åœ¨è¿™ä¸ªdemoä¸­ï¼Œæˆ‘ä»¬ç”¨æŒ‰é’®è§¦å‘å¼¹å‡ºæ¡†ï¼Œæ‰€ä»¥è¿™é‡Œå°†æŠŠæŒ‰é’®ä½œä¸ºé”šç‚¹ã€‚<code>showActionSheet:</code>æ–¹æ³•æ›´æ–°åå¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//inner click func</span></span><br><span class="line"><span class="comment">//(IBAction)actionsheet:(UIButton *)sender</span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="built_in">UIPopoverPresentationController</span> *popover = sheet.popoverPresentationController;</span><br><span class="line"><span class="keyword">if</span> (popover) &#123;</span><br><span class="line">		popover.sourceView = sender;</span><br><span class="line">		popover.sourceRect = sender.bounds;</span><br><span class="line">		popover.permittedArrowDirections = <span class="built_in">UIPopoverArrowDirectionAny</span>;        </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">[<span class="keyword">self</span> presentViewController:sheet animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<p>å¦‚æœåœ¨iPadä¸­æ²¡æœ‰æ·»åŠ ä¸Šé¢æ–¹æ³•ï¼Œè¿è¡Œæ—¶ä¼šå‡ºç°ä¸‹é¢å´©æºƒæç¤ºï¼š</p>
<blockquote>
<p>Terminating app due to uncaught exception â€˜NSGenericExceptionâ€™, reason: â€˜Your application has presented a UIAlertController (&lt;UIAlertController: 0x7f88c85221f0&gt;) of style UIAlertControllerStyleActionSheet. The modalPresentationStyle of a UIAlertController with this style is UIModalPresentationPopover. You must provide location information for this popover through the alert controllerâ€™s popoverPresentationController. You must provide either a sourceView and sourceRect or a barButtonItem.  If this information is not known when you present the alert controller, you may provide it in the UIPopoverPresentationControllerDelegate method -prepareForPopoverPresentation.â€™</p>
</blockquote>
<p>ç°åœ¨ï¼ŒAction Sheetä»¥è§¦å‘å®ƒçš„æŒ‰é’®ä¸ºé”šç‚¹ï¼Œä»¥å¼¹å‡ºæ¡†å½¢å¼å±•ç°ã€‚</p>
<p><img src="actionsheetipad.png" alt></p>
<blockquote>
<p>å½“Action Sheetä»¥å¼¹å‡ºæ¡†å½¢å¼å±•ç°æ—¶ï¼Œ<code>UIKit</code>ä¼šå–æ¶ˆæ˜¾ç¤º<em>Cancel</em>æŒ‰é’®ã€‚æ­¤æ—¶ï¼Œç‚¹å‡»popoverä»¥å¤–ä»»ä½•åŒºåŸŸå’Œç‚¹å‡»<em>Cancel</em>æŒ‰é’®æ•ˆæœä¸€è‡´ï¼ŒåŒæ—¶ä¼šè°ƒç”¨å–æ¶ˆæŒ‰é’®çš„å®Œæˆå¤„ç†ç¨‹åºã€‚</p>
</blockquote>
<h1 id="é€€å‡ºè­¦å‘Šæ§åˆ¶å™¨"><a href="#é€€å‡ºè­¦å‘Šæ§åˆ¶å™¨" class="headerlink" title="é€€å‡ºè­¦å‘Šæ§åˆ¶å™¨"></a>é€€å‡ºè­¦å‘Šæ§åˆ¶å™¨</h1><p>è­¦æŠ¥æ§åˆ¶å™¨ä¼šåœ¨ç”¨æˆ·ç‚¹å‡»æŒ‰é’®åè‡ªåŠ¨æ¶ˆå¤±ï¼Œä½†åœ¨appè¿›å…¥åå°æ—¶ï¼Œè­¦å‘Šæ¡†å’Œé€‰æ‹©è¡¨å¹¶ä¸ä¼šè‡ªåŠ¨é€€å‡ºã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä»£ç å®ç°é€€å‡ºè­¦æŠ¥æ§åˆ¶å™¨ã€‚</p>
<p>åœ¨<strong>é€šçŸ¥ä¸­å¿ƒ</strong>è¿›è¡Œæ³¨å†Œï¼Œå½“æ¥æ”¶åˆ°appè¿›å…¥åå°çš„é€šçŸ¥æ—¶é€€å‡ºè­¦æŠ¥æ§åˆ¶å™¨ã€‚æ›´æ–°åçš„<code>viewDidLoad</code>å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// app è¿›å…¥åå°åéšè—è­¦æŠ¥æ§åˆ¶å™¨</span></span><br><span class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserverForName:<span class="built_in">UIApplicationDidEnterBackgroundNotification</span> object:<span class="literal">nil</span> queue:<span class="literal">nil</span> usingBlock:^(<span class="built_in">NSNotification</span> * _Nonnull note) &#123;</span><br><span class="line">        [<span class="keyword">self</span>.presentedViewController dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)dealloc</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ç§»é™¤è§‚å¯Ÿè€…</span></span><br><span class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter] removeObserver:<span class="keyword">self</span> name:<span class="built_in">UIApplicationDidEnterBackgroundNotification</span> object:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è®°å¾—ç§»é™¤è§‚å¯Ÿè€…ï¼Œå¦åˆ™ä¼šå¼•èµ·å´©æºƒã€‚</p>
</blockquote>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä¸‹é¢æ€»ç»“ä¸‹Alert Viewå’ŒAction Sheetçš„å¼‚åŒã€‚</p>
<p>è­¦å‘Šæ¡†Alert Viewï¼š</p>
<ul>
<li>ä¸€èˆ¬æ˜¾ç¤ºåœ¨å½“å‰è§†å›¾æ§åˆ¶å™¨çš„ä¸­å¿ƒï¼Œç‚¹å‡»è­¦å‘Šæ¡†ä»¥å¤–åŒºåŸŸä¸èƒ½éšè—è­¦å‘Šæ§åˆ¶å™¨ã€‚</li>
<li>å¯ä»¥æ·»åŠ ä»»æ„æ•°é‡æ–‡æœ¬æ¡†ã€‚</li>
<li>æœ‰ä¸€ä¸ªæˆ–ä¸¤ä¸ªæŒ‰é’®æ—¶ï¼Œæ¨ªå‘æ’å¸ƒï¼Œå¦‚æœæœ‰<em>Cancel</em>æŒ‰é’®ï¼Œåˆ™<em>Cancel</em>æŒ‰é’®æ˜¾ç¤ºåœ¨å·¦ä¾§ï¼›æœ‰ä¸¤ä¸ªä»¥ä¸ŠæŒ‰é’®æ—¶ï¼Œç«–åˆ—æ’å¸ƒï¼Œå¦‚æœæœ‰<em>Cancel</em>æŒ‰é’®ï¼Œåˆ™<em>Cancel</em>æŒ‰é’®æ˜¾ç¤ºåœ¨æœ€åº•éƒ¨ã€‚å…¶ä»–æŒ‰é’®æŒ‰ç…§æ·»åŠ é¡ºåºæ’å¸ƒã€‚</li>
</ul>
<p>æ“ä½œè¡¨Action Sheetï¼š</p>
<ul>
<li>åœ¨iPhoneä¸­è‡ªä¸‹è€Œä¸Šæ»‘å‡ºæ˜¾ç¤ºåœ¨å½“å‰æ§åˆ¶å™¨çš„åº•éƒ¨ï¼Œç‚¹å‡»action sheetä»¥å¤–åŒºåŸŸå¯ä»¥éšè—<code>UIAlertController</code>ã€‚</li>
<li>åœ¨iPadä¸­ä»¥popoveræ–¹å¼ã€ä»¥æºè§†å›¾ä¸ºé”šç‚¹æ˜¾ç¤ºï¼Œç‚¹å‡»é€‰æ‹©è¡¨ä»¥å¤–çš„åŒºåŸŸå¯ä»¥éšè—è­¦å‘Šæ§åˆ¶å™¨ã€‚</li>
<li>ä¸èƒ½æ·»åŠ æ–‡æœ¬æ¡†ã€‚</li>
<li>æŒ‰é’®ç«–åˆ—æ’å¸ƒï¼Œåœ¨iPhoneä¸­ï¼Œ<em>Cancel</em>æŒ‰é’®é»˜è®¤åœ¨åº•éƒ¨æ˜¾ç¤ºï¼›åœ¨iPadä¸­ï¼Œ<em>Cancel</em>æŒ‰é’®é»˜è®¤ä¸æ˜¾ç¤ºã€‚</li>
</ul>
<p><code>UIAlertController</code>ç±»åªèƒ½åŸæ ·ä½¿ç”¨ï¼Œä¸æ”¯æŒå­ç±»åŒ–ã€‚è¯¥ç±»çš„è§†å›¾å±‚æ¬¡ç»“æ„æ˜¯ç§æœ‰çš„ï¼Œä¸èƒ½ä¿®æ”¹ã€‚æœ€åï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè­¦å‘Šæ¡†å’Œæ“ä½œè¡¨å‘ç”¨æˆ·æ˜¾ç¤ºä¿¡æ¯æ—¶ä¼šä¸­æ–­åº”ç”¨çš„å½“å‰æµç¨‹ï¼Œè¯·åªåœ¨éœ€è¦çš„æ—¶å€™ä½¿ç”¨ï¼Œåˆ‡å‹¿æ»¥ç”¨ã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.jianshu.com/p/7606b6514ec4" target="_blank" rel="noopener">https://www.jianshu.com/p/7606b6514ec4</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidç³»ç»Ÿå‰ªè´´æ¿ä½¿ç”¨</title>
    <url>/2019/07/04/Android%E7%B3%BB%E7%BB%9F%E5%89%AA%E8%B4%B4%E6%9D%BF%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘å…¬å¸ä¸šåŠ¡ç”¨åˆ°äº†å…³äºAndroidç³»ç»Ÿå‰ªè´´æ¿çš„ä½¿ç”¨ï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹å‰ªè´´æ¿çš„ä½¿ç”¨ã€‚</p>
<a id="more"></a>
<h1 id="ClipboardManagerä»‹ç»"><a href="#ClipboardManagerä»‹ç»" class="headerlink" title="ClipboardManagerä»‹ç»"></a>ClipboardManagerä»‹ç»</h1><p>å½“éœ€è¦ä½¿ç”¨åˆ°ClipboardManageræ—¶ï¼Œéœ€è¦æŠŠæ•°æ®æ”¾åœ¨ä¸€ä¸ªClipDataé‡Œï¼Œç„¶ååœ¨æŠŠè¿™ä¸ªæ•°æ®å¯¹è±¡æ”¾åœ¨ç³»ç»Ÿçš„å‰ªè´´æ¿é‡Œé¢ã€‚</p>
<p><strong>ClipDataæœ‰ä¸‰ç§å½¢å¼ï¼š</strong></p>
<ul>
<li>Textï¼šæ–‡å­—å­—ç¬¦ä¸²ã€‚æ–‡å­—æ˜¯ç›´æ¥æ”¾åœ¨clipå¯¹è±¡ä¸­ï¼Œç„¶åæ”¾åœ¨å‰ªè´´æ¿é‡Œï¼›ç²˜è´´è¿™ä¸ªå­—ç¬¦ä¸²çš„æ—¶å€™ç›´æ¥ä»å‰ªè´´æ¿æ‹¿åˆ°è¿™ä¸ªå¯¹è±¡ï¼ŒæŠŠå­—ç¬¦ä¸²æ”¾å…¥ä½ çš„åº”ç”¨å­˜å‚¨ä¸­ã€‚</li>
<li>URIï¼šä¸€ä¸ªUriå¯¹è±¡ã€‚è¡¨ç¤ºä»»ä½•å½¢å¼çš„URIã€‚è¿™ç§å½¢å¼ä¸»è¦ç”¨äºä»ä¸€ä¸ªcontent providerä¸­å¤åˆ¶å¤æ‚çš„æ•°æ®ã€‚å¤åˆ¶çš„æ—¶å€™æŠŠä¸€ä¸ª<code>Uri</code> å¯¹è±¡æ”¾åœ¨ä¸€ä¸ªclipå¯¹è±¡ä¸­ï¼Œç„¶åå†æ”¾åœ¨å‰ªè´´æ¿é‡Œï¼›ç²˜è´´çš„æ—¶å€™å–å‡ºè¿™ä¸ªclipå¯¹è±¡ï¼Œå¾—åˆ°Uriï¼ŒæŠŠå®ƒè§£æä¸ºä¸€ä¸ªæ•°æ®èµ„æºæ¯”å¦‚content providerï¼Œç„¶åä»èµ„æºä¸­å¤åˆ¶æ•°æ®åˆ°åº”ç”¨å­˜å‚¨ä¸­ã€‚</li>
<li>Intentï¼šIntentå¯¹è±¡ã€‚è¿™æ”¯æŒäº†å¤åˆ¶åº”ç”¨å¿«æ·æ–¹å¼ã€‚å¤åˆ¶çš„æ—¶å€™æŠŠIntentå¯¹è±¡æ”¾åœ¨clipå¯¹è±¡ä¸­ï¼Œå†æ”¾å…¥å‰ªè´´æ¿ï¼›ç²˜è´´æ•°æ®æ—¶ï¼Œä»clipå¯¹è±¡ä¸­å¾—åˆ°Intentå¯¹è±¡ï¼Œæ”¾å…¥åº”ç”¨å­˜å‚¨åŒºåŸŸä¸­ã€‚</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šå‰ªè´´æ¿é‡Œæ¯æ¬¡ä»…ä¼šæŒæœ‰ä¸€ä¸ªClipDataå¯¹è±¡ï¼Œå½“åº”ç”¨å†æ”¾å…¥å¦ä¸€ä¸ªClipDataå¯¹è±¡è¿›æ¥æ—¶ï¼Œå‰ä¸€ä¸ªå°±æ¶ˆå¤±äº†ã€‚</p>
</blockquote>
<h1 id="ç›¸å…³ç±»"><a href="#ç›¸å…³ç±»" class="headerlink" title="ç›¸å…³ç±»"></a>ç›¸å…³ç±»</h1><h2 id="ClipboardManager"><a href="#ClipboardManager" class="headerlink" title="ClipboardManager"></a>ClipboardManager</h2><p>ClipboardManagerä»£è¡¨äº†ç³»ç»Ÿçš„å‰ªè´´æ¿ï¼Œå¯ä»¥é€šè¿‡<code>(ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE)</code>ç³»ç»ŸæœåŠ¡æ¥è·å–ã€‚</p>
<p>å…¨åä¸º<strong>android.text.ClipboardManager</strong>ä»API 11å¼€å§‹å°±åºŸå¼ƒäº†ã€‚</p>
<p>å–è€Œä»£ä¹‹çš„æ˜¯å®ƒçš„å­ç±»ï¼š<strong>android.content.ClipboardManager</strong> (since API Level 11)ã€‚</p>
<h2 id="ClipData-ClipDescription-and-ClipData-Item"><a href="#ClipData-ClipDescription-and-ClipData-Item" class="headerlink" title="ClipData, ClipDescription, and ClipData.Item"></a>ClipData, ClipDescription, and ClipData.Item</h2><p>å‰é¢è¯´çš„clipå¯¹è±¡å°±æ˜¯<strong>ClipData</strong>ç±»çš„å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ä¸ª <code>ClipDescription</code>å¯¹è±¡å’Œä¸€ä¸ªæˆ–å¤šä¸ª<code>ClipData.Item</code>å¯¹è±¡ã€‚</p>
<p><strong>ClipDescription</strong>å¯¹è±¡ä¸­åŒ…å«äº†ä¸€ä¸ªæ•°ç»„ï¼Œæè¿°clipå¯¹è±¡çš„MIMEç±»å‹ã€‚</p>
<p><strong>ClipData.Item</strong>å¯¹è±¡ä¸­åŒ…å«æ–‡å­—ã€URIæˆ–è€…Intentæ•°æ®ã€‚<strong>ä¸€ä¸ªclipå¯¹è±¡ä¸­å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªItemå¯¹è±¡</strong>ã€‚</p>
<p>æ¯”å¦‚ä½ æƒ³è¦å¤åˆ¶listä¸­çš„å¤šé¡¹æ•°æ®ï¼Œä½ å¯ä»¥ä¸ºlistä¸­çš„æ¯ä¸€é¡¹åˆ›å»ºä¸€ä¸ª<strong>ClipData.Item</strong>å¯¹è±¡ï¼Œç„¶åæŠŠå®ƒä»¬æ”¾è¿›ä¸€ä¸ª<strong>ClipData</strong>å¯¹è±¡ä¸­ï¼Œè¿™æ ·å°±ä¸€æ¬¡æ€§æŠŠå¤šé¡¹æ•°æ®éƒ½æ”¾åœ¨äº†å‰ªè´´æ¿ä¸­ã€‚</p>
<blockquote>
<p>æ³¨æ„ClipDataè¿™ä¸ªç±»æ˜¯API 11æ‰æœ‰çš„ã€‚</p>
</blockquote>
<h2 id="ClipDataä¸­çš„ç®€æ´æ–¹æ³•"><a href="#ClipDataä¸­çš„ç®€æ´æ–¹æ³•" class="headerlink" title="ClipDataä¸­çš„ç®€æ´æ–¹æ³•"></a>ClipDataä¸­çš„ç®€æ´æ–¹æ³•</h2><ul>
<li><p><strong>ClipData</strong>ç±»ä¸­æœ‰ä¸€äº›é™æ€çš„ç®€æ´æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºåªæœ‰ä¸€ä¸ª<strong>ClipData.Item</strong>å’Œä¸€æ¡ç®€å•æè¿°( <code>ClipDescription</code>)çš„ClipDataå¯¹è±¡ã€‚</p>
</li>
<li><p>newPlainText(label, text)è¿”å›ClipDataå¯¹è±¡ï¼Œæ•°æ®æ˜¯æ–‡å­—textï¼Œæè¿°æ˜¯labelï¼ŒMIMEç±»å‹æ˜¯<code>MIMETYPE_TEXT_PLAIN</code>ã€‚</p>
</li>
<li><p>newUri(resolver, label, URI)</p>
</li>
<li><p>newIntent(label, intent)</p>
</li>
<li>newHtmlText(label,text, htmlText)</li>
<li>newRawUri(label, uri)</li>
</ul>
<blockquote>
<p>newHtmlText method need Call requires API level 16</p>
</blockquote>
<h1 id="ClipboardFrameworkæ¶æ„å›¾"><a href="#ClipboardFrameworkæ¶æ„å›¾" class="headerlink" title="ClipboardFrameworkæ¶æ„å›¾"></a>ClipboardFrameworkæ¶æ„å›¾</h1><p><img src="clipboardframework.png" alt></p>
<h1 id="ClipboardManagerä½¿ç”¨"><a href="#ClipboardManagerä½¿ç”¨" class="headerlink" title="ClipboardManagerä½¿ç”¨"></a>ClipboardManagerä½¿ç”¨</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–å‰ªè´´æ¿æœåŠ¡ï¼š</span></span><br><span class="line">ClipboardManager manager = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line"><span class="comment">//ç„¶åæŠŠæ•°æ®æ”¾åœ¨ClipDataå¯¹è±¡ä¸­</span></span><br><span class="line">ClipData data = ClipData.newPlainText(<span class="string">"label"</span>, <span class="string">"this is clipboard data"</span>);       </span><br><span class="line">manager.setPrimaryClip(data);</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç å°±å¯ä»¥å°†æ–‡å­—æ”¾åˆ°å‰ªè´´æ¿äº†ï¼Œç„¶åæ‰¾ä¸ªè¾“å…¥æ¡†â€œç²˜è´´â€å°±è¡Œå•¦ã€‚</p>
<blockquote>
<p>å¦‚æœéœ€è¦è‡ªç”±å¤åˆ¶TextViewç­‰æ§ä»¶çš„æ–‡å­—ï¼Œåªè¦åœ¨è¯¥æ§ä»¶ä¸Šæ·»åŠ <code>android:textIsSelectable=&quot;true&quot;</code>æˆ–è€…ä½¿ç”¨ä»£ç è®¾ç½®<code>setTextIsSelectable(true)</code>å³å¯ã€‚</p>
</blockquote>
<p><strong>URI:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Creates a Uri based on a base Uri and a record ID based on the contact's last name</span></span><br><span class="line"><span class="comment">// Declares the base URI string</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String CONTACTS = <span class="string">"content://com.example.contacts"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Declares a path string for URIs that you use to copy data</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String COPY_PATH = <span class="string">"/copy"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Declares the Uri to paste to the clipboard</span></span><br><span class="line">Uri copyUri = Uri.parse(CONTACTS + COPY_PATH + <span class="string">"/"</span> + lastName);</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Creates a new URI clip object. The system uses the anonymous getContentResolver() object to</span></span><br><span class="line"><span class="comment">// get MIME types from provider. The clip object's label is "URI", and its data is</span></span><br><span class="line"><span class="comment">// the Uri previously created.</span></span><br><span class="line">ClipData clip = ClipData.newUri(getContentResolver(),<span class="string">"URI"</span>,copyUri);</span><br></pre></td></tr></table></figure>
<p><strong>Intent:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Creates the Intent</span></span><br><span class="line">Intent appIntent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, com.example.demo.myapplication<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Creates a clip object with the Intent in it. Its label is "Intent" and its data is</span></span><br><span class="line"><span class="comment">// the Intent object created previously</span></span><br><span class="line">ClipData clip = ClipData.newIntent(<span class="string">"Intent"</span>,appIntent);</span><br></pre></td></tr></table></figure>
<h1 id="è·å–å‰ªè´´æ¿å†…å®¹"><a href="#è·å–å‰ªè´´æ¿å†…å®¹" class="headerlink" title="è·å–å‰ªè´´æ¿å†…å®¹"></a>è·å–å‰ªè´´æ¿å†…å®¹</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ClipboardManager manager = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);</span><br><span class="line"></span><br><span class="line">String resultString = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€æŸ¥å‰ªè´´æ¿æ˜¯å¦æœ‰å†…å®¹</span></span><br><span class="line"><span class="keyword">if</span>(manager.hasPrimaryClip())&#123;</span><br><span class="line">		ClipData clipData = manager.getPrimaryClip();</span><br><span class="line">		<span class="keyword">int</span> count = clipData.getItemCount();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; ++i) &#123;</span><br><span class="line"></span><br><span class="line">				ClipData.Item item = clipData.getItemAt(i);</span><br><span class="line">				CharSequence str = item.coerceToText(MainActivity.<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">				resultString += str;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line">Log.e(<span class="string">"TAG"</span>, resultString);</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ul>
<li><p>ä»»ä½•æ—¶é—´ï¼Œéƒ½åªæœ‰ä¸€ä¸ªclipå¯¹è±¡åœ¨å‰ªè´´æ¿é‡Œã€‚æ–°çš„å¤åˆ¶æ“ä½œéƒ½ä¼šè¦†ç›–å‰ä¸€ä¸ªclipå¯¹è±¡ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½ä»ä½ çš„åº”ç”¨ä¸­é€€å‡ºï¼Œä»å…¶ä»–åº”ç”¨ä¸­æ‹·è´ä¸€ä¸ªä¸œè¥¿ï¼Œæ‰€ä»¥ä½ ä¸èƒ½å‡å®šç”¨æˆ·åœ¨ä½ çš„åº”ç”¨ä¸­æ‹·è´çš„ä¸Šä¸€ä¸ªä¸œè¥¿ä¸€å®šè¿˜æ”¾åœ¨å‰ªè´´æ¿é‡Œã€‚</p>
</li>
<li><p>ä¸€ä¸ªclipå¯¹è±¡ï¼Œå³ClipDataä¸­çš„å¤šä¸ª<code>ClipData.Item</code> å¯¹è±¡æ˜¯ä¸ºäº†æ”¯æŒå¤šé€‰é¡¹çš„å¤åˆ¶ç²˜è´´ï¼Œè€Œä¸æ˜¯ä¸ºäº†æ”¯æŒå•é€‰çš„å¤šç§å½¢å¼ã€‚ä½ é€šå¸¸éœ€è¦clipå¯¹è±¡ä¸­çš„æ‰€æœ‰çš„é¡¹ç›®ï¼Œå³<a href="http://developer.android.com/reference/android/content/ClipData.Item.html" target="_blank" rel="noopener">ClipData.Item</a>æœ‰ä¸€æ ·çš„å½¢å¼ï¼Œæ¯”å¦‚éƒ½æ˜¯æ–‡å­—ï¼Œéƒ½æ˜¯URIæˆ–éƒ½æ˜¯Intentï¼Œè€Œä¸æ˜¯æ··åˆå„ç§å½¢å¼ã€‚</p>
</li>
<li><p>å½“ä½ æä¾›æ•°æ®æ—¶ï¼Œä½ å¯ä»¥æä¾›ä¸åŒçš„MIMEè¡¨è¾¾æ–¹å¼ã€‚å°†ä½ æ”¯æŒçš„MIMEç±»å‹åŠ å…¥åˆ°<strong>ClipDescription</strong>ä¸­å»ï¼Œç„¶ååœ¨ä½ çš„content providerä¸­å®ç°å®ƒã€‚</p>
</li>
<li><p>ä»å‰ªè´´æ¿å¾—åˆ°æ•°æ®æ—¶ï¼Œä½ çš„åº”ç”¨æœ‰è´£ä»»æ£€æŸ¥å¯ç”¨çš„MIMEç±»å‹ï¼Œç„¶åå†³å®šä½¿ç”¨å“ªä¸€ä¸ªã€‚å³ä¾¿æœ‰ä¸€ä¸ªclipå¯¹è±¡åœ¨å‰ªè´´æ¿ä¸­å¹¶ä¸”ç”¨æˆ·è¦æ±‚ç²˜è´´ï¼Œä½ çš„åº”ç”¨æœ‰å¯èƒ½ä¸éœ€è¦è¿›è¡Œç²˜è´´æ“ä½œã€‚ä½ åº”è¯¥åœ¨MIMEç±»å‹å…¼å®¹çš„æ—¶å€™æ‰§è¡Œç²˜è´´æ“ä½œã€‚ä½ å¯ä»¥é€‰æ‹©ä½¿ç”¨ <code>coerceToText()</code>æ–¹æ³•å°†ç²˜è´´çš„å†…å®¹è½¬æ¢ä¸ºæ–‡å­—ã€‚å¦‚æœä½ çš„åº”ç”¨æ”¯æŒå¤šç§ç±»å‹ï¼Œä½ å¯ä»¥è®©ç”¨æˆ·è‡ªå·±é€‰ç”¨å“ªä¸€ä¸ªã€‚</p>
</li>
</ul>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="http://developer.android.com/guide/topics/text/copy-paste.html" target="_blank" rel="noopener">http://developer.android.com/guide/topics/text/copy-paste.html</a></p>
<p><a href="https://www.cnblogs.com/zhujiabin/p/7605553.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhujiabin/p/7605553.html</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidè¿”å›ä¸é”€æ¯Activityï¼Œç›´æ¥è¿›å…¥åå°</title>
    <url>/2019/07/03/Android%E8%BF%94%E5%9B%9E%E4%B8%8D%E9%94%80%E6%AF%81Activity%EF%BC%8C%E7%9B%B4%E6%8E%A5%E8%BF%9B%E5%85%A5%E5%90%8E%E5%8F%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘æ‰“å¼€é—²é±¼ï¼Œå¾®ä¿¡ï¼Œå‘ç°ä»–ä»¬ç‚¹å‡»è¿”å›åˆ°æ¡Œé¢çš„æ—¶å€™ï¼Œä»–ä»¬çš„activityå¹¶æ²¡æœ‰ç›´æ¥é”€æ¯ï¼Œè¿˜æ˜¯ä¾ç„¶ä¿ç•™åœ¨è¿”å›ä¹‹å‰æµè§ˆçš„ç•Œé¢ã€‚æŸ¥äº†ä¸€ä¸‹èµ„æ–™ï¼Œçš„ç¡®æœ‰å¯ä»¥æ“ä½œçš„åŠæ³•ã€‚</p>
<a id="more"></a>
<h1 id="isTaskRoot"><a href="#isTaskRoot" class="headerlink" title="isTaskRoot()"></a>isTaskRoot()</h1><p><code>isTaskRoot()</code>æ–¹æ³•ç”¨æ¥åˆ¤æ–­è¯¥Activityæ˜¯å¦ä¸ºä»»åŠ¡æ ˆä¸­çš„æ ¹Activityï¼Œå³å¯åŠ¨åº”ç”¨çš„ç¬¬ä¸€ä¸ªActivityã€‚</p>
<h1 id="moveTaskToBack"><a href="#moveTaskToBack" class="headerlink" title="moveTaskToBack()"></a>moveTaskToBack()</h1><p><code>moveTaskToBack()</code>æ–¹æ³•ç”¨äºå°†activityé€€åˆ°åå°ï¼Œè€Œä¸æ˜¯ç›´æ¥finishæ‰ã€‚</p>
<p>ä»ç”Ÿå‘½å‘¨æœŸæ¥è¯´ï¼Œä¼šæ‰§è¡Œ<code>onPause</code>ã€<code>onStop</code>ï¼Œä½†ä¸ä¼šæ‰§è¡Œ<code>onDestroy</code> ã€‚æ¢å¤çš„æ—¶å€™ä¹Ÿä¸€æ ·ï¼Œä¼šæ‰§è¡Œ<code>onStart</code>ã€<code>onResume</code>ï¼Œä½†ä¸ä¼šæ‰§è¡Œ<code>onCreate</code>ã€‚</p>
<p>å‚æ•°nonRootè¡¨ç¤ºçš„å«ä¹‰æ˜¯æ­¤æ–¹æ³•å¯¹éæ ¹activityæ˜¯å¦æœ‰æ•ˆï¼š</p>
<ul>
<li>trueè¡¨ç¤ºå¯¹æ‰€æœ‰activityå‡æœ‰æ•ˆï¼Œ</li>
<li>falseè¡¨ç¤ºåªå¯¹æ ¹activityæœ‰æ•ˆã€‚</li>
</ul>
<p>è¿”å›å€¼ï¼šè¯¥activityè¢«é€€å‡ºåˆ°åå°æˆ–è€…ä»–å·²ç»åœ¨åå°äº†è¿”å›trueï¼Œå¦åˆ™è¿”å›false</p>
<h1 id="å®˜æ–¹æ–‡æ¡£ï¼š"><a href="#å®˜æ–¹æ–‡æ¡£ï¼š" class="headerlink" title="å®˜æ–¹æ–‡æ¡£ï¼š"></a>å®˜æ–¹æ–‡æ¡£ï¼š</h1><blockquote>
<p>public boolean moveTaskToBack (boolean nonRoot)<br>Since: API Level 1Move the task containing this activity to the back of the activity stack. The activityâ€™s order within the task is unchanged.<br>Parameters:<br>nonRoot If false then this only works if the activity is the root of a task; if true it will work for any activity in a task.<br>Returns:<br>If the task was moved (or it was already at the back) true is returned, else false.</p>
</blockquote>
<h1 id="ä½¿ç”¨æ¡ˆä¾‹"><a href="#ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="ä½¿ç”¨æ¡ˆä¾‹"></a>ä½¿ç”¨æ¡ˆä¾‹</h1><p>é‡å†™<code>onBackPressed</code>æˆ–è€…<code>onKeyDown</code>äº‹ä»¶ç­‰æ¥ç›‘å¬è¿”å›é”®äº‹ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onKeyDown</span><span class="params">(<span class="keyword">int</span> keyCode, KeyEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (event.getKeyCode() == KeyEvent.KEYCODE_BACK) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isTaskRoot()) &#123;</span><br><span class="line">                moveTaskToBack(<span class="keyword">false</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">super</span>.onKeyDown(keyCode, event);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="http://www.voidcn.com/article/p-wbosovty-bru.html" target="_blank" rel="noopener">http://www.voidcn.com/article/p-wbosovty-bru.html</a></p>
<p><a href="http://www.voidcn.com/article/p-poscpyhl-bn.html" target="_blank" rel="noopener">http://www.voidcn.com/article/p-poscpyhl-bn.html</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>IntelliJ IDEA For Mac å¿«æ·é”®</title>
    <url>/2019/06/30/IntelliJ-IDEA-For-Mac-%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="IntelliJ-IDEA-For-Mac-å¿«æ·é”®"><a href="#IntelliJ-IDEA-For-Mac-å¿«æ·é”®" class="headerlink" title="IntelliJ IDEA For Mac å¿«æ·é”®"></a>IntelliJ IDEA For Mac å¿«æ·é”®</h1><blockquote>
<p>å»ºè®®å°† Mac ç³»ç»Ÿä¸­ä¸ IntelliJ IDEA å†²çªçš„å¿«æ·é”®å–æ¶ˆæˆ–æ›´æ”¹ï¼Œä¸å»ºè®®æ”¹ IntelliJ IDEA çš„é»˜è®¤å¿«æ·é”®</p>
</blockquote>
<a id="more"></a>
<h4 id="Macé”®ç›˜ç¬¦å·å’Œä¿®é¥°é”®è¯´æ˜"><a href="#Macé”®ç›˜ç¬¦å·å’Œä¿®é¥°é”®è¯´æ˜" class="headerlink" title="Macé”®ç›˜ç¬¦å·å’Œä¿®é¥°é”®è¯´æ˜"></a>Macé”®ç›˜ç¬¦å·å’Œä¿®é¥°é”®è¯´æ˜</h4><ul>
<li><code>âŒ˜</code> Command</li>
<li><code>â‡§</code> Shift</li>
<li><code>âŒ¥</code> Option</li>
<li><code>âŒƒ</code> Control</li>
<li><code>â†©ï¸</code> Return/Enter</li>
<li><code>âŒ«</code> Delete</li>
<li><code>âŒ¦</code> å‘å‰åˆ é™¤é”®ï¼ˆFn+Deleteï¼‰</li>
<li><code>â†‘</code> ä¸Šç®­å¤´</li>
<li><code>â†“</code> ä¸‹ç®­å¤´</li>
<li><code>â†</code> å·¦ç®­å¤´</li>
<li><code>â†’</code> å³ç®­å¤´</li>
<li><code>â‡</code> Page Upï¼ˆFn+â†‘ï¼‰</li>
<li><code>â‡Ÿ</code> Page Downï¼ˆFn+â†“ï¼‰</li>
<li><code>Home</code> Fn + â†</li>
<li><code>End</code> Fn + â†’</li>
<li><code>â‡¥</code> å³åˆ¶è¡¨ç¬¦ï¼ˆTabé”®ï¼‰</li>
<li><code>â‡¤</code> å·¦åˆ¶è¡¨ç¬¦ï¼ˆShift+Tabï¼‰</li>
<li><code>â‹</code> Escape (Esc)</li>
</ul>
<h4 id="ä¸€ã€Editingï¼ˆç¼–è¾‘ï¼‰"><a href="#ä¸€ã€Editingï¼ˆç¼–è¾‘ï¼‰" class="headerlink" title="ä¸€ã€Editingï¼ˆç¼–è¾‘ï¼‰"></a>ä¸€ã€Editingï¼ˆç¼–è¾‘ï¼‰</h4><ul>
<li><code>âŒƒSpace</code> åŸºæœ¬çš„ä»£ç è¡¥å…¨ï¼ˆè¡¥å…¨ä»»ä½•ç±»ã€æ–¹æ³•ã€å˜é‡ï¼‰</li>
<li><code>âŒƒâ‡§Space</code> æ™ºèƒ½ä»£ç è¡¥å…¨ï¼ˆè¿‡æ»¤å™¨æ–¹æ³•åˆ—è¡¨å’Œå˜é‡çš„é¢„æœŸç±»å‹ï¼‰</li>
<li><code>âŒ˜â‡§â†©</code> è‡ªåŠ¨ç»“æŸä»£ç ï¼Œè¡Œæœ«è‡ªåŠ¨æ·»åŠ åˆ†å·</li>
<li><code>âŒ˜P</code> æ˜¾ç¤ºæ–¹æ³•çš„å‚æ•°ä¿¡æ¯</li>
<li><code>âŒƒJ, Mid. button click</code> å¿«é€ŸæŸ¥çœ‹æ–‡æ¡£</li>
<li><code>â‡§F1</code> æŸ¥çœ‹å¤–éƒ¨æ–‡æ¡£ï¼ˆåœ¨æŸäº›ä»£ç ä¸Šä¼šè§¦å‘æ‰“å¼€æµè§ˆå™¨æ˜¾ç¤ºç›¸å…³æ–‡æ¡£ï¼‰</li>
<li><code>âŒ˜+é¼ æ ‡æ”¾åœ¨ä»£ç ä¸Š</code> æ˜¾ç¤ºä»£ç ç®€è¦ä¿¡æ¯</li>
<li><code>âŒ˜F1</code> åœ¨é”™è¯¯æˆ–è­¦å‘Šå¤„æ˜¾ç¤ºå…·ä½“æè¿°ä¿¡æ¯</li>
<li><code>âŒ˜N, âŒƒâ†©, âŒƒN</code> ç”Ÿæˆä»£ç ï¼ˆgetterã€setterã€æ„é€ å‡½æ•°ã€hashCode/equals,toStringï¼‰</li>
<li><code>âŒƒO</code> è¦†ç›–æ–¹æ³•ï¼ˆé‡å†™çˆ¶ç±»æ–¹æ³•ï¼‰</li>
<li><code>âŒƒI</code> å®ç°æ–¹æ³•ï¼ˆå®ç°æ¥å£ä¸­çš„æ–¹æ³•ï¼‰</li>
<li><code>âŒ˜âŒ¥T</code> åŒ…å›´ä»£ç ï¼ˆä½¿ç”¨if..else, try..catch, for, synchronizedç­‰åŒ…å›´é€‰ä¸­çš„ä»£ç ï¼‰</li>
<li><code>âŒ˜/</code> æ³¨é‡Š/å–æ¶ˆæ³¨é‡Šä¸è¡Œæ³¨é‡Š</li>
<li><code>âŒ˜âŒ¥/</code> æ³¨é‡Š/å–æ¶ˆæ³¨é‡Šä¸å—æ³¨é‡Š</li>
<li><code>âŒ¥â†‘</code> è¿ç»­é€‰ä¸­ä»£ç å—</li>
<li><code>âŒ¥â†“</code> å‡å°‘å½“å‰é€‰ä¸­çš„ä»£ç å—</li>
<li><code>âŒƒâ‡§Q</code> æ˜¾ç¤ºä¸Šä¸‹æ–‡ä¿¡æ¯</li>
<li><code>âŒ¥â†©</code> æ˜¾ç¤ºæ„å‘åŠ¨ä½œå’Œå¿«é€Ÿä¿®å¤ä»£ç </li>
<li><code>âŒ˜âŒ¥L</code> æ ¼å¼åŒ–ä»£ç </li>
<li><code>âŒƒâŒ¥O</code> ä¼˜åŒ–import</li>
<li><code>âŒƒâŒ¥I</code> è‡ªåŠ¨ç¼©è¿›çº¿</li>
<li><code>â‡¥ / â‡§â‡¥</code> ç¼©è¿›ä»£ç  / åç¼©è¿›ä»£ç </li>
<li><code>âŒ˜X</code> å‰ªåˆ‡å½“å‰è¡Œæˆ–é€‰å®šçš„å—åˆ°å‰ªè´´æ¿</li>
<li><code>âŒ˜C</code> å¤åˆ¶å½“å‰è¡Œæˆ–é€‰å®šçš„å—åˆ°å‰ªè´´æ¿</li>
<li><code>âŒ˜V</code> ä»å‰ªè´´æ¿ç²˜è´´</li>
<li><code>âŒ˜â‡§V</code> ä»æœ€è¿‘çš„ç¼“å†²åŒºç²˜è´´</li>
<li><code>âŒ˜D</code> å¤åˆ¶å½“å‰è¡Œæˆ–é€‰å®šçš„å—</li>
<li><code>âŒ˜âŒ«</code> åˆ é™¤å½“å‰è¡Œæˆ–é€‰å®šçš„å—çš„è¡Œ</li>
<li><code>âŒƒâ‡§J</code> æ™ºèƒ½çš„å°†ä»£ç æ‹¼æ¥æˆä¸€è¡Œ</li>
<li><code>âŒ˜â†©</code> æ™ºèƒ½çš„æ‹†åˆ†æ‹¼æ¥çš„è¡Œ</li>
<li><code>â‡§â†©</code> å¼€å§‹æ–°çš„ä¸€è¡Œ</li>
<li><code>âŒ˜â‡§U</code> å¤§å°å†™åˆ‡æ¢</li>
<li><code>âŒ˜â‡§] / âŒ˜â‡§[</code> é€‰æ‹©ç›´åˆ°ä»£ç å—ç»“æŸ/å¼€å§‹</li>
<li><code>âŒ¥âŒ¦</code> åˆ é™¤åˆ°å•è¯çš„æœ«å°¾ï¼ˆâŒ¦é”®ä¸ºFn+Deleteï¼‰</li>
<li><code>âŒ¥âŒ«</code> åˆ é™¤åˆ°å•è¯çš„å¼€å¤´</li>
<li><code>âŒ˜+ / âŒ˜-</code> å±•å¼€ / æŠ˜å ä»£ç å—</li>
<li><code>âŒ˜â‡§+</code> å±•å¼€æ‰€ä»¥ä»£ç å—</li>
<li><code>âŒ˜â‡§-</code> æŠ˜å æ‰€æœ‰ä»£ç å—</li>
<li><code>âŒ˜W</code> å…³é—­æ´»åŠ¨çš„ç¼–è¾‘å™¨é€‰é¡¹å¡</li>
</ul>
<h4 id="äºŒã€Search-Replaceï¼ˆæŸ¥è¯¢-æ›¿æ¢ï¼‰"><a href="#äºŒã€Search-Replaceï¼ˆæŸ¥è¯¢-æ›¿æ¢ï¼‰" class="headerlink" title="äºŒã€Search/Replaceï¼ˆæŸ¥è¯¢/æ›¿æ¢ï¼‰"></a>äºŒã€Search/Replaceï¼ˆæŸ¥è¯¢/æ›¿æ¢ï¼‰</h4><ul>
<li><code>Double â‡§</code> æŸ¥è¯¢ä»»ä½•ä¸œè¥¿</li>
<li><code>âŒ˜F</code> æ–‡ä»¶å†…æŸ¥æ‰¾</li>
<li><code>âŒ˜G</code> æŸ¥æ‰¾æ¨¡å¼ä¸‹ï¼Œå‘ä¸‹æŸ¥æ‰¾</li>
<li><code>âŒ˜â‡§G</code> æŸ¥æ‰¾æ¨¡å¼ä¸‹ï¼Œå‘ä¸ŠæŸ¥æ‰¾</li>
<li><code>âŒ˜R</code> æ–‡ä»¶å†…æ›¿æ¢</li>
<li><code>âŒ˜â‡§F</code> å…¨å±€æŸ¥æ‰¾ï¼ˆæ ¹æ®è·¯å¾„ï¼‰</li>
<li><code>âŒ˜â‡§R</code> å…¨å±€æ›¿æ¢ï¼ˆæ ¹æ®è·¯å¾„ï¼‰</li>
<li><code>âŒ˜â‡§S</code> æŸ¥è¯¢ç»“æ„ï¼ˆUltimate Edition ç‰ˆä¸“ç”¨ï¼Œéœ€è¦åœ¨Keymapä¸­è®¾ç½®ï¼‰</li>
<li><code>âŒ˜â‡§M</code> æ›¿æ¢ç»“æ„ï¼ˆUltimate Edition ç‰ˆä¸“ç”¨ï¼Œéœ€è¦åœ¨Keymapä¸­è®¾ç½®ï¼‰</li>
</ul>
<h4 id="ä¸‰ã€Usage-Searchï¼ˆä½¿ç”¨æŸ¥è¯¢ï¼‰"><a href="#ä¸‰ã€Usage-Searchï¼ˆä½¿ç”¨æŸ¥è¯¢ï¼‰" class="headerlink" title="ä¸‰ã€Usage Searchï¼ˆä½¿ç”¨æŸ¥è¯¢ï¼‰"></a>ä¸‰ã€Usage Searchï¼ˆä½¿ç”¨æŸ¥è¯¢ï¼‰</h4><ul>
<li><code>âŒ¥F7 / âŒ˜F7</code> åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾ç”¨æ³• / åœ¨ç±»ä¸­æŸ¥æ‰¾ç”¨æ³•</li>
<li><code>âŒ˜â‡§F7</code> åœ¨æ–‡ä»¶ä¸­çªå‡ºæ˜¾ç¤ºçš„ç”¨æ³•</li>
<li><code>âŒ˜âŒ¥F7</code> æ˜¾ç¤ºç”¨æ³•</li>
<li><code>âŒ˜â‡§I</code> æŸ¥çœ‹å®šä¹‰çš„ç±»,å¿«é€ŸæŸ¥çœ‹</li>
</ul>
<h4 id="å››ã€Compile-and-Runï¼ˆç¼–è¯‘å’Œè¿è¡Œï¼‰"><a href="#å››ã€Compile-and-Runï¼ˆç¼–è¯‘å’Œè¿è¡Œï¼‰" class="headerlink" title="å››ã€Compile and Runï¼ˆç¼–è¯‘å’Œè¿è¡Œï¼‰"></a>å››ã€Compile and Runï¼ˆç¼–è¯‘å’Œè¿è¡Œï¼‰</h4><ul>
<li><code>âŒ˜F9</code> ç¼–è¯‘Project</li>
<li><code>âŒ˜â‡§F9</code> ç¼–è¯‘é€‰æ‹©çš„æ–‡ä»¶ã€åŒ…æˆ–æ¨¡å—</li>
<li><code>âŒƒâŒ¥R</code> å¼¹å‡º Run çš„å¯é€‰æ‹©èœå•</li>
<li><code>âŒƒâŒ¥D</code> å¼¹å‡º Debug çš„å¯é€‰æ‹©èœå•</li>
<li><code>âŒƒR</code> è¿è¡Œ</li>
<li><code>âŒƒD</code> è°ƒè¯•</li>
<li><code>âŒƒâ‡§R, âŒƒâ‡§D</code> ä»ç¼–è¾‘å™¨è¿è¡Œä¸Šä¸‹æ–‡ç¯å¢ƒé…ç½®</li>
</ul>
<h4 id="äº”ã€Debuggingï¼ˆè°ƒè¯•ï¼‰"><a href="#äº”ã€Debuggingï¼ˆè°ƒè¯•ï¼‰" class="headerlink" title="äº”ã€Debuggingï¼ˆè°ƒè¯•ï¼‰"></a>äº”ã€Debuggingï¼ˆè°ƒè¯•ï¼‰</h4><ul>
<li><code>F8</code> è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œå¦‚æœå½“å‰è¡Œæ–­ç‚¹æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ™ä¸è¿›å…¥å½“å‰æ–¹æ³•ä½“å†…</li>
<li><code>F7</code> è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œå¦‚æœå½“å‰è¡Œæ–­ç‚¹æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ™è¿›å…¥å½“å‰æ–¹æ³•ä½“å†…ï¼Œå¦‚æœè¯¥æ–¹æ³•ä½“è¿˜æœ‰æ–¹æ³•ï¼Œåˆ™ä¸ä¼šè¿›å…¥è¯¥å†…åµŒçš„æ–¹æ³•ä¸­</li>
<li><code>â‡§F7</code> æ™ºèƒ½æ­¥å…¥ï¼Œæ–­ç‚¹æ‰€åœ¨è¡Œä¸Šæœ‰å¤šä¸ªæ–¹æ³•è°ƒç”¨ï¼Œä¼šå¼¹å‡ºè¿›å…¥å“ªä¸ªæ–¹æ³•</li>
<li><code>â‡§F8</code> è·³å‡º</li>
<li><code>âŒ¥F9</code> è¿è¡Œåˆ°å…‰æ ‡å¤„ï¼Œå¦‚æœå…‰æ ‡å‰æœ‰å…¶ä»–æ–­ç‚¹ä¼šè¿›å…¥åˆ°è¯¥æ–­ç‚¹</li>
<li><code>âŒ¥F8</code> è®¡ç®—è¡¨è¾¾å¼ï¼ˆå¯ä»¥æ›´æ”¹å˜é‡å€¼ä½¿å…¶ç”Ÿæ•ˆï¼‰</li>
<li><code>âŒ˜âŒ¥R</code> æ¢å¤ç¨‹åºè¿è¡Œï¼Œå¦‚æœè¯¥æ–­ç‚¹ä¸‹é¢ä»£ç è¿˜æœ‰æ–­ç‚¹åˆ™åœåœ¨ä¸‹ä¸€ä¸ªæ–­ç‚¹ä¸Š</li>
<li><code>âŒ˜F8</code> åˆ‡æ¢æ–­ç‚¹ï¼ˆè‹¥å…‰æ ‡å½“å‰è¡Œæœ‰æ–­ç‚¹åˆ™å–æ¶ˆæ–­ç‚¹ï¼Œæ²¡æœ‰åˆ™åŠ ä¸Šæ–­ç‚¹ï¼‰</li>
<li><code>âŒ˜â‡§F8</code> æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯</li>
<li></li>
</ul>
<h4 id="å…­ã€Navigationï¼ˆå¯¼èˆªï¼‰"><a href="#å…­ã€Navigationï¼ˆå¯¼èˆªï¼‰" class="headerlink" title="å…­ã€Navigationï¼ˆå¯¼èˆªï¼‰"></a>å…­ã€Navigationï¼ˆå¯¼èˆªï¼‰</h4><ul>
<li><code>âŒ˜O</code> æŸ¥æ‰¾ç±»æ–‡ä»¶</li>
<li><code>âŒ˜â‡§O</code> æŸ¥æ‰¾æ‰€æœ‰ç±»å‹æ–‡ä»¶ã€æ‰“å¼€æ–‡ä»¶ã€æ‰“å¼€ç›®å½•ï¼Œæ‰“å¼€ç›®å½•éœ€è¦åœ¨è¾“å…¥çš„å†…å®¹å‰é¢æˆ–åé¢åŠ ä¸€ä¸ªåæ–œæ <code>/</code></li>
<li><code>âŒ˜âŒ¥O</code> å‰å¾€æŒ‡å®šçš„å˜é‡ / æ–¹æ³•</li>
<li><code>âŒƒâ† / âŒƒâ†’</code> å·¦å³åˆ‡æ¢æ‰“å¼€çš„ç¼–è¾‘tabé¡µ</li>
<li><code>F12</code> è¿”å›åˆ°å‰ä¸€ä¸ªå·¥å…·çª—å£</li>
<li><code>â‹</code> ä»å·¥å…·çª—å£è¿›å…¥ä»£ç æ–‡ä»¶çª—å£</li>
<li><code>â‡§â‹</code> éšè—å½“å‰æˆ–æœ€åä¸€ä¸ªæ´»åŠ¨çš„çª—å£ï¼Œä¸”å…‰æ ‡è¿›å…¥ä»£ç æ–‡ä»¶çª—å£</li>
<li><code>âŒ˜â‡§F4</code> å…³é—­æ´»åŠ¨run/messages/find/â€¦ tab</li>
<li><code>âŒ˜L</code> åœ¨å½“å‰æ–‡ä»¶è·³è½¬åˆ°æŸä¸€è¡Œçš„æŒ‡å®šå¤„</li>
<li><code>âŒ˜E</code> æ˜¾ç¤ºæœ€è¿‘æ‰“å¼€çš„æ–‡ä»¶è®°å½•åˆ—è¡¨</li>
<li><code>âŒ˜âŒ¥â† / âŒ˜âŒ¥â†’</code> é€€å› / å‰è¿›åˆ°ä¸Šä¸€ä¸ªæ“ä½œçš„åœ°æ–¹</li>
<li><code>âŒ˜â‡§âŒ«</code> è·³è½¬åˆ°æœ€åä¸€ä¸ªç¼–è¾‘çš„åœ°æ–¹</li>
<li><code>âŒ¥F1</code> æ˜¾ç¤ºå½“å‰æ–‡ä»¶é€‰æ‹©ç›®æ ‡å¼¹å‡ºå±‚ï¼Œå¼¹å‡ºå±‚ä¸­æœ‰å¾ˆå¤šç›®æ ‡å¯ä»¥è¿›è¡Œé€‰æ‹©(å¦‚åœ¨ä»£ç ç¼–è¾‘çª—å£å¯ä»¥é€‰æ‹©æ˜¾ç¤ºè¯¥æ–‡ä»¶çš„Finder)</li>
<li><code>âŒ˜B / âŒ˜ é¼ æ ‡ç‚¹å‡»</code> è¿›å…¥å…‰æ ‡æ‰€åœ¨çš„æ–¹æ³•/å˜é‡çš„æ¥å£æˆ–æ˜¯å®šä¹‰å¤„</li>
<li><code>âŒ˜âŒ¥B</code> è·³è½¬åˆ°å®ç°å¤„ï¼Œåœ¨æŸä¸ªè°ƒç”¨çš„æ–¹æ³•åä¸Šä½¿ç”¨ä¼šè·³åˆ°å…·ä½“çš„å®ç°å¤„ï¼Œå¯ä»¥è·³è¿‡æ¥å£</li>
<li><code>âŒ¥ Space, âŒ˜Y</code> å¿«é€Ÿæ‰“å¼€å…‰æ ‡æ‰€åœ¨æ–¹æ³•ã€ç±»çš„å®šä¹‰</li>
<li><code>âŒƒâ‡§B</code> è·³è½¬åˆ°ç±»å‹å£°æ˜å¤„</li>
<li><code>âŒ˜U</code> å‰å¾€å½“å‰å…‰æ ‡æ‰€åœ¨æ–¹æ³•çš„çˆ¶ç±»çš„æ–¹æ³• / æ¥å£å®šä¹‰</li>
<li><code>âŒƒâ†“ / âŒƒâ†‘</code> å½“å‰å…‰æ ‡è·³è½¬åˆ°å½“å‰æ–‡ä»¶çš„å‰ä¸€ä¸ª/åä¸€ä¸ªæ–¹æ³•åä½ç½®</li>
<li><code>âŒ˜] / âŒ˜[</code> ç§»åŠ¨å…‰æ ‡åˆ°å½“å‰æ‰€åœ¨ä»£ç çš„èŠ±æ‹¬å·å¼€å§‹/ç»“æŸä½ç½®</li>
<li><code>âŒ˜F12</code> å¼¹å‡ºå½“å‰æ–‡ä»¶ç»“æ„å±‚ï¼Œå¯ä»¥åœ¨å¼¹å‡ºçš„å±‚ä¸Šç›´æ¥è¾“å…¥è¿›è¡Œç­›é€‰ï¼ˆå¯ç”¨äºæœç´¢ç±»ä¸­çš„æ–¹æ³•ï¼‰</li>
<li><code>âŒƒH</code> æ˜¾ç¤ºå½“å‰ç±»çš„å±‚æ¬¡ç»“æ„</li>
<li><code>âŒ˜â‡§H</code> æ˜¾ç¤ºæ–¹æ³•å±‚æ¬¡ç»“æ„</li>
<li><code>âŒƒâŒ¥H</code> æ˜¾ç¤ºè°ƒç”¨å±‚æ¬¡ç»“æ„</li>
<li><code>F2 / â‡§F2</code> è·³è½¬åˆ°ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªçªå‡ºé”™è¯¯æˆ–è­¦å‘Šçš„ä½ç½®</li>
<li><code>F4 / âŒ˜â†“</code> ç¼–è¾‘/æŸ¥çœ‹ä»£ç æº</li>
<li><code>âŒ¥ Home</code> æ˜¾ç¤ºåˆ°å½“å‰æ–‡ä»¶çš„å¯¼èˆªæ¡</li>
<li><code>F3</code>é€‰ä¸­æ–‡ä»¶/æ–‡ä»¶å¤¹/ä»£ç è¡Œï¼Œæ·»åŠ /å–æ¶ˆä¹¦ç­¾</li>
<li><code>âŒ¥F3</code> é€‰ä¸­æ–‡ä»¶/æ–‡ä»¶å¤¹/ä»£ç è¡Œï¼Œä½¿ç”¨åŠ©è®°ç¬¦æ·»åŠ /å–æ¶ˆä¹¦ç­¾</li>
<li><code>âŒƒ0...âŒƒ9</code> å®šä½åˆ°å¯¹åº”æ•°å€¼çš„ä¹¦ç­¾ä½ç½®</li>
<li><code>âŒ˜F3</code> æ˜¾ç¤ºæ‰€æœ‰ä¹¦ç­¾</li>
</ul>
<h4 id="ä¸ƒã€Refactoringï¼ˆé‡æ„ï¼‰"><a href="#ä¸ƒã€Refactoringï¼ˆé‡æ„ï¼‰" class="headerlink" title="ä¸ƒã€Refactoringï¼ˆé‡æ„ï¼‰"></a>ä¸ƒã€Refactoringï¼ˆé‡æ„ï¼‰</h4><ul>
<li><code>F5</code> å¤åˆ¶æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</li>
<li><code>F6</code> ç§»åŠ¨æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</li>
<li><code>âŒ˜âŒ«</code> åœ¨æ–‡ä»¶ä¸Šä¸ºå®‰å…¨åˆ é™¤æ–‡ä»¶ï¼Œå¼¹å‡ºç¡®è®¤æ¡†</li>
<li><code>â‡§F6</code> é‡å‘½åæ–‡ä»¶</li>
<li><code>âŒ˜F6</code> æ›´æ”¹ç­¾å</li>
<li><code>âŒ˜âŒ¥N</code> ä¸€è‡´æ€§</li>
<li><code>âŒ˜âŒ¥M</code> å°†é€‰ä¸­çš„ä»£ç æå–ä¸ºæ–¹æ³•</li>
<li><code>âŒ˜âŒ¥V</code> æå–å˜é‡</li>
<li><code>âŒ˜âŒ¥F</code> æå–å­—æ®µ</li>
<li><code>âŒ˜âŒ¥C</code> æå–å¸¸é‡</li>
<li><code>âŒ˜âŒ¥P</code> æå–å‚æ•°</li>
</ul>
<h4 id="å…«ã€VCS-Local-Historyï¼ˆç‰ˆæœ¬æ§åˆ¶-æœ¬åœ°å†å²è®°å½•ï¼‰"><a href="#å…«ã€VCS-Local-Historyï¼ˆç‰ˆæœ¬æ§åˆ¶-æœ¬åœ°å†å²è®°å½•ï¼‰" class="headerlink" title="å…«ã€VCS/Local Historyï¼ˆç‰ˆæœ¬æ§åˆ¶/æœ¬åœ°å†å²è®°å½•ï¼‰"></a>å…«ã€VCS/Local Historyï¼ˆç‰ˆæœ¬æ§åˆ¶/æœ¬åœ°å†å²è®°å½•ï¼‰</h4><ul>
<li><code>âŒ˜K</code> æäº¤ä»£ç åˆ°ç‰ˆæœ¬æ§åˆ¶å™¨</li>
<li><code>âŒ˜T</code> ä»ç‰ˆæœ¬æ§åˆ¶å™¨æ›´æ–°ä»£ç </li>
<li><code>âŒ¥â‡§C</code> æŸ¥çœ‹æœ€è¿‘çš„å˜æ›´è®°å½•</li>
<li><code>âŒƒC</code> å¿«é€Ÿå¼¹å‡ºç‰ˆæœ¬æ§åˆ¶å™¨æ“ä½œé¢æ¿</li>
</ul>
<h4 id="ä¹ã€Live-Templatesï¼ˆåŠ¨æ€ä»£ç æ¨¡æ¿ï¼‰"><a href="#ä¹ã€Live-Templatesï¼ˆåŠ¨æ€ä»£ç æ¨¡æ¿ï¼‰" class="headerlink" title="ä¹ã€Live Templatesï¼ˆåŠ¨æ€ä»£ç æ¨¡æ¿ï¼‰"></a>ä¹ã€Live Templatesï¼ˆåŠ¨æ€ä»£ç æ¨¡æ¿ï¼‰</h4><ul>
<li><code>âŒ˜âŒ¥J</code> å¼¹å‡ºæ¨¡æ¿é€‰æ‹©çª—å£ï¼Œå°†é€‰å®šçš„ä»£ç ä½¿ç”¨åŠ¨æ€æ¨¡æ¿åŒ…ä½</li>
<li><code>âŒ˜J</code> æ’å…¥è‡ªå®šä¹‰åŠ¨æ€ä»£ç æ¨¡æ¿</li>
</ul>
<h4 id="åã€Generalï¼ˆé€šç”¨ï¼‰"><a href="#åã€Generalï¼ˆé€šç”¨ï¼‰" class="headerlink" title="åã€Generalï¼ˆé€šç”¨ï¼‰"></a>åã€Generalï¼ˆé€šç”¨ï¼‰</h4><ul>
<li><code>âŒ˜1...âŒ˜9</code> æ‰“å¼€ç›¸åº”ç¼–å·çš„å·¥å…·çª—å£</li>
<li><code>âŒ˜S</code> ä¿å­˜æ‰€æœ‰</li>
<li><code>âŒ˜âŒ¥Y</code> åŒæ­¥ã€åˆ·æ–°</li>
<li><code>âŒƒâŒ˜F</code> åˆ‡æ¢å…¨å±æ¨¡å¼</li>
<li><code>âŒ˜â‡§F12</code> åˆ‡æ¢æœ€å¤§åŒ–ç¼–è¾‘å™¨</li>
<li><code>âŒ¥â‡§F</code> æ·»åŠ åˆ°æ”¶è—å¤¹</li>
<li><code>âŒ¥â‡§I</code> æ£€æŸ¥å½“å‰æ–‡ä»¶ä¸å½“å‰çš„é…ç½®æ–‡ä»¶</li>
<li><code>Â§âŒƒ, âŒƒ`</code> å¿«é€Ÿåˆ‡æ¢å½“å‰çš„schemeï¼ˆåˆ‡æ¢ä¸»é¢˜ã€ä»£ç æ ·å¼ç­‰ï¼‰</li>
<li><code>âŒ˜,</code> æ‰“å¼€IDEAç³»ç»Ÿè®¾ç½®</li>
<li><code>âŒ˜;</code> æ‰“å¼€é¡¹ç›®ç»“æ„å¯¹è¯æ¡†</li>
<li><code>â‡§âŒ˜A</code> æŸ¥æ‰¾åŠ¨ä½œï¼ˆå¯è®¾ç½®ç›¸å…³é€‰é¡¹ï¼‰</li>
<li><code>âŒƒâ‡¥</code> ç¼–è¾‘çª—å£æ ‡ç­¾å’Œå·¥å…·çª—å£ä¹‹é—´åˆ‡æ¢ï¼ˆå¦‚æœåœ¨åˆ‡æ¢çš„è¿‡ç¨‹åŠ æŒ‰ä¸Šdeleteï¼Œåˆ™æ˜¯å…³é—­å¯¹åº”é€‰ä¸­çš„çª—å£ï¼‰</li>
</ul>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>IDEA</tag>
      </tags>
  </entry>
  <entry>
    <title>Android Toolbar ä½¿ç”¨è¯¦è§£</title>
    <url>/2019/06/27/Android-Toolbar-%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="åˆè¯†Toolbar"><a href="#åˆè¯†Toolbar" class="headerlink" title="åˆè¯†Toolbar"></a>åˆè¯†Toolbar</h1><p><strong>Toolbar</strong> æ˜¯åœ¨ Android 5.0 å¼€å§‹æ¨å‡ºçš„ä¸€ä¸ª Material Design é£æ ¼çš„å¯¼èˆªæ§ä»¶ ï¼ŒGoogle éå¸¸æ¨èå¤§å®¶ä½¿ç”¨ <strong>Toolbar</strong> æ¥ä½œä¸ºAndroidå®¢æˆ·ç«¯çš„å¯¼èˆªæ ï¼Œä»¥æ­¤æ¥å–ä»£ä¹‹å‰çš„ <strong>Actionbar</strong> ã€‚</p>
<a id="more"></a>
<p>ä¸ <strong>Actionbar</strong> ç›¸æ¯”ï¼Œ<strong>Toolbar</strong> æ˜æ˜¾è¦çµæ´»çš„å¤šã€‚å®ƒä¸åƒ <strong>Actionbar</strong> ä¸€æ ·ï¼Œä¸€å®šè¦å›ºå®šåœ¨Activityçš„é¡¶éƒ¨ï¼Œè€Œæ˜¯å¯ä»¥æ”¾åˆ°ç•Œé¢çš„ä»»æ„ä½ç½®ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨è®¾è®¡ <strong>Toolbar</strong> çš„æ—¶å€™ï¼ŒGoogleä¹Ÿç•™ç»™äº†å¼€å‘è€…å¾ˆå¤šå¯å®šåˆ¶ä¿®æ”¹çš„ä½™åœ°ï¼Œè¿™äº›å¯å®šåˆ¶ä¿®æ”¹çš„å±æ€§åœ¨APIæ–‡æ¡£ä¸­éƒ½æœ‰è¯¦ç»†ä»‹ç»ï¼Œå¦‚ï¼š</p>
<ul>
<li><strong>è®¾ç½®å¯¼èˆªæ å›¾æ ‡ï¼›</strong></li>
<li><strong>è®¾ç½®Appçš„logoï¼›</strong></li>
<li><strong>æ”¯æŒè®¾ç½®æ ‡é¢˜å’Œå­æ ‡é¢˜ï¼›</strong></li>
<li><strong>æ”¯æŒæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªçš„è‡ªå®šä¹‰æ§ä»¶ï¼›</strong></li>
<li><strong>æ”¯æŒAction Menuï¼›</strong></li>
</ul>
<h1 id="ä½¿ç”¨Toolbar"><a href="#ä½¿ç”¨Toolbar" class="headerlink" title="ä½¿ç”¨Toolbar"></a>ä½¿ç”¨Toolbar</h1><p>å‰é¢æåˆ° <strong>Toolbar</strong> æ˜¯åœ¨ Android 5.0 æ‰å¼€å§‹åŠ ä¸Šçš„ï¼ŒGoogle ä¸ºäº†å°†è¿™ä¸€è®¾è®¡å‘ä¸‹å…¼å®¹ï¼Œè‡ªç„¶ä¹Ÿå°‘ä¸äº†è¦æ¨å‡ºå…¼å®¹ç‰ˆçš„ <strong>Toolbar</strong> ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å·¥ç¨‹ä¸­å¼•å…¥ <strong>appcompat-v7</strong> çš„å…¼å®¹åŒ…ï¼Œä½¿ç”¨ <strong>android.support.v7.widget.Toolbar</strong> è¿›è¡Œå¼€å‘ã€‚ä½†æ˜¯ç”±äº<strong>support</strong>åº“ç°åœ¨googleå›¢é˜Ÿå·²ç»ä¸åœ¨ç»´æŠ¤äº†ï¼Œæœ€æ–°ç‰ˆæœ¬å¥½åƒæ˜¯28ç‚¹å¤šï¼Œå·²ç»è¿ç§»åˆ°äº†<strong>AndroidX</strong>ï¼Œæ‰€ä»¥è¯¥ç¯‡æ–‡ç« ä½¿ç”¨<strong>AndroidX</strong>ï¼Œåªæ˜¯åŒ…åç›¸å¯¹çš„å˜åŒ–äº†ï¼Œä½¿ç”¨å’Œv7åŒ…æ²¡æœ‰å¤šå¤§å˜åŒ–ã€‚</p>
<p>å…ˆæ¥çœ‹çœ‹è¿è¡Œæ•ˆæœ</p>
<p><img src="toolbar_show.png" alt="Toolbaræ¼”ç¤º"></p>
<p>æŒ‰ç…§æ•ˆæœå›¾ï¼Œä»å·¦åˆ°å³åˆ†åˆ«æ˜¯æˆ‘ä»¬å‰é¢æåŠåˆ°çš„ <strong>å¯¼èˆªæ å›¾æ ‡</strong>ã€<strong>Appçš„logo</strong>ã€<strong>æ ‡é¢˜å’Œå­æ ‡é¢˜</strong>ã€<strong>è‡ªå®šä¹‰æ§ä»¶</strong>ã€ä»¥åŠ <strong>ActionMenu</strong> ã€‚æ¥ç€ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å¸ƒå±€æ–‡ä»¶å’Œä»£ç å®ç°ã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨å¸ƒå±€æ–‡ä»¶ <code>activity_main.xml</code>ä¸­æ·»åŠ è¿›æˆ‘ä»¬éœ€è¦çš„ Toolbar æ§ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.appcompat.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/toolbar"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">"@color/colorPrimary"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"textview"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">androidx.appcompat.widget.Toolbar</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ¥ç€åˆ›å»ºä¸€ä¸ª<code>toolbar_menu.xml</code>èœå•é¡¹</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/action_search"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">"@android:drawable/ic_input_add"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">"menu_search"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">"ifRoom"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/action_notification"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">"@android:drawable/ic_delete"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">"menu_notifications"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">"ifRoom"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/action_item1"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">"item_01"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">"never"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/action_item2"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">"item_02"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">"never"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æˆ‘çš„activityç»§æ‰¿è‡ªAppCompatActivityï¼Œå¹¶ä¸æ˜¯åŸç”Ÿsdkå†…éƒ¨çš„ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨<code>android:showAsAction</code>ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰çš„å‘½åç©ºé—´appã€‚</p>
<p>ifRoomè¡¨ç¤ºæœ‰ç©ºé—´åˆ™æ˜¾ç¤ºï¼Œneverè¡¨ç¤ºä»ä¸æ˜¾ç¤ºï¼Œè€Œæ˜¯ä¼šé€šè¿‡overflowwindowæ˜¾ç¤ºã€‚</p>
</blockquote>
<p>æœ€ååœ¨<code>MainActivity</code>ä¸­è°ƒç”¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Toolbar mToolbar;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        mToolbar = findViewById(R.id.toolbar);</span><br><span class="line"></span><br><span class="line">        mToolbar.setTitle(<span class="string">"æ ‡é¢˜"</span>);</span><br><span class="line">        mToolbar.setSubtitle(<span class="string">"å­æ ‡é¢˜"</span>);</span><br><span class="line">        mToolbar.setNavigationIcon(android.R.drawable.ic_menu_info_details);</span><br><span class="line">        mToolbar.setLogo(android.R.drawable.ic_menu_view);</span><br><span class="line">        setSupportActionBar(mToolbar); <span class="comment">//æœ€åè®¾ç½®</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">/**</span></span><br><span class="line"><span class="comment">  		èœå•æ ç›®</span></span><br><span class="line"><span class="comment">  	*/</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> </span>&#123;</span><br><span class="line">        getMenuInflater().inflate(R.menu.toolbar_menu, menu);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.onCreateOptionsMenu(menu);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´æ”¹ä¸»é¢˜ï¼š</p>
<p>ä¸ºäº†èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ToolBarï¼Œæˆ‘ä»¬éœ€è¦éšè—åŸæ¥çš„ActionBarï¼Œè¿™ä¸ªå¯ä»¥åœ¨ä¸»é¢˜ä¸­ä¿®æ”¹</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"windowNoTitle"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"windowActionBar"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æˆ–è€…ç»§æ‰¿æŸä¸ªçˆ¶ç±»:<code>Theme.AppCompat.Light.NoActionBar</code></p>
<p>ä¹Ÿå¯ä»¥åœ¨ä»£ç ä¸­</p>
<p>å¦‚æœæ˜¯<code>AppCompatActivity</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">supportRequestWindowFeature(Window.FEATURE_NO_TITLE);</span><br><span class="line"><span class="comment">//setContentViewä¹‹å‰è°ƒç”¨ï¼Œå¦åˆ™æŠ¥é”™</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯<code>Activity</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">requestWindowFeature(Window.FEATURE_NO_TITLE);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æœ€åè¿è¡Œå°±å¯ä»¥æœ‰ä¸Šé¢å›¾ä¸­çš„æ•ˆæœå•¦ã€‚</p>
</blockquote>
<h1 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h1><ul>
<li>å¦‚æœä½ æƒ³ä¿®æ”¹æ ‡é¢˜å’Œå­æ ‡é¢˜çš„å­—ä½“å¤§å°ã€é¢œè‰²ç­‰ï¼Œå¯ä»¥è°ƒç”¨<strong>setTitleTextColor</strong>ã€<strong>setTitleTextAppearance</strong>ã€<strong>setSubtitleTextColor</strong>ã€<strong>setSubtitleTextAppearance</strong> è¿™äº›APIï¼›</li>
<li>è‡ªå®šä¹‰çš„Viewä½äº <strong>title</strong>ã€<strong>subtitle</strong> å’Œ <strong>actionmenu</strong> ä¹‹é—´ï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœ <strong>title</strong> å’Œ <strong>subtitle</strong> éƒ½åœ¨ï¼Œä¸” <strong>actionmenué€‰é¡¹</strong> å¤ªå¤šçš„æ—¶å€™ï¼Œç•™ç»™è‡ªå®šä¹‰Viewçš„ç©ºé—´å°±è¶Šå°ï¼›</li>
<li><strong>å¯¼èˆªå›¾æ ‡</strong> å’Œ <strong>app logo</strong> çš„åŒºåˆ«åœ¨å“ªï¼Ÿå¦‚æœä½ åªè®¾ç½® <strong>å¯¼èˆªå›¾æ ‡</strong>ï¼ˆ or <strong>app logo</strong>ï¼‰ å’Œ <strong>title</strong>ã€<strong>subtitle</strong>ï¼Œä¼šå‘ç° <strong>app logo</strong> å’Œ <strong>title</strong>ã€<strong>subtitle</strong> çš„é—´è·æ¯”è¾ƒå°ï¼Œçœ‹èµ·æ¥ä¸å¦‚ <strong>å¯¼èˆªå›¾æ ‡</strong> ä¸ å®ƒä»¬ä¸¤æ­é…ç¾è§‚ï¼›</li>
<li><strong>Toolbar</strong> å’Œå…¶ä»–æ§ä»¶ä¸€æ ·ï¼Œå¾ˆå¤šå±æ€§è®¾ç½®æ–¹æ³•æ—¢æ”¯æŒä»£ç è®¾ç½®ï¼Œä¹Ÿæ”¯æŒåœ¨xmlä¸­è®¾ç½®</li>
<li><strong>å¦‚æœåªæ˜¯å½“æˆä¸€ä¸ªæ™®é€šæ§ä»¶ä½¿ç”¨ï¼Œå³ä¸è°ƒç”¨<code>setSupportActionBar(mToolbar);</code>æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨<code>mToolbar.inflateMenu</code>æ–¹æ³•æ¥è®¾ç½®èœå•ã€‚</strong></li>
</ul>
<h1 id="å…¶ä»–æ ·å¼ä¿®æ”¹"><a href="#å…¶ä»–æ ·å¼ä¿®æ”¹" class="headerlink" title="å…¶ä»–æ ·å¼ä¿®æ”¹"></a>å…¶ä»–æ ·å¼ä¿®æ”¹</h1><h2 id="ä¿®æ”¹Toolbar-popup-menuæ ·å¼"><a href="#ä¿®æ”¹Toolbar-popup-menuæ ·å¼" class="headerlink" title="ä¿®æ”¹Toolbar popup menuæ ·å¼"></a>ä¿®æ”¹Toolbar popup menuæ ·å¼</h2><p>ç‚¹å‡»å³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªpopup menuï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="popup_show.png" alt></p>
<p>å¯ä»¥çœ‹åˆ°å¼¹å‡ºèœå•çš„æ ·å¼æ˜¯ç™½åº•é»‘å­—ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰åŠæ³•æ”¹å˜å®ƒçš„èƒŒæ™¯é¢œè‰²å‘¢ï¼Œä½¿å¾—èœå•æ˜¾ç¤ºä¸ºé»‘åº•ç™½å­—ã€‚è¿™è‚¯å®šæ˜¯æœ‰çš„ã€‚</p>
<p>åœ¨<code>styles.xml</code>æ–‡ä»¶ä¸­æ–°å»ºä¸€ä¸ªä¸»é¢˜</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- toolbarå¼¹å‡ºèœå•æ ·å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"ToolbarPopupTheme"</span> <span class="attr">parent</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Dark"</span>&gt;</span>   </span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:colorBackground"</span>&gt;</span>#000000<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªä¸»é¢˜çš„parentæ˜¯ç›´æ¥ç»§æ‰¿è‡ª<code>ThemeOverlay.AppCompat.Dark</code>ï¼Œæ˜¯æ”¯æŒåŒ…çš„ä¸€ä¸ªä¸»é¢˜ï¼Œå¹¶ä¸”æˆ‘ä»¬åœ¨å†…éƒ¨å£°æ˜äº†<code>android:colorBackground</code>è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬åªè¦æ›´æ”¹è¿™ä¸ªå±æ€§å°±èƒ½å˜æ›´èœå•çš„èƒŒæ™¯é¢œè‰²äº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å¸ƒå±€æ–‡ä»¶ä¸­å¼•å…¥è¿™ä¸ªä¸»é¢˜ï¼Œè¿™ä¹Ÿå¾ˆç®€å•ï¼Œä¸ºtoolbaræ·»åŠ é¢å¤–çš„å±æ€§å¦‚ä¸‹:</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">app:popupTheme="@style/ToolbarPopupTheme"</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="popup_show2.png" alt></p>
<h2 id="ä¿®æ”¹Toolbar-popup-menu-å¼¹å‡ºä½ç½®"><a href="#ä¿®æ”¹Toolbar-popup-menu-å¼¹å‡ºä½ç½®" class="headerlink" title="ä¿®æ”¹Toolbar popup menu å¼¹å‡ºä½ç½®"></a>ä¿®æ”¹Toolbar popup menu å¼¹å‡ºä½ç½®</h2><p>åœ¨ä¸Šå›¾çœ‹åˆ°ï¼Œå¼¹å‡ºçš„èœå•çš„ä½ç½®æ˜¯è¿‡äºåä¸Šçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹å®ƒçš„ä½ç½®ï¼Œè®©å®ƒåœ¨toolbarçš„ä¸‹é¢ï¼Œè¿™æ ·çœ‹èµ·æ¥ä¹Ÿç¾è§‚ä¸€äº›ï¼š</p>
<p>ä¿®æ”¹<code>styles.xml</code>æ–‡ä»¶ï¼Œæ·»åŠ </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- toolbarå¼¹å‡ºèœå•æ ·å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"ToolbarPopupTheme"</span> <span class="attr">parent</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Dark"</span>&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:colorBackground"</span>&gt;</span>#000000<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"actionOverflowMenuStyle"</span>&gt;</span>@style/OverflowMenuStyle<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </span></span><br><span class="line"><span class="xml">  	<span class="comment">&lt;!--æ–°å¢ä¸€ä¸ªitemï¼Œç”¨äºæ§åˆ¶menu--&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"OverflowMenuStyle"</span> <span class="attr">parent</span>=<span class="string">"Widget.AppCompat.Light.PopupMenu.Overflow"</span>&gt;</span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"overlapAnchor"</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span>  </span></span><br><span class="line"><span class="xml">  	<span class="comment">&lt;!--æŠŠè¯¥å±æ€§æ”¹ä¸ºfalseå³å¯ä½¿menuä½ç½®ä½äºtoolbarä¹‹ä¸‹--&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¸ƒå±€æ–‡ä»¶ä¸­å¼•ç”¨è¯¥ä¸»é¢˜</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">app:popupTheme="@style/ToolbarPopupTheme"</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="popup_show3.png" alt></p>
<h2 id="ä¿®æ”¹Action-Menu-Item-çš„æ–‡å­—é¢œè‰²"><a href="#ä¿®æ”¹Action-Menu-Item-çš„æ–‡å­—é¢œè‰²" class="headerlink" title="ä¿®æ”¹Action Menu Item çš„æ–‡å­—é¢œè‰²"></a>ä¿®æ”¹Action Menu Item çš„æ–‡å­—é¢œè‰²</h2><p>åœ¨<code>styles.xml</code>æ–‡ä»¶ä¸­ï¼Œåœ¨popup menuçš„ä¸»é¢˜æ·»åŠ ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- toolbarå¼¹å‡ºèœå•æ ·å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"ToolbarPopupTheme"</span> <span class="attr">parent</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Dark"</span>&gt;</span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:colorBackground"</span>&gt;</span>#000000<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"actionOverflowMenuStyle"</span>&gt;</span>@style/OverflowMenuStyle<span class="tag">&lt;/<span class="name">item</span>&gt;</span> <span class="comment">&lt;!--æ–°å¢ä¸€ä¸ªitemï¼Œç”¨äºæ§åˆ¶menu--&gt;</span></span></span><br><span class="line"><span class="xml">		<span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:textColorPrimary"</span>&gt;</span>@color/colorPrimary<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¸ƒå±€æ–‡ä»¶ä¸­å¼•ç”¨è¯¥ä¸»é¢˜</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">app:popupTheme="@style/ToolbarPopupTheme"</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="popup_show4.png" alt></p>
<h1 id="è¸©å‘"><a href="#è¸©å‘" class="headerlink" title="è¸©å‘"></a>è¸©å‘</h1><h2 id="è®¾ç½®ç›‘å¬äº‹ä»¶ä¸ç”Ÿæ•ˆ"><a href="#è®¾ç½®ç›‘å¬äº‹ä»¶ä¸ç”Ÿæ•ˆ" class="headerlink" title="è®¾ç½®ç›‘å¬äº‹ä»¶ä¸ç”Ÿæ•ˆ"></a>è®¾ç½®ç›‘å¬äº‹ä»¶ä¸ç”Ÿæ•ˆ</h2><p>çœ‹ä¸€ä¸‹ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initToolbar</span><span class="params">()</span></span>&#123;</span><br><span class="line">		mToolbar = findViewById(R.id.toolbar);</span><br><span class="line">		mToolbar.setTitle(<span class="string">""</span>);</span><br><span class="line">		mToolbar.setNavigationOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">				<span class="meta">@Override</span></span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">						<span class="comment">//ã€‚ã€‚ã€‚</span></span><br><span class="line">				&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		mToolbar.setOnMenuItemClickListener(<span class="keyword">new</span> Toolbar.OnMenuItemClickListener() &#123;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onMenuItemClick</span><span class="params">(MenuItem item)</span> </span>&#123;</span><br><span class="line">						<span class="comment">//ã€‚ã€‚ã€‚</span></span><br><span class="line">						<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">				&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		setSupportActionBar(mToolbar);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»£ç æ­£å¸¸è®¾ç½®ç›‘å¬ä½†æ˜¯å°±æ˜¯ç›‘å¬äº‹ä»¶å°±æ˜¯æ²¡æœ‰è§¦å‘ï¼ŒæŸ¥è¯¢åï¼Œç›‘å¬äº‹ä»¶å¿…é¡»åœ¨<code>setSupportActionBar(mToolbar);</code>ä¹‹åè®¾ç½®ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initToolbar</span><span class="params">()</span></span>&#123;</span><br><span class="line">		mToolbar = findViewById(R.id.toolbar);</span><br><span class="line">		mToolbar.setTitle(<span class="string">""</span>);</span><br><span class="line">		setSupportActionBar(mToolbar);</span><br><span class="line">  	mToolbar.setNavigationOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">				<span class="meta">@Override</span></span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">						<span class="comment">//ã€‚ã€‚ã€‚</span></span><br><span class="line">				&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		mToolbar.setOnMenuItemClickListener(<span class="keyword">new</span> Toolbar.OnMenuItemClickListener() &#123;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">				<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onMenuItemClick</span><span class="params">(MenuItem item)</span> </span>&#123;</span><br><span class="line">						<span class="comment">//ã€‚ã€‚ã€‚</span></span><br><span class="line">						<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">				&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è°ƒæ¢ä¸€ä¸‹ä½ç½®å³å¯æ­£å¸¸è¿è¡Œã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä»¥ä¸Šéƒ½æ˜¯ä¸€äº›åŸºæœ¬çš„ä½¿ç”¨ï¼ŒToolbaræ§ä»¶çš„ä½¿ç”¨è¿˜æ˜¯å¾ˆçµæ´»çš„ï¼Œè¿˜æœ‰å¾ˆå¤šä¸€äº›é«˜çº§æŠ€å·§ï¼Œæ¯”å¦‚é…åˆä¸ŠçŠ¶æ€æ å˜æˆæ²‰æµ¸å¼ï¼Œæˆ–è€…é…åˆ<code>CoordinatorLayout</code>ç­‰å®ç°æ›´ç‚«çš„æ•ˆæœã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.jianshu.com/p/79604c3ddcae" target="_blank" rel="noopener">https://www.jianshu.com/p/79604c3ddcae</a></p>
<p><a href="https://www.jianshu.com/p/ae0013a4f71a" target="_blank" rel="noopener">https://www.jianshu.com/p/ae0013a4f71a</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Activity çš„4ç§å¯åŠ¨æ¨¡å¼</title>
    <url>/2019/06/20/Activity-%E7%9A%844%E7%A7%8D%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å¯åŠ¨æ¨¡å¼ç®€å•åœ°è¯´å°±æ˜¯Activityå¯åŠ¨æ—¶çš„ç­–ç•¥ï¼Œåœ¨<code>AndroidManifest.xml</code>ä¸­çš„æ ‡ç­¾çš„<code>android:launchMode</code>å±æ€§è®¾ç½®ï¼›å¯åŠ¨æ¨¡å¼æœ‰4ç§ï¼Œåˆ†åˆ«ä¸ºstandardã€singleTopã€singleTaskã€singleInstanceï¼›</p>
<a id="more"></a>
<ul>
<li>standard æ ‡å‡†æ¨¡å¼ï¼Œæ¯æ¬¡éƒ½æ–°å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡</li>
<li>singleTop å¦‚æœåœ¨ä»»åŠ¡æ ˆé¡¶å‘ç°äº†ç›¸åŒçš„å®ä¾‹åˆ™é‡ç”¨ï¼Œå¦åˆ™æ–°å»ºå¹¶å‹å…¥æ ˆé¡¶</li>
<li>singleTask å¦‚æœåœ¨ä»»åŠ¡æ ˆä¸­å‘ç°äº†ç›¸åŒçš„å®ä¾‹ï¼Œå°†å…¶ä¸Šé¢çš„ä»»åŠ¡ç»ˆæ­¢å¹¶ç§»é™¤ï¼Œé‡ç”¨è¯¥å®ä¾‹ã€‚å¦åˆ™æ–°å»ºå®ä¾‹å¹¶å…¥æ ˆ</li>
<li>singleInstance å…è®¸ä¸åŒåº”ç”¨ï¼Œè¿›ç¨‹çº¿ç¨‹ç­‰å…±ç”¨ä¸€ä¸ªå®ä¾‹ï¼Œæ— è®ºä»ä½•åº”ç”¨è°ƒç”¨è¯¥å®ä¾‹éƒ½é‡ç”¨</li>
</ul>
<h1 id="ä»»åŠ¡æ ˆ"><a href="#ä»»åŠ¡æ ˆ" class="headerlink" title="ä»»åŠ¡æ ˆ"></a>ä»»åŠ¡æ ˆ</h1><p>æ¯ä¸ªåº”ç”¨éƒ½æœ‰ä¸€ä¸ªä»»åŠ¡æ ˆï¼Œæ˜¯ç”¨æ¥å­˜æ”¾Activityçš„ï¼ŒåŠŸèƒ½ç±»ä¼¼äºå‡½æ•°è°ƒç”¨çš„æ ˆï¼Œå…ˆåé¡ºåºä»£è¡¨äº†Activityçš„å‡ºç°é¡ºåºï¼›æ¯”å¦‚Activity1â€“&gt;Activity2â€“&gt;Activity3,åˆ™ä»»åŠ¡æ ˆä¸ºï¼š</p>
<p><img src="taskstack.gif" alt></p>
<h1 id="å¯åŠ¨æ¨¡å¼"><a href="#å¯åŠ¨æ¨¡å¼" class="headerlink" title="å¯åŠ¨æ¨¡å¼"></a>å¯åŠ¨æ¨¡å¼</h1><h2 id="standard"><a href="#standard" class="headerlink" title="standard"></a>standard</h2><p><img src="standard.gif" alt></p>
<p>æ¯æ¬¡æ¿€æ´»Activityæ—¶(startActivity)ï¼Œéƒ½åˆ›å»ºActivityå®ä¾‹ï¼Œå¹¶æ”¾å…¥ä»»åŠ¡æ ˆï¼›</p>
<p>ä½†æ˜¯æ¯æ¬¡éƒ½æ–°å»ºä¸€ä¸ªå®ä¾‹çš„è¯çœŸæ˜¯è¿‡äºæµªè´¹ï¼Œä¸ºäº†ä¼˜åŒ–åº”è¯¥å°½é‡è€ƒè™‘ä½™ä¸‹ä¸‰ç§æ–¹å¼ã€‚</p>
<h2 id="singleTop"><a href="#singleTop" class="headerlink" title="singleTop"></a>singleTop</h2><p><img src="singleTop.gif" alt></p>
<p>æ¯æ¬¡æ‰«ææ ˆé¡¶ï¼Œå¦‚æœåœ¨ä»»åŠ¡æ ˆé¡¶å‘ç°äº†ç›¸åŒçš„å®ä¾‹åˆ™é‡ç”¨ï¼Œå¦åˆ™æ–°å»ºå¹¶å‹å…¥æ ˆé¡¶ã€‚</p>
<p>åœ¨<code>AndroidManifest.xml</code>ä¸­</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">".SingleTopActivity"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:label</span>=<span class="string">"@string/singletop"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:launchMode</span>=<span class="string">"singleTop"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="singleTask"><a href="#singleTask" class="headerlink" title="singleTask"></a>singleTask</h2><p><img src="singleTask.gif" alt></p>
<p>ä¸singleTopçš„åŒºåˆ«æ˜¯singleTaskä¼šæ‰«ææ•´ä¸ªä»»åŠ¡æ ˆå¹¶åˆ¶å®šç­–ç•¥ã€‚ä¸Šæ•ˆæœå›¾ï¼š</p>
<p>ä½¿ç”¨æ—¶éœ€è¦å°å¿ƒå› ä¸ºä¼šå°†ä¹‹å‰å…¥æ ˆçš„å®ä¾‹ä¹‹ä¸Šçš„å®ä¾‹å…¨éƒ¨ç§»é™¤ï¼Œéœ€è¦æ ¼å¤–å°å¿ƒé€»è¾‘ã€‚</p>
<p>åœ¨<code>AndroidManifest.xml</code>ä¸­</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">".SingleTopActivity"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:label</span>=<span class="string">"@string/singletop"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:launchMode</span>=<span class="string">"singleTop"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="singleInstance"><a href="#singleInstance" class="headerlink" title="singleInstance"></a>singleInstance</h2><p><img src="singleInstance.gif" alt></p>
<p>è¿™ä¸ªçš„ç†è§£å¯ä»¥è¿™ä¹ˆçœ‹ï¼šåœ¨å¾®ä¿¡é‡Œç‚¹å‡»â€œç”¨æµè§ˆå™¨æ‰“å¼€â€ä¸€ä¸ªæœ‹å‹åœˆï¼Œç„¶ååˆ‡åˆ°QQå†ç”¨æµè§ˆå™¨å¼€ä¸€ä¸ªç½‘é¡µï¼Œå†è·‘åˆ°å“ªé‡Œå†å¼€ä¸€ä¸ªé¡µé¢ã€‚æ¯æ¬¡æˆ‘ä»¬éƒ½åœ¨Activityä¸­è¯•å›¾å¯åŠ¨å¦ä¸€ä¸ªæµè§ˆå™¨Activityï¼Œä½†æ˜¯åœ¨æµè§ˆå™¨ç«¯çœ‹æ¥ï¼Œéƒ½æ˜¯è°ƒç”¨äº†åŒä¸€ä¸ªè‡ªå·±ã€‚å› ä¸ºä½¿ç”¨äº†singleInstanceæ¨¡å¼ï¼Œä¸åŒåº”ç”¨è°ƒç”¨çš„Activityå®é™…ä¸Šæ˜¯å…±äº«çš„ã€‚</p>
<p>åœ¨<code>AndroidManifest.xml</code>ä¸­</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">".SingleTopActivity"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:label</span>=<span class="string">"@string/singletop"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:launchMode</span>=<span class="string">"singleTop"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><ul>
<li><a href="https://hit-alibaba.github.io/interview/Android/basic/Androidä¸­Activityå¯åŠ¨æ¨¡å¼è¯¦è§£" target="_blank" rel="noopener">http://www.cnblogs.com/fanchangfa/archive/2012/08/25/2657012.html</a></li>
<li><a href="http://www.cnblogs.com/meizixiong/archive/2013/07/03/3170591.html" target="_blank" rel="noopener">Androidå…¥é—¨ï¼šActivityå››ç§å¯åŠ¨æ¨¡å¼</a></li>
</ul>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSä¹‹UIApplication</title>
    <url>/2019/06/20/IOS%E4%B9%8BUIApplication/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>UIApplication çš„æ ¸å¿ƒä½œç”¨æ˜¯æä¾›äº† iOS ç¨‹åºè¿è¡ŒæœŸé—´çš„æ§åˆ¶å’Œåä½œå·¥ä½œã€‚</p>
<p>æ¯ä¸€ä¸ªç¨‹åºåœ¨è¿è¡ŒæœŸå¿…é¡»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª<code>UIApplication</code>ï¼ˆæˆ–åˆ™å…¶å­ç±»ï¼‰çš„ä¸€ä¸ªå®ä¾‹ã€‚åœ¨ç¨‹åºå¼€å§‹è¿è¡Œçš„æ—¶å€™ï¼Œ<code>UIApplicationMain</code> å‡½æ•°æ˜¯ç¨‹åºè¿›å…¥ç‚¹ï¼Œè¿™ä¸ªå‡½æ•°åšäº†å¾ˆå¤šå·¥ä½œï¼Œå…¶ä¸­ä¸€ä¸ªé‡è¦çš„å·¥ä½œå°±æ˜¯åˆ›å»ºä¸€ä¸ª <code>UIApplication</code> çš„å•ä¾‹å®ä¾‹ã€‚åœ¨ä½ çš„ä»£ç ä¸­ä½ ï¼Œä½ å¯ä»¥é€šè¿‡è°ƒç”¨ <code>[UIApplication sharedApplication]</code>æ¥å¾—åˆ°è¿™ä¸ªå•ä¾‹å®ä¾‹çš„æŒ‡é’ˆã€‚</p>
<a id="more"></a>
<p>UIApplication çš„ä¸€ä¸ªä¸»è¦å·¥ä½œæ˜¯å¤„ç†ç”¨æˆ·äº‹ä»¶ï¼Œå®ƒä¼šèµ·ä¸€ä¸ªé˜Ÿåˆ—ï¼ŒæŠŠæ‰€æœ‰ç”¨æˆ·äº‹ä»¶éƒ½æ”¾å…¥é˜Ÿåˆ—ï¼Œé€ä¸ªå¤„ç†ï¼Œåœ¨å¤„ç†çš„æ—¶å€™ï¼Œå®ƒä¼šå‘é€å½“å‰äº‹ä»¶ åˆ°ä¸€ä¸ªåˆé€‚çš„å¤„ç†äº‹ä»¶çš„ç›®æ ‡æ§ä»¶ã€‚æ­¤å¤–ï¼ŒUIApplication å®ä¾‹è¿˜ç»´æŠ¤ä¸€ä¸ªåœ¨æœ¬åº”ç”¨ä¸­æ‰“å¼€çš„ window åˆ—è¡¨ï¼ˆUIWindow å®ä¾‹ï¼‰ï¼Œè¿™æ ·å®ƒå°± å¯ä»¥æ¥è§¦åº”ç”¨ä¸­çš„ä»»ä½•ä¸€ä¸ª UIView å¯¹è±¡ã€‚UIApplication å®ä¾‹ä¼šè¢«èµ‹äºˆä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä»¥å¤„ç†åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼ˆæ¯”å¦‚ç¨‹åºå¯åŠ¨å’Œå…³é—­ï¼‰ã€ç³»ç»Ÿäº‹ä»¶ï¼ˆæ¯”å¦‚æ¥ç”µã€è®°äº‹é¡¹è­¦å‘Šï¼‰ç­‰ç­‰ã€‚</p>
<h1 id="UIApplicaion-ç”Ÿå‘½å‘¨æœŸ"><a href="#UIApplicaion-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="UIApplicaion ç”Ÿå‘½å‘¨æœŸ"></a>UIApplicaion ç”Ÿå‘½å‘¨æœŸ</h1><p>ä¸€ä¸ª UIApplication å¯ä»¥æœ‰å¦‚ä¸‹å‡ ç§çŠ¶æ€ï¼š</p>
<ul>
<li><code>Not runningï¼ˆæœªè¿è¡Œï¼‰</code>ç¨‹åºæ²¡å¯åŠ¨</li>
<li><code>Inactiveï¼ˆæœªæ¿€æ´»ï¼‰</code>ç¨‹åºåœ¨å‰å°è¿è¡Œï¼Œä¸è¿‡æ²¡æœ‰æ¥æ”¶åˆ°äº‹ä»¶ã€‚åœ¨æ²¡æœ‰äº‹ä»¶å¤„ç†æƒ…å†µä¸‹ç¨‹åºé€šå¸¸åœç•™åœ¨è¿™ä¸ªçŠ¶æ€</li>
<li><code>Activeï¼ˆæ¿€æ´»ï¼‰</code>ç¨‹åºåœ¨å‰å°è¿è¡Œè€Œä¸”æ¥æ”¶åˆ°äº†äº‹ä»¶ã€‚è¿™ä¹Ÿæ˜¯å‰å°çš„ä¸€ä¸ªæ­£å¸¸çš„æ¨¡å¼</li>
<li><code>Backgroundï¼ˆåå°ï¼‰</code> ç¨‹åºåœ¨åå°è€Œä¸”èƒ½æ‰§è¡Œä»£ç ï¼Œå¤§å¤šæ•°ç¨‹åºè¿›å…¥è¿™ä¸ªçŠ¶æ€åä¼šåœ¨åœ¨è¿™ä¸ªçŠ¶æ€ä¸Šåœç•™ä¸€ä¼šã€‚æ—¶é—´åˆ°ä¹‹åä¼šè¿›å…¥æŒ‚èµ·çŠ¶æ€ (Suspended)ã€‚æœ‰çš„ç¨‹åºç»è¿‡ç‰¹æ®Šçš„è¯·æ±‚åå¯ä»¥é•¿æœŸå¤„äº Background çŠ¶æ€</li>
<li><code>Suspendedï¼ˆæŒ‚èµ·ï¼‰</code>ç¨‹åºåœ¨åå°ä¸èƒ½æ‰§è¡Œä»£ç ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨æŠŠç¨‹åºå˜æˆè¿™ä¸ªçŠ¶æ€è€Œä¸”ä¸ä¼šå‘å‡ºé€šçŸ¥ã€‚å½“æŒ‚èµ·æ—¶ï¼Œç¨‹åºè¿˜æ˜¯åœç•™åœ¨å†…å­˜ä¸­çš„ï¼Œå½“ç³»ç»Ÿå†…å­˜ä½æ—¶ï¼Œç³»ç»Ÿå°±æŠŠæŒ‚èµ·çš„ç¨‹åºæ¸…é™¤æ‰ï¼Œä¸ºå‰å°ç¨‹åºæä¾›æ›´å¤šçš„å†…å­˜ã€‚</li>
</ul>
<p>å¸¸è§çš„ä»£ç†æ–¹æ³•æœ‰</p>
<ol>
<li><p><code>(void)applicationWillResignActive:(UIApplication *)application</code></p>
<p>è¯´æ˜ï¼šå½“åº”ç”¨ç¨‹åºå°†è¦å…¥éæ´»åŠ¨çŠ¶æ€æ‰§è¡Œï¼Œåœ¨æ­¤æœŸé—´ï¼Œåº”ç”¨ç¨‹åºä¸æ¥æ”¶æ¶ˆæ¯æˆ–äº‹ä»¶ï¼Œæ¯”å¦‚æ¥ç”µè¯äº†</p>
</li>
<li><p><code>(void)applicationDidBecomeActive:(UIApplication *)application</code></p>
<p>è¯´æ˜ï¼šå½“åº”ç”¨ç¨‹åºå…¥æ´»åŠ¨çŠ¶æ€æ‰§è¡Œï¼Œè¿™ä¸ªåˆšå¥½è·Ÿä¸Šé¢é‚£ä¸ªæ–¹æ³•ç›¸å</p>
</li>
<li><p><code>(void)applicationDidEnterBackground:(UIApplication *)application</code></p>
<p>è¯´æ˜ï¼šå½“ç¨‹åºè¢«æ¨é€åˆ°åå°çš„æ—¶å€™è°ƒç”¨ã€‚æ‰€ä»¥è¦è®¾ç½®åå°ç»§ç»­è¿è¡Œï¼Œåˆ™åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢è®¾ç½®å³å¯</p>
</li>
<li><p><code>(void)applicationWillEnterForeground:(UIApplication *)application</code></p>
<p>è¯´æ˜ï¼šå½“ç¨‹åºä»åå°å°†è¦é‡æ–°å›åˆ°å‰å°æ—¶å€™è°ƒç”¨ï¼Œè¿™ä¸ªåˆšå¥½è·Ÿä¸Šé¢çš„é‚£ä¸ªæ–¹æ³•ç›¸åã€‚</p>
</li>
<li><p><code>(void)applicationWillTerminate:(UIApplication *)application</code></p>
<p>è¯´æ˜ï¼šå½“ç¨‹åºå°†è¦é€€å‡ºæ˜¯è¢«è°ƒç”¨ï¼Œé€šå¸¸æ˜¯ç”¨æ¥ä¿å­˜æ•°æ®å’Œä¸€äº›é€€å‡ºå‰çš„æ¸…ç†å·¥ä½œã€‚è¿™ä¸ªéœ€è¦è®¾ç½® UIApplicationExitsOnSuspend çš„é”®å€¼ã€‚</p>
</li>
<li><p><code>(void)applicationDidReceiveMemoryWarning:(UIApplication *)application</code></p>
<p>è¯´æ˜ï¼šiPhone è®¾å¤‡åªæœ‰æœ‰é™çš„å†…å­˜ï¼Œå¦‚æœä¸ºåº”ç”¨ç¨‹åºåˆ†é…äº†å¤ªå¤šå†…å­˜æ“ä½œç³»ç»Ÿä¼šç»ˆæ­¢åº”ç”¨ç¨‹åºçš„è¿è¡Œï¼Œåœ¨ç»ˆæ­¢å‰ä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œé€šå¸¸å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œå†…å­˜æ¸…ç†å·¥ä½œé˜²æ­¢ç¨‹åºè¢«ç»ˆæ­¢</p>
</li>
<li><p><code>(void)applicationSignificantTimeChange:(UIApplication*)application</code></p>
<p>è¯´æ˜ï¼šå½“ç³»ç»Ÿæ—¶é—´å‘ç”Ÿæ”¹å˜æ—¶æ‰§è¡Œ</p>
</li>
<li><p><code>(void)applicationDidFinishLaunching:(UIApplication*)application</code></p>
<p>è¯´æ˜ï¼šå½“ç¨‹åºè½½å…¥åæ‰§è¡Œ</p>
</li>
</ol>
<h1 id="åº”ç”¨å…¥å£"><a href="#åº”ç”¨å…¥å£" class="headerlink" title="åº”ç”¨å…¥å£"></a>åº”ç”¨å…¥å£</h1><figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application willFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Override point for customization after application launch.</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯´æ˜ï¼šè¿™ä¸¤ä¸ªæ–¹æ³•çš„ä½œç”¨å‡ ä¹å®Œå…¨ä¸€æ ·ï¼Œåªæ˜¯æ‰§è¡Œé¡ºåºæœ‰å…ˆåã€‚AppDelegateç±»é»˜è®¤å‡ºç°çš„æ˜¯<code>application: didFinishLaunchingWithOptions:</code>ï¼Œä¸€èˆ¬æƒ…å†µä¸‹åªéœ€è¦å¤„ç†è¿™ä¸ªæ–¹æ³•å°±å¯ä»¥äº†ã€‚</p>
<p><code>didFinishLaunchingWithOptions</code>å‡½æ•°çš„å‚æ•°launchOptionsæ˜¯ä¸€ä¸ªNSDictionaryç±»å‹çš„å¯¹è±¡ï¼Œå­˜å‚¨çš„æ˜¯ç¨‹åºå¯åŠ¨çš„åŸå› ã€‚</p>
<p><code>didFinishLaunchingWithOptions</code>å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªBOOLç±»å‹ï¼Œå°†å†³å®šæ˜¯å¦å¤„ç†URLèµ„æºï¼Œå¦‚æœè¿”å›YESï¼Œåˆ™ä¼šç”±<code>application:openURL:sourceApplication:annotation:</code>æ–¹æ³•å¤„ç†URLã€‚å¦‚æœåº”ç”¨ç¨‹åºæœ‰ä¸€ä¸ªè¿œç¨‹é€šçŸ¥å¯åŠ¨ï¼Œè¿”å›å€¼ä¼šè¢«å¿½ç•¥ã€‚</p>
<blockquote>
<p>P.s. å¦‚æœåŒæ—¶å‡ºç°äº†<code>application: willFinishLaunchingWithOptions:</code>å’Œ<code>application: didFinishLaunchingWithOptions:</code>ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½è¦è¿”å›YESï¼Œæ‰ä¼šå¤„ç†URLèµ„æºã€‚</p>
</blockquote>
<h2 id="å¯åŠ¨åŸå› "><a href="#å¯åŠ¨åŸå› " class="headerlink" title="å¯åŠ¨åŸå› "></a>å¯åŠ¨åŸå› </h2><ul>
<li><p><strong>ç”¨æˆ·ç›´æ¥å¯åŠ¨</strong><br>lauchOptionså†…æ— æ•°æ®</p>
</li>
<li><p><strong>å…¶ä»–åº”ç”¨ç¨‹åºé€šè¿‡openURL:å¯åŠ¨</strong><br>lauchOptionså­—å…¸å†…å­˜å‚¨:<br>@{UIApplicationLaunchOptionsURLKey:å¯åŠ¨URL(NSURL),<br>UIApplicationLaunchOptionsSourceApplicationKey:å¯åŠ¨æºç¨‹åºçš„bundleID(NSString)}</p>
</li>
<li><p><strong>æœ¬åœ°é€šçŸ¥å¯åŠ¨</strong><br>lauchOptionså­—å…¸å†…å­˜å‚¨ï¼š<br>@{UIApplicationLaunchOptionsLocalNotificationKey:å¯åŠ¨åº”ç”¨ç¨‹åºçš„æœ¬åœ°é€šçŸ¥å¯¹è±¡ï¼ˆUILocalNotificationï¼‰}</p>
</li>
<li><p><strong>è¿œç¨‹é€šçŸ¥å¯åŠ¨</strong><br> @{UIApplicationLaunchOptionsRemoteNotificationKey:å¯åŠ¨åº”ç”¨ç¨‹åºçš„çš„è¿œç¨‹é€šçŸ¥ä¿¡æ¯userInfoï¼ˆNSDictionaryï¼‰}</p>
</li>
<li><p><strong>å…¶ä»–çš„keyè¿˜æœ‰</strong><br> UIApplicationLaunchOptionsAnnotationKey,<br> UIApplicationLaunchOptionsLocationKey,<br> UIApplicationLaunchOptionsNewsstandDownloadsKey</p>
<blockquote>
<p>ç¨‹åºlaunchOptionsä¸­çš„å¯èƒ½é”®å€¼å¯ä»¥å‚è€ƒUIApplication Class Referenceçš„â€Launch Options Keysâ€ã€‚</p>
</blockquote>
</li>
</ul>
<p>ä¾‹å­ï¼šåœ¨<code>didFinishLaunchingWithOptions:</code>åˆ›å»ºUIWindow</p>
<blockquote>
<p>å…ˆæŠŠæŒ‡å®šçš„Main Interfaceä¸­mianåˆ é™¤æ‰</p>
</blockquote>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºçª—å£å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">self</span>.window = [[<span class="built_in">UIWindow</span> alloc]initWithFrame:[<span class="built_in">UIScreen</span> mainScreen].bounds];</span><br><span class="line">    <span class="comment">//åˆ›å»ºçª—å£çš„æ ¹æ§åˆ¶å™¨ï¼Œå¹¶ä¸”èµ‹å€¼</span></span><br><span class="line">    <span class="built_in">UIViewController</span> *rootVc = [[<span class="built_in">UIViewController</span> alloc]init];</span><br><span class="line">    <span class="keyword">self</span>.window.rootViewController = rootVc;</span><br><span class="line">    <span class="comment">//æ˜¾ç¤ºçª—å£</span></span><br><span class="line">    [<span class="keyword">self</span>.window makeKeyAndVisible];</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="App-ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾"><a href="#App-ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾" class="headerlink" title="App ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾"></a>App ç”Ÿå‘½å‘¨æœŸç¤ºæ„å›¾</h1><p><img src="lifecycle.jpg" alt></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
        <tag>Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title>çº¯HTML+CSSå®ç°è½®æ’­å›¾</title>
    <url>/2019/06/19/%E7%BA%AFHTML-CSS%E5%AE%9E%E7%8E%B0%E8%BD%AE%E6%92%AD%E5%9B%BE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸€ç§çº¯HTML+CSSå®ç°çš„è½®æ’­å›¾ï¼Œä½†ç”±äºæ²¡æœ‰JSä¸æ”¯æŒå®ç°ç”¨æˆ·è¿›è¡Œå·¦å³æ»‘åŠ¨ã€‚</p>
<a id="more"></a>
<h1 id="DOMç»“æ„æ­å»º"><a href="#DOMç»“æ„æ­å»º" class="headerlink" title="DOMç»“æ„æ­å»º"></a>DOMç»“æ„æ­å»º</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slide-container middle"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slide-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slide"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./1.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slide"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./2.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slide"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./3.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slide"</span>&gt;</span>a</span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./4.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"slide"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./5.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.slide-container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">  	<span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.middle</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-50%, -50%);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.slide</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="dom.png" alt></p>
<h1 id="å›¾ç‰‡å¹¶æ’æ˜¾ç¤º"><a href="#å›¾ç‰‡å¹¶æ’æ˜¾ç¤º" class="headerlink" title="å›¾ç‰‡å¹¶æ’æ˜¾ç¤º"></a>å›¾ç‰‡å¹¶æ’æ˜¾ç¤º</h1><p>å¯ä»¥çœ‹åˆ°æ­£å¸¸æ–‡æ¡£æµå›¾ç‰‡æ˜¯å‘ä¸‹æ’åˆ—çš„ï¼Œå¦‚ä½•è®©ä»–ä»¬å®ç°å¹¶æ’æ˜¾ç¤ºå‘¢ï¼Œå¯èƒ½ä¼šæƒ³åˆ°ä½¿ç”¨floatï¼Œä½†æ˜¯æœ€ç®€å•çš„åŠæ³•æ˜¯ä½¿ç”¨flexå¸ƒå±€ã€‚ç»™<code>slide-wrap</code>å®¹å™¨æŒ‡å®šä¸ºFlexå¸ƒå±€ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.slide-wrap</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">500%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.slide</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">1s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="dom2.png" alt></p>
<p>ä¸ºä»€ä¹ˆ<code>slide-wrap</code>è¦ç»™äºˆ500%çš„å®½åº¦ï¼Œå› ä¸ºè¯¥åˆ—æœ‰äº”å¼ å›¾ç‰‡ï¼Œä¸€å¼ å›¾ç‰‡åˆšå¥½å æ»¡ä¸€ä¸ªçˆ¶å®¹å™¨ã€‚</p>
<h1 id="å®ç°ç‚¹å‡»è½®æ’­æ•ˆæœ"><a href="#å®ç°ç‚¹å‡»è½®æ’­æ•ˆæœ" class="headerlink" title="å®ç°ç‚¹å‡»è½®æ’­æ•ˆæœ"></a>å®ç°ç‚¹å‡»è½®æ’­æ•ˆæœ</h1><p>ä¸ç”¨JSå¦‚ä½•å®ç°è½®æ’­å›¾åˆ‡æ¢æ•ˆæœå‘¢ï¼Ÿæˆ‘ä»¬å…ˆå®ç°è½®æ’­å›¾çš„å°ç‚¹ç‚¹ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.navigation</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-50%);</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bar</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">3px</span> white solid;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">  	<span class="attribute">cursor</span>: pointer;</span><br><span class="line">		<span class="attribute">transition</span>: <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bar</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- inner slide-wrap --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"navigation"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"bar"</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"bar"</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"bar"</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"bar"</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"bar"</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨labelæ¥å®ç°æŒ‡ç¤ºå™¨å‘¢ï¼Œè¿™é‡Œå°±å…³é”®ç”¨åˆ°äº†å®ƒçš„forå±æ€§ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- inner slide-wrap --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"r"</span> <span class="attr">id</span>=<span class="string">"r1"</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"r"</span> <span class="attr">id</span>=<span class="string">"r2"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"r"</span> <span class="attr">id</span>=<span class="string">"r3"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"r"</span> <span class="attr">id</span>=<span class="string">"r4"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"r"</span> <span class="attr">id</span>=<span class="string">"r5"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"navigation"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"bar"</span> <span class="attr">for</span>=<span class="string">"r1"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"bar"</span> <span class="attr">for</span>=<span class="string">"r2"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"bar"</span> <span class="attr">for</span>=<span class="string">"r3"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"bar"</span> <span class="attr">for</span>=<span class="string">"r4"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"bar"</span> <span class="attr">for</span>=<span class="string">"r5"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[name="r"]</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨labelå’Œinput:radioè¿›è¡Œå…³è”èµ·æ¥åï¼Œç‚¹å‡»çš„labelå°±ç›¸å½“äºé€‰æ‹©äº†æŸä¸ªå•é€‰æŒ‰é’®ï¼Œé»˜è®¤ç¬¬ä¸€ä¸ªå•é€‰æŒ‰é’®ä¸ºé€‰ä¸­çŠ¶æ€ï¼Œåˆ‡æ¢åˆ°ç¬¬äºŒä¸ªæ—¶ï¼Œæˆ‘ä»¬å°†ç¬¬ä¸€å¼ å›¾å‘å®¹å™¨å·¦è¾¹æŒªç™¾åˆ†ä¹‹20%çš„å®½åº¦(å› ä¸ºä¸€å…±æœ‰äº”å¼ å›¾ï¼Œä¸€å¼ å›¾å°±å 20%çš„å®½åº¦)ï¼Œå°±å¯ä»¥çœ‹åˆ°åˆ‡èŠ±æˆäº†ç¬¬äºŒå¼ å›¾ï¼Œä»¥æ­¤ç±»æ¨ã€‚çœ‹çœ‹ä»£ç çš„å®ç°ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#r1</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#r2</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">20%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#r3</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">40%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#r4</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">60%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#r5</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">80%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç‚¹å‡»æŒ‡ç¤ºå™¨åˆ‡æ¢è½®æ’­å›¾å°±å®Œæˆå•¦ã€‚</p>
<h1 id="è‡ªåŠ¨è½®æ’­æ•ˆæœ"><a href="#è‡ªåŠ¨è½®æ’­æ•ˆæœ" class="headerlink" title="è‡ªåŠ¨è½®æ’­æ•ˆæœ"></a>è‡ªåŠ¨è½®æ’­æ•ˆæœ</h1><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.s1</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: loop <span class="number">12s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">keyframes</span> loop &#123;</span><br><span class="line">    0% &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    15% &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* åœç•™1500ms */</span></span><br><span class="line">    20% &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">20%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* åˆ‡æ¢500ms ä½ç§»-20% */</span></span><br><span class="line">    35% &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">20%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    40% &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">40%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    55% &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">40%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    60% &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">60%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    75% &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">60%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    80% &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">80%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    95% &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: -<span class="number">80%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    100% &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* å¤ä½åˆ°ç¬¬ä¸€å¼ å›¾ç‰‡ */</span></span><br></pre></td></tr></table></figure>
<p>CSS3çš„åŠ¨ç”»å±æ€§å°±ä¸è¿‡å¤šä»‹ç»äº†ï¼Œä½†æ˜¯è‡ªåŠ¨è½®æ’­å’Œç‚¹å‡»æ˜¯ç›¸å†²çªçš„ï¼Œä½†æ˜¯è¿™æ˜¯ä¸€ç§çº¯CSSè½®æ’­å›¾çš„ä¸€ç§å®ç°æ€è·¯ï¼Œä¸éœ€JSçš„å®ç°ã€‚æŒºå¥½ç©çš„ã€‚</p>
<p>æºç å·²æ”¾ç½®GitHubï¼š<a href="https://github.com/hackycy/Html-Css-Carousel" target="_blank" rel="noopener">https://github.com/hackycy/Html-Css-Carousel</a></p>
]]></content>
      <categories>
        <category>HTML</category>
      </categories>
      <tags>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScriptå¿…çŸ¥å¿…ä¼š</title>
    <url>/2019/05/29/JavaScript%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="JavaScriptåŸºæœ¬ä»‹ç»"><a href="#JavaScriptåŸºæœ¬ä»‹ç»" class="headerlink" title="JavaScriptåŸºæœ¬ä»‹ç»"></a>JavaScriptåŸºæœ¬ä»‹ç»</h1><ul>
<li>JSçš„ç”¨é€”ï¼šJavascriptå¯ä»¥å®ç°æµè§ˆå™¨ç«¯ã€æœåŠ¡å™¨ç«¯(nodejs)ã€‚ã€‚ã€‚</li>
<li><p>æµè§ˆå™¨ç«¯JSç”±ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li><p>ECMAScriptï¼šåŸºç¡€è¯­æ³•(æ•°æ®ç±»å‹ã€è¿ç®—ç¬¦ã€å‡½æ•°ã€‚ã€‚ã€‚)</p>
</li>
<li><p>BOM(æµè§ˆå™¨å¯¹è±¡æ¨¡å‹)ï¼šwindowã€locationã€historyã€navigatorã€‚ã€‚ã€‚</p>
</li>
<li><p>DOM(æ–‡æ¡£å¯¹è±¡æ¨¡å‹)ï¼šdivã€pã€spanã€‚ã€‚ã€‚</p>
</li>
</ul>
</li>
</ul>
<a id="more"></a>
<ul>
<li>ECMAScriptåˆåesï¼Œæœ‰ä»¥ä¸‹é‡å¤§ç‰ˆæœ¬ï¼š<ul>
<li>æ—§æ—¶ä»£ï¼š<ul>
<li>es1.0ã€‚ã€‚ã€‚es3.1</li>
</ul>
</li>
<li>æ–°æ—¶ä»£ï¼š<ul>
<li>es5</li>
<li>es6(es2015)</li>
<li>es7(es2016)ã€es8(es2017)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="JavaScriptåŸºæœ¬æ•°æ®ç±»å‹å’Œå¤æ‚æ•°æ®ç±»å‹"><a href="#JavaScriptåŸºæœ¬æ•°æ®ç±»å‹å’Œå¤æ‚æ•°æ®ç±»å‹" class="headerlink" title="JavaScriptåŸºæœ¬æ•°æ®ç±»å‹å’Œå¤æ‚æ•°æ®ç±»å‹"></a>JavaScriptåŸºæœ¬æ•°æ®ç±»å‹å’Œå¤æ‚æ•°æ®ç±»å‹</h1><p>ä¸€å¥æ€»ç»“ï¼Œä½¿ç”¨æ’é™¤æ³•ï¼Œé™¤æ‰åŸºæœ¬æ•°æ®ç±»å‹éƒ½æ˜¯å¤æ‚æ•°æ®ç±»å‹å³<code>å­—ç¬¦ä¸²</code>ã€<code>æ•°å­—</code>ã€<code>å¸ƒå°”å€¼</code>ã€<code>null</code>ã€<code>undefined</code>ã€<code>Symbol</code>å…¶ä½™éƒ½æ˜¯å¯¹è±¡ç±»å‹ã€‚å¤æ‚æ•°æ®ç±»å‹ä¾‹å¦‚<code>Date</code>ã€<code>Array</code>ç­‰ã€‚</p>
<h1 id="å¯¹è±¡çš„åŸºæœ¬ä½¿ç”¨"><a href="#å¯¹è±¡çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="å¯¹è±¡çš„åŸºæœ¬ä½¿ç”¨"></a>å¯¹è±¡çš„åŸºæœ¬ä½¿ç”¨</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">            <span class="comment">//åˆ›å»ºå¯¹è±¡</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> person = &#123;</span></span><br><span class="line"><span class="javascript">                    name : <span class="string">"å¼ ä¸‰"</span>,</span></span><br><span class="line">                    age : 18,</span><br><span class="line"><span class="javascript">                    say : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="built_in">console</span>.log(<span class="string">'i am from china'</span>);</span></span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            </span><br><span class="line"><span class="javascript">            <span class="comment">//è·å–å±æ€§</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(person.name);</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(person.age);</span></span><br><span class="line">            person.say();</span><br><span class="line">            </span><br><span class="line"><span class="javascript">            <span class="comment">//è®¾ç½®å±æ€§</span></span></span><br><span class="line"><span class="javascript">            person.address = <span class="string">"ä¸­å›½å¹¿ä¸œå¹¿å·"</span>;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(person.address);</span></span><br><span class="line">            </span><br><span class="line"><span class="javascript">            <span class="comment">//æ¸…é™¤å±æ€§</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">delete</span> person.address;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">delete</span> person.adc  <span class="comment">//æ— æ„ä¹‰,ä½†æ˜¯ä¹Ÿä¸ä¼šæŠ¥é”™</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(person.address);</span></span><br><span class="line">            </span><br><span class="line"><span class="javascript">            <span class="comment">//deleteåªèƒ½åˆ é™¤å¯¹è±¡çš„å±æ€§,è€Œä¸èƒ½åˆ é™¤å˜é‡</span></span></span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line"><span class="javascript">            <span class="comment">//æ¸…ç©ºå¯¹è±¡</span></span></span><br><span class="line">            person=&#123;&#125;;</span><br><span class="line"><span class="javascript">            <span class="comment">//å°†personå˜ä¸ºnull</span></span></span><br><span class="line"><span class="javascript">            person = <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">            <span class="comment">//ä¸¤è€…æ„ä¹‰ä¸ä¸€æ ·</span></span></span><br><span class="line">            </span><br><span class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¾“å‡º<br><figure class="highlight console"><table><tr><td class="code"><pre><span class="line">å¼ ä¸‰</span><br><span class="line">18</span><br><span class="line">i am from china</span><br></pre></td></tr></table></figure></p>
<p>å¯¹è±¡æ˜¯é”®å€¼å¯¹çš„é›†åˆï¼šå¯¹è±¡æ˜¯ç”±å±æ€§å’Œæ–¹æ³•æ„æˆçš„ (psï¼šä¹Ÿæœ‰è¯´æ³•ä¸ºï¼šå¯¹è±¡é‡Œé¢çš†å±æ€§ï¼Œè®¤ä¸ºæ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªå±æ€§)</p>
<ul>
<li>nameæ˜¯å±æ€§    ageæ˜¯å±æ€§</li>
<li>sayæ˜¯æ–¹æ³•</li>
</ul>
<h2 id="è·å–å±æ€§çš„æ–¹å¼"><a href="#è·å–å±æ€§çš„æ–¹å¼" class="headerlink" title="è·å–å±æ€§çš„æ–¹å¼"></a>è·å–å±æ€§çš„æ–¹å¼</h2><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title=".è¯­æ³•"></a>.è¯­æ³•</h3><ul>
<li><code>person.age</code>è·å–ageå±æ€§</li>
<li><code>person.say</code>è·å–åˆ°ä¸€ä¸ªæ–¹æ³•</li>
</ul>
<h3 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="[]è¯­æ³•"></a>[]è¯­æ³•</h3><ul>
<li><code>person[&quot;name&quot;]</code>ç­‰ä»·äºperson.age</li>
<li><code>person[&quot;say&quot;]</code>ç­‰ä»·äºperson.say</li>
</ul>
<h3 id="2ç§æ–¹å¼çš„å·®å¼‚ï¼š"><a href="#2ç§æ–¹å¼çš„å·®å¼‚ï¼š" class="headerlink" title="2ç§æ–¹å¼çš„å·®å¼‚ï¼š"></a>2ç§æ–¹å¼çš„å·®å¼‚ï¼š</h3><ul>
<li><p>.è¯­æ³•æ›´æ–¹ä¾¿ï¼Œä½†æ˜¯å‘æ¯”è¾ƒå¤š(æœ‰å±€é™æ€§)ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>.åé¢ä¸èƒ½ä½¿ç”¨jsä¸­çš„å…³é”®å­—ã€ä¿ç•™å­—(classã€thisã€functionã€‚ã€‚ã€‚)</li>
<li>.åé¢ä¸èƒ½ä½¿ç”¨æ•°å­—<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;&#125;;</span><br><span class="line">obj.this=<span class="number">5</span>; <span class="comment">//è¯­æ³•é”™è¯¯</span></span><br><span class="line">obj<span class="number">.0</span>=<span class="number">10</span>;   <span class="comment">//è¯­æ³•é”™è¯¯</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>[]ä½¿ç”¨æ›´å¹¿æ³›</p>
<ul>
<li>o1[å˜é‡name]</li>
<li>[â€œclassâ€]ã€[â€œthisâ€]éƒ½å¯ä»¥éšæ„ä½¿ç”¨ <code>obj[&quot;this&quot;]=10</code></li>
<li>[0]ã€[1]ã€[2]ä¹Ÿå¯ä»¥ä½¿ç”¨       <ul>
<li><code>obj[3]=50 = obj[&quot;3&quot;]=50</code>     </li>
<li>æ€è€ƒï¼šä¸ºä»€ä¹ˆobj[3]=obj[â€œ3â€]</li>
</ul>
</li>
<li>ç”šè‡³è¿˜å¯ä»¥è¿™æ ·ç”¨ï¼š[â€œ[object Array]â€]<ul>
<li>jqueryé‡Œé¢å°±æœ‰è¿™æ ·çš„å®ç°</li>
</ul>
</li>
<li>ä¹Ÿå¯ä»¥è¿™æ ·ç”¨ï¼š[â€œ{abc}â€]<ul>
<li>ç»™å¯¹è±¡æ·»åŠ äº†{abc}å±æ€§</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="è®¾ç½®å±æ€§"><a href="#è®¾ç½®å±æ€§" class="headerlink" title="è®¾ç½®å±æ€§"></a>è®¾ç½®å±æ€§</h2><ul>
<li><code>student[&quot;gender&quot;]=&quot;ç”·&quot;</code>    ç­‰ä»·äºï¼š    <code>student.gender=&quot;ç”·&quot;</code><ul>
<li>å«ä¹‰ï¼šå¦‚æœstudentå¯¹è±¡ä¸­æ²¡æœ‰genderå±æ€§ï¼Œå°±æ·»åŠ ä¸€ä¸ªgenderå±æ€§ï¼Œå€¼ä¸ºâ€ç”·â€</li>
<li>å¦‚æœstudentå¯¹è±¡ä¸­æœ‰genderå±æ€§ï¼Œå°±ä¿®æ”¹genderå±æ€§çš„å€¼ä¸ºâ€ç”·â€</li>
</ul>
</li>
<li>æ¡ˆä¾‹1ï¼š<code>student.isFemale=true</code></li>
<li>æ¡ˆä¾‹2ï¼š<code>student[&quot;children&quot;]=[1,2,5]</code></li>
<li>æ¡ˆä¾‹3ï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">student.toShanghai=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;   </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æ­£åœ¨å»å¾€ä¸Šæµ·çš„è·¯ä¸Š"</span>)   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="åˆ é™¤å±æ€§"><a href="#åˆ é™¤å±æ€§" class="headerlink" title="åˆ é™¤å±æ€§"></a>åˆ é™¤å±æ€§</h2><ul>
<li><code>delete student[&quot;gender&quot;]</code>      </li>
<li><code>delete student.gender</code></li>
</ul>
<h2 id="å±æ€§ç®€å†™"><a href="#å±æ€§ç®€å†™" class="headerlink" title="å±æ€§ç®€å†™"></a>å±æ€§ç®€å†™</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123; a &#125;; <span class="comment">// &#123; a: 10 &#125;</span></span><br></pre></td></tr></table></figure>
<h1 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h1><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.name = name;</span><br><span class="line">                <span class="keyword">this</span>.age = age;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">'å¼ ä¸‰'</span>, <span class="number">40</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(person);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>personå°±æ˜¯æ ¹æ®ã€Personæ„é€ å‡½æ•°ã€‘åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡</p>
<blockquote>
<p>ä»»ä½•å‡½æ•°éƒ½å¯ä»¥å½“æˆæ„é€ å‡½æ•°</p>
</blockquote>
<p>ä¾‹å¦‚<code>function CreateFunc(){ }</code></p>
<p>åªè¦æŠŠä¸€ä¸ªå‡½æ•°é€šè¿‡newçš„æ–¹å¼æ¥è¿›è¡Œè°ƒç”¨ï¼Œæˆ‘ä»¬å°±æŠŠè¿™ä¸€æ¬¡å‡½æ•°çš„è°ƒç”¨æ–¹å¼ç§°ä¹‹ä¸ºï¼šæ„é€ å‡½æ•°çš„è°ƒç”¨</p>
<ul>
<li>new CreateFunc(); æ­¤æ—¶CreateFuncå°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°</li>
<li>CreateFunc();     æ­¤æ—¶çš„CreateFuncå¹¶ä¸æ˜¯æ„é€ å‡½æ•°</li>
</ul>
<p>å…³äºnew Object()ï¼Œnew Object()ç­‰åŒäºå¯¹è±¡å­—é¢é‡{}</p>
<h2 id="æ„é€ å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹"><a href="#æ„é€ å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="æ„é€ å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹"></a>æ„é€ å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹</h2><p><code>var person = new Person()</code></p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç§°ä¹‹ä¸ºè¿™ä¸ªPersonæ„é€ å‡½æ•°çš„å®ä¾‹ï¼Œ<code>p1</code></li>
<li>åˆ›å»ºä¸€ä¸ªå†…éƒ¨å¯¹è±¡ï¼Œ<code>this</code>ï¼Œå°†<code>this</code>æŒ‡å‘è¯¥å®ä¾‹</li>
<li>æ‰§è¡Œå‡½æ•°å†…éƒ¨çš„ä»£ç ï¼Œå…¶ä¸­ï¼Œæ“ä½œ<code>this</code>çš„éƒ¨åˆ†å°±æ˜¯æ“ä½œäº†è¯¥å®ä¾‹</li>
<li>è¿”å›å€¼<ul>
<li>å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œæ²¡æœ‰<code>return</code>è¯­å¥ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›æ„é€ å‡½æ•°çš„å®ä¾‹<code>p1</code></li>
<li>å¦‚æœå‡½æ•°è¿”å›äº†ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›æœ¬æ¬¡æ„é€ å‡½æ•°çš„å®ä¾‹<code>p1</code></li>
<li>å¦‚æœå‡½æ•°è¿”å›äº†ä¸€ä¸ªå¤æ‚æ•°æ®ç±»å‹çš„å€¼ï¼Œé‚£ä¹ˆæœ¬æ¬¡å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯è¯¥å€¼ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f1=<span class="keyword">new</span> fn();    <span class="comment">//f1å°±æ˜¯fnçš„å®ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"abc"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f2=<span class="keyword">new</span> fn2();   <span class="comment">//f2æ˜¯fn2æ„é€ å‡½æ•°çš„å®ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn3</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>]; </span><br><span class="line">    <span class="comment">//æ•°ç»„æ˜¯ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„å€¼ï¼Œ</span></span><br><span class="line">    <span class="comment">//æ‰€ä»¥æ•°ç»„æ˜¯ä¸€ä¸ªå¤æ‚æ•°æ®ç±»å‹çš„å€¼</span></span><br><span class="line">    <span class="comment">//--&gt;æœ¬æ¬¡æ„é€ å‡½æ•°çš„çœŸæ­£è¿”å›å€¼å°±æ˜¯è¯¥æ•°ç»„</span></span><br><span class="line">    <span class="comment">//--&gt;ä¸å†æ˜¯fn3æ„é€ å‡½æ•°çš„å®ä¾‹</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f3=<span class="keyword">new</span> fn3();   <span class="comment">//f3è¿˜æ˜¯fn3çš„å®ä¾‹å—ï¼Ÿé”™</span></span><br><span class="line"><span class="comment">//f3å€¼ä¸º[1,3,5]</span></span><br></pre></td></tr></table></figure>
<h1 id="JSä¸­çš„ç»§æ‰¿"><a href="#JSä¸­çš„ç»§æ‰¿" class="headerlink" title="JSä¸­çš„ç»§æ‰¿"></a>JSä¸­çš„ç»§æ‰¿</h1><p>JSä¸­çš„ç»§æ‰¿å’Œå…¶ä»–è¯­è¨€ä¸å¤ªä¸€æ ·ã€‚JSä¸­çš„ç»§æ‰¿æ˜¯ä½ å¯ä»¥é€šè¿‡æŸç§æ–¹å¼è®©æŸä¸ªå¯¹è±¡è®¿é—®åˆ°å…¶ä»–å¯¹è±¡ä¸­çš„å±æ€§ã€æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ç§æ–¹å¼å°±å¯ä»¥ç§°ä¹‹ä¸ºç»§æ‰¿ã€‚è€Œå¹¶ä¸æ˜¯ç®€å•çš„æ‰€è°“çš„<code>Xxx extends Parent</code></p>
<h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç»§æ‰¿"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç»§æ‰¿" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç»§æ‰¿"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç»§æ‰¿</h2><ul>
<li>æœ‰äº›å¯¹è±¡ä¼šæœ‰æ–¹æ³•(åŠ¨ä½œã€è¡Œä¸º)ï¼Œè€Œè¿™äº›æ–¹æ³•éƒ½æ˜¯å‡½æ•°ï¼Œå¦‚æœæŠŠè¿™äº›æ–¹æ³•å’Œå‡½æ•°éƒ½æ”¾åœ¨æ„é€ å‡½æ•°ä¸­å£°æ˜å°±ä¼šå¯¼è‡´å†…å­˜çš„æµªè´¹<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.say=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"ä½ å¥½"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1=<span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> p2=<span class="keyword">new</span> Person();</span><br><span class="line"><span class="built_in">console</span>.log(p1.say === p2.say);   <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="ç»§æ‰¿çš„æ–¹å¼"><a href="#ç»§æ‰¿çš„æ–¹å¼" class="headerlink" title="ç»§æ‰¿çš„æ–¹å¼"></a>ç»§æ‰¿çš„æ–¹å¼</h2><h3 id="åŸå‹é“¾ç»§æ‰¿"><a href="#åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="åŸå‹é“¾ç»§æ‰¿"></a>åŸå‹é“¾ç»§æ‰¿</h3><h4 id="åŸå‹é“¾ç»§æ‰¿ç¬¬ä¸€ç§æ–¹å¼"><a href="#åŸå‹é“¾ç»§æ‰¿ç¬¬ä¸€ç§æ–¹å¼" class="headerlink" title="åŸå‹é“¾ç»§æ‰¿ç¬¬ä¸€ç§æ–¹å¼"></a>åŸå‹é“¾ç»§æ‰¿ç¬¬ä¸€ç§æ–¹å¼</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Person.prototype.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'hello'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶è¿™æ ·å†™æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æ–¹æ³•ä¸€æ—¦è¿‡å¤šï¼Œä»£ç çš„å†—ä½™å°†ä¼šéå¸¸çš„å¤šã€‚</p>
<h4 id="åŸå‹é“¾ç»§æ‰¿ç¬¬äºŒç§æ–¹å¼"><a href="#åŸå‹é“¾ç»§æ‰¿ç¬¬äºŒç§æ–¹å¼" class="headerlink" title="åŸå‹é“¾ç»§æ‰¿ç¬¬äºŒç§æ–¹å¼"></a>åŸå‹é“¾ç»§æ‰¿ç¬¬äºŒç§æ–¹å¼</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Person.prototype = &#123;</span><br><span class="line">	<span class="keyword">constructor</span>:Person,</span><br><span class="line">	say:function()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'hello'</span>);</span><br><span class="line">	&#125;,</span><br><span class="line">	run:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'running'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼š<br>1ã€ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåº”è¯¥å…ˆæ”¹å˜åŸå‹å¯¹è±¡ï¼Œå†åˆ›å»ºå¯¹è±¡ã€‚<br>2ã€å¯¹äºæ–°åŸå‹ï¼Œä¸€èˆ¬ä¼šæ·»åŠ ä¸€ä¸ªconstructorå±æ€§ï¼Œä»è€Œä¸ç ´ååŸæ¥çš„åŸå‹å¯¹è±¡ç»“æ„ã€‚</p>
</blockquote>
<h3 id="æ‹·è´ç»§æ‰¿ï¼ˆä¹Ÿç§°æ··å…¥ç»§æ‰¿ï¼šmixinï¼‰"><a href="#æ‹·è´ç»§æ‰¿ï¼ˆä¹Ÿç§°æ··å…¥ç»§æ‰¿ï¼šmixinï¼‰" class="headerlink" title="æ‹·è´ç»§æ‰¿ï¼ˆä¹Ÿç§°æ··å…¥ç»§æ‰¿ï¼šmixinï¼‰"></a>æ‹·è´ç»§æ‰¿ï¼ˆä¹Ÿç§°æ··å…¥ç»§æ‰¿ï¼šmixinï¼‰</h3><p>åœºæ™¯ï¼šæœ‰æ—¶å€™æƒ³ä½¿ç”¨æŸä¸ªå¯¹è±¡ä¸­çš„å±æ€§ï¼Œä½†æ˜¯åˆä¸æƒ³ç›´æ¥ç ´åå®ƒï¼Œäºæ˜¯å°±å¯ä»¥åˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„æ‹·è´<br>ç±»ä¼¼äºjQueryä¸­çš„<code>$.extend</code>ï¼Œç¼–å†™Jqueryæ’ä»¶çš„å¿…ç»ä¹‹è·¯</p>
<p>æ¥çœ‹ä¸€ä¸ªä¾‹å­<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> o1 = &#123;</span><br><span class="line">    age : <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o2 = o1;</span><br><span class="line"></span><br><span class="line">o2.age = <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(o1.age); <span class="comment">//ç»“æœè¾“å‡º18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1ã€ä¿®æ”¹äº†o2å¯¹è±¡çš„ageå±æ€§</span></span><br><span class="line"><span class="comment">//2ã€ç”±äºo2å¯¹è±¡è·Ÿo1å¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="comment">//3ã€æ‰€ä»¥æ­¤æ—¶o1å¯¹è±¡çš„ageå±æ€§ä¹Ÿè¢«ä¿®æ”¹äº†</span></span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªçŸ¥è¯†ç‚¹<code>æ·±æ‹·è´å’Œæµ…æ‹·è´</code>ï¼Œ</p>
<ul>
<li>æ·±æ‹·è´åªæ˜¯æ‹·è´ä¸€å±‚å±æ€§ï¼Œæ²¡æœ‰å†…éƒ¨å¯¹è±¡</li>
<li>æ·±æ‹·è´å…¶å®æ˜¯åˆ©ç”¨äº†é€’å½’çš„åŸç†ï¼Œå°†å¯¹è±¡çš„è‹¥å¹²å±‚å±æ€§æ‹·è´å‡ºæ¥ã€‚</li>
<li>ä¸Šè¿°ä¾‹å­ä¸­åªæ˜¯ä¸€ä¸ªæµ…æ‹·è´ã€‚</li>
</ul>
<p><em>é‚£ä¹ˆä»€ä¹ˆåœºæ™¯ä¸‹é€‚åˆä½¿ç”¨æ‹·è´ç»§æ‰¿</em><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> o3 = &#123;</span><br><span class="line">    gender : <span class="string">'ç”·'</span>,</span><br><span class="line">    grade : <span class="string">'åˆä¸‰'</span>,</span><br><span class="line">    name : <span class="string">'å¼ ä¸‰'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> o4 = &#123;</span><br><span class="line">    gender : <span class="string">'ç”·'</span>,</span><br><span class="line">    grade : <span class="string">'åˆä¸‰'</span>,</span><br><span class="line">    name : <span class="string">'æå››'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>å®ç°1<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> o3 = &#123;</span><br><span class="line">    gender : <span class="string">'ç”·'</span>,</span><br><span class="line">    grade : <span class="string">'åˆä¸‰'</span>,</span><br><span class="line">    name : <span class="string">'å¼ ä¸‰'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> cp = &#123;&#125;;</span><br><span class="line">cp.gender = o3.gender;</span><br><span class="line">cp.grade = o3.gender;</span><br><span class="line">cp.name = o3.name;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(cp); <span class="comment">//&#123;gender: "ç”·", grade: "ç”·", name: "å¼ ä¸‰"&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>è¿™æ ·çš„æ–¹å¼å¯ä»¥è¯´åœ¨å¼€å‘ä¸­å°±æ˜¯å†™æ­»çš„ï¼Œæ¯«æ— é‡ç”¨æ€§ã€‚</p>
<ul>
<li>å®ç°2<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> o3 = &#123;</span><br><span class="line">    gender : <span class="string">'ç”·'</span>,</span><br><span class="line">    grade : <span class="string">'åˆä¸‰'</span>,</span><br><span class="line">    name : <span class="string">'å¼ ä¸‰'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">target,source</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(key <span class="keyword">in</span> source) &#123;</span><br><span class="line">        target[key] = source[key];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> target = &#123;&#125;;</span><br><span class="line">extend(target, o3);</span><br><span class="line"><span class="built_in">console</span>.log(target); <span class="comment">//&#123;gender: "ç”·", grade: "åˆä¸‰", name: "å¼ ä¸‰"&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>å¦‚æœå¾ˆå¤šæ—¶å€™éœ€è¦ç”¨åˆ°æ‹·è´ç»§æ‰¿ï¼Œæ— ç–‘å°è£…æˆä¸€ä¸ªå‡½æ•°æ¥è¿›è¡Œå¤ç”¨æ˜¯å¾ˆå¥½çš„ã€‚</p>
<p>åœ¨es6ä¸­ä¹Ÿæœ‰äº†<code>å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦</code>ï¼Œä»¿ä½›å°±æ˜¯ä¸ºäº†æ‹·è´ç»§æ‰¿è€Œç”Ÿçš„:<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> o3 = &#123;</span><br><span class="line">    gender : <span class="string">'ç”·'</span>,</span><br><span class="line">    grade : <span class="string">'åˆä¸‰'</span>,</span><br><span class="line">    name : <span class="string">'å¼ ä¸‰'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> target = &#123; ...o3 &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(target);<span class="comment">//&#123;gender: "ç”·", grade: "åˆä¸‰", name: "å¼ ä¸‰"&#125;</span></span><br><span class="line"><span class="keyword">var</span> target2 = &#123; ...o3, <span class="attr">age</span>:<span class="number">20</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(target2);<span class="comment">//&#123;gender: "ç”·", grade: "åˆä¸‰", name: "å¼ ä¸‰", age: 20&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥è¯´ç®€å•åˆ°ä»¤äººå‘æŒ‡çš„æ“ä½œï¼Œå½“ç„¶ä¹Ÿä¼šå­˜åœ¨å…¼å®¹é—®é¢˜å•¦ï¼Œè¿™é‡Œä¸æ¶‰åŠes6ï¼Œå•çº¯æ‰¯ä¸€ä¸‹ã€‚</p>
<h3 id="åŸå‹å¼ç»§æ‰¿ï¼ˆé“æ ¼æ‹‰æ–¯åœ¨è´è¶ä¹¦ä¸­æå‡ºçš„ï¼‰"><a href="#åŸå‹å¼ç»§æ‰¿ï¼ˆé“æ ¼æ‹‰æ–¯åœ¨è´è¶ä¹¦ä¸­æå‡ºçš„ï¼‰" class="headerlink" title="åŸå‹å¼ç»§æ‰¿ï¼ˆé“æ ¼æ‹‰æ–¯åœ¨è´è¶ä¹¦ä¸­æå‡ºçš„ï¼‰"></a>åŸå‹å¼ç»§æ‰¿ï¼ˆé“æ ¼æ‹‰æ–¯åœ¨è´è¶ä¹¦ä¸­æå‡ºçš„ï¼‰</h3><ul>
<li>ä½¿ç”¨åœºæ™¯<ul>
<li>å¯ä»¥åˆ›å»ºä¸€ä¸ªçº¯æ´çš„å¯¹è±¡ï¼Œå¯¹è±¡ä¸­ä»€ä¹ˆå±æ€§éƒ½æ²¡æœ‰</li>
<li>åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ªæŸä¸ªçˆ¶å¯¹è±¡çš„å­—å¯¹è±¡</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºç©ºå¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> o1 = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"><span class="built_in">console</span>.log(o1); <span class="comment">//&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(o1.__proto__) <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»§æ‰¿çˆ¶å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> parent = &#123;</span><br><span class="line">	age : <span class="number">50</span>,</span><br><span class="line">	name : <span class="string">"çˆ¸çˆ¸"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s1 = <span class="built_in">Object</span>.create(parent);</span><br><span class="line"><span class="built_in">console</span>.log(s1); <span class="comment">//&#123;&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(s1.__proto__); <span class="comment">//&#123;age: 50, name: "çˆ¸çˆ¸"&#125;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å¾—å‡ºä¸€äº›åŒºåˆ«ï¼Œæ‰€è°“çš„çº¯æ´å¯¹è±¡ï¼ŒçœŸçš„å¾ˆçº¯ã€‚è¿™ä¸ªä½¿ç”¨ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚</p>
<h3 id="å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿"><a href="#å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿" class="headerlink" title="å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿"></a>å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿</h3><p>åœºæ™¯ï¼šé€‚ç”¨äº2ç§æ„é€ å‡½æ•°ä¹‹é—´æœ‰ç›¸ä¼¼çš„é€»è¾‘çš„æƒ…å†µã€‚<br>åŸç†ï¼šå‡½æ•°çš„callã€applyè°ƒç”¨æ–¹å¼ï¼ˆå‡½æ•°çš„è°ƒç”¨æ–¹å¼åœ¨æ–‡ç« åé¢è®²è§£ï¼‰</p>
<p>åœºæ™¯ä¸¾ä¾‹ï¼š<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name,age,gender</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name=name;</span><br><span class="line">    <span class="keyword">this</span>.age=age;</span><br><span class="line">    <span class="keyword">this</span>.gender=gender;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age,gender,say</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name=name;</span><br><span class="line">    <span class="keyword">this</span>.age=age;</span><br><span class="line">    <span class="keyword">this</span>.gender=gender;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.say=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>å±€é™æ€§ï¼š<code>Animal</code>ï¼ˆçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼‰çš„æ„é€ å‡½æ•°å¿…é¡»å®Œå…¨é€‚ç”¨äº<code>Person</code>ï¼ˆå­ç±»çš„æ„é€ å‡½æ•°ï¼‰</p>
</blockquote>
<p>å€Ÿç”¨æ„é€ å‡½æ•°å®ç°<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.name=name;</span><br><span class="line">            <span class="keyword">this</span>.age=age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age,say</span>)</span>&#123;</span><br><span class="line">            <span class="comment">// this.name=name;</span></span><br><span class="line">            <span class="comment">// this.age=age;</span></span><br><span class="line">            <span class="comment">// this.gender=gender;</span></span><br><span class="line">    Animal.apply(<span class="keyword">this</span>, [name, age]); </span><br><span class="line">            <span class="comment">//ç­‰åŒä¸ä¸‹é¢è¯­å¥</span></span><br><span class="line">            <span class="comment">//Animal.call(this, name, age);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.say=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Person(<span class="string">'å¼ ä¸‰'</span>, <span class="number">18</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'say'</span>);</span><br><span class="line">&#125;)) <span class="comment">//&#123;name: "å¼ ä¸‰", age: 18, say: Æ’&#125;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="and-so-on"><a href="#and-so-on" class="headerlink" title="and so on"></a>and so on</h3><p>è¿˜æœ‰å¯„ç”Ÿç»§æ‰¿ï¼Œå¯„ç”Ÿç»„åˆç»§æ‰¿ï¼Œè¿™é‡Œä¸¾ä¾‹å‡ºä»¥ä¸Šå‡ æ¡å¸¸ç”¨çš„ï¼Œå…¶ä½™è¿™é‡Œå°±ä¸å†ä¸€ä¸€ç»†æ•°äº†ã€‚</p>
<h1 id="åŸå‹é“¾"><a href="#åŸå‹é“¾" class="headerlink" title="åŸå‹é“¾"></a>åŸå‹é“¾</h1><p>æ¦‚å¿µï¼šJSä¸­çš„å¯¹è±¡å¯èƒ½ä¼šæœ‰çˆ¶å¯¹è±¡ï¼Œçˆ¶å¯¹è±¡ä¸­å¯èƒ½è¿˜ä¼šæœ‰çˆ¶å¯¹è±¡ï¼Œå°±æ˜¯ç¥–å®—åä¹ä»£äº†ã€‚<br>æ ¹æœ¬ï¼šç»§æ‰¿</p>
<pre><code>- å±æ€§ï¼šå¯¹è±¡ä¸­å‡ ä¹éƒ½ä¼šæœ‰ä¸€ä¸ª`__proto__`çš„ä¸€ä¸ªå±æ€§ï¼ŒæŒ‡å‘ä»–çš„çˆ¶å¯¹è±¡
- æ„ä¹‰ï¼Œå¯ä»¥è®¿é—®åˆ°çˆ¶å¯¹è±¡ä¸­çš„ç›¸å…³å±æ€§å’Œæ–¹æ³•
</code></pre><p>æ ¹å¯¹è±¡ï¼š<code>Object.prototype</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> Animal();</span><br><span class="line"><span class="built_in">console</span>.log(cat.__proto__); </span><br><span class="line"><span class="comment">//ç­‰åŒäº Animal.prototype</span></span><br><span class="line"><span class="built_in">console</span>.log(cat.__proto__.__proto__);</span><br><span class="line"><span class="comment">//ç­‰åŒäº Object.prototype</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å‡½æ•°å¯¹è±¡éƒ½æœ‰<code>prototype</code>ï¼ˆåŸå‹å¯¹è±¡ï¼‰ï¼›è€Œæ™®é€šå¯¹è±¡åˆ™åªæœ‰<code>__proto__</code>ï¼ˆåŸå‹æŒ‡é’ˆï¼‰</p>
</blockquote>
<h1 id="å˜é‡ä½œç”¨åŸŸ"><a href="#å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡ä½œç”¨åŸŸ"></a>å˜é‡ä½œç”¨åŸŸ</h1><p>æ¦‚å¿µï¼šå°±æ˜¯ä¸€ä¸ªå˜é‡å¯ä»¥ä½¿ç”¨çš„èŒƒå›´ã€‚</p>
<ul>
<li>æœ€å¤–å±‚ä½œç”¨åŸŸï¼šå…¨å±€ä½œç”¨åŸŸ</li>
<li>é€šè¿‡å‡½æ•°åˆ›å»ºå‡ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œå…¶ä¸­å‡½æ•°è¿˜å¯ä»¥åµŒå¥—ï¼Œæ‰€ä»¥ä½œç”¨åŸŸä¹Ÿå¯ä»¥åµŒå¥—ã€‚</li>
</ul>
<h2 id="ä½œç”¨åŸŸé“¾"><a href="#ä½œç”¨åŸŸé“¾" class="headerlink" title="ä½œç”¨åŸŸé“¾"></a>ä½œç”¨åŸŸé“¾</h2><ul>
<li>ç”±äºä½œç”¨åŸŸæ˜¯ç›¸å¯¹äºå˜é‡è€Œè¨€çš„ï¼Œè€Œå¦‚æœå­˜åœ¨å¤šçº§ä½œç”¨åŸŸï¼Œè¿™ä¸ªå˜é‡åˆæ¥è‡ªäºå“ªé‡Œï¼Ÿè¿™ä¸ªé—®é¢˜å°±éœ€è¦å¥½å¥½åœ°æ¢ç©¶ä¸€ä¸‹äº†ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå˜é‡çš„æŸ¥æ‰¾è¿‡ç¨‹ç§°ä¹‹ä¸ºå˜é‡çš„ä½œç”¨åŸŸé“¾</li>
<li>ä½œç”¨åŸŸé“¾çš„æ„ä¹‰ï¼šæŸ¥æ‰¾å˜é‡ï¼ˆç¡®å®šå˜é‡æ¥è‡ªäºå“ªé‡Œï¼Œå˜é‡æ˜¯å¦å¯ä»¥è®¿é—®ï¼‰</li>
<li>ç®€å•æ¥è¯´ï¼Œä½œç”¨åŸŸé“¾å¯ä»¥ç”¨ä»¥ä¸‹å‡ å¥è¯æ¥æ¦‚æ‹¬ï¼š(æˆ–è€…è¯´ï¼šç¡®å®šä¸€ä¸ªå˜é‡æ¥è‡ªäºå“ªä¸ªä½œç”¨åŸŸ)<ul>
<li>æŸ¥çœ‹å½“å‰ä½œç”¨åŸŸï¼Œå¦‚æœå½“å‰ä½œç”¨åŸŸå£°æ˜äº†è¿™ä¸ªå˜é‡ï¼Œå°±ç¡®å®šç»“æœ</li>
<li>æŸ¥æ‰¾å½“å‰ä½œç”¨åŸŸçš„ä¸Šçº§ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯å½“å‰å‡½æ•°çš„ä¸Šçº§å‡½æ•°ï¼Œçœ‹çœ‹ä¸Šçº§å‡½æ•°ä¸­æœ‰æ²¡æœ‰å£°æ˜</li>
<li>å†æŸ¥æ‰¾ä¸Šçº§å‡½æ•°çš„ä¸Šçº§å‡½æ•°ï¼Œç›´åˆ°å…¨å±€ä½œç”¨åŸŸä¸ºæ­¢</li>
<li>å¦‚æœå…¨å±€ä½œç”¨åŸŸä¸­ä¹Ÿæ²¡æœ‰ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸ªå˜é‡æœªå£°æ˜(xxx is not defined)</li>
</ul>
</li>
</ul>
<p>ä¾‹å­1ï¼š<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> age = <span class="number">10</span>; <span class="comment">//å…¨å±€å˜é‡</span></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(age); <span class="comment">//å¯è®¿é—®</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> name = <span class="string">"zhangsan"</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">console</span>.log(name); <span class="comment">//å¯è®¿é—®</span></span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(name); <span class="comment">//ä¸èƒ½è®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(age); <span class="comment">//å¯è®¿é—®</span></span><br></pre></td></tr></table></figure></p>
<p>ä¾‹å­2ï¼š<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> gender  = <span class="string">"ç”·"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(gender); <span class="comment">//å¯ä»¥è®¿é—®</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(gender); <span class="comment">//å¯ä»¥è®¿é—®</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">10</span>;</span><br><span class="line">&#125;)();</span><br><span class="line">f();</span><br></pre></td></tr></table></figure></p>
<h1 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h1><p>ä¸€ä¸ªç»å…¸çš„ä¾‹å­<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        a++;</span><br><span class="line">        <span class="built_in">console</span>.log(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = fn();</span><br><span class="line">f(); <span class="comment">//2</span></span><br><span class="line">f(); <span class="comment">//3</span></span><br><span class="line">f(); <span class="comment">//4</span></span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹å‡ºaçš„è¾“å‡ºå¹¶æ²¡æœ‰ä¸€ç›´è¾“å‡º3ï¼Œè€Œæ˜¯2ã€3ã€4ï¼Œè€Œäº§ç”Ÿçš„åŸå› æ˜¯å› ä¸º<code>fn</code>å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼ŒåŒ¿åå‡½æ•°çš„å¼•ç”¨å¯¼è‡´æ²¡æœ‰é‡Šæ”¾aå˜é‡ï¼Œè€Œä½œç”¨åŸŸä¸­ä¿ç•™äº†æœ€æ–°çš„aå˜é‡çš„å€¼ï¼Œé—­åŒ…é—®é¢˜å°±äº§ç”Ÿäº†ã€‚</p>
<blockquote>
<p>é—­åŒ…ä¸ä»…ä»…åªæ˜¯è¯´è¦è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡</p>
</blockquote>
<h2 id="é—­åŒ…çš„å†…å­˜é‡Šæ”¾"><a href="#é—­åŒ…çš„å†…å­˜é‡Šæ”¾" class="headerlink" title="é—­åŒ…çš„å†…å­˜é‡Šæ”¾"></a>é—­åŒ…çš„å†…å­˜é‡Šæ”¾</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> a=<span class="number">5</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            a++;</span><br><span class="line">            <span class="built_in">console</span>.log(a);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> q1=f1();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è¦æƒ³é‡Šæ”¾q1é‡Œé¢ä¿å­˜çš„aï¼Œåªèƒ½é€šè¿‡é‡Šæ”¾q1</span></span><br><span class="line">    q1=<span class="literal">null</span>;    <span class="comment">//q1=undefined</span></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="é—­åŒ…çš„åº”ç”¨"><a href="#é—­åŒ…çš„åº”ç”¨" class="headerlink" title="é—­åŒ…çš„åº”ç”¨"></a>é—­åŒ…çš„åº”ç”¨</h2><ul>
<li>æ¨¡å—åŒ–</li>
<li>é˜²æ­¢å˜é‡è¢«ç ´å</li>
</ul>
<p>ä¸¾ä¾‹ï¼šæ¨¡å—åŒ–çš„åº”ç”¨å‚è€ƒVue.jsä¸­çš„æºç </p>
<p>é˜²æ­¢å˜é‡è¢«ç ´åï¼Œè¿ç”¨åœºæ™¯</p>
<p>ä¸¾ä¾‹ï¼šKTVä¸­çš„æœ€ä½æ¶ˆè´¹ï¼Œæœ€ä½æ¶ˆè´¹çš„æ•°å€¼ä¸èƒ½å¤Ÿæš´éœ²å‡ºå»è®©åˆ«äººéšä¾¿ä¿®æ”¹ï¼Œè¿™æ ·ä¼šè„äº†æ•°æ®ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡æš´éœ²æ–¹æ³•æ¥è¿›è¡Œä¸šåŠ¡æ“ä½œï¼Œè€Œä¸æ˜¯è¿›è¡Œç›´æ¥æ“ä½œã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//åœºæ™¯ä¸¾ä¾‹</span></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">KTV</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">//æœ€ä½æ¶ˆè´¹1000</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> leastPrice = <span class="number">1000</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> sale = <span class="number">0</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">//æ¶ˆè´¹</span></span></span><br><span class="line"><span class="javascript">                pay:<span class="function"><span class="keyword">function</span>(<span class="params">pr</span>)</span>&#123;</span></span><br><span class="line">                    sale += pr;</span><br><span class="line">                &#125;,</span><br><span class="line"><span class="javascript">                <span class="comment">//ç»“è´¦</span></span></span><br><span class="line"><span class="javascript">                settlement:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line">                    if(sale&lt;leastPrice)&#123;</span><br><span class="line"><span class="javascript">                        <span class="built_in">console</span>.log(<span class="string">"æ‚¨æœªè¾¾åˆ°æœ€ä½æ¶ˆè´¹ï¼Œè¯·ç»§ç»­æ¶ˆè´¹"</span>);</span></span><br><span class="line"><span class="javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="built_in">console</span>.log(<span class="string">"æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´"</span>);</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> p1 = KTV();</span></span><br><span class="line">        p1.pay(100);</span><br><span class="line"><span class="javascript">        p1.settlement(); <span class="comment">//æ‚¨æœªè¾¾åˆ°æœ€ä½æ¶ˆè´¹ï¼Œè¯·ç»§ç»­æ¶ˆè´¹</span></span></span><br><span class="line">        p1.pay(1000);</span><br><span class="line"><span class="javascript">        p1.settlement(); <span class="comment">//æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´</span></span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¦‚æœéœ€è¦è¿›è¡Œä¿®æ”¹æœ€ä½æ¶ˆè´¹ï¼Œåœºæ™¯ï¼šè€æ¿çš„æœ‹å‹è¿›è¡Œæ¶ˆè´¹ï¼Œéœ€è¦ä¿®æ”¹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//åœºæ™¯ä¸¾ä¾‹</span></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">KTV</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">//æœ€ä½æ¶ˆè´¹1000</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> leastPrice = <span class="number">1000</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> sale = <span class="number">0</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">//æ¶ˆè´¹</span></span></span><br><span class="line"><span class="javascript">                pay:<span class="function"><span class="keyword">function</span>(<span class="params">pr</span>)</span>&#123;</span></span><br><span class="line">                    sale += pr;</span><br><span class="line">                &#125;,</span><br><span class="line"><span class="javascript">                <span class="comment">//ç»“è´¦</span></span></span><br><span class="line"><span class="javascript">                settlement:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line">                    if(sale&lt;leastPrice)&#123;</span><br><span class="line"><span class="javascript">                        <span class="built_in">console</span>.log(<span class="string">"æ‚¨æœªè¾¾åˆ°æœ€ä½æ¶ˆè´¹ï¼Œè¯·ç»§ç»­æ¶ˆè´¹"</span>);</span></span><br><span class="line"><span class="javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="built_in">console</span>.log(<span class="string">"æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´"</span>);</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line"><span class="javascript">                <span class="comment">//ä¼ å…¥å·¥å·ï¼Œå’Œä¿®æ”¹æœ€ä½æ¶ˆè´¹å€¼</span></span></span><br><span class="line"><span class="javascript">                edit:<span class="function"><span class="keyword">function</span>(<span class="params">id,lp</span>)</span>&#123;</span></span><br><span class="line">                    if(id == 888)&#123;</span><br><span class="line">                        leastPrice = lp;</span><br><span class="line"><span class="javascript">                    &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="built_in">console</span>.log(<span class="string">"ä½ ä¸æ˜¯ç®¡ç†å‘˜ï¼Œæ— æ³•ä¿®æ”¹"</span>);</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> p1 = KTV();</span></span><br><span class="line">        p1.pay(100);</span><br><span class="line"><span class="javascript">        p1.settlement(); <span class="comment">//æ‚¨æœªè¾¾åˆ°æœ€ä½æ¶ˆè´¹ï¼Œè¯·ç»§ç»­æ¶ˆè´¹</span></span></span><br><span class="line"><span class="javascript">        p1.edit(<span class="number">100</span>, <span class="number">200</span>); <span class="comment">//ä½ ä¸æ˜¯ç®¡ç†å‘˜ï¼Œæ— æ³•ä¿®æ”¹</span></span></span><br><span class="line"><span class="javascript">        p1.edit(<span class="number">888</span>, <span class="number">100</span>); <span class="comment">//æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´</span></span></span><br><span class="line">        p1.settlement();</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é—­åŒ…çš„è¿ç”¨é˜²æ­¢å˜é‡è¢«ç ´åï¼Œæš´éœ²å‡ºæ–¹æ³•æ¥é—´æ¥ä¿®æ”¹æ•°å€¼ï¼Œé˜²æ­¢å‡ºç°è„æ•°æ®ã€‚<br>é—­åŒ…ä¸­ä¹Ÿæœ‰ä½œç”¨åŸŸé“¾çš„ç›¸å…³è¿ç”¨ã€‚</p>
<h1 id="ä¸¥æ ¼æ¨¡å¼"><a href="#ä¸¥æ ¼æ¨¡å¼" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼"></a>ä¸¥æ ¼æ¨¡å¼</h1><p>ä» ES5 å¼€å§‹ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è®¾å®šä¸ºä¸¥æ ¼æ¨¡å¼ã€‚</p>
<p>ä¸¥æ ¼æ¨¡å¼ä¸»è¦æœ‰ä»¥ä¸‹é™åˆ¶ã€‚</p>
<ul>
<li>å˜é‡å¿…é¡»å£°æ˜åå†ä½¿ç”¨</li>
<li>å‡½æ•°çš„å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§ï¼Œå¦åˆ™æŠ¥é”™</li>
<li>ä¸èƒ½ä½¿ç”¨<code>with</code>è¯­å¥</li>
<li>ä¸èƒ½å¯¹åªè¯»å±æ€§èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™</li>
<li>ä¸èƒ½ä½¿ç”¨å‰ç¼€ 0 è¡¨ç¤ºå…«è¿›åˆ¶æ•°ï¼Œå¦åˆ™æŠ¥é”™</li>
<li>ä¸èƒ½åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™</li>
<li>ä¸èƒ½åˆ é™¤å˜é‡<code>delete prop</code>ï¼Œä¼šæŠ¥é”™ï¼Œåªèƒ½åˆ é™¤å±æ€§<code>delete global[prop]</code></li>
<li><code>eval</code>ä¸ä¼šåœ¨å®ƒçš„å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡</li>
<li><code>eval</code>å’Œ<code>arguments</code>ä¸èƒ½è¢«é‡æ–°èµ‹å€¼</li>
<li><code>arguments</code>ä¸ä¼šè‡ªåŠ¨åæ˜ å‡½æ•°å‚æ•°çš„å˜åŒ–</li>
<li>ä¸èƒ½ä½¿ç”¨<code>arguments.callee</code></li>
<li>ä¸èƒ½ä½¿ç”¨<code>arguments.caller</code></li>
<li>ç¦æ­¢<code>this</code>æŒ‡å‘å…¨å±€å¯¹è±¡</li>
<li>ä¸èƒ½ä½¿ç”¨<code>fn.caller</code>å’Œ<code>fn.arguments</code>è·å–å‡½æ•°è°ƒç”¨çš„å †æ ˆ</li>
<li>å¢åŠ äº†ä¿ç•™å­—ï¼ˆæ¯”å¦‚<code>protected</code>ã€<code>static</code>å’Œ<code>interface</code>ï¼‰</li>
</ul>
<p>ä¸Šé¢è¿™äº›é™åˆ¶ï¼Œæ¨¡å—éƒ½å¿…é¡»éµå®ˆã€‚ç”±äºä¸¥æ ¼æ¨¡å¼æ˜¯ ES5 å¼•å…¥çš„ï¼Œä¸å±äº ES6ï¼Œæ‰€ä»¥è¯·å‚é˜…ç›¸å…³ ES5 ä¹¦ç±ï¼Œæœ¬ä¹¦ä¸å†è¯¦ç»†ä»‹ç»äº†ã€‚</p>
<p>å…¶ä¸­ï¼Œå°¤å…¶éœ€è¦æ³¨æ„<code>this</code>çš„é™åˆ¶ã€‚ES6 æ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„<code>this</code>æŒ‡å‘<code>undefined</code>ï¼Œå³ä¸åº”è¯¥åœ¨é¡¶å±‚ä»£ç ä½¿ç”¨<code>this</code>ã€‚</p>
<h1 id="å‡½æ•°çš„å››ç§è°ƒç”¨æ–¹å¼"><a href="#å‡½æ•°çš„å››ç§è°ƒç”¨æ–¹å¼" class="headerlink" title="å‡½æ•°çš„å››ç§è°ƒç”¨æ–¹å¼"></a>å‡½æ•°çš„å››ç§è°ƒç”¨æ–¹å¼</h1><p>ä¸ºä»€ä¹ˆè¦åŒºåˆ†å‡½æ•°çš„è°ƒç”¨æ–¹å¼å‘¢ï¼Ÿæ˜¯å› ä¸ºåœ¨ES6å‰ï¼Œå‡½æ•°å†…éƒ¨çš„thisæ˜¯ç”±è¯¥å‡½æ•°çš„è°ƒç”¨æ–¹å¼å†³å®šçš„ï¼Œå‡½æ•°å†…éƒ¨çš„thisè·Ÿå¤§å°å†™ã€ä¹¦å†™ä½ç½®æ— å…³ã€‚</p>
<h2 id="å‡½æ•°è°ƒç”¨æ–¹å¼"><a href="#å‡½æ•°è°ƒç”¨æ–¹å¼" class="headerlink" title="å‡½æ•°è°ƒç”¨æ–¹å¼"></a>å‡½æ•°è°ƒç”¨æ–¹å¼</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person(); <span class="comment">//Window</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°æ‰“å°çš„thisæŒ‡å‘çš„æ˜¯windowå¯¹è±¡ã€‚</p>
<p>åœ¨çœ‹ç¬¬äºŒç§æƒ…å†µ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> p = &#123;</span><br><span class="line">         say:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = p.say;</span><br><span class="line">s(); <span class="comment">//Window</span></span><br><span class="line"></span><br><span class="line">Person.prototype.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f1 = Person.prototype.say;</span><br><span class="line">f1(); <span class="comment">//Window</span></span><br></pre></td></tr></table></figure>
<p>thisçš„æŒ‡å‘è¿˜æ˜¯windowå¯¹è±¡ã€‚</p>
<p>è€Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="meta">    'use strict'</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person(); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> p = &#123;</span><br><span class="line">    say: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">        'use strict'</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = p.say;</span><br><span class="line">s(); <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line">Person.prototype.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">    'use strict'</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f1 = Person.prototype.say;</span><br><span class="line">f1(); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæ˜¯ä»¥å‡½æ•°æ–¹å¼æ¥è°ƒç”¨ï¼Œå‡½æ•°å†…éƒ¨çš„thiså°†æŒ‡å‘windowå¯¹è±¡ã€‚è€Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œç”±äºå‡½æ•°è°ƒç”¨æ–¹å¼thiséƒ½æ˜¯æŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œè€Œä¸¥æ ¼æ¨¡å¼ç¦æ­¢thisæŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œæ‰€ä»¥thiséƒ½æ˜¯undefined</p>
</blockquote>
<h2 id="æ–¹æ³•è°ƒç”¨æ–¹å¼"><a href="#æ–¹æ³•è°ƒç”¨æ–¹å¼" class="headerlink" title="æ–¹æ³•è°ƒç”¨æ–¹å¼"></a>æ–¹æ³•è°ƒç”¨æ–¹å¼</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//è¿™é‡Œä¸è®¨è®ºageå’Œsayæ–¹æ³•ä¸­çš„this</span></span><br><span class="line">         <span class="keyword">this</span>.age = <span class="number">10</span>;</span><br><span class="line">         <span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person();</span><br><span class="line">p1.say(); <span class="comment">//Person</span></span><br></pre></td></tr></table></figure>
<p>thisæŒ‡å‘äº†p1å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.say = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person();</span><br><span class="line">p2.say(); <span class="comment">//Person</span></span><br></pre></td></tr></table></figure>
<p>thisæŒ‡å‘äº†p2å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> p3 = &#123;</span><br><span class="line">    age: <span class="number">10</span>,</span><br><span class="line">    say: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">p3.say(); <span class="comment">//p2</span></span><br></pre></td></tr></table></figure>
<p>thisæŒ‡å‘äº†p3å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> clear = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tom = &#123;</span><br><span class="line">    c: clear,</span><br><span class="line">    length: <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tom.c(); <span class="comment">//20</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°cå‡½æ•°è¿˜æ˜¯ä½¿ç”¨æ–¹æ³•è°ƒç”¨çš„æ–¹å¼æ¥è°ƒç”¨çš„ï¼ŒcæŒ‡å‘äº†clearå‡½æ•°ï¼Œæ‰€ä»¥å‡½æ•°ä½“ä¸­çš„thisæŒ‡å‘äº†tomï¼Œæ‰€ä»¥æ‰“å°äº†20.</p>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨æ–¹æ³•æ–¹æ³•è°ƒç”¨çš„thisä¼šæŒ‡å‘è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡ã€‚</p>
</blockquote>
<h2 id="æ„é€ å‡½æ•°è°ƒç”¨æ–¹å¼"><a href="#æ„é€ å‡½æ•°è°ƒç”¨æ–¹å¼" class="headerlink" title="æ„é€ å‡½æ•°è°ƒç”¨æ–¹å¼"></a>æ„é€ å‡½æ•°è°ƒç”¨æ–¹å¼</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(); <span class="comment">//p1</span></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡newå…³é”®å­—æ¥è°ƒç”¨çš„ï¼Œé‚£ä¹ˆè¿™ç§æ–¹å¼å°±æ˜¯æ„é€ å‡½æ•°çš„è°ƒç”¨æ–¹å¼ï¼Œè¿™ç§æ–¹å¼åˆ›å»ºçš„å‡½æ•°å†…éƒ¨thiså°†æŒ‡å‘è¯¥æ„é€ å‡½æ•°çš„å®ä¾‹å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jQuery</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> _init=jQuery.prototype.init;</span><br><span class="line">        <span class="comment">//å¦‚æœå‡½æ•°è¿”å›äº†ä¸€ä¸ªå¤æ‚æ•°æ®ç±»å‹çš„å€¼ï¼Œé‚£ä¹ˆæœ¬æ¬¡å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯è¯¥å€¼ã€‚</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> _init();</span><br><span class="line">    &#125;</span><br><span class="line">    jQuery.prototype=&#123;</span><br><span class="line">        <span class="keyword">constructor</span>:jQuery,</span><br><span class="line">        length:100,</span><br><span class="line">        init:function()&#123;</span><br><span class="line">            <span class="comment">//thisæŒ‡å‘initæ„é€ å‡½æ•°çš„å®ä¾‹</span></span><br><span class="line">            <span class="comment">//--&gt;1ã€é¦–å…ˆæŸ¥çœ‹æœ¬èº«æœ‰æ²¡æœ‰lengthå±æ€§</span></span><br><span class="line">            <span class="comment">//--&gt;2ã€å¦‚æœæœ¬èº«æ²¡æœ‰è¯¥å±æ€§ï¼Œé‚£ä¹ˆå»å®ƒçš„åŸå‹å¯¹è±¡ä¸­æŸ¥æ‰¾</span></span><br><span class="line">            <span class="comment">//--&gt;3ã€å¦‚æœåŸå‹å¯¹è±¡ä¸­æ²¡æœ‰ï¼Œé‚£ä¹ˆå°±å»åŸå‹å¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼Œæœ€ç»ˆä¸€ç›´æ‰¾åˆ°æ ¹å¯¹è±¡ï¼ˆObject.prototypeï¼‰</span></span><br><span class="line">            <span class="comment">//--&gt;4ã€æœ€ç»ˆéƒ½æ²¡æœ‰æ‰¾åˆ°çš„è¯ï¼Œæˆ‘ä»¬è®¤ä¸ºè¯¥å¯¹è±¡å¹¶æ²¡æœ‰è¯¥å±æ€§ï¼Œå¦‚æœè·å–è¯¥å±æ€§çš„å€¼ï¼šundefined</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.length);   </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> jQuery(); <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°è¯´äº†thisæŒ‡å‘è¯¥æ„é€ å‡½æ•°çš„å®ä¾‹å¯¹è±¡ï¼Œå¯ä»¥è®¿é—®è‡ªèº«å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•ï¼Œè¿™é‡Œè¿”å›äº†<code>init.prototype</code>çš„å±æ€§ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯<code>Jquery.prototype</code>çš„å±æ€§ï¼Œæ‰€ä»¥æ‰“å°çš„æ˜¯<code>undefined</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¿®æ”¹äº†initå‡½æ•°çš„é»˜è®¤åŸå‹ï¼ŒæŒ‡å‘æ–°åŸå‹</span></span><br><span class="line">jQuery.prototype.init.prototype = jQuery.prototype;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº†<code>init.prototype</code>æŒ‡å‘äº†<code>jQuery.prototype</code>ï¼Œé‚£ä¹ˆå†è¿è¡Œä¸Šè¿°ä»£ç ï¼Œ<code>this.length</code>æ‰“å°çš„å€¼å°†æ˜¯100ã€‚</p>
<h2 id="ä¸Šä¸‹æ–‡è°ƒç”¨æ–¹å¼"><a href="#ä¸Šä¸‹æ–‡è°ƒç”¨æ–¹å¼" class="headerlink" title="ä¸Šä¸‹æ–‡è°ƒç”¨æ–¹å¼"></a>ä¸Šä¸‹æ–‡è°ƒç”¨æ–¹å¼</h2><h3 id="call"><a href="#call" class="headerlink" title="call"></a>call</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fcall</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fcall.call(<span class="keyword">this</span>); <span class="comment">//Window</span></span><br><span class="line">fcall.call([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>]); <span class="comment">//[1, 3, 5]</span></span><br><span class="line">fcall.call(<span class="number">1</span>); <span class="comment">//Number</span></span><br><span class="line">fcall.call(<span class="string">"abc"</span>); <span class="comment">//String</span></span><br><span class="line">fcall.call(<span class="literal">true</span>); <span class="comment">//Boolean</span></span><br><span class="line">fcall.call(<span class="literal">null</span>); <span class="comment">//Window</span></span><br><span class="line">fcall.call(<span class="keyword">new</span> fcall()); <span class="comment">//fcall</span></span><br><span class="line">fcall.call(&#123;<span class="attr">age</span>:<span class="number">20</span>,<span class="attr">height</span>:<span class="number">1000</span>&#125;); <span class="comment">//&#123;age: 20, height: 1000&#125;</span></span><br><span class="line">fcall.call(<span class="literal">undefined</span>); <span class="comment">//Window</span></span><br></pre></td></tr></table></figure>
<p>callæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±å†³å®šäº†å‡½æ•°å†…éƒ¨thisçš„æŒ‡å‘ã€‚<br>å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹æ˜¯ï¼š</p>
<ul>
<li>å¯¹è±¡ç±»å‹ï¼šé‚£ä¹ˆthiså°†æŒ‡å‘è¯¥å¯¹è±¡</li>
<li>å¦‚æœæ˜¯<code>undefined</code>,<code>null</code>ï¼Œé‚£ä¹ˆthiså°†æŒ‡å‘Window</li>
<li>å¦‚æœæ˜¯æ™®é€šçš„æ•°æ®ç±»å‹æ¯”å¦‚<code>&quot;abc&quot;</code>,<code>1</code>,<code>true</code>åˆ™ä¼šè½¬æ¢æˆå¯¹åº”æ„é€ å‡½æ•°çš„å®ä¾‹ï¼ˆè£…ç®±ï¼‰ï¼Œä¾‹å¦‚<code>String</code>,<code>Number</code>,<code>Boolean</code>ã€‚</li>
</ul>
<h3 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h3><p>applyå’Œcallæ–¹æ³•è°ƒç”¨æ–¹å¼å¯ä»¥å®Œå…¨ç›¸åŒï¼Œåªæ˜¯åé¢ä¼ å‚æ•°æ—¶æœ‰å¼‚åŒã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toString</span>(<span class="params">a,b,c</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a+<span class="string">" "</span>+b+<span class="string">" "</span>+c);</span><br><span class="line">&#125;</span><br><span class="line">toString.call(<span class="literal">null</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>)   <span class="comment">//"1 3 5"</span></span><br><span class="line">toString.apply(<span class="literal">null</span>,[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>])<span class="comment">//"1 3 5"</span></span><br></pre></td></tr></table></figure>
<h3 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h3><p>bindæ˜¯es5ä¸­æ‰æœ‰çš„(IE9+)</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    age: <span class="number">10</span>,</span><br><span class="line">    run: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.age); <span class="comment">//undefined</span></span><br><span class="line">        &#125;, <span class="number">50</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.run();</span><br></pre></td></tr></table></figure>
<p>ä»¥å‰è¿™æ ·ä¹¦å†™æ—¶ï¼Œå¯èƒ½ä¼šå®šä¹‰ä¸€ä¸ªå¦å¤–çš„å˜é‡æ¥æŒ‡å‘this</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    age: <span class="number">10</span>,</span><br><span class="line">    run: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> _that = <span class="keyword">this</span>;</span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(_that.age); <span class="comment">//10</span></span><br><span class="line">        &#125;, <span class="number">50</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.run();</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ç°åœ¨å¯ä»¥ä½¿ç”¨bindæ¥å®ç°äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    age: <span class="number">10</span>,</span><br><span class="line">    run: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        setTimeout((<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.age); <span class="comment">//10</span></span><br><span class="line">        &#125;).bind(<span class="keyword">this</span>), <span class="number">50</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.run();</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼Œä½¿ç”¨bindæ–¹å¼åthisçš„æŒ‡å‘å°†æ”¹ä¸ºäº†objã€‚</p>
<p>æ›´ç›´è§‚çš„äº†è§£bindæ–¹æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">speed</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.speed);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> speedOther = speed.bind(&#123; <span class="attr">speed</span>: <span class="number">20</span> &#125;);</span><br><span class="line">speedOther(); <span class="comment">// 20</span></span><br></pre></td></tr></table></figure>
<p>speed.bindæ–¹æ³•æ‰§è¡Œåä¼šäº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œæ–°çš„å‡½æ•°ä½“å†…ä¸åŸæ¥çš„æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å”¯ä¸€çš„ä¸åŒå°±æ˜¯thisçš„æŒ‡å‘æ”¹ä¸ºäº†<code>{ speed: 20 }</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">    name:<span class="string">"è¥¿ç“œ"</span>,</span><br><span class="line">    drink:(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//thisæŒ‡å‘äº†ï¼š&#123; name:"æ©™æ±" &#125;</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;).bind(&#123; <span class="attr">name</span>:<span class="string">"æ©™æ±"</span> &#125;)</span><br><span class="line">&#125;</span><br><span class="line">obj.drink();    <span class="comment">//"æ©™æ±"</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¸‰è€…çš„åŒºåˆ«"><a href="#ä¸‰è€…çš„åŒºåˆ«" class="headerlink" title="ä¸‰è€…çš„åŒºåˆ«"></a>ä¸‰è€…çš„åŒºåˆ«</h3><p>call\applyæ˜¯ç«‹åˆ»æ‰§è¡Œäº†è¿™ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç»‘å®šäº†thisçš„å€¼ï¼Œè€Œbindå¹¶æ²¡æœ‰ç«‹åˆ»æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯äº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œæ–°çš„å‡½æ•°ç»‘å®šäº†thisçš„å€¼ã€‚</p>
<h2 id="ES6ä¸­çš„ç®­å¤´å‡½æ•°"><a href="#ES6ä¸­çš„ç®­å¤´å‡½æ•°" class="headerlink" title="ES6ä¸­çš„ç®­å¤´å‡½æ•°"></a>ES6ä¸­çš„ç®­å¤´å‡½æ•°</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŒ¿åå‡½æ•°</span></span><br><span class="line">div.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ä½ å¥½"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç®­å¤´å‡½æ•°</span></span><br><span class="line">div.onclick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ä½ å¥½"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>æœ‰ä¸€ä¸ªå‚æ•°çš„ç®­å¤´å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="function">(<span class="params">a</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"abc"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç­‰ä»·äºï¼š</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="params">a</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"abc"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ‰2ä¸ªåŠæ›´å¤šå‚æ•°çš„ç®­å¤´å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> f=<span class="function">(<span class="params">a,b,c</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"abc"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>ç®­å¤´å‡½æ•°å’Œæ™®é€šåŒ¿åå‡½æ•°æœ‰å“ªäº›ä¸åŒï¼Ÿ</strong></p>
<ul>
<li>å‡½æ•°ä½“å†…çš„thiså¯¹è±¡ï¼Œå°±æ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚</li>
<li>ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯ä»¥ä½¿ç”¨newå‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</li>
<li>ä¸å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ã€‚å¦‚æœè¦ç”¨ï¼Œå¯ä»¥ç”¨ rest å‚æ•°ä»£æ›¿ã€‚</li>
<li>ï¼ˆä¸å¸¸ç”¨ï¼‰ä¸å¯ä»¥ä½¿ç”¨yieldå‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œ Generator å‡½æ•°ã€‚ </li>
<li>generatorå‡½æ•°ç°åœ¨ç»å¸¸ç”¨asyncæ›¿ä»£</li>
</ul>
<h1 id="æ•°æ®ç±»å‹åˆ¤æ–­"><a href="#æ•°æ®ç±»å‹åˆ¤æ–­" class="headerlink" title="æ•°æ®ç±»å‹åˆ¤æ–­"></a>æ•°æ®ç±»å‹åˆ¤æ–­</h1><ul>
<li>typeof <ul>
<li>typeofåªèƒ½åˆ¤æ–­ï¼šæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€undefinedã€å‡½æ•°</li>
</ul>
</li>
<li><code>Object.prototype.toString.call()</code><ul>
<li>5  <code>[object Number]</code></li>
<li>â€œabcâ€<code>[object String]</code></li>
<li>true <code>[object Boolean]</code></li>
<li>null <code>[object Null]</code></li>
<li>undefined <code>[object Undefined]</code></li>
<li>[1,3,5] <code>[object Array]</code></li>
<li>function(){} <code>[object Function]</code></li>
<li>new Date()   <code>[object Date]</code></li>
<li>/abc/       <code>[object RegExp]</code></li>
</ul>
</li>
<li>Array.isArray()  es5ä¸­æå‡ºæ¥çš„æ£€æµ‹æ•°ç»„</li>
<li>isNaN()   </li>
<li>isInfinity()</li>
</ul>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML5ç§»åŠ¨ç«¯è‡ªé€‚åº”æ–¹æ¡ˆâ€”â€”æ‰‹æ·˜flexibleæ–¹æ¡ˆ</title>
    <url>/2019/05/28/HTML5%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%87%AA%E9%80%82%E5%BA%94%E6%96%B9%E6%A1%88%E2%80%94%E2%80%94%E6%89%8B%E6%B7%98flexible%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å‰æ–‡è®²è¿‡äº†[HTML5ç§»åŠ¨ç«¯è‡ªé€‚åº”æ–¹æ¡ˆâ€”â€”åª’ä½“æŸ¥è¯¢-remæ–¹æ¡ˆ]ï¼ŒåŸºäºåª’ä½“æŸ¥è¯¢æ–¹å¼çš„å“åº”å¼æœ‰ä¼˜ç‚¹ä¹Ÿæœ‰ç¼ºç‚¹ï¼š</p>
<p>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§å¥½ï¼Œ@mediaåœ¨ie9ä»¥ä¸Šæ˜¯æ”¯æŒçš„ï¼ŒPCå’ŒMOBILEæ˜¯åŒä¸€å¥—ä»£ç çš„ï¼Œä¸ç”¨åˆ†å¼€ã€‚</p>
<p>ç¼ºç‚¹ï¼šè¦å†™å¾—cssç›¸å¯¹å¦å¤–ä¸¤ä¸ªå¤šå¾ˆå¤šï¼Œè€Œä¸”å„ä¸ªæ–­ç‚¹éƒ½è¦åšå¥½ã€‚cssæ ·å¼ä¼šç¨å¾®å¤§ç‚¹ï¼Œæ›´éº»çƒ¦ã€‚</p>
<a id="more"></a>
<blockquote>
<p>æœ¬æ–‡ä¸­ä¸æ¶‰åŠä¸€äº›viewportã€dprã€emã€remç­‰çš„æ¦‚å¿µä»‹ç»ï¼Œè¯¦ç»†äº†è§£å¯ä»¥å†æŸ¥çœ‹æœ¬åšå®¢ä¸­å¦ä¸€ç¯‡æ–‡ç« æœ‰å…·ä½“è®²è§£è¿™äº›æ¦‚å¿µã€‚</p>
</blockquote>
<p>æ‰€ä»¥è¿™é‡Œä»‹ç»å¦ä¸€ç§ä½¿ç”¨Flexibleå®ç°æ‰‹æ·˜H5é¡µé¢çš„ç»ˆç«¯é€‚é…ã€‚</p>
<h1 id="lib-flexibleä½¿ç”¨"><a href="#lib-flexibleä½¿ç”¨" class="headerlink" title="lib-flexibleä½¿ç”¨"></a>lib-flexibleä½¿ç”¨</h1><p>GitHub:<a href="https://github.com/amfe/lib-flexible" target="_blank" rel="noopener">https://github.com/amfe/lib-flexible</a></p>
<p><a href="https://github.com/amfe/lib-flexible" target="_blank" rel="noopener"><code>lib-flexible</code></a>æ˜¯ä¸€ä¸ªåˆ¶ä½œH5é€‚é…çš„å¼€æºåº“ï¼Œå¯ä»¥<a href="https://github.com/amfe/lib-flexible/archive/master.zip" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡Œ</a>ä¸‹è½½ç›¸å…³æ–‡ä»¶ï¼Œè·å–éœ€è¦çš„JavaScriptå’ŒCSSæ–‡ä»¶ã€‚</p>
<p>æˆ–è€…é˜¿é‡ŒCDN</p>
<blockquote>
<p>å»ºè®®ä½¿ç”¨ç»å…¸ç‰ˆæœ¬0.3.2 <a href="https://github.com/amfe/lib-flexible/tree/master" target="_blank" rel="noopener">github</a></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://g.tbcdn.cn/mtb/lib-flexible/&#123;&#123;version&#125;&#125;/??flexible_css.js,flexible.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å°†ä»£ç ä¸­çš„<code></code>æ¢æˆå¯¹åº”çš„ç‰ˆæœ¬å·<code>0.3.4</code>ã€‚</p>
<p>åœ¨Webé¡µé¢çš„<code>&lt;head&gt;&lt;/head&gt;</code>ä¸­æ·»åŠ å¯¹åº”çš„<code>flexible_css.js,flexible.js</code>æ–‡ä»¶ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"build/flexible.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//cdn</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://g.tbcdn.cn/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¦å¤–å¼ºçƒˆå»ºè®®å¯¹JSåš<strong>å†…è”å¤„ç†</strong>ï¼Œåœ¨æ‰€æœ‰èµ„æºåŠ è½½ä¹‹å‰æ‰§è¡Œè¿™ä¸ªJSã€‚æ‰§è¡Œè¿™ä¸ªJSåï¼Œä¼šåœ¨<code>&lt;html&gt;</code>å…ƒç´ ä¸Šå¢åŠ ä¸€ä¸ª<code>data-dpr</code>å±æ€§ï¼Œä»¥åŠä¸€ä¸ª<code>font-size</code>æ ·å¼ã€‚JSä¼šæ ¹æ®ä¸åŒçš„è®¾å¤‡æ·»åŠ ä¸åŒçš„<code>data-dpr</code>å€¼ï¼Œæ¯”å¦‚è¯´<code>2</code>æˆ–è€…<code>3</code>ï¼ŒåŒæ—¶ä¼šç»™<code>html</code>åŠ ä¸Šå¯¹åº”çš„<code>font-size</code>çš„å€¼ï¼Œæ¯”å¦‚è¯´<code>75px</code>ã€‚</p>
<p>å¦‚æ­¤ä¸€æ¥ï¼Œé¡µé¢ä¸­çš„å…ƒç´ ï¼Œéƒ½å¯ä»¥é€šè¿‡<code>rem</code>å•ä½æ¥è®¾ç½®ã€‚ä»–ä»¬ä¼šæ ¹æ®<code>html</code>å…ƒç´ çš„<code>font-size</code>å€¼åšç›¸åº”çš„è®¡ç®—ï¼Œä»è€Œå®ç°å±å¹•çš„é€‚é…æ•ˆæœã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨å¼•å…¥<a href="https://github.com/amfe/lib-flexible" target="_blank" rel="noopener"><code>lib-flexible</code></a>éœ€è¦æ‰§è¡Œçš„JSä¹‹å‰ï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®<code>meta</code>æ¥æ§åˆ¶<code>dpr</code>å€¼ï¼Œå¦‚ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"flexible"</span> <span class="attr">content</span>=<span class="string">"initial-dpr=2"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­<code>initial-dpr</code>ä¼šæŠŠ<code>dpr</code>å¼ºåˆ¶è®¾ç½®ä¸ºç»™å®šçš„å€¼ã€‚å¦‚æœæ‰‹åŠ¨è®¾ç½®äº†<code>dpr</code>ä¹‹åï¼Œä¸ç®¡è®¾å¤‡æ˜¯å¤šå°‘çš„<code>dpr</code>ï¼Œéƒ½ä¼šå¼ºåˆ¶è®¤ä¸ºå…¶<code>dpr</code>æ˜¯ä½ è®¾ç½®çš„å€¼ã€‚<strong>åœ¨æ­¤ä¸å»ºè®®æ‰‹åŠ¨å¼ºåˆ¶è®¾ç½®<code>dpr</code>ï¼Œå› ä¸ºåœ¨Flexibleä¸­ï¼Œåªå¯¹iOSè®¾å¤‡è¿›è¡Œ<code>dpr</code>çš„åˆ¤æ–­ï¼Œå¯¹äºAndroidç³»åˆ—ï¼Œå§‹ç»ˆè®¤ä¸ºå…¶<code>dpr</code>ä¸º<code>1</code>ã€‚</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!dpr &amp;&amp; !scale) &#123;</span><br><span class="line">    <span class="keyword">var</span> isAndroid = win.navigator.appVersion.match(<span class="regexp">/android/gi</span>);</span><br><span class="line">    <span class="keyword">var</span> isIPhone = win.navigator.appVersion.match(<span class="regexp">/iphone/gi</span>);</span><br><span class="line">    <span class="keyword">var</span> devicePixelRatio = win.devicePixelRatio;</span><br><span class="line">    <span class="keyword">if</span> (isIPhone) &#123;</span><br><span class="line">        <span class="comment">// iOSä¸‹ï¼Œå¯¹äº2å’Œ3çš„å±ï¼Œç”¨2å€çš„æ–¹æ¡ˆï¼Œå…¶ä½™çš„ç”¨1å€æ–¹æ¡ˆ</span></span><br><span class="line">        <span class="keyword">if</span> (devicePixelRatio &gt;= <span class="number">3</span> &amp;&amp; (!dpr || dpr &gt;= <span class="number">3</span>)) &#123;                </span><br><span class="line">            dpr = <span class="number">3</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (devicePixelRatio &gt;= <span class="number">2</span> &amp;&amp; (!dpr || dpr &gt;= <span class="number">2</span>))&#123;</span><br><span class="line">            dpr = <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            dpr = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å…¶ä»–è®¾å¤‡ä¸‹ï¼Œä»æ—§ä½¿ç”¨1å€çš„æ–¹æ¡ˆ</span></span><br><span class="line">        dpr = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    scale = <span class="number">1</span> / dpr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Flexibleå®ç°è‡ªé€‚åº”"><a href="#Flexibleå®ç°è‡ªé€‚åº”" class="headerlink" title="Flexibleå®ç°è‡ªé€‚åº”"></a>Flexibleå®ç°è‡ªé€‚åº”</h1><p>å›¾ç‰‡ç´ æï¼š</p>
<p><img src="designpsd.jpeg" alt></p>
<p><img src="grayscale.jpeg" alt></p>
<p><img src="haibao.jpg" alt></p>
<p>è¯¥è®¾è®¡å›¾æ˜¯æŒ‰ç…§iPhone6ä½œä¸ºåŸºå‡†è®¾è®¡å°ºå¯¸ï¼ŒiPhone6çš„åˆ†è¾¨ç‡ä¸º<code>750px * 1334px</code>ï¼ŒiPhone6çš„DPRä¸º2ï¼Œåˆ™CSSåƒç´ åˆ™ç¼©å°ä¸ºè®¾è®¡ç¨¿å°ºå¯¸çš„<code>1/2</code>ã€‚æ—¢è®¾è®¡ç¨¿é‡å‡ºæŸå®½ä¸º20pxï¼Œåˆ™cssåƒç´ åˆ™è½¬ä¸ºä¸º10pxã€‚</p>
<blockquote>
<p>ç†æƒ³é€‚å£çš„ç¼©æ”¾æ¯”ä¸º1çš„æƒ…å†µä¸‹</p>
</blockquote>
<p>é¦–å…ˆæŒ‰ç…§è®¾è®¡ç¨¿å°ºå¯¸è¿˜åŸé¡µé¢ï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œé¦–å…ˆä½¿ç”¨pxè¿˜åŸé¡µé¢ï¼Œåœ¨iPhone6ä¸‹æ˜¾ç¤ºè®¾è®¡ã€‚</p>
<p>å®ç°ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, user-scalable=no"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            padding: 0;</span><br><span class="line">            margin: 0;</span><br><span class="line">            box-sizing: border-box;</span><br><span class="line">            -webkit-tap-highlight-color: transparent;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        html,body &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        html,body &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#f5294c</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/* background-color: #f5294c; */</span></span></span><br><span class="line">            min-width: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.header</span> <span class="selector-tag">h1</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line">            width: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> &#123;</span></span><br><span class="line">            padding: 0 5px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">            position: relative;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">            padding: 5px 0;</span><br><span class="line">            display: table-cell;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.left</span> <span class="selector-tag">img</span>&#123;</span></span><br><span class="line">            width: 88px;</span><br><span class="line">            height: 88px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">            display: table-cell;</span><br><span class="line">            padding: 5px 8px 0 8px;</span><br><span class="line">            vertical-align: top;</span><br><span class="line">            width: 100%;</span><br><span class="line">            font-size: 13px;</span><br><span class="line"><span class="css">            <span class="selector-tag">line-height</span>: 1<span class="selector-class">.25</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> <span class="selector-class">.price</span> &#123;</span></span><br><span class="line">            margin: 9px 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> <span class="selector-class">.price</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#f32a4c</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> <span class="selector-class">.price</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line">            font-size: 10px;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#f32a4c</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#fffffd</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> <span class="selector-class">.intro</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#ffb09b</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.buy</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            right: 9px;</span><br><span class="line">            bottom: 7px;</span><br><span class="line"><span class="css">            <span class="selector-tag">line-height</span>: 1<span class="selector-class">.25</span>;</span></span><br><span class="line">            font-size: 13px;</span><br><span class="line">            padding: 5px 18px;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#f42a4b</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#fefffc</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.buy</span> <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#fefffc</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æµ·æŠ¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/haibao.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"section"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸åšè¿‡å¤šçš„é¡µé¢ç¾åŒ–ã€‚é¢„è§ˆä¸€ä¸‹</p>
<p><img src="preview.png" alt></p>
<p>åœ¨headä¸­é…ç½®flexible</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./node_modules/amfe-flexible/index.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æŠŠè§†è§‰ç¨¿ä¸­çš„pxæ¢ç®—æˆrem</strong></p>
<p>ä¹‹å‰æåˆ°è®¾è®¡ç¨¿æ˜¯ä»¥iPhone6ä¸ºåŸºå‡†çš„ï¼Œå³<code>750px * 1334px</code>çš„è®¾è®¡ç¨¿ã€‚è€ŒiPhone6ä¸­DPRä¸º2ï¼Œæ‰€ä»¥iPhone6ä¸‹çš„å¸ƒå±€è§†å£å®½åº¦ä¸º375ã€‚</p>
<blockquote>
<p>ç†æƒ³é€‚å£çš„ç¼©æ”¾æ¯”ä¸º1çš„æƒ…å†µä¸‹</p>
</blockquote>
<p>è€ŒFlexibleçš„æ–¹æ¡ˆå°±æ˜¯å°†è§†è§‰ç¨¿åˆ†æˆ<strong>100ä»½</strong>ï¼Œæ¯ä¸€ä»½æˆä¸º<code>a</code>ï¼ŒåŒæ—¶<code>1rem</code>å•ä½è¢«è®¤å®šä¸º<code>10a</code>ï¼Œé’ˆå¯¹è¯¥è®¾è®¡ç¨¿å¯ä»¥ç®—å‡º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1a = 3.75px</span><br><span class="line">1rem = 37.5px</span><br></pre></td></tr></table></figure>
<p>åˆ™æˆ‘ä»¬å°†è®¾è®¡ç¨¿åˆ†æˆ10aï¼Œåˆ™æ•´ä¸ªå®½åº¦ä¸º10remï¼Œæ‰€ä»¥å¯¹åº”çš„<code>&lt;html&gt;</code>çš„<code>font-size</code>åˆ™ä¸º37.5pxã€‚</p>
<p>å¾—åˆ°äº†åŸºå‡†å€¼åï¼Œåªéœ€è¦åŸå§‹çš„<code>pxå€¼</code><strong>ï¼ˆCSSåƒç´ ï¼‰</strong>é™¤ä»¥<code>remåŸºå‡†å€¼</code>å³å¯ã€‚ä¾‹å¦‚ä¸€ä¸ª<code>75px * 75px</code>å³è½¬æ¢æˆ<code>2rem * 2rem</code>ã€‚</p>
<p>æˆ‘ä»¬ç»Ÿä¸€å°†é¡µé¢å†…çš„pxå€¼ç»Ÿä¸€æ¢ç®—æˆremï¼Œæ¥æµè§ˆä¸€ä¸‹é€‚é…æ•ˆæœï¼š</p>
<p><img src="flexibleshipei.gif" alt></p>
<p><strong>å¦‚ä½•å¿«é€Ÿæ¢ç®—</strong></p>
<ul>
<li><p>ç¼–è¾‘å™¨</p>
<p>åœ¨å¼€å‘ä¸­æ€»ä¸èƒ½è®©è‡ªå·±ä¸€ä¸ªä¸€ä¸ªçš„å»è®¡ç®—ï¼Œç¼–è¾‘å™¨å¯ä»¥æœ‰ä¸€é”®è½¬æ¢px2remçš„æ’ä»¶ï¼Œsb3æœ‰cssremï¼Œvscodeæœ‰px to remã€‚</p>
</li>
<li><p>CSSå¤„ç†å™¨ï¼Œå¯ä»¥ä½¿ç”¨Lessæˆ–è€…Sasså®ç°å¿«é€Ÿè½¬æ¢</p>
</li>
<li><p>PostCSS(px2rem)</p>
<p>é™¤äº†Sassè¿™æ ·çš„CSSå¤„ç†å™¨è¿™å¤–ï¼Œæ‰‹æ·˜å›¢é˜Ÿçš„å¤§ç¥è¿˜å¼€å‘äº†ä¸€æ¬¾<code>npm</code>çš„å·¥å…·<a href="https://www.npmjs.com/package/px2rem" target="_blank" rel="noopener">px2rem</a>ã€‚å®‰è£…å¥½<a href="https://www.npmjs.com/package/px2rem" target="_blank" rel="noopener">px2rem</a>ä¹‹åï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨<a href="http://www.w3cplus.com/blog/tags/516.html" target="_blank" rel="noopener">PostCSS</a>ã€‚ä½¿ç”¨PostCSSæ’ä»¶<a href="https://www.npmjs.com/package/postcss-px2rem" target="_blank" rel="noopener">postcss-px2rem</a>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var gulp = require(&apos;gulp&apos;);</span><br><span class="line">var postcss = require(&apos;gulp-postcss&apos;);</span><br><span class="line">var px2rem = require(&apos;postcss-px2rem&apos;);</span><br><span class="line"></span><br><span class="line">gulp.task(&apos;default&apos;, function() &#123;</span><br><span class="line">    var processors = [px2rem(&#123;remUnit: 75&#125;)];</span><br><span class="line">    return gulp.src(&apos;./src/*.css&apos;)</span><br><span class="line">        .pipe(postcss(processors))</span><br><span class="line">        .pipe(gulp.dest(&apos;./dest&apos;));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>é™¤äº†åœ¨Gulpä¸­é…ç½®å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–çš„é…ç½®æ–¹å¼ï¼Œè¯¦ç»†çš„ä»‹ç»å¯ä»¥<a href="https://www.npmjs.com/package/postcss-px2rem" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡Œ</a>è¿›è¡Œäº†è§£ã€‚</p>
<p>é…ç½®å®Œæˆä¹‹åï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œä½ åªè¦åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.selector &#123;</span><br><span class="line">    width: 150px;</span><br><span class="line">    height: 64px; /*px*/</span><br><span class="line">    font-size: 28px; /*px*/</span><br><span class="line">    border: 1px solid #ddd; /*no*/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>px2rem</code>å¤„ç†ä¹‹åå°†ä¼šå˜æˆï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.selector &#123;</span><br><span class="line">    width: 2rem;</span><br><span class="line">    border: 1px solid #ddd;</span><br><span class="line">&#125;</span><br><span class="line">[data-dpr=&quot;1&quot;] .selector &#123;</span><br><span class="line">    height: 32px;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">&#125;</span><br><span class="line">[data-dpr=&quot;2&quot;] .selector &#123;</span><br><span class="line">    height: 64px;</span><br><span class="line">    font-size: 28px;</span><br><span class="line">&#125;</span><br><span class="line">[data-dpr=&quot;3&quot;] .selector &#123;</span><br><span class="line">    height: 96px;</span><br><span class="line">    font-size: 42px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ•´ä¸ªå¼€å‘ä¸­æœ‰äº†è¿™äº›å·¥å…·ä¹‹åï¼Œå®Œå…¨ä¸ç”¨æ‹…å¿ƒ<code>px</code>å€¼è½¬<code>rem</code>å€¼å½±å“å¼€å‘æ•ˆç‡ã€‚</p>
</li>
</ul>
<h1 id="æ–‡æœ¬å­—å·ä¸å»ºè®®ä½¿ç”¨rem"><a href="#æ–‡æœ¬å­—å·ä¸å»ºè®®ä½¿ç”¨rem" class="headerlink" title="æ–‡æœ¬å­—å·ä¸å»ºè®®ä½¿ç”¨rem"></a>æ–‡æœ¬å­—å·ä¸å»ºè®®ä½¿ç”¨rem</h1><p>å‰é¢å¤§å®¶éƒ½è§è¯äº†å¦‚ä½•ä½¿ç”¨<code>rem</code>æ¥å®ŒæˆH5é€‚é…ã€‚é‚£ä¹ˆæ–‡æœ¬åˆå°†å¦‚ä½•å¤„ç†é€‚é…ã€‚æ˜¯ä¸æ˜¯ä¹Ÿé€šè¿‡<code>rem</code>æ¥åšè‡ªåŠ¨é€‚é…ã€‚</p>
<p>æ˜¾ç„¶ï¼Œæˆ‘ä»¬åœ¨iPhone3Gå’ŒiPhone4çš„Retinaå±ä¸‹é¢ï¼Œå¸Œæœ›çœ‹åˆ°çš„æ–‡æœ¬å­—å·æ˜¯ç›¸åŒçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬<strong>ä¸å¸Œæœ›æ–‡æœ¬åœ¨Retinaå±å¹•ä¸‹å˜å°</strong>ï¼Œå¦å¤–ï¼Œæˆ‘ä»¬<strong>å¸Œæœ›åœ¨å¤§å±æ‰‹æœºä¸Šçœ‹åˆ°æ›´å¤šæ–‡æœ¬</strong>ï¼Œä»¥åŠï¼Œç°åœ¨ç»å¤§å¤šæ•°çš„å­—ä½“æ–‡ä»¶éƒ½è‡ªå¸¦ä¸€äº›ç‚¹é˜µå°ºå¯¸ï¼Œé€šå¸¸æ˜¯<code>16px</code>å’Œ<code>24px</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬<strong>ä¸å¸Œæœ›å‡ºç°13pxå’Œ15pxè¿™æ ·çš„å¥‡è‘©å°ºå¯¸</strong>ã€‚</p>
<p>å¦‚æ­¤ä¸€æ¥ï¼Œå°±å†³å®šäº†åœ¨åˆ¶ä½œH5çš„é¡µé¢ä¸­ï¼Œ<code>rem</code>å¹¶ä¸é€‚åˆç”¨åˆ°æ®µè½æ–‡æœ¬ä¸Šã€‚æ‰€ä»¥åœ¨Flexibleæ•´ä¸ªé€‚é…æ–¹æ¡ˆä¸­ï¼Œè€ƒè™‘æ–‡æœ¬è¿˜æ˜¯ä½¿ç”¨<code>px</code>ä½œä¸ºå•ä½ã€‚åªä¸è¿‡ä½¿ç”¨<code>[data-dpr]</code>å±æ€§æ¥åŒºåˆ†ä¸åŒ<code>dpr</code>ä¸‹çš„æ–‡æœ¬å­—å·å¤§å°ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1rem</span>; </span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0.4rem</span>;</span><br><span class="line">    font-size: 12px; // é»˜è®¤å†™ä¸Šdprä¸º1çš„fontSize</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-dpr="2"]</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-dpr="3"]</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">36px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†èƒ½æ›´å¥½çš„åˆ©äºå¼€å‘ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šåˆ¶ä¸€ä¸ª<a href="https://github.com/W3cplus/Sass-Resources/blob/master/mixins/_font-dpr.scss" target="_blank" rel="noopener"><code>font-dpr()</code></a>è¿™æ ·çš„Sassæ··åˆå®ï¼š</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">@<span class="keyword">mixin</span> font-dpr(<span class="variable">$font-size</span>)&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">$font-size</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-attr">[data-dpr="2"]</span> &amp; &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="variable">$font-size</span> * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-attr">[data-dpr="3"]</span> &amp; &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="variable">$font-size</span> * <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ‰äº†è¿™æ ·çš„æ··åˆå®ä¹‹åï¼Œåœ¨å¼€å‘ä¸­å¯ä»¥ç›´æ¥è¿™æ ·ä½¿ç”¨ï¼š</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">@<span class="keyword">include</span> font-dpr(<span class="number">16px</span>);</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶è¿™åªæ˜¯é’ˆå¯¹äºæè¿°æ€§çš„æ–‡æœ¬ï¼Œæ¯”å¦‚è¯´æ®µè½æ–‡æœ¬ã€‚ä½†æœ‰çš„æ—¶å€™æ–‡æœ¬çš„å­—å·ä¹Ÿéœ€è¦åˆ†åœºæ™¯çš„ï¼Œæ¯”å¦‚åœ¨é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªslogan,ä¸šåŠ¡æ–¹å¸Œæœ›è¿™ä¸ªsloganèƒ½æ ¹æ®ä¸åŒçš„ç»ˆç«¯é€‚é…ã€‚é’ˆå¯¹è¿™æ ·çš„åœºæ™¯ï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨<code>rem</code>ç»™sloganåšè®¡é‡å•ä½ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œå¦‚æœéœ€è¦è¯¥åŠŸèƒ½ç‰ˆæœ¬çš„è¯·ä½¿ç”¨0.3.2ç‰ˆæœ¬ï¼Œæ—¢ä¸»åˆ†æ”¯ç‰ˆæœ¬æˆ–è€…ä½¿ç”¨cdnç‰ˆæœ¬</p>
</blockquote>
<h1 id="FlexibleåŸç†"><a href="#FlexibleåŸç†" class="headerlink" title="FlexibleåŸç†"></a>FlexibleåŸç†</h1><p>flexibleçš„æ ¸å¿ƒä»£ç å¾ˆç®€å•ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> docEl = <span class="built_in">document</span>.documentElement  </span><br><span class="line"><span class="comment">// set 1rem = viewWidth / 10</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setRemUnit</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> rem = docEl.clientWidth / <span class="number">10</span></span><br><span class="line">  docEl.style.fontSize = rem + <span class="string">'px'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setRemUnit()</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå°†<code>html</code>èŠ‚ç‚¹çš„<code>font-size</code>è®¾ç½®ä¸ºé¡µé¢<code>clientWidth</code>(å¸ƒå±€è§†å£)çš„<code>1/10</code>ï¼Œå³<code>1rem</code>å°±ç­‰äºé¡µé¢å¸ƒå±€è§†å£çš„<code>1/10</code>ï¼Œæ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸Šé¢æ‰€è¯´çš„pxæ¢ç®—remçš„ä»£ç å®ç°ã€‚</p>
<p>é‡Œé¢è¿˜æœ‰ä¸€äº›ç›‘å¬é¡µé¢å¤§å°å˜åŒ–ï¼Œå¸ƒå±€å¯ä»¥è‡ªé€‚åº”:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// reset rem unit on page resize</span></span><br><span class="line"> <span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, setRemUnit)</span><br><span class="line"> <span class="built_in">window</span>.addEventListener(<span class="string">'pageshow'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (e.persisted) &#123;</span><br><span class="line">     setRemUnit()</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<p>ä»¥åŠè®¾ç½®data-dpr</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">docEl.setAttribute(<span class="string">'data-dpr'</span>, dpr);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å®Œæ•´æºç è¯·æŸ¥çœ‹ä¸»åˆ†æ”¯ç‰ˆæœ¬ä¸­çš„js</p>
<p>ç”±äº<code>viewport</code>å•ä½å¾—åˆ°ä¼—å¤šæµè§ˆå™¨çš„å…¼å®¹ï¼Œlib-flexibleè¿™ä¸ªè¿‡æ¸¡æ–¹æ¡ˆå·²ç»è¢«å®˜æ–¹å¼ƒç”¨ï¼Œä½†æ˜¯å…¶åŸç†è¿˜æ˜¯éœ€è¦å»ç†è§£çš„ã€‚å› ä¸ºvhã€vwçš„æ–¹æ¡ˆåŸç†éƒ½æ˜¯å¤§è‡´ç›¸åŒçš„ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>HTML</category>
      </categories>
      <tags>
        <tag>HTML</tag>
        <tag>ç§»åŠ¨ç«¯é€‚é…</tag>
      </tags>
  </entry>
  <entry>
    <title>Android UIé€‚é…æŒ‡å—</title>
    <url>/2019/05/22/Android-UI%E9%80%82%E9%85%8D%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>åœ¨Androidå¼€å‘ä¸­ï¼Œç”±äºAndroidç¢ç‰‡åŒ–ä¸¥é‡ï¼Œå±å¹•åˆ†è¾¨ç‡åƒå¥‡ç™¾æ€ªï¼Œè€Œæƒ³è¦åœ¨å„ç§åˆ†è¾¨ç‡çš„è®¾å¤‡ä¸Šæ˜¾ç¤ºåŸºæœ¬ä¸€è‡´çš„æ•ˆæœï¼Œé€‚é…æˆæœ¬è¶Šæ¥è¶Šé«˜ã€‚è™½ç„¶Androidå®˜æ–¹æä¾›äº†dpå•ä½æ¥é€‚é…ï¼Œä½†å…¶åœ¨å„ç§å¥‡æ€ªåˆ†è¾¨ç‡ä¸‹è¡¨ç°å´ä¸å°½å¦‚äººæ„ã€‚</p>
<a id="more"></a>
<p><img src="fenbutu.png" alt></p>
<p><strong>Androidå±å¹•åˆ†è¾¨ç‡åˆ†å¸ƒå›¾</strong></p>
<p><img src="afenbutu.png" alt></p>
<p><strong>å¯¹æ¯”IOSå±å¹•åˆ†è¾¨ç‡åˆ†å¸ƒå›¾</strong></p>
<p><img src="ifenbutu.png" alt></p>
<p>æ‰€ä»¥Androidçš„å±å¹•é€‚é…å·²ç»ä¸ºé‡ä¸­ä¹‹é‡çš„è¯é¢˜ã€‚</p>
<h1 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h1><p>å±å¹•å°ºå¯¸ã€å±å¹•åˆ†è¾¨ç‡ã€å±å¹•åƒç´ å¯†åº¦</p>
<p>å±å¹•å°ºå¯¸ï¼šå±å¹•å¯¹è§’çº¿é•¿åº¦ï¼Œå•ä½æ˜¯è‹±å¯¸ï¼Œæˆ‘ä»¬å¸¸è¯´çš„å¤šå°‘å¤šå°‘å¯¸ï¼Œæ¯”å¦‚4.7å­˜æ‰‹æœºã€5.7å­˜æ‰‹æœºï¼ŒæŒ‡çš„å°±æ˜¯è¿™ä¸ªã€‚</p>
<p>å±å¹•åˆ†è¾¨ç‡ï¼šå¦‚ 1920Ã—1080ï¼Œæ˜¯æŒ‡åœ¨æ‰‹æœºå±å¹•çš„åƒç´ ç‚¹çš„ä¸ªæ•°ï¼Œå•ä½æ˜¯pxï¼Œ1px = 1 åƒç´ ç‚¹ï¼Œä¸€èˆ¬æ˜¯çºµå‘åƒç´  Ã— æ¨ªå‘åƒç´ ï¼Œæ„å‘³ç€é«˜æœ‰ 1920 ä¸ªåƒç´ ç‚¹ï¼Œå®½æœ‰ 1080 ä¸ªåƒç´ ç‚¹ã€‚</p>
<p>å±å¹•åƒç´ å¯†åº¦ï¼šæ˜¯æŒ‡æ¯è‹±å¯¸ä¸Šçš„åƒç´ ç‚¹æ•°ï¼Œå•ä½æ˜¯ dpiï¼ˆdotper inchï¼‰ã€‚åƒç´ å¯†åº¦å’Œå±å¹•å°ºå¯¸å’Œå±å¹•åˆ†è¾¨ç‡æœ‰å…³ï¼Œå®ƒæ˜¯ç”±å¯¹è§’çº¿çš„åƒç´ ç‚¹æ•°é™¤ä»¥å±å¹•çš„å¤§å°å¾—åˆ°çš„ï¼Œå…³ç³»å¦‚ä¸‹ï¼š</p>
<p><img src="dpicalc.png" alt></p>
<p>å•ä¸€å˜åŒ–æ¡ä»¶ä¸‹ï¼Œå±å¹•å°ºå¯¸è¶Šå°ã€åˆ†è¾¨ç‡è¶Šé«˜ï¼Œåƒç´ å¯†åº¦è¶Šå¤§ï¼Œåä¹‹è¶Šå°ã€‚</p>
<blockquote>
<p>ä¸PPIçš„æ¦‚å¿µå’Œè®¡ç®—æ–¹å¼æ˜¯ç›¸åŒçš„</p>
</blockquote>
<ul>
<li><p>dpï¼šæ˜¯Android ç‰¹æœ‰çš„ï¼Œæ„ä¸ºå¯†åº¦æ— å…³åƒç´ ï¼ŒGoogle å‘å¸ƒçš„ BASELINEï¼ˆåŸºå‡†çº¿ï¼‰ä¸º 160ï¼Œä»¥æ­¤ä¸ºåŸºå‡†ã€‚</p>
</li>
<li><p>dipï¼šDensity Independent Pixelsï¼ŒåŒdpä¸€ä¸ªæ„æ€ï¼Œç›®å‰åºŸå¼ƒäº†ï¼Œä¸€èˆ¬éƒ½å†™dpã€‚</p>
</li>
<li><p>dpiï¼šåƒç´ å¯†åº¦æ˜¯å±å¹•ä¸Šå•ä½é¢ç§¯å†…çš„åƒç´ æ•°ï¼Œç§°ä¸ºdpiï¼ˆæ¯è‹±å¯¸çš„ç‚¹æ•°ï¼‰ã€‚ å®ƒä¸åˆ†è¾¨ç‡ä¸åŒï¼Œåè€…æ˜¯å±å¹•ä¸Šåƒç´ çš„æ€»æ•°ã€‚</p>
</li>
<li><p>spï¼šScale-IndependentPixelsçš„ç¼©å†™ï¼Œå¯ä»¥æ ¹æ®æ–‡å­—å¤§å°é¦–é€‰é¡¹è‡ªåŠ¨è¿›è¡Œç¼©æ”¾ã€‚Googleæ¨èæˆ‘ä»¬ä½¿ç”¨12spä»¥ä¸Šçš„å¤§å°ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨12spï¼Œ14spï¼Œ18spï¼Œ22spï¼Œä¸ºé¿å…ç²¾åº¦æŸå¤±ï¼Œå»ºè®®æœ€å¥½ä¸è¦ä½¿ç”¨å¥‡æ•°å’Œå°æ•°ã€‚</p>
</li>
<li><p>pxï¼šå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„åƒç´ </p>
</li>
<li><p>densityï¼šå°±è¿™ä¸ªå•è¯æœ¬èº«ç›´æ¥ç¿»è¯‘çš„æ„æ€è€Œè¨€ï¼Œå…¶ä¹Ÿä»£è¡¨â€œå¯†åº¦â€ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Androidä¸­ï¼Œå…¶å®å¹¶éå¦‚æ­¤ã€‚æ³¨æ„æˆ‘ä»¬è¿™é‡ŒæŒ‡çš„æ˜¯ï¼Œé€šè¿‡ä»£ç <code>context.getResources().getDisplayMetrics().density</code>è·å–çš„â€œdensityâ€å€¼ã€‚è€Œé€šè¿‡è¯¥æ–¹æ³•è·å–åˆ°çš„è¯¥å€¼ï¼Œå®é™…ä¸Šæ˜¯ç­‰ä»·äºâ€œdpi / 160â€çš„ä¸€ä¸ªç»“æœå€¼ã€‚</p>
</li>
</ul>
<h1 id="dpç›´æ¥é€‚é…"><a href="#dpç›´æ¥é€‚é…" class="headerlink" title="dpç›´æ¥é€‚é…"></a>dpç›´æ¥é€‚é…</h1><p>dpçš„æ¦‚å¿µæ˜¯è°·æ­Œå®˜æ–¹æå‡ºçš„é€‚é…çš„ä¸€ç§æ–¹å¼ã€‚</p>
<p>åœ¨androidä¸­çš„dpåœ¨æ¸²æŸ“å‰ä¼šå°†dpè½¬ä¸ºpxï¼Œè®¡ç®—å…¬å¼ï¼š</p>
<ul>
<li>px = density * dp;</li>
<li>density = dpi / 160;</li>
<li>px = dp * (dpi / 160);</li>
</ul>
<p>è€Œdpiæ˜¯æ ¹æ®å±å¹•çœŸå®çš„åˆ†è¾¨ç‡å’Œå°ºå¯¸æ¥è®¡ç®—çš„ï¼Œæ¯ä¸ªè®¾å¤‡éƒ½å¯èƒ½ä¸ä¸€æ ·çš„ã€‚</p>
<p>è€Œå› ä¸ºAndroidç¢ç‰‡åŒ–éå¸¸ä¸¥é‡çš„åŸå› å°±å¯¼è‡´äº†dpiçš„å€¼éå¸¸ä¹±ï¼Œæ ¹æœ¬æ²¡æœ‰è§„å¾‹å¯å¾ªï¼Œå³ä½¿dpé€‚é…å¯ä»¥åšåˆ°80%çš„é€‚é…ï¼Œä½†æ˜¯æ•ˆæœè¿˜æ˜¯å·®å¼ºäººæ„ã€‚</p>
<p>æˆ‘ä»¬ç”¨æ¡ˆä¾‹æ¥çœ‹ä¸€ä¸‹å¯¹æ¯”ï¼š</p>
<p><img src="avd.png" alt></p>
<p>è¿™é‡Œåˆ›å»ºäº†ä¸¤ä¸ªä¸ªæ¨¡æ‹Ÿå™¨ï¼ŒåŒæ ·çš„åˆ†è¾¨ç‡<code>480 * 800</code>ä¸¤ç§ç±»åˆ«çš„è®¾å¤‡ï¼ŒåŒæ ·çš„æ”¾ä¸€å¼ å›¾ç‰‡ï¼Œå¸ƒå±€ä»£ç </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/iv_adapterimg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">"@mipmap/img"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:scaleType</span>=<span class="string">"fitXY"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"300dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"300dp"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="p480dpshipei.png" alt></p>
<p>åŒæ ·çš„ä»£ç ï¼Œè®¾ç½®ä¸º300dpï¼Œä½†æ˜¯ä¸¤å°æœºå‹å´è¡¨ç°å¾—ä¸å°½äººæ„ã€‚è¿™é‡Œå°±è¦æ¶‰åŠåˆ°ä¸Šé¢ä¸€äº›å…¬å¼çš„æ¦‚å¿µè¿›è¡Œæ¢ç®—äº†ï¼Œå› ä¸ºæœ€ç»ˆéƒ½ä¼šè½¬æ¢æˆpxï¼Œæˆ‘ä»¬æ¥æ¢ç®—ä¸€ä¸‹ï¼š</p>
<p><strong>480*800 5.1å¯¸æœºå‹ä¸‹</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dpi = âˆš(480^2 * 800^2)/ 5.1 = 182.93</span><br><span class="line">px = 300 * (183 / 160) = 342</span><br></pre></td></tr></table></figure>
<p>å…¶ä½™ç›¸åŒè®¡ç®—æ–¹å¼ï¼Œå¯¹ç…§è¡¨æ ¼ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">480*800/5.1</th>
<th style="text-align:center">480*800/4</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">dpi</td>
<td style="text-align:center">182.93</td>
<td style="text-align:center">233.24</td>
</tr>
<tr>
<td style="text-align:center">density</td>
<td style="text-align:center">1.14</td>
<td style="text-align:center">1.46</td>
</tr>
<tr>
<td style="text-align:center">px</td>
<td style="text-align:center">342</td>
<td style="text-align:center">438</td>
</tr>
</tbody>
</table>
<blockquote>
<p>ä¸Šè¿°è®¡ç®—ç»“æœå‡ä¸ºä¿ç•™å°æ•°ç‚¹åä¸¤ä½</p>
</blockquote>
<p>ä½†æ˜¯è®¡ç®—çš„ç»“æœçœŸçš„æ˜¯è¿™æ ·å—ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»£ç æ¥è·å–ä¸€ä¸‹æ§ä»¶çš„é«˜å’Œå®½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ImageView iv_adapterimg;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        iv_adapterimg = findViewById(R.id.iv_adapterimg);</span><br><span class="line"></span><br><span class="line">        iv_adapterimg.getViewTreeObserver().addOnPreDrawListener(<span class="keyword">new</span> ViewTreeObserver.OnPreDrawListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onPreDraw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Log.e(<span class="string">"logImageViewInfo"</span>, <span class="string">"Height: "</span> + iv_adapterimg.getHeight() + <span class="string">" / Width: "</span> + iv_adapterimg.getWidth());</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        logDisplayInfo();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">logDisplayInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String TAG = <span class="string">"logDisplayInfo"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šå¸¸æˆ‘ä»¬åœ¨ä½¿ç”¨DisplayMetricsæ—¶ï¼Œéƒ½æ˜¯ç›´æ¥è·å–å†…éƒ¨å˜é‡æ¥ä½¿ç”¨ã€‚æ‰€ä»¥ä¸‹é¢ç›´æ¥åˆ—å‡ºå„ä¸ªå†…éƒ¨å˜é‡ã€‚</span></span><br><span class="line"></span><br><span class="line">        DisplayMetrics dm = <span class="keyword">new</span> DisplayMetrics();</span><br><span class="line">        getWindowManager().getDefaultDisplay().getMetrics(dm);</span><br><span class="line"></span><br><span class="line">        Log.e(TAG, <span class="string">"å½“å‰è®¾å¤‡çš„ç³»ç»Ÿdpi: "</span> + dm.densityDpi);</span><br><span class="line">        Log.e(TAG, <span class="string">"å½“å‰è®¾å¤‡çš„density: "</span> + dm.density);</span><br><span class="line">        Log.e(TAG, <span class="string">"ç‰©ç†å±å¹•ä¸Š Y è½´æ–¹å‘æ¯è‹±å¯¸çš„åƒç´ : "</span> + dm.ydpi);</span><br><span class="line">        Log.e(TAG, <span class="string">"ç‰©ç†å±å¹•ä¸Š X è½´æ–¹å‘æ¯è‹±å¯¸çš„åƒç´ : "</span> + dm.xdpi);</span><br><span class="line">        Log.e(TAG, <span class="string">"å±å¹•é«˜åº¦çš„åƒç´ æ•°é‡: "</span> + dm.heightPixels);</span><br><span class="line">        Log.e(TAG, <span class="string">"å±å¹•å®½åº¦çš„åƒç´ æ•°é‡: "</span> + dm.widthPixels);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹Logè¾“å‡ºï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">480*800/5.1</th>
<th style="text-align:center">480*800/4</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Imageview height</td>
<td style="text-align:center">300</td>
<td style="text-align:center">450</td>
</tr>
<tr>
<td style="text-align:center">imageview width</td>
<td style="text-align:center">300</td>
<td style="text-align:center">450</td>
</tr>
<tr>
<td style="text-align:center">density</td>
<td style="text-align:center">1.0</td>
<td style="text-align:center">1.5</td>
</tr>
<tr>
<td style="text-align:center">dpi</td>
<td style="text-align:center">160</td>
<td style="text-align:center">240</td>
</tr>
<tr>
<td style="text-align:center">ydpi</td>
<td style="text-align:center">160.0</td>
<td style="text-align:center">240.0</td>
</tr>
<tr>
<td style="text-align:center">xdpi</td>
<td style="text-align:center">160.0</td>
<td style="text-align:center">240.0</td>
</tr>
<tr>
<td style="text-align:center">heightPixels</td>
<td style="text-align:center">800</td>
<td style="text-align:center">800</td>
</tr>
<tr>
<td style="text-align:center">widthPixels</td>
<td style="text-align:center">480</td>
<td style="text-align:center">480</td>
</tr>
</tbody>
</table>
<p>é‚£ä¹ˆè¿™ä¸ºä»€ä¹ˆå’Œæˆ‘ä»¬è®¡ç®—çš„ä¸ä¸€æ ·å‘¢ï¼Œè¿™é‡Œå°±è¦è®¾è®¡åˆ°ç³»ç»Ÿdpiå’Œç‰©ç†dpiäº†ï¼Œæˆ‘ä»¬éœ€è¦æ·±ç©¶åˆ°å…¶æºç ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//platform_frameworks_base/core/java/android/util/DisplayMetrics.java</span></span><br><span class="line"><span class="keyword">package</span> android.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.annotation.UnsupportedAppUsage;</span><br><span class="line"><span class="keyword">import</span> android.os.SystemProperties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A structure describing general information about a display, such as its</span></span><br><span class="line"><span class="comment"> * size, density, and font scaling.</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;To access the DisplayMetrics members, initialize an object like this:&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> * &lt;pre&gt; DisplayMetrics metrics = new DisplayMetrics();</span></span><br><span class="line"><span class="comment"> * getWindowManager().getDefaultDisplay().getMetrics(metrics);&lt;/pre&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DisplayMetrics</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The device's current density.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * This value reflects any changes made to the device density. To obtain</span></span><br><span class="line"><span class="comment">     * the device's stable density, use &#123;<span class="doctag">@link</span> #DENSITY_DEVICE_STABLE&#125;.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@hide</span> This value should not be used.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@deprecated</span> Use &#123;<span class="doctag">@link</span> #DENSITY_DEVICE_STABLE&#125; to obtain the stable</span></span><br><span class="line"><span class="comment">     *             device density or &#123;<span class="doctag">@link</span> #densityDpi&#125; to obtain the current</span></span><br><span class="line"><span class="comment">     *             density for a specific display.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> DENSITY_DEVICE = getDeviceDensity();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * The device's stable density.</span></span><br><span class="line"><span class="comment">     * &lt;p&gt;</span></span><br><span class="line"><span class="comment">     * This value is constant at run time and may not reflect the current</span></span><br><span class="line"><span class="comment">     * display density. To obtain the current density for a specific display,</span></span><br><span class="line"><span class="comment">     * use &#123;<span class="doctag">@link</span> #densityDpi&#125;.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_DEVICE_STABLE = getDeviceDensity();</span><br><span class="line">  </span><br><span class="line">  	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getDeviceDensity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// qemu.sf.lcd_density can be used to override ro.sf.lcd_density</span></span><br><span class="line">        <span class="comment">// when running in the emulator, allowing for dynamic configurations.</span></span><br><span class="line">        <span class="comment">// The reason for this is that ro.sf.lcd_density is write-once and is</span></span><br><span class="line">        <span class="comment">// set by the init process when it parses build.prop before anything else.</span></span><br><span class="line">        <span class="keyword">return</span> SystemProperties.getInt(<span class="string">"qemu.sf.lcd_density"</span>,</span><br><span class="line">                SystemProperties.getInt(<span class="string">"ro.sf.lcd_density"</span>, DENSITY_DEFAULT));</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ·±ç©¶å…¶æ–¹æ³•æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼Œåœ¨ä»£ç æ³¨é‡Šä¸­æåˆ°çš„initçš„æ–¹æ³•ï¼Œæ·±ç©¶æºå¤´</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> DisplayHardware::init(<span class="keyword">uint32_t</span> dpy)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">///....çœç•¥</span></span><br><span class="line">  </span><br><span class="line"> 	<span class="comment">/* Read density from build-specific ro.sf.lcd_density property</span></span><br><span class="line"><span class="comment">     * except if it is overridden by qemu.sf.lcd_density.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> (property_get(<span class="string">"qemu.sf.lcd_density"</span>, property, <span class="literal">NULL</span>) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (property_get(<span class="string">"ro.sf.lcd_density"</span>, property, <span class="literal">NULL</span>) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            LOGW(<span class="string">"ro.sf.lcd_density not defined, using 160 dpi by default."</span>);</span><br><span class="line">            <span class="built_in">strcpy</span>(property, <span class="string">"160"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">/* for the emulator case, reset the dpi values too */</span></span><br><span class="line">        mDpiX = mDpiY = atoi(property);</span><br><span class="line">    &#125;</span><br><span class="line">    mDensity = atoi(property) * (<span class="number">1.0f</span>/<span class="number">160.0f</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//....çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çœ‹å…¶æºç å¯ä»¥çœ‹å‡ºdensityçš„å€¼æ˜¯é€šè¿‡è·å–<code>ro.sf.lcd_density</code>é…ç½®çš„å€¼ï¼Œå¦‚æœæ²¡æœ‰é»˜è®¤ä½¿ç”¨<code>DENSITY_DEFAULT</code>ï¼Œå…¶é»˜è®¤å€¼æœ‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_LOW = <span class="number">120</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_MEDIUM = <span class="number">160</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_TV = <span class="number">213</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_HIGH = <span class="number">240</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_260 = <span class="number">260</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_280 = <span class="number">280</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_300 = <span class="number">300</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_XHIGH = <span class="number">320</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_340 = <span class="number">340</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_360 = <span class="number">360</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_400 = <span class="number">400</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_420 = <span class="number">420</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_440 = <span class="number">440</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_XXHIGH = <span class="number">480</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_560 = <span class="number">560</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_600 = <span class="number">600</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_XXXHIGH = <span class="number">640</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DENSITY_DEFAULT = DENSITY_MEDIUM;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DENSITY_DEFAULT_SCALE = <span class="number">1.0f</span> / DENSITY_DEFAULT;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ<code>ro.sf.lcd_density</code>çš„å€¼åœ¨å“ªé‡Œæ‰¾åˆ°ï¼Œå…¶é…ç½®æ–‡ä»¶è·¯å¾„åœ¨æ‰‹æœºçš„<code>/system/build.prop</code>æ–‡ä»¶ä¸­ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨adbå‘½ä»¤æ¥å°†æ–‡ä»¶è¿›è¡Œå¯¼å‡ºã€‚ä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼Œavdæ¨¡æ‹Ÿå™¨ä¸‹è¯¥æ–‡ä»¶æ²¡æœ‰<code>ro.sf.lcd_density</code>è¯¥é…ç½®é¡¹ã€‚ä½†æ˜¯å¯ä»¥åœ¨<code>emulatoræ ¹ç›®å½•ä¸‹/config.ini</code>ä¸­çš„<code>hw.lcd.density</code>å¯ä»¥æ‰¾åˆ°é…ç½®çš„å€¼ã€‚</p>
<p>4å¯¸æ¨¡æ‹Ÿå™¨ä¸‹<code>config.ini</code>çš„<code>hw.lcd.density</code>å€¼</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">hw.lcd.density</span>=<span class="number">240</span></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å°†4å¯¸çš„æ¨¡æ‹Ÿå™¨çš„é…ç½®æ–‡ä»¶ä¿®æ”¹æˆ160åæŸ¥çœ‹æ‰“å°æ—¥å¿—:</p>
<p><img src="hw_log.png" alt></p>
<p>å¯ä»¥æŸ¥çœ‹åˆ°æ—¥å¿—çš„è¾“å‡ºå’Œä¸Šé¢åŸæ¥çš„è¾“å‡ºå‘ç”Ÿäº†æ”¹å˜ï¼Œæ”¹æˆäº†è‡ªå·±é…ç½®çš„å€¼ã€‚ä½†æ˜¯è¯¥é€‰é¡¹åªæ˜¯avdæ¨¡æ‹Ÿå™¨ç¯å¢ƒä¸‹ï¼ŒçœŸæœºæˆ–è€…ä¸€äº›æ¸¸æˆæ¨¡æ‹Ÿå™¨ç¯å¢ƒä¸‹éƒ½æ˜¯åœ¨<code>/system/build.prop</code>é…ç½®æ–‡ä»¶ä¸­<code>ro.sf.lcd_density</code>çš„å€¼ã€‚ä¸€èˆ¬è¯¥å€¼éƒ½æ˜¯å‡ºå‚æ—¶å°±ç¼–è¯‘å¥½çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ro.sf.lcd_density=240</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™æ˜¯MUMUä¸­è¯»å–<code>/system/build.prop</code>æ–‡ä»¶çš„è¯»å–çš„å€¼ï¼Œè¿™é‡Œæ²¡æœ‰rootçš„çœŸæœºï¼Œæ— æ³•æ¼”ç¤ºçœŸæœºç¯å¢ƒï¼Œä½†åŸç†ç›¸åŒã€‚ä½†æ˜¯å¯ä»¥æµ‹è¯•ä¸€ä¸‹çœŸæœºç¯å¢ƒä¸‹ï¼ŒDPIæ˜¯æ ¹æ®é…ç½®è¯»å–çš„ï¼Œè€ŒéçœŸå®é€šè¿‡ç‰©ç†åˆ†è¾¨ç‡æ±‚å‡ºæ¥çš„ä»è€ŒéªŒè¯ä¸Šè¿°çš„ç»“è®ºã€‚è¿™é‡Œä»¥ä¸‰æ˜Ÿs8æ‰‹æœºä¸ºä¾‹ï¼Œä¸»å±åˆ†è¾¨ç‡2960*1440ï¼Œå°ºå¯¸5.8ï¼Œæ±‚å‡ºdpiçº¦ä¸º3.5ï¼Œè€Œä¾é ä¸Šè¿°ä»£ç è¾“å‡ºçš„å€¼ä¸º4.5ã€‚</p>
</blockquote>
<p>æ‰€ä»¥dpéƒ½æ˜¯ä½¿ç”¨ç³»ç»Ÿå®šä¹‰çš„dpiæ¥è¿›è¡Œæ¢ç®—çš„ã€‚è€Œéæ˜¯è¯´å•çº¯çš„ä½¿ç”¨ç‰©ç†åˆ†è¾¨ç‡å’Œå°ºå¯¸æ¥è®¡ç®—çš„ã€‚ä½†ä¾ç„¶å¦‚æ­¤ï¼ŒAndroidçš„ç¢ç‰‡åŒ–è¿˜æ˜¯è®©dpç›´æ¥é€‚é…è¿˜æ˜¯æ— æ³•è®©äººæ»¡æ„ï¼Œå°½ç®¡dpé€‚é…å¯ä»¥è§£å†³å°éƒ¨åˆ†çš„é€‚é…é—®é¢˜ã€‚</p>
<h1 id="å®½é«˜é™å®šç¬¦é€‚é…"><a href="#å®½é«˜é™å®šç¬¦é€‚é…" class="headerlink" title="å®½é«˜é™å®šç¬¦é€‚é…"></a>å®½é«˜é™å®šç¬¦é€‚é…</h1><p>ä¸ºäº†é«˜æ•ˆçš„å®ç°UIå¼€å‘ï¼Œå‡ºç°äº†æ–°çš„é€‚é…æ–¹æ¡ˆï¼Œæˆ‘æŠŠå®ƒç§°ä½œå®½é«˜é™å®šç¬¦é€‚é…ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯ç©·ä¸¾å¸‚é¢ä¸Šæ‰€æœ‰çš„Androidæ‰‹æœºçš„å®½é«˜åƒç´ å€¼ï¼š</p>
<p><img src="genvalue.png" alt></p>
<p>ç„¶åæˆ‘ä»¬æ ¹æ®ä¸€ä¸ªåŸºå‡†ï¼Œä¸ºåŸºå‡†çš„æ„æ€å°±æ˜¯,æ¯”å¦‚è®¾è®¡å›¾çš„å°ºå¯¸ä¸º<code>480 * 800</code>çš„åˆ†è¾¨ç‡ï¼Œæœ‰ä¸ª300*300pxçš„ImageViewï¼Œåˆ™</p>
<ul>
<li>å®½åº¦ä¸º480ï¼Œå°†ä»»ä½•åˆ†è¾¨ç‡çš„å®½åº¦åˆ†ä¸º480ä»½ï¼Œæ¯ä¸€ä»½1pxï¼Œå–å€¼ä¸ºx1-x480ã€‚</li>
<li>é«˜åº¦ä¸º800ï¼Œå°†ä»»ä½•åˆ†è¾¨ç‡çš„é«˜åº¦åˆ†ä¸º800ä»½ï¼Œæ¯ä¸€ä»½1pxï¼Œå–å€¼ä¸ºy1-y800ã€‚</li>
</ul>
<p>åˆ™å¯¹äº540 * 860çš„åˆ†è¾¨ç‡æ¥è¯´</p>
<p><img src="layxcalc.png" alt></p>
<p>å¯ä»¥çœ‹åˆ°x1 = 540 / åŸºå‡† = 540 / 480 = 1.12 ;è€Œå…¶ä»–åˆ†è¾¨ç‡çš„è®¡ç®—æ–¹å¼ç›¸åŒã€‚</p>
<p>çœ‹ä¸€ä¸‹ä½¿ç”¨è¯¥æ–¹å¼é€‚é…çš„å¯¹æ¯”ç»“æœï¼ŒåŒæ ·é€‚ç”¨dpé€‚é…æ‰€ä½¿ç”¨çš„å¸ƒå±€</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">"@mipmap/img"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:scaleType</span>=<span class="string">"fitXY"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"@dimen/x300"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"@dimen/y300"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹äº†ImageViewçš„å®½å’Œé«˜ï¼Œé€‚é…ç»“æœä¸ºä¸‹å›¾</p>
<p><img src="valueshipei.png" alt></p>
<p>å†çœ‹çœ‹ä¸åŒæœºå‹åˆ†è¾¨ç‡ä¸‹çš„è¡¨ç°</p>
<p><img src="valueshipei2.png" alt></p>
<p>å¯ä»¥çœ‹åˆ°å¯¹æ¯”äºä½¿ç”¨dpæ–¹æ¡ˆæ¥é€‚é…çš„ç»“æœè¦å®Œç¾ä¸Šè®¸å¤šã€‚é€šè¿‡dimenså¼•ç”¨å»å¯»æ‰¾è¯¥åˆ†è¾¨ç‡çš„æ–‡ä»¶å¤¹ä¸‹é¢å¯¹åº”çš„å€¼ã€‚è¿™æ ·åŸºæœ¬å¯ä»¥è§£å†³æˆ‘ä»¬çš„é€‚é…é—®é¢˜ã€‚</p>
<p>é‚£ä¹ˆé‡ç‚¹æ¥äº†ï¼Œæ—¢ç„¶å¯ä»¥é€‚é…ï¼Œä½†ä¸ºä»€ä¹ˆå¾ˆå°‘äººä½¿ç”¨è¯¥æ–¹æ¡ˆå‘¢ï¼Œè¿™å°±æ¶‰åŠåˆ°è¯¥æ–¹æ¡ˆçš„ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼šé‚£å°±æ˜¯éœ€è¦ç²¾å‡†å‘½ä¸­æ‰èƒ½é€‚é…ã€‚å¦‚æœvaluesé™å®šç¬¦ä¸‹çš„åˆ†è¾¨ç‡æ²¡æœ‰å¯¹åº”ä¸Šæ‰‹æœºï¼Œåˆ™å°±åªèƒ½ç”¨é»˜è®¤çš„valuesä¸‹çš„dimensæ–‡ä»¶äº†ã€‚å¦‚æœä½¿ç”¨é»˜è®¤å°ºå¯¸ï¼Œè€Œåˆä¸åŒäºè®¾è®¡ç¨¿çš„å°ºå¯¸ï¼Œå°±å¯ä»¥ä¼šå‘ç”ŸUIå˜å½¢ã€‚ç®€å•çš„è¯´å®¹é”™ç‡å¤ªä½äº†ã€‚</p>
<blockquote>
<p>ç”Ÿæˆçš„valuesæ–‡ä»¶å¤¹ä¸‹ä»¥å“ªä¸ªä¸ºåŸºå‡†ä¹Ÿéœ€è¦åŒæ ·çš„æ‹·è´ä¸€ä»½åŸºå‡†å€¼å»é»˜è®¤valuesæ–‡ä»¶å¤¹ä¸‹ä½œä¸ºé»˜è®¤å€¼ã€‚</p>
</blockquote>
<p><strong>é‚£ä¹ˆå¦‚ä½•ç”Ÿæˆä¸Šè¿°æ‰€è¯´çš„æ–‡ä»¶å¤¹å‘¢ï¼Œè¿™é‡Œä½¿ç”¨é¸¿æ´‹å¤§ç¥ç»™å‡ºçš„ä¸€ä»½è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenerateValueFiles</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> baseW;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> baseH;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String dirStr = <span class="string">"./res"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String WTemplate = <span class="string">"&lt;dimen name=\"x&#123;0&#125;\"&gt;&#123;1&#125;px&lt;/dimen&gt;\n"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String HTemplate = <span class="string">"&lt;dimen name=\"y&#123;0&#125;\"&gt;&#123;1&#125;px&lt;/dimen&gt;\n"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#123;0&#125;-HEIGHT</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String VALUE_TEMPLATE = <span class="string">"values-&#123;0&#125;x&#123;1&#125;"</span>;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">/**</span></span><br><span class="line"><span class="comment">  	 * éœ€è¦é€‚é…çš„åˆ†è¾¨ç‡,æ ¼å¼ä¸ºwidth,height;</span></span><br><span class="line"><span class="comment">  	*/</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String SUPPORT_DIMESION = <span class="string">"320,480;480,800;480,854;540,960;600,1024;720,1184;720,1196;720,1280;768,1024;800,1280;1080,1812;1080,1920;1440,2560;"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String supportStr = SUPPORT_DIMESION;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">GenerateValueFiles</span><span class="params">(<span class="keyword">int</span> baseX, <span class="keyword">int</span> baseY, String supportStr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.baseW = baseX;</span><br><span class="line">        <span class="keyword">this</span>.baseH = baseY;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.supportStr.contains(baseX + <span class="string">","</span> + baseY)) &#123;</span><br><span class="line">            <span class="keyword">this</span>.supportStr += baseX + <span class="string">","</span> + baseY + <span class="string">";"</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.supportStr += validateInput(supportStr);</span><br><span class="line"></span><br><span class="line">        System.out.println(supportStr);</span><br><span class="line"></span><br><span class="line">        File dir = <span class="keyword">new</span> File(dirStr);</span><br><span class="line">        <span class="keyword">if</span> (!dir.exists()) &#123;</span><br><span class="line">            dir.mkdir();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(dir.getAbsoluteFile());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> supportStr</span></span><br><span class="line"><span class="comment">     *            w,h_...w,h;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">validateInput</span><span class="params">(String supportStr)</span> </span>&#123;</span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        String[] vals = supportStr.split(<span class="string">"_"</span>);</span><br><span class="line">        <span class="keyword">int</span> w = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> h = -<span class="number">1</span>;</span><br><span class="line">        String[] wh;</span><br><span class="line">        <span class="keyword">for</span> (String val : vals) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (val == <span class="keyword">null</span> || val.trim().length() == <span class="number">0</span>)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">                wh = val.split(<span class="string">","</span>);</span><br><span class="line">                w = Integer.parseInt(wh[<span class="number">0</span>]);</span><br><span class="line">                h = Integer.parseInt(wh[<span class="number">1</span>]);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                System.out.println(<span class="string">"skip invalidate params : w,h = "</span> + val);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            sb.append(w + <span class="string">","</span> + h + <span class="string">";"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">generate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String[] vals = supportStr.split(<span class="string">";"</span>);</span><br><span class="line">        <span class="keyword">for</span> (String val : vals) &#123;</span><br><span class="line">            String[] wh = val.split(<span class="string">","</span>);</span><br><span class="line">            generateXmlFile(Integer.parseInt(wh[<span class="number">0</span>]), Integer.parseInt(wh[<span class="number">1</span>]));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">generateXmlFile</span><span class="params">(<span class="keyword">int</span> w, <span class="keyword">int</span> h)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        StringBuffer sbForWidth = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        sbForWidth.append(<span class="string">"&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n"</span>);</span><br><span class="line">        sbForWidth.append(<span class="string">"&lt;resources&gt;"</span>);</span><br><span class="line">        <span class="keyword">float</span> cellw = w * <span class="number">1.0f</span> / baseW;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"width : "</span> + w + <span class="string">","</span> + baseW + <span class="string">","</span> + cellw);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; baseW; i++) &#123;</span><br><span class="line">            sbForWidth.append(WTemplate.replace(<span class="string">"&#123;0&#125;"</span>, i + <span class="string">""</span>).replace(<span class="string">"&#123;1&#125;"</span>,</span><br><span class="line">                    change(cellw * i) + <span class="string">""</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        sbForWidth.append(WTemplate.replace(<span class="string">"&#123;0&#125;"</span>, baseW + <span class="string">""</span>).replace(<span class="string">"&#123;1&#125;"</span>,</span><br><span class="line">                w + <span class="string">""</span>));</span><br><span class="line">        sbForWidth.append(<span class="string">"&lt;/resources&gt;"</span>);</span><br><span class="line"></span><br><span class="line">        StringBuffer sbForHeight = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        sbForHeight.append(<span class="string">"&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n"</span>);</span><br><span class="line">        sbForHeight.append(<span class="string">"&lt;resources&gt;"</span>);</span><br><span class="line">        <span class="keyword">float</span> cellh = h *<span class="number">1.0f</span>/ baseH;</span><br><span class="line">        System.out.println(<span class="string">"height : "</span>+ h + <span class="string">","</span> + baseH + <span class="string">","</span> + cellh);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; baseH; i++) &#123;</span><br><span class="line">            sbForHeight.append(HTemplate.replace(<span class="string">"&#123;0&#125;"</span>, i + <span class="string">""</span>).replace(<span class="string">"&#123;1&#125;"</span>,</span><br><span class="line">                    change(cellh * i) + <span class="string">""</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        sbForHeight.append(HTemplate.replace(<span class="string">"&#123;0&#125;"</span>, baseH + <span class="string">""</span>).replace(<span class="string">"&#123;1&#125;"</span>,</span><br><span class="line">                h + <span class="string">""</span>));</span><br><span class="line">        sbForHeight.append(<span class="string">"&lt;/resources&gt;"</span>);</span><br><span class="line"></span><br><span class="line">        File fileDir = <span class="keyword">new</span> File(dirStr + File.separator</span><br><span class="line">                + VALUE_TEMPLATE.replace(<span class="string">"&#123;0&#125;"</span>, h + <span class="string">""</span>)<span class="comment">//</span></span><br><span class="line">                .replace(<span class="string">"&#123;1&#125;"</span>, w + <span class="string">""</span>));</span><br><span class="line">        fileDir.mkdir();</span><br><span class="line"></span><br><span class="line">        File layxFile = <span class="keyword">new</span> File(fileDir.getAbsolutePath(), <span class="string">"lay_x.xml"</span>);</span><br><span class="line">        File layyFile = <span class="keyword">new</span> File(fileDir.getAbsolutePath(), <span class="string">"lay_y.xml"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            PrintWriter pw = <span class="keyword">new</span> PrintWriter(<span class="keyword">new</span> FileOutputStream(layxFile));</span><br><span class="line">            pw.print(sbForWidth.toString());</span><br><span class="line">            pw.close();</span><br><span class="line">            pw = <span class="keyword">new</span> PrintWriter(<span class="keyword">new</span> FileOutputStream(layyFile));</span><br><span class="line">            pw.print(sbForHeight.toString());</span><br><span class="line">            pw.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">change</span><span class="params">(<span class="keyword">float</span> a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = (<span class="keyword">int</span>) (a * <span class="number">100</span>);</span><br><span class="line">        <span class="keyword">return</span> temp / <span class="number">100f</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">				<span class="comment">//åŸºå‡†åˆ†è¾¨ç‡</span></span><br><span class="line">        <span class="keyword">int</span> baseW = <span class="number">480</span>;</span><br><span class="line">        <span class="keyword">int</span> baseH = <span class="number">800</span>;</span><br><span class="line">        String addition = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (args.length &gt;= <span class="number">3</span>) &#123;</span><br><span class="line">                baseW = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">                baseH = Integer.parseInt(args[<span class="number">1</span>]);</span><br><span class="line">                addition = args[<span class="number">2</span>];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (args.length &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">                baseW = Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">                baseH = Integer.parseInt(args[<span class="number">1</span>]);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (args.length &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">                addition = args[<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</span><br><span class="line"></span><br><span class="line">            System.err</span><br><span class="line">                    .println(<span class="string">"right input params : java -jar xxx.jar width height w,h_w,h_..._w,h;"</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.exit(-<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> GenerateValueFiles(baseW, baseH, addition).generate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯¹äºä¸»æµçš„åˆ†è¾¨ç‡æˆ‘å·²ç»é›†æˆåˆ°äº†æˆ‘ä»¬çš„ç¨‹åºä¸­ï¼Œå½“ç„¶å¯¹äºç‰¹æ®Šçš„ï¼Œä½ å¯ä»¥é€šè¿‡å‚æ•°æŒ‡å®šã€‚å…³äºå±å¹•åˆ†è¾¨ç‡ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡è¯¥ç½‘ç«™æŸ¥è¯¢ï¼š<a href="http://screensiz.es/phone" target="_blank" rel="noopener">http://screensiz.es/phone</a></p>
</blockquote>
<h1 id="AndroidAutoLayoutåº“é€‚é…"><a href="#AndroidAutoLayoutåº“é€‚é…" class="headerlink" title="AndroidAutoLayoutåº“é€‚é…"></a>AndroidAutoLayoutåº“é€‚é…</h1><p><a href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2FhongyangAndroid%2FAndroidAutoLayout" target="_blank" rel="noopener">é¸¿æ´‹å¤§ä½¬çš„é€‚é…æ–¹æ¡ˆ</a>çš„é¡¹ç›®ä¹Ÿæ¥è‡ªäºå®½é«˜é™å®šç¬¦æ–¹æ¡ˆçš„å¯å‘ã€‚è™½ç„¶è¯¥æ¡†æ¶å·²ç»åœæ­¢ç»´æŠ¤ï¼Œä½†æ˜¯è®¸å¤šè€é¡¹ç›®ä¹Ÿåœ¨ä½¿ç”¨è¯¥æ–¹æ¡ˆã€‚å› ä¸ºé›†æˆç®€å•ï¼Œå¹¶ä¸”ä¸éœ€è¦ä½¿ç”¨dpå•ä½ï¼Œè€Œæ˜¯å®šä¹‰å¥½è®¾è®¡ç¨¿çš„å°ºå¯¸åä½¿ç”¨pxå•ä½å³å¯å®Œæˆé€‚é…ã€‚</p>
<p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong></p>
<ul>
<li>Android Studio</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="keyword">compile</span> <span class="string">'com.zhy:autolayout:1.4.5'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>AndroidManifestæ³¨å†Œ<code>è®¾è®¡ç¨¿</code>å°ºå¯¸</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">"design_width"</span> <span class="attr">android:value</span>=<span class="string">"768"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">meta-data</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">"design_height"</span> <span class="attr">android:value</span>=<span class="string">"1280"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">meta-data</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>é›†æˆ<code>AutoLayoutActivity</code></li>
</ul>
<p>ç„¶åå°±å¯ä»¥åœ¨å¸ƒå±€æ–‡ä»¶æŒ‰ç…§è®¾è®¡ç¨¿çš„å°ºå¯¸æ¥ä½¿ç”¨å…·ä½“çš„åƒç´ å€¼äº†ã€‚æ¯”å¦‚ï¼Œè®¾è®¡ç¨¿ä¸Šæ˜¯96*96,é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥å†™96pxï¼ŒAPPè¿è¡Œæ—¶ï¼Œæ¡†æ¶ä¼šå¸®åŠ©æˆ‘ä»¬æ ¹æ®ä¸åŒæ‰‹æœºçš„å…·ä½“å°ºå¯¸æŒ‰æ¯”ä¾‹ä¼¸ç¼©ã€‚è¿™æ˜¯æ¯”å®½é«˜é™å®šç¬¦æ›´å¥½çš„æ–¹æ¡ˆï¼Œå› ä¸ºè§£å†³äº†å®½é«˜é™å®šç¬¦çš„å®¹é”™ç‡é—®é¢˜ã€‚</p>
<p>ä½†æ˜¯æ¡†æ¶è¦åœ¨è¿è¡Œæ—¶ä¼šåœ¨onMeasureé‡Œé¢åšå˜æ¢ï¼Œè‡ªå®šä¹‰çš„æ§ä»¶å¯èƒ½ä¼šè¢«å½±å“æˆ–é™åˆ¶ï¼Œå¯èƒ½æœ‰äº›ç‰¹å®šçš„æ§ä»¶ï¼Œéœ€è¦å•ç‹¬é€‚é…ï¼Œè¿™é‡Œé¢å¯èƒ½å­˜åœ¨çš„æš—å‘æ˜¯ä¸å¯é¢„è§çš„ã€‚å› ä¸ºè¿™æ˜¯ç”±æ¡†æ¶æ¥å®Œæˆï¼Œå¹¶éç³»ç»Ÿå®Œæˆã€‚å¹¶ä¸”è¯¥åº“ä½œè€…å·²ç»æ”¾å¼ƒç»´æŠ¤äº†ã€‚</p>
<h1 id="smallestWidthé€‚é…"><a href="#smallestWidthé€‚é…" class="headerlink" title="smallestWidthé€‚é…"></a>smallestWidthé€‚é…</h1><p>smallestWidthé€‚é…ä¹Ÿå«åšswé™å®šç¬¦é€‚é…ã€‚å€¼å¾—æ˜¯Androidä¼šè¯†åˆ«å±å¹•å¯ç”¨å®½åº¦å’Œé«˜åº¦çš„æœ€å°å°ºå¯¸çš„dpå€¼ï¼Œç„¶åå†æ ¹æ®è¯†åˆ«çš„ç»“æœå»èµ„æºæ–‡ä»¶ä¸­å¯»æ‰¾å¯¹åº”çš„é™å®šç¬¦çš„æ–‡ä»¶å¤¹ä¸‹çš„èµ„æºæ–‡ä»¶ã€‚</p>
<p>è¿™ç§æœºåˆ¶ä¸Šå’Œä¸Šæ–‡æåˆ°çš„å®½é«˜é™å®šç¬¦é€‚é…åŸç†ä¸Šæ˜¯ä¸€æ ·çš„ã€‚éƒ½æ˜¯é€šè¿‡ç³»ç»Ÿç‰¹å®šçš„è§„åˆ™é€‰æ‹©å¯¹åº”çš„æ–‡ä»¶ã€‚</p>
<p><img src="genswvalue.png" alt></p>
<p>ä¾‹å¦‚ï¼Œæ¯”å¦‚ä¸€å°æ‰‹æœºçš„dpiä¸º480ï¼Œæ¨ªå‘åˆ†è¾¨ç‡ä¸º1080pxï¼Œæ ¹æ®å…¬å¼px = dp(dpi/160)ï¼Œæ¨ªå‘çš„dpå€¼æ˜¯360dpã€‚åˆ™ç³»ç»Ÿå°±ä¼šè‡ªåŠ¨å»å¯»æ‰¾<code>value-sw360dp</code>çš„æ–‡ä»¶å¤¹ä»¥åŠå¯¹åº”çš„èµ„æºæ–‡ä»¶ã€‚</p>
<blockquote>
<p>ç†è®ºæ¡ä»¶ä¸‹ç‰©ç†dpç­‰äºç³»ç»Ÿdp</p>
</blockquote>
<p>è€Œè¯¥æ–¹æ¡ˆå¯¹æ¯”ä¸å®½é«˜é™å®šç¬¦é€‚é…æ–¹æ¡ˆæœ€å¤§çš„åŒºåˆ«ä¹Ÿæ˜¯ä¼˜ç‚¹å°±æ˜¯ï¼Œè¯¥æ–¹æ¡ˆæœ‰æ›´å¥½çš„å®¹é”™ç‡ã€‚æ¯”å¦‚ä¸Šè¿°ä¾‹å­ä¸­ï¼Œå¦‚æœç³»ç»Ÿæ‰¾ä¸åˆ°<code>value-sw350dp</code>æ–‡ä»¶å¤¹ï¼Œåˆ™ç³»ç»Ÿä¼šå‘ä¸‹å¯»æ‰¾ï¼Œæ¯”å¦‚æ‰¾åˆ°ç¦»ä¸€ä¸ª360æœ€è¿‘çš„<code>value-sw320dp</code>æ–‡ä»¶å¤¹ã€‚é‚£ä¹ˆç³»ç»Ÿå°±ä¼šé€‰æ‹©è¯¥æ–‡ä»¶ä¸‹çš„èµ„æºæ–‡ä»¶ã€‚</p>
<p>ä¾‹å¦‚è®¾è®¡ç¨¿åŒæ ·ä¸º<code>480 * 800</code>,åŒæ ·æœ‰ä¸€ä¸ª<code>300 * 300</code>pxçš„ImageViewï¼Œä¾‹å¦‚åœ¨values-sw360dpæ–‡ä»¶å¤¹ä¸‹çš„dimenåº”è¯¥å¦‚ä½•ç¼–å†™å‘¢ï¼Ÿ360dpåˆ™æ„å‘³ç€æ‰‹æœºæœ€å°å®½åº¦ä¸º360dpï¼Œæˆ‘ä»¬å°†360dpåˆ†æˆ480ä»½ï¼Œæ¯ä¸€ä¸ªè®¾è®¡ç¨¿ä¸­çš„åƒç´ å¤§æ¦‚ä»£è¡¨ç€æ‰‹æœºçš„0.75dpã€‚é‚£ä¹ˆä¸€ä¸ª<code>300 * 300</code>pxå¯¹åº”çš„dimenå¼•ç”¨åˆ™ä¸º</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"base_dpi"</span>&gt;</span>360dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">  //....</span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_0"</span>&gt;</span>0.00dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_1"</span>&gt;</span>0.75dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_300"</span>&gt;</span>225.00dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">  //...</span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è€Œè¿™ç§dimenså¼•ç”¨ï¼Œåœ¨ä¸åŒçš„<code>values-sw&lt;N&gt;</code>dpæ–‡ä»¶å¤¹ä¸‹çš„æ•°å€¼æ˜¯ä¸åŒçš„ï¼Œæ¯”å¦‚values-sw400dpå’Œvalues-sw420dp</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">//400dp</span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"base_dpi"</span>&gt;</span>400dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_0"</span>&gt;</span>0.00dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_1"</span>&gt;</span>0.83dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_2"</span>&gt;</span>1.67dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_3"</span>&gt;</span>2.50dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_4"</span>&gt;</span>3.33dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">//420dp</span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"base_dpi"</span>&gt;</span>420dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_0"</span>&gt;</span>0.00dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_1"</span>&gt;</span>0.88dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_2"</span>&gt;</span>1.75dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_3"</span>&gt;</span>2.63dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dimen</span> <span class="attr">name</span>=<span class="string">"qb_px_4"</span>&gt;</span>3.50dp<span class="tag">&lt;/<span class="name">dimen</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è®¡ç®—å®Œåï¼Œé‚£ä¹ˆå¯¹åº”çš„å¸ƒå±€æ–‡ä»¶ç¼–å†™ä»£ç ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">".MainActivity"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/iv_adapterimg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">"@mipmap/img"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:scaleType</span>=<span class="string">"fitXY"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"@dimen/qb_px_300"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"@dimen/qb_px_300"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œä¸€ä¸‹æ¥çœ‹çœ‹é€‚é…çš„æ•ˆæœï¼š</p>
<p><img src="swvalueshipei.png" alt></p>
<p>smallestWidthçš„é€‚é…æœºåˆ¶ç”±ç³»ç»Ÿä¿è¯ï¼Œæˆ‘ä»¬åªéœ€è¦é’ˆå¯¹è¿™å¥—è§„åˆ™ç”Ÿæˆå¯¹åº”çš„èµ„æºæ–‡ä»¶å³å¯ï¼Œä¸ä¼šå‡ºç°ä»€ä¹ˆéš¾ä»¥è§£å†³çš„é—®é¢˜ï¼Œä¹Ÿæ ¹æœ¬ä¸ä¼šå½±å“æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œè€Œä¸”åªè¦æˆ‘ä»¬ç”Ÿæˆçš„èµ„æºæ–‡ä»¶åˆ†å¸ƒåˆç†ï¼Œï¼Œå³ä½¿å¯¹åº”çš„smallestWidthå€¼æ²¡æœ‰æ‰¾åˆ°å®Œå…¨å¯¹åº”çš„èµ„æºæ–‡ä»¶ï¼Œå®ƒä¹Ÿèƒ½å‘ä¸‹å…¼å®¹ï¼Œå¯»æ‰¾æœ€æ¥è¿‘çš„èµ„æºæ–‡ä»¶ã€‚</p>
<p>å½“ç„¶è¯¥æ–¹æ¡ˆä¹Ÿæœ‰ä»–çš„ç¼ºç‚¹ï¼Œç”Ÿæˆçš„æ–‡ä»¶å¤¹è¶Šå¤šï¼Œä¹Ÿå°±æ„å‘³ç€ç”Ÿæˆçš„dimensæ–‡ä»¶çš„è¦†ç›–èŒƒå›´å’Œå°ºå¯¸èŒƒå›´è¶Šå¤§ï¼Œapkçš„å®‰è£…åŒ…ä¹Ÿä¼šå¢åŠ ï¼Œå®½é«˜é™å®šç¬¦é€‚é…æ–¹æ¡ˆä¹ŸåŒæ ·æœ‰ç€è¯¥ç¼ºç‚¹ã€‚</p>
<blockquote>
<p>smallestWidthé€‚é…æ–¹æ¡ˆæœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œé‚£å°±æ˜¯å®ƒæ˜¯åœ¨Android 3.2 ä»¥åå¼•å…¥çš„ï¼ŒGoogleçš„æœ¬æ„æ˜¯ç”¨å®ƒæ¥é€‚é…å¹³æ¿çš„å¸ƒå±€æ–‡ä»¶ï¼ˆä½†æ˜¯å®é™…ä¸Šæ˜¾ç„¶ç”¨äºdiemnsé€‚é…çš„æ•ˆæœæ›´å¥½ï¼‰ï¼Œä¸è¿‡ç›®å‰æ‰€æœ‰çš„é¡¹ç›®åº”è¯¥æœ€ä½æ”¯æŒç‰ˆæœ¬åº”è¯¥éƒ½æ˜¯4.0äº†ï¼ˆç³—äº‹ç™¾ç§‘è¿™ä¹ˆè€çš„é¡¹ç›®æœ€ä½éƒ½æ˜¯4.0å“¦ï¼‰ï¼Œæ‰€ä»¥ï¼Œè¿™é—®é¢˜å…¶å®ä¹Ÿä¸é‡è¦äº†ã€‚</p>
</blockquote>
<p>å½“ç„¶ï¼Œè®¡ç®—çš„æ–¹å¼è‚¯å®šä¹Ÿä¸ä¼šæ˜¯è‡ªå·±ä¸€ç‚¹è®¡ç®—å†ç¼–å†™ï¼Œ é™„ä¸Šç”Ÿæˆçš„ä»£ç æ–‡ä»¶ã€‚<a href="https://github.com/ladingwu/dimens_sw" target="_blank" rel="noopener">ä»£ç é“¾æ¥</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenerateSWValueFiles</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€‚é…æ‰‹æœºdpåˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> DimenTypes &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€‚é…Android 3.2ä»¥ä¸Š   å¤§éƒ¨åˆ†æ‰‹æœºçš„swå€¼é›†ä¸­åœ¨  300-460ä¹‹é—´</span></span><br><span class="line">        DP_sw__300(<span class="number">300</span>),  <span class="comment">// values-sw300</span></span><br><span class="line">        DP_sw__310(<span class="number">310</span>),</span><br><span class="line">        DP_sw__320(<span class="number">320</span>),</span><br><span class="line">        DP_sw__330(<span class="number">330</span>),</span><br><span class="line">        DP_sw__340(<span class="number">340</span>),</span><br><span class="line">        DP_sw__350(<span class="number">350</span>),</span><br><span class="line">        DP_sw__360(<span class="number">360</span>),</span><br><span class="line">        DP_sw__370(<span class="number">370</span>),</span><br><span class="line">        DP_sw__380(<span class="number">380</span>),</span><br><span class="line">        DP_sw__390(<span class="number">390</span>),</span><br><span class="line">        DP_sw__410(<span class="number">410</span>),</span><br><span class="line">        DP_sw__420(<span class="number">420</span>),</span><br><span class="line">        DP_sw__430(<span class="number">430</span>),</span><br><span class="line">        DP_sw__440(<span class="number">440</span>),</span><br><span class="line">        DP_sw__450(<span class="number">450</span>),</span><br><span class="line">        DP_sw__460(<span class="number">460</span>),</span><br><span class="line">        DP_sw__470(<span class="number">470</span>),</span><br><span class="line">        DP_sw__480(<span class="number">480</span>),</span><br><span class="line">        DP_sw__490(<span class="number">490</span>),</span><br><span class="line"></span><br><span class="line">        DP_sw__400(<span class="number">400</span>);</span><br><span class="line">        <span class="comment">// æƒ³ç”Ÿæˆå¤šå°‘è‡ªå·±ä»¥æ­¤ç±»æ¨</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å±å¹•æœ€å°å®½åº¦</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> swWidthDp;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        DimenTypes(<span class="keyword">int</span> swWidthDp) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">this</span>.swWidthDp = swWidthDp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSwWidthDp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> swWidthDp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSwWidthDp</span><span class="params">(<span class="keyword">int</span> swWidthDp)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.swWidthDp = swWidthDp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”ŸæˆSWå·¥å…·ç±»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MakeUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String XML_HEADER = <span class="string">"&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\r\n"</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String XML_RESOURCE_START = <span class="string">"&lt;resources&gt;\r\n"</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String XML_RESOURCE_END = <span class="string">"&lt;/resources&gt;\r\n"</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String XML_DIMEN_TEMPLETE = <span class="string">"&lt;dimen name=\"qb_%1$spx_%2$d\"&gt;%3$.2fdp&lt;/dimen&gt;\r\n"</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String XML_BASE_DPI = <span class="string">"&lt;dimen name=\"base_dpi\"&gt;%ddp&lt;/dimen&gt;\r\n"</span>;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_SIZE = <span class="number">720</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ç”Ÿæˆçš„æ–‡ä»¶å</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String XML_NAME = <span class="string">"lay_sw.xml"</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">px2dip</span><span class="params">(<span class="keyword">float</span> pxValue, <span class="keyword">int</span> sw,<span class="keyword">int</span> designWidth)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">float</span> dpValue =   (pxValue/(<span class="keyword">float</span>)designWidth) * sw;</span><br><span class="line">            BigDecimal bigDecimal = <span class="keyword">new</span> BigDecimal(dpValue);</span><br><span class="line">            <span class="keyword">float</span> finDp = bigDecimal.setScale(<span class="number">2</span>, BigDecimal.ROUND_HALF_UP).floatValue();</span><br><span class="line">            <span class="keyword">return</span> finDp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ç”Ÿæˆæ‰€æœ‰çš„å°ºå¯¸æ•°æ®</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> type</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">makeAllDimens</span><span class="params">(DimenTypes type, <span class="keyword">int</span> designWidth)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">float</span> dpValue;</span><br><span class="line">            String temp;</span><br><span class="line">            StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                sb.append(XML_HEADER);</span><br><span class="line">                sb.append(XML_RESOURCE_START);</span><br><span class="line">                <span class="comment">//å¤‡ä»½ç”Ÿæˆçš„ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">                temp = String.format(XML_BASE_DPI, type.getSwWidthDp());</span><br><span class="line">                sb.append(temp);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= MAX_SIZE; i++) &#123;</span><br><span class="line"></span><br><span class="line">                    dpValue = px2dip((<span class="keyword">float</span>) i,type.getSwWidthDp(),designWidth);</span><br><span class="line">                    temp = String.format(XML_DIMEN_TEMPLETE,<span class="string">""</span>, i, dpValue);</span><br><span class="line">                    sb.append(temp);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                sb.append(XML_RESOURCE_END);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sb.toString();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment">         * åªéœ€ä¼ å®½è¿›æ¥å°±è¡Œ</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> type æšä¸¾ç±»å‹</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> buildDir ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">makeAll</span><span class="params">(<span class="keyword">int</span> designWidth, DimenTypes type, String buildDir)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//ç”Ÿæˆè§„åˆ™</span></span><br><span class="line">                <span class="keyword">final</span> String folderName;</span><br><span class="line">                <span class="keyword">if</span> (type.getSwWidthDp() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="comment">//é€‚é…Android 3.2+</span></span><br><span class="line">                    folderName = <span class="string">"values-sw"</span> + type.getSwWidthDp() + <span class="string">"dp"</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//ç”Ÿæˆç›®æ ‡ç›®å½•</span></span><br><span class="line">                File file = <span class="keyword">new</span> File(buildDir + File.separator + folderName);</span><br><span class="line">                <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">                    file.mkdirs();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//ç”Ÿæˆvaluesæ–‡ä»¶</span></span><br><span class="line">                FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(file.getAbsolutePath() + File.separator + XML_NAME);</span><br><span class="line">                fos.write(makeAllDimens(type,designWidth).getBytes());</span><br><span class="line">                fos.flush();</span><br><span class="line">                fos.close();</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾è®¡ç¨¿å°ºå¯¸(å°†è‡ªå·±è®¾è®¡å¸ˆçš„è®¾è®¡ç¨¿çš„å®½åº¦å¡«å…¥)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DESIGN_WIDTH = <span class="number">480</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾è®¡ç¨¿çš„é«˜åº¦  ï¼ˆå°†è‡ªå·±è®¾è®¡å¸ˆçš„è®¾è®¡ç¨¿çš„é«˜åº¦å¡«å…¥ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DESIGN_HEIGHT = <span class="number">800</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//generater</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> smallest = DESIGN_WIDTH &gt; DESIGN_HEIGHT ? DESIGN_HEIGHT : DESIGN_WIDTH;  <span class="comment">//     æ±‚å¾—æœ€å°å®½åº¦</span></span><br><span class="line">        DimenTypes[] values = DimenTypes.values();</span><br><span class="line">        <span class="keyword">for</span> (DimenTypes value : values) &#123;</span><br><span class="line">            File file = <span class="keyword">new</span> File(<span class="string">"dimens"</span>); <span class="comment">//å½“å‰é¡¹ç›®è·¯å¾„</span></span><br><span class="line">            MakeUtils.makeAll(smallest, value, file.getAbsolutePath());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸»æµdpä¹Ÿå¯ä»¥æŸ¥è¯¢ç›¸å…³ç½‘ç«™</p>
</blockquote>
<h1 id="ä»Šæ—¥å¤´æ¡é€‚é…æ–¹æ¡ˆ"><a href="#ä»Šæ—¥å¤´æ¡é€‚é…æ–¹æ¡ˆ" class="headerlink" title="ä»Šæ—¥å¤´æ¡é€‚é…æ–¹æ¡ˆ"></a>ä»Šæ—¥å¤´æ¡é€‚é…æ–¹æ¡ˆ</h1><p><a href="https://link.juejin.im/?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fd9QCoBP6kV9VSWvVldVVwA" target="_blank" rel="noopener">æ–‡ç« é“¾æ¥</a></p>
<p>è¯¥æ–¹æ¡ˆçš„æ€æƒ³æ¥æºå°±æ˜¯ä¿®æ”¹densityçš„å€¼ï¼Œå¼ºè¡ŒæŠŠæ‰€æœ‰ä¸åŒåˆ†è¾¨ç‡çš„æ‰‹æœºçš„å®½åº¦æ”¹æˆä¸€ä¸ªç»Ÿä¸€çš„å€¼ã€‚</p>
<p>ä¸Šæ–‡æåˆ°dpé€‚é…çš„<code>DisplayMetrics</code>ä¸­çš„ç›¸å…³å˜é‡ï¼š</p>
<ul>
<li>DisplayMetrics#density å°±æ˜¯ä¸Šè¿°çš„density</li>
<li>DisplayMetrics#densityDpi å°±æ˜¯ä¸Šè¿°çš„dpi</li>
<li>DisplayMetrics#scaledDensity å­—ä½“çš„ç¼©æ”¾å› å­ï¼Œæ­£å¸¸æƒ…å†µä¸‹å’Œdensityç›¸ç­‰ï¼Œä½†æ˜¯è°ƒèŠ‚ç³»ç»Ÿå­—ä½“å¤§å°åä¼šæ”¹å˜è¿™ä¸ªå€¼</li>
</ul>
<p><strong>é‚£ä¹ˆæ˜¯ä¸æ˜¯æ‰€æœ‰çš„dpå’Œpxçš„è½¬æ¢éƒ½æ˜¯é€šè¿‡ DisplayMetrics ä¸­ç›¸å…³çš„å€¼æ¥è®¡ç®—çš„å‘¢ï¼Ÿ</strong></p>
<p>é¦–å…ˆæ¥çœ‹çœ‹å¸ƒå±€æ–‡ä»¶ä¸­dpçš„è½¬æ¢ï¼Œæœ€ç»ˆéƒ½æ˜¯è°ƒç”¨ <code>TypedValue#applyDimension(int unit, float value, DisplayMetrics metrics)</code>æ¥è¿›è¡Œè½¬æ¢:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">applyDimension</span><span class="params">(<span class="keyword">int</span> unit, <span class="keyword">float</span> value,</span></span></span><br><span class="line"><span class="function"><span class="params">                                       DisplayMetrics metrics)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (unit) &#123;</span><br><span class="line">        <span class="keyword">case</span> COMPLEX_UNIT_PX:</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        <span class="keyword">case</span> COMPLEX_UNIT_DIP:</span><br><span class="line">            <span class="keyword">return</span> value * metrics.density;</span><br><span class="line">        <span class="keyword">case</span> COMPLEX_UNIT_SP:</span><br><span class="line">            <span class="keyword">return</span> value * metrics.scaledDensity;</span><br><span class="line">        <span class="keyword">case</span> COMPLEX_UNIT_PT:</span><br><span class="line">            <span class="keyword">return</span> value * metrics.xdpi * (<span class="number">1.0f</span>/<span class="number">72</span>);</span><br><span class="line">        <span class="keyword">case</span> COMPLEX_UNIT_IN:</span><br><span class="line">            <span class="keyword">return</span> value * metrics.xdpi;</span><br><span class="line">        <span class="keyword">case</span> COMPLEX_UNIT_MM:</span><br><span class="line">            <span class="keyword">return</span> value * metrics.xdpi * (<span class="number">1.0f</span>/<span class="number">25.4f</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œç”¨åˆ°çš„DisplayMetricsæ­£æ˜¯ä»Resourcesä¸­è·å¾—çš„ã€‚</p>
<p>å†çœ‹çœ‹å›¾ç‰‡çš„decodeï¼Œ<code>BitmapFactory#decodeResourceStream</code>æ–¹æ³•:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Bitmap <span class="title">decodeResourceStream</span><span class="params">(@Nullable Resources res, @Nullable TypedValue value,</span></span></span><br><span class="line"><span class="function"><span class="params">            @Nullable InputStream is, @Nullable Rect pad, @Nullable Options opts)</span> </span>&#123;</span><br><span class="line">        validate(opts);</span><br><span class="line">        <span class="keyword">if</span> (opts == <span class="keyword">null</span>) &#123;</span><br><span class="line">            opts = <span class="keyword">new</span> Options();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (opts.inDensity == <span class="number">0</span> &amp;&amp; value != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> density = value.density;</span><br><span class="line">            <span class="keyword">if</span> (density == TypedValue.DENSITY_DEFAULT) &#123;</span><br><span class="line">                opts.inDensity = DisplayMetrics.DENSITY_DEFAULT;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (density != TypedValue.DENSITY_NONE) &#123;</span><br><span class="line">                opts.inDensity = density;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (opts.inTargetDensity == <span class="number">0</span> &amp;&amp; res != <span class="keyword">null</span>) &#123;</span><br><span class="line">            opts.inTargetDensity = res.getDisplayMetrics().densityDpi;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> decodeStream(is, pad, opts);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶è¿˜æœ‰äº›å…¶ä»–dpè½¬æ¢çš„åœºæ™¯ï¼ŒåŸºæœ¬éƒ½æ˜¯é€šè¿‡ DisplayMetrics æ¥è®¡ç®—çš„ï¼Œè¿™é‡Œä¸å†è¯¦è¿°ã€‚å› æ­¤ï¼Œæƒ³è¦æ»¡è¶³ä¸Šè¿°éœ€æ±‚ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ DisplayMetrics ä¸­å’Œ dp è½¬æ¢ç›¸å…³çš„å˜é‡å³å¯ã€‚</p>
<p>é€šè¿‡è¯¥åŸç†å¾—åˆ°çš„é€‚é…æ–¹æ¡ˆï¼š</p>
<p>æ¯”å¦‚ï¼Œè®¾è®¡ç¨¿çš„å®½åº¦æ˜¯480pxï¼Œé‚£ä¹ˆå¼€å‘ä»£ç æ—¶ä¼šæŠŠç›®æ ‡dpå€¼è®¾ç½®ä¸º480dpï¼Œåœ¨ä¸åŒè®¾å¤‡ä¸­ï¼ŒåŠ¨æ€ä¿®æ”¹densityçš„å€¼ï¼Œä»è€Œä¿è¯æ‰‹æœºåƒç´ å®½åº¦/densityè¿™ä¸ªå€¼å§‹ç»ˆæ˜¯360dpã€‚è¿™æ ·æ¥ä¿è¯UIåœ¨ä¸åŒè®¾å¤‡ä¸Šè¡¨ç°ä¸€è‡´ã€‚</p>
<p>ä»Šæ—¥å¤´æ¡å±å¹•é€‚é…æ–¹æ¡ˆçš„æ ¸å¿ƒåŸç†åœ¨äºï¼Œæ ¹æ®ä»¥ä¸‹å…¬å¼ç®—å‡º <strong>density</strong></p>
<p><strong>å½“å‰è®¾å¤‡å±å¹•æ€»å®½åº¦ï¼ˆå•ä½ä¸ºåƒç´ ï¼‰/ è®¾è®¡å›¾æ€»å®½åº¦ï¼ˆå•ä½ä¸º dp) = density</strong></p>
<p>ä»Šæ—¥å¤´æ¡æ–¹æ¡ˆä»£ç å®ç°ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.app.Application;</span><br><span class="line"><span class="keyword">import</span> android.content.ComponentCallbacks;</span><br><span class="line"><span class="keyword">import</span> android.content.res.Configuration;</span><br><span class="line"><span class="keyword">import</span> android.support.annotation.NonNull;</span><br><span class="line"><span class="keyword">import</span> android.util.DisplayMetrics;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> sNoncompatDensity;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">float</span> sNoncompatScaledDensity;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setCustomDensity</span><span class="params">(@NonNull Activity activity, @NonNull <span class="keyword">final</span> Application application)</span></span>&#123;</span><br><span class="line">        <span class="keyword">final</span> DisplayMetrics appDisplayMetrics = application.getResources().getDisplayMetrics();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>( sNoncompatDensity == <span class="number">0</span>) &#123;</span><br><span class="line">            sNoncompatDensity = appDisplayMetrics.density;</span><br><span class="line">            sNoncompatScaledDensity = appDisplayMetrics.scaledDensity;</span><br><span class="line">            application.registerComponentCallbacks(<span class="keyword">new</span> ComponentCallbacks() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onConfigurationChanged</span><span class="params">(Configuration newConfig)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(newConfig != <span class="keyword">null</span> &amp;&amp; newConfig.fontScale &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        sNoncompatScaledDensity = application.getResources().getDisplayMetrics().scaledDensity;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLowMemory</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">float</span> targetDensity = (<span class="keyword">float</span>) (appDisplayMetrics.widthPixels / <span class="number">480.0</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> targetDensityDPI = (<span class="keyword">int</span>) (targetDensity * <span class="number">160</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">float</span> targetScaledDensity = targetDensity * (sNoncompatScaledDensity / sNoncompatDensity);</span><br><span class="line"></span><br><span class="line">        appDisplayMetrics.density  = targetDensity;</span><br><span class="line">        appDisplayMetrics.densityDpi = targetDensityDPI;</span><br><span class="line">        appDisplayMetrics.scaledDensity = targetScaledDensity;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> DisplayMetrics activityDisplayMetrics = activity.getResources().getDisplayMetrics();</span><br><span class="line">        activityDisplayMetrics.density  = targetDensity;</span><br><span class="line">        activityDisplayMetrics.densityDpi = targetDensityDPI;</span><br><span class="line">        activityDisplayMetrics.scaledDensity = targetScaledDensity;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨activity#onCreateæ–¹æ³•ä¸­è°ƒç”¨å³å¯ï¼Œåœ¨setContentViewä¹‹å‰ã€‚è¿è¡Œçœ‹çœ‹é€‚é…çš„æ•ˆæœï¼š</p>
<p><img src="toutiaoshipei.png" alt></p>
<blockquote>
<p>ä»¥è®¾è®¡å›¾å®½480dpå»é€‚é…çš„ï¼Œå¦‚æœè¦ä»¥é«˜ç»´åº¦é€‚é…ï¼Œå¯ä»¥å†æ‰©å±•ä¸‹ä»£ç å³å¯</p>
</blockquote>
<h2 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h2><ol>
<li>ä½¿ç”¨æˆæœ¬éå¸¸ä½ï¼Œæ“ä½œéå¸¸ç®€å•ï¼Œä½¿ç”¨è¯¥æ–¹æ¡ˆååœ¨é¡µé¢å¸ƒå±€æ—¶ä¸éœ€è¦é¢å¤–çš„ä»£ç å’Œæ“ä½œï¼Œè¿™ç‚¹å¯ä»¥è¯´å®Œè™å…¶ä»–å±å¹•é€‚é…æ–¹æ¡ˆ</li>
<li>ä¾µå…¥æ€§éå¸¸ä½ï¼Œè¯¥æ–¹æ¡ˆå’Œé¡¹ç›®å®Œå…¨è§£è€¦ï¼Œåœ¨é¡¹ç›®å¸ƒå±€æ—¶ä¸ä¼šä¾èµ–å“ªæ€•ä¸€è¡Œè¯¥æ–¹æ¡ˆçš„ä»£ç ï¼Œè€Œä¸”ä½¿ç”¨çš„è¿˜æ˜¯ <strong>Android</strong> å®˜æ–¹çš„ <strong>API</strong>ï¼Œæ„å‘³ç€å½“ä½ é‡åˆ°ä»€ä¹ˆé—®é¢˜æ— æ³•è§£å†³ï¼Œæƒ³åˆ‡æ¢ä¸ºå…¶ä»–å±å¹•é€‚é…æ–¹æ¡ˆæ—¶ï¼ŒåŸºæœ¬ä¸éœ€è¦æ›´æ”¹ä¹‹å‰çš„ä»£ç ï¼Œæ•´ä¸ªåˆ‡æ¢è¿‡ç¨‹å‡ ä¹åœ¨ç¬é—´å®Œæˆï¼Œä¼šå°‘å¾ˆå¤šéº»çƒ¦ï¼ŒèŠ‚çº¦å¾ˆå¤šæ—¶é—´ï¼Œè¯•é”™æˆæœ¬æ¥è¿‘äº 0</li>
<li>å¯é€‚é…ä¸‰æ–¹åº“çš„æ§ä»¶å’Œç³»ç»Ÿçš„æ§ä»¶(ä¸æ­¢æ˜¯æ˜¯ <strong>Activity</strong> å’Œ <strong>Fragment</strong>ï¼Œ<strong>Dialog</strong>ã€<strong>Toast</strong> ç­‰æ‰€æœ‰ç³»ç»Ÿæ§ä»¶éƒ½å¯ä»¥é€‚é…)ï¼Œç”±äºä¿®æ”¹çš„ <strong>density</strong> åœ¨æ•´ä¸ªé¡¹ç›®ä¸­æ˜¯å…¨å±€çš„ï¼Œæ‰€ä»¥åªè¦ä¸€æ¬¡ä¿®æ”¹ï¼Œé¡¹ç›®ä¸­çš„æ‰€æœ‰åœ°æ–¹éƒ½ä¼šå—ç›Š</li>
<li>ä¸ä¼šæœ‰ä»»ä½•æ€§èƒ½çš„æŸè€—</li>
</ol>
<h2 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h2><p>æš‚æ—¶æ²¡å‘ç°å…¶ä»–ä»€ä¹ˆå¾ˆæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œå·²çŸ¥çš„ç¼ºç‚¹æœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯ç¬¬ä¸‰ä¸ªä¼˜ç‚¹ï¼Œå®ƒæ—¢æ˜¯è¿™ä¸ªæ–¹æ¡ˆçš„ä¼˜ç‚¹ä¹ŸåŒæ ·æ˜¯ç¼ºç‚¹ï¼Œä½†æ˜¯å°±è¿™ä¸€ä¸ªç¼ºç‚¹ä¹Ÿæ˜¯éå¸¸è‡´å‘½çš„</p>
<p>åªéœ€è¦ä¿®æ”¹ä¸€æ¬¡ <strong>density</strong>ï¼Œé¡¹ç›®ä¸­çš„æ‰€æœ‰åœ°æ–¹éƒ½ä¼šè‡ªåŠ¨é€‚é…ï¼Œè¿™ä¸ªçœ‹ä¼¼è§£æ”¾äº†åŒæ‰‹ï¼Œå‡å°‘äº†å¾ˆå¤šæ“ä½œï¼Œä½†æ˜¯å®é™…ä¸Šååº”äº†ä¸€ä¸ªç¼ºç‚¹ï¼Œé‚£å°±æ˜¯åªèƒ½ä¸€åˆ€åˆ‡çš„å°†æ•´ä¸ªé¡¹ç›®è¿›è¡Œé€‚é…ï¼Œä½†é€‚é…èŒƒå›´æ˜¯ä¸å¯æ§çš„</p>
<p>è¿™æ ·ä¸æ˜¯å¾ˆå¥½å—ï¼Ÿè¿™æ ·æœ¬æ¥æ˜¯å¾ˆå¥½çš„ï¼Œä½†æ˜¯åº”ç”¨åˆ°è¿™ä¸ªæ–¹æ¡ˆæ˜¯å°±ä¸å¥½äº†ï¼Œå› ä¸ºæˆ‘ä¸Šé¢çš„åŸç†ä¹Ÿåˆ†æäº†ï¼Œè¿™ä¸ªæ–¹æ¡ˆä¾èµ–äºè®¾è®¡å›¾å°ºå¯¸ï¼Œä½†æ˜¯é¡¹ç›®ä¸­çš„ç³»ç»Ÿæ§ä»¶ã€ä¸‰æ–¹åº“æ§ä»¶ã€ç­‰éæˆ‘ä»¬é¡¹ç›®è‡ªèº«è®¾è®¡çš„æ§ä»¶ï¼Œå®ƒä»¬çš„è®¾è®¡å›¾å°ºå¯¸å¹¶ä¸ä¼šå’Œæˆ‘ä»¬é¡¹ç›®è‡ªèº«çš„è®¾è®¡å›¾å°ºå¯¸ä¸€æ ·</p>
<p>å½“è¿™ä¸ªé€‚é…æ–¹æ¡ˆä¸åˆ†ç±»å‹ï¼Œå°†æ‰€æœ‰æ§ä»¶éƒ½å¼ºè¡Œä½¿ç”¨æˆ‘ä»¬é¡¹ç›®è‡ªèº«çš„è®¾è®¡å›¾å°ºå¯¸è¿›è¡Œé€‚é…æ—¶ï¼Œè¿™æ—¶å°±ä¼šå‡ºç°é—®é¢˜ï¼Œ<strong>å½“æŸä¸ªç³»ç»Ÿæ§ä»¶æˆ–ä¸‰æ–¹åº“æ§ä»¶çš„è®¾è®¡å›¾å°ºå¯¸å’Œå’Œæˆ‘ä»¬é¡¹ç›®è‡ªèº«çš„è®¾è®¡å›¾å°ºå¯¸å·®è·éå¸¸å¤§æ—¶ï¼Œè¿™ä¸ªé—®é¢˜å°±è¶Šä¸¥é‡</strong></p>
<blockquote>
<p>è¿™é‡Œæ˜¯JessYanæ€»ç»“çš„ä¼˜ç¼ºç‚¹ï¼Œä¸ªäººå¾ˆèµåŒã€‚</p>
</blockquote>
<h1 id="AndroidAutoSIze"><a href="#AndroidAutoSIze" class="headerlink" title="AndroidAutoSIze"></a>AndroidAutoSIze</h1><p>ä¸€ä¸ªåŸºäºä»Šæ—¥å¤´æ¡æ–¹æ¡ˆçš„å¼€æºåº“ï¼Œä¸€ä¸ªæä½æˆæœ¬çš„ Android å±å¹•é€‚é…æ–¹æ¡ˆ.</p>
<p>å¦‚æœé¡¹ç›®æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šè¦æ±‚ï¼Œä¸¤ä¸ªæ­¥éª¤å³å¯å®Œæˆé€‚é…ï¼š</p>
<p><strong>æ·»åŠ ä¾èµ–</strong></p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">implementation <span class="string">'me.jessyan:autosize:1.1.2'</span></span><br></pre></td></tr></table></figure>
<p><strong>è¯·åœ¨ AndroidManifest ä¸­å¡«å†™å…¨å±€è®¾è®¡å›¾å°ºå¯¸ (å•ä½ dp)</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span>&gt;</span>            </span><br><span class="line">        <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"design_width_in_dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:value</span>=<span class="string">"360"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta-data</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"design_height_in_dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:value</span>=<span class="string">"640"</span>/&gt;</span>           </span><br><span class="line">     <span class="tag">&lt;/<span class="name">application</span>&gt;</span>           </span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="https://github.com/JessYanCoding/AndroidAutoSize/blob/master/README-zh.md" target="_blank" rel="noopener">Github</a>ï¼Œæ›´å¤šè¯¦ç»†é›†æˆæ–‡æ¡£å»ºè®®æŸ¥çœ‹githubé“¾æ¥ã€‚githubä¸­æœ‰å¾ˆè¯¦ç»†çš„ç”¨æ³•ä»¥åŠä½¿ç”¨çš„é—®é¢˜ã€‚</p>
</blockquote>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é€‚é…å°±æ˜¯æ ¹æ®è®¾è®¡å›¾æ¥è¾¾åˆ°æŸä¸€ä¸ªç»´åº¦ä¸Šæ˜¾ç¤ºä¸€è‡´ï¼Œä¸èƒ½å¤Ÿè¯´ä½¿ç”¨é€‚é…å°±å¯ä»¥ä¸ä½¿ç”¨wrap_contentç­‰ï¼Œæ¯”å¦‚ä¸€ä¸ªé¡µé¢æ—¶ä¸Šä¸‹æ»‘åŠ¨çš„ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿æŒè®¾å¤‡åœ¨å®½çš„ç»´åº¦ä¸Šä¿æŒæ˜¾ç¤ºä¸€è‡´å³å¯ã€‚è€Œå¦‚æœä¸€ä¸ªä¸æ”¯æŒä¸Šä¸‹æ»‘åŠ¨çš„é¡µé¢ï¼Œåªéœ€è¦ä¿æŒè®¾å¤‡åœ¨é«˜çš„ç»´åº¦ä¸Šä¿æŒæ˜¾ç¤ºä¸€è‡´ã€‚</p>
<p>å¦‚ä½•é€‚é…ï¼Œå¦‚ä½•é€‰æ‹©é€‚é…çš„æ–¹æ¡ˆè¿˜æ˜¯è¦ç»“åˆè‡ªå·±ä¸šåŠ¡çš„éœ€æ±‚ã€‚å› ä¸ºå¼€å‘å°±æ˜¯è¦è¿½æ±‚é«˜æ•ˆå’Œç¨³å®šã€‚</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://blog.csdn.net/ghost_Programmer/article/details/50042805" target="_blank" rel="noopener">https://blog.csdn.net/ghost_Programmer/article/details/50042805</a></p>
<p><a href="https://juejin.im/post/5ae9cc3a5188253dc612842b" target="_blank" rel="noopener">https://juejin.im/post/5ae9cc3a5188253dc612842b</a></p>
<p><a href="https://blog.csdn.net/lmj623565791/article/details/45460089" target="_blank" rel="noopener">https://blog.csdn.net/lmj623565791/article/details/45460089</a></p>
<p><a href="https://juejin.im/post/5b7a29736fb9a019d53e7ee2" target="_blank" rel="noopener">https://juejin.im/post/5b7a29736fb9a019d53e7ee2</a></p>
<p><a href="https://mp.weixin.qq.com/s/SDHL26XgIjjlK-RLd_SSCw" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/SDHL26XgIjjlK-RLd_SSCw</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Androidå±å¹•é€‚é…</tag>
      </tags>
  </entry>
  <entry>
    <title>MongoDBå®‰è£…å’Œä½¿ç”¨</title>
    <url>/2019/05/11/MongoDB%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="MongoDBç®€ä»‹"><a href="#MongoDBç®€ä»‹" class="headerlink" title="MongoDBç®€ä»‹"></a>MongoDBç®€ä»‹</h1><p>MongoDB æ˜¯ç”±C++è¯­è¨€ç¼–å†™çš„ï¼Œæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„å¼€æºæ•°æ®åº“ç³»ç»Ÿã€‚</p>
<p>åœ¨é«˜è´Ÿè½½çš„æƒ…å†µä¸‹ï¼Œæ·»åŠ æ›´å¤šçš„èŠ‚ç‚¹ï¼Œå¯ä»¥ä¿è¯æœåŠ¡å™¨æ€§èƒ½ã€‚</p>
<p>MongoDB æ—¨åœ¨ä¸ºWEBåº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚</p>
<p>MongoDB å°†æ•°æ®å­˜å‚¨ä¸ºä¸€ä¸ªæ–‡æ¡£ï¼Œæ•°æ®ç»“æ„ç”±é”®å€¼(key=&gt;value)å¯¹ç»„æˆã€‚MongoDB æ–‡æ¡£ç±»ä¼¼äº JSON å¯¹è±¡ã€‚å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ï¼Œæ•°ç»„åŠæ–‡æ¡£æ•°ç»„ã€‚</p>
<a id="more"></a>
<h1 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h1><ul>
<li>MongoDBçš„æä¾›äº†ä¸€ä¸ªé¢å‘æ–‡æ¡£å­˜å‚¨ï¼Œæ“ä½œèµ·æ¥æ¯”è¾ƒç®€å•å’Œå®¹æ˜“ã€‚</li>
<li>ä½ å¯ä»¥åœ¨MongoDBè®°å½•ä¸­è®¾ç½®ä»»ä½•å±æ€§çš„ç´¢å¼• (å¦‚ï¼šFirstName=â€Sameerâ€,Address=â€8 Gandhi Roadâ€)æ¥å®ç°æ›´å¿«çš„æ’åºã€‚</li>
<li>ä½ å¯ä»¥é€šè¿‡æœ¬åœ°æˆ–è€…ç½‘ç»œåˆ›å»ºæ•°æ®é•œåƒï¼Œè¿™ä½¿å¾—MongoDBæœ‰æ›´å¼ºçš„æ‰©å±•æ€§ã€‚</li>
<li>å¦‚æœè´Ÿè½½çš„å¢åŠ ï¼ˆéœ€è¦æ›´å¤šçš„å­˜å‚¨ç©ºé—´å’Œæ›´å¼ºçš„å¤„ç†èƒ½åŠ›ï¼‰ ï¼Œå®ƒå¯ä»¥åˆ†å¸ƒåœ¨è®¡ç®—æœºç½‘ç»œä¸­çš„å…¶ä»–èŠ‚ç‚¹ä¸Šè¿™å°±æ˜¯æ‰€è°“çš„åˆ†ç‰‡ã€‚</li>
<li>Mongoæ”¯æŒä¸°å¯Œçš„æŸ¥è¯¢è¡¨è¾¾å¼ã€‚æŸ¥è¯¢æŒ‡ä»¤ä½¿ç”¨JSONå½¢å¼çš„æ ‡è®°ï¼Œå¯è½»æ˜“æŸ¥è¯¢æ–‡æ¡£ä¸­å†…åµŒçš„å¯¹è±¡åŠæ•°ç»„ã€‚</li>
<li>MongoDb ä½¿ç”¨update()å‘½ä»¤å¯ä»¥å®ç°æ›¿æ¢å®Œæˆçš„æ–‡æ¡£ï¼ˆæ•°æ®ï¼‰æˆ–è€…ä¸€äº›æŒ‡å®šçš„æ•°æ®å­—æ®µ ã€‚</li>
<li>Mongodbä¸­çš„Map/reduceä¸»è¦æ˜¯ç”¨æ¥å¯¹æ•°æ®è¿›è¡Œæ‰¹é‡å¤„ç†å’Œèšåˆæ“ä½œã€‚</li>
<li>Mapå’ŒReduceã€‚Mapå‡½æ•°è°ƒç”¨emit(key,value)éå†é›†åˆä¸­æ‰€æœ‰çš„è®°å½•ï¼Œå°†keyä¸valueä¼ ç»™Reduceå‡½æ•°è¿›è¡Œå¤„ç†ã€‚</li>
<li>Mapå‡½æ•°å’ŒReduceå‡½æ•°æ˜¯ä½¿ç”¨Javascriptç¼–å†™çš„ï¼Œå¹¶å¯ä»¥é€šè¿‡db.runCommandæˆ–mapreduceå‘½ä»¤æ¥æ‰§è¡ŒMapReduceæ“ä½œã€‚</li>
<li>GridFSæ˜¯MongoDBä¸­çš„ä¸€ä¸ªå†…ç½®åŠŸèƒ½ï¼Œå¯ä»¥ç”¨äºå­˜æ”¾å¤§é‡å°æ–‡ä»¶ã€‚</li>
<li>MongoDBå…è®¸åœ¨æœåŠ¡ç«¯æ‰§è¡Œè„šæœ¬ï¼Œå¯ä»¥ç”¨Javascriptç¼–å†™æŸä¸ªå‡½æ•°ï¼Œç›´æ¥åœ¨æœåŠ¡ç«¯æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥æŠŠå‡½æ•°çš„å®šä¹‰å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œä¸‹æ¬¡ç›´æ¥è°ƒç”¨å³å¯ã€‚</li>
<li>MongoDBæ”¯æŒå„ç§ç¼–ç¨‹è¯­è¨€:RUBYï¼ŒPYTHONï¼ŒJAVAï¼ŒC++ï¼ŒPHPï¼ŒC#ç­‰å¤šç§è¯­è¨€ã€‚</li>
<li>MongoDBå®‰è£…ç®€å•ã€‚</li>
</ul>
<h1 id="å®‰è£…MongoDB-Community-Edition"><a href="#å®‰è£…MongoDB-Community-Edition" class="headerlink" title="å®‰è£…MongoDB Community Edition"></a>å®‰è£…MongoDB Community Edition</h1><p>æœ¬æ–‡åªä»‹ç»Macå®‰è£…ï¼Œå…¶ä½™å®‰è£…æ–¹æ³•è¯·æŸ¥é˜…ï¼š<a href="https://docs.mongodb.com/manual/administration/install-community/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/administration/install-community/</a></p>
<p>ä½¿ç”¨Homebrewå®‰è£…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew tap mongodb/brew</span><br><span class="line">$ brew install mongodb-community@4.0</span><br><span class="line">==&gt; Caveats</span><br><span class="line">To have launchd start mongodb/brew/mongodb-community now and restart at login:</span><br><span class="line">  brew services start mongodb/brew/mongodb-community</span><br><span class="line">Or, <span class="keyword">if</span> you don<span class="string">'t want/need a background service you can just run:</span></span><br><span class="line"><span class="string">  mongod --config /usr/local/etc/mongod.conf</span></span><br><span class="line"><span class="string">==&gt; Summary</span></span><br><span class="line"><span class="string">ğŸº  /usr/local/Cellar/mongodb-community/4.0.9: 20 files, 221.0MB, built in 23 seconds</span></span><br></pre></td></tr></table></figure>
<p>å®‰è£…åå¯æŸ¥çœ‹åˆ°åé¢è¿™æ®µæ–‡å­—ï¼Œä¸ºMongoDBçš„ä¸€äº›é…ç½®æ–‡ä»¶è·¯å¾„</p>
<ul>
<li>the <a href="https://docs.mongodb.com/manual/reference/configuration-options/" target="_blank" rel="noopener">configuration file</a> (<code>/usr/local/etc/mongod.conf</code>)</li>
<li>the <a href="https://docs.mongodb.com/manual/reference/configuration-options/#systemLog.path" target="_blank" rel="noopener"><code>log directory path</code></a> (<code>/usr/local/var/log/mongodb</code>)</li>
<li>the <a href="https://docs.mongodb.com/manual/reference/configuration-options/#storage.dbPath" target="_blank" rel="noopener"><code>data directory path</code></a> (<code>/usr/local/var/mongodb</code>)</li>
</ul>
<h1 id="MongoDB-æ•°æ®ç±»å‹"><a href="#MongoDB-æ•°æ®ç±»å‹" class="headerlink" title="MongoDB æ•°æ®ç±»å‹"></a>MongoDB æ•°æ®ç±»å‹</h1><table>
<thead>
<tr>
<th style="text-align:left">æ•°æ®ç±»å‹</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">String</td>
<td style="text-align:left">å­—ç¬¦ä¸²ã€‚å­˜å‚¨æ•°æ®å¸¸ç”¨çš„æ•°æ®ç±»å‹ã€‚åœ¨ MongoDB ä¸­ï¼ŒUTF-8 ç¼–ç çš„å­—ç¬¦ä¸²æ‰æ˜¯åˆæ³•çš„ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Integer</td>
<td style="text-align:left">æ•´å‹æ•°å€¼ã€‚ç”¨äºå­˜å‚¨æ•°å€¼ã€‚æ ¹æ®ä½ æ‰€é‡‡ç”¨çš„æœåŠ¡å™¨ï¼Œå¯åˆ†ä¸º 32 ä½æˆ– 64 ä½ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Boolean</td>
<td style="text-align:left">å¸ƒå°”å€¼ã€‚ç”¨äºå­˜å‚¨å¸ƒå°”å€¼ï¼ˆçœŸ/å‡ï¼‰ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Double</td>
<td style="text-align:left">åŒç²¾åº¦æµ®ç‚¹å€¼ã€‚ç”¨äºå­˜å‚¨æµ®ç‚¹å€¼ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Min/Max keys</td>
<td style="text-align:left">å°†ä¸€ä¸ªå€¼ä¸ BSONï¼ˆäºŒè¿›åˆ¶çš„ JSONï¼‰å…ƒç´ çš„æœ€ä½å€¼å’Œæœ€é«˜å€¼ç›¸å¯¹æ¯”ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Arrays</td>
<td style="text-align:left">ç”¨äºå°†æ•°ç»„æˆ–åˆ—è¡¨æˆ–å¤šä¸ªå€¼å­˜å‚¨ä¸ºä¸€ä¸ªé”®ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Timestamp</td>
<td style="text-align:left">æ—¶é—´æˆ³ã€‚è®°å½•æ–‡æ¡£ä¿®æ”¹æˆ–æ·»åŠ çš„å…·ä½“æ—¶é—´ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Object</td>
<td style="text-align:left">ç”¨äºå†…åµŒæ–‡æ¡£ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Null</td>
<td style="text-align:left">ç”¨äºåˆ›å»ºç©ºå€¼ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Symbol</td>
<td style="text-align:left">ç¬¦å·ã€‚è¯¥æ•°æ®ç±»å‹åŸºæœ¬ä¸Šç­‰åŒäºå­—ç¬¦ä¸²ç±»å‹ï¼Œä½†ä¸åŒçš„æ˜¯ï¼Œå®ƒä¸€èˆ¬ç”¨äºé‡‡ç”¨ç‰¹æ®Šç¬¦å·ç±»å‹çš„è¯­è¨€ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Date</td>
<td style="text-align:left">æ—¥æœŸæ—¶é—´ã€‚ç”¨ UNIX æ—¶é—´æ ¼å¼æ¥å­˜å‚¨å½“å‰æ—¥æœŸæˆ–æ—¶é—´ã€‚ä½ å¯ä»¥æŒ‡å®šè‡ªå·±çš„æ—¥æœŸæ—¶é—´ï¼šåˆ›å»º Date å¯¹è±¡ï¼Œä¼ å…¥å¹´æœˆæ—¥ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Object ID</td>
<td style="text-align:left">å¯¹è±¡ IDã€‚ç”¨äºåˆ›å»ºæ–‡æ¡£çš„ IDã€‚</td>
</tr>
<tr>
<td style="text-align:left">Binary Data</td>
<td style="text-align:left">äºŒè¿›åˆ¶æ•°æ®ã€‚ç”¨äºå­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Code</td>
<td style="text-align:left">ä»£ç ç±»å‹ã€‚ç”¨äºåœ¨æ–‡æ¡£ä¸­å­˜å‚¨ JavaScript ä»£ç ã€‚</td>
</tr>
<tr>
<td style="text-align:left">Regular expression</td>
<td style="text-align:left">æ­£åˆ™è¡¨è¾¾å¼ç±»å‹ã€‚ç”¨äºå­˜å‚¨æ­£åˆ™è¡¨è¾¾å¼ã€‚</td>
</tr>
</tbody>
</table>
<h1 id="MongoDBæ¦‚å¿µ"><a href="#MongoDBæ¦‚å¿µ" class="headerlink" title="MongoDBæ¦‚å¿µ"></a>MongoDBæ¦‚å¿µ</h1><h2 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h2><p>ä¸€ä¸ªmongodbä¸­å¯ä»¥å»ºç«‹å¤šä¸ªæ•°æ®åº“ã€‚</p>
<p>MongoDBçš„é»˜è®¤æ•°æ®åº“ä¸ºâ€dbâ€ï¼Œè¯¥æ•°æ®åº“å­˜å‚¨åœ¨dataç›®å½•ä¸­ã€‚</p>
<p>MongoDBçš„å•ä¸ªå®ä¾‹å¯ä»¥å®¹çº³å¤šä¸ªç‹¬ç«‹çš„æ•°æ®åº“ï¼Œæ¯ä¸€ä¸ªéƒ½æœ‰è‡ªå·±çš„é›†åˆå’Œæƒé™ï¼Œä¸åŒçš„æ•°æ®åº“ä¹Ÿæ”¾ç½®åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚</p>
<p><strong>â€œshow dbsâ€</strong> å‘½ä»¤å¯ä»¥æ˜¾ç¤ºæ‰€æœ‰æ•°æ®çš„åˆ—è¡¨ã€‚</p>
<p>æ•°æ®åº“ä¹Ÿé€šè¿‡åå­—æ¥æ ‡è¯†ã€‚æ•°æ®åº“åå¯ä»¥æ˜¯æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„ä»»æ„UTF-8å­—ç¬¦ä¸²ã€‚</p>
<ul>
<li>ä¸èƒ½æ˜¯ç©ºå­—ç¬¦ä¸²ï¼ˆâ€â€)ã€‚</li>
<li>ä¸å¾—å«æœ‰â€™ â€˜ï¼ˆç©ºæ ¼)ã€.ã€$ã€/ã€\å’Œ\0 (ç©ºå®‡ç¬¦)ã€‚</li>
<li>åº”å…¨éƒ¨å°å†™ã€‚</li>
<li>æœ€å¤š64å­—èŠ‚ã€‚</li>
</ul>
<p>æœ‰ä¸€äº›æ•°æ®åº“åæ˜¯ä¿ç•™çš„ï¼Œå¯ä»¥ç›´æ¥è®¿é—®è¿™äº›æœ‰ç‰¹æ®Šä½œç”¨çš„æ•°æ®åº“ã€‚</p>
<ul>
<li><strong>admin</strong>ï¼š ä»æƒé™çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯â€rootâ€æ•°æ®åº“ã€‚è¦æ˜¯å°†ä¸€ä¸ªç”¨æˆ·æ·»åŠ åˆ°è¿™ä¸ªæ•°æ®åº“ï¼Œè¿™ä¸ªç”¨æˆ·è‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰æ•°æ®åº“çš„æƒé™ã€‚ä¸€äº›ç‰¹å®šçš„æœåŠ¡å™¨ç«¯å‘½ä»¤ä¹Ÿåªèƒ½ä»è¿™ä¸ªæ•°æ®åº“è¿è¡Œï¼Œæ¯”å¦‚åˆ—å‡ºæ‰€æœ‰çš„æ•°æ®åº“æˆ–è€…å…³é—­æœåŠ¡å™¨ã€‚</li>
<li><strong>local:</strong> è¿™ä¸ªæ•°æ®æ°¸è¿œä¸ä¼šè¢«å¤åˆ¶ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨é™äºæœ¬åœ°å•å°æœåŠ¡å™¨çš„ä»»æ„é›†åˆ</li>
<li><strong>config</strong>: å½“Mongoç”¨äºåˆ†ç‰‡è®¾ç½®æ—¶ï¼Œconfigæ•°æ®åº“åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œç”¨äºä¿å­˜åˆ†ç‰‡çš„ç›¸å…³ä¿¡æ¯ã€‚</li>
</ul>
<h2 id="æ–‡æ¡£"><a href="#æ–‡æ¡£" class="headerlink" title="æ–‡æ¡£"></a>æ–‡æ¡£</h2><p>æ–‡æ¡£æ˜¯ä¸€ä¸ªé”®å€¼(key-value)å¯¹(å³BSON)ã€‚MongoDB çš„æ–‡æ¡£ä¸éœ€è¦è®¾ç½®ç›¸åŒçš„å­—æ®µï¼Œå¹¶ä¸”ç›¸åŒçš„å­—æ®µä¸éœ€è¦ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œè¿™ä¸å…³ç³»å‹æ•°æ®åº“æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œä¹Ÿæ˜¯ MongoDB éå¸¸çªå‡ºçš„ç‰¹ç‚¹ã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„æ–‡æ¡£ä¾‹å­å¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">"site"</span>:<span class="string">"hackycy.github.io"</span>, <span class="attr">"name"</span>:<span class="string">"åšå®¢"</span>&#125;</span><br></pre></td></tr></table></figure>
<p>å…³ç³»å‹æ•°æ®åº“å’ŒMongoDBçš„ä¸€äº›åŒºåˆ«</p>
<table>
<thead>
<tr>
<th style="text-align:left">RDBMS</th>
<th style="text-align:left">MongoDB</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">æ•°æ®åº“</td>
<td style="text-align:left">æ•°æ®åº“</td>
</tr>
<tr>
<td style="text-align:left">è¡¨æ ¼</td>
<td style="text-align:left">é›†åˆ</td>
</tr>
<tr>
<td style="text-align:left">è¡Œ</td>
<td style="text-align:left">æ–‡æ¡£</td>
</tr>
<tr>
<td style="text-align:left">åˆ—</td>
<td style="text-align:left">å­—æ®µ</td>
</tr>
<tr>
<td style="text-align:left">è¡¨è”åˆ</td>
<td style="text-align:left">åµŒå…¥æ–‡æ¡£</td>
</tr>
<tr>
<td style="text-align:left">ä¸»é”®</td>
<td style="text-align:left">ä¸»é”® (MongoDB æä¾›äº† key ä¸º _id )</td>
</tr>
</tbody>
</table>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<ol>
<li>æ–‡æ¡£ä¸­çš„é”®/å€¼å¯¹æ˜¯æœ‰åºçš„ã€‚</li>
<li>æ–‡æ¡£ä¸­çš„å€¼ä¸ä»…å¯ä»¥æ˜¯åœ¨åŒå¼•å·é‡Œé¢çš„å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥æ˜¯å…¶ä»–å‡ ç§æ•°æ®ç±»å‹ï¼ˆç”šè‡³å¯ä»¥æ˜¯æ•´ä¸ªåµŒå…¥çš„æ–‡æ¡£)ã€‚</li>
<li>MongoDBåŒºåˆ†ç±»å‹å’Œå¤§å°å†™ã€‚</li>
<li>MongoDBçš„æ–‡æ¡£ä¸èƒ½æœ‰é‡å¤çš„é”®ã€‚</li>
<li>æ–‡æ¡£çš„é”®æ˜¯å­—ç¬¦ä¸²ã€‚é™¤äº†å°‘æ•°ä¾‹å¤–æƒ…å†µï¼Œé”®å¯ä»¥ä½¿ç”¨ä»»æ„UTF-8å­—ç¬¦ã€‚</li>
</ol>
<p>æ–‡æ¡£é”®å‘½åè§„èŒƒï¼š</p>
<ul>
<li>é”®ä¸èƒ½å«æœ‰\0 (ç©ºå­—ç¬¦)ã€‚è¿™ä¸ªå­—ç¬¦ç”¨æ¥è¡¨ç¤ºé”®çš„ç»“å°¾ã€‚</li>
<li>.å’Œ$æœ‰ç‰¹åˆ«çš„æ„ä¹‰ï¼Œåªæœ‰åœ¨ç‰¹å®šç¯å¢ƒä¸‹æ‰èƒ½ä½¿ç”¨ã€‚</li>
<li>ä»¥ä¸‹åˆ’çº¿â€_â€å¼€å¤´çš„é”®æ˜¯ä¿ç•™çš„(ä¸æ˜¯ä¸¥æ ¼è¦æ±‚çš„)ã€‚</li>
</ul>
<h2 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h2><p>é›†åˆå°±æ˜¯ MongoDB æ–‡æ¡£ç»„ï¼Œç±»ä¼¼äº RDBMS ï¼ˆå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼šRelational Database Management System)ä¸­çš„è¡¨æ ¼ã€‚</p>
<p>é›†åˆå­˜åœ¨äºæ•°æ®åº“ä¸­ï¼Œé›†åˆæ²¡æœ‰å›ºå®šçš„ç»“æ„ï¼Œè¿™æ„å‘³ç€ä½ åœ¨å¯¹é›†åˆå¯ä»¥æ’å…¥ä¸åŒæ ¼å¼å’Œç±»å‹çš„æ•°æ®ï¼Œä½†é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬æ’å…¥é›†åˆçš„æ•°æ®éƒ½ä¼šæœ‰ä¸€å®šçš„å…³è”æ€§ã€‚</p>
<h1 id="åŸºç¡€å‘½ä»¤"><a href="#åŸºç¡€å‘½ä»¤" class="headerlink" title="åŸºç¡€å‘½ä»¤"></a>åŸºç¡€å‘½ä»¤</h1><p><a href="https://docs.mongodb.com/manual/crud/" target="_blank" rel="noopener">https://docs.mongodb.com/manual/crud/</a></p>
<p><a href="http://www.runoob.com/mongodb/mongodb-operators.html" target="_blank" rel="noopener">http://www.runoob.com/mongodb/mongodb-operators.html</a></p>
<h2 id="å¯åŠ¨æœåŠ¡å™¨"><a href="#å¯åŠ¨æœåŠ¡å™¨" class="headerlink" title="å¯åŠ¨æœåŠ¡å™¨"></a>å¯åŠ¨æœåŠ¡å™¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mongod --dbpath <span class="string">"/usr/local/var/mongodb"</span></span><br></pre></td></tr></table></figure>
<p>mongodbå¸¸ç”¨å¯åŠ¨å‚æ•°</p>
<table>
<thead>
<tr>
<th style="text-align:left">å‚æ•°</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">â€“bind_ip</td>
<td style="text-align:left">ç»‘å®šæœåŠ¡IPï¼Œè‹¥ç»‘å®š127.0.0.1ï¼Œåˆ™åªèƒ½æœ¬æœºè®¿é—®ï¼Œä¸æŒ‡å®šé»˜è®¤æœ¬åœ°æ‰€æœ‰IP</td>
</tr>
<tr>
<td style="text-align:left">â€“logpath</td>
<td style="text-align:left">å®šä¹‰MongoDBæ—¥å¿—æ–‡ä»¶ï¼Œæ³¨æ„æ˜¯æŒ‡å®šæ–‡ä»¶ä¸æ˜¯ç›®å½•</td>
</tr>
<tr>
<td style="text-align:left">â€“logappend</td>
<td style="text-align:left">ä½¿ç”¨è¿½åŠ çš„æ–¹å¼å†™æ—¥å¿—</td>
</tr>
<tr>
<td style="text-align:left">â€“dbpath</td>
<td style="text-align:left">æŒ‡å®šæ•°æ®åº“è·¯å¾„</td>
</tr>
<tr>
<td style="text-align:left">â€“port</td>
<td style="text-align:left">æŒ‡å®šæœåŠ¡ç«¯å£å·ï¼Œé»˜è®¤ç«¯å£27017</td>
</tr>
<tr>
<td style="text-align:left">â€“serviceName</td>
<td style="text-align:left">æŒ‡å®šæœåŠ¡åç§°</td>
</tr>
<tr>
<td style="text-align:left">â€“serviceDisplayName</td>
<td style="text-align:left">æŒ‡å®šæœåŠ¡åç§°ï¼Œæœ‰å¤šä¸ªmongodbæœåŠ¡æ—¶æ‰§è¡Œã€‚</td>
</tr>
<tr>
<td style="text-align:left">â€“install</td>
<td style="text-align:left">æŒ‡å®šä½œä¸ºä¸€ä¸ªWindowsæœåŠ¡å®‰è£…ã€‚</td>
</tr>
</tbody>
</table>
<h2 id="å‘½ä»¤è¡Œè¿æ¥æœåŠ¡å™¨"><a href="#å‘½ä»¤è¡Œè¿æ¥æœåŠ¡å™¨" class="headerlink" title="å‘½ä»¤è¡Œè¿æ¥æœåŠ¡å™¨"></a>å‘½ä»¤è¡Œè¿æ¥æœåŠ¡å™¨</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mongo</span><br></pre></td></tr></table></figure>
<p>é»˜è®¤è¿æ¥çš„æ˜¯testæ•°æ®åº“</p>
<h2 id="æŸ¥è¯¢æ•°æ®åº“"><a href="#æŸ¥è¯¢æ•°æ®åº“" class="headerlink" title="æŸ¥è¯¢æ•°æ®åº“"></a>æŸ¥è¯¢æ•°æ®åº“</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; show dbs;</span><br><span class="line">admin   0.000GB</span><br><span class="line">config  0.000GB</span><br><span class="line"><span class="built_in">local</span>   0.000GB</span><br></pre></td></tr></table></figure>
<h2 id="åˆ‡æ¢-åˆ›å»ºæ•°æ®åº“"><a href="#åˆ‡æ¢-åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ‡æ¢/åˆ›å»ºæ•°æ®åº“"></a>åˆ‡æ¢/åˆ›å»ºæ•°æ®åº“</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; use shop;</span><br><span class="line">switched to db shop</span><br><span class="line">&gt; db</span><br><span class="line">shop</span><br></pre></td></tr></table></figure>
<h2 id="åˆ é™¤æ•°æ®åº“"><a href="#åˆ é™¤æ•°æ®åº“" class="headerlink" title="åˆ é™¤æ•°æ®åº“"></a>åˆ é™¤æ•°æ®åº“</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; db.dropDatabase()</span><br></pre></td></tr></table></figure>
<p>åˆ é™¤å½“å‰æ•°æ®åº“ï¼Œé»˜è®¤ä¸º testï¼Œä½ å¯ä»¥ä½¿ç”¨ db å‘½ä»¤æŸ¥çœ‹å½“å‰æ•°æ®åº“åã€‚</p>
<h2 id="åˆ›å»ºé›†åˆ"><a href="#åˆ›å»ºé›†åˆ" class="headerlink" title="åˆ›å»ºé›†åˆ"></a>åˆ›å»ºé›†åˆ</h2><p>è¯­æ³•ï¼š<code>db.createCollection(name, options)</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; db.createCollection(<span class="string">"users"</span>);</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥è¯¢é›†åˆ"><a href="#æŸ¥è¯¢é›†åˆ" class="headerlink" title="æŸ¥è¯¢é›†åˆ"></a>æŸ¥è¯¢é›†åˆ</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; show collections;</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥è¯¢æ•°æ®"><a href="#æŸ¥è¯¢æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ•°æ®"></a>æŸ¥è¯¢æ•°æ®</h2><p>è¯­æ³•ï¼š<code>db.é›†åˆå.find(æ¡ä»¶);</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; db.users.find();</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6f9a519ee5a000f483e6f"</span>), <span class="string">"name"</span> : <span class="string">"tom"</span>, <span class="string">"age"</span> : 20 &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6fe7419ee5a000f483e70"</span>), <span class="string">"name"</span> : <span class="string">"jack"</span>, <span class="string">"age"</span> : 25 &#125;</span><br><span class="line">&gt; db.users.find(&#123;age:&#123;<span class="variable">$gt</span>:21&#125;&#125;);</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6fe7419ee5a000f483e70"</span>), <span class="string">"name"</span> : <span class="string">"jack"</span>, <span class="string">"age"</span> : 25 &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>(&gt;) å¤§äº - $gt</li>
<li>(&lt;) å°äº - $lt</li>
<li>(&gt;=) å¤§äºç­‰äº - $gte</li>
<li>(&lt;= ) å°äºç­‰äº - $lte</li>
</ul>
<h2 id="æ·»åŠ æ•°æ®"><a href="#æ·»åŠ æ•°æ®" class="headerlink" title="æ·»åŠ æ•°æ®"></a>æ·»åŠ æ•°æ®</h2><p>è¯­æ³•ï¼š<code>db.é›†åˆå.save(å¯¹è±¡)</code>æˆ–è€…<code>db.é›†åˆå.insert(å¯¹è±¡)</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; db.users.save(&#123;name:<span class="string">"jack"</span>, age:20&#125;)</span><br><span class="line">WriteResult(&#123; <span class="string">"nInserted"</span> : 1 &#125;)</span><br><span class="line">&gt; show collections;</span><br><span class="line">users</span><br><span class="line">&gt; db.users.find();</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6f5e919ee5a000f483e6e"</span>), <span class="string">"name"</span> : <span class="string">"jack"</span>, <span class="string">"age"</span> : 20 &#125;</span><br></pre></td></tr></table></figure>
<p>mongoé»˜è®¤ä¼šç»™æˆ‘ä»¬åŠ å…¥<code>_id</code>ä½œä¸ºè¯¥æ–‡æ¡£å¯¹è±¡çš„å”¯ä¸€æ ‡è¯†</p>
<h2 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h2><p>è¯­æ³•ï¼š<code>db.é›†åˆå.remove(æ¡ä»¶å¯¹è±¡);</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; &gt; db.users.remove(&#123;name:<span class="string">"jack"</span>&#125;);</span><br><span class="line">WriteResult(&#123; <span class="string">"nRemoved"</span> : 1 &#125;)</span><br><span class="line">&gt; db.users.find();</span><br></pre></td></tr></table></figure>
<h2 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h2><p>è¯­æ³•ï¼š<code>db.é›†åˆå.update({åŒ¹é…æ¡ä»¶å¯¹è±¡},{$set:{ä¿®æ”¹åçš„å¯¹è±¡}});</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; db.users.save(&#123;name:<span class="string">"jack"</span>, age:20&#125;)</span><br><span class="line">WriteResult(&#123; <span class="string">"nInserted"</span> : 1 &#125;)</span><br><span class="line">&gt; db.users.update(&#123;name:<span class="string">'jack'</span>&#125;,&#123;<span class="variable">$set</span>:&#123;name:<span class="string">'tom'</span>&#125;&#125;);</span><br><span class="line">WriteResult(&#123; <span class="string">"nMatched"</span> : 1, <span class="string">"nUpserted"</span> : 0, <span class="string">"nModified"</span> : 1 &#125;)</span><br><span class="line">&gt; db.users.find();</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6f9a519ee5a000f483e6f"</span>), <span class="string">"name"</span> : <span class="string">"tom"</span>, <span class="string">"age"</span> : 20 &#125;</span><br></pre></td></tr></table></figure>
<h2 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h2><p><strong>skip()</strong></p>
<p>skip()æ–¹æ³•æ¥è·³è¿‡æŒ‡å®šæ•°é‡çš„æ•°æ®ï¼Œskipæ–¹æ³•åŒæ ·æ¥å—ä¸€ä¸ªæ•°å­—å‚æ•°ä½œä¸ºè·³è¿‡çš„è®°å½•æ¡æ•°ã€‚</p>
<p>è¯­æ³•ï¼š<code>db.é›†åˆå.find().skip(Number)</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; db.users.find();</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6f9a519ee5a000f483e6f"</span>), <span class="string">"name"</span> : <span class="string">"tom"</span>, <span class="string">"age"</span> : 20 &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6fe7419ee5a000f483e70"</span>), <span class="string">"name"</span> : <span class="string">"jack"</span>, <span class="string">"age"</span> : 25 &#125;</span><br><span class="line">&gt; db.users.find().skip(1);</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6fe7419ee5a000f483e70"</span>), <span class="string">"name"</span> : <span class="string">"jack"</span>, <span class="string">"age"</span> : 25 &#125;</span><br></pre></td></tr></table></figure>
<p><strong>limit()</strong></p>
<p>è¯¥æ–¹æ³•å¯ä»¥è¯»å–æŒ‡å®šæ•°é‡çš„æ•°æ®è®°å½•ã€‚</p>
<p>è¯­æ³•ï¼š<code>db.é›†åˆå.find().limit(Number)</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; db.users.find();</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6f9a519ee5a000f483e6f"</span>), <span class="string">"name"</span> : <span class="string">"tom"</span>, <span class="string">"age"</span> : 20 &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6fe7419ee5a000f483e70"</span>), <span class="string">"name"</span> : <span class="string">"jack"</span>, <span class="string">"age"</span> : 25 &#125;</span><br><span class="line">&gt; db.users.find().<span class="built_in">limit</span>(1);</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6f9a519ee5a000f483e6f"</span>), <span class="string">"name"</span> : <span class="string">"tom"</span>, <span class="string">"age"</span> : 20 &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥è¿ç”¨ã€‚</p>
</blockquote>
<h2 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h2><p>ä½¿ç”¨ sort() æ–¹æ³•å¯¹æ•°æ®è¿›è¡Œæ’åº</p>
<p>è¯­æ³•ï¼š<code>db.é›†åˆå.find().sort({key:æ’åºæ–¹å¼});</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; db.users.find()</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6f9a519ee5a000f483e6f"</span>), <span class="string">"name"</span> : <span class="string">"tom"</span>, <span class="string">"age"</span> : 20 &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6fe7419ee5a000f483e70"</span>), <span class="string">"name"</span> : <span class="string">"jack"</span>, <span class="string">"age"</span> : 25 &#125;</span><br><span class="line">&gt; db.users.find().sort(&#123;age:-1&#125;)</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6fe7419ee5a000f483e70"</span>), <span class="string">"name"</span> : <span class="string">"jack"</span>, <span class="string">"age"</span> : 25 &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5cd6f9a519ee5a000f483e6f"</span>), <span class="string">"name"</span> : <span class="string">"tom"</span>, <span class="string">"age"</span> : 20 &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ­£æ•°ä»£è¡¨å‡åºï¼Œè´Ÿæ•°ä»£è¡¨é™åº</p>
</blockquote>
<h2 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h2><p>èšåˆ(aggregate)ä¸»è¦ç”¨äºå¤„ç†æ•°æ®(è¯¸å¦‚ç»Ÿè®¡å¹³å‡å€¼,æ±‚å’Œç­‰)ï¼Œå¹¶è¿”å›è®¡ç®—åçš„æ•°æ®ç»“æœã€‚æœ‰ç‚¹ç±»ä¼¼sqlè¯­å¥ä¸­çš„ count(*)ã€‚</p>
<table>
<thead>
<tr>
<th style="text-align:left">è¡¨è¾¾å¼</th>
<th style="text-align:left">æè¿°</th>
<th style="text-align:left">å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">$sum</td>
<td style="text-align:left">è®¡ç®—æ€»å’Œã€‚</td>
<td style="text-align:left">db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, num_tutorial : {$sum : â€œ$likesâ€}}}])</td>
</tr>
<tr>
<td style="text-align:left">$avg</td>
<td style="text-align:left">è®¡ç®—å¹³å‡å€¼</td>
<td style="text-align:left">db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, num_tutorial : {$avg : â€œ$likesâ€}}}])</td>
</tr>
<tr>
<td style="text-align:left">$min</td>
<td style="text-align:left">è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å°å€¼ã€‚</td>
<td style="text-align:left">db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, num_tutorial : {$min : â€œ$likesâ€}}}])</td>
</tr>
<tr>
<td style="text-align:left">$max</td>
<td style="text-align:left">è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å¤§å€¼ã€‚</td>
<td style="text-align:left">db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, num_tutorial : {$max : â€œ$likesâ€}}}])</td>
</tr>
<tr>
<td style="text-align:left">$push</td>
<td style="text-align:left">åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚</td>
<td style="text-align:left">db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, url : {$push: â€œ$urlâ€}}}])</td>
</tr>
<tr>
<td style="text-align:left">$addToSet</td>
<td style="text-align:left">åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½†ä¸åˆ›å»ºå‰¯æœ¬ã€‚</td>
<td style="text-align:left">db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, url : {$addToSet : â€œ$urlâ€}}}])</td>
</tr>
<tr>
<td style="text-align:left">$first</td>
<td style="text-align:left">æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–ç¬¬ä¸€ä¸ªæ–‡æ¡£æ•°æ®ã€‚</td>
<td style="text-align:left">db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, first_url : {$first : â€œ$urlâ€}}}])</td>
</tr>
<tr>
<td style="text-align:left">$last</td>
<td style="text-align:left">æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–æœ€åä¸€ä¸ªæ–‡æ¡£æ•°æ®</td>
<td style="text-align:left">db.mycol.aggregate([{$group : {_id : â€œ$by_userâ€, last_url : {$last : â€œ$urlâ€}}}])</td>
</tr>
</tbody>
</table>
<h2 id="ç®¡é“çš„æ¦‚å¿µ"><a href="#ç®¡é“çš„æ¦‚å¿µ" class="headerlink" title="ç®¡é“çš„æ¦‚å¿µ"></a>ç®¡é“çš„æ¦‚å¿µ</h2><p>ç®¡é“åœ¨Unixå’ŒLinuxä¸­ä¸€èˆ¬ç”¨äºå°†å½“å‰å‘½ä»¤çš„è¾“å‡ºç»“æœä½œä¸ºä¸‹ä¸€ä¸ªå‘½ä»¤çš„å‚æ•°ã€‚</p>
<p>MongoDBçš„èšåˆç®¡é“å°†MongoDBæ–‡æ¡£åœ¨ä¸€ä¸ªç®¡é“å¤„ç†å®Œæ¯•åå°†ç»“æœä¼ é€’ç»™ä¸‹ä¸€ä¸ªç®¡é“å¤„ç†ã€‚ç®¡é“æ“ä½œæ˜¯å¯ä»¥é‡å¤çš„ã€‚</p>
<p>è¡¨è¾¾å¼ï¼šå¤„ç†è¾“å…¥æ–‡æ¡£å¹¶è¾“å‡ºã€‚è¡¨è¾¾å¼æ˜¯æ— çŠ¶æ€çš„ï¼Œåªèƒ½ç”¨äºè®¡ç®—å½“å‰èšåˆç®¡é“çš„æ–‡æ¡£ï¼Œä¸èƒ½å¤„ç†å…¶å®ƒçš„æ–‡æ¡£ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹èšåˆæ¡†æ¶ä¸­å¸¸ç”¨çš„å‡ ä¸ªæ“ä½œï¼š</p>
<ul>
<li><code>$project</code>ï¼šä¿®æ”¹è¾“å…¥æ–‡æ¡£çš„ç»“æ„ã€‚å¯ä»¥ç”¨æ¥é‡å‘½åã€å¢åŠ æˆ–åˆ é™¤åŸŸï¼Œä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºè®¡ç®—ç»“æœä»¥åŠåµŒå¥—æ–‡æ¡£ã€‚</li>
<li><code>$match</code>ï¼šç”¨äºè¿‡æ»¤æ•°æ®ï¼Œåªè¾“å‡ºç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚<code>$match</code>ä½¿ç”¨MongoDBçš„æ ‡å‡†æŸ¥è¯¢æ“ä½œã€‚</li>
<li><code>$limit</code>ï¼šç”¨æ¥é™åˆ¶MongoDBèšåˆç®¡é“è¿”å›çš„æ–‡æ¡£æ•°ã€‚</li>
<li><code>$skip</code>ï¼šåœ¨èšåˆç®¡é“ä¸­è·³è¿‡æŒ‡å®šæ•°é‡çš„æ–‡æ¡£ï¼Œå¹¶è¿”å›ä½™ä¸‹çš„æ–‡æ¡£ã€‚</li>
<li><code>$unwind</code>ï¼šå°†æ–‡æ¡£ä¸­çš„æŸä¸€ä¸ªæ•°ç»„ç±»å‹å­—æ®µæ‹†åˆ†æˆå¤šæ¡ï¼Œæ¯æ¡åŒ…å«æ•°ç»„ä¸­çš„ä¸€ä¸ªå€¼ã€‚</li>
<li><code>$group</code>ï¼šå°†é›†åˆä¸­çš„æ–‡æ¡£åˆ†ç»„ï¼Œå¯ç”¨äºç»Ÿè®¡ç»“æœã€‚</li>
<li><code>$sort</code>ï¼šå°†è¾“å…¥æ–‡æ¡£æ’åºåè¾“å‡ºã€‚</li>
<li><code>$geoNear</code>ï¼šè¾“å‡ºæ¥è¿‘æŸä¸€åœ°ç†ä½ç½®çš„æœ‰åºæ–‡æ¡£ã€‚</li>
</ul>
<p>æ±‚å½“å‰é›†åˆçš„è®°å½•æ•°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; db.users.find().count();</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<p>ç±»ä¼¼äºsqlè¯­å¥</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&gt; select name, count(*) from users group by name;</span><br></pre></td></tr></table></figure>
<h1 id="æ–¹ä¾¿ç»ƒä¹ çš„åŸºç¡€æ•°æ®"><a href="#æ–¹ä¾¿ç»ƒä¹ çš„åŸºç¡€æ•°æ®" class="headerlink" title="æ–¹ä¾¿ç»ƒä¹ çš„åŸºç¡€æ•°æ®"></a>æ–¹ä¾¿ç»ƒä¹ çš„åŸºç¡€æ•°æ®</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">db.users.save(&#123;contry:&apos;ä¸­å›½&apos;,name:&apos;å°æ˜&apos;,score:77&#125;);</span><br><span class="line">db.users.save(&#123;contry:&apos;ä¸­å›½&apos;,name:&apos;å°çº¢&apos;,score:88&#125;);</span><br><span class="line">db.users.save(&#123;contry:&apos;ä¸­å›½&apos;,name:&apos;å°å¼ &apos;,score:99&#125;);</span><br><span class="line">db.users.save(&#123;contry:&apos;ç¾å›½&apos;,name:&apos;jack&apos;,score:45&#125;);</span><br><span class="line">db.users.save(&#123;contry:&apos;ç¾å›½&apos;,name:&apos;rose&apos;,score:67&#125;);</span><br><span class="line">db.users.save(&#123;contry:&apos;ç¾å›½&apos;,name:&apos;mick&apos;,score:89&#125;);</span><br><span class="line"></span><br><span class="line">db.orders.insert([</span><br><span class="line">   &#123; &quot;_id&quot; : 1, &quot;item&quot; : &quot;almonds&quot;, &quot;price&quot; : 12, &quot;quantity&quot; : 2 &#125;,</span><br><span class="line">   &#123; &quot;_id&quot; : 2, &quot;item&quot; : &quot;pecans&quot;, &quot;price&quot; : 20, &quot;quantity&quot; : 1 &#125;,</span><br><span class="line">   &#123; &quot;_id&quot; : 3  &#125;</span><br><span class="line">]);</span><br><span class="line">db.inventory.insert([</span><br><span class="line">   &#123; &quot;_id&quot; : 1, &quot;sku&quot; : &quot;almonds&quot;, description: &quot;product 1&quot;, &quot;instock&quot; : 120 &#125;,</span><br><span class="line">   &#123; &quot;_id&quot; : 2, &quot;sku&quot; : &quot;bread&quot;, description: &quot;product 2&quot;, &quot;instock&quot; : 80 &#125;,</span><br><span class="line">   &#123; &quot;_id&quot; : 3, &quot;sku&quot; : &quot;cashews&quot;, description: &quot;product 3&quot;, &quot;instock&quot; : 60 &#125;,</span><br><span class="line">   &#123; &quot;_id&quot; : 4, &quot;sku&quot; : &quot;pecans&quot;, description: &quot;product 4&quot;, &quot;instock&quot; : 70 &#125;,</span><br><span class="line">   &#123; &quot;_id&quot; : 5, &quot;sku&quot;: null, description: &quot;Incomplete&quot; &#125;,</span><br><span class="line">   &#123; &quot;_id&quot; : 6 &#125;</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨å‘½ä»¤è¿˜æ˜¯å¾ˆä¸æ–¹ä¾¿ï¼Œå¼€å‘ä¸­å°½é‡ä½¿ç”¨ä¸€äº›ç•Œé¢å¼çš„å·¥å…·ï¼Œä¾‹å¦‚Navicat</p>
</blockquote>
]]></content>
      <categories>
        <category>MongoDB</category>
      </categories>
      <tags>
        <tag>MongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title>Android Manifestæƒé™æè¿°è¡¨</title>
    <url>/2019/05/11/Android-Manifest%E6%9D%83%E9%99%90%E6%8F%8F%E8%BF%B0%E8%A1%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Androidæƒé™æè¿°ï¼Œæ–¹ä¾¿è‡ªå·±æŸ¥æ‰¾ã€‚</p>
<a id="more"></a>
<p>1.android.permission.WRITE_USER_DICTIONARYå…è®¸åº”ç”¨ç¨‹åºå‘ç”¨æˆ·è¯å…¸ä¸­å†™å…¥æ–°è¯</p>
<p>2.android.permission.WRITE_SYNC_SETTINGSå†™å…¥Googleåœ¨çº¿åŒæ­¥è®¾ç½®</p>
<p>3.android.permission.WRITE_SOCIAL_STREAMè¯»å–ç”¨æˆ·çš„ç¤¾äº¤ä¿¡æ¯æµ</p>
<p>4.android.permission.WRITE_SMSå…è®¸ç¨‹åºå†™çŸ­ä¿¡</p>
<p>5.android.permission.WRITE_SETTINGSå…è®¸ç¨‹åºè¯»å–æˆ–å†™å…¥ç³»ç»Ÿè®¾ç½®</p>
<p>6.android.permission.WRITE_SECURE_SETTINGSå…è®¸åº”ç”¨ç¨‹åºè¯»å–æˆ–å†™å…¥å®‰å…¨ç³»ç»Ÿè®¾ç½®</p>
<p>7.android.permission.WRITE_PROFILEå…è®¸ç¨‹åºå†™å…¥ä¸ªäººèµ„æ–™æ•°æ®</p>
<p>8.com.android.browser.permission.WRITE_HISTORY_BOOKMARKSå…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºå†™(ä½†ä¸å¯è¯»)ç”¨æˆ·çš„æµè§ˆå†å²å’Œä¹¦ç­¾</p>
<p>9.android.permission.WRITE_GSERVICESå…è®¸ç¨‹åºä¿®æ”¹GoogleæœåŠ¡åœ°å›¾</p>
<p>10.android.permission.WRITE_EXTERNAL_STORAGEå…è®¸ç¨‹åºå†™å…¥å¤–éƒ¨å­˜å‚¨,å¦‚SDå¡ä¸Šå†™æ–‡ä»¶</p>
<p>11.android.permission.WRITE_CONTACTSå†™å…¥è”ç³»äºº,ä½†ä¸å¯è¯»å–</p>
<p>12.android.permission.WRITE_CALL_LOGå…è®¸ç¨‹åºå†™å…¥ï¼ˆä½†æ˜¯ä¸èƒ½è¯»ï¼‰ç”¨æˆ·çš„è”ç³»äººæ•°æ®</p>
<p>13.android.permission.WRITE_CALENDARå…è®¸ç¨‹åºå†™å…¥æ—¥ç¨‹ï¼Œä½†ä¸å¯è¯»å–</p>
<p>14.android.permission.WRITE_APN_SETTINGSå…è®¸ç¨‹åºå†™å…¥ç½‘ç»œGPRSæ¥å…¥ç‚¹è®¾ç½®</p>
<p>15.android.permission.WAKE_LOCKå…è®¸ç¨‹åºåœ¨æ‰‹æœºå±å¹•å…³é—­ååå°è¿›ç¨‹ä»ç„¶è¿è¡Œ</p>
<p>16.android.permission.VIBRATEå…è®¸ç¨‹åºæŒ¯åŠ¨</p>
<p>17.android.permission.USE_SIPå…è®¸ç¨‹åºä½¿ç”¨SIPè§†é¢‘æœåŠ¡</p>
<p>18.android.permission.USE_CREDENTIALSå…è®¸ç¨‹åºè¯·æ±‚éªŒè¯ä»AccountManager</p>
<p>19.android.permission.UPDATE_DEVICE_STATSå…è®¸ç¨‹åºæ›´æ–°è®¾å¤‡çŠ¶æ€</p>
<p>20.com.android.launcher.permission.UNINSTALL_SHORTCUTåˆ é™¤å¿«æ·æ–¹å¼</p>
<p>21.android.permission.TRANSMIT_IRå…è®¸ä½¿ç”¨è®¾å¤‡çš„çº¢å¤–å‘å°„å™¨ï¼Œå¦‚æœå¯ç”¨</p>
<p>22.android.permission.SYSTEM_ALERT_WINDOWå…è®¸ç¨‹åºæ˜¾ç¤ºç³»ç»Ÿçª—å£</p>
<p>23.android.permission.SUBSCRIBED_FEEDS_WRITEå…è®¸ç¨‹åºå†™å…¥æˆ–ä¿®æ”¹è®¢é˜…å†…å®¹çš„æ•°æ®åº“</p>
<p>24.android.permission.SUBSCRIBED_FEEDS_READå…è®¸ç¨‹åºè®¿é—®è®¢é˜…ä¿¡æ¯çš„æ•°æ®åº“</p>
<p>22.android.permission.STATUS_BARå…è®¸ç¨‹åºæ‰“å¼€ã€å…³é—­ã€ç¦ç”¨çŠ¶æ€æ </p>
<p>23.android.permission.SIGNAL_PERSISTENT_PROCESSESå…è®¸ç¨‹åºå‘é€ä¸€ä¸ªæ°¸ä¹…çš„è¿›ç¨‹ä¿¡å·</p>
<p>24.android.permission.SET_WALLPAPER_HINTSå…è®¸ç¨‹åºè®¾ç½®å£çº¸å»ºè®®</p>
<p>25.android.permission.SET_WALLPAPERå…è®¸ç¨‹åºè®¾ç½®æ¡Œé¢å£çº¸</p>
<p>26.android.permission.SET_TIME_ZONEå…è®¸ç¨‹åºè®¾ç½®ç³»ç»Ÿæ—¶åŒº</p>
<p>27.android.permission.SET_TIMEå…è®¸ç¨‹åºè®¾ç½®ç³»ç»Ÿæ—¶é—´</p>
<p>28.android.permission.SET_PROCESS_LIMITå…è®¸ç¨‹åºè®¾ç½®æœ€å¤§çš„è¿›ç¨‹æ•°é‡çš„é™åˆ¶</p>
<p>29.android.permission.SET_PREFERRED_APPLICATIONSå…è®¸ç¨‹åºè®¾ç½®åº”ç”¨çš„å‚æ•°ï¼Œå·²ä¸å†å·¥ä½œå…·ä½“æŸ¥çœ‹addPackageToPreferred(String) ä»‹ç»</p>
<p>30.android.permission.SET_POINTER_SPEEDæ— æ³•è¢«ç¬¬ä¸‰æ–¹åº”ç”¨è·å¾—ï¼Œç³»ç»Ÿæƒé™</p>
<p>31.android.permission.SET_ORIENTATIONå…è®¸ç¨‹åºè®¾ç½®å±å¹•æ–¹å‘ä¸ºæ¨ªå±æˆ–æ ‡å‡†æ–¹å¼æ˜¾ç¤ºï¼Œä¸ç”¨äºæ™®é€šåº”ç”¨</p>
<p>32.android.permission.SET_DEBUG_APPå…è®¸ç¨‹åºè®¾ç½®è°ƒè¯•ç¨‹åºï¼Œä¸€èˆ¬ç”¨äºå¼€å‘</p>
<p>33.android.permission.SET_ANIMATION_SCALEå…è®¸ç¨‹åºè®¾ç½®å…¨å±€åŠ¨ç”»ç¼©æ”¾</p>
<p>34.android.permission.SET_ALWAYS_FINISHå…è®¸ç¨‹åºè®¾ç½®ç¨‹åºåœ¨åå°æ˜¯å¦æ€»æ˜¯é€€å‡º</p>
<p>36.com.android.alarm.permission.SET_ALARMå…è®¸ç¨‹åºè®¾ç½®é—¹é“ƒæé†’</p>
<p>37.android.permission.SET_ACTIVITY_WATCHERå…è®¸ç¨‹åºè®¾ç½®Activityè§‚å¯Ÿå™¨ä¸€èˆ¬ç”¨äºmonkeyæµ‹è¯•</p>
<p>38.android.permission.SEND_SMSå…è®¸ç¨‹åºå‘é€çŸ­ä¿¡</p>
<p>39.android.permission.SEND_RESPOND_VIA_MESSAGEå…è®¸ç”¨æˆ·åœ¨æ¥ç”µçš„æ—¶å€™ç”¨ä½ çš„åº”ç”¨è¿›è¡Œå³æ—¶çš„çŸ­ä¿¡æ¯å›å¤ã€‚</p>
<p>40.android.permission.RESTART_PACKAGESå…è®¸ç¨‹åºç»“æŸä»»åŠ¡é€šè¿‡restartPackage(String)æ–¹æ³•ï¼Œè¯¥æ–¹å¼å°†åœ¨å¤–æ¥æ”¾å¼ƒ</p>
<p>41.android.permission.REORDER_TASKSå…è®¸ç¨‹åºé‡æ–°æ’åºç³»ç»ŸZè½´è¿è¡Œä¸­çš„ä»»åŠ¡</p>
<p>42.android.permission.RECORD_AUDIOå…è®¸ç¨‹åºå½•åˆ¶å£°éŸ³é€šè¿‡æ‰‹æœºæˆ–è€³æœºçš„éº¦å…‹</p>
<p>43.android.permission.RECEIVE_WAP_PUSHå…è®¸ç¨‹åºæ¥æ”¶WAP PUSHä¿¡æ¯</p>
<p>44.android.permission.RECEIVE_SMSå…è®¸ç¨‹åºæ¥æ”¶çŸ­ä¿¡</p>
<p>45.android.permission.RECEIVE_MMSå…è®¸ç¨‹åºæ¥æ”¶å½©ä¿¡</p>
<p>46.android.permission.RECEIVE_BOOT_COMPLETEDå…è®¸ç¨‹åºå¼€æœºè‡ªåŠ¨è¿è¡Œ</p>
<p>47.android.permission.REBOOTå…è®¸ç¨‹åºé‡æ–°å¯åŠ¨è®¾å¤‡</p>
<p>48.android.permission.READ_USER_DICTIONARYä»ä¸€ä¸ªæä¾›å™¨ä¸­è·å–æ•°æ®ï¼Œé’ˆå¯¹å¯¹åº”çš„æä¾›å™¨ï¼Œåº”ç”¨ç¨‹åºéœ€è¦â€œè¯»è®¿é—®æƒé™â€</p>
<p>49.android.permission.READ_SYNC_STATSå…è®¸ç¨‹åºè¯»å–åŒæ­¥çŠ¶æ€ï¼Œè·å¾—Googleåœ¨çº¿åŒæ­¥çŠ¶æ€</p>
<p>50.android.permission.READ_SYNC_SETTINGSå…è®¸ç¨‹åºè¯»å–åŒæ­¥è®¾ç½®ï¼Œè¯»å–Googleåœ¨çº¿åŒæ­¥è®¾ç½®</p>
<p>51.android.permission.READ_SOCIAL_STREAMè¯»å–ç”¨æˆ·çš„ç¤¾äº¤ä¿¡æ¯æµ</p>
<p>52.android.permission.READ_SMSå…è®¸ç¨‹åºè¯»å–çŸ­ä¿¡å†…å®¹</p>
<p>53.android.permission.READ_PROFILEè®¿é—®ç”¨æˆ·ä¸ªäººèµ„æ–™</p>
<p>54.android.permission.READ_PHONE_STATEå…è®¸ç¨‹åºè®¿é—®ç”µè¯çŠ¶æ€</p>
<p>55.android.permission.READ_LOGSå…è®¸ç¨‹åºè¯»å–ç³»ç»Ÿåº•å±‚æ—¥å¿—</p>
<p>56.android.permission.READ_INPUT_STATEå…è®¸ç¨‹åºè¯»å–å½“å‰é”®çš„è¾“å…¥çŠ¶æ€ï¼Œä»…ç”¨äºç³»ç»Ÿ</p>
<p>57.com.android.browser.permission.READ_HISTORY_BOOKMARKSå…è®¸ç¨‹åºè¯»å–æµè§ˆå™¨æ”¶è—å¤¹å’Œå†å²è®°å½•</p>
<p>58.android.permission.READ_FRAME_BUFFERå…è®¸ç¨‹åºè¯»å–å¸§ç¼“å­˜ç”¨äºå±å¹•æˆªå›¾</p>
<p>59.android.permission.READ_EXTERNAL_STORAGEç¨‹åºå¯ä»¥è¯»å–è®¾å¤‡å¤–éƒ¨å­˜å‚¨ç©ºé—´ï¼ˆå†…ç½®SDcardå’Œå¤–ç½®SDCardï¼‰çš„æ–‡ä»¶ï¼Œå¦‚æœæ‚¨çš„Appå·²ç»æ·»åŠ äº†â€œWRITE_EXTERNAL_STORAGE â€æƒé™ ï¼Œåˆ™å°±æ²¡å¿…è¦æ·»åŠ è¯»çš„æƒé™äº†ï¼Œå†™æƒé™å·²ç»åŒ…å«äº†è¯»æƒé™äº†ã€‚</p>
<p>60.android.permission.READ_CONTACTSå…è®¸ç¨‹åºè®¿é—®è”ç³»äººé€šè®¯å½•ä¿¡æ¯</p>
<p>61.android.permission.READ_CALL_LOGè¯»å–é€šè¯è®°å½•</p>
<p>62.android.permission.READ_CALENDARå…è®¸ç¨‹åºè¯»å–ç”¨æˆ·çš„æ—¥ç¨‹ä¿¡æ¯</p>
<p>63.android.permission.PROCESS_OUTGOING_CALLSå…è®¸ç¨‹åºç›‘è§†ï¼Œä¿®æ”¹æˆ–æ”¾å¼ƒæ’­å‡ºç”µè¯</p>
<p>64.android.permission.PERSISTENT_ACTIVITYå…è®¸ç¨‹åºåˆ›å»ºä¸€ä¸ªæ°¸ä¹…çš„Activityï¼Œè¯¥åŠŸèƒ½æ ‡è®°ä¸ºå°†æ¥å°†è¢«ç§»é™¤</p>
<p>65.android.permission.NFCå…è®¸ç¨‹åºæ‰§è¡ŒNFCè¿‘è·ç¦»é€šè®¯æ“ä½œï¼Œç”¨äºç§»åŠ¨æ”¯æŒ</p>
<p>66.android.permission.MOUNT_UNMOUNT_FILESYSTEMSå…è®¸ç¨‹åºæŒ‚è½½ã€åæŒ‚è½½å¤–éƒ¨æ–‡ä»¶ç³»ç»Ÿ</p>
<p>67.android.permission.MOUNT_FORMAT_FILESYSTEMSå…è®¸ç¨‹åºæ ¼å¼åŒ–å¯ç§»åŠ¨æ–‡ä»¶ç³»ç»Ÿï¼Œæ¯”å¦‚æ ¼å¼åŒ–æ¸…ç©ºSDå¡</p>
<p>68.android.permission.MODIFY_PHONE_STATEå…è®¸ç¨‹åºä¿®æ”¹ç”µè¯çŠ¶æ€ï¼Œå¦‚é£è¡Œæ¨¡å¼ï¼Œä½†ä¸åŒ…å«æ›¿æ¢ç³»ç»Ÿæ‹¨å·å™¨ç•Œé¢</p>
<p>69.android.permission.MODIFY_AUDIO_SETTINGSå…è®¸ç¨‹åºä¿®æ”¹å£°éŸ³è®¾ç½®ä¿¡æ¯</p>
<p>70.android.permission.MEDIA_CONTENT_CONTROLå…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºçŸ¥é“ä»€ä¹ˆæ˜¯æ’­æ”¾å’Œæ§åˆ¶å…¶å†…å®¹ã€‚ä¸è¢«ç¬¬ä¸‰æ–¹åº”ç”¨ä½¿ç”¨ã€‚</p>
<p>71.android.permission.MASTER_CLEARå…è®¸ç¨‹åºæ‰§è¡Œè½¯æ ¼å¼åŒ–ï¼Œåˆ é™¤ç³»ç»Ÿé…ç½®ä¿¡æ¯</p>
<p>72.android.permission.MANAGE_DOCUMENTSå…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºæ¥ç®¡ç†æ–‡æ¡£çš„è®¿é—®ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªæ–‡æ¡£é€‰æ‹©å™¨éƒ¨åˆ†</p>
<p>73.android.permission.MANAGE_APP_TOKENSç®¡ç†åˆ›å»ºã€æ‘§æ¯ã€Zè½´é¡ºåºï¼Œä»…ç”¨äºç³»ç»Ÿ</p>
<p>74.android.permission.MANAGE_ACCOUNTSå…è®¸ç¨‹åºç®¡ç†AccountManagerä¸­çš„è´¦æˆ·åˆ—è¡¨</p>
<p>75.android.permission.LOCATION_HARDWAREå…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®šä½åŠŸèƒ½çš„ç¡¬ä»¶ï¼Œä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹åº”ç”¨</p>
<p>76.android.permission.KILL_BACKGROUND_PROCESSESå…è®¸ç¨‹åºè°ƒç”¨killBackgroundProcesses(String).æ–¹æ³•ç»“æŸåå°è¿›ç¨‹</p>
<p>77.android.permission.INTERNETå…è®¸ç¨‹åºè®¿é—®ç½‘ç»œè¿æ¥ï¼Œå¯èƒ½äº§ç”ŸGPRSæµé‡</p>
<p>78.android.permission.INTERNAL_SYSTEM_WINDOWå…è®¸ç¨‹åºæ‰“å¼€å†…éƒ¨çª—å£ï¼Œä¸å¯¹ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºå¼€æ”¾æ­¤æƒé™</p>
<p>79.com.android.launcher.permission.INSTALL_SHORTCUTåˆ›å»ºå¿«æ·æ–¹å¼</p>
<p>80.android.permission.INSTALL_PACKAGESå…è®¸ç¨‹åºå®‰è£…åº”ç”¨</p>
<p>81.android.permission.INSTALL_LOCATION_PROVIDERå…è®¸ç¨‹åºå®‰è£…å®šä½æä¾›</p>
<p>82.android.permission.INJECT_EVENTSå…è®¸ç¨‹åºè®¿é—®æœ¬ç¨‹åºçš„åº•å±‚äº‹ä»¶ï¼Œè·å–æŒ‰é”®ã€è½¨è¿¹çƒçš„äº‹ä»¶æµ</p>
<p>83.android.permission.HARDWARE_TESTå…è®¸ç¨‹åºè®¿é—®ç¡¬ä»¶è¾…åŠ©è®¾å¤‡ï¼Œç”¨äºç¡¬ä»¶æµ‹è¯•</p>
<p>84.android.permission.GLOBAL_SEARCHå…è®¸ç¨‹åºå…è®¸å…¨å±€æœç´¢</p>
<p>85.android.permission.GET_TOP_ACTIVITY_INFOå…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºæ£€ç´¢ç§æœ‰ä¿¡æ¯æ˜¯å½“å‰æœ€é¡¶çº§çš„æ´»åŠ¨ï¼Œä¸è¢«ç¬¬ä¸‰æ–¹åº”ç”¨ä½¿ç”¨</p>
<p>86.android.permission.GET_TASKSå…è®¸ç¨‹åºè·å–ä»»åŠ¡ä¿¡æ¯</p>
<p>87.android.permission.GET_PACKAGE_SIZEå…è®¸ç¨‹åºè·å–åº”ç”¨çš„æ–‡ä»¶å¤§å°</p>
<p>88.android.permission.GET_ACCOUNTSå…è®¸ç¨‹åºè®¿é—®è´¦æˆ·Gmailåˆ—è¡¨</p>
<p>89.android.permission.FORCE_BACKå…è®¸ç¨‹åºå¼ºåˆ¶ä½¿ç”¨backåé€€æŒ‰é”®ï¼Œæ— è®ºActivityæ˜¯å¦åœ¨é¡¶å±‚</p>
<p>90.android.permission.FLASHLIGHTå…è®¸è®¿é—®é—ªå…‰ç¯</p>
<p>91.android.permission.FACTORY_TESTå…è®¸ç¨‹åºè¿è¡Œå·¥å‚æµ‹è¯•æ¨¡å¼</p>
<p>92.android.permission.EXPAND_STATUS_BARå…è®¸ç¨‹åºæ‰©å±•æˆ–æ”¶ç¼©çŠ¶æ€æ </p>
<p>93.android.permission.DUMPå…è®¸ç¨‹åºè·å–ç³»ç»Ÿdumpä¿¡æ¯ä»ç³»ç»ŸæœåŠ¡</p>
<p>94.android.permission.DISABLE_KEYGUARDå…è®¸ç¨‹åºç¦ç”¨é”®ç›˜é”</p>
<p>95.android.permission.DIAGNOSTICå…è®¸ç¨‹åºåˆ°RWåˆ°è¯Šæ–­èµ„æº</p>
<p>96.android.permission.DEVICE_POWERå…è®¸ç¨‹åºè®¿é—®åº•å±‚ç”µæºç®¡ç†</p>
<p>97.android.permission.DELETE_PACKAGESå…è®¸ç¨‹åºåˆ é™¤åº”ç”¨</p>
<p>98.android.permission.DELETE_CACHE_FILESå…è®¸ç¨‹åºåˆ é™¤ç¼“å­˜æ–‡ä»¶</p>
<p>99.android.permission.CONTROL_LOCATION_UPDATESå…è®¸ç¨‹åºè·å¾—ç§»åŠ¨ç½‘ç»œå®šä½ä¿¡æ¯æ”¹å˜</p>
<p>100.android.permission.CLEAR_APP_USER_DATAå…è®¸ç¨‹åºæ¸…é™¤ç”¨æˆ·æ•°æ®</p>
<p>101.android.permission.CLEAR_APP_CACHEå…è®¸ç¨‹åºæ¸…é™¤åº”ç”¨ç¼“å­˜</p>
<p>102.android.permission.CHANGE_WIFI_STATEå…è®¸ç¨‹åºæ”¹å˜WiFiçŠ¶æ€</p>
<p>103.android.permission.CHANGE_WIFI_MULTICAST_STATEå…è®¸ç¨‹åºæ”¹å˜WiFiå¤šæ’­çŠ¶æ€</p>
<p>104.android.permission.CHANGE_NETWORK_STATEå…è®¸ç¨‹åºæ”¹å˜ç½‘ç»œçŠ¶æ€,å¦‚æ˜¯å¦è”ç½‘</p>
<p>105.android.permission.CHANGE_CONFIGURATIONå…è®¸å½“å‰åº”ç”¨æ”¹å˜é…ç½®ï¼Œå¦‚å®šä½</p>
<p>106.android.permission.CHANGE_COMPONENT_ENABLED_STATEæ”¹å˜ç»„ä»¶æ˜¯å¦å¯ç”¨çŠ¶æ€</p>
<p>107.android.permission.CAPTURE_VIDEO_OUTPUTå…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºæ•è·è§†é¢‘è¾“å‡ºï¼Œä¸è¢«ç¬¬ä¸‰æ–¹åº”ç”¨ä½¿ç”¨</p>
<p>108.android.permission.CAPTURE_SECURE_VIDEO_OUTPUTå…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºæ•è·è§†é¢‘è¾“å‡ºã€‚ä¸è¢«ç¬¬ä¸‰æ–¹åº”ç”¨ä½¿ç”¨</p>
<p>109.android.permission.CAPTURE_AUDIO_OUTPUTå…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºæ•è·éŸ³é¢‘è¾“å‡ºã€‚ä¸è¢«ç¬¬ä¸‰æ–¹åº”ç”¨ä½¿ç”¨</p>
<p>110.android.permission.CAMERAå…è®¸ç¨‹åºè®¿é—®æ‘„åƒå¤´è¿›è¡Œæ‹ç…§</p>
<p>111.android.permission.CALL_PRIVILEGEDå…è®¸ç¨‹åºæ‹¨æ‰“ç”µè¯ï¼Œæ›¿æ¢ç³»ç»Ÿçš„æ‹¨å·å™¨ç•Œé¢</p>
<p>112.android.permission.CALL_PHONEå…è®¸ç¨‹åºä»éç³»ç»Ÿæ‹¨å·å™¨é‡Œæ‹¨æ‰“ç”µè¯</p>
<p>113.android.permission.BROADCAST_WAP_PUSHWAP PUSHæœåŠ¡æ”¶åˆ°åè§¦å‘ä¸€ä¸ªå¹¿æ’­</p>
<p>114.android.permission.BROADCAST_STICKYå…è®¸ç¨‹åºæ”¶åˆ°å¹¿æ’­åå¿«é€Ÿæ”¶åˆ°ä¸‹ä¸€ä¸ªå¹¿æ’­</p>
<p>115.android.permission.BROADCAST_SMSå…è®¸ç¨‹åºå½“æ”¶åˆ°çŸ­ä¿¡æ—¶è§¦å‘ä¸€ä¸ªå¹¿æ’­</p>
<p>116.android.permission.BROADCAST_PACKAGE_REMOVEDå…è®¸ç¨‹åºåˆ é™¤æ—¶å¹¿æ’­</p>
<p>117.android.permission.BRICKèƒ½å¤Ÿç¦ç”¨æ‰‹æœºï¼Œéå¸¸å±é™©ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯è®©æ‰‹æœºå˜æˆç –å¤´</p>
<p>118.android.permission.BLUETOOTH_PRIVILEGEDå…è®¸åº”ç”¨ç¨‹åºé…å¯¹è“ç‰™è®¾å¤‡ï¼Œè€Œæ— éœ€ç”¨æˆ·äº¤äº’ã€‚è¿™ä¸æ˜¯ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºå¯ç”¨ã€‚</p>
<p>119.android.permission.BLUETOOTH_ADMINå…è®¸ç¨‹åºè¿›è¡Œå‘ç°å’Œé…å¯¹æ–°çš„è“ç‰™è®¾å¤‡</p>
<p>120.android.permission.BLUETOOTHå…è®¸ç¨‹åºè¿æ¥é…å¯¹è¿‡çš„è“ç‰™è®¾å¤‡</p>
<p>121.android.permission.BIND_WALLPAPERå¿…é¡»é€šè¿‡WallpaperServiceæœåŠ¡æ¥è¯·æ±‚ï¼Œåªæœ‰ç³»ç»Ÿæ‰èƒ½ç”¨</p>
<p>122.android.permission.BIND_VPN_SERVICEç»‘å®šVPNæœåŠ¡å¿…é¡»é€šè¿‡VpnServiceæœåŠ¡æ¥è¯·æ±‚,åªæœ‰ç³»ç»Ÿæ‰èƒ½ç”¨</p>
<p>123.android.permission.BIND_TEXT_SERVICEå¿…é¡»è¦æ±‚textservice(ä¾‹å¦‚å— spellcheckerservice)ï¼Œä»¥ç¡®ä¿åªæœ‰ç³»ç»Ÿå¯ä»¥ç»‘å®šåˆ°å®ƒã€‚</p>
<p>124.android.permission.BIND_REMOTEVIEWSå¿…é¡»é€šè¿‡RemoteViewsServiceæœåŠ¡æ¥è¯·æ±‚ï¼Œåªæœ‰ç³»ç»Ÿæ‰èƒ½ç”¨</p>
<p>125.android.permission.BIND_PRINT_SERVICEå¿…é¡»è¦æ±‚ç”±printserviceï¼Œä»¥ç¡®ä¿åªæœ‰ç³»ç»Ÿå¯ä»¥ç»‘å®šåˆ°å®ƒã€‚</p>
<p>126.android.permission.BIND_NOTIFICATION_LISTENER_SERVICEå¿…é¡»è¦æ±‚ç”±notificationlistenerserviceï¼Œä»¥ç¡®ä¿åªæœ‰ç³»ç»Ÿå¯ä»¥ç»‘å®šåˆ°å®ƒã€‚</p>
<p>127.android.permission.BIND_NFC_SERVICEç”±hostapduserviceæˆ–offhostapduserviceå¿…é¡»ç¡®ä¿åªæœ‰ç³»ç»Ÿå¯ä»¥ç»‘å®šåˆ°å®ƒã€‚</p>
<p>128.android.permission.BIND_INPUT_METHODè¯·æ±‚InputMethodServiceæœåŠ¡ï¼Œåªæœ‰ç³»ç»Ÿæ‰èƒ½ä½¿ç”¨</p>
<p>129.android.permission.BIND_DEVICE_ADMINè¯·æ±‚ç³»ç»Ÿç®¡ç†å‘˜æ¥æ”¶è€…receiverï¼Œåªæœ‰ç³»ç»Ÿæ‰èƒ½ä½¿ç”¨</p>
<p>130.android.permission.BIND_APPWIDGETå…è®¸ç¨‹åºå‘Šè¯‰appWidgetæœåŠ¡éœ€è¦è®¿é—®å°æ’ä»¶çš„æ•°æ®åº“ï¼Œåªæœ‰éå¸¸å°‘çš„åº”ç”¨æ‰ç”¨åˆ°æ­¤æƒé™</p>
<p>131.android.permission.BIND_ACCESSIBILITY_SERVICEè¯·æ±‚accessibilityserviceæœåŠ¡ï¼Œä»¥ç¡®ä¿åªæœ‰ç³»ç»Ÿå¯ä»¥ç»‘å®šåˆ°å®ƒã€‚</p>
<p>132.android.permission.AUTHENTICATE_ACCOUNTSå…è®¸ç¨‹åºé€šè¿‡è´¦æˆ·éªŒè¯æ–¹å¼è®¿é—®è´¦æˆ·ç®¡ç†ACCOUNT_MANAGERç›¸å…³ä¿¡æ¯</p>
<p>133.com.android.voicemail.permission.ADD_VOICEMAILå…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºæ·»åŠ è¯­éŸ³é‚®ä»¶ç³»ç»Ÿ</p>
<p>134.android.permission.ACCOUNT_MANAGERå…è®¸ç¨‹åºè·å–è´¦æˆ·éªŒè¯ä¿¡æ¯ï¼Œä¸»è¦ä¸ºGMailè´¦æˆ·ä¿¡æ¯ï¼Œåªæœ‰ç³»ç»Ÿçº§è¿›ç¨‹æ‰èƒ½è®¿é—®çš„æƒé™</p>
<p>135.android.permission.ACCESS_WIFI_STATEå…è®¸ç¨‹åºè·å–å½“å‰WiFiæ¥å…¥çš„çŠ¶æ€ä»¥åŠWLANçƒ­ç‚¹çš„ä¿¡æ¯</p>
<p>136.android.permission.ACCESS_SURFACE_FLINGERAndroidå¹³å°ä¸Šåº•å±‚çš„å›¾å½¢æ˜¾ç¤ºæ”¯æŒï¼Œä¸€èˆ¬ç”¨äºæ¸¸æˆæˆ–ç…§ç›¸æœºé¢„è§ˆç•Œé¢å’Œåº•å±‚æ¨¡å¼çš„å±å¹•æˆªå›¾</p>
<p>137.android.permission.ACCESS_NETWORK_STATEå…è®¸ç¨‹åºè·å–ç½‘ç»œä¿¡æ¯çŠ¶æ€ï¼Œå¦‚å½“å‰çš„ç½‘ç»œè¿æ¥æ˜¯å¦æœ‰æ•ˆ</p>
<p>138.android.permission.ACCESS_MOCK_LOCATIONå…è®¸ç¨‹åºè·å–æ¨¡æ‹Ÿå®šä½ä¿¡æ¯ï¼Œä¸€èˆ¬ç”¨äºå¸®åŠ©å¼€å‘è€…è°ƒè¯•åº”ç”¨</p>
<p>139.android.permission.ACCESS_LOCATION_EXTRA_COMMANDSå…è®¸ç¨‹åºè®¿é—®é¢å¤–çš„å®šä½æä¾›è€…æŒ‡ä»¤</p>
<p>140.android.permission.ACCESS_FINE_LOCATIONå…è®¸ç¨‹åºé€šè¿‡GPSèŠ¯ç‰‡æ¥æ”¶å«æ˜Ÿçš„å®šä½ä¿¡æ¯</p>
<p>141.android.permission.ACCESS_COARSE_LOCATIONå…è®¸ç¨‹åºé€šè¿‡WiFiæˆ–ç§»åŠ¨åŸºç«™çš„æ–¹å¼è·å–ç”¨æˆ·é”™ç•¥çš„ç»çº¬åº¦ä¿¡æ¯</p>
<p>142.android.permission.ACCESS_CHECKIN_PROPERTIESå…è®¸ç¨‹åºè¯»å–æˆ–å†™å…¥ç™»è®°check-inæ•°æ®åº“å±æ€§è¡¨çš„æƒé™</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>æµ…æJSä¸­çš„æ¨¡å—åŒ–(CommonJS,AMD,CMD)</title>
    <url>/2019/05/07/%E6%B5%85%E6%9E%90JS%E4%B8%AD%E7%9A%84%E6%A8%A1%E5%9D%97%E5%8C%96-CommonJS-AMD-CMD/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>å†å²ä¸Šï¼ŒJavaScriptä¸€ç›´éƒ½æ²¡æœ‰æ¨¡å—ï¼ˆmoduleï¼‰ä½“ç³»ï¼Œè¿™å°±å¯¼è‡´äº†åœ¨å¤§é¡¹ç›®ä¸­æ— æ³•æ‹†åˆ†æˆäº’ç›¸ä¾èµ–çš„å°æ–‡ä»¶ï¼Œå†è¿›è¡Œæ‹¼è£…ã€‚è¿™å¯¹å¼€å‘å¤æ‚çš„é¡¹ç›®å½¢æˆäº†å·¨å¤§çš„éšœç¢ã€‚</p>
<a id="more"></a>
<h1 id="æ¨¡å—åŒ–æ¦‚å¿µ"><a href="#æ¨¡å—åŒ–æ¦‚å¿µ" class="headerlink" title="æ¨¡å—åŒ–æ¦‚å¿µ"></a>æ¨¡å—åŒ–æ¦‚å¿µ</h1><p>ç†æƒ³æƒ…å†µä¸‹ï¼Œå¼€å‘è€…åªéœ€è¦å®ç°æ ¸å¿ƒçš„ä¸šåŠ¡é€»è¾‘ï¼Œå…¶ä»–éƒ½å¯ä»¥åŠ è½½åˆ«äººå·²ç»å†™å¥½çš„æ¨¡å—ã€‚</p>
<p><strong>åŸå§‹çš„å†™æ³•</strong></p>
<p>æ¨¡å—å°±æ˜¯å®ç°æŸä¸ªç‰¹å®šåŠŸèƒ½çš„æ–¹æ³•ï¼Œåªè¦æŠŠä¸åŒçš„å‡½æ•°æˆ–å˜é‡æ”¾åœ¨ä¸€èµ·å°±ç®—æ˜¯ä¸€ä¸ªæ¨¡å—</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> _count = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">m1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'m1'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">m2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'m2'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// m1();</span></span><br><span class="line"><span class="comment">// m2();</span></span><br><span class="line"><span class="comment">// console.log(_count);</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„m1,m2æ–¹æ³•ç»„æˆäº†ä¸€ä¸ªæ¨¡å—ï¼Œä½¿ç”¨çš„æ—¶å€™ç›´æ¥è°ƒç”¨å³å¯ã€‚ä½†æ˜¯è¿™æ ·å¾ˆæ˜æ˜¾æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼šâ€œæ±¡æŸ“â€å…¨å±€å˜é‡ï¼Œæ²¡æœ‰åŠæ³•ä¿è¯æ¨¡å—ä¸æ¨¡å—ä¹‹é—´ä¸å‘ç”Ÿå˜é‡åæˆ–è€…æ–¹æ³•åå†²çªï¼Œå¹¶ä¸”æ¨¡å—é—´ä¸æ¨¡å—é—´å¹¶æ— æ³•åˆ†æ¸…æ˜¯å¦æœ‰ç›´æ¥è”ç³»ã€‚</p>
<p><strong>å¯¹è±¡å†™æ³•</strong></p>
<p>å¯¹äºåŸå§‹å†™æ³•çš„ç¼ºç‚¹ï¼Œå°†æ–¹æ³•æˆ–è€…å˜é‡å£°æ˜åœ¨æŸä¸ªå¯¹è±¡ä¸­ï¼Œåƒm1,m2å‡½æ•°éƒ½å°è£…åœ¨å¯¹è±¡ä½“å†…ï¼Œéœ€è¦æ—¶å†ç”¨å¯¹è±¡è¿›è¡Œè°ƒç”¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> module1 = &#123;</span><br><span class="line">    _count: <span class="number">0</span>,</span><br><span class="line">    m1: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'m1'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    m2: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'m2'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// module1.m1();</span></span><br><span class="line"><span class="comment">// module1.m2();</span></span><br><span class="line"><span class="comment">// console.log(module1._count);</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¿™æ ·ä¾ç„¶ä¼šæœ‰ç¼ºç‚¹ï¼šæš´éœ²å‡ºäº†æ¨¡å—çš„æ‰€æœ‰æˆå‘˜ï¼Œå†…éƒ¨çŠ¶æ€å¯ä»¥è¢«æ”¹å†™ï¼Œæ¯”å¦‚å†…éƒ¨_countå˜é‡ä¼šè¢«å¤–éƒ¨ç›´æ¥æ”¹å†™ã€‚</p>
<p><strong>ç«‹å³æ‰§è¡Œå‡½æ•°å†™æ³•</strong></p>
<p>ä¼šæ¶‰åŠåˆ°é—­åŒ…çš„æ¦‚å¿µï¼Œç”¨â€˜ç«‹å³æ‰§è¡Œå‡½æ•°â€™ï¼ˆImmediately-Invoked Function Expressionï¼ŒIIFEï¼‰å³å¯ä»¥è¾¾åˆ°ä¸æš´éœ²ç§æœ‰æˆå‘˜çš„ç›®çš„ã€‚ç±»ä¼¼äºjQueryçš„å°è£…ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> module1 = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">m1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'m1'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">m2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'m2'</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        m1: m1,</span><br><span class="line">        m2: m2,</span><br><span class="line">        getCount: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _count;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// module1.m1();</span></span><br><span class="line"><span class="comment">// module1.m2();</span></span><br><span class="line"><span class="comment">// console.log(module1._count); //undefined</span></span><br><span class="line"><span class="comment">// console.log(module1.getCount()); //0</span></span><br></pre></td></tr></table></figure>
<h1 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h1><p><a href="[http://wiki.commonjs.org/wiki/CommonJS](http://wiki.commonjs.org/wiki/CommonJS">CommonJS</a>) æ˜¯ä»¥åœ¨æµè§ˆå™¨ç¯å¢ƒä¹‹å¤–æ„å»º JavaScript ç”Ÿæ€ç³»ç»Ÿä¸ºç›®æ ‡è€Œäº§ç”Ÿçš„é¡¹ç›®ï¼Œæ¯”å¦‚åœ¨æœåŠ¡å™¨å’Œæ¡Œé¢ç¯å¢ƒä¸­ã€‚</p>
<blockquote>
<p>2009å¹´ï¼Œç¾å›½ç¨‹åºå‘˜Ryan Dahlåˆ›é€ äº†node.jsé¡¹ç›®ï¼Œå°†javascriptè¯­è¨€ç”¨äºæœåŠ¡å™¨ç«¯ç¼–ç¨‹ã€‚</p>
</blockquote>
<blockquote>
<p>è¿™æ ‡å¿—â€Javascriptæ¨¡å—åŒ–ç¼–ç¨‹â€æ­£å¼è¯ç”Ÿã€‚å‰ç«¯çš„å¤æ‚ç¨‹åº¦æœ‰é™ï¼Œæ²¡æœ‰æ¨¡å—ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯åœ¨æœåŠ¡å™¨ç«¯ï¼Œä¸€å®šè¦æœ‰æ¨¡å—ï¼Œä¸æ“ä½œç³»ç»Ÿå’Œå…¶ä»–åº”ç”¨ç¨‹åºäº’åŠ¨ï¼Œå¦åˆ™æ ¹æœ¬æ²¡æ³•ç¼–ç¨‹ã€‚</p>
</blockquote>
<blockquote>
<p>nodeç¼–ç¨‹ä¸­æœ€é‡è¦çš„æ€æƒ³ä¹‹ä¸€å°±æ˜¯æ¨¡å—ï¼Œè€Œæ­£æ˜¯è¿™ä¸ªæ€æƒ³ï¼Œè®©JavaScriptçš„å¤§è§„æ¨¡å·¥ç¨‹æˆä¸ºå¯èƒ½ã€‚æ¨¡å—åŒ–ç¼–ç¨‹åœ¨jsç•Œæµè¡Œï¼Œä¹Ÿæ˜¯åŸºäºæ­¤ï¼Œéšååœ¨æµè§ˆå™¨ç«¯ï¼Œrequirejså’Œseajsä¹‹ç±»çš„å·¥å…·åŒ…ä¹Ÿå‡ºç°äº†ï¼Œå¯ä»¥è¯´åœ¨å¯¹åº”è§„èŒƒä¸‹ï¼Œrequireç»Ÿæ²»äº†ES6ä¹‹å‰çš„æ‰€æœ‰æ¨¡å—åŒ–ç¼–ç¨‹ï¼Œå³ä½¿ç°åœ¨ï¼Œåœ¨ES6 moduleè¢«å®Œå…¨å®ç°ä¹‹å‰ï¼Œè¿˜æ˜¯è¿™æ ·ã€‚</p>
</blockquote>
<p><img src="commonjs.png" alt></p>
<p>ä¾‹å¦‚åœ¨Nodeä¸­ï¼ŒNode åº”ç”¨ç”±æ¨¡å—ç»„æˆï¼Œé‡‡ç”¨ CommonJS æ¨¡å—è§„èŒƒã€‚</p>
<p>æ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸã€‚åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å®šä¹‰çš„å˜é‡ã€å‡½æ•°ã€ç±»ï¼Œéƒ½æ˜¯ç§æœ‰çš„ï¼Œå¯¹å…¶ä»–æ–‡ä»¶ä¸å¯è§ã€‚</p>
<p>CommonJSè§„èŒƒè§„å®šï¼Œæ¯ä¸ªæ¨¡å—å†…éƒ¨ï¼Œ<code>module</code>å˜é‡ä»£è¡¨å½“å‰æ¨¡å—ã€‚è¿™ä¸ªå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„Â·<code>exports</code>å±æ€§ï¼ˆå³Â·<code>module.exports</code>ï¼‰æ˜¯å¯¹å¤–çš„æ¥å£ã€‚åŠ è½½æŸä¸ªæ¨¡å—ï¼Œå…¶å®æ˜¯åŠ è½½è¯¥æ¨¡å—çš„Â·<code>module.exports</code>å±æ€§ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//user.js</span></span><br><span class="line"><span class="keyword">var</span> _count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> expose_num = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">var</span> m1 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'m1'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> m2 = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'m2'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> getCount = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> _count;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports.m1 = m1;</span><br><span class="line"><span class="built_in">module</span>.exports.m2 = m2;</span><br><span class="line"><span class="built_in">module</span>.exports.getCount = getCount;</span><br><span class="line"><span class="built_in">module</span>.exports.expose_num = expose_num;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç é€šè¿‡<code>module.exports</code>è¾“å‡ºå˜é‡<code>expose_num</code>å’Œå‡½æ•°<code>m1</code>,<code>m2</code>,<code>getCount</code>ã€‚</p>
<p><code>require</code>æ–¹æ³•è¿›è¡ŒåŠ è½½æ¨¡å—</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">const</span> module1 = <span class="built_in">require</span>(<span class="string">'./user.js'</span>);</span><br><span class="line">module1.m1(); <span class="comment">//m1</span></span><br><span class="line">module1.m2(); <span class="comment">//m2</span></span><br><span class="line"><span class="built_in">console</span>.log(module1.getCount()); <span class="comment">//0</span></span><br><span class="line"><span class="built_in">console</span>.log(module1.expose_num); <span class="comment">//100</span></span><br></pre></td></tr></table></figure>
<p><strong>module.exportså±æ€§</strong></p>
<p><code>module.exports</code>å±æ€§è¡¨ç¤ºå½“å‰æ¨¡å—å¯¹å¤–è¾“å‡ºçš„æ¥å£ï¼Œå…¶ä»–æ–‡ä»¶åŠ è½½è¯¥æ¨¡å—ï¼Œå®é™…ä¸Šå°±æ˜¯è¯»å–<code>module.exports</code>å˜é‡ã€‚</p>
<p><strong>exportså˜é‡</strong></p>
<p>ä¸ºäº†æ–¹ä¾¿ï¼ŒNodeä¸ºæ¯ä¸ªæ¨¡å—æä¾›ä¸€ä¸ª<code>exports</code>å˜é‡ï¼ŒæŒ‡å‘<code>module.exports</code>ã€‚è¿™ç­‰åŒåœ¨æ¯ä¸ªæ¨¡å—å¤´éƒ¨ï¼Œæœ‰ä¸€è¡Œè¿™æ ·çš„å‘½ä»¤ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> exports = <span class="built_in">module</span>.exports;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚æœä½ è§‰å¾—ï¼Œ<code>exports</code>ä¸<code>module.exports</code>ä¹‹é—´çš„åŒºåˆ«å¾ˆéš¾åˆ†æ¸…ï¼Œä¸€ä¸ªç®€å•çš„å¤„ç†æ–¹æ³•ï¼Œå°±æ˜¯æ”¾å¼ƒä½¿ç”¨<code>exports</code>ï¼Œåªä½¿ç”¨<code>module.exports</code>ã€‚</p>
<p>es6ä¸­ä¸º<code>export</code>,æ³¨æ„åŒºåˆ†ã€‚</p>
</blockquote>
<p><strong>CommonJSæ¨¡å—çš„ç‰¹ç‚¹å¦‚ä¸‹</strong></p>
<ul>
<li>æ‰€æœ‰ä»£ç éƒ½è¿è¡Œåœ¨æ¨¡å—ä½œç”¨åŸŸï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚</li>
<li>æ¨¡å—å¯ä»¥å¤šæ¬¡åŠ è½½ï¼Œä½†æ˜¯åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œç„¶åè¿è¡Œç»“æœå°±è¢«ç¼“å­˜äº†ï¼Œä»¥åå†åŠ è½½ï¼Œå°±ç›´æ¥è¯»å–ç¼“å­˜ç»“æœã€‚è¦æƒ³è®©æ¨¡å—å†æ¬¡è¿è¡Œï¼Œå¿…é¡»æ¸…é™¤ç¼“å­˜ã€‚</li>
<li>æ¨¡å—åŠ è½½çš„é¡ºåºï¼ŒæŒ‰ç…§å…¶åœ¨ä»£ç ä¸­å‡ºç°çš„é¡ºåºã€‚</li>
</ul>
<p>è¯¦ç»†å­¦ä¹ ä½¿ç”¨è¯·å‚è€ƒé“¾æ¥ï¼š<a href="https://javascript.ruanyifeng.com/nodejs/module.html" target="_blank" rel="noopener">https://javascript.ruanyifeng.com/nodejs/module.html</a></p>
<h1 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h1><p>æœ‰äº†æœåŠ¡å™¨ç«¯çš„æ¨¡å—åŒ–åï¼Œå¾ˆè‡ªç„¶å®¢æˆ·ç«¯ä¹Ÿéœ€è¦è¿›è¡Œæ¨¡å—åŒ–ï¼Œæœ€å¥½ä¸¤è€…èƒ½å¤Ÿå…¼å®¹ï¼Œå¹¶ä¸”åœ¨æœåŠ¡å™¨å’Œæµè§ˆå™¨éƒ½èƒ½å¤Ÿè¿è¡Œã€‚ä¹Ÿç”±äºä¸€ä¸ªé‡å¤§çš„å±€é™ï¼Œä½¿å¾—CommonJSè§„èŒƒä¸é€‚ç”¨äºæµè§ˆå™¨ç¯å¢ƒä¸Šã€‚</p>
<p><img src="amd.png" alt></p>
<p>å°±ä¾‹å¦‚ä¸Šè¿°ä¸­CommonJSä¸­çš„æ¡ˆä¾‹ä»£ç ï¼Œåœ¨æœªåŠ è½½å®Œç¬¬ä¸€è¡Œçš„<code>require(&#39;./user.js&#39;)</code>ä»£ç æ—¶ï¼Œåé¢çš„<code>module1.m1()</code>ç­‰çš„æ–¹æ³•éƒ½ä¼šè¿›è¡Œç­‰å¾…ç¬¬ä¸€è¡Œå®Œæˆåæ‰å¯ä»¥ç»§ç»­è¿è¡Œã€‚è¿™å¯¹æœåŠ¡ç«¯æ¥è¯´ä¸æ˜¯é—®é¢˜ï¼Œå› ä¸ºæ‰€æœ‰çš„æ¨¡å—éƒ½å­˜æ”¾åœ¨æœ¬åœ°ç¡¬ç›˜ï¼Œæ²¡æœ‰ç½‘ç»œç­‰å…¶ä»–åŸå› ï¼Œå¯ä»¥å¾ˆå¿«çš„åŒæ­¥åŠ è½½å®Œæˆï¼Œåªéœ€è¦ç­‰å¾…ç¡¬ç›˜çš„è¯»å–æ—¶é—´ã€‚ä½†æ˜¯å¯¹äºæµè§ˆå™¨ç¯å¢ƒï¼Œå´æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œå› ä¸ºæ‰€æœ‰çš„æ¨¡å—éƒ½æ”¾ç½®äºæœåŠ¡ç«¯ï¼Œç­‰å¾…æ—¶é—´ä¸æ˜¯å–å†³äºç¡¬ç›˜ï¼Œè€Œæ˜¯å–å†³äºç½‘é€Ÿçš„å¿«æ…¢ï¼Œè¿™å°±å¯¼è‡´äº†å¯èƒ½ä¼šå¯¼è‡´ç­‰å¾…æ—¶é—´è¿‡é•¿ï¼Œå¯¼è‡´æµè§ˆå™¨å‡ºç°â€™å‡æ­»â€™çŠ¶æ€ã€‚</p>
<p>å› æ­¤æµè§ˆå™¨ç«¯çš„æ¨¡å—ä¸å¯ä»¥é‡‡ç”¨â€™åŒæ­¥åŠ è½½â€™ï¼ˆsynchronousï¼‰ï¼Œåªèƒ½ä½¿ç”¨â€™å¼‚æ­¥åŠ è½½â€™ï¼ˆasynchronousï¼‰ã€‚è¿™å°±æ˜¯<a href="[https://github.com/amdjs/amdjs-api/wiki/AMD-(%E4%B8%AD%E6%96%87%E7%89%88">AMD</a>](<a href="https://github.com/amdjs/amdjs-api/wiki/AMD-(ä¸­æ–‡ç‰ˆ))è§„èŒƒçš„è¯ç”ŸèƒŒæ™¯ã€‚" target="_blank" rel="noopener">https://github.com/amdjs/amdjs-api/wiki/AMD-(ä¸­æ–‡ç‰ˆ))è§„èŒƒçš„è¯ç”ŸèƒŒæ™¯ã€‚</a></p>
<blockquote>
<p>æ‰€è°“AMDå³Asynchronous Module Definitionçš„ç¼©å†™ï¼Œæ„æ€å°±æ˜¯â€™å¼‚æ­¥æ¨¡å—å®šä¹‰â€™ã€‚å®ƒé‡‡ç”¨å¼‚æ­¥æ–¹å¼åŠ è½½æ¨¡å—ï¼Œæ¨¡å—çš„åŠ è½½ä¸å½±å“åé¢çš„è¯­å¥çš„è¿è¡Œã€‚æ‰€æœ‰ä¾èµ–è¿™ä¸ªæ¨¡å—çš„è¯­å¥ï¼Œéƒ½å®šä¹‰åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­ï¼Œç­‰åˆ°åŠ è½½å®Œæˆä¹‹åï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°æ‰ä¼šè¿è¡Œã€‚</p>
</blockquote>
<p>è¯¥è§„èŒƒåªå®šä¹‰äº†ä¸€ä¸ªå‡½æ•° <code>define</code>ï¼Œå®ƒæ˜¯å…¨å±€å˜é‡ã€‚å‡½æ•°çš„æè¿°ä¸ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">define(id?, dependencies?, factory);</span><br></pre></td></tr></table></figure>
<ul>
<li>idï¼šç¬¬ä¸€ä¸ªå‚æ•°ï¼Œidï¼Œæ˜¯ä¸ªå­—ç¬¦ä¸²ã€‚å®ƒæŒ‡çš„æ˜¯å®šä¹‰ä¸­æ¨¡å—çš„åå­—ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¯é€‰çš„</li>
<li>dependenciesï¼šç¬¬äºŒä¸ªå‚æ•°ï¼Œdependenciesï¼Œæ˜¯ä¸ªå®šä¹‰ä¸­æ¨¡å—æ‰€ä¾èµ–æ¨¡å—çš„æ•°ç»„</li>
<li>factoryï¼šç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œfactoryï¼Œä¸ºæ¨¡å—åˆå§‹åŒ–è¦æ‰§è¡Œçš„å‡½æ•°æˆ–å¯¹è±¡ã€‚</li>
</ul>
<p>ä¾‹å¦‚åœ¨<code>RequireJS</code>ä¸­ï¼Œ</p>
<blockquote>
<p>RequireJSæ˜¯ä¸€ä¸ªå·¥å…·åº“ï¼Œä¸»è¦ç”¨äºå®¢æˆ·ç«¯çš„æ¨¡å—ç®¡ç†ã€‚å®ƒå¯ä»¥è®©å®¢æˆ·ç«¯çš„ä»£ç åˆ†æˆä¸€ä¸ªä¸ªæ¨¡å—ï¼Œå®ç°å¼‚æ­¥æˆ–åŠ¨æ€åŠ è½½ï¼Œä»è€Œæé«˜ä»£ç çš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ã€‚å®ƒçš„æ¨¡å—ç®¡ç†éµå®ˆ<a href="https://github.com/amdjs/amdjs-api/wiki/AMD" target="_blank" rel="noopener">AMDè§„èŒƒ</a>ï¼ˆAsynchronous Module Definitionï¼‰ã€‚</p>
</blockquote>
<blockquote>
<p>RequireJSçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œé€šè¿‡defineæ–¹æ³•ï¼Œå°†ä»£ç å®šä¹‰ä¸ºæ¨¡å—ï¼›é€šè¿‡requireæ–¹æ³•ï¼Œå®ç°ä»£ç çš„æ¨¡å—åŠ è½½ã€‚</p>
</blockquote>
<p>é¦–å…ˆï¼Œå°†require.jsåµŒå…¥ç½‘é¡µï¼Œç„¶åå°±èƒ½åœ¨ç½‘é¡µä¸­è¿›è¡Œæ¨¡å—åŒ–ç¼–ç¨‹äº†ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">data-main</span>=<span class="string">"app"</span> <span class="attr">src</span>=<span class="string">"https://requirejs.org/docs/release/2.3.6/comments/require.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç çš„<code>data-main</code>å±æ€§ä¸å¯çœç•¥ï¼Œç”¨äºæŒ‡å®šä¸»ä»£ç æ‰€åœ¨çš„è„šæœ¬æ–‡ä»¶ï¼Œåœ¨ä¸Šä¾‹ä¸­ä¸ºå½“å‰ç›®å½•ä¸‹çš„<code>app.js</code>æ–‡ä»¶ã€‚ç”¨æˆ·è‡ªå®šä¹‰çš„ä»£ç å°±æ”¾åœ¨è¿™ä¸ª<code>app.js</code>æ–‡ä»¶ä¸­ã€‚</p>
<p><strong>defineæ–¹æ³•ï¼šå®šä¹‰æ¨¡å—</strong></p>
<ul>
<li>ç‹¬ç«‹æ¨¡å—</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//user.js</span></span><br><span class="line">define(&#123;</span><br><span class="line">    m1:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'m1'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    m2:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'m2'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ç§ç­‰ä»·çš„å†™æ³•æ˜¯ï¼ŒæŠŠå¯¹è±¡å†™æˆä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯è¾“å‡ºçš„æ¨¡å—ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//user.js</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        m1:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'m1'</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        m2:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'m2'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åä¸€ç§å†™æ³•çš„è‡ªç”±åº¦æ›´é«˜ä¸€ç‚¹ï¼Œå¯ä»¥åœ¨å‡½æ•°ä½“å†…å†™ä¸€äº›æ¨¡å—åˆå§‹åŒ–ä»£ç ã€‚å€¼å¾—æŒ‡å‡ºçš„æ˜¯ï¼Œdefineå®šä¹‰çš„æ¨¡å—å¯ä»¥è¿”å›ä»»ä½•å€¼ï¼Œä¸é™äºå¯¹è±¡ã€‚</p>
</blockquote>
<ul>
<li>éç‹¬ç«‹æ¨¡å—</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//cart.js</span></span><br><span class="line">define([<span class="string">'user'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'cart'</span>);</span><br><span class="line">    user.m1();</span><br><span class="line">    user.m2();</span><br><span class="line">    <span class="keyword">var</span> getCartCount = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        getCartCount:getCartCount</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>defineæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„æˆå‘˜æ˜¯å½“å‰æ¨¡å—æ‰€ä¾èµ–çš„æ¨¡å—ã€‚æ¯”å¦‚ï¼Œ[â€˜userâ€™]è¡¨ç¤ºæˆ‘ä»¬å®šä¹‰çš„è¿™ä¸ªæ–°æ¨¡å—ä¾èµ–äºuseræ¨¡å—ï¼Œåªæœ‰å…ˆåŠ è½½è¿™ä¸¤ä¸ªæ¨¡å—ï¼Œæ–°æ¨¡å—æ‰èƒ½æ­£å¸¸è¿è¡Œã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œuseræ¨¡å—æŒ‡çš„æ˜¯ï¼Œå½“å‰ç›®å½•ä¸‹çš„user.jsæ–‡ä»¶ï¼Œç­‰åŒäºå†™æˆ[â€™./userâ€™]ã€‚</p>
<p>defineæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“å‰é¢æ•°ç»„çš„æ‰€æœ‰æˆå‘˜åŠ è½½æˆåŠŸåï¼Œå®ƒå°†è¢«è°ƒç”¨ã€‚å®ƒçš„å‚æ•°ä¸æ•°ç»„çš„æˆå‘˜ä¸€ä¸€å¯¹åº”ï¼Œæ¯”å¦‚function(user)å°±è¡¨ç¤ºï¼Œè¿™ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°userå¯¹åº”useræ¨¡å—ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™ä¸ªå‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä¾›å…¶ä»–æ¨¡å—è°ƒç”¨ã€‚</p>
<p><strong>requireæ–¹æ³•ï¼šè°ƒç”¨æ¨¡å—</strong></p>
<p>requireæ–¹æ³•ç”¨äºè°ƒç”¨æ¨¡å—ã€‚å®ƒçš„å‚æ•°ä¸defineæ–¹æ³•ç±»ä¼¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//app.js</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'cart'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">cart</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//...do</span></span><br><span class="line">    <span class="built_in">console</span>.log(cart.getCartCount());</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//è¾“å‡ºï¼š</span></span><br><span class="line"><span class="comment">//cart</span></span><br><span class="line"><span class="comment">//m1</span></span><br><span class="line"><span class="comment">//m2</span></span><br><span class="line"><span class="comment">//100</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢æ–¹æ³•è¡¨ç¤ºåŠ è½½cartä¸€ä¸ªæ¨¡å—ï¼Œå½“è¿™ä¸€ä¸ªæ¨¡å—éƒ½åŠ è½½æˆåŠŸåï¼Œæ‰§è¡Œä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚è¯¥å›è°ƒå‡½æ•°å°±ç”¨æ¥å®Œæˆå…·ä½“çš„ä»»åŠ¡ã€‚è€Œ<code>cart.getCartCount()</code>å’Œ<code>cart</code>æ¨¡å—åŠ è½½ä¸æ˜¯åŒæ­¥çš„ï¼Œæµè§ˆå™¨ä¸ä¼šå†å‘ç”Ÿå‡æ­»çŠ¶æ€ï¼Œæ‰€ä»¥AMDè§„èŒƒæ›´é€‚åˆæµè§ˆå™¨ç¯å¢ƒã€‚</p>
<blockquote>
<p>requireæ–¹æ³•ä¹Ÿå¯ä»¥ç”¨åœ¨defineæ–¹æ³•å†…éƒ¨ï¼Œå³åŠ¨æ€åŠ è½½ã€‚</p>
</blockquote>
<p>defineå’Œrequireè¿™ä¸¤ä¸ªå®šä¹‰æ¨¡å—ã€è°ƒç”¨æ¨¡å—çš„æ–¹æ³•ï¼Œåˆç§°ä¸ºAMDæ¨¡å¼ã€‚å®ƒçš„æ¨¡å—å®šä¹‰çš„æ–¹æ³•éå¸¸æ¸…æ™°ï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ç¯å¢ƒï¼Œèƒ½å¤Ÿæ¸…æ¥šåœ°æ˜¾ç¤ºä¾èµ–å…³ç³»ã€‚</p>
<p>AMDæ¨¡å¼å¯ä»¥ç”¨äºæµè§ˆå™¨ç¯å¢ƒï¼Œå¹¶ä¸”å…è®¸éåŒæ­¥åŠ è½½æ¨¡å—ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€åŠ è½½æ¨¡å—ã€‚</p>
<p>è¯¦ç»†å­¦ä¹ ä½¿ç”¨è¯·å‚è€ƒé“¾æ¥ï¼š<a href="https://javascript.ruanyifeng.com/tool/requirejs.html" target="_blank" rel="noopener">https://javascript.ruanyifeng.com/tool/requirejs.html</a></p>
<h1 id="AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§"><a href="#AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§" class="headerlink" title="AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§"></a>AMDè§„èŒƒä¸CommonJSè§„èŒƒçš„å…¼å®¹æ€§</h1><p>CommonJSè§„èŒƒåŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åŠ è½½å®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚AMDè§„èŒƒåˆ™æ˜¯éåŒæ­¥åŠ è½½æ¨¡å—ï¼Œå…è®¸æŒ‡å®šå›è°ƒå‡½æ•°ã€‚ç”±äºNode.jsä¸»è¦ç”¨äºæœåŠ¡å™¨ç¼–ç¨‹ï¼Œæ¨¡å—æ–‡ä»¶ä¸€èˆ¬éƒ½å·²ç»å­˜åœ¨äºæœ¬åœ°ç¡¬ç›˜ï¼Œæ‰€ä»¥åŠ è½½èµ·æ¥æ¯”è¾ƒå¿«ï¼Œä¸ç”¨è€ƒè™‘éåŒæ­¥åŠ è½½çš„æ–¹å¼ï¼Œæ‰€ä»¥CommonJSè§„èŒƒæ¯”è¾ƒé€‚ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œè¦ä»æœåŠ¡å™¨ç«¯åŠ è½½æ¨¡å—ï¼Œè¿™æ—¶å°±å¿…é¡»é‡‡ç”¨éåŒæ­¥æ¨¡å¼ï¼Œå› æ­¤æµè§ˆå™¨ç«¯ä¸€èˆ¬é‡‡ç”¨AMDè§„èŒƒã€‚</p>
<p>AMDè§„èŒƒä½¿ç”¨defineæ–¹æ³•å®šä¹‰æ¨¡å—ï¼Œä¸‹é¢å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">define([<span class="string">'package/lib'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">lib</span>)</span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    lib.log(<span class="string">'hello world!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    foo: foo</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>AMDè§„èŒƒå…è®¸è¾“å‡ºçš„æ¨¡å—å…¼å®¹CommonJSè§„èŒƒï¼Œè¿™æ—¶<code>define</code>æ–¹æ³•éœ€è¦å†™æˆä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params">require, exports, module</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> someModule = <span class="built_in">require</span>(<span class="string">"someModule"</span>);</span><br><span class="line">  <span class="keyword">var</span> anotherModule = <span class="built_in">require</span>(<span class="string">"anotherModule"</span>);</span><br><span class="line"></span><br><span class="line">  someModule.doTehAwesome();</span><br><span class="line">  anotherModule.doMoarAwesome();</span><br><span class="line"></span><br><span class="line">  exports.asplode = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">    someModule.doTehAwesome();</span><br><span class="line">    anotherModule.doMoarAwesome();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h1><p><a href="https://github.com/seajs/seajs/issues/242" target="_blank" rel="noopener">CMD</a> æ˜¯ SeaJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºã€‚</p>
<p>é¦–å…ˆé€šè¿‡ <code>script</code> å¼•å…¥ <code>sea.js</code> åï¼Œæœ‰ä¸€æ®µé…ç½®ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// seajs çš„ç®€å•é…ç½®</span></span><br><span class="line">seajs.config(&#123;</span><br><span class="line">  base: <span class="string">"../sea-modules/"</span>,</span><br><span class="line">  alias: &#123;</span><br><span class="line">    <span class="string">"jquery"</span>: <span class="string">"jquery/jquery/1.10.1/jquery.js"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ è½½å…¥å£æ¨¡å—</span></span><br><span class="line">seajs.use(<span class="string">"../static/hello/src/main"</span>)</span><br></pre></td></tr></table></figure>
<p><code>sea.js</code> åœ¨ä¸‹è½½å®Œæˆåï¼Œä¼šè‡ªåŠ¨åŠ è½½å…¥å£æ¨¡å—ã€‚é¡µé¢ä¸­çš„ä»£ç å°±è¿™ä¹ˆç®€å•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">define(id?, deps?, factory)</span><br></pre></td></tr></table></figure>
<ul>
<li>idï¼šç¬¬ä¸€ä¸ªå‚æ•°ï¼Œidï¼Œæ˜¯ä¸ªå­—ç¬¦ä¸²ã€‚å®ƒæŒ‡çš„æ˜¯å®šä¹‰ä¸­æ¨¡å—çš„åå­—ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¯é€‰çš„</li>
<li>depsï¼šç¬¬äºŒä¸ªå‚æ•°ï¼Œdependenciesï¼Œæ˜¯ä¸ªå®šä¹‰ä¸­æ¨¡å—æ‰€ä¾èµ–æ¨¡å—çš„æ•°ç»„</li>
<li>factoryï¼šç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œfactoryï¼Œä¸ºæ¨¡å—åˆå§‹åŒ–è¦æ‰§è¡Œçš„å‡½æ•°æˆ–å¯¹è±¡ã€‚</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šå¸¦ id å’Œ dependencies å‚æ•°çš„ define ç”¨æ³•ä¸å±äº CMD è§„èŒƒï¼Œè€Œå±äº Modules/Transport è§„èŒƒã€‚</p>
</blockquote>
<p>å¦‚æœä¸€ä¸ªæ¨¡å—ä¸ä¾èµ–å…¶ä»–æ¨¡å—ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å®šä¹‰åœ¨define()å‡½æ•°ä¹‹ä¸­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ‰€æœ‰æ¨¡å—éƒ½é€šè¿‡ define æ¥å®šä¹‰</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šè¿‡ require å¼•å…¥ä¾èµ–</span></span><br><span class="line">  <span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'jquery'</span>);</span><br><span class="line">  <span class="keyword">var</span> Spinning = <span class="built_in">require</span>(<span class="string">'./spinning'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šè¿‡ exports å¯¹å¤–æä¾›æ¥å£</span></span><br><span class="line">  exports.doSomething = ...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æˆ–è€…é€šè¿‡ module.exports æä¾›æ•´ä¸ªæ¥å£</span></span><br><span class="line">  <span class="built_in">module</span>.exports = ...</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢å°±æ˜¯ Sea.js æ¨èçš„ CMD æ¨¡å—ä¹¦å†™æ ¼å¼ã€‚å¦‚æœä½ æœ‰ä½¿ç”¨è¿‡ Node.jsï¼Œä¸€åˆ‡éƒ½å¾ˆè‡ªç„¶ã€‚</p>
<p>è¯¦ç»†å­¦ä¹ ä½¿ç”¨è¯·å‚è€ƒé“¾æ¥ï¼š<a href="https://seajs.github.io/seajs/docs/#quick-start" target="_blank" rel="noopener">https://seajs.github.io/seajs/docs/#quick-start</a></p>
<h1 id="AMDå’ŒCMDçš„åŒºåˆ«"><a href="#AMDå’ŒCMDçš„åŒºåˆ«" class="headerlink" title="AMDå’ŒCMDçš„åŒºåˆ«"></a>AMDå’ŒCMDçš„åŒºåˆ«</h1><p>AMDå’ŒCMDæœ€å¤§çš„åŒºåˆ«æ˜¯å¯¹ä¾èµ–æ¨¡å—çš„æ‰§è¡Œæ—¶æœºå¤„ç†ä¸åŒï¼Œè€Œä¸æ˜¯åŠ è½½çš„æ—¶æœºæˆ–è€…æ–¹å¼ä¸åŒï¼ŒäºŒè€…çš†ä¸ºå¼‚æ­¥åŠ è½½æ¨¡å—ã€‚</p>
<ul>
<li><p>AMDä¾èµ–å‰ç½®ï¼Œjså¯ä»¥æ–¹ä¾¿çŸ¥é“ä¾èµ–æ¨¡å—æ˜¯è°ï¼Œç«‹å³åŠ è½½ï¼›</p>
</li>
<li><p>CMDå°±è¿‘ä¾èµ–ï¼Œéœ€è¦ä½¿ç”¨æŠŠæ¨¡å—å˜ä¸ºå­—ç¬¦ä¸²è§£æä¸€éæ‰çŸ¥é“ä¾èµ–äº†é‚£äº›æ¨¡å—ã€‚</p>
</li>
<li><p>AMD çš„ API é»˜è®¤æ˜¯<strong>ä¸€ä¸ªå½“å¤šä¸ªç”¨</strong>ï¼ŒCMD çš„ API ä¸¥æ ¼åŒºåˆ†ï¼Œæ¨å´‡<strong>èŒè´£å•ä¸€</strong>ã€‚æ¯”å¦‚ AMD é‡Œï¼Œrequire åˆ†å…¨å±€ require å’Œå±€éƒ¨ requireï¼Œéƒ½å« requireã€‚CMD é‡Œï¼Œæ²¡æœ‰å…¨å±€ requireï¼Œè€Œæ˜¯æ ¹æ®æ¨¡å—ç³»ç»Ÿçš„å®Œå¤‡æ€§ï¼Œæä¾› seajs.use æ¥å®ç°æ¨¡å—ç³»ç»Ÿçš„åŠ è½½å¯åŠ¨ã€‚CMD é‡Œï¼Œæ¯ä¸ª API éƒ½<strong>ç®€å•çº¯ç²¹</strong>ã€‚</p>
</li>
</ul>
<p>CMD æ¨å´‡<strong>ä¾èµ–å°±è¿‘</strong>ï¼ŒAMD æ¨å´‡<strong>ä¾èµ–å‰ç½®</strong></p>
<blockquote>
<p>RequireJS ä» 2.0 å¼€å§‹ï¼Œä¹Ÿæ”¹æˆå¯ä»¥å»¶è¿Ÿæ‰§è¡Œï¼ˆæ ¹æ®å†™æ³•ä¸åŒï¼Œå¤„ç†æ–¹å¼ä¸åŒï¼‰ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// CMD</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;   </span><br><span class="line">  <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>)   </span><br><span class="line">	a.doSomething()   </span><br><span class="line"> 	<span class="comment">// æ­¤å¤„ç•¥å» 100 è¡Œ   </span></span><br><span class="line"> 	<span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">'./b'</span>) </span><br><span class="line"> 	<span class="comment">// ä¾èµ–å¯ä»¥å°±è¿‘ä¹¦å†™   </span></span><br><span class="line"> 	b.doSomething()   </span><br><span class="line"> 	<span class="comment">// ... </span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// AMD é»˜è®¤æ¨èçš„æ˜¯</span></span><br><span class="line">define([<span class="string">'./a'</span>, <span class="string">'./b'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;  </span><br><span class="line">  <span class="comment">// ä¾èµ–å¿…é¡»ä¸€å¼€å§‹å°±å†™å¥½    </span></span><br><span class="line">  a.doSomething()    </span><br><span class="line">	<span class="comment">// æ­¤å¤„ç•¥å» 100 è¡Œ    </span></span><br><span class="line">	b.doSomething()    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>å³ä½¿AMDä¹Ÿå¯ä»¥æ”¯æŒCMDçš„å†™æ³•ï¼Œå› ä¸ºdefineå†…éƒ¨ä¹Ÿå¯ä»¥ä½¿ç”¨requireï¼Œå‰é¢æœ‰æåˆ°ã€‚ä½†æ˜¯RequireJS çš„ä½œè€…é»˜è®¤æ˜¯æœ€å–œæ¬¢ä¸Šé¢çš„å†™æ³•ï¼Œä¹Ÿæ˜¯å®˜æ–¹æ–‡æ¡£é‡Œé»˜è®¤çš„æ¨¡å—å®šä¹‰å†™æ³•ã€‚</p>
<h1 id="ES6-Module"><a href="#ES6-Module" class="headerlink" title="ES6 Module"></a>ES6 Module</h1><p>ES6 æ¨¡å—çš„è®¾è®¡æ€æƒ³æ˜¯å°½é‡çš„é™æ€åŒ–ï¼Œä½¿å¾—ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡ã€‚</p>
<p><strong>exportå¯¼å‡ºæ¨¡å—</strong></p>
<p>æ¨¡å—åŠŸèƒ½ä¸»è¦ç”±ä¸¤ä¸ªå‘½ä»¤æ„æˆï¼š<code>export</code>å’Œ<code>import</code>ã€‚<code>export</code>å‘½ä»¤ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œ<code>import</code>å‘½ä»¤ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½ã€‚</p>
<p>ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶å†…éƒ¨çš„æ‰€æœ‰å˜é‡ï¼Œå¤–éƒ¨æ— æ³•è·å–ã€‚å¦‚æœä½ å¸Œæœ›å¤–éƒ¨èƒ½å¤Ÿè¯»å–æ¨¡å—å†…éƒ¨çš„æŸä¸ªå˜é‡ï¼Œå°±å¿…é¡»ä½¿ç”¨<code>export</code>å…³é”®å­—è¾“å‡ºè¯¥å˜é‡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª JS æ–‡ä»¶ï¼Œé‡Œé¢ä½¿ç”¨<code>export</code>å‘½ä»¤è¾“å‡ºå˜é‡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// profile.js</span></span><br><span class="line"><span class="keyword">var</span> firstName = <span class="string">'Michael'</span>;</span><br><span class="line"><span class="keyword">var</span> lastName = <span class="string">'Jackson'</span>;</span><br><span class="line"><span class="keyword">var</span> year = <span class="number">1958</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;firstName, lastName, year&#125;;</span><br></pre></td></tr></table></figure>
<p><code>export</code>å‘½ä»¤é™¤äº†è¾“å‡ºå˜é‡ï¼Œè¿˜å¯ä»¥è¾“å‡ºå‡½æ•°æˆ–ç±»ï¼ˆclassï¼‰ã€‚</p>
<p><strong>importå¯¼å…¥æ¨¡å—</strong></p>
<p>ä½¿ç”¨<code>export</code>å‘½ä»¤å®šä¹‰äº†æ¨¡å—çš„å¯¹å¤–æ¥å£ä»¥åï¼Œå…¶ä»– JS æ–‡ä»¶å°±å¯ä»¥é€šè¿‡<code>import</code>å‘½ä»¤åŠ è½½è¿™ä¸ªæ¨¡å—ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;firstName, lastName, year&#125; <span class="keyword">from</span> <span class="string">'./profile.js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">  element.textContent = firstName + <span class="string">' '</span> + lastName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç çš„<code>import</code>å‘½ä»¤ï¼Œç”¨äºåŠ è½½<code>profile.js</code>æ–‡ä»¶ï¼Œå¹¶ä»ä¸­è¾“å…¥å˜é‡ã€‚<code>import</code>å‘½ä»¤æ¥å—ä¸€å¯¹å¤§æ‹¬å·ï¼Œé‡Œé¢æŒ‡å®šè¦ä»å…¶ä»–æ¨¡å—å¯¼å…¥çš„å˜é‡åã€‚å¤§æ‹¬å·é‡Œé¢çš„å˜é‡åï¼Œå¿…é¡»ä¸è¢«å¯¼å…¥æ¨¡å—ï¼ˆ<code>profile.js</code>ï¼‰å¯¹å¤–æ¥å£çš„åç§°ç›¸åŒã€‚</p>
<p><strong>export defaulté»˜è®¤å¯¼å‡º</strong></p>
<p>ä»å‰é¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨<code>import</code>å‘½ä»¤çš„æ—¶å€™ï¼Œç”¨æˆ·éœ€è¦çŸ¥é“æ‰€è¦åŠ è½½çš„å˜é‡åæˆ–å‡½æ•°åï¼Œå¦åˆ™æ— æ³•åŠ è½½ã€‚ä½†æ˜¯ï¼Œç”¨æˆ·è‚¯å®šå¸Œæœ›å¿«é€Ÿä¸Šæ‰‹ï¼Œæœªå¿…æ„¿æ„é˜…è¯»æ–‡æ¡£ï¼Œå»äº†è§£æ¨¡å—æœ‰å“ªäº›å±æ€§å’Œæ–¹æ³•ã€‚</p>
<p>ä¸ºäº†ç»™ç”¨æˆ·æä¾›æ–¹ä¾¿ï¼Œè®©ä»–ä»¬ä¸ç”¨é˜…è¯»æ–‡æ¡£å°±èƒ½åŠ è½½æ¨¡å—ï¼Œå°±è¦ç”¨åˆ°<code>export default</code>å‘½ä»¤ï¼Œä¸ºæ¨¡å—æŒ‡å®šé»˜è®¤è¾“å‡ºã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// export-default.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'foo'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªæ¨¡å—æ–‡ä»¶<code>export-default.js</code>ï¼Œå®ƒçš„é»˜è®¤è¾“å‡ºæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p>
<p>å…¶ä»–æ¨¡å—åŠ è½½è¯¥æ¨¡å—æ—¶ï¼Œ<code>import</code>å‘½ä»¤å¯ä»¥ä¸ºè¯¥åŒ¿åå‡½æ•°æŒ‡å®šä»»æ„åå­—ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// import-default.js</span></span><br><span class="line"><span class="keyword">import</span> customName <span class="keyword">from</span> <span class="string">'./export-default'</span>;</span><br><span class="line">customName(); <span class="comment">// 'foo'</span></span><br></pre></td></tr></table></figure>
<p>ES6ä¸­Moduleè¿˜æœ‰å¾ˆå¤šè¯­æ³•ï¼Œè¿™é‡Œä¸»è¦è®²è§£es6å‰jsçš„æ¨¡å—åŒ–æ¦‚å¿µï¼Œæ‰€ä»¥ä¸å¤šæ¦‚è¿°ä½¿ç”¨ï¼Œè¯¦ç»†ä½¿ç”¨å‚è€ƒä¸‹é¢é“¾æ¥ã€‚</p>
<p>è¯¦ç»†å­¦ä¹ ä½¿ç”¨è¯·å‚è€ƒé“¾æ¥ï¼š<a href="https://es6.ruanyifeng.com/#docs/module" target="_blank" rel="noopener">https://es6.ruanyifeng.com/#docs/module</a></p>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>CommonJS</tag>
        <tag>AMD</tag>
        <tag>CMD</tag>
      </tags>
  </entry>
  <entry>
    <title>PHPå¸¸ç”¨å‡½æ•°å‚è€ƒè¡¨</title>
    <url>/2019/05/05/PHP%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E5%8F%82%E8%80%83%E8%A1%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å„ç§å¸¸ç”¨çš„phpå‡½æ•°ï¼ŒåŒ…æ‹¬phpå­—ç¬¦ä¸²å‡½æ•°,phpæ•°ç»„å‡½æ•°,phpæ•°å­¦å‡½æ•°,mysqlå‡½æ•°,æ–‡ä»¶ç›®å½•å‡½æ•°,GDåº“å‡½æ•°,SESSIONå‡½æ•°,Date/Time å‡½æ•°ç­‰ï¼Œæ¶µç›–äº†phpåŸºæœ¬æ“ä½œæ‰€æ¶‰åŠçš„å„ç±»å¸¸ç”¨å‡½æ•°ï¼Œå¹¶é’ˆå¯¹å„ä¸ªå‡½æ•°æä¾›äº†ç®€å•çš„è§£é‡Šè¯´æ˜ï¼Œæ–¹ä¾¿æŸ¥é˜…</p>
<a id="more"></a>
<h1 id="å­—ç¬¦ä¸²ç›¸å…³æ“ä½œå‡½æ•°"><a href="#å­—ç¬¦ä¸²ç›¸å…³æ“ä½œå‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²ç›¸å…³æ“ä½œå‡½æ•°"></a>å­—ç¬¦ä¸²ç›¸å…³æ“ä½œå‡½æ•°</h1><h2 id="å»é™¤ç©ºæ ¼æˆ–å…¶ä»–å­—ç¬¦"><a href="#å»é™¤ç©ºæ ¼æˆ–å…¶ä»–å­—ç¬¦" class="headerlink" title="å»é™¤ç©ºæ ¼æˆ–å…¶ä»–å­—ç¬¦"></a>å»é™¤ç©ºæ ¼æˆ–å…¶ä»–å­—ç¬¦</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>trim</td>
<td>åˆ é™¤å­—ç¬¦ä¸²ä¸¤ç«¯ç©ºæ ¼æˆ–å…¶ä»–é¢„å®šä¹‰å­—ç¬¦</td>
</tr>
<tr>
<td>rtrim</td>
<td>åˆ é™¤å­—ç¬¦ä¸²å³è¾¹ç©ºæ ¼æˆ–å…¶ä»–é¢„å®šä¹‰å­—ç¬¦</td>
</tr>
<tr>
<td>chop</td>
<td>rtrim() çš„åˆ«å chop() ä¸ Perl çš„ chop() å‡½æ•°æœ‰æ‰€ä¸åŒï¼Œå®ƒä¼šåˆ é™¤å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦ã€‚</td>
</tr>
<tr>
<td>ltrim</td>
<td>åˆ é™¤å­—ç¬¦ä¸²å·¦è¾¹ç©ºæ ¼æˆ–å…¶ä»–é¢„å®šä¹‰å­—ç¬¦</td>
</tr>
</tbody>
</table>
<h2 id="å­—ç¬¦ä¸²ç”Ÿæˆä¸è½¬æ¢"><a href="#å­—ç¬¦ä¸²ç”Ÿæˆä¸è½¬æ¢" class="headerlink" title="å­—ç¬¦ä¸²ç”Ÿæˆä¸è½¬æ¢"></a>å­—ç¬¦ä¸²ç”Ÿæˆä¸è½¬æ¢</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>str_pad</td>
<td>ä½¿ç”¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²å¡«å……å­—ç¬¦ä¸²ä¸ºæŒ‡å®šé•¿åº¦</td>
</tr>
<tr>
<td>str_replace</td>
<td>å­å­—ç¬¦ä¸²æ›¿æ¢</td>
</tr>
<tr>
<td>str_split</td>
<td>å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„</td>
</tr>
<tr>
<td>strrev</td>
<td>åè½¬å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>wordwrap</td>
<td>æ‰“æ–­å­—ç¬¦ä¸²ä¸ºæŒ‡å®šæ•°é‡çš„å­—ä¸²</td>
</tr>
<tr>
<td>str_shuffle</td>
<td>éšæœºæ‰“ä¹±ä¸€ä¸ªå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>parse_str</td>
<td>å°†å­—ç¬¦ä¸²è§£ææˆå˜é‡</td>
</tr>
<tr>
<td>number_format</td>
<td>é€šè¿‡åƒä½åˆ†ç»„æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²</td>
</tr>
</tbody>
</table>
<h2 id="å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢"><a href="#å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢" class="headerlink" title="å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢"></a>å­—ç¬¦ä¸²å¤§å°å†™è½¬æ¢</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>strtolower</td>
<td>å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå°å†™</td>
</tr>
<tr>
<td>strtoupper</td>
<td>å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¤§å†™</td>
</tr>
<tr>
<td>ucfirst</td>
<td>å°†å­—ç¬¦ä¸²çš„é¦–å­—æ¯è½¬æ¢ä¸ºå¤§å†™</td>
</tr>
<tr>
<td>ucwords</td>
<td>å°†å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå•è¯çš„é¦–å­—æ¯è½¬æ¢ä¸ºå¤§å†™</td>
</tr>
</tbody>
</table>
<h2 id="htmlæ ‡ç­¾å…³è”"><a href="#htmlæ ‡ç­¾å…³è”" class="headerlink" title="htmlæ ‡ç­¾å…³è”"></a>htmlæ ‡ç­¾å…³è”</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>htmlentities</td>
<td>å°†å­—ç¬¦è½¬æ¢ä¸ºHTMLå®ä½“</td>
</tr>
<tr>
<td>htmlspecialchars</td>
<td>é¢„å®šä¹‰å­—ç¬¦ä¸²è½¬HTMLç¼–ç </td>
</tr>
<tr>
<td>nl2br</td>
<td>åœ¨å­—ç¬¦ä¸²æ‰€æœ‰æ–°è¡Œä¹‹å‰æ’å…¥ HTML æ¢è¡Œæ ‡è®° <code>\n</code>è½¬æ¢ä¸º<code>&lt;br&gt;</code>æ ‡ç­¾</td>
</tr>
<tr>
<td>strip_tags</td>
<td>ä»å­—ç¬¦ä¸²ä¸­å»é™¤ HTML å’Œ PHP æ ‡è®°</td>
</tr>
<tr>
<td>addcslashes</td>
<td>ä»¥ C è¯­è¨€é£æ ¼ä½¿ç”¨åæ–œçº¿è½¬ä¹‰å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦</td>
</tr>
<tr>
<td>stripcslashes</td>
<td>åå¼•ç”¨ä¸€ä¸ªä½¿ç”¨ addcslashes() è½¬ä¹‰çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>addslashes</td>
<td>ä½¿ç”¨åæ–œçº¿å¼•ç”¨å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>stripslashes</td>
<td>åˆ é™¤ç”±addslashesæ·»åŠ çš„è½¬ä¹‰å­—ç¬¦</td>
</tr>
<tr>
<td>quotemeta</td>
<td>å­—ç¬¦ä¸²ä¸­æŸäº›é¢„å®šä¹‰å­—ç¬¦ä¸²å‰åŠ åæ–œæ </td>
</tr>
<tr>
<td>chr</td>
<td>ä»æŒ‡å®šçš„ ASCII å€¼è¿”å›å­—ç¬¦</td>
</tr>
<tr>
<td>ord</td>
<td>è¿”å›å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ ASCII å€¼</td>
</tr>
</tbody>
</table>
<h2 id="å­—ç¬¦ä¸²æ¯”è¾ƒ"><a href="#å­—ç¬¦ä¸²æ¯”è¾ƒ" class="headerlink" title="å­—ç¬¦ä¸²æ¯”è¾ƒ"></a>å­—ç¬¦ä¸²æ¯”è¾ƒ</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>strcasecmp</td>
<td>ä¸åŒºåˆ†å¤§å°å†™æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>strcmp</td>
<td>åŒºåˆ†å¤§å°å†™æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>strncmp</td>
<td>æ¯”è¾ƒå­—ç¬¦ä¸²å‰Nä¸ªå­—ç¬¦ï¼ŒåŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td>strncasecmp</td>
<td>æ¯”è¾ƒå­—ç¬¦ä¸²å‰Nä¸ªå­—ç¬¦ï¼Œä¸åŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td>strnatmp</td>
<td>è‡ªç„¶é¡ºåºæ³•æ¯”è¾ƒå­—ç¬¦ä¸²é•¿åº¦ï¼ŒåŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td>strnatcasecmp</td>
<td>è‡ªç„¶é¡ºåºæ³•æ¯”è¾ƒå­—ç¬¦ä¸²é•¿åº¦ï¼Œä¸åŒºåˆ†å¤§å°å†™</td>
</tr>
</tbody>
</table>
<h2 id="å­—ç¬¦ä¸²æŸ¥æ‰¾æ›¿æ¢"><a href="#å­—ç¬¦ä¸²æŸ¥æ‰¾æ›¿æ¢" class="headerlink" title="å­—ç¬¦ä¸²æŸ¥æ‰¾æ›¿æ¢"></a>å­—ç¬¦ä¸²æŸ¥æ‰¾æ›¿æ¢</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>str_replace</td>
<td>å­—ç¬¦ä¸²æ›¿æ¢æ“ä½œï¼ŒåŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td>str_ireplace</td>
<td>å­—ç¬¦ä¸²æ›¿æ¢æ“ä½œï¼Œä¸åŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td>substr_count</td>
<td>ç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ¬¡æ•°</td>
</tr>
<tr>
<td>substr_replace</td>
<td>æ›¿æ¢å­—ç¬¦ä¸²ä¸­æŸä¸²ä¸ºå¦ä¸€ä¸ªå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>similar_text</td>
<td>è¿”å›ä¸¤å­—ç¬¦ä¸²ç›¸åŒå­—ç¬¦çš„æ•°é‡</td>
</tr>
<tr>
<td>strrchr</td>
<td>è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°ä½ç½®å¼€å§‹åˆ°æœ«å°¾çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>strstr</td>
<td>è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å¼€å§‹ä½ç½®åˆ°ç»“æŸä½ç½®çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>strchr</td>
<td>strstrçš„åˆ«åï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨å¦ä¸€ä¸ªä¸­é¦–æ¬¡å‡ºç°ä½ç½®å¼€å§‹åˆ°æœ«å°¾çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>stristr</td>
<td>è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å¼€å§‹ä½ç½®åˆ°ç»“æŸä½ç½®çš„å­—ç¬¦ä¸²ï¼Œä¸åŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td>strtr</td>
<td>è½¬æ¢å­—ç¬¦ä¸²ä¸­æŸäº›å­—ç¬¦</td>
</tr>
<tr>
<td>strpos</td>
<td>å¯»æ‰¾å­—ç¬¦ä¸­æŸäº›å­—ç¬¦æœ€å…ˆå‡ºç°çš„ä½ç½®</td>
</tr>
<tr>
<td>stripos</td>
<td>å¯»æ‰¾å­—ç¬¦ä¸­æŸäº›å­—ç¬¦æœ€å…ˆå‡ºç°çš„ä½ç½®ï¼Œä¸åŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td>strrpos</td>
<td>å¯»æ‰¾å­—ç¬¦ä¸­æŸäº›å­—ç¬¦æœ€åå‡ºç°çš„ä½ç½®</td>
</tr>
<tr>
<td>strripos</td>
<td>å¯»æ‰¾å­—ç¬¦ä¸­æŸäº›å­—ç¬¦æœ€åå‡ºç°çš„ä½ç½®ï¼Œä¸åŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td>strspn</td>
<td>è¿”å›å­—ç¬¦ä¸²ä¸­é¦–æ¬¡ç¬¦åˆmaskçš„å­—ç¬¦ä¸²é•¿åº¦</td>
</tr>
<tr>
<td>strcspn</td>
<td>è¿”å›å­—ç¬¦ä¸²ä¸­ä¸ç¬¦åˆmaskçš„å­—ç¬¦ä¸²çš„é•¿åº¦</td>
</tr>
</tbody>
</table>
<h2 id="å­—ç¬¦ä¸²ç»Ÿè®¡"><a href="#å­—ç¬¦ä¸²ç»Ÿè®¡" class="headerlink" title="å­—ç¬¦ä¸²ç»Ÿè®¡"></a>å­—ç¬¦ä¸²ç»Ÿè®¡</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>str_word_count</td>
<td>ç»Ÿè®¡å­—ç¬¦ä¸²å«æœ‰çš„å•è¯æ•°</td>
</tr>
<tr>
<td>strlen</td>
<td>ç»Ÿè®¡å­—ç¬¦ä¸²é•¿åº¦</td>
</tr>
<tr>
<td>count_chars</td>
<td>ç»Ÿè®¡å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å‡ºç°çš„æ¬¡æ•°ï¼ˆ0..255ï¼‰</td>
</tr>
</tbody>
</table>
<h2 id="å­—ç¬¦ä¸²ç¼–ç "><a href="#å­—ç¬¦ä¸²ç¼–ç " class="headerlink" title="å­—ç¬¦ä¸²ç¼–ç "></a>å­—ç¬¦ä¸²ç¼–ç </h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>md5</td>
<td>è®¡ç®—å­—ç¬¦ä¸²çš„ MD5 æ•£åˆ—å€¼</td>
</tr>
<tr>
<td>hash</td>
<td>ç”Ÿæˆä¸€ä¸ªå“ˆå¸Œç </td>
</tr>
</tbody>
</table>
<h1 id="æ•°ç»„ç›¸å…³å‡½æ•°"><a href="#æ•°ç»„ç›¸å…³å‡½æ•°" class="headerlink" title="æ•°ç»„ç›¸å…³å‡½æ•°"></a>æ•°ç»„ç›¸å…³å‡½æ•°</h1><h2 id="åˆ›å»ºæ•°ç»„"><a href="#åˆ›å»ºæ•°ç»„" class="headerlink" title="åˆ›å»ºæ•°ç»„"></a>åˆ›å»ºæ•°ç»„</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>array</td>
<td>ç”Ÿæˆä¸€ä¸ªæ•°ç»„</td>
</tr>
<tr>
<td>array_combine</td>
<td>ç”Ÿæˆä¸€ä¸ªæ•°ç»„ï¼Œç”¨ä¸€ä¸ªæ•°ç»„çš„å€¼ä½œä¸ºé”®åï¼Œå¦ä¸€ä¸ªæ•°ç»„çš„å€¼ä½œä¸ºå€¼</td>
</tr>
<tr>
<td>range</td>
<td>åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æŒ‡å®šèŒƒå›´çš„å…ƒç´ çš„æ•°ç»„</td>
</tr>
<tr>
<td>compact</td>
<td>åˆ›å»ºä¸€ä¸ªç”±å‚æ•°æ‰€å¸¦å˜é‡ç»„æˆçš„æ•°ç»„</td>
</tr>
<tr>
<td>array_fill</td>
<td>ç”¨ç»™å®šçš„å€¼å¡«å……ç”Ÿæˆæ•°ç»„</td>
</tr>
</tbody>
</table>
<h2 id="æ•°ç»„åˆå¹¶å’Œæ‹†åˆ†"><a href="#æ•°ç»„åˆå¹¶å’Œæ‹†åˆ†" class="headerlink" title="æ•°ç»„åˆå¹¶å’Œæ‹†åˆ†"></a>æ•°ç»„åˆå¹¶å’Œæ‹†åˆ†</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>array_chunk</td>
<td>æŠŠä¸€ä¸ªæ•°ç»„åˆ†å‰²ä¸ºæ–°çš„æ•°ç»„å—</td>
</tr>
<tr>
<td>array_merge</td>
<td>æŠŠä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„åˆå¹¶æˆä¸€ä¸ªæ•°ç»„</td>
</tr>
<tr>
<td>array_slice</td>
<td>åœ¨æ•°ç»„ä¸­æ ¹æ®æ¡ä»¶å–å‡ºä¸€æ®µå€¼ï¼Œå¹¶è¿”å›ã€‚</td>
</tr>
</tbody>
</table>
<h2 id="æ•°ç»„æ¯”è¾ƒ"><a href="#æ•°ç»„æ¯”è¾ƒ" class="headerlink" title="æ•°ç»„æ¯”è¾ƒ"></a>æ•°ç»„æ¯”è¾ƒ</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>array_diff</td>
<td>è¿”å›ä¸¤ä¸ªæ•°ç»„çš„å·®é›†æ•°ç»„</td>
</tr>
<tr>
<td>array_intersect</td>
<td>è¿”å›ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„çš„äº¤é›†æ•°ç»„</td>
</tr>
</tbody>
</table>
<h2 id="æ•°ç»„æŸ¥æ‰¾æ›¿æ¢"><a href="#æ•°ç»„æŸ¥æ‰¾æ›¿æ¢" class="headerlink" title="æ•°ç»„æŸ¥æ‰¾æ›¿æ¢"></a>æ•°ç»„æŸ¥æ‰¾æ›¿æ¢</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>array_search</td>
<td>åœ¨æ•°ç»„ä¸­æŸ¥æ‰¾ä¸€ä¸ªé”®å€¼</td>
</tr>
<tr>
<td>array_splice</td>
<td>æŠŠæ•°ç»„ä¸€éƒ¨åˆ†åˆ é™¤æŠŠå…¶ä»–å€¼æ›¿ä»£</td>
</tr>
<tr>
<td>array_sum</td>
<td>è¿”å›æ•°ç»„ä¸­æ‰€æœ‰å€¼çš„æ€»å’Œ</td>
</tr>
<tr>
<td>in_array</td>
<td>åœ¨æ•°ç»„ä¸­æœç´¢æŒ‡å®šçš„å€¼ï¼ŒåŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td>array_key_exists</td>
<td>åˆ¤æ–­æŸä¸ªæ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„key</td>
</tr>
</tbody>
</table>
<h2 id="æ•°ç»„æŒ‡é’ˆæ“ä½œ"><a href="#æ•°ç»„æŒ‡é’ˆæ“ä½œ" class="headerlink" title="æ•°ç»„æŒ‡é’ˆæ“ä½œ"></a>æ•°ç»„æŒ‡é’ˆæ“ä½œ</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>key</td>
<td>è¿”å›æ•°ç»„å†…éƒ¨æŒ‡é’ˆå½“å‰æŒ‡å‘çš„é”®å</td>
</tr>
<tr>
<td>current</td>
<td>è¿”å›æ•°ç»„ä¸­çš„å½“å‰å…ƒç´ </td>
</tr>
<tr>
<td>next</td>
<td>æŠŠæŒ‡å‘å½“å‰å…ƒç´ çš„æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ä½ç½®ï¼Œå¹¶è¿”å›å½“å‰å…ƒç´ çš„å€¼</td>
</tr>
<tr>
<td>prev</td>
<td>æŠŠæŒ‡å‘å½“å‰å…ƒç´ çš„æŒ‡é’ˆç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå…ƒç´ ä½ç½®ï¼Œå¹¶è¿”å›å½“å‰å…ƒç´ çš„å€¼</td>
</tr>
<tr>
<td>end</td>
<td>å°†æ•°ç»„å†…éƒ¨æŒ‡é’ˆæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ çš„å€¼ï¼ˆå¦‚æœæˆåŠŸï¼‰</td>
</tr>
<tr>
<td>reset</td>
<td>æŠŠæ•°ç»„å†…éƒ¨æŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ çš„å€¼</td>
</tr>
<tr>
<td>list</td>
<td>ç”¨æ•°ç»„ä¸­çš„å…ƒç´ ä¸ºä¸€ç»„å˜é‡èµ‹å€¼</td>
</tr>
<tr>
<td>array_shift</td>
<td>åˆ é™¤æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¢«åˆ é™¤å…ƒç´ çš„å€¼</td>
</tr>
<tr>
<td>array_unshif</td>
<td>åœ¨æ•°ç»„å¼€å¤´æ’å…¥ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>array_push</td>
<td>å‘æ•°ç»„æœ€åå‹å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ </td>
</tr>
<tr>
<td>array_pop</td>
<td>åˆ é™¤æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ </td>
</tr>
</tbody>
</table>
<h2 id="æ•°ç»„é”®å€¼æ“ä½œ"><a href="#æ•°ç»„é”®å€¼æ“ä½œ" class="headerlink" title="æ•°ç»„é”®å€¼æ“ä½œ"></a>æ•°ç»„é”®å€¼æ“ä½œ</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>shuffle</td>
<td>å°†æ•°ç»„æ‰“ä¹±ï¼Œä¿ç•™é”®å</td>
</tr>
<tr>
<td>count</td>
<td>è®¡ç®—æ•°ç»„ä¸­å•å…ƒä¸ªæ•°æˆ–è€…å¯¹è±¡å±æ€§ä¸ªæ•°</td>
</tr>
<tr>
<td>array_flip</td>
<td>è¿”å›ä¸€ä¸ªé”®å€¼ç¿»è½¬åçš„æ•°ç»„</td>
</tr>
<tr>
<td>array_keys</td>
<td>è¿”å›æ•°ç»„æ‰€æœ‰é”®ï¼Œç»„æˆä¸€ä¸ªæ•°ç»„</td>
</tr>
<tr>
<td>array_values</td>
<td>è¿”å›æ•°ç»„æ‰€æœ‰å€¼ï¼Œç»„æˆä¸€ä¸ªæ•°ç»„</td>
</tr>
<tr>
<td>array_reverse</td>
<td>è¿”å›ä¸€ä¸ªå…ƒç´ é¡ºåºç›¸åçš„æ•°ç»„</td>
</tr>
<tr>
<td>array_count_values</td>
<td>ç»Ÿè®¡æ•°ç»„ä¸­æ‰€æœ‰å€¼å‡ºç°çš„æ¬¡æ•°</td>
</tr>
<tr>
<td>array_rand</td>
<td>ä»æ•°ç»„ä¸­éšæœºæŠ½å–ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ ï¼Œæ³¨æ„æ˜¯é”®å</td>
</tr>
<tr>
<td>each</td>
<td>è¿”å›æ•°ç»„ä¸­å½“å‰çš„é”®ï¼å€¼å¯¹å¹¶å°†æ•°ç»„æŒ‡é’ˆå‘å‰ç§»åŠ¨ä¸€æ­¥</td>
</tr>
<tr>
<td>array_unique</td>
<td>ç§»é™¤æ•°ç»„ä¸­é‡å¤çš„å€¼</td>
</tr>
</tbody>
</table>
<h2 id="æ•°ç»„æ’åº"><a href="#æ•°ç»„æ’åº" class="headerlink" title="æ•°ç»„æ’åº"></a>æ•°ç»„æ’åº</h2><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>sort</td>
<td>å¯¹æ•°ç»„æ’åº</td>
</tr>
<tr>
<td>rsort</td>
<td>å¯¹æ•°ç»„é€†å‘æ’åº</td>
</tr>
<tr>
<td>asort</td>
<td>å¯¹æ•°ç»„è¿›è¡Œæ’åºå¹¶ä¿æŒç´¢å¼•å…³ç³»</td>
</tr>
<tr>
<td>arsort</td>
<td>å¯¹æ•°ç»„è¿›è¡Œé€†å‘æ’åºå¹¶ä¿æŒç´¢å¼•å…³ç³»</td>
</tr>
<tr>
<td>ksort</td>
<td>å¯¹æ•°ç»„æŒ‰ç…§é”®åæ’åº</td>
</tr>
<tr>
<td>krsort</td>
<td>å¯¹æ•°ç»„æŒ‰ç…§é”®åé€†å‘æ’åº</td>
</tr>
<tr>
<td>natsort</td>
<td>ç”¨â€œè‡ªç„¶æ’åºâ€ç®—æ³•å¯¹æ•°ç»„æ’åº</td>
</tr>
<tr>
<td>natcasesort</td>
<td>ç”¨â€œè‡ªç„¶æ’åºâ€ç®—æ³•å¯¹æ•°ç»„è¿›è¡Œä¸åŒºåˆ†å¤§å°å†™å­—æ¯çš„æ’åº</td>
</tr>
</tbody>
</table>
<h1 id="æ•°å­¦ç›¸å…³å‡½æ•°"><a href="#æ•°å­¦ç›¸å…³å‡½æ•°" class="headerlink" title="æ•°å­¦ç›¸å…³å‡½æ•°"></a>æ•°å­¦ç›¸å…³å‡½æ•°</h1><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>abs</td>
<td>æ±‚ç»å¯¹å€¼</td>
</tr>
<tr>
<td>ceil</td>
<td>è¿›ä¸€æ³•å–æ•´</td>
</tr>
<tr>
<td>floor</td>
<td>èˆå»æ³•å–æ•´</td>
</tr>
<tr>
<td>fmod</td>
<td>è¿”å›é™¤æ³•çš„æµ®ç‚¹æ•°ä½™æ•°</td>
</tr>
<tr>
<td>pow</td>
<td>è¿”å›æ•°çš„Næ¬¡æ–¹</td>
</tr>
<tr>
<td>round</td>
<td>æµ®ç‚¹æ•°å››èˆäº”å…¥æ³•</td>
</tr>
<tr>
<td>sqrt</td>
<td>æ±‚å¹³æ–¹æ ¹</td>
</tr>
<tr>
<td>max</td>
<td>æ±‚æœ€å¤§å€¼</td>
</tr>
<tr>
<td>min</td>
<td>æ±‚æœ€å°å€¼</td>
</tr>
<tr>
<td>mt_rand</td>
<td>æ›´å¥½çš„éšæœºæ•°</td>
</tr>
<tr>
<td>rand</td>
<td>éšæœºæ•°</td>
</tr>
<tr>
<td>pi</td>
<td>è·å¾—åœ†å‘¨ç‡</td>
</tr>
<tr>
<td>octdec</td>
<td>å…«è¿›åˆ¶è½¬æ¢ä¸ºåè¿›åˆ¶</td>
</tr>
</tbody>
</table>
<h1 id="mysqlç›¸å…³å‡½æ•°"><a href="#mysqlç›¸å…³å‡½æ•°" class="headerlink" title="mysqlç›¸å…³å‡½æ•°"></a>mysqlç›¸å…³å‡½æ•°</h1><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>mysql_affected_rows</td>
<td>å–å¾—å‰ä¸€æ¬¡ MySQL æ“ä½œæ‰€å½±å“çš„è®°å½•è¡Œæ•°</td>
</tr>
<tr>
<td>mysql_client_encoding</td>
<td>è¿”å›å­—ç¬¦é›†çš„åç§°</td>
</tr>
<tr>
<td>mysql_close</td>
<td>å…³é—­ MySQL è¿æ¥</td>
</tr>
<tr>
<td>mysql_connect</td>
<td>æ‰“å¼€ä¸€ä¸ªåˆ° MySQL æœåŠ¡å™¨çš„è¿æ¥</td>
</tr>
<tr>
<td>mysql_create_db</td>
<td>æ–°å»ºä¸€ä¸ª MySQL æ•°æ®åº“</td>
</tr>
<tr>
<td>mysql_data_seek</td>
<td>ç§»åŠ¨å†…éƒ¨ç»“æœçš„æŒ‡é’ˆ</td>
</tr>
<tr>
<td>mysql_db_name</td>
<td>å–å¾—ç»“æœæ•°æ®</td>
</tr>
<tr>
<td>mysql_db_query</td>
<td>å‘é€ä¸€æ¡ MySQL æŸ¥è¯¢</td>
</tr>
<tr>
<td>mysql_drop_db</td>
<td>ä¸¢å¼ƒï¼ˆåˆ é™¤ï¼‰ä¸€ä¸ª MySQL æ•°æ®åº“</td>
</tr>
<tr>
<td>mysql_errno</td>
<td>è¿”å›ä¸Šä¸€ä¸ª MySQL æ“ä½œä¸­çš„é”™è¯¯ä¿¡æ¯çš„æ•°å­—ç¼–ç </td>
</tr>
<tr>
<td>mysql_error</td>
<td>è¿”å›ä¸Šä¸€ä¸ª MySQL æ“ä½œäº§ç”Ÿçš„æ–‡æœ¬é”™è¯¯ä¿¡æ¯</td>
</tr>
<tr>
<td>mysql_escape_string</td>
<td>è½¬ä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²ç”¨äº mysql_query</td>
</tr>
<tr>
<td>mysql_fetch_array</td>
<td>ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºå…³è”æ•°ç»„ï¼Œæˆ–æ•°å­—æ•°ç»„ï¼Œæˆ–äºŒè€…å…¼æœ‰</td>
</tr>
<tr>
<td>mysql_fetch_assoc</td>
<td>ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºå…³è”æ•°ç»„</td>
</tr>
<tr>
<td>mysql_fetch_field</td>
<td>ä»ç»“æœé›†ä¸­å–å¾—åˆ—ä¿¡æ¯å¹¶ä½œä¸ºå¯¹è±¡è¿”å›</td>
</tr>
<tr>
<td>mysql_fetch_lengths</td>
<td>å–å¾—ç»“æœé›†ä¸­æ¯ä¸ªè¾“å‡ºçš„é•¿åº¦</td>
</tr>
<tr>
<td>mysql_fetch_object</td>
<td>ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºå¯¹è±¡</td>
</tr>
<tr>
<td>mysql_fetch_object</td>
<td>ä»ç»“æœé›†ä¸­å–å¾—ä¸€è¡Œä½œä¸ºæšä¸¾æ•°ç»„</td>
</tr>
<tr>
<td>mysql_field_flags</td>
<td>ä»ç»“æœä¸­å–å¾—å’ŒæŒ‡å®šå­—æ®µå…³è”çš„æ ‡å¿—</td>
</tr>
<tr>
<td>mysql_field_len</td>
<td>è¿”å›æŒ‡å®šå­—æ®µçš„é•¿åº¦</td>
</tr>
<tr>
<td>mysql_field_name</td>
<td>å–å¾—ç»“æœä¸­æŒ‡å®šå­—æ®µçš„å­—æ®µå</td>
</tr>
<tr>
<td>mysql_field_seek</td>
<td>å°†ç»“æœé›†ä¸­çš„æŒ‡é’ˆè®¾å®šä¸ºåˆ¶å®šçš„å­—æ®µåç§»é‡</td>
</tr>
<tr>
<td>mysql_field_table</td>
<td>å–å¾—æŒ‡å®šå­—æ®µæ‰€åœ¨çš„è¡¨å</td>
</tr>
<tr>
<td>mysql_field_type</td>
<td>å–å¾—ç»“æœé›†ä¸­æŒ‡å®šå­—æ®µçš„ç±»å‹</td>
</tr>
<tr>
<td>mysql_free_result</td>
<td>é‡Šæ”¾ç»“æœå†…å­˜</td>
</tr>
<tr>
<td>mysql_get_client_info</td>
<td>å–å¾— MySQL å®¢æˆ·ç«¯ä¿¡æ¯</td>
</tr>
<tr>
<td>mysql_get_host_info</td>
<td>å–å¾— MySQL ä¸»æœºä¿¡æ¯</td>
</tr>
<tr>
<td>mysql_get_proto_info</td>
<td>å–å¾— MySQL åè®®ä¿¡æ¯</td>
</tr>
<tr>
<td>mysql_get_server_info</td>
<td>å–å¾— MySQL æœåŠ¡å™¨ä¿¡æ¯</td>
</tr>
<tr>
<td>mysql_info</td>
<td>å–å¾—æœ€è¿‘ä¸€æ¡æŸ¥è¯¢çš„ä¿¡æ¯</td>
</tr>
<tr>
<td>mysql_insert_id</td>
<td>å–å¾—ä¸Šä¸€æ­¥ INSERT æ“ä½œäº§ç”Ÿçš„ ID</td>
</tr>
<tr>
<td>mysql_list_dbs</td>
<td>åˆ—å‡º MySQL æœåŠ¡å™¨ä¸­æ‰€æœ‰çš„æ•°æ®åº“</td>
</tr>
<tr>
<td>mysql_list_fields</td>
<td>åˆ—å‡º MySQL ç»“æœä¸­çš„å­—æ®µ</td>
</tr>
<tr>
<td>mysql_list_processes</td>
<td>åˆ—å‡º MySQL è¿›ç¨‹</td>
</tr>
<tr>
<td>mysql_list_tables</td>
<td>åˆ—å‡º MySQL æ•°æ®åº“ä¸­çš„è¡¨</td>
</tr>
<tr>
<td>mysql_num_fields</td>
<td>å–å¾—ç»“æœé›†ä¸­å­—æ®µçš„æ•°ç›®</td>
</tr>
<tr>
<td>mysql_num_rows</td>
<td>å–å¾—ç»“æœé›†ä¸­è¡Œçš„æ•°ç›®</td>
</tr>
<tr>
<td>mysql_pconnect</td>
<td>æ‰“å¼€ä¸€ä¸ªåˆ° MySQL æœåŠ¡å™¨çš„æŒä¹…è¿æ¥</td>
</tr>
<tr>
<td>mysql_ping</td>
<td>Ping ä¸€ä¸ªæœåŠ¡å™¨è¿æ¥ï¼Œå¦‚æœæ²¡æœ‰è¿æ¥åˆ™é‡æ–°è¿æ¥</td>
</tr>
<tr>
<td>mysql_query</td>
<td>å‘é€ä¸€æ¡ MySQL æŸ¥è¯¢</td>
</tr>
<tr>
<td>mysql_real_escape_string</td>
<td>è½¬ä¹‰ SQL è¯­å¥ä¸­ä½¿ç”¨çš„å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼Œå¹¶è€ƒè™‘åˆ°è¿æ¥çš„å½“å‰å­—ç¬¦é›†</td>
</tr>
<tr>
<td>mysql_result</td>
<td>å–å¾—ç»“æœæ•°æ®</td>
</tr>
<tr>
<td>mysql_select_db</td>
<td>é€‰æ‹© MySQL æ•°æ®åº“</td>
</tr>
<tr>
<td>mysql_set_charset</td>
<td>è®¾ç½®å®¢æˆ·ç«¯å­—ç¬¦é›†</td>
</tr>
<tr>
<td>mysql_stat</td>
<td>å–å¾—å½“å‰ç³»ç»ŸçŠ¶æ€</td>
</tr>
<tr>
<td>mysql_tablename</td>
<td>å–å¾—è¡¨å</td>
</tr>
<tr>
<td>mysql_thread_id</td>
<td>è¿”å›å½“å‰çº¿ç¨‹çš„ ID</td>
</tr>
<tr>
<td>mysql_unbuffered_query</td>
<td>å‘ MySQL å‘é€ä¸€æ¡ SQL æŸ¥è¯¢ï¼Œå¹¶ä¸è·å–å’Œç¼“å­˜ç»“æœçš„è¡Œ</td>
</tr>
</tbody>
</table>
<h1 id="æ–‡ä»¶ç›®å½•å¤„ç†ç›¸å…³å‡½æ•°"><a href="#æ–‡ä»¶ç›®å½•å¤„ç†ç›¸å…³å‡½æ•°" class="headerlink" title="æ–‡ä»¶ç›®å½•å¤„ç†ç›¸å…³å‡½æ•°"></a>æ–‡ä»¶ç›®å½•å¤„ç†ç›¸å…³å‡½æ•°</h1><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>basename</td>
<td>è¿”å›è·¯å¾„ä¸­çš„æ–‡ä»¶åéƒ¨åˆ†</td>
</tr>
<tr>
<td>chgrp</td>
<td>æ”¹å˜æ–‡ä»¶æ‰€å±çš„ç»„</td>
</tr>
<tr>
<td>chmod</td>
<td>æ”¹å˜æ–‡ä»¶æ¨¡å¼</td>
</tr>
<tr>
<td>chown</td>
<td>æ”¹å˜æ–‡ä»¶çš„æ‰€æœ‰è€…</td>
</tr>
<tr>
<td>clearstatcache</td>
<td>æ¸…é™¤æ–‡ä»¶çŠ¶æ€ç¼“å­˜</td>
</tr>
<tr>
<td>copy</td>
<td>æ‹·è´æ–‡ä»¶</td>
</tr>
<tr>
<td>delete</td>
<td>å‚è§ unlink æˆ– unset</td>
</tr>
<tr>
<td>dirname</td>
<td>è¿”å›è·¯å¾„ä¸­çš„ç›®å½•éƒ¨åˆ†</td>
</tr>
<tr>
<td>disk_free_space</td>
<td>è¿”å›ç›®å½•ä¸­çš„å¯ç”¨ç©ºé—´</td>
</tr>
<tr>
<td>disk_total_space</td>
<td>è¿”å›ä¸€ä¸ªç›®å½•çš„ç£ç›˜æ€»å¤§å°</td>
</tr>
<tr>
<td>diskfreespace</td>
<td>disk_free_space çš„åˆ«å</td>
</tr>
<tr>
<td>fclose</td>
<td>å…³é—­ä¸€ä¸ªå·²æ‰“å¼€çš„æ–‡ä»¶æŒ‡é’ˆ</td>
</tr>
<tr>
<td>feof</td>
<td>æµ‹è¯•æ–‡ä»¶æŒ‡é’ˆæ˜¯å¦åˆ°äº†æ–‡ä»¶ç»“æŸçš„ä½ç½®</td>
</tr>
<tr>
<td>fflush</td>
<td>å°†ç¼“å†²å†…å®¹è¾“å‡ºåˆ°æ–‡ä»¶</td>
</tr>
<tr>
<td>fgetc</td>
<td>ä»æ–‡ä»¶æŒ‡é’ˆä¸­è¯»å–å­—ç¬¦</td>
</tr>
<tr>
<td>fgetcsv</td>
<td>ä»æ–‡ä»¶æŒ‡é’ˆä¸­è¯»å…¥ä¸€è¡Œå¹¶è§£æ CSV å­—æ®µ</td>
</tr>
<tr>
<td>fgets</td>
<td>ä»æ–‡ä»¶æŒ‡é’ˆä¸­è¯»å–ä¸€è¡Œ</td>
</tr>
<tr>
<td>fgetss</td>
<td>ä»æ–‡ä»¶æŒ‡é’ˆä¸­è¯»å–ä¸€è¡Œå¹¶è¿‡æ»¤æ‰ HTML æ ‡è®°</td>
</tr>
<tr>
<td>file_exists</td>
<td>æ£€æŸ¥æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨</td>
</tr>
<tr>
<td>file_get_contents</td>
<td>å°†æ•´ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>file_put_contents</td>
<td>å°†ä¸€ä¸ªå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶</td>
</tr>
<tr>
<td>file</td>
<td>æŠŠæ•´ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªæ•°ç»„ä¸­</td>
</tr>
<tr>
<td>fileatime</td>
<td>å–å¾—æ–‡ä»¶çš„ä¸Šæ¬¡è®¿é—®æ—¶é—´</td>
</tr>
<tr>
<td>filectime</td>
<td>å–å¾—æ–‡ä»¶çš„ inode ä¿®æ”¹æ—¶é—´</td>
</tr>
<tr>
<td>filegroup</td>
<td>å–å¾—æ–‡ä»¶çš„ç»„</td>
</tr>
<tr>
<td>fileinode</td>
<td>å–å¾—æ–‡ä»¶çš„ inode</td>
</tr>
<tr>
<td>filemtime</td>
<td>å–å¾—æ–‡ä»¶ä¿®æ”¹æ—¶é—´</td>
</tr>
<tr>
<td>fileowner</td>
<td>å–å¾—æ–‡ä»¶çš„æ‰€æœ‰è€…</td>
</tr>
<tr>
<td>fileperms</td>
<td>å–å¾—æ–‡ä»¶çš„æƒé™</td>
</tr>
<tr>
<td>filesize</td>
<td>å–å¾—æ–‡ä»¶å¤§å°</td>
</tr>
<tr>
<td>filetype</td>
<td>å–å¾—æ–‡ä»¶ç±»å‹</td>
</tr>
<tr>
<td>flock</td>
<td>è½»ä¾¿çš„å’¨è¯¢æ–‡ä»¶é”å®š</td>
</tr>
<tr>
<td>fnmatch</td>
<td>ç”¨æ¨¡å¼åŒ¹é…æ–‡ä»¶å</td>
</tr>
<tr>
<td>fopen</td>
<td>æ‰“å¼€æ–‡ä»¶æˆ–è€… URL</td>
</tr>
<tr>
<td>fpassthru</td>
<td>è¾“å‡ºæ–‡ä»¶æŒ‡é’ˆå¤„çš„æ‰€æœ‰å‰©ä½™æ•°æ®</td>
</tr>
<tr>
<td>fputcsv</td>
<td>å°†è¡Œæ ¼å¼åŒ–ä¸º CSV å¹¶å†™å…¥æ–‡ä»¶æŒ‡é’ˆ</td>
</tr>
<tr>
<td>fputs</td>
<td>fwrite çš„åˆ«å</td>
</tr>
<tr>
<td>fread</td>
<td>è¯»å–æ–‡ä»¶ï¼ˆå¯å®‰å…¨ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶)</td>
</tr>
<tr>
<td>fscanf</td>
<td>ä»æ–‡ä»¶ä¸­æ ¼å¼åŒ–è¾“å…¥</td>
</tr>
<tr>
<td>fseek</td>
<td>åœ¨æ–‡ä»¶æŒ‡é’ˆä¸­å®šä½</td>
</tr>
<tr>
<td>fstat</td>
<td>é€šè¿‡å·²æ‰“å¼€çš„æ–‡ä»¶æŒ‡é’ˆå–å¾—æ–‡ä»¶ä¿¡æ¯</td>
</tr>
<tr>
<td>ftell</td>
<td>è¿”å›æ–‡ä»¶æŒ‡é’ˆè¯»/å†™çš„ä½ç½®</td>
</tr>
<tr>
<td>ftruncate</td>
<td>å°†æ–‡ä»¶æˆªæ–­åˆ°ç»™å®šçš„é•¿åº¦</td>
</tr>
<tr>
<td>fwrite</td>
<td>å†™å…¥æ–‡ä»¶ï¼ˆå¯å®‰å…¨ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰</td>
</tr>
<tr>
<td>glob</td>
<td>å¯»æ‰¾ä¸æ¨¡å¼åŒ¹é…çš„æ–‡ä»¶è·¯å¾„</td>
</tr>
<tr>
<td>is_dir</td>
<td>åˆ¤æ–­ç»™å®šæ–‡ä»¶åæ˜¯å¦æ˜¯ä¸€ä¸ªç›®å½•</td>
</tr>
<tr>
<td>is_executable</td>
<td>åˆ¤æ–­ç»™å®šæ–‡ä»¶åæ˜¯å¦å¯æ‰§è¡Œ</td>
</tr>
<tr>
<td>is_file</td>
<td>åˆ¤æ–­ç»™å®šæ–‡ä»¶åæ˜¯å¦ä¸ºä¸€ä¸ªæ­£å¸¸çš„æ–‡ä»¶</td>
</tr>
<tr>
<td>is_link</td>
<td>åˆ¤æ–­ç»™å®šæ–‡ä»¶åæ˜¯å¦ä¸ºä¸€ä¸ªç¬¦å·è¿æ¥</td>
</tr>
<tr>
<td>is_readable</td>
<td>åˆ¤æ–­ç»™å®šæ–‡ä»¶åæ˜¯å¦å¯è¯»</td>
</tr>
<tr>
<td>is_uploaded_file</td>
<td>åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ˜¯é€šè¿‡ HTTP POST ä¸Šä¼ çš„</td>
</tr>
<tr>
<td>is_writable</td>
<td>åˆ¤æ–­ç»™å®šçš„æ–‡ä»¶åæ˜¯å¦å¯å†™</td>
</tr>
<tr>
<td>is_writeable</td>
<td>is_writable çš„åˆ«å</td>
</tr>
<tr>
<td>lchgrp</td>
<td>Changes group ownership of symlink</td>
</tr>
<tr>
<td>lchown</td>
<td>Changes user ownership of symlink</td>
</tr>
<tr>
<td>link</td>
<td>å»ºç«‹ä¸€ä¸ªç¡¬è¿æ¥</td>
</tr>
<tr>
<td>linkinfo</td>
<td>è·å–ä¸€ä¸ªè¿æ¥çš„ä¿¡æ¯</td>
</tr>
<tr>
<td>lstat</td>
<td>ç»™å‡ºä¸€ä¸ªæ–‡ä»¶æˆ–ç¬¦å·è¿æ¥çš„ä¿¡æ¯</td>
</tr>
<tr>
<td>mkdir</td>
<td>æ–°å»ºç›®å½•</td>
</tr>
<tr>
<td>move_uploaded_file</td>
<td>å°†ä¸Šä¼ çš„æ–‡ä»¶ç§»åŠ¨åˆ°æ–°ä½ç½®</td>
</tr>
<tr>
<td>parse_ini_file</td>
<td>è§£æä¸€ä¸ªé…ç½®æ–‡ä»¶</td>
</tr>
<tr>
<td>parse_ini_string</td>
<td>Parse a configuration string</td>
</tr>
<tr>
<td>pathinfo</td>
<td>è¿”å›æ–‡ä»¶è·¯å¾„çš„ä¿¡æ¯</td>
</tr>
<tr>
<td>pclose</td>
<td>å…³é—­è¿›ç¨‹æ–‡ä»¶æŒ‡é’ˆ</td>
</tr>
<tr>
<td>popen</td>
<td>æ‰“å¼€è¿›ç¨‹æ–‡ä»¶æŒ‡é’ˆ</td>
</tr>
<tr>
<td>readfile</td>
<td>è¾“å‡ºä¸€ä¸ªæ–‡ä»¶</td>
</tr>
<tr>
<td>readlink</td>
<td>è¿”å›ç¬¦å·è¿æ¥æŒ‡å‘çš„ç›®æ ‡</td>
</tr>
<tr>
<td>realpath_cache_get</td>
<td>Get realpath cache entries</td>
</tr>
<tr>
<td>realpath_cache_size</td>
<td>Get realpath cache size</td>
</tr>
<tr>
<td>realpath</td>
<td>è¿”å›è§„èŒƒåŒ–çš„ç»å¯¹è·¯å¾„å</td>
</tr>
<tr>
<td>rename</td>
<td>é‡å‘½åä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•</td>
</tr>
<tr>
<td>rewind</td>
<td>å€’å›æ–‡ä»¶æŒ‡é’ˆçš„ä½ç½®</td>
</tr>
<tr>
<td>rmdir</td>
<td>åˆ é™¤ç›®å½•</td>
</tr>
<tr>
<td>set_file_buffer</td>
<td>stream_set_write_buffer çš„åˆ«å</td>
</tr>
<tr>
<td>stat</td>
<td>ç»™å‡ºæ–‡ä»¶çš„ä¿¡æ¯</td>
</tr>
<tr>
<td>symlink</td>
<td>å»ºç«‹ç¬¦å·è¿æ¥</td>
</tr>
<tr>
<td>tempnam</td>
<td>å»ºç«‹ä¸€ä¸ªå…·æœ‰å”¯ä¸€æ–‡ä»¶åçš„æ–‡ä»¶</td>
</tr>
<tr>
<td>tmpfile</td>
<td>å»ºç«‹ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶</td>
</tr>
<tr>
<td>touch</td>
<td>è®¾å®šæ–‡ä»¶çš„è®¿é—®å’Œä¿®æ”¹æ—¶é—´</td>
</tr>
<tr>
<td>umask</td>
<td>æ”¹å˜å½“å‰çš„ umask</td>
</tr>
<tr>
<td>unlink</td>
<td>åˆ é™¤æ–‡ä»¶</td>
</tr>
</tbody>
</table>
<h1 id="GD-Imageå‡½æ•°"><a href="#GD-Imageå‡½æ•°" class="headerlink" title="GD/Imageå‡½æ•°"></a>GD/Imageå‡½æ•°</h1><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>gd_info</td>
<td>å–å¾—å½“å‰å®‰è£…çš„ GD åº“çš„ä¿¡æ¯</td>
</tr>
<tr>
<td>getimagesize</td>
<td>å–å¾—å›¾åƒå¤§å°</td>
</tr>
<tr>
<td>getimagesizefromstring</td>
<td>Get the size of an image from a string</td>
</tr>
<tr>
<td>image_type_to_extension</td>
<td>å–å¾—å›¾åƒç±»å‹çš„æ–‡ä»¶åç¼€</td>
</tr>
<tr>
<td>image_type_to_mime_type</td>
<td>å–å¾— getimagesizeï¼Œexif_read_dataï¼Œexif_thumbnailï¼Œexif_imagetype æ‰€è¿”å›çš„å›¾åƒç±»å‹çš„ MIME ç±»å‹</td>
</tr>
<tr>
<td>image2wbmp</td>
<td>ä»¥ WBMP æ ¼å¼å°†å›¾åƒè¾“å‡ºåˆ°æµè§ˆå™¨æˆ–æ–‡ä»¶</td>
</tr>
<tr>
<td>imagealphablending</td>
<td>è®¾å®šå›¾åƒçš„æ··è‰²æ¨¡å¼</td>
</tr>
<tr>
<td>imageantialias</td>
<td>æ˜¯å¦ä½¿ç”¨æŠ—é”¯é½¿ï¼ˆantialiasï¼‰åŠŸèƒ½</td>
</tr>
<tr>
<td>imagearc</td>
<td>ç”»æ¤­åœ†å¼§</td>
</tr>
<tr>
<td>imagechar</td>
<td>æ°´å¹³åœ°ç”»ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>imagecharup</td>
<td>å‚ç›´åœ°ç”»ä¸€ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>imagecolorallocate</td>
<td>ä¸ºä¸€å¹…å›¾åƒåˆ†é…é¢œè‰²</td>
</tr>
<tr>
<td>imagecolorallocatealpha</td>
<td>ä¸ºä¸€å¹…å›¾åƒåˆ†é…é¢œè‰² + alpha</td>
</tr>
<tr>
<td>imagecolorat</td>
<td>å–å¾—æŸåƒç´ çš„é¢œè‰²ç´¢å¼•å€¼</td>
</tr>
<tr>
<td>imagecolorclosest</td>
<td>å–å¾—ä¸æŒ‡å®šçš„é¢œè‰²æœ€æ¥è¿‘çš„é¢œè‰²çš„ç´¢å¼•å€¼</td>
</tr>
<tr>
<td>imagecolorclosestalpha</td>
<td>å–å¾—ä¸æŒ‡å®šçš„é¢œè‰²åŠ é€æ˜åº¦æœ€æ¥è¿‘çš„é¢œè‰²</td>
</tr>
<tr>
<td>imagecolorclosesthwb</td>
<td>å–å¾—ä¸ç»™å®šé¢œè‰²æœ€æ¥è¿‘çš„è‰²åº¦çš„é»‘ç™½è‰²çš„ç´¢å¼•</td>
</tr>
<tr>
<td>imagecolordeallocate</td>
<td>å–æ¶ˆå›¾åƒé¢œè‰²çš„åˆ†é…</td>
</tr>
<tr>
<td>imagecolorexact</td>
<td>å–å¾—æŒ‡å®šé¢œè‰²çš„ç´¢å¼•å€¼</td>
</tr>
<tr>
<td>imagecolorexactalpha</td>
<td>å–å¾—æŒ‡å®šçš„é¢œè‰²åŠ é€æ˜åº¦çš„ç´¢å¼•å€¼</td>
</tr>
<tr>
<td>imagecolormatch</td>
<td>ä½¿ä¸€ä¸ªå›¾åƒä¸­è°ƒè‰²æ¿ç‰ˆæœ¬çš„é¢œè‰²ä¸çœŸå½©è‰²ç‰ˆæœ¬æ›´èƒ½åŒ¹é…</td>
</tr>
<tr>
<td>imagecolorresolve</td>
<td>å–å¾—æŒ‡å®šé¢œè‰²çš„ç´¢å¼•å€¼æˆ–æœ‰å¯èƒ½å¾—åˆ°çš„æœ€æ¥è¿‘çš„æ›¿ä»£å€¼</td>
</tr>
<tr>
<td>imagecolorresolvealpha</td>
<td>å–å¾—æŒ‡å®šé¢œè‰² + alpha çš„ç´¢å¼•å€¼æˆ–æœ‰å¯èƒ½å¾—åˆ°çš„æœ€æ¥è¿‘çš„æ›¿ä»£å€¼</td>
</tr>
<tr>
<td>imagecolorset</td>
<td>ç»™æŒ‡å®šè°ƒè‰²æ¿ç´¢å¼•è®¾å®šé¢œè‰²</td>
</tr>
<tr>
<td>imagecolorsforindex</td>
<td>å–å¾—æŸç´¢å¼•çš„é¢œè‰²</td>
</tr>
<tr>
<td>imagecolorstotal</td>
<td>å–å¾—ä¸€å¹…å›¾åƒçš„è°ƒè‰²æ¿ä¸­é¢œè‰²çš„æ•°ç›®</td>
</tr>
<tr>
<td>imagecolortransparent</td>
<td>å°†æŸä¸ªé¢œè‰²å®šä¹‰ä¸ºé€æ˜è‰²</td>
</tr>
<tr>
<td>imageconvolution</td>
<td>ç”¨ç³»æ•° div å’Œ offset ç”³è¯·ä¸€ä¸ª 3x3 çš„å·ç§¯çŸ©é˜µ</td>
</tr>
<tr>
<td>imagecopy</td>
<td>æ‹·è´å›¾åƒçš„ä¸€éƒ¨åˆ†</td>
</tr>
<tr>
<td>imagecopymerge</td>
<td>æ‹·è´å¹¶åˆå¹¶å›¾åƒçš„ä¸€éƒ¨åˆ†</td>
</tr>
<tr>
<td>imagecopymergegray</td>
<td>ç”¨ç°åº¦æ‹·è´å¹¶åˆå¹¶å›¾åƒçš„ä¸€éƒ¨åˆ†</td>
</tr>
<tr>
<td>imagecopyresampled</td>
<td>é‡é‡‡æ ·æ‹·è´éƒ¨åˆ†å›¾åƒå¹¶è°ƒæ•´å¤§å°</td>
</tr>
<tr>
<td>imagecopyresized</td>
<td>æ‹·è´éƒ¨åˆ†å›¾åƒå¹¶è°ƒæ•´å¤§å°</td>
</tr>
<tr>
<td>imagecreate</td>
<td>æ–°å»ºä¸€ä¸ªåŸºäºè°ƒè‰²æ¿çš„å›¾åƒ</td>
</tr>
<tr>
<td>imagecreatefromgd2</td>
<td>ä» GD2 æ–‡ä»¶æˆ– URL æ–°å»ºä¸€å›¾åƒ</td>
</tr>
<tr>
<td>imagecreatefromgd2part</td>
<td>ä»ç»™å®šçš„ GD2 æ–‡ä»¶æˆ– URL ä¸­çš„éƒ¨åˆ†æ–°å»ºä¸€å›¾åƒ</td>
</tr>
<tr>
<td>imagecreatefromgd</td>
<td>ä» GD æ–‡ä»¶æˆ– URL æ–°å»ºä¸€å›¾åƒ</td>
</tr>
<tr>
<td>imagecreatefromgif</td>
<td>ç”±æ–‡ä»¶æˆ–URLåˆ›å»ºä¸€ä¸ªæ–°å›¾è±¡</td>
</tr>
<tr>
<td>imagecreatefromjpeg</td>
<td>ç”±æ–‡ä»¶æˆ–URLåˆ›å»ºä¸€ä¸ªæ–°å›¾è±¡</td>
</tr>
<tr>
<td>imagecreatefrompng</td>
<td>ç”±æ–‡ä»¶æˆ–URLåˆ›å»ºä¸€ä¸ªæ–°å›¾è±¡</td>
</tr>
<tr>
<td>imagecreatefromstring</td>
<td>ä»å­—ç¬¦ä¸²ä¸­çš„å›¾åƒæµæ–°å»ºä¸€å›¾åƒ</td>
</tr>
<tr>
<td>imagecreatefromwbmp</td>
<td>ç”±æ–‡ä»¶æˆ–URLåˆ›å»ºä¸€ä¸ªæ–°å›¾è±¡</td>
</tr>
<tr>
<td>imagecreatefromxbm</td>
<td>ç”±æ–‡ä»¶æˆ–URLåˆ›å»ºä¸€ä¸ªæ–°å›¾è±¡</td>
</tr>
<tr>
<td>imagecreatefromxpm</td>
<td>ç”±æ–‡ä»¶æˆ–URLåˆ›å»ºä¸€ä¸ªæ–°å›¾è±¡</td>
</tr>
<tr>
<td>imagecreatetruecolor</td>
<td>æ–°å»ºä¸€ä¸ªçœŸå½©è‰²å›¾åƒ</td>
</tr>
<tr>
<td>imagedashedline</td>
<td>ç”»ä¸€è™šçº¿</td>
</tr>
<tr>
<td>imagedestroy</td>
<td>é”€æ¯ä¸€å›¾åƒ</td>
</tr>
<tr>
<td>imageellipse</td>
<td>ç”»ä¸€ä¸ªæ¤­åœ†</td>
</tr>
<tr>
<td>imagefill</td>
<td>åŒºåŸŸå¡«å……</td>
</tr>
<tr>
<td>imagefilledarc</td>
<td>ç”»ä¸€æ¤­åœ†å¼§ä¸”å¡«å……</td>
</tr>
<tr>
<td>imagefilledellipse</td>
<td>ç”»ä¸€æ¤­åœ†å¹¶å¡«å……</td>
</tr>
<tr>
<td>imagefilledpolygon</td>
<td>ç”»ä¸€å¤šè¾¹å½¢å¹¶å¡«å……</td>
</tr>
<tr>
<td>imagefilledrectangle</td>
<td>ç”»ä¸€çŸ©å½¢å¹¶å¡«å……</td>
</tr>
<tr>
<td>imagefilltoborder</td>
<td>åŒºåŸŸå¡«å……åˆ°æŒ‡å®šé¢œè‰²çš„è¾¹ç•Œä¸ºæ­¢</td>
</tr>
<tr>
<td>imagefilter</td>
<td>å¯¹å›¾åƒä½¿ç”¨è¿‡æ»¤å™¨</td>
</tr>
<tr>
<td>imagefontheight</td>
<td>å–å¾—å­—ä½“é«˜åº¦</td>
</tr>
<tr>
<td>imagefontwidth</td>
<td>å–å¾—å­—ä½“å®½åº¦</td>
</tr>
<tr>
<td>imageftbbox</td>
<td>ç»™å‡ºä¸€ä¸ªä½¿ç”¨ FreeType 2 å­—ä½“çš„æ–‡æœ¬æ¡†</td>
</tr>
<tr>
<td>imagefttext</td>
<td>ä½¿ç”¨ FreeType 2 å­—ä½“å°†æ–‡æœ¬å†™å…¥å›¾åƒ</td>
</tr>
<tr>
<td>imagegammacorrect</td>
<td>å¯¹ GD å›¾åƒåº”ç”¨ gamma ä¿®æ­£</td>
</tr>
<tr>
<td>imagegd2</td>
<td>å°† GD2 å›¾åƒè¾“å‡ºåˆ°æµè§ˆå™¨æˆ–æ–‡ä»¶</td>
</tr>
<tr>
<td>imagegd</td>
<td>å°† GD å›¾åƒè¾“å‡ºåˆ°æµè§ˆå™¨æˆ–æ–‡ä»¶</td>
</tr>
<tr>
<td>imagegif</td>
<td>è¾“å‡ºå›¾è±¡åˆ°æµè§ˆå™¨æˆ–æ–‡ä»¶</td>
</tr>
<tr>
<td>imagegrabscreen</td>
<td>Captures the whole screen</td>
</tr>
<tr>
<td>imagegrabwindow</td>
<td>Captures a window</td>
</tr>
<tr>
<td>imageinterlace</td>
<td>æ¿€æ´»æˆ–ç¦æ­¢éš”è¡Œæ‰«æ</td>
</tr>
<tr>
<td>imageistruecolor</td>
<td>æ£€æŸ¥å›¾åƒæ˜¯å¦ä¸ºçœŸå½©è‰²å›¾åƒ</td>
</tr>
<tr>
<td>imagejpeg</td>
<td>è¾“å‡ºå›¾è±¡åˆ°æµè§ˆå™¨æˆ–æ–‡ä»¶</td>
</tr>
<tr>
<td>imagelayereffect</td>
<td>è®¾å®š alpha æ··è‰²æ ‡å¿—ä»¥ä½¿ç”¨ç»‘å®šçš„ libgd åˆ†å±‚æ•ˆæœ</td>
</tr>
<tr>
<td>imageline</td>
<td>ç”»ä¸€æ¡çº¿æ®µ</td>
</tr>
<tr>
<td>imageloadfont</td>
<td>è½½å…¥ä¸€æ–°å­—ä½“</td>
</tr>
<tr>
<td>imagepalettecopy</td>
<td>å°†è°ƒè‰²æ¿ä»ä¸€å¹…å›¾åƒæ‹·è´åˆ°å¦ä¸€å¹…</td>
</tr>
<tr>
<td>imagepng</td>
<td>ä»¥ PNG æ ¼å¼å°†å›¾åƒè¾“å‡ºåˆ°æµè§ˆå™¨æˆ–æ–‡ä»¶</td>
</tr>
<tr>
<td>imagepolygon</td>
<td>ç”»ä¸€ä¸ªå¤šè¾¹å½¢</td>
</tr>
<tr>
<td>imagepsbbox</td>
<td>ç»™å‡ºä¸€ä¸ªä½¿ç”¨ PostScript Type1 å­—ä½“çš„æ–‡æœ¬æ–¹æ¡†</td>
</tr>
<tr>
<td>imagepsencodefont</td>
<td>æ”¹å˜å­—ä½“ä¸­çš„å­—ç¬¦ç¼–ç çŸ¢é‡</td>
</tr>
<tr>
<td>imagepsextendfont</td>
<td>æ‰©å……æˆ–ç²¾ç®€å­—ä½“</td>
</tr>
<tr>
<td>imagepsfreefont</td>
<td>é‡Šæ”¾ä¸€ä¸ª PostScript Type 1 å­—ä½“æ‰€å ç”¨çš„å†…å­˜</td>
</tr>
<tr>
<td>imagepsloadfont</td>
<td>ä»æ–‡ä»¶ä¸­åŠ è½½ä¸€ä¸ª PostScript Type 1 å­—ä½“</td>
</tr>
<tr>
<td>imagepsslantfont</td>
<td>å€¾æ–œæŸå­—ä½“</td>
</tr>
<tr>
<td>imagepstext</td>
<td>ç”¨ PostScript Type1 å­—ä½“æŠŠæ–‡æœ¬å­—ç¬¦ä¸²ç”»åœ¨å›¾åƒä¸Š</td>
</tr>
<tr>
<td>imagerectangle</td>
<td>ç”»ä¸€ä¸ªçŸ©å½¢</td>
</tr>
<tr>
<td>imagerotate</td>
<td>ç”¨ç»™å®šè§’åº¦æ—‹è½¬å›¾åƒ</td>
</tr>
<tr>
<td>imagesavealpha</td>
<td>è®¾ç½®æ ‡è®°ä»¥åœ¨ä¿å­˜ PNG å›¾åƒæ—¶ä¿å­˜å®Œæ•´çš„ alpha é€šé“ä¿¡æ¯ï¼ˆä¸å•ä¸€é€æ˜è‰²ç›¸åï¼‰</td>
</tr>
<tr>
<td>imagesetbrush</td>
<td>è®¾å®šç”»çº¿ç”¨çš„ç”»ç¬”å›¾åƒ</td>
</tr>
<tr>
<td>imagesetpixel</td>
<td>ç”»ä¸€ä¸ªå•ä¸€åƒç´ </td>
</tr>
<tr>
<td>imagesetstyle</td>
<td>è®¾å®šç”»çº¿çš„é£æ ¼</td>
</tr>
<tr>
<td>imagesetthickness</td>
<td>è®¾å®šç”»çº¿çš„å®½åº¦</td>
</tr>
<tr>
<td>imagesettile</td>
<td>è®¾å®šç”¨äºå¡«å……çš„è´´å›¾</td>
</tr>
<tr>
<td>imagestring</td>
<td>æ°´å¹³åœ°ç”»ä¸€è¡Œå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>imagestringup</td>
<td>å‚ç›´åœ°ç”»ä¸€è¡Œå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>imagesx</td>
<td>å–å¾—å›¾åƒå®½åº¦</td>
</tr>
<tr>
<td>imagesy</td>
<td>å–å¾—å›¾åƒé«˜åº¦</td>
</tr>
<tr>
<td>imagetruecolortopalette</td>
<td>å°†çœŸå½©è‰²å›¾åƒè½¬æ¢ä¸ºè°ƒè‰²æ¿å›¾åƒ</td>
</tr>
<tr>
<td>imagettfbbox</td>
<td>å–å¾—ä½¿ç”¨ TrueType å­—ä½“çš„æ–‡æœ¬çš„èŒƒå›´</td>
</tr>
<tr>
<td>imagettftext</td>
<td>ç”¨ TrueType å­—ä½“å‘å›¾åƒå†™å…¥æ–‡æœ¬</td>
</tr>
<tr>
<td>imagetypes</td>
<td>è¿”å›å½“å‰ PHP ç‰ˆæœ¬æ‰€æ”¯æŒçš„å›¾åƒç±»å‹</td>
</tr>
<tr>
<td>imagewbmp</td>
<td>ä»¥ WBMP æ ¼å¼å°†å›¾åƒè¾“å‡ºåˆ°æµè§ˆå™¨æˆ–æ–‡ä»¶</td>
</tr>
<tr>
<td>imagexbm</td>
<td>å°† XBM å›¾åƒè¾“å‡ºåˆ°æµè§ˆå™¨æˆ–æ–‡ä»¶</td>
</tr>
<tr>
<td>iptcembed</td>
<td>å°†äºŒè¿›åˆ¶ IPTC æ•°æ®åµŒå…¥åˆ°ä¸€å¹… JPEG å›¾åƒä¸­</td>
</tr>
<tr>
<td>iptcparse</td>
<td>å°†äºŒè¿›åˆ¶ IPTC <a href="http://www.iptc.org/" target="_blank" rel="noopener">http://www.iptc.org/</a> å—è§£æä¸ºå•ä¸ªæ ‡è®°</td>
</tr>
<tr>
<td>jpeg2wbmp</td>
<td>å°† JPEG å›¾åƒæ–‡ä»¶è½¬æ¢ä¸º WBMP å›¾åƒæ–‡ä»¶</td>
</tr>
<tr>
<td>png2wbmp</td>
<td>å°† PNG å›¾åƒæ–‡ä»¶è½¬æ¢ä¸º WBMP å›¾åƒæ–‡ä»¶</td>
</tr>
</tbody>
</table>
<h1 id="sessionå‡½æ•°"><a href="#sessionå‡½æ•°" class="headerlink" title="sessionå‡½æ•°"></a>sessionå‡½æ•°</h1><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>session_cache_expire</td>
<td>è¿”å›å½“å‰ç¼“å­˜åˆ°æœŸ</td>
</tr>
<tr>
<td>session_cache_limiter</td>
<td>getå’Œset the currentç¼“å­˜é™åˆ¶/é‡‘</td>
</tr>
<tr>
<td>session_commit</td>
<td>session_write_close çš„åˆ«å</td>
</tr>
<tr>
<td>session_decode</td>
<td>å°†ä¼šè¯æ•°æ®ä»ä¸€ä¸ªä¼šè¯ç¼–ç çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>session_destroy</td>
<td>é”€æ¯å·²æ³¨å†Œåˆ°ä¼šè¯çš„æ‰€æœ‰æ•°æ®</td>
</tr>
<tr>
<td>session_encode</td>
<td>å°†å½“å‰ä¼šè¯æ•°æ®ç¼–ç ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>session_get_cookie_params</td>
<td>è·å¾—ä¼šè¯é¥¼å¹²å‚æ•°</td>
</tr>
<tr>
<td>session_id</td>
<td>è·å¾—å’Œ/æˆ–è®¾ç½®å½“å‰ä¼šè¯æ ‡è¯†</td>
</tr>
<tr>
<td>session_is_registered</td>
<td>æ£€æŸ¥å˜é‡æ˜¯å¦åœ¨ä¼šè¯ä¸­å·²ç»æ³¨å†Œ</td>
</tr>
<tr>
<td>session_module_name</td>
<td>è·å¾—å’Œ/æˆ–è®¾ç½®å½“å‰ä¼šè¯æ¨¡å—</td>
</tr>
<tr>
<td>session_name</td>
<td>è·å¾—å’Œ/æˆ–è®¾ç½®å½“å‰ä¼šè¯åç§°</td>
</tr>
<tr>
<td>session_regenerate_id</td>
<td>æ›´æ–°æ–°ç”Ÿæˆçš„ä¼šè¯æ ‡è¯†</td>
</tr>
<tr>
<td>session_register_shutdown</td>
<td>ä¼šè¯å…³æœºåŠŸèƒ½</td>
</tr>
<tr>
<td>session_register</td>
<td>æ³¨å†Œä¸€ä¸ªæˆ–å¤šä¸ªå…¨å±€å˜é‡ä¸å½“å‰ä¼šè¯</td>
</tr>
<tr>
<td>session_save_path</td>
<td>è·å–å’Œ/æˆ–è®¾ç½®å½“å‰ä¼šè¯ä¿å­˜è·¯å¾„</td>
</tr>
<tr>
<td>session_set_cookie_params</td>
<td>è®¾ç½®ä¼šè¯é¥¼å¹²å‚æ•°</td>
</tr>
<tr>
<td>session_set_save_handler</td>
<td>è®¾ç½®ç”¨æˆ·çº§ä¼šè¯å­˜å‚¨åŠŸèƒ½</td>
</tr>
<tr>
<td>session_start</td>
<td>å¼€å§‹æ–°çš„æˆ–æ¢å¤ç°æœ‰çš„ä¼šè¯</td>
</tr>
<tr>
<td>session_status</td>
<td>è¿”å›å½“å‰ä¼šè¯çŠ¶æ€</td>
</tr>
<tr>
<td>session_unregister</td>
<td>æ³¨é”€å½“å‰ä¼šè¯çš„ä¸€ä¸ªå…¨å±€å˜é‡</td>
</tr>
<tr>
<td>session_unset</td>
<td>è‡ªç”±æ‰€æœ‰ä¼šè¯å˜é‡</td>
</tr>
<tr>
<td>session_write_close</td>
<td>å†™ä¼šè¯æ•°æ®å’Œç»“æŸä¼šè¯</td>
</tr>
</tbody>
</table>
<h1 id="cookieå‡½æ•°"><a href="#cookieå‡½æ•°" class="headerlink" title="cookieå‡½æ•°"></a>cookieå‡½æ•°</h1><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>setcookie</td>
<td>è®¾ç½®cookie</td>
</tr>
<tr>
<td>setrawcookie</td>
<td>å‘é€æ²¡æœ‰URLç¼–ç çš„cookie</td>
</tr>
</tbody>
</table>
<h1 id="Date-Time-å‡½æ•°"><a href="#Date-Time-å‡½æ•°" class="headerlink" title="Date/Time å‡½æ•°"></a>Date/Time å‡½æ•°</h1><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>checkdate</td>
<td>éªŒè¯ä¸€ä¸ªæ ¼é‡Œé«˜é‡Œæ—¥æœŸ</td>
</tr>
<tr>
<td>date_add</td>
<td>åˆ«å DateTime::add</td>
</tr>
<tr>
<td>date_create_from_format</td>
<td>åˆ«å DateTime::createFromFormat</td>
</tr>
<tr>
<td>date_create</td>
<td>åˆ«å DateTime::__construct</td>
</tr>
<tr>
<td>date_date_set</td>
<td>åˆ«å DateTime::setDate</td>
</tr>
<tr>
<td>date_default_timezone_get</td>
<td>å–å¾—ä¸€ä¸ªè„šæœ¬ä¸­æ‰€æœ‰æ—¥æœŸæ—¶é—´å‡½æ•°æ‰€ä½¿ç”¨çš„é»˜è®¤æ—¶åŒº</td>
</tr>
<tr>
<td>date_default_timezone_set</td>
<td>è®¾å®šç”¨äºä¸€ä¸ªè„šæœ¬ä¸­æ‰€æœ‰æ—¥æœŸæ—¶é—´å‡½æ•°çš„é»˜è®¤æ—¶åŒº</td>
</tr>
<tr>
<td>date_diff</td>
<td>åˆ«å DateTime::diff</td>
</tr>
<tr>
<td>date_format</td>
<td>åˆ«å DateTime::format</td>
</tr>
<tr>
<td>date_get_last_errors</td>
<td>åˆ«å DateTime::getLastErrors</td>
</tr>
<tr>
<td>date_interval_create_from_date_string</td>
<td>åˆ«å DateInterval::createFromDateString</td>
</tr>
<tr>
<td>date_interval_format</td>
<td>åˆ«å DateInterval::format</td>
</tr>
<tr>
<td>date_isodate_set</td>
<td>åˆ«å DateTime::setISODate</td>
</tr>
<tr>
<td>date_modify</td>
<td>åˆ«å DateTime::modify</td>
</tr>
<tr>
<td>date_offset_get</td>
<td>åˆ«å DateTime::getOffset</td>
</tr>
<tr>
<td>date_parse_from_format</td>
<td>Get info about given date formatted according to the specified format</td>
</tr>
<tr>
<td>date_parse</td>
<td>Returns associative array with detailed info about given date</td>
</tr>
<tr>
<td>date_sub</td>
<td>åˆ«å DateTime::sub</td>
</tr>
<tr>
<td>date_sun_info</td>
<td>Returns an array with information about sunset/sunrise and twilight begin/end</td>
</tr>
<tr>
<td>date_sunrise</td>
<td>è¿”å›ç»™å®šçš„æ—¥æœŸä¸åœ°ç‚¹çš„æ—¥å‡ºæ—¶é—´</td>
</tr>
<tr>
<td>date_sunset</td>
<td>è¿”å›ç»™å®šçš„æ—¥æœŸä¸åœ°ç‚¹çš„æ—¥è½æ—¶é—´</td>
</tr>
<tr>
<td>date_time_set</td>
<td>åˆ«å DateTime::setTime</td>
</tr>
<tr>
<td>date_timestamp_get</td>
<td>åˆ«å DateTime::getTimestamp</td>
</tr>
<tr>
<td>date_timestamp_set</td>
<td>åˆ«å DateTime::setTimestamp</td>
</tr>
<tr>
<td>date_timezone_get</td>
<td>åˆ«å DateTime::getTimezone</td>
</tr>
<tr>
<td>date_timezone_set</td>
<td>åˆ«å DateTime::setTimezone</td>
</tr>
<tr>
<td>date</td>
<td>æ ¼å¼åŒ–ä¸€ä¸ªæœ¬åœ°æ—¶é—´ï¼æ—¥æœŸ</td>
</tr>
<tr>
<td>getdate</td>
<td>å–å¾—æ—¥æœŸï¼æ—¶é—´ä¿¡æ¯</td>
</tr>
<tr>
<td>gettimeofday</td>
<td>å–å¾—å½“å‰æ—¶é—´</td>
</tr>
<tr>
<td>gmdate</td>
<td>æ ¼å¼åŒ–ä¸€ä¸ª GMT/UTC æ—¥æœŸï¼æ—¶é—´</td>
</tr>
<tr>
<td>gmmktime</td>
<td>å–å¾— GMT æ—¥æœŸçš„ UNIX æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>gmstrftime</td>
<td>æ ¹æ®åŒºåŸŸè®¾ç½®æ ¼å¼åŒ– GMT/UTC æ—¶é—´ï¼æ—¥æœŸ</td>
</tr>
<tr>
<td>idate</td>
<td>å°†æœ¬åœ°æ—¶é—´æ—¥æœŸæ ¼å¼åŒ–ä¸ºæ•´æ•°</td>
</tr>
<tr>
<td>localtime</td>
<td>å–å¾—æœ¬åœ°æ—¶é—´</td>
</tr>
<tr>
<td>microtime</td>
<td>è¿”å›å½“å‰ Unix æ—¶é—´æˆ³å’Œå¾®ç§’æ•°</td>
</tr>
<tr>
<td>mktime</td>
<td>å–å¾—ä¸€ä¸ªæ—¥æœŸçš„ Unix æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>strftime</td>
<td>æ ¹æ®åŒºåŸŸè®¾ç½®æ ¼å¼åŒ–æœ¬åœ°æ—¶é—´ï¼æ—¥æœŸ</td>
</tr>
<tr>
<td>strptime</td>
<td>è§£æç”± strftime ç”Ÿæˆçš„æ—¥æœŸï¼æ—¶é—´</td>
</tr>
<tr>
<td>strtotime</td>
<td>å°†ä»»ä½•è‹±æ–‡æ–‡æœ¬çš„æ—¥æœŸæ—¶é—´æè¿°è§£æä¸º Unix æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>time</td>
<td>è¿”å›å½“å‰çš„ Unix æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>timezone_abbreviations_list</td>
<td>åˆ«å DateTimeZone::listAbbreviations</td>
</tr>
<tr>
<td>timezone_identifiers_list</td>
<td>åˆ«å DateTimeZone::listIdentifiers</td>
</tr>
<tr>
<td>timezone_location_get</td>
<td>åˆ«å DateTimeZone::getLocation</td>
</tr>
<tr>
<td>timezone_name_from_abbr</td>
<td>Returns the timezone name from abbreviation</td>
</tr>
<tr>
<td>timezone_name_get</td>
<td>åˆ«å DateTimeZone::getName</td>
</tr>
<tr>
<td>timezone_offset_get</td>
<td>åˆ«å DateTimeZone::getOffset</td>
</tr>
<tr>
<td>timezone_open</td>
<td>åˆ«å DateTimeZone::__construct</td>
</tr>
<tr>
<td>timezone_transitions_get</td>
<td>åˆ«å DateTimeZone::getTransitions</td>
</tr>
<tr>
<td>timezone_version_get</td>
<td>Gets the version of the timezonedb</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>HTTPçŠ¶æ€ä»£ç </title>
    <url>/2019/05/05/HTTP%E7%8A%B6%E6%80%81%E4%BB%A3%E7%A0%81/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>HTTP çŠ¶æ€ä»£ç æŒ‡ç¤ºç‰¹å®š HTTP è¯·æ±‚æ˜¯å¦å·²æˆåŠŸå®Œæˆã€‚å“åº”åˆ†ä¸ºäº”ç±»ï¼šä¿¡æ¯å“åº”ï¼ŒæˆåŠŸå“åº”ï¼Œé‡å®šå‘ï¼Œå®¢æˆ·ç«¯é”™è¯¯å’ŒæœåŠ¡å™¨é”™è¯¯ã€‚</p>
<a id="more"></a>
<h1 id="å¸¸è§çš„çŠ¶æ€ä»£ç "><a href="#å¸¸è§çš„çŠ¶æ€ä»£ç " class="headerlink" title="å¸¸è§çš„çŠ¶æ€ä»£ç "></a>å¸¸è§çš„çŠ¶æ€ä»£ç </h1><ul>
<li>200 æœåŠ¡å™¨æˆåŠŸè¿”å›å†…å®¹</li>
<li>301/2 æ°¸ä¹…/ä¸´æ—¶é‡å®šå‘</li>
<li>304 æœªä¿®æ”¹ Not Modified</li>
<li>307 é‡å®šå‘ä¸­ä¿ç•™åŸå§‹æ•°æ®</li>
<li>404 è¯·æ±‚çš„é¡µé¢ä¸å­˜åœ¨</li>
<li>500 æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</li>
<li>503 æœåŠ¡å™¨æš‚æ—¶ä¸å¯ç”¨</li>
</ul>
<h1 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h1><table>
<thead>
<tr>
<th>ä»£ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>1**</td>
<td>ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œéœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œ</td>
</tr>
<tr>
<td>2**</td>
<td>æˆåŠŸï¼Œæ“ä½œè¢«æˆåŠŸæ¥æ”¶å¹¶å¤„ç†</td>
</tr>
<tr>
<td>3**</td>
<td>é‡å®šå‘ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œä»¥å®Œæˆè¯·æ±‚</td>
</tr>
<tr>
<td>4**</td>
<td>å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚</td>
</tr>
<tr>
<td>5**</td>
<td>æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯</td>
</tr>
</tbody>
</table>
<h1 id="ä¿¡æ¯å“åº”"><a href="#ä¿¡æ¯å“åº”" class="headerlink" title="ä¿¡æ¯å“åº”"></a>ä¿¡æ¯å“åº”</h1><table>
<thead>
<tr>
<th>ä»£ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>100 Continue</td>
<td>è¿™ä¸ªä¸´æ—¶å“åº”è¡¨æ˜ï¼Œè¿„ä»Šä¸ºæ­¢çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯å¯è¡Œçš„ï¼Œå®¢æˆ·ç«¯åº”è¯¥ç»§ç»­è¯·æ±‚ï¼Œå¦‚æœå·²ç»å®Œæˆï¼Œåˆ™å¿½ç•¥å®ƒã€‚</td>
</tr>
<tr>
<td>101 Switching Protocol</td>
<td>è¯¥ä»£ç æ˜¯å“åº”å®¢æˆ·ç«¯çš„ Upgrade æ ‡å¤´å‘é€çš„ï¼Œå¹¶ä¸”æŒ‡ç¤ºæœåŠ¡å™¨ä¹Ÿæ­£åœ¨åˆ‡æ¢çš„åè®®ã€‚</td>
</tr>
<tr>
<td>102 Processing</td>
<td>æ­¤ä»£ç è¡¨ç¤ºæœåŠ¡å™¨å·²æ”¶åˆ°å¹¶æ­£åœ¨å¤„ç†è¯¥è¯·æ±‚ï¼Œä½†æ²¡æœ‰å“åº”å¯ç”¨ã€‚</td>
</tr>
<tr>
<td>103 Early Hints</td>
<td>æ­¤çŠ¶æ€ä»£ç ä¸»è¦ç”¨äºä¸Link é“¾æ¥å¤´ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å…è®¸ç”¨æˆ·ä»£ç†åœ¨æœåŠ¡å™¨ä»åœ¨å‡†å¤‡å“åº”æ—¶å¼€å§‹é¢„åŠ è½½èµ„æº</td>
</tr>
</tbody>
</table>
<h1 id="æˆåŠŸå“åº”"><a href="#æˆåŠŸå“åº”" class="headerlink" title="æˆåŠŸå“åº”"></a>æˆåŠŸå“åº”</h1><table>
<thead>
<tr>
<th>ä»£ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>200 OK</td>
<td>è¯·æ±‚æˆåŠŸã€‚æˆåŠŸçš„å«ä¹‰å–å†³äºHTTPæ–¹æ³•ï¼šGETï¼šèµ„æºå·²è¢«æå–å¹¶åœ¨æ¶ˆæ¯æ­£æ–‡ä¸­ä¼ è¾“ã€‚HEADï¼šå®ä½“æ ‡å¤´ä½äºæ¶ˆæ¯æ­£æ–‡ä¸­ã€‚POSTï¼šæè¿°åŠ¨ä½œç»“æœçš„èµ„æºåœ¨æ¶ˆæ¯ä½“ä¸­ä¼ è¾“ã€‚TRACEï¼šæ¶ˆæ¯æ­£æ–‡åŒ…å«æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚æ¶ˆæ¯</td>
</tr>
<tr>
<td>201 Created</td>
<td>è¯¥è¯·æ±‚å·²æˆåŠŸï¼Œå¹¶å› æ­¤åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„èµ„æºã€‚è¿™é€šå¸¸æ˜¯åœ¨PUTè¯·æ±‚ä¹‹åå‘é€çš„å“åº”ã€‚</td>
</tr>
<tr>
<td>202 Accepted</td>
<td>è¯·æ±‚å·²ç»æ¥æ”¶åˆ°ï¼Œä½†è¿˜æœªå“åº”ï¼Œæ²¡æœ‰ç»“æœã€‚æ„å‘³ç€ä¸ä¼šæœ‰ä¸€ä¸ªå¼‚æ­¥çš„å“åº”å»è¡¨æ˜å½“å‰è¯·æ±‚çš„ç»“æœï¼Œé¢„æœŸå¦å¤–çš„è¿›ç¨‹å’ŒæœåŠ¡å»å¤„ç†è¯·æ±‚ï¼Œæˆ–è€…æ‰¹å¤„ç†ã€‚</td>
</tr>
<tr>
<td>203 Non-Authoritative Information</td>
<td>æœåŠ¡å™¨å·²æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†è¿”å›çš„å®ä½“å¤´éƒ¨å…ƒä¿¡æ¯ä¸æ˜¯åœ¨åŸå§‹æœåŠ¡å™¨ä¸Šæœ‰æ•ˆçš„ç¡®å®šé›†åˆï¼Œè€Œæ˜¯æ¥è‡ªæœ¬åœ°æˆ–è€…ç¬¬ä¸‰æ–¹çš„æ‹·è´ã€‚å½“å‰çš„ä¿¡æ¯å¯èƒ½æ˜¯åŸå§‹ç‰ˆæœ¬çš„å­é›†æˆ–è€…è¶…é›†ã€‚ä¾‹å¦‚ï¼ŒåŒ…å«èµ„æºçš„å…ƒæ•°æ®å¯èƒ½å¯¼è‡´åŸå§‹æœåŠ¡å™¨çŸ¥é“å…ƒä¿¡æ¯çš„è¶…é›†ã€‚ä½¿ç”¨æ­¤çŠ¶æ€ç ä¸æ˜¯å¿…é¡»çš„ï¼Œè€Œä¸”åªæœ‰åœ¨å“åº”ä¸ä½¿ç”¨æ­¤çŠ¶æ€ç ä¾¿ä¼šè¿”å›200 OKçš„æƒ…å†µä¸‹æ‰æ˜¯åˆé€‚çš„ã€‚</td>
</tr>
<tr>
<td>204 No Content</td>
<td>æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†ä¸éœ€è¦è¿”å›ä»»ä½•å®ä½“å†…å®¹ï¼Œå¹¶ä¸”å¸Œæœ›è¿”å›æ›´æ–°äº†çš„å…ƒä¿¡æ¯ã€‚å“åº”å¯èƒ½é€šè¿‡å®ä½“å¤´éƒ¨çš„å½¢å¼ï¼Œè¿”å›æ–°çš„æˆ–æ›´æ–°åçš„å…ƒä¿¡æ¯ã€‚å¦‚æœå­˜åœ¨è¿™äº›å¤´éƒ¨ä¿¡æ¯ï¼Œåˆ™åº”å½“ä¸æ‰€è¯·æ±‚çš„å˜é‡ç›¸å‘¼åº”ã€‚å¦‚æœå®¢æˆ·ç«¯æ˜¯æµè§ˆå™¨çš„è¯ï¼Œé‚£ä¹ˆç”¨æˆ·æµè§ˆå™¨åº”ä¿ç•™å‘é€äº†è¯¥è¯·æ±‚çš„é¡µé¢ï¼Œè€Œä¸äº§ç”Ÿä»»ä½•æ–‡æ¡£è§†å›¾ä¸Šçš„å˜åŒ–ï¼Œå³ä½¿æŒ‰ç…§è§„èŒƒæ–°çš„æˆ–æ›´æ–°åçš„å…ƒä¿¡æ¯åº”å½“è¢«åº”ç”¨åˆ°ç”¨æˆ·æµè§ˆå™¨æ´»åŠ¨è§†å›¾ä¸­çš„æ–‡æ¡£ã€‚ç”±äº204å“åº”è¢«ç¦æ­¢åŒ…å«ä»»ä½•æ¶ˆæ¯ä½“ï¼Œå› æ­¤å®ƒå§‹ç»ˆä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“å°¾ã€‚</td>
</tr>
<tr>
<td>205 Reset Content</td>
<td>æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä¸”æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ã€‚ä½†æ˜¯ä¸204å“åº”ä¸åŒï¼Œè¿”å›æ­¤çŠ¶æ€ç çš„å“åº”è¦æ±‚è¯·æ±‚è€…é‡ç½®æ–‡æ¡£è§†å›¾ã€‚è¯¥å“åº”ä¸»è¦æ˜¯è¢«ç”¨äºæ¥å—ç”¨æˆ·è¾“å…¥åï¼Œç«‹å³é‡ç½®è¡¨å•ï¼Œä»¥ä¾¿ç”¨æˆ·èƒ½å¤Ÿè½»æ¾åœ°å¼€å§‹å¦ä¸€æ¬¡è¾“å…¥ã€‚ä¸204å“åº”ä¸€æ ·ï¼Œè¯¥å“åº”ä¹Ÿè¢«ç¦æ­¢åŒ…å«ä»»ä½•æ¶ˆæ¯ä½“ï¼Œä¸”ä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“æŸã€‚</td>
</tr>
<tr>
<td>206 Partial Content</td>
<td>æœåŠ¡å™¨å·²ç»æˆåŠŸå¤„ç†äº†éƒ¨åˆ† GET è¯·æ±‚ã€‚ç±»ä¼¼äº FlashGet æˆ–è€…è¿…é›·è¿™ç±»çš„ HTTP ä¸‹è½½å·¥å…·éƒ½æ˜¯ä½¿ç”¨æ­¤ç±»å“åº”å®ç°æ–­ç‚¹ç»­ä¼ æˆ–è€…å°†ä¸€ä¸ªå¤§æ–‡æ¡£åˆ†è§£ä¸ºå¤šä¸ªä¸‹è½½æ®µåŒæ—¶ä¸‹è½½ã€‚è¯¥è¯·æ±‚å¿…é¡»åŒ…å« Range å¤´ä¿¡æ¯æ¥æŒ‡ç¤ºå®¢æˆ·ç«¯å¸Œæœ›å¾—åˆ°çš„å†…å®¹èŒƒå›´ï¼Œå¹¶ä¸”å¯èƒ½åŒ…å« If-Range æ¥ä½œä¸ºè¯·æ±‚æ¡ä»¶ã€‚</td>
</tr>
<tr>
<td>207 Multi-Status</td>
<td>ç”±WebDAV(RFC 2518)æ‰©å±•çš„çŠ¶æ€ç ï¼Œä»£è¡¨ä¹‹åçš„æ¶ˆæ¯ä½“å°†æ˜¯ä¸€ä¸ªXMLæ¶ˆæ¯ï¼Œå¹¶ä¸”å¯èƒ½ä¾ç…§ä¹‹å‰å­è¯·æ±‚æ•°é‡çš„ä¸åŒï¼ŒåŒ…å«ä¸€ç³»åˆ—ç‹¬ç«‹çš„å“åº”ä»£ç ã€‚</td>
</tr>
<tr>
<td>208 Multi-Status</td>
<td>åœ¨ DAV é‡Œé¢ä½¿ç”¨: propstat å“åº”å…ƒç´ ä»¥é¿å…é‡å¤æšä¸¾å¤šä¸ªç»‘å®šçš„å†…éƒ¨æˆå‘˜åˆ°åŒä¸€ä¸ªé›†åˆã€‚</td>
</tr>
<tr>
<td>226 IM Used</td>
<td>æœåŠ¡å™¨å·²ç»å®Œæˆäº†å¯¹èµ„æºçš„ GET è¯·æ±‚ï¼Œå¹¶ä¸”å“åº”æ˜¯å¯¹å½“å‰å®ä¾‹åº”ç”¨çš„ä¸€ä¸ªæˆ–å¤šä¸ªå®ä¾‹æ“ä½œç»“æœçš„è¡¨ç¤ºã€‚</td>
</tr>
</tbody>
</table>
<h1 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h1><table>
<thead>
<tr>
<th>ä»£ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>300 Multiple Choice</td>
<td>è¢«è¯·æ±‚çš„èµ„æºæœ‰ä¸€ç³»åˆ—å¯ä¾›é€‰æ‹©çš„å›é¦ˆä¿¡æ¯ï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±ç‰¹å®šçš„åœ°å€å’Œæµè§ˆå™¨é©±åŠ¨çš„å•†è®®ä¿¡æ¯ã€‚ç”¨æˆ·æˆ–æµè§ˆå™¨èƒ½å¤Ÿè‡ªè¡Œé€‰æ‹©ä¸€ä¸ªé¦–é€‰çš„åœ°å€è¿›è¡Œé‡å®šå‘ã€‚</td>
</tr>
<tr>
<td>301 Moved Permanently</td>
<td>è¢«è¯·æ±‚çš„èµ„æºå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ï¼Œå¹¶ä¸”å°†æ¥ä»»ä½•å¯¹æ­¤èµ„æºçš„å¼•ç”¨éƒ½åº”è¯¥ä½¿ç”¨æœ¬å“åº”è¿”å›çš„è‹¥å¹²ä¸ª URI ä¹‹ä¸€ã€‚å¦‚æœå¯èƒ½ï¼Œæ‹¥æœ‰é“¾æ¥ç¼–è¾‘åŠŸèƒ½çš„å®¢æˆ·ç«¯åº”å½“è‡ªåŠ¨æŠŠè¯·æ±‚çš„åœ°å€ä¿®æ”¹ä¸ºä»æœåŠ¡å™¨åé¦ˆå›æ¥çš„åœ°å€ã€‚é™¤éé¢å¤–æŒ‡å®šï¼Œå¦åˆ™è¿™ä¸ªå“åº”ä¹Ÿæ˜¯å¯ç¼“å­˜çš„ã€‚</td>
</tr>
<tr>
<td>302 Found</td>
<td>è¯·æ±‚çš„èµ„æºç°åœ¨ä¸´æ—¶ä»ä¸åŒçš„ URI å“åº”è¯·æ±‚ã€‚ç”±äºè¿™æ ·çš„é‡å®šå‘æ˜¯ä¸´æ—¶çš„ï¼Œå®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘åŸæœ‰åœ°å€å‘é€ä»¥åçš„è¯·æ±‚ã€‚åªæœ‰åœ¨Cache-Controlæˆ–Expiresä¸­è¿›è¡Œäº†æŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå“åº”æ‰æ˜¯å¯ç¼“å­˜çš„ã€‚</td>
</tr>
<tr>
<td>303 See Other</td>
<td>å¯¹åº”å½“å‰è¯·æ±‚çš„å“åº”å¯ä»¥åœ¨å¦ä¸€ä¸ª URI ä¸Šè¢«æ‰¾åˆ°ï¼Œè€Œä¸”å®¢æˆ·ç«¯åº”å½“é‡‡ç”¨ GET çš„æ–¹å¼è®¿é—®é‚£ä¸ªèµ„æºã€‚è¿™ä¸ªæ–¹æ³•çš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†å…è®¸ç”±è„šæœ¬æ¿€æ´»çš„POSTè¯·æ±‚è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–°çš„èµ„æºã€‚</td>
</tr>
<tr>
<td>304 Not Modified</td>
<td>å¦‚æœå®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ªå¸¦æ¡ä»¶çš„ GET è¯·æ±‚ä¸”è¯¥è¯·æ±‚å·²è¢«å…è®¸ï¼Œè€Œæ–‡æ¡£çš„å†…å®¹ï¼ˆè‡ªä¸Šæ¬¡è®¿é—®ä»¥æ¥æˆ–è€…æ ¹æ®è¯·æ±‚çš„æ¡ä»¶ï¼‰å¹¶æ²¡æœ‰æ”¹å˜ï¼Œåˆ™æœåŠ¡å™¨åº”å½“è¿”å›è¿™ä¸ªçŠ¶æ€ç ã€‚304 å“åº”ç¦æ­¢åŒ…å«æ¶ˆæ¯ä½“ï¼Œå› æ­¤å§‹ç»ˆä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“å°¾ã€‚</td>
</tr>
<tr>
<td><del>305 Use Proxy</del></td>
<td>è¢«è¯·æ±‚çš„èµ„æºå¿…é¡»é€šè¿‡æŒ‡å®šçš„ä»£ç†æ‰èƒ½è¢«è®¿é—®ã€‚Location åŸŸä¸­å°†ç»™å‡ºæŒ‡å®šçš„ä»£ç†æ‰€åœ¨çš„ URI ä¿¡æ¯ï¼Œæ¥æ”¶è€…éœ€è¦é‡å¤å‘é€ä¸€ä¸ªå•ç‹¬çš„è¯·æ±‚ï¼Œé€šè¿‡è¿™ä¸ªä»£ç†æ‰èƒ½è®¿é—®ç›¸åº”èµ„æºã€‚åªæœ‰åŸå§‹æœåŠ¡å™¨æ‰èƒ½å»ºç«‹305å“åº”ã€‚</td>
</tr>
<tr>
<td><del>306 unused</del></td>
<td>åœ¨æœ€æ–°ç‰ˆçš„è§„èŒƒä¸­ï¼Œ306 çŠ¶æ€ç å·²ç»ä¸å†è¢«ä½¿ç”¨ã€‚</td>
</tr>
<tr>
<td>307 Temporary Redirect</td>
<td>è¯·æ±‚çš„èµ„æºç°åœ¨ä¸´æ—¶ä»ä¸åŒçš„URI å“åº”è¯·æ±‚ã€‚ç”±äºè¿™æ ·çš„é‡å®šå‘æ˜¯ä¸´æ—¶çš„ï¼Œå®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘åŸæœ‰åœ°å€å‘é€ä»¥åçš„è¯·æ±‚ã€‚åªæœ‰åœ¨Cache-Controlæˆ–Expiresä¸­è¿›è¡Œäº†æŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå“åº”æ‰æ˜¯å¯ç¼“å­˜çš„ã€‚</td>
</tr>
<tr>
<td>308 Permanent Redirect</td>
<td>è¿™æ„å‘³ç€èµ„æºç°åœ¨æ°¸ä¹…ä½äºç”± Location: HTTP Response æ ‡å¤´æŒ‡å®šçš„å¦ä¸€ä¸ª URIã€‚ è¿™ä¸ 301 Moved Permanently HTTP å“åº”ä»£ç å…·æœ‰ç›¸åŒçš„è¯­ä¹‰ï¼Œä½†ç”¨æˆ·ä»£ç†ä¸èƒ½æ›´æ”¹æ‰€ä½¿ç”¨çš„ HTTP æ–¹æ³•ï¼šå¦‚æœåœ¨ç¬¬ä¸€ä¸ªè¯·æ±‚ä¸­ä½¿ç”¨ POSTï¼Œåˆ™å¿…é¡»åœ¨ç¬¬äºŒä¸ªè¯·æ±‚ä¸­ä½¿ç”¨ POSTã€‚</td>
</tr>
</tbody>
</table>
<h1 id="å®¢æˆ·ç«¯å“åº”"><a href="#å®¢æˆ·ç«¯å“åº”" class="headerlink" title="å®¢æˆ·ç«¯å“åº”"></a>å®¢æˆ·ç«¯å“åº”</h1><table>
<thead>
<tr>
<th>ä»£ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>400 Bad Request</td>
<td>1ã€è¯­ä¹‰æœ‰è¯¯ï¼Œå½“å‰è¯·æ±‚æ— æ³•è¢«æœåŠ¡å™¨ç†è§£ã€‚é™¤éè¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¸åº”è¯¥é‡å¤æäº¤è¿™ä¸ªè¯·æ±‚ã€‚2ã€è¯·æ±‚å‚æ•°æœ‰è¯¯ã€‚</td>
</tr>
<tr>
<td>401 Unauthorized</td>
<td>å½“å‰è¯·æ±‚éœ€è¦ç”¨æˆ·éªŒè¯ã€‚è¯¥å“åº”å¿…é¡»åŒ…å«ä¸€ä¸ªé€‚ç”¨äºè¢«è¯·æ±‚èµ„æºçš„ WWW-Authenticate ä¿¡æ¯å¤´ç”¨ä»¥è¯¢é—®ç”¨æˆ·ä¿¡æ¯ã€‚å®¢æˆ·ç«¯å¯ä»¥é‡å¤æäº¤ä¸€ä¸ªåŒ…å«æ°å½“çš„ Authorization å¤´ä¿¡æ¯çš„è¯·æ±‚ã€‚å¦‚æœå½“å‰è¯·æ±‚å·²ç»åŒ…å«äº† Authorization è¯ä¹¦ï¼Œé‚£ä¹ˆ401å“åº”ä»£è¡¨ç€æœåŠ¡å™¨éªŒè¯å·²ç»æ‹’ç»äº†é‚£äº›è¯ä¹¦ã€‚å¦‚æœ401å“åº”åŒ…å«äº†ä¸å‰ä¸€ä¸ªå“åº”ç›¸åŒçš„èº«ä»½éªŒè¯è¯¢é—®ï¼Œä¸”æµè§ˆå™¨å·²ç»è‡³å°‘å°è¯•äº†ä¸€æ¬¡éªŒè¯ï¼Œé‚£ä¹ˆæµè§ˆå™¨åº”å½“å‘ç”¨æˆ·å±•ç¤ºå“åº”ä¸­åŒ…å«çš„å®ä½“ä¿¡æ¯ï¼Œå› ä¸ºè¿™ä¸ªå®ä½“ä¿¡æ¯ä¸­å¯èƒ½åŒ…å«äº†ç›¸å…³è¯Šæ–­ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td><del>402 Payment Required</del></td>
<td>æ­¤å“åº”ç ä¿ç•™ä»¥ä¾¿å°†æ¥ä½¿ç”¨ï¼Œåˆ›é€ æ­¤å“åº”ç çš„æœ€åˆç›®çš„æ˜¯ç”¨äºæ•°å­—æ”¯ä»˜ç³»ç»Ÿï¼Œç„¶è€Œç°åœ¨å¹¶æœªä½¿ç”¨</td>
</tr>
<tr>
<td>403 Forbidden</td>
<td>æœåŠ¡å™¨å·²ç»ç†è§£è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æ‰§è¡Œå®ƒã€‚ä¸ 401 å“åº”ä¸åŒçš„æ˜¯ï¼Œèº«ä»½éªŒè¯å¹¶ä¸èƒ½æä¾›ä»»ä½•å¸®åŠ©ï¼Œè€Œä¸”è¿™ä¸ªè¯·æ±‚ä¹Ÿä¸åº”è¯¥è¢«é‡å¤æäº¤ã€‚å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ª HEAD è¯·æ±‚ï¼Œè€Œä¸”æœåŠ¡å™¨å¸Œæœ›èƒ½å¤Ÿè®²æ¸…æ¥šä¸ºä½•è¯·æ±‚ä¸èƒ½è¢«æ‰§è¡Œï¼Œé‚£ä¹ˆå°±åº”è¯¥åœ¨å®ä½“å†…æè¿°æ‹’ç»çš„åŸå› ã€‚å½“ç„¶æœåŠ¡å™¨ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ª 404 å“åº”ï¼Œå‡å¦‚å®ƒä¸å¸Œæœ›è®©å®¢æˆ·ç«¯è·å¾—ä»»ä½•ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>404 Not Found</td>
<td>è¯·æ±‚å¤±è´¥ï¼Œè¯·æ±‚æ‰€å¸Œæœ›å¾—åˆ°çš„èµ„æºæœªè¢«åœ¨æœåŠ¡å™¨ä¸Šå‘ç°ã€‚æ²¡æœ‰ä¿¡æ¯èƒ½å¤Ÿå‘Šè¯‰ç”¨æˆ·è¿™ä¸ªçŠ¶å†µåˆ°åº•æ˜¯æš‚æ—¶çš„è¿˜æ˜¯æ°¸ä¹…çš„ã€‚å‡å¦‚æœåŠ¡å™¨çŸ¥é“æƒ…å†µçš„è¯ï¼Œåº”å½“ä½¿ç”¨410çŠ¶æ€ç æ¥å‘ŠçŸ¥æ—§èµ„æºå› ä¸ºæŸäº›å†…éƒ¨çš„é…ç½®æœºåˆ¶é—®é¢˜ï¼Œå·²ç»æ°¸ä¹…çš„ä¸å¯ç”¨ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å¯ä»¥è·³è½¬çš„åœ°å€ã€‚404è¿™ä¸ªçŠ¶æ€ç è¢«å¹¿æ³›åº”ç”¨äºå½“æœåŠ¡å™¨ä¸æƒ³æ­ç¤ºåˆ°åº•ä¸ºä½•è¯·æ±‚è¢«æ‹’ç»æˆ–è€…æ²¡æœ‰å…¶ä»–é€‚åˆçš„å“åº”å¯ç”¨çš„æƒ…å†µä¸‹ã€‚</td>
</tr>
<tr>
<td>405 Method Not Allowed</td>
<td>è¯·æ±‚è¡Œä¸­æŒ‡å®šçš„è¯·æ±‚æ–¹æ³•ä¸èƒ½è¢«ç”¨äºè¯·æ±‚ç›¸åº”çš„èµ„æºã€‚è¯¥å“åº”å¿…é¡»è¿”å›ä¸€ä¸ªAllow å¤´ä¿¡æ¯ç”¨ä»¥è¡¨ç¤ºå‡ºå½“å‰èµ„æºèƒ½å¤Ÿæ¥å—çš„è¯·æ±‚æ–¹æ³•çš„åˆ—è¡¨ã€‚ é‰´äº PUTï¼ŒDELETE æ–¹æ³•ä¼šå¯¹æœåŠ¡å™¨ä¸Šçš„èµ„æºè¿›è¡Œå†™æ“ä½œï¼Œå› è€Œç»å¤§éƒ¨åˆ†çš„ç½‘é¡µæœåŠ¡å™¨éƒ½ä¸æ”¯æŒæˆ–è€…åœ¨é»˜è®¤é…ç½®ä¸‹ä¸å…è®¸ä¸Šè¿°è¯·æ±‚æ–¹æ³•ï¼Œå¯¹äºæ­¤ç±»è¯·æ±‚å‡ä¼šè¿”å›405é”™è¯¯ã€‚</td>
</tr>
<tr>
<td>406 Not Acceptable</td>
<td>è¯·æ±‚çš„èµ„æºçš„å†…å®¹ç‰¹æ€§æ— æ³•æ»¡è¶³è¯·æ±‚å¤´ä¸­çš„æ¡ä»¶ï¼Œå› è€Œæ— æ³•ç”Ÿæˆå“åº”å®ä½“ã€‚</td>
</tr>
<tr>
<td>407 Proxy Authentication Required</td>
<td>ä¸401å“åº”ç±»ä¼¼ï¼Œåªä¸è¿‡å®¢æˆ·ç«¯å¿…é¡»åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šè¿›è¡Œèº«ä»½éªŒè¯ã€‚ä»£ç†æœåŠ¡å™¨å¿…é¡»è¿”å›ä¸€ä¸ª Proxy-Authenticate ç”¨ä»¥è¿›è¡Œèº«ä»½è¯¢é—®ã€‚å®¢æˆ·ç«¯å¯ä»¥è¿”å›ä¸€ä¸ª Proxy-Authorization ä¿¡æ¯å¤´ç”¨ä»¥éªŒè¯ã€‚</td>
</tr>
<tr>
<td>408 Request Timeout</td>
<td>è¯·æ±‚è¶…æ—¶ã€‚å®¢æˆ·ç«¯æ²¡æœ‰åœ¨æœåŠ¡å™¨é¢„å¤‡ç­‰å¾…çš„æ—¶é—´å†…å®Œæˆä¸€ä¸ªè¯·æ±‚çš„å‘é€ã€‚å®¢æˆ·ç«¯å¯ä»¥éšæ—¶å†æ¬¡æäº¤è¿™ä¸€è¯·æ±‚è€Œæ— éœ€è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚</td>
</tr>
<tr>
<td>409 Conflict</td>
<td>ç”±äºå’Œè¢«è¯·æ±‚çš„èµ„æºçš„å½“å‰çŠ¶æ€ä¹‹é—´å­˜åœ¨å†²çªï¼Œè¯·æ±‚æ— æ³•å®Œæˆã€‚è¿™ä¸ªä»£ç åªå…è®¸ç”¨åœ¨è¿™æ ·çš„æƒ…å†µä¸‹æ‰èƒ½è¢«ä½¿ç”¨ï¼šç”¨æˆ·è¢«è®¤ä¸ºèƒ½å¤Ÿè§£å†³å†²çªï¼Œå¹¶ä¸”ä¼šé‡æ–°æäº¤æ–°çš„è¯·æ±‚ã€‚è¯¥å“åº”åº”å½“åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯ä»¥ä¾¿ç”¨æˆ·å‘ç°å†²çªçš„æºå¤´ã€‚</td>
</tr>
<tr>
<td>410 Gone</td>
<td>è¢«è¯·æ±‚çš„èµ„æºåœ¨æœåŠ¡å™¨ä¸Šå·²ç»ä¸å†å¯ç”¨ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å·²çŸ¥çš„è½¬å‘åœ°å€ã€‚è¿™æ ·çš„çŠ¶å†µåº”å½“è¢«è®¤ä¸ºæ˜¯æ°¸ä¹…æ€§çš„ã€‚å¦‚æœå¯èƒ½ï¼Œæ‹¥æœ‰é“¾æ¥ç¼–è¾‘åŠŸèƒ½çš„å®¢æˆ·ç«¯åº”å½“åœ¨è·å¾—ç”¨æˆ·è®¸å¯ååˆ é™¤æ‰€æœ‰æŒ‡å‘è¿™ä¸ªåœ°å€çš„å¼•ç”¨ã€‚å¦‚æœæœåŠ¡å™¨ä¸çŸ¥é“æˆ–è€…æ— æ³•ç¡®å®šè¿™ä¸ªçŠ¶å†µæ˜¯å¦æ˜¯æ°¸ä¹…çš„ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨ 404 çŠ¶æ€ç ã€‚é™¤éé¢å¤–è¯´æ˜ï¼Œå¦åˆ™è¿™ä¸ªå“åº”æ˜¯å¯ç¼“å­˜çš„ã€‚</td>
</tr>
<tr>
<td>411 Length Required</td>
<td>æœåŠ¡å™¨æ‹’ç»åœ¨æ²¡æœ‰å®šä¹‰ Content-Length å¤´çš„æƒ…å†µä¸‹æ¥å—è¯·æ±‚ã€‚åœ¨æ·»åŠ äº†è¡¨æ˜è¯·æ±‚æ¶ˆæ¯ä½“é•¿åº¦çš„æœ‰æ•ˆ Content-Length å¤´ä¹‹åï¼Œå®¢æˆ·ç«¯å¯ä»¥å†æ¬¡æäº¤è¯¥è¯·æ±‚ã€‚</td>
</tr>
<tr>
<td>412 Precondition Failed</td>
<td>æœåŠ¡å™¨åœ¨éªŒè¯åœ¨è¯·æ±‚çš„å¤´å­—æ®µä¸­ç»™å‡ºå…ˆå†³æ¡ä»¶æ—¶ï¼Œæ²¡èƒ½æ»¡è¶³å…¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªã€‚è¿™ä¸ªçŠ¶æ€ç å…è®¸å®¢æˆ·ç«¯åœ¨è·å–èµ„æºæ—¶åœ¨è¯·æ±‚çš„å…ƒä¿¡æ¯ï¼ˆè¯·æ±‚å¤´å­—æ®µæ•°æ®ï¼‰ä¸­è®¾ç½®å…ˆå†³æ¡ä»¶ï¼Œä»¥æ­¤é¿å…è¯¥è¯·æ±‚æ–¹æ³•è¢«åº”ç”¨åˆ°å…¶å¸Œæœ›çš„å†…å®¹ä»¥å¤–çš„èµ„æºä¸Šã€‚</td>
</tr>
<tr>
<td>413 Payload Too Large</td>
<td>æœåŠ¡å™¨æ‹’ç»å¤„ç†å½“å‰è¯·æ±‚ï¼Œå› ä¸ºè¯¥è¯·æ±‚æäº¤çš„å®ä½“æ•°æ®å¤§å°è¶…è¿‡äº†æœåŠ¡å™¨æ„¿æ„æˆ–è€…èƒ½å¤Ÿå¤„ç†çš„èŒƒå›´ã€‚æ­¤ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å¯ä»¥å…³é—­è¿æ¥ä»¥å…å®¢æˆ·ç«¯ç»§ç»­å‘é€æ­¤è¯·æ±‚ã€‚å¦‚æœè¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„ï¼ŒæœåŠ¡å™¨åº”å½“è¿”å›ä¸€ä¸ª Retry-After çš„å“åº”å¤´ï¼Œä»¥å‘ŠçŸ¥å®¢æˆ·ç«¯å¯ä»¥åœ¨å¤šå°‘æ—¶é—´ä»¥åé‡æ–°å°è¯•ã€‚</td>
</tr>
<tr>
<td>414 URI Too Long</td>
<td>è¯·æ±‚çš„URI é•¿åº¦è¶…è¿‡äº†æœåŠ¡å™¨èƒ½å¤Ÿè§£é‡Šçš„é•¿åº¦ï¼Œå› æ­¤æœåŠ¡å™¨æ‹’ç»å¯¹è¯¥è¯·æ±‚æä¾›æœåŠ¡ã€‚è¿™æ¯”è¾ƒå°‘è§ï¼Œé€šå¸¸çš„æƒ…å†µåŒ…æ‹¬ï¼šæœ¬åº”ä½¿ç”¨POSTæ–¹æ³•çš„è¡¨å•æäº¤å˜æˆäº†GETæ–¹æ³•ï¼Œå¯¼è‡´æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆQuery Stringï¼‰è¿‡é•¿ã€‚</td>
</tr>
<tr>
<td>415 Unsupported Media Type</td>
<td>å¯¹äºå½“å‰è¯·æ±‚çš„æ–¹æ³•å’Œæ‰€è¯·æ±‚çš„èµ„æºï¼Œè¯·æ±‚ä¸­æäº¤çš„å®ä½“å¹¶ä¸æ˜¯æœåŠ¡å™¨ä¸­æ‰€æ”¯æŒçš„æ ¼å¼ï¼Œå› æ­¤è¯·æ±‚è¢«æ‹’ç»ã€‚</td>
</tr>
<tr>
<td>416 Requested Range Not Satisfiable</td>
<td>å¦‚æœè¯·æ±‚ä¸­åŒ…å«äº† Range è¯·æ±‚å¤´ï¼Œå¹¶ä¸” Range ä¸­æŒ‡å®šçš„ä»»ä½•æ•°æ®èŒƒå›´éƒ½ä¸å½“å‰èµ„æºçš„å¯ç”¨èŒƒå›´ä¸é‡åˆï¼ŒåŒæ—¶è¯·æ±‚ä¸­åˆæ²¡æœ‰å®šä¹‰ If-Range è¯·æ±‚å¤´ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±åº”å½“è¿”å›416çŠ¶æ€ç ã€‚</td>
</tr>
<tr>
<td>417 Expectation Failed</td>
<td>æ­¤å“åº”ä»£ç æ„å‘³ç€æœåŠ¡å™¨æ— æ³•æ»¡è¶³ Expect è¯·æ±‚æ ‡å¤´å­—æ®µæŒ‡ç¤ºçš„æœŸæœ›å€¼ã€‚</td>
</tr>
<tr>
<td>418 Iâ€™m a teapot</td>
<td>æœåŠ¡å™¨æ‹’ç»å°è¯•ç”¨ â€œèŒ¶å£¶å†²æ³¡å’–å•¡â€ã€‚</td>
</tr>
<tr>
<td>421 Misdirected Request</td>
<td>è¯¥è¯·æ±‚é’ˆå¯¹çš„æ˜¯æ— æ³•äº§ç”Ÿå“åº”çš„æœåŠ¡å™¨ã€‚ è¿™å¯ä»¥ç”±æœåŠ¡å™¨å‘é€ï¼Œè¯¥æœåŠ¡å™¨æœªé…ç½®ä¸ºé’ˆå¯¹åŒ…å«åœ¨è¯·æ±‚ URI ä¸­çš„æ–¹æ¡ˆå’Œæƒé™çš„ç»„åˆäº§ç”Ÿå“åº”ã€‚</td>
</tr>
<tr>
<td>422 Unprocessable Entity</td>
<td>è¯·æ±‚æ ¼å¼è‰¯å¥½ï¼Œä½†ç”±äºè¯­ä¹‰é”™è¯¯è€Œæ— æ³•éµå¾ªã€‚</td>
</tr>
<tr>
<td>423 Locked</td>
<td>æ­£åœ¨è®¿é—®çš„èµ„æºè¢«é”å®š</td>
</tr>
<tr>
<td>424 Failed Dependency</td>
<td>ç”±äºå…ˆå‰çš„è¯·æ±‚å¤±è´¥ï¼Œæ‰€ä»¥æ­¤æ¬¡è¯·æ±‚å¤±è´¥ã€‚</td>
</tr>
<tr>
<td>425 Too Early</td>
<td>æœåŠ¡å™¨ä¸æ„¿æ„å†’ç€é£é™©å»å¤„ç†å¯èƒ½é‡æ’­çš„è¯·æ±‚.</td>
</tr>
<tr>
<td>426 Upgrade Required</td>
<td>æœåŠ¡å™¨æ‹’ç»ä½¿ç”¨å½“å‰åè®®æ‰§è¡Œè¯·æ±‚ï¼Œä½†å¯èƒ½åœ¨å®¢æˆ·æœºå‡çº§åˆ°å…¶ä»–åè®®åæ„¿æ„è¿™æ ·åšã€‚ æœåŠ¡å™¨åœ¨ 426 å“åº”ä¸­å‘é€ Upgrade å¤´ä»¥æŒ‡ç¤ºæ‰€éœ€çš„åè®®ã€‚</td>
</tr>
<tr>
<td>428 Precondition Required</td>
<td>åŸå§‹æœåŠ¡å™¨è¦æ±‚è¯¥è¯·æ±‚æ˜¯æœ‰æ¡ä»¶çš„ã€‚ æ—¨åœ¨é˜²æ­¢â€œä¸¢å¤±æ›´æ–°â€é—®é¢˜ï¼Œå³å®¢æˆ·ç«¯è·å–èµ„æºçŠ¶æ€ï¼Œä¿®æ”¹è¯¥çŠ¶æ€å¹¶å°†å…¶è¿”å›æœåŠ¡å™¨ï¼ŒåŒæ—¶ç¬¬ä¸‰æ–¹ä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„çŠ¶æ€ï¼Œä»è€Œå¯¼è‡´å†²çªã€‚</td>
</tr>
<tr>
<td>429 Too Many Requests</td>
<td>ç”¨æˆ·åœ¨ç»™å®šçš„æ—¶é—´å†…å‘é€äº†å¤ªå¤šè¯·æ±‚ï¼ˆâ€œé™åˆ¶è¯·æ±‚é€Ÿç‡â€ï¼‰ã€‚</td>
</tr>
<tr>
<td>431 Request Header Fields Too Large</td>
<td>æœåŠ¡å™¨ä¸æ„¿æ„å¤„ç†è¯·æ±‚ï¼Œå› ä¸ºå®ƒçš„ è¯·æ±‚å¤´å­—æ®µå¤ªå¤§ï¼ˆ Request Header Fields Too Largeï¼‰ã€‚ è¯·æ±‚å¯ä»¥åœ¨å‡å°è¯·æ±‚å¤´å­—æ®µçš„å¤§å°åé‡æ–°æäº¤ã€‚</td>
</tr>
<tr>
<td>451 Unavailable For Legal Reasons</td>
<td>ç”¨æˆ·è¯·æ±‚éæ³•èµ„æºï¼Œä¾‹å¦‚ï¼šç”±æ”¿åºœå®¡æŸ¥çš„ç½‘é¡µã€‚</td>
</tr>
</tbody>
</table>
<h1 id="æœåŠ¡ç«¯å“åº”"><a href="#æœåŠ¡ç«¯å“åº”" class="headerlink" title="æœåŠ¡ç«¯å“åº”"></a>æœåŠ¡ç«¯å“åº”</h1><table>
<thead>
<tr>
<th>ä»£ç </th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>500 Internal Server Error</td>
<td>æœåŠ¡å™¨é‡åˆ°äº†ä¸çŸ¥é“å¦‚ä½•å¤„ç†çš„æƒ…å†µã€‚</td>
</tr>
<tr>
<td>501 Not Implemented</td>
<td>æ­¤è¯·æ±‚æ–¹æ³•ä¸è¢«æœåŠ¡å™¨æ”¯æŒä¸”æ— æ³•è¢«å¤„ç†ã€‚åªæœ‰GETå’ŒHEADæ˜¯è¦æ±‚æœåŠ¡å™¨æ”¯æŒçš„ï¼Œå®ƒä»¬å¿…å®šä¸ä¼šè¿”å›æ­¤é”™è¯¯ä»£ç ã€‚</td>
</tr>
<tr>
<td>502 Bad Gateway</td>
<td>æ­¤é”™è¯¯å“åº”è¡¨æ˜æœåŠ¡å™¨ä½œä¸ºç½‘å…³éœ€è¦å¾—åˆ°ä¸€ä¸ªå¤„ç†è¿™ä¸ªè¯·æ±‚çš„å“åº”ï¼Œä½†æ˜¯å¾—åˆ°ä¸€ä¸ªé”™è¯¯çš„å“åº”ã€‚</td>
</tr>
<tr>
<td>503 Service Unavailable</td>
<td>æœåŠ¡å™¨æ²¡æœ‰å‡†å¤‡å¥½å¤„ç†è¯·æ±‚ã€‚ å¸¸è§åŸå› æ˜¯æœåŠ¡å™¨å› ç»´æŠ¤æˆ–é‡è½½è€Œåœæœºã€‚ è¯·æ³¨æ„ï¼Œä¸æ­¤å“åº”ä¸€èµ·ï¼Œåº”å‘é€è§£é‡Šé—®é¢˜çš„ç”¨æˆ·å‹å¥½é¡µé¢ã€‚ è¿™ä¸ªå“åº”åº”è¯¥ç”¨äºä¸´æ—¶æ¡ä»¶å’Œ Retry-Afterï¼šå¦‚æœå¯èƒ½çš„è¯ï¼ŒHTTPå¤´åº”è¯¥åŒ…å«æ¢å¤æœåŠ¡ä¹‹å‰çš„ä¼°è®¡æ—¶é—´ã€‚ ç½‘ç«™ç®¡ç†å‘˜è¿˜å¿…é¡»æ³¨æ„ä¸æ­¤å“åº”ä¸€èµ·å‘é€çš„ä¸ç¼“å­˜ç›¸å…³çš„æ ‡å¤´ï¼Œå› ä¸ºè¿™äº›ä¸´æ—¶æ¡ä»¶å“åº”é€šå¸¸ä¸åº”è¢«ç¼“å­˜ã€‚</td>
</tr>
<tr>
<td>504 Gateway Timeout</td>
<td>å½“æœåŠ¡å™¨ä½œä¸ºç½‘å…³ï¼Œä¸èƒ½åŠæ—¶å¾—åˆ°å“åº”æ—¶è¿”å›æ­¤é”™è¯¯ä»£ç ã€‚</td>
</tr>
<tr>
<td>505 HTTP Version Not Supported</td>
<td>æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚ä¸­æ‰€ä½¿ç”¨çš„HTTPåè®®ç‰ˆæœ¬ã€‚</td>
</tr>
<tr>
<td>506 Variant Also Negotiates</td>
<td>æœåŠ¡å™¨æœ‰ä¸€ä¸ªå†…éƒ¨é…ç½®é”™è¯¯ï¼šå¯¹è¯·æ±‚çš„é€æ˜å†…å®¹åå•†å¯¼è‡´å¾ªç¯å¼•ç”¨ã€‚</td>
</tr>
<tr>
<td>507 Insufficient Storage</td>
<td>æœåŠ¡å™¨æœ‰å†…éƒ¨é…ç½®é”™è¯¯ï¼šæ‰€é€‰çš„å˜ä½“èµ„æºè¢«é…ç½®ä¸ºå‚ä¸é€æ˜å†…å®¹åå•†æœ¬èº«ï¼Œå› æ­¤ä¸æ˜¯åå•†è¿‡ç¨‹ä¸­çš„é€‚å½“ç«¯ç‚¹ã€‚</td>
</tr>
<tr>
<td>508 Loop Detected</td>
<td>æœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶æ£€æµ‹åˆ°æ— é™å¾ªç¯ã€‚</td>
</tr>
<tr>
<td>510 Not Extended</td>
<td>å®¢æˆ·ç«¯éœ€è¦å¯¹è¯·æ±‚è¿›ä¸€æ­¥æ‰©å±•ï¼ŒæœåŠ¡å™¨æ‰èƒ½å®ç°å®ƒã€‚æœåŠ¡å™¨ä¼šå›å¤å®¢æˆ·ç«¯å‘å‡ºæ‰©å±•è¯·æ±‚æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚</td>
</tr>
<tr>
<td>511 Network Authentication Required</td>
<td>511 çŠ¶æ€ç æŒ‡ç¤ºå®¢æˆ·ç«¯éœ€è¦è¿›è¡Œèº«ä»½éªŒè¯æ‰èƒ½è·å¾—ç½‘ç»œè®¿é—®æƒé™ã€‚</td>
</tr>
</tbody>
</table>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status</a></p>
]]></content>
      <categories>
        <category>HTTP</category>
      </categories>
      <tags>
        <tag>HTTP</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac Homebrewå¸¸ç”¨å‘½ä»¤</title>
    <url>/2019/05/04/Mac-Homebrew%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Homebrewæ˜¯Mac OSXä¸Šçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œèƒ½åœ¨Macä¸­æ–¹ä¾¿çš„å®‰è£…è½¯ä»¶æˆ–è€…å¸è½½è½¯ä»¶ï¼Œ ä½¿ç”¨å‘½ä»¤ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<a id="more"></a>
<h1 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew --<span class="built_in">help</span>        <span class="comment">#ç®€æ´å‘½ä»¤å¸®åŠ©</span></span><br><span class="line">$ man brew           <span class="comment">#å®Œæ•´å‘½ä»¤å¸®åŠ©</span></span><br><span class="line">$ brew install git   <span class="comment">#å®‰è£…è½¯ä»¶åŒ…(è¿™é‡Œæ˜¯ç¤ºä¾‹å®‰è£…çš„Gitç‰ˆæœ¬æ§åˆ¶)</span></span><br><span class="line">$ brew uninstall git <span class="comment">#å¸è½½è½¯ä»¶åŒ…</span></span><br><span class="line">$ brew search git    <span class="comment">#æœç´¢è½¯ä»¶åŒ…</span></span><br><span class="line">$ brew list          <span class="comment">#æ˜¾ç¤ºå·²ç»å®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŒ…</span></span><br><span class="line">$ brew update        <span class="comment">#åŒæ­¥è¿œç¨‹æœ€æ–°æ›´æ–°æƒ…å†µï¼Œå¯¹æœ¬æœºå·²ç»å®‰è£…å¹¶æœ‰æ›´æ–°çš„è½¯ä»¶ç”¨*æ ‡æ˜</span></span><br><span class="line">$ brew outdated      <span class="comment">#æŸ¥çœ‹å·²å®‰è£…çš„å“ªäº›è½¯ä»¶åŒ…éœ€è¦æ›´æ–°</span></span><br><span class="line">$ brew upgrade git   <span class="comment">#æ›´æ–°å•ä¸ªè½¯ä»¶åŒ…</span></span><br><span class="line">$ brew info git      <span class="comment">#æŸ¥çœ‹è½¯ä»¶åŒ…ä¿¡æ¯</span></span><br><span class="line">$ brew home git      <span class="comment">#è®¿é—®è½¯ä»¶åŒ…å®˜æ–¹ç«™</span></span><br><span class="line">$ brew cleanup       <span class="comment">#æ¸…ç†æ‰€æœ‰å·²å®‰è£…è½¯ä»¶åŒ…çš„å†å²è€ç‰ˆæœ¬</span></span><br><span class="line">$ brew cleanup git   <span class="comment">#æ¸…ç†å•ä¸ªå·²å®‰è£…è½¯ä»¶åŒ…çš„å†å²ç‰ˆæœ¬</span></span><br><span class="line">$ brew tap           <span class="comment">#å¯ä»¥ä¸ºbrewçš„è½¯ä»¶çš„ è·Ÿè¸ª,æ›´æ–°,å®‰è£…æ·»åŠ æ›´å¤šçš„çš„tap formulae</span></span><br></pre></td></tr></table></figure>
<h1 id="ç¨‹åºå®‰è£…è·¯å¾„åŠæ–‡ä»¶å¤¹"><a href="#ç¨‹åºå®‰è£…è·¯å¾„åŠæ–‡ä»¶å¤¹" class="headerlink" title="ç¨‹åºå®‰è£…è·¯å¾„åŠæ–‡ä»¶å¤¹"></a>ç¨‹åºå®‰è£…è·¯å¾„åŠæ–‡ä»¶å¤¹</h1><ul>
<li>bin          #ç”¨äºå­˜æ”¾æ‰€å®‰è£…ç¨‹åºçš„å¯åŠ¨é“¾æ¥ï¼ˆç›¸å½“äºå¿«æ·æ–¹å¼ï¼‰</li>
<li>Cellar       #æ‰€æœ‰brewå®‰è£…çš„ç¨‹åºï¼Œéƒ½å°†ä»¥[ç¨‹åºå/ç‰ˆæœ¬å·]å­˜æ”¾äºæœ¬ç›®å½•ä¸‹</li>
<li>etc          #brewå®‰è£…ç¨‹åºçš„é…ç½®æ–‡ä»¶é»˜è®¤å­˜æ”¾è·¯å¾„</li>
<li>Library      #Homebrew ç³»ç»Ÿè‡ªèº«æ–‡ä»¶å¤¹<ul>
<li>Formula     #ç¨‹åºçš„ä¸‹è½½è·¯å¾„å’Œç¼–è¯‘å‚æ•°åŠå®‰è£…è·¯å¾„ç­‰é…ç½®æ–‡ä»¶å­˜æ”¾åœ°</li>
<li>Homebrew    #brewç¨‹åºè‡ªèº«å‘½ä»¤é›†</li>
</ul>
</li>
</ul>
<h1 id="æ›¿æ¢åŠé‡ç½®Homebrewé»˜è®¤æº"><a href="#æ›¿æ¢åŠé‡ç½®Homebrewé»˜è®¤æº" class="headerlink" title="æ›¿æ¢åŠé‡ç½®Homebrewé»˜è®¤æº"></a>æ›¿æ¢åŠé‡ç½®Homebrewé»˜è®¤æº</h1><ul>
<li>æ›¿æ¢brew.git:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> <span class="string">"<span class="variable">$(brew --repo)</span>"</span></span><br><span class="line">$ git remote <span class="built_in">set</span>-url origin https://mirrors.ustc.edu.cn/brew.git</span><br></pre></td></tr></table></figure>
<p>â€‹    <strong>å¯é€‰é•œåƒæºï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https://git.coding.net/homebrew/homebrew.git - Coding</span><br><span class="line">https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git - æ¸…å</span><br><span class="line">https://mirrors.ustc.edu.cn/brew.git - ä¸­ç§‘å¤§</span><br></pre></td></tr></table></figure>
<ul>
<li>æ›¿æ¢homebrew-core.git:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> <span class="string">"<span class="variable">$(brew --repo)</span>/Library/Taps/homebrew/homebrew-core"</span></span><br><span class="line">$ git remote <span class="built_in">set</span>-url origin https://mirrors.ustc.edu.cn/homebrew-core.git</span><br></pre></td></tr></table></figure>
<ul>
<li>é‡ç½®brew.git:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> <span class="string">"<span class="variable">$(brew --repo)</span>"</span></span><br><span class="line">$ git remote <span class="built_in">set</span>-url origin https://github.com/Homebrew/brew.git</span><br></pre></td></tr></table></figure>
<ul>
<li>é‡ç½®homebrew-core.git:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> <span class="string">"<span class="variable">$(brew --repo)</span>/Library/Taps/homebrew/homebrew-core"</span></span><br><span class="line">$ git remote <span class="built_in">set</span>-url origin https://github.com/Homebrew/homebrew-core.git</span><br></pre></td></tr></table></figure>
<h1 id="LaunchRocket"><a href="#LaunchRocket" class="headerlink" title="LaunchRocket"></a>LaunchRocket</h1><p>LaunchRecketæ˜¯ç®¡ç†homebrewæ‰€å®‰è£…åº”ç”¨çš„ä¸€ä¸ªç®¡ç†å™¨ï¼Œå®ƒåœ¨ç³»ç»Ÿè®¾ç½®ä¸­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># install</span></span><br><span class="line">brew cask install launchrocket</span><br><span class="line"><span class="comment"># uninstall</span></span><br><span class="line">brew cask uninstall launchrocket</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/jimbojsb/launchrocket" target="_blank" rel="noopener">https://github.com/jimbojsb/launchrocket</a></p>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/</a></p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>Homebrew</tag>
      </tags>
  </entry>
  <entry>
    <title>MacOS Apacheé…ç½®</title>
    <url>/2019/05/04/MacOS-Apache%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul>
<li>macOS Mojave 10.14.4</li>
<li>Apache/2.4.38</li>
</ul>
<a id="more"></a>
<h1 id="æŸ¥çœ‹Apache"><a href="#æŸ¥çœ‹Apache" class="headerlink" title="æŸ¥çœ‹Apache"></a>æŸ¥çœ‹Apache</h1><p>macOSç³»ç»Ÿè‡ªå¸¦Apacheè½¯ä»¶ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸‹æŸ¥çœ‹Apacheç‰ˆæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ httpd -v</span><br><span class="line">Server version: Apache/2.4.38 (Unix)</span><br><span class="line">Server built:   Feb 10 2019 02:48:38</span><br></pre></td></tr></table></figure>
<h1 id="å¯åŠ¨Apache"><a href="#å¯åŠ¨Apache" class="headerlink" title="å¯åŠ¨Apache"></a>å¯åŠ¨Apache</h1><p>å‘½ä»¤è¡Œç›´æ¥å¯åŠ¨ï¼Œå¦‚æœæ˜¯æ™®é€šç”¨æˆ·ä¸‹éœ€è¦<code>sudo</code>ï¼Œæ™®é€šç”¨æˆ·æ²¡æœ‰æƒé™æ“ä½œ<code>apachectl</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo apachectl start</span><br><span class="line">$ sudo apachectl stop</span><br><span class="line">$ sudo apachectl restart</span><br></pre></td></tr></table></figure>
<p>mac ä¸‹ <code>Apache</code> é»˜è®¤çš„ç›®å½•åœ¨ <code>/Library/WebServer</code> ä¸‹</p>
<h1 id="å¼€å¯Apacheå¤šç”¨æˆ·ä¸»ç›®å½•"><a href="#å¼€å¯Apacheå¤šç”¨æˆ·ä¸»ç›®å½•" class="headerlink" title="å¼€å¯Apacheå¤šç”¨æˆ·ä¸»ç›®å½•"></a>å¼€å¯Apacheå¤šç”¨æˆ·ä¸»ç›®å½•</h1><p>æ‰§è¡Œ <code>sudo vim /etc/apache2/httpd.conf</code> æ‰“å¼€ <code>httpd.conf</code> æ–‡ä»¶ï¼Œç„¶åæŸ¥æ‰¾ <code>userdir</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># User home directories</span><br><span class="line">#Include /private/etc/apache2/extra/httpd-userdir.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#LoadModule userdir_module libexec/apache2/mod_userdir.so</span><br></pre></td></tr></table></figure>
<p>å»æ‰å‰é¢<code>#</code>æ³¨é‡Šå³å¯ã€‚</p>
<p>æ¥ç€å†ç¼–è¾‘ <code>/private/etc/apache2/extra/httpd-userdir.conf</code> æ–‡ä»¶ï¼Œå¢åŠ å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">UserDir Sites</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæœ‰åˆ™ä¸ç”¨æ·»åŠ äº†ã€‚</p>
<h1 id="é…ç½®è™šæ‹Ÿä¸»æœº"><a href="#é…ç½®è™šæ‹Ÿä¸»æœº" class="headerlink" title="é…ç½®è™šæ‹Ÿä¸»æœº"></a>é…ç½®è™šæ‹Ÿä¸»æœº</h1><p>æ‰§è¡Œ <code>sudo vim /etc/apache2/httpd.conf</code>ï¼ŒæŸ¥æ‰¾<code>vhost</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#LoadModule vhost_alias_module libexec/apache2/mod_vhost_alias.so</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Virtual hosts</span><br><span class="line">#Include /private/etc/apache2/extra/httpd-vhosts.conf</span><br></pre></td></tr></table></figure>
<p>å»æ‰å‰é¢<code>#</code>æ³¨é‡Šå³å¯ã€‚å†ä¿®æ”¹<code>/private/etc/apache2/extra/httpd-vhosts.conf</code>é…ç½®å³å¯ã€‚</p>
<h1 id="ä½¿ç”¨Homebrewä»£æ›¿è‡ªå¸¦çš„"><a href="#ä½¿ç”¨Homebrewä»£æ›¿è‡ªå¸¦çš„" class="headerlink" title="ä½¿ç”¨Homebrewä»£æ›¿è‡ªå¸¦çš„"></a>ä½¿ç”¨Homebrewä»£æ›¿è‡ªå¸¦çš„</h1><p>ç”±äºä¹‹å‰ä¸çŸ¥é“æäº†ä»€ä¹ˆï¼Œè‡ªå¸¦çš„æ€ä¹ˆæ›´æ”¹éƒ½ä¸ç”Ÿæ•ˆï¼Œæ‰€ä»¥é‡æ–°å®‰è£…äº†ã€‚</p>
<h2 id="å®‰è£…apache"><a href="#å®‰è£…apache" class="headerlink" title="å®‰è£…apache"></a>å®‰è£…apache</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew tap homebrew/apache</span><br><span class="line">$ brew tap homebrew/php</span><br><span class="line">$ brew install httpd</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®apache"><a href="#é…ç½®apache" class="headerlink" title="é…ç½®apache"></a>é…ç½®apache</h2><p>é…ç½®æ–‡ä»¶è·¯å¾„ä¸º<code>/usr/local/etc/httpd/httpd.conf</code>ï¼Œé…ç½®çš„æ–¹æ³•å’Œä¸Šè¿°è‡ªå¸¦æ— å·®åˆ«ã€‚åªæ˜¯é…ç½®è·¯å¾„å‘ç”Ÿäº†å˜åŒ–ã€‚</p>
<h2 id="é…ç½®PHPæ¨¡å—"><a href="#é…ç½®PHPæ¨¡å—" class="headerlink" title="é…ç½®PHPæ¨¡å—"></a>é…ç½®PHPæ¨¡å—</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">LoadModule php7_module /usr/local/Cellar/php@7.1/7.1.26/lib/httpd/modules/libphp7.so</span><br><span class="line">&lt;IfModule mod_php7.c&gt;</span><br><span class="line"></span><br><span class="line">    AddType application/x-httpd-php .php</span><br><span class="line">    AddType application/x-httpd-php-source .phps</span><br><span class="line"></span><br><span class="line">    &lt;IfModule mod_dir.c&gt;</span><br><span class="line">        DirectoryIndex index.html index.php</span><br><span class="line">    &lt;/IfModule&gt;</span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>
<p>æ‰¾åˆ°æ‰€åœ¨phpçš„soæ–‡ä»¶æ·»åŠ è¿›é…ç½®å³å¯ï¼Œphpç‰ˆæœ¬å¯æ ¹æ®è‡ªå·±éœ€è¦æ›´æ”¹ã€‚</p>
]]></content>
      <categories>
        <category>Apache</category>
      </categories>
      <tags>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Apache</tag>
      </tags>
  </entry>
  <entry>
    <title>Apacheé…ç½®æ–‡ä»¶è¯¦è§£</title>
    <url>/2019/04/29/Apache%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul>
<li>Centos7</li>
<li>Apache/2.4.38</li>
</ul>
<a id="more"></a>
<h1 id="é…ç½®æ–‡ä»¶è·¯å¾„"><a href="#é…ç½®æ–‡ä»¶è·¯å¾„" class="headerlink" title="é…ç½®æ–‡ä»¶è·¯å¾„"></a>é…ç½®æ–‡ä»¶è·¯å¾„</h1><p>æ‰¾åˆ°apacheæ‰€åœ¨çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨æœ¬æ–‡ç¯å¢ƒä¸‹å³centos7ä»¥yumæºå®‰è£…çš„httpdæ‰€åœ¨çš„é…ç½®ç¯å¢ƒè·¯å¾„ä¸º<code>/etc/httpd/conf</code>ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤æ‰¾åˆ°è¯¥é…ç½®æ–‡ä»¶ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo find / -name <span class="string">'httpd.conf'</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»¥ä¸‹ä»¥æœ¬æ–‡ä¸­çš„é…ç½®è·¯å¾„ä¸ºå‡†ï¼Œå…¶ä»–ç³»ç»Ÿä¸‹è·¯å¾„å¯èƒ½ä¸ä¸€è‡´ã€‚<br>åœ¨ Ubnutu/Mac ä¸Šï¼Œapache æœåŠ¡å« apache2ï¼Œè€Œä¸æ˜¯ httpdï¼ˆåœ¨ Centos ä¸Šå« httpdï¼‰ï¼Œä¸»é…ç½®æ–‡ä»¶ä¸º /etc/apache2/apache2.conf</p>
</blockquote>
<h1 id="Apacheé…ç½®æ–‡ä»¶"><a href="#Apacheé…ç½®æ–‡ä»¶" class="headerlink" title="Apacheé…ç½®æ–‡ä»¶"></a>Apacheé…ç½®æ–‡ä»¶</h1><p>Apacheæä¾›äº†çµæ´»çš„webæœåŠ¡é…ç½®ï¼Œç†è§£å…¶å‚æ•°çš„å«ä¹‰å¾ˆé‡è¦ã€‚</p>
<p>Apacheé…ç½®æ–‡ä»¶ä¸­è‹±æ–‡å¯¹ç…§ï¼š<a href="http://www.cnblogs.com/adamite/p/apache_configuration.html" target="_blank" rel="noopener">http://www.cnblogs.com/adamite/p/apache_configuration.html</a></p>
<h2 id="Apacheä¸»ç›®å½•"><a href="#Apacheä¸»ç›®å½•" class="headerlink" title="Apacheä¸»ç›®å½•"></a>Apacheä¸»ç›®å½•</h2><p><code>ServerRoot &quot;/etc/httpd&quot;</code></p>
<h2 id="ç›‘å¬ç«¯å£"><a href="#ç›‘å¬ç«¯å£" class="headerlink" title="ç›‘å¬ç«¯å£"></a>ç›‘å¬ç«¯å£</h2><p><code>Listen 80</code></p>
<h2 id="åŠ è½½åŠ¨æ€æ¨¡å—"><a href="#åŠ è½½åŠ¨æ€æ¨¡å—" class="headerlink" title="åŠ è½½åŠ¨æ€æ¨¡å—"></a>åŠ è½½åŠ¨æ€æ¨¡å—</h2><p><code>LoadModule php5_module modules/libphp5.so</code></p>
<p>æˆ–è€…åŠ è½½åŠ¨æ€æ¨¡å—çš„é…ç½®æ–‡ä»¶</p>
<p><code>Include conf.modules.d/*.conf</code></p>
<h2 id="Apacheçš„è¿›ç¨‹æ‰§è¡Œè€…"><a href="#Apacheçš„è¿›ç¨‹æ‰§è¡Œè€…" class="headerlink" title="Apacheçš„è¿›ç¨‹æ‰§è¡Œè€…"></a>Apacheçš„è¿›ç¨‹æ‰§è¡Œè€…</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">User apache</span><br><span class="line">Group apache</span><br></pre></td></tr></table></figure>
<h2 id="æœåŠ¡å™¨åŸŸå"><a href="#æœåŠ¡å™¨åŸŸå" class="headerlink" title="æœåŠ¡å™¨åŸŸå"></a>æœåŠ¡å™¨åŸŸå</h2><p>è¯¥é¡¹å¯é…ç½®ä¹Ÿå¯ä¸é…ç½® <code>ServerName www.example.com:80</code></p>
<h2 id="ç½‘ç«™æ ¹ç›®å½•"><a href="#ç½‘ç«™æ ¹ç›®å½•" class="headerlink" title="ç½‘ç«™æ ¹ç›®å½•"></a>ç½‘ç«™æ ¹ç›®å½•</h2><p><code>DocumentRoot &quot;/var/www/html&quot;</code></p>
<h2 id="è®¾ç½®ç½‘ç«™æ ¹ç›®å½•çš„è®¿é—®æƒé™"><a href="#è®¾ç½®ç½‘ç«™æ ¹ç›®å½•çš„è®¿é—®æƒé™" class="headerlink" title="è®¾ç½®ç½‘ç«™æ ¹ç›®å½•çš„è®¿é—®æƒé™"></a>è®¾ç½®ç½‘ç«™æ ¹ç›®å½•çš„è®¿é—®æƒé™</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;Directory &quot;/var/www/html&quot;&gt;</span><br><span class="line">    #</span><br><span class="line">    # Possible values for the Options directive are &quot;None&quot;, &quot;All&quot;,</span><br><span class="line">    # or any combination of:</span><br><span class="line">    #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews</span><br><span class="line">    #</span><br><span class="line">    # Note that &quot;MultiViews&quot; must be named *explicitly* --- &quot;Options All&quot;</span><br><span class="line">    # doesn&apos;t give it to you.</span><br><span class="line">    #</span><br><span class="line">    # The Options directive is both complicated and important.  Please see</span><br><span class="line">    # http://httpd.apache.org/docs/2.4/mod/core.html#options</span><br><span class="line">    # for more information.</span><br><span class="line">    #</span><br><span class="line">    Options Indexes FollowSymLinks</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # AllowOverride controls what directives may be placed in .htaccess files.</span><br><span class="line">    # It can be &quot;All&quot;, &quot;None&quot;, or any combination of the keywords:</span><br><span class="line">    #   Options FileInfo AuthConfig Limit</span><br><span class="line">    #</span><br><span class="line">    AllowOverride None</span><br><span class="line"></span><br><span class="line">    #</span><br><span class="line">    # Controls who can get stuff from this server.</span><br><span class="line">    #</span><br><span class="line">    Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<p><strong>å‚æ•°è¯¦è§£</strong></p>
<ul>
<li><code>Allow from all</code> å‚æ•°å…è®¸æ‰€æœ‰äººè®¿é—®<code>/var/www/html</code>ä¸‹çš„èµ„æº</li>
<li><code>Deny from all</code> å‚æ•°æ‹’ç»æ‰€æœ‰äººè®¿é—®<code>/var/www/html</code>ä¸‹çš„èµ„æº</li>
<li><code>Options Indexes</code> å‚æ•°:è®¿é—®ç›®å½•æ—¶,å¦‚æœä¸å­˜åœ¨é»˜è®¤é¦–é¡µåˆ™å±•ç¤ºç«™ç‚¹åˆ—è¡¨ è¯¥è¡Œå»ºè®®æ”¹æˆ Options None</li>
<li><code>Options FollowSymLinks</code> å‚æ•°:æ˜¯å¦å…è®¸å¿«æ·æ–¹å¼(ln -s è½¯è¿æ¥)</li>
<li><code>Options MultiViews</code> å¤šè§†å›¾,è®¿é—®<code>/index</code>ç­‰åŒè®¿é—®<code>index.php</code>æˆ–<code>index.html</code></li>
</ul>
<h3 id="ApacheæœåŠ¡å™¨è®¿é—®æƒé™æ§åˆ¶åŒ…æ‹¬"><a href="#ApacheæœåŠ¡å™¨è®¿é—®æƒé™æ§åˆ¶åŒ…æ‹¬" class="headerlink" title="ApacheæœåŠ¡å™¨è®¿é—®æƒé™æ§åˆ¶åŒ…æ‹¬:"></a>ApacheæœåŠ¡å™¨è®¿é—®æƒé™æ§åˆ¶åŒ…æ‹¬:</h3><h4 id="Apache-æœåŠ¡æƒé™"><a href="#Apache-æœåŠ¡æƒé™" class="headerlink" title="Apache æœåŠ¡æƒé™"></a>Apache æœåŠ¡æƒé™</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deny from all (**403 forbidden** error!)</span><br><span class="line">allow from all</span><br></pre></td></tr></table></figure>
<h4 id="Linux-ç³»ç»Ÿæƒé™"><a href="#Linux-ç³»ç»Ÿæƒé™" class="headerlink" title="Linux ç³»ç»Ÿæƒé™"></a>Linux ç³»ç»Ÿæƒé™</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">selinux</span><br><span class="line">iptables</span><br><span class="line">httpdè¿›ç¨‹æ‰§è¡Œè€…å¯¹æ ¹ç›®å½•çš„æƒé™(**403 forbidden** error!)</span><br></pre></td></tr></table></figure>
<h2 id="è®¾ç½®ç›®å½•é»˜è®¤é¦–é¡µ"><a href="#è®¾ç½®ç›®å½•é»˜è®¤é¦–é¡µ" class="headerlink" title="è®¾ç½®ç›®å½•é»˜è®¤é¦–é¡µ"></a>è®¾ç½®ç›®å½•é»˜è®¤é¦–é¡µ</h2><p>ä¼˜å…ˆçº§ä»å·¦å¾€å³ä¾æ¬¡é™ä½</p>
<p><code>DirectoryIndex index.html index.php</code></p>
<h2 id="é”™è¯¯æ—¥å¿—"><a href="#é”™è¯¯æ—¥å¿—" class="headerlink" title="é”™è¯¯æ—¥å¿—"></a>é”™è¯¯æ—¥å¿—</h2><p><code>ErrorLog &quot;logs/error_log&quot;</code></p>
<h2 id="è®¿é—®æ—¥å¿—"><a href="#è®¿é—®æ—¥å¿—" class="headerlink" title="è®¿é—®æ—¥å¿—"></a>è®¿é—®æ—¥å¿—</h2><p><code>CustomLog &quot;logs/access_log&quot; common</code></p>
<h2 id="è§£æphpè„šæœ¬"><a href="#è§£æphpè„šæœ¬" class="headerlink" title="è§£æphpè„šæœ¬"></a>è§£æphpè„šæœ¬</h2><p><code>AddType application/x-httpd-php .php</code></p>
<h2 id="æ§åˆ¶é”™è¯¯é¡µé¢çš„è¾“å‡º"><a href="#æ§åˆ¶é”™è¯¯é¡µé¢çš„è¾“å‡º" class="headerlink" title="æ§åˆ¶é”™è¯¯é¡µé¢çš„è¾“å‡º"></a>æ§åˆ¶é”™è¯¯é¡µé¢çš„è¾“å‡º</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#ErrorDocument 500 &quot;The server made a boo boo.&quot;</span><br><span class="line">#ErrorDocument 404 /missing.html</span><br><span class="line">#ErrorDocument 404 &quot;/cgi-bin/missing_handler.pl&quot;</span><br><span class="line">#ErrorDocument 402 http://www.example.com/subscription_info.html</span><br></pre></td></tr></table></figure>
<h2 id="åŒ…å«å¤–éƒ¨é…ç½®æ–‡ä»¶"><a href="#åŒ…å«å¤–éƒ¨é…ç½®æ–‡ä»¶" class="headerlink" title="åŒ…å«å¤–éƒ¨é…ç½®æ–‡ä»¶"></a>åŒ…å«å¤–éƒ¨é…ç½®æ–‡ä»¶</h2><p><code>Include extra/httpd-vhosts.conf</code></p>
<h2 id="è™šæ‹Ÿç›®å½•"><a href="#è™šæ‹Ÿç›®å½•" class="headerlink" title="è™šæ‹Ÿç›®å½•"></a>è™šæ‹Ÿç›®å½•</h2><p><code>http://localhost/mnt</code> mntç›®å½•å¹¶ä¸åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹,ç›®å½•èµ„æºåœ¨<code>/tmp/mnt</code>ç›®å½•ä¸‹ åœ¨<code>/usr/local/apache2/etc/http.conf</code>æ–‡ä»¶é‡Œå¢åŠ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Alias /mnt &quot;/mnt/www&quot; # è™šæ‹Ÿç›®å½•ï¼ˆç›®å½•åˆ«åï¼‰</span><br><span class="line">&lt;Directory &quot;/mnt/www&quot;&gt;</span><br><span class="line">    Options none</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Deny from all # æ‹’ç»æ‰€æœ‰</span><br><span class="line">    Allow from all # å…è®¸æ‰€æœ‰</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<p><code>http://localhost/mnt</code> é‡å¯apacheåè®¿é—®çš„èµ„æºä¾¿æ˜¯ <code>/mnt/www</code>ç›®å½•ä¸‹çš„èµ„æº</p>
<h1 id="Apacheè™šæ‹Ÿä¸»æœºé…ç½®"><a href="#Apacheè™šæ‹Ÿä¸»æœºé…ç½®" class="headerlink" title="Apacheè™šæ‹Ÿä¸»æœºé…ç½®"></a>Apacheè™šæ‹Ÿä¸»æœºé…ç½®</h1><p>åŸºäºåŸŸåçš„è™šæ‹Ÿä¸»æœºï¼ŒæŒ‡å®šæœåŠ¡å™¨IPï¼ˆå’Œå¯èƒ½çš„ç«¯å£ï¼‰ä½¿ä¸»æœºæ¥å—è¯·æ±‚ã€‚ç”¨<code>NameVirtualHost</code>è¿›è¡Œé…ç½®ã€‚ å¦‚æœæœåŠ¡å™¨ä¸Šæ‰€æœ‰çš„IPåœ°å€éƒ½ä¼šç”¨åˆ°ï¼Œå¯ä»¥ç”¨<code>*</code>ä½œä¸º<code>NameVirtualHost</code>çš„å‚æ•°ã€‚åœ¨<code>NameVirtualHost</code>æŒ‡ä»¤ä¸­æŒ‡æ˜IPåœ°å€ä¸ä¼šä½¿æœåŠ¡å™¨è‡ªåŠ¨ä¾¦å¬é‚£ä¸ªIPåœ°å€ã€‚</p>
<h2 id="æ‰¾åˆ°Apacheçš„ä¸»é…ç½®æ–‡ä»¶httpd-conf"><a href="#æ‰¾åˆ°Apacheçš„ä¸»é…ç½®æ–‡ä»¶httpd-conf" class="headerlink" title="æ‰¾åˆ°Apacheçš„ä¸»é…ç½®æ–‡ä»¶httpd.conf"></a>æ‰¾åˆ°Apacheçš„ä¸»é…ç½®æ–‡ä»¶<code>httpd.conf</code></h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ cd /etc/httpd/conf</span><br><span class="line">$ vim httpd.conf</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æœç´¢å…³é”®å­—<code>vhosts</code>ï¼Œå¦‚æœæ²¡æœ‰åˆ™åœ¨æ–‡ä»¶åæ·»åŠ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Load vhost-config files in the &quot;/etc/httpd/vhost-conf.d&quot; directory if any</span><br><span class="line">Include vhost.d/*.conf</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸ä½¿ç”¨å®˜æ–¹åŸç‰ˆçš„å•ä¸ªé…ç½®æ–‡ä»¶æœ‰ä¸ªå¥½å¤„æ˜¯ æ¯ä¸ªè™šæ‹Ÿä¸»æœºé…ç½®ç‹¬ç«‹å¼€æ¥ å‡å°‘æ“ä½œçš„è¯¯å·®</p>
</blockquote>
<p>ç„¶åæˆ‘ä»¬åˆ°<code>/etc/httpd/</code>ç›®å½•ä¸‹åˆ›å»º<code>vhost.d</code>æ–‡ä»¶å¤¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir vhost.d</span><br><span class="line">$ <span class="built_in">cd</span> vhost.d</span><br><span class="line">$ <span class="built_in">pwd</span></span><br><span class="line">/etc/httpd/vhost.d</span><br><span class="line">$ vim www_sweetlover_cn_net.conf</span><br></pre></td></tr></table></figure>
<p><strong>æ·»åŠ ä»¥ä¸‹å†…å®¹</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerAdmin zjyzy@www.sweetlover.net.cn</span><br><span class="line">    DocumentRoot /var/www/html/sweetlover</span><br><span class="line">    ServerName www.sweetlover.net.cn</span><br><span class="line">    RewriteEngine On</span><br><span class="line">    Options All</span><br><span class="line">    &lt;Directory &quot;/var/www/html/sweetlover&quot;&gt;</span><br><span class="line">        # Options -Indexes FollowSymLinks </span><br><span class="line">        # ä¸ºäº†æœåŠ¡å™¨çš„å®‰å…¨ Indexeså‚æ•°ä¸€èˆ¬è¦å–æ¶ˆ</span><br><span class="line">        Options FollowSymLinks </span><br><span class="line">        AllowOverride All</span><br><span class="line">        Allow from all</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">    ErrorLog logs/www_sweetlover_net_cn-error_log</span><br><span class="line">    CustomLog logs/www_sweetlover_net_cn-access_log common</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p><strong>å†æ¬¡ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶<code>httpd.conf</code>,æ‰¾åˆ°<code>Listen 80</code>ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç </strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Listen 80</span><br><span class="line">NameVirtualHost *:80</span><br></pre></td></tr></table></figure>
<p><strong>æˆ‘ä»¬å†é…ç½®ä¸€ä¸ªåŒåŸŸåä¸‹ä¸åŒç«¯å£è™šæ‹Ÿä¸»æœºï¼Œé…ç½®<code>8080</code>ç«¯å£ä¸‹çš„</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /etc/httpd/vhost.d</span><br><span class="line">$ vim www_sweetlover_net_cn_8080.conf</span><br></pre></td></tr></table></figure>
<p>é’ˆå¯¹<code>www_sweetlover_cn_net.conf</code>æ”¹å˜ç›¸åº”çš„é…ç½®ï¼Œå³ä¿®æ”¹<code>ServerName</code>ä¸º<code>www.sweetlover.net.cn:8080</code>ï¼Œ<code>DocumentRoot</code>å’Œ<code>Directory</code>ä¿®æ”¹ä¸º<code>/var/www/html/sweetlover@8080</code>ã€‚</p>
<p><strong>ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ </strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Listen 8080</span><br><span class="line">NameVirtualHost *:8080</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç”±äºç¯å¢ƒä¸‹ä¸ºè™šæ‹Ÿæœºç¯å¢ƒï¼Œç›´æ¥è®¿é—®ipåŠ ç«¯å£å·å³å¯è®¿é—®åˆ°é…ç½®çš„ç½‘ç«™ã€‚åœ¨ä¸Šè¿°é…ç½®çš„DocumentRootä¸‹åˆ›å»ºindex.htmlæˆ–è€…index.phpå³å¯è®¿é—®ç½‘é¡µã€‚</p>
</blockquote>
<p><strong>å¦‚æœå‡ºç°è¯¥é”™è¯¯</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[warn] default VirtualHost overlap on port 80, the first has precedence</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ‰“å¼€apacheä¸»é…ç½®æ–‡ä»¶åœ¨ä»»æ„ä½ç½®æ·»åŠ ä¸€è¡Œ,åœ¨ 40è¡Œçš„Listion:80åæ·»åŠ ä¸€è¡Œå†…å®¹å¦‚ä¸‹:<code>NameVirtualHost *:80</code></p>
</blockquote>
<blockquote>
<p>å¦‚æœä½¿ç”¨æºç ç¼–è¯‘å®‰è£…çš„ï¼Œç›´æ¥å»æ‰æ³¨é‡Šå³å¯ï¼Œç„¶åå†ä¿®æ”¹é…ç½®æ–‡ä»¶</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#LoadModule vhost_alias_module libexec/apache2/mod_vhost_alias.so</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Virtual hosts</span><br><span class="line">#Include /private/etc/apache2/extra/httpd-vhosts.conf</span><br></pre></td></tr></table></figure>
<p>å»æ‰å‰é¢<code>#</code>æ³¨é‡Šå³å¯ã€‚å†ä¿®æ”¹<code>/private/etc/apache2/extra/httpd-vhosts.conf</code>é…ç½®å³å¯ã€‚</p>
<h1 id="Apacheå¸¸è§é”™è¯¯"><a href="#Apacheå¸¸è§é”™è¯¯" class="headerlink" title="Apacheå¸¸è§é”™è¯¯"></a>Apacheå¸¸è§é”™è¯¯</h1><h2 id="ServerNameé…ç½®æœªå¡«å†™æˆ–é”™è¯¯"><a href="#ServerNameé…ç½®æœªå¡«å†™æˆ–é”™è¯¯" class="headerlink" title="ServerNameé…ç½®æœªå¡«å†™æˆ–é”™è¯¯"></a>ServerNameé…ç½®æœªå¡«å†™æˆ–é”™è¯¯</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">httpd: Could not reliably determine the server<span class="string">'s fully qualified domain name, using luo.centos6.5 for ServerName</span></span><br></pre></td></tr></table></figure>
<p>åœ¨Apacheä¸»é…ç½®æ–‡ä»¶<code>httpd.conf</code>çš„98è¡Œå·¦å³<code>#ServerName www.example.com:80</code>å‰é¢çš„<code>#</code>å»æ‰ï¼Œæ¢æˆè‡ªå·±çš„åŸŸåæˆ–è€…ipåœ°å€ã€‚<br>ä¾‹å¦‚ï¼šä¿®æ”¹ä¸º<code>ServerName localhost:80</code>æˆ–è€…<code>ServerName 127.0.0.1:80</code></p>
<h2 id="403-Forbiddené”™è¯¯"><a href="#403-Forbiddené”™è¯¯" class="headerlink" title="403 Forbiddené”™è¯¯"></a>403 Forbiddené”™è¯¯</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">403 - Forbiddenï¼ˆç¦æ­¢è®¿é—®ï¼‰,æœåŠ¡å™¨æ‹’ç»è¯·æ±‚</span><br><span class="line">    - forbidden request (matches a deny filter) =&gt; HTTP 403</span><br><span class="line">    - The request was a legal request, but the server is refusing to respond to it.</span><br></pre></td></tr></table></figure>
<p><strong>åŸå› 1ï¼šapacheçš„é…ç½®æ–‡ä»¶æ²¡æœ‰å¯¹ç«™ç‚¹ç›®å½•è®¸å¯</strong></p>
<p>apacheé…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰å¯¹ç«™ç‚¹ç›®å½•çš„æƒé™è®¸å¯é…ç½®ï¼Œè¿™é€šå¸¸æ˜¯åœ¨åˆå§‹åŒ–å®‰è£…apahceåï¼Œæ›´æ”¹äº†é»˜è®¤çš„apacheç«™ç‚¹ç›®å½•å¯¼è‡´ã€‚</p>
<p>è§£å†³åŠæ³•å¯èƒ½æ˜¯ï¼šé€šè¿‡ç»™ä¸»é…ç½®æ–‡ä»¶å¢åŠ <code>&lt;Directory &quot;/var/www/html&quot;&gt;&lt;/Directory&gt;</code>æ ‡ç­¾å®ç°å¯¹æŒ‡å®šç›®å½•çš„æƒé™æ§åˆ¶<br>å…¸å‹å¦‚ä¸‹(å¯¹/var/wwwç›®å½•ä¸‹çš„æ–‡ä»¶å…è®¸è®¿é—®)ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;Directory &quot;/var/www&quot;&gt;</span><br><span class="line">    Options -Indexes FollowSymLinks # ä¸ºäº†æœåŠ¡å™¨çš„å®‰å…¨ Indexeså‚æ•°ä¸€èˆ¬è¦å–æ¶ˆ</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Order allow,deny # å…è®¸æœªè¢«æ˜ç¡®æ‹’ç»çš„</span><br><span class="line">    Allow from all</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<p><strong>åŸå› 2ï¼šç«™ç‚¹ç›®å½•ä¸‹æ²¡æœ‰é¦–é¡µæ–‡ä»¶ï¼Œè€Œapache çš„é…ç½®åˆç¦æ­¢äº†ç›®å½•çš„æµè§ˆ</strong></p>
<p>ç«™ç‚¹ç›®å½•ä¸‹æ²¡æœ‰é¦–é¡µæ–‡ä»¶(index.phpã€index.htmlç­‰é»˜è®¤æ–‡ä»¶)ï¼Œè€Œapacheçš„é…ç½®åˆç¦æ­¢äº†ç›®å½•æµè§ˆï¼ˆ#Indexeså‚æ•°:è®¿é—®ç›®å½•æ—¶,å¦‚æœä¸å­˜åœ¨é»˜è®¤é¦–é¡µåˆ™å±•ç¤ºç«™ç‚¹åˆ—è¡¨ï¼Œè¯¥è¡Œå»ºè®®æ”¹æˆ<code>Options None</code>ï¼Œä¹Ÿä¼šæç¤º403é”™è¯¯ã€‚<br>è§£å†³åŠæ³•ï¼šåœ¨ç«™ç‚¹ç›®å½•æ·»åŠ é»˜è®¤é¦–é¡µæ–‡ä»¶æˆ–è€…å°†é…ç½®æ–‡ä»¶ä¸­<code>Options Index</code>å¢åŠ ä¸Šã€‚</p>
<p><strong>åŸå› 3ï¼šdeny from all ç¦ç”¨äº†æ‰€æœ‰æ¥è®¿è€…è®¿é—®</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;Directory &quot;/var/www&quot;&gt;</span><br><span class="line">    Options -Indexes FollowSymLinks # ä¸ºäº†æœåŠ¡å™¨çš„å®‰å…¨ Indexeså‚æ•°ä¸€èˆ¬è¦å–æ¶ˆ</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Order allow,deny # å…è®¸æœªè¢«æ˜ç¡®æ‹’ç»çš„</span><br><span class="line">    Deny from all</span><br><span class="line">    # Deny from </span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<p><strong>è§£å†³åŠæ³•ï¼š</strong>å‚è€ƒåŸå› 2è§£å†³æ–¹æ³•é…ç½®<code>&lt;Directory &gt;&lt;/Directory&gt;</code>å‚æ•°ã€‚</p>
<p><strong>ç«™ç‚¹ç›®å½•æƒé™é—®é¢˜</strong></p>
<p>ç«™ç‚¹ç›®å½•éœ€è¦apacheçš„ç”¨æˆ·æœ‰è®¿é—®æƒé™ï¼Œå¦åˆ™å°±ä¼šæŠ¥403é”™è¯¯(ä¸€èˆ¬webç«™ç‚¹ç›®å½•æƒé™ç»™755ï¼Œç«™ç‚¹æ–‡ä»¶æƒé™ç»™644ï¼Œä¸Šä¼ ç¨‹åºé€šè¿‡å¦å¤–çš„ä¸Šä¼ æœåŠ¡å™¨æä¾›æ–‡ä»¶ä¸Šä¼ )ã€‚</p>
<h1 id="ApacheæœåŠ¡å™¨ä¼˜åŒ–"><a href="#ApacheæœåŠ¡å™¨ä¼˜åŒ–" class="headerlink" title="ApacheæœåŠ¡å™¨ä¼˜åŒ–"></a>ApacheæœåŠ¡å™¨ä¼˜åŒ–</h1><h2 id="é”™è¯¯é¡µé¢ä¼˜é›…æ˜¾ç¤º"><a href="#é”™è¯¯é¡µé¢ä¼˜é›…æ˜¾ç¤º" class="headerlink" title="é”™è¯¯é¡µé¢ä¼˜é›…æ˜¾ç¤º"></a>é”™è¯¯é¡µé¢ä¼˜é›…æ˜¾ç¤º</h2><p>å¯ä»¥å°†404 500ç­‰çš„é”™è¯¯ä¿¡æ¯é¡µé¢é‡å®šå‘åˆ°ç½‘ç«™é¦–é¡µæˆ–å…¶ä»–é¡µé¢ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<p>ç¼–è¾‘apacheä¸»é…ç½®æ–‡ä»¶<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim httpd.conf</span><br></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹å¦‚ä¸‹å†…å®¹<code>ErrorDocument 404 http://www.domain.com</code></p>
<h2 id="mod-defalteæ–‡ä»¶å‹ç¼©åŠŸèƒ½"><a href="#mod-defalteæ–‡ä»¶å‹ç¼©åŠŸèƒ½" class="headerlink" title="mod_defalteæ–‡ä»¶å‹ç¼©åŠŸèƒ½"></a><code>mod_defalte</code>æ–‡ä»¶å‹ç¼©åŠŸèƒ½</h2><p>gzipæ˜¯æŠŠæ–‡ä»¶å…ˆåœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œå‹ç¼©ç„¶åå†ä¼ è¾“ï¼Œä¼ è¾“å®Œæ¯•åæµè§ˆå™¨ä¼šé‡æ–°å¯¹å‹ç¼©è¿‡å¾—å†…å®¹è¿›è¡Œè§£å‹ç¼©ã€‚è¿™æ ·å¯ä»¥æ˜¾è‘—å‡å°‘æ–‡ä»¶ä¼ è¾“çš„å¤§å°ï¼Œæ²¡æœ‰ç‰¹æ®Šæƒ…å†µï¼Œæ‰€æœ‰çš„æ–‡æœ¬å†…å®¹éƒ½åº”è¯¥è¢«gzipå‹ç¼©ï¼ˆhtml,css,js,xml,txt..ï¼‰</p>
<p>æ·»åŠ å¦‚ä¸‹å†…å®¹åˆ°<code>httpd.conf</code>æˆ–è€…<code>vhost.conf</code>ä¸­</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;ifmodule mod_deflate.c&gt;</span><br><span class="line">    DeflateCompressionLevel 9</span><br><span class="line">    SetOutputFilter DEFLATE</span><br><span class="line">    AddOutputFilterByType DEFLATE text/html text/plain text/xml</span><br><span class="line">    AddOutputFilterByType DEFLATE application/javscript</span><br><span class="line">    AddOutputFilterByType DEFLATE text/css</span><br><span class="line">&lt;/ifmodule&gt;</span><br></pre></td></tr></table></figure>
<h2 id="æ›´æ”¹apacheçš„é»˜è®¤ç”¨æˆ·"><a href="#æ›´æ”¹apacheçš„é»˜è®¤ç”¨æˆ·" class="headerlink" title="æ›´æ”¹apacheçš„é»˜è®¤ç”¨æˆ·"></a>æ›´æ”¹apacheçš„é»˜è®¤ç”¨æˆ·</h2><p>åˆ›å»ºapacheç”¨æˆ·ï¼Œç”¨äºå­è¿›ç¨‹å’Œçº¿ç¨‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ useradd -M -s /sbin/nologin webadmin</span><br></pre></td></tr></table></figure>
<p>ç¼–è¾‘apacheçš„ä¸»é…ç½®æ–‡ä»¶,æ·»åŠ æˆ–è€…ä¿®æ”¹å¦‚ä¸‹å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">User webadmin</span><br><span class="line">Group webadmin</span><br></pre></td></tr></table></figure>
<h2 id="å¼€å¯apacheé˜²ç›—é“¾åŠŸèƒ½"><a href="#å¼€å¯apacheé˜²ç›—é“¾åŠŸèƒ½" class="headerlink" title="å¼€å¯apacheé˜²ç›—é“¾åŠŸèƒ½"></a>å¼€å¯apacheé˜²ç›—é“¾åŠŸèƒ½</h2><p>ä¸»é…ç½®æ–‡ä»¶ä¸­å¢åŠ å¦‚ä¸‹é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;IfModule rewrite_module&gt;</span><br><span class="line">RewriteEngine On</span><br><span class="line">RewriteCond %&#123;HTTP_REFERER&#125; !^http://domain.com/.*$ [NC]</span><br><span class="line">RewriteCond %&#123;HTTP_REFERER&#125; !^http://www.domain.com/.*$ [NC]</span><br><span class="line"></span><br><span class="line">RewriteRule .*\.(gif|jpg|swf)$ http://www.domain.com [R,NC]</span><br><span class="line"># RewriteRule .*\.(gif|jpg|swf)$ http://www.domain.com/about/no.png [R,NC]</span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>
<h2 id="ç¦æ­¢ç›®å½•Index"><a href="#ç¦æ­¢ç›®å½•Index" class="headerlink" title="ç¦æ­¢ç›®å½•Index"></a>ç¦æ­¢ç›®å½•Index</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;Directory &quot;/var/www/html&quot;&gt;</span><br><span class="line">    Options -Indexes FollowSymLinks</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Allow from all</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;Directory &quot;/var/www/html&quot;&gt;</span><br><span class="line">    Options FollowSymLinks</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Allow from all</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<h2 id="ç¦æ­¢ç”¨æˆ·è¦†ç›–-é‡è½½-é…ç½®æ–‡ä»¶"><a href="#ç¦æ­¢ç”¨æˆ·è¦†ç›–-é‡è½½-é…ç½®æ–‡ä»¶" class="headerlink" title="ç¦æ­¢ç”¨æˆ·è¦†ç›–(é‡è½½)é…ç½®æ–‡ä»¶"></a>ç¦æ­¢ç”¨æˆ·è¦†ç›–(é‡è½½)é…ç½®æ–‡ä»¶</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;Directory &quot;/var/www/html&quot;&gt;</span><br><span class="line">    Options FollowSymLinks</span><br><span class="line">    AllowOverride None  # ç¦æ­¢ç”¨æˆ·è¦†ç›–(é‡è½½)é…ç½®æ–‡ä»¶, Allå³ä¸ºå¼€å¯</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Allow from all</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<h2 id="å…³é—­CGI-Common-Gateway-Interface-é€šç”¨ç½‘å…³æ¥å£"><a href="#å…³é—­CGI-Common-Gateway-Interface-é€šç”¨ç½‘å…³æ¥å£" class="headerlink" title="å…³é—­CGI(Common Gateway Interface é€šç”¨ç½‘å…³æ¥å£)"></a>å…³é—­CGI(Common Gateway Interface é€šç”¨ç½‘å…³æ¥å£)</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;IfModule alias_module&gt;</span><br><span class="line">ScriptAlias /cgi-bin/ &quot;/var/www/cgi-bin/&quot;</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line">&lt;Directory &quot;/var/www/cgi-bin&quot;&gt;</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Options None</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Allow from all</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<h2 id="é¿å…ä½¿ç”¨-htaccessæ–‡ä»¶-åˆ†å¸ƒå¼é…ç½®æ–‡ä»¶"><a href="#é¿å…ä½¿ç”¨-htaccessæ–‡ä»¶-åˆ†å¸ƒå¼é…ç½®æ–‡ä»¶" class="headerlink" title="é¿å…ä½¿ç”¨.htaccessæ–‡ä»¶(åˆ†å¸ƒå¼é…ç½®æ–‡ä»¶)"></a>é¿å…ä½¿ç”¨.htaccessæ–‡ä»¶(åˆ†å¸ƒå¼é…ç½®æ–‡ä»¶)</h2><p><strong>é»˜è®¤é€‰é¡¹ï¼š</strong><code>AccessFileName .htaccess</code> æ”¹ä¸º <code># AccessFileName .htaccess</code></p>
<p>å…ˆè€ƒè™‘æ€§èƒ½ï¼Œå¦‚æœAllowOverrideå¯ç”¨äº†.haccessæ–‡ä»¶ï¼Œåˆ™apacheéœ€è¦åœ¨æ¯ä¸ªç›®å½•ä¸­æŸ¥æ‰¾.htaccessæ–‡ä»¶ï¼Œå› æ­¤æ— è®ºæ˜¯å¦çœŸæ­£ç”¨åˆ°å¯ç”¨.htaccessæ–‡ä»¶éƒ½ä¼šå¯¼è‡´æœåŠ¡å™¨æ€§èƒ½çš„ä¸‹é™ã€‚<br>ã€€ã€€å¦å¤–å¯¹äºæ¯ä¸€ä¸ªè¯·æ±‚ï¼Œéƒ½éœ€è¦è¯»å–ä¸€æ¬¡.htaccessæ–‡ä»¶ã€‚<br>ã€€ã€€å…¶æ¬¡æ˜¯å®‰å…¨è€ƒè™‘ï¼Œè¿™æ ·ä¼šå…è®¸ç”¨æˆ·è‡ªå·±ä¿®æ”¹æœåŠ¡å™¨çš„é…ç½®ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æŸäº›æ„æƒ³ä¸åˆ°çš„ä¿®æ”¹ï¼Œæ‰€ä»¥è¯·è®¤çœŸè€ƒè™‘æ˜¯å¦åº”é“ç»™äºˆç”¨æˆ·è¿™æ ·çš„ç‰¹æƒã€‚</p>
<blockquote>
<p>PHPå¼€å¯è·¯ç”±é‡å†™ä¸‹éœ€è¦ä½¿ç”¨</p>
</blockquote>
<h2 id="apache-çš„å®‰å…¨æ¨¡å—"><a href="#apache-çš„å®‰å…¨æ¨¡å—" class="headerlink" title="apache çš„å®‰å…¨æ¨¡å—"></a>apache çš„å®‰å…¨æ¨¡å—</h2><p><code>mod_evasive20</code>( é˜²DDOSæ”»å‡»)<br><code>mod_limittipconn</code>(é’ˆå¯¹å•ç«™ç‚¹)é…ç½®<br><code>mod_security</code>(é˜²æ­¢SQLæ³¨å…¥)</p>
<h2 id="apacheæ—¥å¿—æˆäºˆroot-700æƒé™"><a href="#apacheæ—¥å¿—æˆäºˆroot-700æƒé™" class="headerlink" title="apacheæ—¥å¿—æˆäºˆroot 700æƒé™"></a>apacheæ—¥å¿—æˆäºˆroot 700æƒé™</h2><p><strong>ä¸éœ€è¦åœ¨æ—¥å¿—ç›®å½•ç»™apacheç”¨æˆ·è¯»æˆ–è€…å†™æƒé™è®¸å¯ï¼Œå› ä¸ºapacheçš„åˆå§‹è¿›ç¨‹ç”¨æˆ·ä¸ºroot</strong></p>
<h2 id="ç¦æ­¢PHPè§£ææŒ‡ç‚¹ç«™ç‚¹ç›®å½•"><a href="#ç¦æ­¢PHPè§£ææŒ‡ç‚¹ç«™ç‚¹ç›®å½•" class="headerlink" title="ç¦æ­¢PHPè§£ææŒ‡ç‚¹ç«™ç‚¹ç›®å½•"></a>ç¦æ­¢PHPè§£ææŒ‡ç‚¹ç«™ç‚¹ç›®å½•</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Directory &quot;/var/www/html/bbs/Uploads&quot;&gt;</span><br><span class="line">    Options FollowSymLinks</span><br><span class="line">    AllowOverride None</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Allow from all</span><br><span class="line">    php_flag engine off # æ³¨æ„è¿™è¡Œ</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://www.kancloud.cn/curder/apache/91272" target="_blank" rel="noopener">https://www.kancloud.cn/curder/apache/91272</a></p>
<p><a href="https://www.linuxidc.com/Linux/2017-05/143590.htm" target="_blank" rel="noopener">https://www.linuxidc.com/Linux/2017-05/143590.htm</a></p>
]]></content>
      <categories>
        <category>Apache</category>
      </categories>
      <tags>
        <tag>æœåŠ¡å™¨è¿ç»´</tag>
        <tag>Apache</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript-æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€</title>
    <url>/2019/04/28/JavaScript-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€"><a href="#æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€"></a>æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€</h1><a id="more"></a>
<h2 id="å­¦ä¹ ç½‘ç«™"><a href="#å­¦ä¹ ç½‘ç«™" class="headerlink" title="å­¦ä¹ ç½‘ç«™"></a>å­¦ä¹ ç½‘ç«™</h2><p><code>https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp</code></p>
<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><ul>
<li>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸ºäº†è§£å†³å­—ç¬¦ä¸²æ“ä½œä¸­ä¸€äº›æ¯”è¾ƒéº»çƒ¦çš„åœºæ™¯ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²æå–ã€å­—ç¬¦ä¸²æ›¿æ¢ã€å­—ç¬¦ä¸²éªŒè¯ç­‰<ul>
<li>å¸¸ç”¨äºï¼šè¡¨å•éªŒè¯ï¼šæ˜¯å¦æ˜¯ä¸€ä¸ªæ•°å­—ã€æ˜¯ä¸€ä¸ªç”µè¯å·ç ã€æ˜¯ä¸€ä¸ªé‚®ç®±ã€‚ã€‚ã€‚</li>
<li>å­—ç¬¦ä¸²æ›¿æ¢ï¼š</li>
<li>å­—ç¬¦ä¸²æŸ¥æ‰¾</li>
</ul>
</li>
</ul>
<h2 id="æ­£åˆ™è¡¨è¾¾å¼å…¶å®ä¹Ÿæ˜¯jsé‡Œé¢çš„ä¸€ä¸ªå¯¹è±¡"><a href="#æ­£åˆ™è¡¨è¾¾å¼å…¶å®ä¹Ÿæ˜¯jsé‡Œé¢çš„ä¸€ä¸ªå¯¹è±¡" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼å…¶å®ä¹Ÿæ˜¯jsé‡Œé¢çš„ä¸€ä¸ªå¯¹è±¡"></a>æ­£åˆ™è¡¨è¾¾å¼å…¶å®ä¹Ÿæ˜¯jsé‡Œé¢çš„ä¸€ä¸ªå¯¹è±¡</h2><h2 id="åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼"><a href="#åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼"></a>åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼</h2><ul>
<li><code>var reg2=new RegExp(&quot;a&quot;);</code></li>
<li><code>var reg1=/a/;</code>   <ul>
<li>å…¶ä¸­//æ˜¯æ ‡è®°ï¼Œaè¡¨ç¤ºè¦åŒ¹é…çš„å­—ç¬¦</li>
</ul>
</li>
</ul>
<h2 id="æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…"><a href="#æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…"></a>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/a/</span>;        <span class="comment">//åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„aå­—ç¬¦</span></span><br><span class="line">reg.test(<span class="string">"abc"</span>);        </span><br><span class="line"><span class="comment">//æ­£åˆ™è¡¨è¾¾å¼çš„testç”¨æ¥æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼çš„è¦æ±‚ï¼›</span></span><br><span class="line"><span class="comment">//ç”±äº"abc"ä¸­å­˜åœ¨aï¼Œæ‰€ä»¥æ˜¯ç¬¦åˆè¦æ±‚çš„ï¼Œæ‰€ä»¥è¿™æ®µä»£ç çš„è¿”å›å€¼ä¸ºï¼štrue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isTrue = reg.test(<span class="string">"coke"</span>);   <span class="comment">//ç”±äº"coke"ä¸­ä¸å­˜åœ¨aå­—ç¬¦ï¼Œæ‰€ä»¥ä¸ç¬¦åˆæ¡ä»¶   --&gt;isTrue:false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg2=<span class="regexp">/abc/</span>;     </span><br><span class="line">reg2.test(<span class="string">"adbcd"</span>); <span class="comment">//å­—ç¬¦ä¸²ä¸­å¿…ç„¶å­˜åœ¨"abc"æ‰ç¬¦åˆè¦æ±‚ï¼Œæ‰€ä»¥è¿™æ®µä»£ç çš„è¿”å›å€¼ä¸ºfalse</span></span><br><span class="line"></span><br><span class="line">reg2.test(<span class="string">"1abc"</span>);  <span class="comment">//true</span></span><br><span class="line">reg2.test(<span class="string">"abc123"</span>);    <span class="comment">//true</span></span><br><span class="line">reg2.test(<span class="string">"abcabc"</span>);    <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h2 id="æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦"><a href="#æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦"></a>æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦</h2><h3 id="å­—ç¬¦ç±»åˆ«"><a href="#å­—ç¬¦ç±»åˆ«" class="headerlink" title="å­—ç¬¦ç±»åˆ«"></a>å­—ç¬¦ç±»åˆ«</h3><ul>
<li><p>. è¡¨ç¤ºé™¤äº†æ¢è¡Œç¬¦(\r \n)ä»¥å¤–çš„ä»»æ„å­—ç¬¦</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/./</span>;</span><br><span class="line">reg.test(<span class="string">"a"</span>);  <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"."</span>);  <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"\r"</span>); <span class="comment">//false</span></span><br><span class="line">reg.test(<span class="string">"1\r"</span>);    <span class="comment">//å­˜åœ¨ä¸€ä¸ª1ï¼Œä¸æ˜¯æ¢è¡Œç¬¦ï¼Œæ‰€ä»¥ç»“æœä¸ºï¼štrue</span></span><br><span class="line">reg.test(<span class="string">"\r\n"</span>);   <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨æ„ç‚¹ï¼šå¦‚æœä»¥åè¦åŒ¹é….å­—ç¬¦ï¼Œä¸è¦ç›´æ¥å†™.</span></span><br><span class="line"><span class="comment">//ä¸ºäº†åŒ¹é…qqé‚®ç®±ï¼Œå†™äº† /qq.com/ è¿™æ˜¯ä¸€ä¸ªé”™è¯¯çš„å†™æ³•ï¼š</span></span><br><span class="line"><span class="comment">//=&gt;/qq.com/ä¸ä»…åŒ¹é…ï¼š"qq.com"ä¹ŸåŒ¹é…"qq3com" "qq@com"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è§£å†³æ–¹æ¡ˆï¼š/qq\.com/  æˆ–è€… /qq[.]com/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>\d è¡¨ç¤ºæ•°å­—</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/\d/</span>;</span><br><span class="line">reg.test(<span class="string">"123abc"</span>); <span class="comment">//ç”±äºå­˜åœ¨ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥ç»“æœä¸ºtrue</span></span><br><span class="line">reg.test(<span class="string">"abcde"</span>);  <span class="comment">//ç”±äºä¸å­˜åœ¨ä»»ä½•æ•°å­—ï¼Œæ‰€ä»¥ç»“æœä¸ºfalse</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰©å±•ï¼š</span></span><br><span class="line"><span class="keyword">var</span> _reg=<span class="regexp">/\d\d/</span>;</span><br><span class="line">_reg.test(<span class="string">"1b"</span>);    <span class="comment">//ä¸å­˜åœ¨2ä¸ªè¿ç»­æ•°å­—ï¼Œæ‰€ä»¥ç»“æœä¸ºï¼šfalse</span></span><br><span class="line">_reg.test(<span class="string">"a12c"</span>);  <span class="comment">//å­˜åœ¨2ä¸ªè¿ç»­æ•°å­—ï¼Œç»“æœä¸ºï¼štrue</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒ¹é…æ‰‹æœºå·ç ï¼šå‡ºç°äº†è¿ç»­11ä¸ªæ•°å­—</span></span><br><span class="line"><span class="keyword">var</span> isCellphoneNumber=<span class="regexp">/\d\d\d\d\d\d\d\d\d\d\d/</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¡ˆä¾‹ï¼šåŒ¹é…æ‰‹æœºå·ç </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d\d\d\d\d\d\d\d\d\d\d/</span>;</span><br><span class="line">reg.test(<span class="string">"13532159091"</span>);    <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"17380889395"</span>);    <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"a7380889395"</span>);        <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>\D æ˜¯\dçš„å–åç»“æœï¼Œè¡¨ç¤ºä¸æ˜¯æ•°å­—</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/\D/</span>;</span><br><span class="line">_reg.test(<span class="string">"123"</span>);   <span class="comment">//ç”±äºå…¨æ˜¯æ•°å­—ï¼Œæ‰€ä»¥ç»“æœä¸ºï¼šfalse</span></span><br><span class="line">_reg.test(<span class="string">"123a"</span>);  <span class="comment">//å­˜åœ¨ä¸€ä¸ªå­—æ¯ï¼Œæ‰€ä»¥ç»“æœä¸ºï¼štrue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg2=<span class="regexp">/123\D5/</span>;</span><br><span class="line">_reg.test(<span class="string">"12345"</span>); <span class="comment">//false</span></span><br><span class="line">_reg.test(<span class="string">"123b5"</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>\w åŒ¹é…å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ ï¼Œä¸‰è€…æ»¡è¶³å…¶ä¸€å³å¯</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/\w/</span>;   </span><br><span class="line">reg.test(<span class="string">"123"</span>);    <span class="comment">//å­˜åœ¨æ•°å­—ï¼Œç»“æœä¸ºï¼štrue</span></span><br><span class="line">reg.test(<span class="string">"a"</span>);  <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"1"</span>);  <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"_"</span>);  <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"-"</span>);  <span class="comment">//false</span></span><br><span class="line">reg.test(<span class="string">"."</span>);  <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">reg.test(<span class="string">"1."</span>);   <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"_\r\n"</span>);  <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"\r\n"</span>);   <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>\W æ˜¯\wçš„å–å</p>
</li>
<li><p>\s è¡¨ç¤ºä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼ˆä¾‹å¦‚ï¼š\r \n \t ç©ºæ ¼ ã€‚ã€‚ã€‚ï¼‰</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/\s/</span>;</span><br><span class="line">reg.test(<span class="string">"abc def"</span>);   <span class="comment">//å­˜åœ¨ä¸€ä¸ªç©ºç™½ï¼Œç»“æœä¸ºï¼štrue</span></span><br><span class="line">reg.test(<span class="string">"abc\r123"</span>);   <span class="comment">//å­˜åœ¨ä¸€ä¸ª\rï¼Œç»“æœä¸ºï¼štrue</span></span><br><span class="line">reg.test(<span class="string">"abc"</span>);    <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>\S æ˜¯\sçš„å–å</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/\S/</span>;</span><br><span class="line">reg.test(<span class="string">" \r \n "</span>);   <span class="comment">//å…¨æ˜¯ç©ºç™½å­—ç¬¦ï¼Œç»“æœä¸ºfalse</span></span><br><span class="line">reg.test(<span class="string">"123 abc"</span>);    <span class="comment">//å­˜åœ¨ä¸€ä¸ªç©ºç™½ï¼Œç»“æœä¸ºtrue</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg3=<span class="regexp">/\s\S/</span>;</span><br><span class="line">reg3.test(<span class="string">" a"</span>);    <span class="comment">//true</span></span><br><span class="line">reg3.test(<span class="string">"a "</span>);    <span class="comment">//false</span></span><br><span class="line">reg3.test(<span class="string">"a b"</span>);   <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>\ è½¬ä¹‰å­—ç¬¦</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/./</span>;    <span class="comment">//åŒ¹é…é™¤äº†æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦</span></span><br><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/\./</span>;   <span class="comment">//åŒ¹é….å­—ç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/\//</span>;   <span class="comment">//åŒ¹é…ä¸€ä¸ªæ­£æ–œæ ï¼š/</span></span><br><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/[/]/</span>;  <span class="comment">//ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¡ˆä¾‹ï¼šåŒ¹é…é‚®ç®±</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//asfas.com</span></span><br><span class="line"><span class="comment">//123ad.com</span></span><br><span class="line"><span class="comment">//ABC12.com</span></span><br><span class="line"><span class="comment">//abc_1.com</span></span><br><span class="line"><span class="keyword">var</span> reg =<span class="regexp">/\w\w\w\w\w\.com/</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="å­—ç¬¦é›†åˆ"><a href="#å­—ç¬¦é›†åˆ" class="headerlink" title="å­—ç¬¦é›†åˆ"></a>å­—ç¬¦é›†åˆ</h3><ul>
<li><p>[]</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/[1a2b3]/</span>; <span class="comment">//åŒ¹é…ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™ä¸ªå­—ç¬¦å¿…é¡»æ˜¯ï¼š1/a/2/b/3å…¶ä¸­ä¸€ç§ï¼Œå¦‚æœæ˜¯å°±è¡¨ç¤ºæ»¡è¶³ï¼Œå¦‚æœä¸æ˜¯å°±ä¸æ»¡è¶³</span></span><br><span class="line">reg.test(<span class="string">"a"</span>);      <span class="comment">//ç»“æœä¸ºï¼štrue</span></span><br><span class="line">reg.test(<span class="string">"3"</span>);      <span class="comment">//ç»“æœä¸ºï¼štrue</span></span><br><span class="line">reg.test(<span class="string">"fg5678"</span>); <span class="comment">//ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„å­—ç¬¦éƒ½ä¸å­˜åœ¨ï¼Œç»“æœä¸ºï¼šfalse</span></span><br><span class="line">reg.test(<span class="string">"a999999"</span>);    <span class="comment">//ç»“æœä¸ºï¼štrue</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡çº§ç‰ˆ</span></span><br><span class="line"><span class="keyword">var</span> reg2=<span class="regexp">/[123][abc]/</span>;  <span class="comment">//ä¸ºäº†åŒ¹é…è¿ç»­2ä¸ªå­—ç¬¦ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»åœ¨1/2/3ä¹‹å†…ï¼Œç¬¬äºŒä¸ªå­—ç¬¦å¿…é¡»åœ¨a/b/cä¹‹å†…</span></span><br><span class="line">reg2.test(<span class="string">"2a"</span>);    <span class="comment">//true</span></span><br><span class="line">reg2.test(<span class="string">"3c"</span>);    <span class="comment">//true</span></span><br><span class="line">reg2.test(<span class="string">"1basdfasf"</span>); <span class="comment">//true</span></span><br><span class="line">reg2.test(<span class="string">"asdfasdf1c"</span>);    <span class="comment">//å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„1cï¼Œç»“æœä¸ºï¼štrue</span></span><br><span class="line">reg2.test(<span class="string">"39"</span>);    <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg2=<span class="regexp">/[0-9]/</span>;   <span class="comment">//åŒ¹é…æ•°å­—0-9ä¹‹é—´ï¼Œä»»ä½•ä¸€ä¸ªæ•°å­— ç­‰ä»·äºï¼š/\d/</span></span><br><span class="line"><span class="keyword">var</span> reg3=<span class="regexp">/[a-z]/</span>;   <span class="comment">//åŒ¹é…å°å†™å­—æ¯</span></span><br><span class="line"><span class="keyword">var</span> reg4=<span class="regexp">/[A-Z]/</span>;   <span class="comment">//åŒ¹é…å¤§å†™å­—æ¯</span></span><br><span class="line"><span class="keyword">var</span> reg5=<span class="regexp">/[a-zA-Z]/</span>;<span class="comment">//åŒ¹é…æ‰€æœ‰å­—æ¯</span></span><br><span class="line"><span class="keyword">var</span> reg6=<span class="regexp">/[A-Za-z]/</span>;<span class="comment">//..........</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg10=<span class="regexp">/[0-9abc]/</span>;</span><br><span class="line">reg10.test(<span class="string">"3"</span>);<span class="comment">//true</span></span><br><span class="line">reg10.test(<span class="string">"five"</span>);<span class="comment">//false</span></span><br><span class="line">reg10.test(<span class="string">"banana"</span>);<span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>[^]</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/[^123]/</span>;   <span class="comment">//åŒ¹é…ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯è¿™ä¸ªå­—ç¬¦æ—¢ä¸æ˜¯1 å¹¶ä¸” ä¸æ˜¯2 å¹¶ä¸” ä¸æ˜¯3 </span></span><br><span class="line">reg.test(<span class="string">"a"</span>);      <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"3"</span>);      <span class="comment">//false</span></span><br><span class="line">reg.test(<span class="string">"123"</span>);    <span class="comment">//æ²¡æœ‰1ï¼Œ2ï¼Œ3ä»¥å¤–çš„å­—ç¬¦ï¼Œç»“æœä¸ºï¼šfalse</span></span><br><span class="line">reg.test(<span class="string">"a123"</span>);   <span class="comment">//å­˜åœ¨ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„aï¼Œæ‰€ä»¥ç»“æœä¸ºï¼štrue</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="è¾¹ç•Œ"><a href="#è¾¹ç•Œ" class="headerlink" title="è¾¹ç•Œ"></a>è¾¹ç•Œ</h3><ul>
<li>^ è¡¨ç¤ºå­—ç¬¦ä¸²æœ€å·¦è¾¹</li>
<li>$ è¡¨ç¤ºå­—ç¬¦ä¸²æœ€å³è¾¹<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/^abc/</span>;     <span class="comment">//è¡¨ç¤ºä»¥abcå¼€å¤´</span></span><br><span class="line">reg.test(<span class="string">"123abc123"</span>);  <span class="comment">//å¹¶ä¸æ˜¯ä»¥abcå¼€å¤´ï¼Œç»“æœä¸ºï¼šfalse</span></span><br><span class="line">reg.test(<span class="string">"abc123"</span>);     <span class="comment">//ä»¥abcå¼€å¤´ï¼Œç»“æœä¸ºï¼štrue</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/abc$/</span>;     <span class="comment">//è¡¨ç¤ºä»¥abcç»“å°¾</span></span><br><span class="line">reg.test(<span class="string">"123abc"</span>); <span class="comment">//ç»“æœä¸ºï¼štrue</span></span><br><span class="line">reg.test(<span class="string">"abc123"</span>); <span class="comment">//ç»“æœä¸ºï¼šfalse</span></span><br><span class="line">reg.test(<span class="string">"123bc"</span>);  <span class="comment">//ç»“æœä¸ºï¼šfalse</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŒ¹é…ä¸€ä¸ªæ‰‹æœºå·ç  (11ä½)--&gt;(1)+(10ä½æ•°å­—)</span></span><br><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/1\d\d\d\d\d\d\d\d\d\d/</span>;</span><br><span class="line">reg.test(<span class="string">"13166668888a"</span>);   <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg2=<span class="regexp">/^1\d\d\d\d\d\d\d\d\d\d$/</span>;</span><br><span class="line">reg2.test(<span class="string">"13166668888a"</span>);   <span class="comment">//false</span></span><br><span class="line">reg2.test(<span class="string">"13166668888"</span>);    <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg3=<span class="regexp">/^1[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$/</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/^abc$/</span>;    <span class="comment">//è¡¨ç¤ºå­—ç¬¦ä¸²abc</span></span><br><span class="line">reg.test(<span class="string">"abc"</span>);    <span class="comment">//ç»“æœä¸ºï¼štrue</span></span><br><span class="line">reg.test(<span class="string">"123abc"</span>); <span class="comment">//ç»“æœä¸ºï¼šfalse</span></span><br></pre></td></tr></table></figure>
<h3 id="é‡è¯"><a href="#é‡è¯" class="headerlink" title="é‡è¯"></a>é‡è¯</h3><ul>
<li><p><code>*</code> å‡ºç°0æ¬¡æˆ–å¤šæ¬¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/\d*/</span>;</span><br><span class="line">reg.test(<span class="string">"123"</span>);    <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"234"</span>);    <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg3=<span class="regexp">/1\d*/</span>;</span><br><span class="line">reg3.test(<span class="string">"1"</span>); <span class="comment">//true</span></span><br><span class="line">reg3.test(<span class="string">"123"</span>);   <span class="comment">//true</span></span><br><span class="line">reg3.test(<span class="string">"a123"</span>)   <span class="comment">//true</span></span><br><span class="line">reg3.test(<span class="string">"a123456b"</span>);   <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>+</code> å‡ºç°1æ¬¡æˆ–å¤šæ¬¡(è‡³å°‘ä¸€æ¬¡)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/1\d+/</span>;</span><br><span class="line">reg.test(<span class="string">"1"</span>);      <span class="comment">//false</span></span><br><span class="line">reg.test(<span class="string">"123"</span>);    <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>?</code> å‡ºç°0æ¬¡æˆ–ä¸€æ¬¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/1\d?/</span>; </span><br><span class="line">reg.test(<span class="string">"12"</span>);     <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"1"</span>);      <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>{3}</code> å‡ºç°3æ¬¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/1\w&#123;5&#125;/</span>;</span><br><span class="line">reg.test(<span class="string">"1abc"</span>);   <span class="comment">//false</span></span><br><span class="line">reg.test(<span class="string">"112345"</span>); <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"1abc12"</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>{3,}</code> è‡³å°‘å‡ºç°3æ¬¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/\d&#123;2,&#125;/</span>;</span><br><span class="line">reg.test(<span class="string">"12"</span>); <span class="comment">//true</span></span><br><span class="line">reg.test(<span class="string">"5"</span>);  <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>{3,5}</code> å‡ºç°3-5æ¬¡</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/abc&#123;3&#125;/</span>;           <span class="comment">//è¡¨ç¤ºåŒ¹é…abccc</span></span><br><span class="line">reg.test(<span class="string">"123abccc123"</span>);    <span class="comment">//ç»“æœä¸ºï¼štrue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg3=<span class="regexp">/(abc)&#123;2&#125;/</span>;    <span class="comment">//åŒ¹é…abcabc</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>|</code> æˆ–è€…</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/abc|123/</span>;  <span class="comment">//è¡¨ç¤ºåŒ¹é…abcæˆ–è€…123</span></span><br><span class="line"></span><br><span class="line">reg.test(<span class="string">"abc456"</span>); <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg5=<span class="regexp">/^abc|123$/</span>;  <span class="comment">//åŒ¹é…ä»¥abcå¼€å¤´ï¼Œæˆ–è€…ä»¥123ç»“å°¾</span></span><br><span class="line">reg5.test(<span class="string">"abcafsadfasd"</span>);<span class="comment">//true</span></span><br><span class="line">reg5.test(<span class="string">"afsdfasdf123"</span>);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> reg6=<span class="regexp">/^(abc|123)$/</span>;        <span class="comment">//åŒ¹é…abc/123</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>()</code> åˆ†ç»„</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//010-88889999</span></span><br><span class="line"><span class="comment">//0576-12312312</span></span><br><span class="line"><span class="comment">//0895-1234567</span></span><br><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/(\d&#123;3,4&#125;)-(\d&#123;7,8&#125;)/</span>;  <span class="comment">//åŒ¹é…ç”µè¯å·ç </span></span><br><span class="line"><span class="keyword">var</span> arr=<span class="string">"021-33335555"</span>.match(<span class="regexp">/(\d&#123;3,4&#125;)-(\d&#123;7,8&#125;)/</span>)</span><br><span class="line">arr[<span class="number">0</span>]  <span class="comment">//å…¨éƒ¨</span></span><br><span class="line">arr[<span class="number">1</span>]  <span class="comment">//ç¬¬ä¸€ç»„ï¼šåŒºå·ï¼š021</span></span><br><span class="line">arr[<span class="number">2</span>]  <span class="comment">//ç¬¬äºŒç»„ï¼šå·ç ï¼š333355555</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> reg=<span class="regexp">/(\d&#123;3,4&#125;)-(\d&#123;7,8&#125;)/</span>;</span><br><span class="line"><span class="string">"021-33335555"</span>.replace(<span class="regexp">/(\d&#123;3,4&#125;)-(\d&#123;7,8&#125;)/</span>,<span class="string">'åŒºå·æ˜¯ï¼š$1'</span>)</span><br><span class="line"><span class="comment">//åŒºå·æ˜¯ï¼š021</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">"[object Array]"</span>;</span><br><span class="line"><span class="keyword">var</span> str2=<span class="string">"[object Object]"</span>;</span><br><span class="line"><span class="keyword">var</span> str3=<span class="string">'[object Function]'</span>;</span><br><span class="line"><span class="keyword">var</span> str4=<span class="string">'[object Date]'</span>;</span><br><span class="line"></span><br><span class="line">str.replace(<span class="string">"[object "</span>,<span class="string">""</span>).replace(<span class="string">"]"</span>,<span class="string">""</span>).toLowerCase();</span><br><span class="line"></span><br><span class="line">str.replace(<span class="regexp">/\[object /</span>,<span class="string">""</span>).replace(<span class="regexp">/\]/</span>,<span class="string">""</span>).toLowerCase();</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™æ ·çš„è¯æ­£åˆ™è¡¨è¾¾å¼åªåŒ¹é…ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´åé¢çš„]æ¢ä¸æ‰</span></span><br><span class="line">str.replace(<span class="regexp">/\[object |\]/</span>,<span class="string">""</span>).toLowerCase();</span><br><span class="line"><span class="comment">//å¦‚ä½•è§£å†³ï¼Ÿè¿›è¡Œå…¨å±€åŒ¹é…</span></span><br><span class="line">str.replace(<span class="regexp">/\[object |\]/g</span>,<span class="string">""</span>).toLowerCase();</span><br><span class="line"></span><br><span class="line">str.replace(<span class="regexp">/[^\s]+\s/</span>,<span class="string">""</span>).replace(<span class="regexp">/\]/</span>,<span class="string">""</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€æ¬¡ä»¿å†™jQueryåº“çš„ç®€å•ä»£ç </title>
    <url>/2019/04/25/%E4%B8%80%E6%AC%A1%E4%BB%BF%E5%86%99jQuery%E5%BA%93%E7%9A%84%E7%AE%80%E5%8D%95%E4%BB%A3%E7%A0%81/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>åŠŸèƒ½çš„å®ç°éƒ½å¾ˆç®€å•ï¼Œä½†æ˜¯æ˜¯éœ€è¦å­¦ç€åˆ«äººçš„æ€æƒ³</strong></p>
<a id="more"></a>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//æ¨¡å—åŒ–ï¼šå†…éƒ¨çš„ä¸œè¥¿å¯¹å¤–æ˜¯å°é—­çš„ï¼Œåªæš´éœ²å‡º$,jQueryæ“ä½œã€‚</span></span></span><br><span class="line"><span class="javascript">        (<span class="function"><span class="keyword">function</span> (<span class="params">global</span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span> <span class="title">jQuery</span>(<span class="params">selector</span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="comment">// //è·å–é¡µé¢ä¸­æ‰€æœ‰æŒ‡å®šçš„å…ƒç´ </span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// const elements = document.querySelectorAll(selector);</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// console.log(elements);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="comment">// //ä½†æ˜¯éšç€$()æ“ä½œçš„å¢åŠ ï¼Œå°†ä¼šäº§ç”Ÿæ— æ•°ä¸ªcssæ–¹æ³•ï¼Œæµªè´¹äº†å¾ˆå¤šçš„å†…å­˜</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// elements.css = function()&#123;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     console.log('query css');</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// return elements;</span></span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> _init = jQuery.prototype.init;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="comment">// console.log(jQuery.prototype);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> <span class="keyword">new</span> jQuery.prototype.init(selector);</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// ä¸ºäº†æ–¹ä¾¿å°‘å†™prototypeå•è¯ï¼Œç®€åŒ–</span></span></span><br><span class="line">            jQuery.fn = jQuery.prototype = &#123;</span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="keyword">constructor</span>: jQuery,</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                init: <span class="function"><span class="keyword">function</span> (<span class="params">selector</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// // æŠŠæŸ¥æ‰¾åˆ°çš„DOå—å…ƒç´ æ”¾åœ¨å˜é‡ä¸­</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">// const elements = document.querySelectorAll(selector);</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">// // this.elements = elements;</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">// // ä½†æ˜¯jQueryä¸ºäº†æ“ä½œæ–¹ä¾¿ï¼Œæ‰€ä»¥å°†DOMå…ƒç´ æ”¾åœ¨äº†è‡ªå·±èº«ä¸Šï¼Œä¹Ÿå°±æ˜¯ä¼ªå¯¹è±¡æ•°ç»„</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">// for (let i = 0; i &lt; elements.length; i++) &#123;</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">//     this[i] = elements[i];</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">// this.length = elements.length;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                    <span class="comment">//åˆ¤æ–­å¦‚æœæ˜¯ä¸€ä¸ªstringï¼Œåˆ™æŸ¥æ‰¾</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span> (jQuery.type(selector) === <span class="string">'string'</span>) &#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                        <span class="keyword">const</span> elements = <span class="built_in">document</span>.querySelectorAll(selector);</span></span><br><span class="line"><span class="javascript">                        <span class="comment">// this.elements = elements;</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// ä½†æ˜¯jQueryä¸ºäº†æ“ä½œæ–¹ä¾¿ï¼Œæ‰€ä»¥å°†DOMå…ƒç´ æ”¾åœ¨äº†è‡ªå·±èº«ä¸Šï¼Œä¹Ÿå°±æ˜¯ä¼ªå¯¹è±¡æ•°ç»„</span></span></span><br><span class="line"><span class="javascript">                        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; elements.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">this</span>[i] = elements[i];</span></span><br><span class="line">                        &#125;</span><br><span class="line"><span class="javascript">                        <span class="keyword">this</span>.length = elements.length;</span></span><br><span class="line"><span class="javascript">                    &#125; <span class="keyword">else</span> &#123; <span class="comment">//å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ç›´æ¥èµ‹å€¼</span></span></span><br><span class="line"><span class="javascript">                        <span class="keyword">this</span>[<span class="number">0</span>] = selector;</span></span><br><span class="line"><span class="javascript">                        <span class="keyword">this</span>.length = <span class="number">1</span>;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="comment">// css(attr, value) &#123;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     for (let i = 0; i &lt; this.length; i++) &#123;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//         this[i].style[attr] = value;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// &#125;</span></span></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            jQuery.fn.init.prototype = jQuery.fn;</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// jQueryæ’ä»¶ç¼–å†™ä¹‹è·¯</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// æ— æ³•ä½¿ç”¨ç®­å¤´å‡½æ•°</span></span></span><br><span class="line"><span class="javascript">            jQuery.fn.extend = jQuery.extend = <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line">                if (args.length &lt;= 0) &#123;</span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="keyword">let</span> target, source = <span class="literal">null</span>;</span></span><br><span class="line"></span><br><span class="line">                source = [...args];</span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="comment">// $.extend | $.fn.extend</span></span></span><br><span class="line">                if (args.length == 1) &#123;</span><br><span class="line"><span class="javascript">                    target = <span class="keyword">this</span>;</span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// args[0].extend</span></span></span><br><span class="line">                    target = args[0];</span><br><span class="line">                    source.splice(0, 1);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="comment">// åˆ¤æ–­å½“å‰æ˜¯è°</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// if (this === jQuery) &#123;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     target = args[0];</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     // åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     source.splice(0, 1);</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// &#125; else &#123;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     target = this;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// &#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="comment">// console.log(target);</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// console.log(source);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="comment">// source.forEach((item,index) =&gt; &#123;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     for (const key in item) &#123;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//         target[key] = item[key];</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// &#125;);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="comment">//forå¾ªç¯ä¼˜åŒ–</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">// Object.assign() æ–¹æ³•ç”¨äºå°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚å®ƒå°†è¿”å›ç›®æ ‡å¯¹è±¡ã€‚ æœ‰å…¼å®¹æ€§é—®é¢˜</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">Object</span>.assign(target, ...source);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span> target;</span></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">//æ·»åŠ ä¸€äº›å·¥å…·ç±»æ–¹æ³•ï¼š$.xxx()</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//$.ajax  $.post $.get  $.type $.each</span></span></span><br><span class="line">            jQuery.extend(&#123;</span><br><span class="line"><span class="javascript">                <span class="comment">//$.each([1,3,5],function(index,value)&#123;&#125;)</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//$.each(&#123; age:18,height:200 &#125;,function(key,value)&#123;&#125;)</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//å¯ä»¥éå†æ•°ç»„å’Œå¯¹è±¡</span></span></span><br><span class="line">                each(target, callback) &#123;</span><br><span class="line"></span><br><span class="line"><span class="javascript">                    <span class="comment">//å¯¹è±¡æœ‰ä¸¤ç§ï¼Œæ•°ç»„å¯¹è±¡å’Œæ™®é€šæ•°ç»„</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                    <span class="comment">//ä¸ä»…ä»…å¯ä»¥éå†æ•°ç»„ï¼Œä¹Ÿå¯ä»¥éå†ä¼ªæ•°ç»„</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">//&#123; length:0 &#125;</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">//&#123; 0:100,length:1 &#125;</span></span></span><br><span class="line"><span class="javascript">                    <span class="comment">//&#123; 0:"a",1:"b",2:"c",length:3 &#125;</span></span></span><br><span class="line"></span><br><span class="line">                    if ((length in target) &amp;&amp; target.length &gt;= 0) &#123;</span><br><span class="line"></span><br><span class="line"><span class="javascript">                        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; target.length; i++) &#123;</span></span><br><span class="line"></span><br><span class="line">                            callback.call(target[i], i, target[i]);</span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="comment">// æ™®é€šå¯¹è±¡</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                        <span class="comment">// //è·å–åˆ°p1è‡ªèº«æ‹¥æœ‰çš„å±æ€§ç»„æˆæ•°ç»„</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// Object.keys(target).forEach((value,index)=&gt;&#123;</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">//     console.log(value,index);</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// &#125;)</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                        <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> target) &#123;</span></span><br><span class="line">                            if (target.hasOwnProperty(key)) &#123;</span><br><span class="line">                                callback.call(target[key], key, target[key]);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;,</span><br><span class="line">                type(target) &#123;</span><br><span class="line"><span class="javascript">                    <span class="comment">// console.log('type');</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> type = <span class="built_in">Object</span>.prototype.toString.call(target);</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> type.replace(<span class="string">"[object "</span>, <span class="string">""</span>)</span></span><br><span class="line"><span class="javascript">                        .replace(<span class="string">"]"</span>, <span class="string">""</span>)</span></span><br><span class="line">                        .toLowerCase();</span><br><span class="line">                &#125;,</span><br><span class="line">                ajax() &#123;</span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(<span class="string">'ajax'</span>);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> events = [</span></span><br><span class="line"><span class="javascript">                <span class="comment">//&#123; ele:div1,type:"click",callback:function()&#123;&#125; &#125;,</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//&#123; ele:div1,type:"click",callback:function()&#123;&#125; &#125;</span></span></span><br><span class="line">            ];</span><br><span class="line"></span><br><span class="line">            jQuery.fn.extend(&#123;</span><br><span class="line"><span class="javascript">                <span class="comment">// éå†è‡ªå·±</span></span></span><br><span class="line">                each(callback) &#123;</span><br><span class="line"><span class="javascript">                    jQuery.each(<span class="keyword">this</span>, callback);</span></span><br><span class="line">                &#125;,</span><br><span class="line"><span class="javascript">                <span class="comment">//1ã€è·å–æ ·å¼$("div").css("color")  åªèƒ½è·å–åˆ°ç¬¬ä¸€ä¸ªdivçš„é¢œè‰²</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//2ã€è®¾ç½®æ ·å¼</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//      $("div").css("color","red") è®¾ç½®æ¯ä¸€ä¸ªdivçš„å­—ä½“é¢œè‰²</span></span></span><br><span class="line"><span class="javascript">                <span class="comment">//      $("div").css(&#123; color:"red","backgroundColor","blue" &#125;)</span></span></span><br><span class="line">                css(...args) &#123;</span><br><span class="line">                    if (args.length === 1) &#123;</span><br><span class="line"><span class="javascript">                        <span class="comment">// ä¸€ä¸ªå‚æ•°æ—¶åˆ†ä¸¤ç§æƒ…å†µï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™ä¸ºè·å–å±æ€§ï¼Œä½†æ˜¯å¦‚æœä¸ºä¸€ä¸ªå¯¹è±¡åˆ™ä¸ºè®¾ç½®æ ·å¼</span></span></span><br><span class="line"><span class="javascript">                        <span class="keyword">if</span> (jQuery.type(args[<span class="number">0</span>]) === <span class="string">'string'</span>) &#123;</span></span><br><span class="line"><span class="javascript">                            <span class="comment">// console.log(this); thisæŒ‡å‘$("div"),initæ–¹æ³•æ”¾å›çš„å…ƒç´ </span></span></span><br><span class="line"><span class="javascript">                            <span class="comment">//ä¸ç®¡å…ƒç´ æœ‰å¤šå°‘ä¸ªï¼Œåªå–ç¬¬ä¸€ä¸ª</span></span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> $<span class="keyword">this</span> = <span class="keyword">this</span>[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> style = <span class="built_in">window</span>.getComputedStyle($<span class="keyword">this</span>, <span class="literal">null</span>);</span></span><br><span class="line"><span class="javascript">                            <span class="comment">// console.log(style);</span></span></span><br><span class="line"><span class="javascript">                            <span class="keyword">return</span> style[args[<span class="number">0</span>]];</span></span><br><span class="line"><span class="javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                            <span class="comment">// è®¾ç½®æ ·å¼,éœ€è¦éå†é€‰æ‹©å™¨</span></span></span><br><span class="line"><span class="javascript">                            <span class="comment">// jQuery.each(this, function()&#123;</span></span></span><br><span class="line"><span class="javascript">                            <span class="comment">//     let $this = this;</span></span></span><br><span class="line"><span class="javascript">                            <span class="comment">//     jQuery.each(args[0], function(key, value)&#123;</span></span></span><br><span class="line"><span class="javascript">                            <span class="comment">//         $this.style[key] = value;</span></span></span><br><span class="line"><span class="javascript">                            <span class="comment">//     &#125;)</span></span></span><br><span class="line"><span class="javascript">                            <span class="comment">// &#125;);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                            <span class="comment">//ä¼˜åŒ–ä¸Šè¿°ä»£ç </span></span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> _that = <span class="keyword">this</span>;</span></span><br><span class="line"><span class="javascript">                            jQuery.each(args[<span class="number">0</span>], <span class="function"><span class="keyword">function</span> (<span class="params">key, value</span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line">                                _that.css(key, value);</span><br><span class="line"></span><br><span class="line">                            &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">                            <span class="keyword">return</span> <span class="keyword">this</span>; <span class="comment">//é“¾å¼è°ƒç”¨</span></span></span><br><span class="line">                        &#125;</span><br><span class="line"><span class="javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="comment">// å‚æ•°ä¸ºä¸¤ä¸ªï¼Œåˆ™ä¸ºä¸€ä¸ªå±æ€§ï¼Œä¸€ä¸ªå±æ€§å€¼</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// è®¾ç½®å•ä¸ªæ ·å¼</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// let key = args[0];</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// let value = args[1];</span></span></span><br><span class="line"><span class="javascript">                        <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                            <span class="keyword">this</span>.style[args[<span class="number">0</span>]] = args[<span class="number">1</span>];</span></span><br><span class="line">                        &#125;);</span><br><span class="line"><span class="javascript">                        <span class="keyword">return</span> <span class="keyword">this</span>; <span class="comment">//é“¾å¼è°ƒç”¨</span></span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                show() &#123;</span><br><span class="line"><span class="javascript">                    <span class="keyword">this</span>.css(<span class="string">'display'</span>, <span class="string">'block'</span>);</span></span><br><span class="line">                &#125;,</span><br><span class="line">                hide() &#123;</span><br><span class="line"><span class="javascript">                    <span class="keyword">this</span>.css(<span class="string">'display'</span>, <span class="string">'none'</span>);</span></span><br><span class="line">                &#125;,</span><br><span class="line">                toggle() &#123;</span><br><span class="line"><span class="javascript">                    <span class="keyword">let</span> _that = <span class="keyword">this</span>; <span class="comment">//this -&gt; jQuery</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="comment">// this -&gt; dom </span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// if (jQuery(this).css('display') === 'block') &#123;</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">//     jQuery(this).css('display', 'none');</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// &#125;else &#123;</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">//     jQuery(this).css('display', 'block');</span></span></span><br><span class="line"><span class="javascript">                        <span class="comment">// &#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                        <span class="comment">//ä¼˜åŒ–ä¸Šè¿°ä»£ç </span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                        <span class="keyword">let</span> $<span class="keyword">this</span> = jQuery(<span class="keyword">this</span>);</span></span><br><span class="line"><span class="javascript">                        $<span class="keyword">this</span>.css(<span class="string">'display'</span>) === <span class="string">'block'</span> ? $<span class="keyword">this</span>.hide() : $<span class="keyword">this</span>.show();</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;,</span><br><span class="line"><span class="javascript">                <span class="comment">// æ·»åŠ event</span></span></span><br><span class="line">                on(type, callback) &#123;</span><br><span class="line"></span><br><span class="line"><span class="javascript">                    <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                        <span class="comment">// console.log(this);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                        <span class="keyword">this</span>.addEventListener(type, callback);</span></span><br><span class="line"></span><br><span class="line">                        events.push(&#123;</span><br><span class="line"><span class="javascript">                            ele: <span class="keyword">this</span>,</span></span><br><span class="line">                            type: type,</span><br><span class="line">                            callback: callback</span><br><span class="line">                        &#125;);</span><br><span class="line"></span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> <span class="keyword">this</span>; <span class="comment">//é“¾å¼ç¼–ç¨‹</span></span></span><br><span class="line"></span><br><span class="line">                &#125;,</span><br><span class="line"><span class="javascript">                <span class="comment">//è§£ç»‘ç»‘å®šï¼š$("div").off("click")ï¼šè¡¨ç¤ºè§£é™¤å½“å‰å…ƒç´ çš„æ‰€æœ‰çš„å•å‡»äº‹ä»¶</span></span></span><br><span class="line">                off(type) &#123;</span><br><span class="line"></span><br><span class="line"><span class="javascript">                    <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                        <span class="keyword">let</span> _that = <span class="keyword">this</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                        <span class="keyword">let</span> es = events.filter(<span class="function"><span class="keyword">function</span> (<span class="params">e, i</span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                            <span class="built_in">console</span>.log(i, e);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                            <span class="comment">//æŸ¥çœ‹ç»‘å®šçš„å…ƒç´ æ˜¯å¦å­˜åœ¨eventsæ•°ç»„ä¸­ï¼Œå¹¶ä¸”æœ‰æ²¡æœ‰è¯¥å…ƒç´ ç»‘å®šçš„äº‹ä»¶,å¹¶ä¸”ç§»é™¤</span></span></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> isCurent =  e.ele === _that &amp;&amp; e.type === type</span></span><br><span class="line">                            if (isCurent) &#123;</span><br><span class="line">                                events.splice(i, 1);</span><br><span class="line">                            &#125;</span><br><span class="line"><span class="javascript">                            <span class="keyword">return</span> isCurent;</span></span><br><span class="line">                        &#125;);</span><br><span class="line"></span><br><span class="line">                        if (es.length &lt;= 0) &#123;</span><br><span class="line"><span class="javascript">                            <span class="keyword">return</span>;</span></span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">                        <span class="comment">//å¯èƒ½å­˜åœ¨å¤šæ¬¡ç»‘å®š</span></span></span><br><span class="line"><span class="javascript">                        es.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                            <span class="built_in">console</span>.log(e, _that);</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">                            <span class="keyword">let</span> &#123; callback &#125; = e;</span></span><br><span class="line"></span><br><span class="line">                            _that.removeEventListener(type, callback);</span><br><span class="line">                        &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="javascript">                        <span class="built_in">console</span>.log(events);</span></span><br><span class="line"></span><br><span class="line">                    &#125;)</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// function F(selector) &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     // æŠŠæŸ¥æ‰¾åˆ°çš„DOå—å…ƒç´ æ”¾åœ¨å˜é‡ä¸­</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     const elements = document.querySelectorAll(selector);</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     // this.elements = elements;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     // ä½†æ˜¯jQueryä¸ºäº†æ“ä½œæ–¹ä¾¿ï¼Œæ‰€ä»¥å°†DOMå…ƒç´ æ”¾åœ¨äº†è‡ªå·±èº«ä¸Šï¼Œä¹Ÿå°±æ˜¯ä¼ªå¯¹è±¡æ•°ç»„</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     for (let i = 0; i &lt; elements.length; i++) &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//         this[i] = elements[i];</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     this.length = elements.length;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// &#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// F.prototype.css = function(attr, value) &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     console.log(this.elements.length);</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     for(let i=0; i&lt;this.elements.length; i++) &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//         this.elements[i].style[attr] = value;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// &#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// F.prototype = &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     constructor: F,</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     css(attr, value) &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//         for (let i = 0; i &lt; this.length; i++) &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//             this[i].style[attr] = value;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//         &#125;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// &#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// ç›¸å½“äºèµ‹å€¼ç»™é¡¶å±‚å¯¹è±¡windowçš„å±æ€§</span></span></span><br><span class="line">            global.$ = global.jQuery = jQuery;</span><br><span class="line"></span><br><span class="line"><span class="javascript">        &#125;)(<span class="built_in">window</span>); <span class="comment">//è‡ªè°ƒç”¨å‡½æ•°</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="comment">// console.log($);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// $('div').css('color', 'red');</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// $('.header').css('color', 'blue');</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// var p = &#123;&#125;;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// $.extend(p, &#123; a: 1 &#125;, &#123; b: 2 &#125;);</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// console.log(p);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// $.fn.extend(&#123; a: 0 &#125;);</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// console.log($.fn);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// $.each(&#123; a: 'a', b: 'b' &#125;, function (key, value) &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     console.log(key, value);</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// &#125;);</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// $.each(&#123; 0: 100, 1: 200, 2: 300, length: 3 &#125;, function (key, value) &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     console.log(key, value);</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// &#125;);</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// $.each([1, 2, 3], function (key, value) &#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     console.log(key, value);</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// &#125;);</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// console.log($.type(&#123; a: 1 &#125;));</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// $('div').css(&#123;</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     'color': 'red',</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//     'backgroundColor': 'blue'</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// &#125;)</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// $('div').css('color', 'red');</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// $('.header').hide();</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// $('div').toggle();</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">            $(<span class="string">'.footer'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">'footer'</span>);</span></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">            $(<span class="string">'.header'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                alert(<span class="string">'header'</span>);</span></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">            $(<span class="string">'.section'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">'.footer'</span>).off(<span class="string">'click'</span>);</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">'remove'</span>)</span></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line"><span class="javascript">            <span class="comment">// $('.header').off('click');</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-pseudo">:first-child</span> &#123;</span></span><br><span class="line">            color: rebeccapurple;</span><br><span class="line"><span class="css">            <span class="comment">/* display: none; */</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span>bbb<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"section"</span>&gt;</span>ccc<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo nextä¸»é¢˜é¦–é¡µéšè—æŒ‡å®šæ–‡ç« </title>
    <url>/2019/04/23/hexo-next%E4%B8%BB%E9%A2%98%E9%A6%96%E9%A1%B5%E9%9A%90%E8%97%8F%E6%8C%87%E5%AE%9A%E6%96%87%E7%AB%A0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å› ä¸ºåšå®¢ä¸‹æ··åˆäº†æˆ‘æŠ€æœ¯ç±»å’Œç”Ÿæ´»ç±»çš„æ–‡ç« ï¼Œä½†æ˜¯é¦–é¡µæˆ‘åªæƒ³æ˜¾ç¤ºæŠ€æœ¯ç±»ï¼Œæ‰€ä»¥è®°å½•ä¸‹åšæ³•ã€‚</p>
<a id="more"></a>
<p><strong>å…·ä½“åšæ³•</strong></p>
<p>æ‰¾åˆ°<code>themesâ©</code> â–¸ <code>â¨next</code>â© â–¸ <code>â¨layout</code>â©æ–‡ä»¶å¤¹ä¸‹çš„<code>index.swig</code>æ–‡ä»¶</p>
<p><img src="index1.png" alt></p>
<p>å®šä½ä¿®æ”¹<code>post_template.render</code></p>
<p>ä¿®æ”¹æˆä»¥ä¸‹ä»£ç ,å…¶ä¸­ä¿®æ”¹çš„æ˜¯ä¸ºæ–‡ç« çš„é¦–é¡µæ˜¾ç¤ºæ·»åŠ åˆ¤æ–­æ¡ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% if post.visible !== &apos;hide&apos; %&#125;</span><br><span class="line">   &#123;&#123; post_template.render(post, true) &#125;&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<p>å³ä¿®æ”¹å</p>
<p><img src="index2.png" alt></p>
<p><strong>åœ¨æ–°çš„postä¸­æ·»åŠ visibleå­—æ®µæ¥æ§åˆ¶æ˜¯å¦é¦–é¡µæ˜¾ç¤º</strong></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: post title</span><br><span class="line">date: 2019-04-23 12:24:19</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">    - </span>hexo</span><br><span class="line">categories:</span><br><span class="line"><span class="bullet">    - </span>hexo</span><br><span class="line">visible: hide</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">.........</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML5ç§»åŠ¨ç«¯è‡ªé€‚åº”æ–¹æ¡ˆâ€”â€”åª’ä½“æŸ¥è¯¢+remæ–¹æ¡ˆ</title>
    <url>/2019/04/22/HTML5%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%87%AA%E9%80%82%E5%BA%94%E6%96%B9%E6%A1%88%E2%80%94%E2%80%94%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2-rem%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>è™½ç„¶H5çš„é¡µé¢ä¸PCçš„Webé¡µé¢ç›¸æ¯”ç®€å•äº†ä¸å°‘ï¼Œä½†è®©æˆ‘ä»¬å¤´ç—›çš„äº‹æƒ…æ˜¯è¦æƒ³å°½åŠæ³•è®©é¡µé¢èƒ½é€‚é…ä¼—å¤šä¸åŒçš„ç»ˆç«¯è®¾å¤‡ã€‚</p>
<a id="more"></a>
<blockquote>
<p>æœ¬æ–‡ä¸­ä¸æ¶‰åŠä¸€äº›viewportã€dprç­‰çš„æ¦‚å¿µä»‹ç»ï¼Œè¯¦ç»†äº†è§£å¯ä»¥å†æŸ¥çœ‹æœ¬åšå®¢ä¸­å¦ä¸€ç¯‡æ–‡ç« æœ‰å…·ä½“è®²è§£è¿™äº›æ¦‚å¿µã€‚</p>
</blockquote>
<h1 id="EMå’ŒREM"><a href="#EMå’ŒREM" class="headerlink" title="EMå’ŒREM"></a>EMå’ŒREM</h1><p>ä½¿ç”¨REM+åª’ä½“æŸ¥è¯¢æ–¹å¼è¿›è¡Œç¼–å†™è‡ªé€‚åº”æ–¹æ¡ˆæ—¶ï¼Œå…ˆæ¥äº†è§£ä¸‹EMå’ŒREMæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h2 id="EM"><a href="#EM" class="headerlink" title="EM"></a>EM</h2><p>emæ˜¯ç›¸å¯¹é•¿åº¦å•ä½ã€‚ç›¸å¯¹äºå½“å‰å¯¹è±¡å†…æ–‡æœ¬çš„å­—ä½“å°ºå¯¸ã€‚å¦‚å½“å‰å¯¹è¡Œå†…æ–‡æœ¬çš„å­—ä½“å°ºå¯¸æœªè¢«äººä¸ºè®¾ç½®ï¼Œåˆ™ç›¸å¯¹äºæµè§ˆå™¨çš„é»˜è®¤å­—ä½“å°ºå¯¸ã€‚</p>
<p><strong>EMçš„ç‰¹ç‚¹</strong></p>
<ul>
<li>emçš„å€¼å¹¶ä¸æ˜¯å›ºå®šçš„</li>
<li>emä¼šç»§æ‰¿çˆ¶çº§å…ƒç´ çš„å­—ä½“å¤§å°</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šä»»æ„æµè§ˆå™¨çš„é»˜è®¤å­—ä½“é«˜éƒ½æ˜¯16pxã€‚æ‰€æœ‰æœªç»è°ƒæ•´çš„æµè§ˆå™¨éƒ½ç¬¦åˆ: 1em=16pxã€‚é‚£ä¹ˆ12px=0.75em,10px=0.625emã€‚ä¸ºäº†ç®€åŒ–font-sizeçš„æ¢ç®—ï¼Œéœ€è¦åœ¨cssä¸­çš„bodyé€‰æ‹©å™¨ä¸­å£°æ˜Font-size=62.5%ï¼Œè¿™å°±ä½¿emå€¼å˜ä¸º 16px*62.5%=10px, è¿™æ ·12px=1.2em, 10px=1em, ä¹Ÿå°±æ˜¯è¯´åªéœ€è¦å°†ä½ çš„åŸæ¥çš„pxæ•°å€¼é™¤ä»¥10ï¼Œç„¶åæ¢ä¸Šemä½œä¸ºå•ä½å°±è¡Œäº†ã€‚<br>æ‰€ä»¥æˆ‘ä»¬åœ¨å†™CSSçš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š</p>
<ol>
<li>bodyé€‰æ‹©å™¨ä¸­å£°æ˜Font-size=62.5%ï¼›</li>
<li>å°†ä½ çš„åŸæ¥çš„pxæ•°å€¼é™¤ä»¥10ï¼Œç„¶åæ¢ä¸Šemä½œä¸ºå•ä½ï¼›</li>
<li>é‡æ–°è®¡ç®—é‚£äº›è¢«æ”¾å¤§çš„å­—ä½“çš„emæ•°å€¼ã€‚é¿å…å­—ä½“å¤§å°çš„é‡å¤å£°æ˜ã€‚<br>ä¹Ÿå°±æ˜¯é¿å…1.2 * 1.2= 1.44çš„ç°è±¡ã€‚æ¯”å¦‚è¯´ä½ åœ¨#contentä¸­å£°æ˜äº†å­—ä½“å¤§å°ä¸º1.2emï¼Œé‚£ä¹ˆåœ¨å£°æ˜pçš„å­—ä½“å¤§å°æ—¶å°±åªèƒ½æ˜¯1emï¼Œè€Œä¸æ˜¯1.2em, å› ä¸ºæ­¤eméå½¼emï¼Œå®ƒå› ç»§æ‰¿#contentçš„å­—ä½“é«˜è€Œå˜ä¸ºäº†1em=12pxã€‚</li>
</ol>
</blockquote>
<h2 id="REM"><a href="#REM" class="headerlink" title="REM"></a>REM</h2><p><code>rem</code>æ˜¯<code>CSS3</code>æ–°å¢çš„ä¸€ä¸ªç›¸å¯¹å•ä½ï¼ˆroot emï¼Œæ ¹emï¼‰ï¼Œè¿™ä¸ªå•ä½å¼•èµ·äº†å¹¿æ³›å…³æ³¨ã€‚è¿™ä¸ªå•ä½ä¸emæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼ŸåŒºåˆ«åœ¨äºä½¿ç”¨remä¸ºå…ƒç´ è®¾å®šå­—ä½“å¤§å°æ—¶ï¼Œä»ç„¶æ˜¯ç›¸å¯¹å¤§å°ï¼Œä½†ç›¸å¯¹çš„åªæ˜¯HTMLæ ¹å…ƒç´ ã€‚è¿™ä¸ªå•ä½å¯è°“é›†ç›¸å¯¹å¤§å°å’Œç»å¯¹å¤§å°çš„ä¼˜ç‚¹äºä¸€èº«ï¼Œé€šè¿‡å®ƒæ—¢å¯ä»¥åšåˆ°åªä¿®æ”¹æ ¹å…ƒç´ å°±æˆæ¯”ä¾‹åœ°è°ƒæ•´æ‰€æœ‰å­—ä½“å¤§å°ï¼Œåˆå¯ä»¥é¿å…å­—ä½“å¤§å°é€å±‚å¤åˆçš„è¿é”ååº”ã€‚ç›®å‰ï¼Œé™¤äº†IE8åŠæ›´æ—©ç‰ˆæœ¬å¤–ï¼Œæ‰€æœ‰æµè§ˆå™¨å‡å·²æ”¯æŒremã€‚</p>
<p>ç®€å•çš„ç†è§£ï¼Œremå°±æ˜¯ç›¸å¯¹äºæ ¹å…ƒç´ <code>&lt;html&gt;</code>çš„<code>font-size</code>æ¥åšè®¡ç®—ã€‚è€Œæˆ‘ä»¬çš„æ–¹æ¡ˆä¸­ä½¿ç”¨remå•ä½ï¼Œæ˜¯èƒ½è½»æ˜“çš„æ ¹æ®<code>&lt;html&gt;</code>çš„<code>font-size</code>è®¡ç®—å‡ºå…ƒç´ çš„ç›’æ¨¡å‹å¤§å°ã€‚è€Œè¿™ä¸ªç‰¹è‰²å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯ç‰¹åˆ«çš„æœ‰ç›Šå¤„ã€‚</p>
<h1 id="åª’ä½“æŸ¥è¯¢-Remå®ç°è‡ªé€‚åº”"><a href="#åª’ä½“æŸ¥è¯¢-Remå®ç°è‡ªé€‚åº”" class="headerlink" title="åª’ä½“æŸ¥è¯¢ + Remå®ç°è‡ªé€‚åº”"></a>åª’ä½“æŸ¥è¯¢ + Remå®ç°è‡ªé€‚åº”</h1><p>æ”¾ä¸Šä»£ç ä¸­æ‰€ä½¿ç”¨çš„è®¾è®¡ç¨¿å’Œå›¾ç‰‡ï¼Œè‡ªè¡Œå³é”®ä¿å­˜ã€‚å›¾ç‰‡æ¥æº<a href="https://github.com/amfe/article/issues/17" target="_blank" rel="noopener">æ‰‹æ·˜H5é€‚é…æ–¹æ¡ˆ</a></p>
<p><img src="designpsd.jpeg" alt></p>
<p><img src="grayscale.jpeg" alt></p>
<p><img src="haibao.jpg" alt></p>
<p>è¯¥è®¾è®¡å›¾æ˜¯æŒ‰ç…§iPhone6ä½œä¸ºåŸºå‡†è®¾è®¡å°ºå¯¸ï¼ŒiPhone6çš„åˆ†è¾¨ç‡ä¸º<code>750px * 1334px</code>ï¼ŒiPhone6çš„DPRä¸º2ï¼Œåˆ™CSSåƒç´ åˆ™ç¼©å°ä¸ºè®¾è®¡ç¨¿å°ºå¯¸çš„<code>1/2</code>ã€‚æ—¢è®¾è®¡ç¨¿é‡å‡ºæŸå®½ä¸º20pxï¼Œåˆ™cssåƒç´ åˆ™è½¬ä¸ºä¸º10pxã€‚</p>
<blockquote>
<p>ç†æƒ³é€‚å£çš„ç¼©æ”¾æ¯”ä¸º1çš„æƒ…å†µä¸‹</p>
</blockquote>
<p>é¦–å…ˆæŒ‰ç…§è®¾è®¡ç¨¿å°ºå¯¸è¿˜åŸé¡µé¢ï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œé¦–å…ˆä½¿ç”¨pxè¿˜åŸé¡µé¢ï¼Œåœ¨iPhone6ä¸‹æ˜¾ç¤ºè®¾è®¡ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            padding: 0;</span><br><span class="line">            margin: 0;</span><br><span class="line">            box-sizing: border-box;</span><br><span class="line">            -webkit-tap-highlight-color: transparent;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        html,body &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        html,body &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#f5294c</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/* background-color: #f5294c; */</span></span></span><br><span class="line">            min-width: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.header</span> <span class="selector-tag">h1</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line">            width: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> &#123;</span></span><br><span class="line">            padding: 0 5px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">            position: relative;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">            padding: 5px 0;</span><br><span class="line">            display: table-cell;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.left</span> <span class="selector-tag">img</span>&#123;</span></span><br><span class="line">            width: 88px;</span><br><span class="line">            height: 88px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">            display: table-cell;</span><br><span class="line">            padding: 5px 8px 0 8px;</span><br><span class="line">            vertical-align: top;</span><br><span class="line">            width: 100%;</span><br><span class="line">            font-size: 13px;</span><br><span class="line"><span class="css">            <span class="selector-tag">line-height</span>: 1<span class="selector-class">.25</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> <span class="selector-class">.price</span> &#123;</span></span><br><span class="line">            margin: 9px 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> <span class="selector-class">.price</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#f32a4c</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> <span class="selector-class">.price</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line">            font-size: 10px;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#f32a4c</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#fffffd</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> <span class="selector-class">.intro</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#ffb09b</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.buy</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            right: 9px;</span><br><span class="line">            bottom: 7px;</span><br><span class="line"><span class="css">            <span class="selector-tag">line-height</span>: 1<span class="selector-class">.25</span>;</span></span><br><span class="line">            font-size: 13px;</span><br><span class="line">            padding: 5px 18px;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#f42a4b</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#fefffc</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.buy</span> <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#fefffc</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æµ·æŠ¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/haibao.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"section"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¼–å†™åé¡µé¢æ˜¾ç¤ºï¼Œå½“ç„¶è¿™é‡Œæ˜¯ä¸¾ä¾‹ï¼Œæœ‰äº›åƒç´ ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œåªæ˜¯å¤§æ¦‚çš„æµ‹é‡äº†ä¸€ä¸‹ï¼Œè¿™é‡Œä½¿ç”¨çš„æµ‹é‡å·¥å…·ä¸º<code>Mark Man</code>ã€‚</p>
<p><img src="px_h5.gif" alt></p>
<p>ç„¶åçœ‹çœ‹å…¶ä»–è®¾å¤‡æ˜¾ç¤ºçš„æ•ˆæœï¼Œå› ä¸ºè¿™é‡Œä½¿ç”¨çš„æ˜¯<code>æµå¼å¸ƒå±€</code>ï¼Œå³ç™¾åˆ†æ¯”å¸ƒå±€ï¼Œé¡µé¢è¿˜æ²¡æœ‰è¯´å˜å½¢å¾ˆä¸¥é‡ï¼Œä½†æ˜¯åœ¨iPhone5è®¾å¤‡ä¸Šæˆ–è€…æ›´å°çš„è®¾å¤‡ä¸Šæ˜¾ç¤ºå°±ä¼šæ˜¾å¾—é¡µé¢å…ƒç´ åå¤§ï¼Œè€Œåœ¨ä¸€äº›ipadå°±æ˜¾å¾—æ›´ä¸ºéš¾å—äº†ã€‚(æ¢æˆå…¶ä»–DPRä¸‹æƒ…å†µä¹Ÿæ˜¯ç›¸åŒ)ã€‚</p>
<p>è¿™é‡Œä¸è®²è§£åª’ä½“æŸ¥è¯¢æ˜¯ä»€ä¹ˆå’Œå…·ä½“è¯­æ³•ï¼Œè¯¦ç»†äº†è§£å¯ä»¥æŸ¥çœ‹<a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Media_queries" target="_blank" rel="noopener">MDN</a></p>
<p>è€Œè¯¥æ–¹æ¡ˆå°±æ˜¯åŸºäºremçš„åŸç†ï¼Œé’ˆå¯¹ä¸åŒå±å¹•å°ºå¯¸çš„æ”¹å˜æ¥æ”¹å˜æ ¹èŠ‚ç‚¹htmlçš„<code>font-size</code>çš„å¤§å°ã€‚</p>
<p>è¿™é‡Œæ€»ç»“å‡ºäº†ä¸€ä¸ªå…¬å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">font-size(rem) = é¢„è®¾font-size(rem)åŸºå‡†å€¼ / ï¼ˆè®¾è®¡ç¨¿å®½åº¦ / DPRï¼‰ * è®¾å¤‡å®½åº¦</span><br></pre></td></tr></table></figure>
<p>è¯¥å…¬å¼çš„åŸç†å°±æ˜¯å…ˆæ ¹æ®è®¾è®¡ç¨¿çš„å°ºå¯¸å’ŒDPRæ±‚å‡ºè®¾å¤‡çš„å®½åº¦ï¼Œæ ¹æ®è¯¥è®¾å¤‡çš„å®½åº¦ä¸‹é¢„è®¾ä¸€ä¸ª<code>font-size</code>çš„åŸºå‡†å€¼ï¼Œå†æ±‚å‡ºè¯¥è®¾å¤‡ä¸‹çš„å®½åº¦ä¸é¢„è®¾åŸºå‡†å€¼çš„æ¯”å€¼ï¼Œç„¶åå…¶ä»–è®¾å¤‡ä¸‹çš„è®¾å¤‡å®½åº¦é™¤ä»¥è¯¥åŸºå‡†å€¼å°±å¯ä»¥æ±‚å‡ºå…¶ä»–è®¾å¤‡ä¸‹çš„htmlçš„<code>font-size</code>çš„å€¼ã€‚æ‰€ä»¥ä¸Šè¿°å…¬å¼æ˜¯ç”±ä¸‹æ¡å…¬å¼å˜åŒ–å¾—æ¥çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">font-size(rem) = è®¾å¤‡å®½åº¦ / ï¼ˆï¼ˆè®¾è®¡ç¨¿å®½åº¦ / DPRï¼‰ / é¢„è®¾font-size(rem)åŸºå‡†å€¼ï¼‰</span><br></pre></td></tr></table></figure>
<p>æŒ‰ç…§æœ¬æ–‡ä¸­è®¾è®¡ç¨¿ä¸ºiPhone6çš„å°ºå¯¸è®¾è®¡ï¼Œæˆ‘ä»¬ä»¥è®¾è®¡ç¨¿ä¸‹iPhone6ä¸º<code>375px</code>çš„htmlçš„<code>font-size</code>é¢„è®¾åŸºå‡†å€¼ä¸º<code>100px</code>ï¼ˆæ–¹ä¾¿è®¡ç®—ï¼‰,å³<code>1rem = 100px</code>ï¼Œåˆ™å…¶ä»–è®¾å¤‡åƒç´ ä¸‹htmlçš„<code>font-size</code>çš„å€¼ä¸º</p>
<ul>
<li>iPhone5çš„è®¾å¤‡åƒç´ 320px:<code>100 / (750 / 2) * 320 = 85.333px</code></li>
<li>iPhone6çš„è®¾å¤‡åƒç´ 375px:<code>100px</code></li>
<li>iPhone6Plusçš„è®¾å¤‡åƒç´ 414px:<code>100 / (750 / 2) * 414 = 110.4px</code></li>
</ul>
<p>åªè¦ä»¥è®¾è®¡ç¨¿ä¸‹é¢„è®¾çš„åŸºå‡†å€¼å†æ ¹æ®å…¶ä»–å±å¹•æ¥æ¢ç®—è®¡ç®—å‡ºå…¶ä»–è®¾å¤‡ä¸‹çš„htmlçš„<code>font-size</code>å¤§å°å³å¯ã€‚</p>
<p>é¡µé¢ä¸­å†æ ¹æ®<code>1rem = 100px</code>å°†é¡µé¢ä¸­pxå•ä½æ¢ç®—æˆremå³å¯ã€‚å†æ·»åŠ ä¸Šæ ¹æ®è®¾å¤‡å®½åº¦çš„åª’ä½“æŸ¥è¯¢è®¾ç½®æ ¹èŠ‚ç‚¹çš„<code>font-size</code>å¤§å°ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* base-rem = 100px */</span></span><br><span class="line"></span><br><span class="line">        @<span class="keyword">media</span> (min-width: <span class="number">320px</span>) &#123;</span><br><span class="line">            <span class="selector-tag">html</span> &#123;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">85.333px</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @<span class="keyword">media</span> (min-width: <span class="number">360px</span>) &#123;</span><br><span class="line">            <span class="selector-tag">html</span> &#123;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">96px</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @<span class="keyword">media</span> (min-width: <span class="number">375px</span>) &#123;</span><br><span class="line">            <span class="selector-tag">html</span> &#123;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">100px</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @<span class="keyword">media</span> (min-width: <span class="number">414px</span>) &#123;</span><br><span class="line">            <span class="selector-tag">html</span> &#123;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">110.4px</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @<span class="keyword">media</span> (min-width: <span class="number">480px</span>) &#123;</span><br><span class="line">            <span class="selector-tag">html</span> &#123;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">128px</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @<span class="keyword">media</span> (min-width: <span class="number">540px</span>) &#123;</span><br><span class="line">            <span class="selector-tag">html</span> &#123;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">144px</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @<span class="keyword">media</span> (min-width: <span class="number">768px</span>) &#123;</span><br><span class="line">            <span class="selector-tag">html</span> &#123;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">204.8px</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>æ›´æ”¹åæ•´ä½“é¡µé¢ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0,user-scalable=no"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            padding: 0;</span><br><span class="line">            margin: 0;</span><br><span class="line">            box-sizing: border-box;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        html,body &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="comment">/* base-rem = 100px */</span></span></span><br><span class="line"></span><br><span class="line"><span class="css">        @<span class="keyword">media</span> (min-width: <span class="number">320px</span>) &#123;</span></span><br><span class="line">            html &#123;</span><br><span class="line"><span class="css">                <span class="selector-tag">font-size</span>: 85<span class="selector-class">.333px</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        @<span class="keyword">media</span> (min-width: <span class="number">360px</span>) &#123;</span></span><br><span class="line">            html &#123;</span><br><span class="line">                font-size: 96px;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        @<span class="keyword">media</span> (min-width: <span class="number">375px</span>) &#123;</span></span><br><span class="line">            html &#123;</span><br><span class="line">                font-size: 100px;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        @<span class="keyword">media</span> (min-width: <span class="number">414px</span>) &#123;</span></span><br><span class="line">            html &#123;</span><br><span class="line"><span class="css">                <span class="selector-tag">font-size</span>: 110<span class="selector-class">.4px</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        @<span class="keyword">media</span> (min-width: <span class="number">480px</span>) &#123;</span></span><br><span class="line">            html &#123;</span><br><span class="line">                font-size: 128px;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        @<span class="keyword">media</span> (min-width: <span class="number">540px</span>) &#123;</span></span><br><span class="line">            html &#123;</span><br><span class="line">                font-size: 144px;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        @<span class="keyword">media</span> (min-width: <span class="number">768px</span>) &#123;</span></span><br><span class="line">            html &#123;</span><br><span class="line"><span class="css">                <span class="selector-tag">font-size</span>: 204<span class="selector-class">.8px</span>;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        html,body &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#f5294c</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/* background-color: #f5294c; */</span></span></span><br><span class="line">            min-width: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.header</span> <span class="selector-tag">h1</span> <span class="selector-tag">img</span> &#123;</span></span><br><span class="line">            width: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">padding</span>: 0 0<span class="selector-class">.05rem</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">            position: relative;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.left</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">padding</span>: 0<span class="selector-class">.05rem</span> 0;</span></span><br><span class="line">            display: table-cell;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.left</span> <span class="selector-tag">img</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">width</span>: 0<span class="selector-class">.88rem</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">height</span>: 0<span class="selector-class">.88rem</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">            display: table-cell;</span><br><span class="line"><span class="css">            <span class="selector-tag">padding</span>: 0<span class="selector-class">.05rem</span> 0<span class="selector-class">.08rem</span> 0 0<span class="selector-class">.08rem</span>;</span></span><br><span class="line">            vertical-align: top;</span><br><span class="line">            width: 100%;</span><br><span class="line"><span class="css">            <span class="selector-tag">font-size</span>: 0<span class="selector-class">.13rem</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">line-height</span>: 1<span class="selector-class">.25</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> <span class="selector-class">.price</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">margin</span>: 0<span class="selector-class">.09rem</span> 0;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> <span class="selector-class">.price</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#f32a4c</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> <span class="selector-class">.price</span> <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">font-size</span>: 0<span class="selector-class">.1rem</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#f32a4c</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#fffffd</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.right</span> <span class="selector-class">.intro</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#ffb09b</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.buy</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line"><span class="css">            <span class="selector-tag">right</span>: 0<span class="selector-class">.09rem</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">bottom</span>: 0<span class="selector-class">.07rem</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">line-height</span>: 1<span class="selector-class">.25</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">font-size</span>: 0<span class="selector-class">.13rem</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">padding</span>: 0<span class="selector-class">.05rem</span> 0<span class="selector-class">.18rem</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#f42a4b</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#fefffc</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.section</span> <span class="selector-class">.item</span> <span class="selector-class">.buy</span> <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#fefffc</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æµ·æŠ¥ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/haibao.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"section"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"left"</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"image/grayscale.jpeg"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">srcset</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>Carter's1å¹´å¼ç°è‰²é•¿è¢–è¿ä½“è¡£åŒ…è„šçˆ¬æœå…¨æ£‰é²¸é±¼ç”·å©´å„¿ç«¥è£…115G093<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"price"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>åŒ11ä»·<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Â¥ 299<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ï¼ˆæ»¡400 å‡ 100ï¼‰<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¸€å°æ—¶çƒ­å–1769ä»¶<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"buy"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"##"</span>&gt;</span>é©¬ä¸ŠæŠ¢ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é€‚é…å</p>
<p><img src="rem_h5_dpr2.gif" alt="gif"></p>
<p>å›¾ç‰‡è¾ƒå¤§ï¼Œå¯è‡ªè¡Œè¿è¡Œä»£ç åœ¨dprä¸º1ã€2ã€3ä¸‹å†æ›´æ”¹å±å¹•å°ºå¯¸ï¼Œè¿è¡Œç»“æœè‰¯å¥½ï¼Œå¯è°“å¤Ÿç”¨ã€‚</p>
<p>ä¸ºä»€ä¹ˆå¯è°“å¤Ÿç”¨ï¼Œè¯¥æ–¹æ¡ˆæœ‰ç¼ºç‚¹ï¼šé€šè¿‡è®¾å¤‡å®½åº¦èŒƒå›´åŒºé—´è¿™æ ·çš„åª’ä½“æŸ¥è¯¢æ¥åŠ¨æ€æ”¹å˜remåŸºå‡†å€¼ï¼Œå…¶å®ä¸å¤Ÿç²¾ç¡®ï¼Œæ¯”å¦‚ï¼šå®½åº¦ä¸º360px å’Œ å®½åº¦ä¸º320pxçš„æ‰‹æœºï¼Œå› ä¸ºå±å®½åœ¨åŒä¸€èŒƒå›´åŒºé—´å†…(&lt;375px)ï¼Œæ‰€ä»¥ä¼šè¢«åŒç­‰å¯¹å¾…(remåŸºå‡†å€¼ç›¸åŒ)ï¼Œè€Œäº‹å®ä¸Šä»–ä»¬çš„å±å¹•å®½åº¦å¹¶ä¸ç›¸ç­‰ï¼Œå®ƒä»¬çš„å¸ƒå±€ä¹Ÿåº”è¯¥æœ‰æ‰€ä¸åŒã€‚æœ€ç»ˆï¼Œç»“è®ºå°±æ˜¯ï¼šè¿™æ ·çš„åšæ³•ï¼Œæ²¡æœ‰åšåˆ°è¶³å¤Ÿçš„ç²¾ç¡®ï¼Œä½†æ˜¯å¤Ÿç”¨ã€‚</p>
<h1 id="Lessä¼˜åŒ–"><a href="#Lessä¼˜åŒ–" class="headerlink" title="Lessä¼˜åŒ–"></a>Lessä¼˜åŒ–</h1><p>å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨Lessæˆ–è€…Sassç­‰CSSé¢„å¤„ç†å™¨å¯ä»¥æ›´åŠ ç®€åŒ–ä»£ç çš„ç¼–å†™ä¸è®¡ç®—é‡ã€‚</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//éœ€è¦é€‚é…çš„è®¾å¤‡å®½åº¦æ•°ç»„</span></span><br><span class="line"><span class="variable">@adapterDeviceWidthList:</span> <span class="number">320px</span>, <span class="number">360px</span>, <span class="number">375px</span>, <span class="number">414px</span>, <span class="number">480px</span>, <span class="number">540px</span>, <span class="number">640px</span>, <span class="number">750px</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">@psdWidth:</span> <span class="number">750</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">@psdDpr:</span> <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">@baseFontSize:</span> <span class="number">100px</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">@deviceLength:</span> length(<span class="variable">@adapterDeviceWidthList</span>);</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.adapterMixin</span>(<span class="variable">@index</span>) <span class="keyword">when</span> (<span class="variable">@index</span> &lt;= <span class="variable">@deviceLength</span>) &#123;</span><br><span class="line">    <span class="keyword">@media</span> (<span class="attribute">min-width</span>: extract(<span class="variable">@adapterDeviceWidthList</span>, <span class="variable">@index</span>)) &#123;</span><br><span class="line">        <span class="selector-tag">html</span> &#123;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">100</span> / (<span class="variable">@psdWidth</span> / <span class="variable">@psdDpr</span>) * extract(<span class="variable">@adapterDeviceWidthList</span>, <span class="variable">@index</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.adapterMixin</span>(<span class="variable">@index</span> + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.adapterMixin</span>(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆçš„cssä¸º</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">320px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">85.33333333px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">360px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">96px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">375px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">100px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">414px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">110.4px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">480px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">128px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">540px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">144px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">640px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">170.66666667px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">media</span> (min-width: <span class="number">750px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">200px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨lessç»´æŠ¤èµ·æ¥å°±æ–¹ä¾¿å¾ˆå¤šï¼Œåªè¦ç»´æŠ¤<code>adapterDeviceWidthList</code>ä¸­è®¾å¤‡çš„å®½åº¦å³å¯ï¼Œå¦‚æœè®¾è®¡ç¨¿å¼€å§‹æœ‰å˜åŒ–æ›´æ”¹å˜é‡å³å¯ã€‚</p>
]]></content>
      <categories>
        <category>HTML</category>
      </categories>
      <tags>
        <tag>HTML</tag>
        <tag>ç§»åŠ¨ç«¯é€‚é…</tag>
      </tags>
  </entry>
  <entry>
    <title>Lesså…¥é—¨</title>
    <url>/2019/04/15/Less%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Lessæ˜¯ä»€ä¹ˆ"><a href="#Lessæ˜¯ä»€ä¹ˆ" class="headerlink" title="Lessæ˜¯ä»€ä¹ˆ"></a>Lessæ˜¯ä»€ä¹ˆ</h1><p>LESS å°† CSS èµ‹äºˆäº†åŠ¨æ€è¯­è¨€çš„ç‰¹æ€§ï¼Œå¦‚ å˜é‡ï¼Œ ç»§æ‰¿ï¼Œ è¿ç®—ï¼Œ å‡½æ•°. LESS æ—¢å¯ä»¥åœ¨ å®¢æˆ·ç«¯ ä¸Šè¿è¡Œ (æ”¯æŒIE 6+, Webkit, Firefox)ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ©Node.jsæˆ–è€…Rhinoåœ¨æœåŠ¡ç«¯è¿è¡Œã€‚</p>
<p><a href="https://www.html.cn/doc/less/features/#mixin-guards-feature" target="_blank" rel="noopener">Lesså®˜æ–¹æ–‡æ¡£</a></p>
<a id="more"></a>
<h1 id="Lesså®‰è£…"><a href="#Lesså®‰è£…" class="headerlink" title="Lesså®‰è£…"></a>Lesså®‰è£…</h1><h2 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h2><p>å¼•å…¥ä½ çš„<code>.less</code>æ ·å¼æ–‡ä»¶çš„æ—¶å€™è¦è®¾ç½®<code>rel</code>å±æ€§å€¼ä¸º<code>â€œstylesheet/lessâ€</code>:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet/less"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"styles.less"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸‹è½½<code>less.js</code>,<a href="https://www.html.cn/doc/less/" target="_blank" rel="noopener">ä¸‹è½½åœ°å€</a>,åœ¨<head><meta name="generator" content="Hexo 3.9.0"> ä¸­å¼•å…¥:</head></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"less.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ä½ çš„lessæ ·å¼æ–‡ä»¶ä¸€å®šè¦åœ¨å¼•å…¥less.jså‰å…ˆå¼•å…¥ã€‚<br>åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨less.jså¼€å‘æ˜¯å¾ˆå¥½çš„ï¼Œä½†ä¸æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p>
</blockquote>
<p><strong>ç‰¹åˆ«æ³¨æ„</strong></p>
<ul>
<li>ç¡®ä¿åŒ…æ¶µ <code>.less</code> æ ·å¼è¡¨åœ¨ <code>less.js</code> è„šæœ¬ä¹‹å‰</li>
<li>å½“ä½ å¼•å…¥å¤šä¸ª <code>.less</code> æ ·å¼è¡¨æ—¶ï¼Œå®ƒä»¬éƒ½æ˜¯ç‹¬ç«‹ç¼–è¯‘çš„ã€‚æ‰€ä»¥ï¼Œåœ¨æ¯ä¸ªæ–‡ä»¶ä¸­å®šä¹‰çš„å˜é‡ã€æ··åˆã€å‘½åç©ºé—´éƒ½ä¸ä¼šè¢«å…¶å®ƒçš„æ–‡ä»¶å…±äº«ã€‚</li>
</ul>
<h2 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h2><p>åœ¨æœåŠ¡å™¨ç«¯å®‰è£…<code>LESS</code>çš„æœ€ç®€å•æ–¹å¼å°±æ˜¯é€šè¿‡<code>npm(node çš„åŒ…ç®¡ç†å™¨)</code>, åƒè¿™æ ·:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install less</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æƒ³ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆæœ¬çš„ LESSï¼Œå¯ä»¥å°è¯•åƒä¸‹é¢è¿™æ ·æ“ä½œ:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install less@latest</span><br></pre></td></tr></table></figure>
<h3 id="å‘½ä»¤è¡Œä½¿ç”¨"><a href="#å‘½ä»¤è¡Œä½¿ç”¨" class="headerlink" title="å‘½ä»¤è¡Œä½¿ç”¨"></a>å‘½ä»¤è¡Œä½¿ç”¨</h3><p>ä¸€æ—¦å®‰è£…å®Œæˆï¼Œå°±å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è°ƒç”¨ï¼Œä¾‹å¦‚:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lessc styles.less</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·çš„è¯ç¼–è¯‘åçš„CSSå°†ä¼šè¾“å‡ºåˆ° â€˜stdoutâ€™ ä¸­ï¼Œä½ å¯ä»¥é€‰æ‹©å°†è¿™ä¸ªè¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ä¸­:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lessc styles.less &gt; styles.css</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹ç‰ˆæœ¬</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ lessc -v</span><br><span class="line">$ lessc --version</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ æƒ³è¾“å‡ºä¸€ä¸ªå‹ç¼©åçš„CSSï¼Œåªè¦åŠ åˆ°<code>-x</code>é€‰é¡¹å³å¯ã€‚å¦‚æœä½ æƒ³è¦æ›´NBçš„å‹ç¼©ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨ <a href="https://github.com/GoalSmashers/clean-css" target="_blank" rel="noopener">Clean CSS</a>å‹ç¼©å™¨ï¼Œåªè¦åŠ ä¸Š<code>--clean-css</code> æ’ä»¶å³å¯ã€‚</p>
<p>ç›´æ¥è¿è¡Œlesscï¼Œä¸å¸¦ä»»ä½•å‚æ•°å°†å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å‘½ä»¤è¡Œå‚æ•°æˆ– æŸ¥çœ‹<a href="https://www.html.cn/doc/less/usage/index.html" target="_blank" rel="noopener">ç”¨æ³•</a>.</p>
<h3 id="ä»£ç ä¸­ä½¿ç”¨"><a href="#ä»£ç ä¸­ä½¿ç”¨" class="headerlink" title="ä»£ç ä¸­ä½¿ç”¨"></a>ä»£ç ä¸­ä½¿ç”¨</h3><p>ä½ å¯ä»¥åœ¨Nodeä¸­è°ƒç”¨ç¼–è¯‘å™¨ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> less = <span class="built_in">require</span>(<span class="string">'less'</span>);</span><br><span class="line"></span><br><span class="line">less.render(<span class="string">'.class &#123; width: (1 + 1) &#125;'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e, output</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(output.css);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å°†ä¼šè¾“å‡º</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>ä½¿ç”¨ç¼–è¯‘å·¥å…·ï¼Œæ¯”å¦‚ Koala æŒºå¥½ç”¨çš„ï¼ˆå½“ç„¶ä¹Ÿæœ‰å¾ˆå¤šåœ¨çº¿ç¼–è¯‘å·¥å…·ï¼‰</li>
<li>åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ï¼ˆæ¯”å¦‚Vueï¼Œéœ€è¦å®‰è£…less-loaderï¼‰</li>
<li>å®¢æˆ·ç«¯è°ƒè¯•ï¼ˆå­˜åœ¨è·¨åŸŸé—®é¢˜ï¼Œä¸æ¨èè¿™ç§æ–¹å¼ï¼‰<ul>
<li>ä½¿ç”¨linkæ ‡ç­¾å¼•ç”¨less.min.jsï¼ˆå®˜ç½‘ä¸‹è½½ï¼‰ï¼Œæ³¨æ„rel=â€stylesheet/lessâ€</li>
<li>è¿™ç§æ–¹å¼ä¸ç”Ÿæˆcssæ–‡ä»¶ï¼Œç›´æ¥åœ¨æµè§ˆå™¨æŸ¥çœ‹</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="åµŒå¥—è§„åˆ™"><a href="#åµŒå¥—è§„åˆ™" class="headerlink" title="åµŒå¥—è§„åˆ™"></a>åµŒå¥—è§„åˆ™</h1><h2 id="lessçš„åµŒå¥—è§„åˆ™ç±»ä¼¼HTMLçš„ç»“æ„ï¼Œä½¿å¾—CSSä»£ç æ¸…æ™°"><a href="#lessçš„åµŒå¥—è§„åˆ™ç±»ä¼¼HTMLçš„ç»“æ„ï¼Œä½¿å¾—CSSä»£ç æ¸…æ™°" class="headerlink" title="lessçš„åµŒå¥—è§„åˆ™ç±»ä¼¼HTMLçš„ç»“æ„ï¼Œä½¿å¾—CSSä»£ç æ¸…æ™°"></a>lessçš„åµŒå¥—è§„åˆ™ç±»ä¼¼HTMLçš„ç»“æ„ï¼Œä½¿å¾—CSSä»£ç æ¸…æ™°</h2><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*css å†™æ³•*/</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line"> <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// lesså†™æ³•</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="selector-tag">a</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: red;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="çˆ¶å…ƒç´ é€‰æ‹©ç¬¦-amp"><a href="#çˆ¶å…ƒç´ é€‰æ‹©ç¬¦-amp" class="headerlink" title="çˆ¶å…ƒç´ é€‰æ‹©ç¬¦ &amp;"></a>çˆ¶å…ƒç´ é€‰æ‹©ç¬¦ <code>&amp;</code></h2><ul>
<li>è¡¨ç¤ºå½“å‰é€‰æ‹©å™¨çš„æ‰€æœ‰çˆ¶é€‰æ‹©å™¨</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//csså†™æ³•</span></span><br><span class="line"><span class="selector-class">.bgcolor</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#888888</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//lesså†™æ³•</span></span><br><span class="line"><span class="selector-class">.bgcolor</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>; </span><br><span class="line">  <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#888888</span>;      </span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ”¹å˜é€‰æ‹©å™¨çš„é¡ºåº"><a href="#æ”¹å˜é€‰æ‹©å™¨çš„é¡ºåº" class="headerlink" title="æ”¹å˜é€‰æ‹©å™¨çš„é¡ºåº"></a>æ”¹å˜é€‰æ‹©å™¨çš„é¡ºåº</h2><ul>
<li>å°†&amp;æ”¾åˆ°å½“å‰é€‰æ‹©å™¨ä¹‹åï¼Œä¼šå°†å½“å‰é€‰æ‹©å™¨ç§»åˆ°æœ€å‰é¢</li>
<li>åªéœ€è®°ä½ â€œ&amp; ä»£è¡¨å½“å‰é€‰æ‹©å™¨çš„æ‰€æœ‰çˆ¶é€‰æ‹©å™¨â€</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="selector-class">.color</span> <span class="selector-tag">&amp;</span>&#123;</span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-class">.color</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç»„åˆä½¿ç”¨"><a href="#ç»„åˆä½¿ç”¨" class="headerlink" title="ç»„åˆä½¿ç”¨"></a>ç»„åˆä½¿ç”¨</h2><ul>
<li>å°†ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„é€‰æ‹©å™¨åˆ—è¡¨</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.div1</span>, <span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="selector-tag">&amp;</span> <span class="selector-tag">&amp;</span> &#123;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid blue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-class">.div1</span>, <span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div1</span> <span class="selector-class">.div2</span>,</span><br><span class="line"><span class="selector-class">.div2</span> <span class="selector-class">.div1</span>,</span><br><span class="line"><span class="selector-class">.div1</span> <span class="selector-class">.div1</span>,</span><br><span class="line"><span class="selector-class">.div2</span> <span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> solid blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h1><h2 id="å˜é‡çš„å®šä¹‰å’Œä½¿ç”¨"><a href="#å˜é‡çš„å®šä¹‰å’Œä½¿ç”¨" class="headerlink" title="å˜é‡çš„å®šä¹‰å’Œä½¿ç”¨"></a>å˜é‡çš„å®šä¹‰å’Œä½¿ç”¨</h2><ul>
<li>å®šä¹‰ï¼š@name: value; ï¼ˆ@black: #000;ï¼‰</li>
<li>ä½¿ç”¨åœºåˆåˆ†3ç§ï¼š<ul>
<li>å¸¸è§„ä½¿ç”¨ï¼š@name</li>
<li>ä½œä¸ºé€‰æ‹©å™¨æˆ–å±æ€§åï¼š@{name}</li>
<li>ä½œä¸ºURLï¼šâ€@{name}â€</li>
</ul>
</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 1.å¸¸è§„ä½¿ç”¨ */</span></span><br><span class="line"><span class="variable">@black:</span> <span class="number">#000000</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@black</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 2.ä½œç”¨é€‰æ‹©å™¨å’Œå±æ€§å */</span></span><br><span class="line"><span class="variable">@selName:</span> container;</span><br><span class="line"><span class="variable">@proName:</span> width;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.@&#123;selName&#125;</span> &#123;</span><br><span class="line">  <span class="attribute">@&#123;proName&#125;</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 3.ä½œä¸ºURL */</span></span><br><span class="line"><span class="variable">@imgUrl:</span> <span class="string">"./images/logo.png"</span></span><br><span class="line"></span><br><span class="line">div &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#FFF</span> url(<span class="string">"@&#123;imgUrl&#125;"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#FFF</span> url(<span class="string">"./images/logo.png"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ul>
<li>å˜é‡æ˜¯å»¶è¿ŸåŠ è½½çš„ï¼Œå¯ä»¥ä¸é¢„å…ˆå£°æ˜</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@black</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">@black:</span> <span class="number">#000000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å˜é‡çš„ä½œç”¨åŸŸ<ul>
<li>lessä¼šä»å½“å‰ä½œç”¨åŸŸæ²¡æ‰¾åˆ°ï¼Œå°†å¾€ä¸ŠæŸ¥æ‰¾ï¼ˆç±»ä¼¼jsï¼‰</li>
<li>å¦‚æœåœ¨æŸçº§ä½œç”¨åŸŸæ‰¾åˆ°å¤šä¸ªç›¸åŒåç§°çš„å˜é‡ï¼Œä½¿ç”¨æœ€åå®šä¹‰çš„é‚£ä¸ªï¼ˆç±»ä¼¼cssï¼‰</li>
</ul>
</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@var:</span> <span class="number">0</span>;</span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">    <span class="variable">@var:</span> <span class="number">1</span>;</span><br><span class="line">    <span class="selector-class">.brass</span> &#123;</span><br><span class="line">        <span class="variable">@var:</span> <span class="number">2</span>;</span><br><span class="line">        <span class="attribute">three</span>: <span class="variable">@var</span>;</span><br><span class="line">        <span class="variable">@var:</span> <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">one</span>: <span class="variable">@var</span>; <span class="comment">//ç±»ä¼¼jsï¼Œæ— æ³•è®¿é—®.brasså†…éƒ¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">    <span class="attribute">one</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class</span> <span class="selector-class">.brass</span> &#123;</span><br><span class="line">    <span class="attribute">three</span>: <span class="number">3</span>;  <span class="comment">//ä½¿ç”¨æœ€åå®šä¹‰çš„ @var: 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ··åˆï¼ˆmixinsï¼‰"><a href="#æ··åˆï¼ˆmixinsï¼‰" class="headerlink" title="æ··åˆï¼ˆmixinsï¼‰"></a>æ··åˆï¼ˆmixinsï¼‰</h1><ul>
<li>æ··åˆï¼šä¸€ç§å°†ä¸€ç³»åˆ—å±æ€§ä»ä¸€ä¸ªè§„åˆ™é›†å¼•å…¥ï¼ˆâ€œæ··å…¥â€ï¼‰åˆ°å¦ä¸€ä¸ªè§„åˆ™é›†çš„æ–¹å¼</li>
<li>æ··åˆæ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå†…å®¹ä¹Ÿåå¤šï¼Œå¯ä»¥å°è¯•å¤šçœ‹å‡ éï¼</li>
</ul>
<h2 id="æ™®é€šæ··åˆ"><a href="#æ™®é€šæ··åˆ" class="headerlink" title="æ™®é€šæ··åˆ"></a>æ™®é€šæ··åˆ</h2><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ··åˆ</span></span><br><span class="line"><span class="selector-class">.border</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="selector-class">.border</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-class">.border</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸å¸¦å‚æ•°çš„æ··åˆ"><a href="#ä¸å¸¦å‚æ•°çš„æ··åˆ" class="headerlink" title="ä¸å¸¦å‚æ•°çš„æ··åˆ"></a>ä¸å¸¦å‚æ•°çš„æ··åˆ</h2><ul>
<li>ä»ä¸Šé¢çš„ä»£ç å‘ç°ï¼Œæ··åˆä¹Ÿè¢«ç¼–è¯‘è¾“å‡ºäº†</li>
<li>åœ¨æ··åˆåå­—ååŠ ä¸Šæ‹¬å·ï¼Œç¼–è¯‘åä¸å†è¾“å‡º</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ æ‹¬å·ä½†ä¸å¸¦å‚æ•°çš„æ··åˆ</span></span><br><span class="line"><span class="selector-class">.border</span>() &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="selector-class">.border</span>;  <span class="comment">//åŠ ä¸åŠ æ‹¬å·éƒ½å¯ä»¥</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> black;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¸¦å‚æ•°çš„æ··åˆ"><a href="#å¸¦å‚æ•°çš„æ··åˆ" class="headerlink" title="å¸¦å‚æ•°çš„æ··åˆ"></a>å¸¦å‚æ•°çš„æ··åˆ</h2><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¸¦å‚æ•°çš„æ··åˆ</span></span><br><span class="line"><span class="selector-class">.border</span>(<span class="variable">@color</span>) &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="number">#fff</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> <span class="number">#ffffff</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¸¦å‚æ•°ä¸”æœ‰é»˜è®¤å€¼çš„æ··åˆ"><a href="#å¸¦å‚æ•°ä¸”æœ‰é»˜è®¤å€¼çš„æ··åˆ" class="headerlink" title="å¸¦å‚æ•°ä¸”æœ‰é»˜è®¤å€¼çš„æ··åˆ"></a>å¸¦å‚æ•°ä¸”æœ‰é»˜è®¤å€¼çš„æ··åˆ</h2><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¸¦å‚æ•°ä¸”æœ‰é»˜è®¤å€¼çš„æ··åˆ</span></span><br><span class="line"><span class="selector-class">.border</span>(<span class="variable">@color</span>: <span class="number">#fff</span>) &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="selector-class">.border</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="selector-class">.border</span>(<span class="number">#000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> <span class="number">#ffffff</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#menu</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: solid <span class="number">1px</span> <span class="number">#000000</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: solid <span class="number">2px</span> <span class="number">#000000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¸¦å¤šä¸ªå‚æ•°"><a href="#å¸¦å¤šä¸ªå‚æ•°" class="headerlink" title="å¸¦å¤šä¸ªå‚æ•°"></a>å¸¦å¤šä¸ªå‚æ•°</h2><ul>
<li>å¤šä¸ªå‚æ•°æ—¶ï¼Œå‚æ•°ä¹‹é—´å¯ä»¥ç”¨åˆ†å·æˆ–é€—å·åˆ†éš”</li>
<li>æ³¨æ„é€—å·åˆ†éš”çš„æ˜¯â€œå„ä¸ªå‚æ•°â€è¿˜æ˜¯â€œæŸä¸ªåˆ—è¡¨ç±»å‹çš„å‚æ•°â€<ul>
<li>ä¸¤ä¸ªå‚æ•°ï¼Œå¹¶ä¸”æ¯ä¸ªå‚æ•°éƒ½æ˜¯é€—å·åˆ†éš”çš„åˆ—è¡¨ï¼š.name(1,2,3; something, ele)</li>
<li>ä¸‰ä¸ªå‚æ•°ï¼Œå¹¶ä¸”æ¯ä¸ªå‚æ•°éƒ½åŒ…å«ä¸€ä¸ªæ•°å­—ï¼š.name(1,2,3)</li>
<li>ä½¿ç”¨åˆ†å·ï¼Œè°ƒç”¨åŒ…å«ä¸€ä¸ªé€—å·åˆ†å‰²çš„cssåˆ—è¡¨ï¼ˆä¸€ä¸ªå‚æ•°ï¼‰ï¼š .name(1,2,3; )</li>
<li>é€—å·åˆ†å‰²é»˜è®¤å€¼ï¼ˆä¸¤ä¸ªå‚æ•°ï¼‰ï¼š.name(@param1:red, blue)</li>
</ul>
</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//lessç¼–å†™</span></span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>, <span class="variable">@padding</span>: xxx, <span class="variable">@margin</span>: <span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">color-3</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">padding-3</span>: <span class="variable">@padding</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@margin</span> <span class="variable">@margin</span> <span class="variable">@margin</span> <span class="variable">@margin</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.div</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>; something, ele);  <span class="comment">//2ä¸ªå‚æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div1</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);                  <span class="comment">//3ä¸ªå‚æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>; );                <span class="comment">//1ä¸ªå‚æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.div</span> &#123;</span><br><span class="line">  <span class="attribute">color-3</span>: <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">padding-3</span>: something, ele;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div1</span> &#123;</span><br><span class="line">  <span class="attribute">color-3</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">padding-3</span>: <span class="number">2</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">3</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="attribute">color-3</span>: <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>;</span><br><span class="line">  <span class="attribute">padding-3</span>: xxx;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å®šä¹‰å¤šä¸ªç›¸åŒåç§°çš„æ··åˆ"><a href="#å®šä¹‰å¤šä¸ªç›¸åŒåç§°çš„æ··åˆ" class="headerlink" title="å®šä¹‰å¤šä¸ªç›¸åŒåç§°çš„æ··åˆ"></a>å®šä¹‰å¤šä¸ªç›¸åŒåç§°çš„æ··åˆ</h2><ul>
<li>lessä¼šæ ¹æ®å‚æ•°è¿›è¡Œè°ƒç”¨ç›¸åº”çš„æ··åˆ</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>) &#123;</span><br><span class="line">  <span class="attribute">color-1</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>; <span class="variable">@padding</span>: <span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">color-2</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">padding-2</span>: <span class="variable">@padding</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>; <span class="variable">@padding</span>: <span class="number">3</span>; <span class="variable">@margin</span>) &#123;</span><br><span class="line">  <span class="attribute">color-3</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">padding-3</span>: <span class="variable">@padding</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@margin</span> <span class="variable">@margin</span> <span class="variable">@margin</span> <span class="variable">@margin</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.some</span> <span class="selector-class">.selector</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#008000</span>); <span class="comment">//ç¬¬äºŒä¸ªmixinsä¹Ÿè¢«è°ƒç”¨äº†ï¼Œå› ä¸º @padding æœ‰é»˜è®¤å€¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.some</span> <span class="selector-class">.selector</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#008000</span>, <span class="number">5</span>); <span class="comment">//åªæœ‰ç¬¬äºŒä¸ªmixinsè¢«è°ƒç”¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-class">.some</span> <span class="selector-class">.selector</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">color-1</span>: <span class="number">#008000</span>;</span><br><span class="line">  <span class="attribute">color-2</span>: <span class="number">#008000</span>;</span><br><span class="line">  <span class="attribute">padding-2</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.some</span> <span class="selector-class">.selector</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">color-2</span>: <span class="number">#008000</span>;</span><br><span class="line">  <span class="attribute">padding-2</span>: <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å‘½åå‚æ•°"><a href="#å‘½åå‚æ•°" class="headerlink" title="å‘½åå‚æ•°"></a>å‘½åå‚æ•°</h2><ul>
<li>å¼•ç”¨mixinæ—¶å¯ä»¥é€šè¿‡å‚æ•°åç§°è€Œä¸æ˜¯å‚æ•°çš„ä½ç½®æ¥ä¸ºmixinæä¾›å‚æ•°å€¼ï¼Œä»»ä½•å‚æ•°éƒ½é€šè¿‡åç§°æ¥å¼•ç”¨ï¼Œè¿™æ ·å°±ä¸å¿…æŒ‰ç…§ç‰¹å®šçš„é¡ºåºæ¥ä½¿ç”¨å‚æ•°</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@color</span>: black; <span class="variable">@margin</span>: <span class="number">10px</span>; <span class="variable">@padding</span>: <span class="number">20px</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="variable">@margin</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="variable">@padding</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="variable">@margin</span>:<span class="number">20</span>; <span class="variable">@color</span>: <span class="number">#33acfe</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#efca44</span>; <span class="variable">@padding</span>: <span class="number">40px</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#33acfe</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#efca44</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="argumentså˜é‡"><a href="#argumentså˜é‡" class="headerlink" title="@argumentså˜é‡"></a>@argumentså˜é‡</h2><ul>
<li>@argumentsè¡¨ç¤ºæ‰€æœ‰å¯å˜å‚æ•°</li>
<li>å‚æ•°çš„å…ˆåé¡ºåºå°±æ˜¯æ‹¬å·å†…çš„é¡ºåº ï¼Œåœ¨èµ‹å€¼æ—¶ï¼Œå€¼çš„ä½ç½®å’Œä¸ªæ•°ä¹Ÿæ˜¯ä¸€ä¸€å¯¹åº”çš„</li>
<li>åªæœ‰ä¸€ä¸ªå€¼ï¼ŒæŠŠå€¼èµ‹ç»™ç¬¬ä¸€ä¸ªï¼Œä¸¤ä¸ªå€¼ï¼Œèµ‹ç»™ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªâ€¦â€¦</li>
<li>è‹¥æƒ³èµ‹ç»™ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªï¼Œå¿…é¡»æŠŠç¬¬äºŒä¸ªå‚æ•°çš„é»˜è®¤å€¼å†™ä¸Š</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.border</span>(<span class="variable">@x</span>: solid, <span class="variable">@c</span>: red) &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">21px</span> <span class="variable">@arguments</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div1</span> &#123;</span><br><span class="line">  <span class="selector-class">.border</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="selector-class">.border</span>(solid, black)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.div1</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">21px</span> solid <span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div2</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">21px</span> solid <span class="number">#000000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="åŒ¹é…æ¨¡å¼"><a href="#åŒ¹é…æ¨¡å¼" class="headerlink" title="åŒ¹é…æ¨¡å¼"></a>åŒ¹é…æ¨¡å¼</h2><ul>
<li>è‡ªå®šä¹‰ä¸€ä¸ªå­—ç¬¦ï¼Œä½¿ç”¨æ—¶åŠ ä¸Šé‚£ä¸ªå­—ç¬¦ï¼Œå°±è°ƒç”¨ç›¸åº”çš„è§„åˆ™</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.border</span>(all, <span class="variable">@w</span>: <span class="number">5px</span>) &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="variable">@w</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border</span>(t_l, <span class="variable">@w</span>: <span class="number">5px</span>) &#123;</span><br><span class="line">  <span class="attribute">border-top-left-radius</span>: <span class="variable">@w</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border</span>(b_l, <span class="variable">@w</span>: <span class="number">5px</span>) &#123;</span><br><span class="line">  <span class="attribute">border-bottom-left-radius</span>: <span class="variable">@w</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border</span>(b_r, <span class="variable">@w</span>: <span class="number">5px</span>) &#123;</span><br><span class="line">  <span class="attribute">border-bottom-right-radius</span>: <span class="variable">@w</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.border</span> &#123;</span><br><span class="line">  <span class="selector-class">.border</span>(all, <span class="number">50%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-class">.border</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¾—åˆ°æ··åˆä¸­å˜é‡çš„è¿”å›å€¼"><a href="#å¾—åˆ°æ··åˆä¸­å˜é‡çš„è¿”å›å€¼" class="headerlink" title="å¾—åˆ°æ··åˆä¸­å˜é‡çš„è¿”å›å€¼"></a>å¾—åˆ°æ··åˆä¸­å˜é‡çš„è¿”å›å€¼</h2><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.average</span>(<span class="variable">@x</span>, <span class="variable">@y</span>) &#123;</span><br><span class="line">  <span class="variable">@average</span>((<span class="variable">@x</span> + <span class="variable">@y</span>)/<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="selector-class">.average</span>(<span class="number">16px</span>, <span class="number">50px</span>);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="variable">@average</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">33px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1ã€å°†16px å’Œ 50px èµ‹å€¼ç»™æ··åˆ .averageè¿›è¡Œè®¡ç®—</span></span><br><span class="line"><span class="comment">2ã€è®¡ç®—ç»“æœèµ‹å€¼ç»™å˜é‡ @average</span></span><br><span class="line"><span class="comment">3ã€ç„¶ååœ¨divä¸­è°ƒç”¨@averageçš„å€¼</span></span><br><span class="line"><span class="comment">4ã€ç¼–è¯‘åå°±å¾—åˆ°äº†averageçš„å€¼33px</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h1 id="è¿ç®—"><a href="#è¿ç®—" class="headerlink" title="è¿ç®—"></a>è¿ç®—</h1><ul>
<li>ä»»ä½•æ•°å€¼ã€é¢œè‰²å€¼å’Œå˜é‡éƒ½å¯ä»¥è¿›è¡Œè¿ç®—</li>
</ul>
<h2 id="æ•°å€¼ç±»è¿ç®—"><a href="#æ•°å€¼ç±»è¿ç®—" class="headerlink" title="æ•°å€¼ç±»è¿ç®—"></a>æ•°å€¼ç±»è¿ç®—</h2><ul>
<li>lessä¼šè‡ªåŠ¨æ¨ç®—æ•°å€¼çš„å•ä½ï¼Œä¸å¿…æ¯ä¸ªå€¼éƒ½åŠ ä¸Šå•ä½</li>
<li>è¿ç®—ç¬¦ä¹‹é—´å¿…é¡»ä»¥ç©ºæ ¼åˆ†å¼€ï¼Œå­˜åœ¨ä¼˜å…ˆçº§é—®é¢˜æ—¶æ³¨æ„ä½¿ç”¨æ‹¬å·</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wp</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: (<span class="number">450px</span> - <span class="number">50</span>)*<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.wp</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">900px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é¢œè‰²å€¼è¿ç®—"><a href="#é¢œè‰²å€¼è¿ç®—" class="headerlink" title="é¢œè‰²å€¼è¿ç®—"></a>é¢œè‰²å€¼è¿ç®—</h2><ul>
<li>å…ˆå°†é¢œè‰²å€¼è½¬æ¢ä¸ºrgbæ¨¡å¼ï¼Œè¿ç®—å®Œåå†è½¬æ¢ä¸º16è¿›åˆ¶çš„é¢œè‰²å€¼å¹¶è¿”å›</li>
<li>æ³¨æ„ï¼šå–å€¼ä¸º0-255ï¼Œæ‰€ä»¥è®¡ç®—æ—¶ä¸èƒ½è¶…è¿‡è¿™ä¸ªåŒºé—´ï¼Œè¶…è¿‡é»˜è®¤ä½¿ç”¨0æˆ–255</li>
<li>æ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨é¢œè‰²åç›´æ¥è¿ç®—</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000000</span> + <span class="number">8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//rgb(0,0,0) + 8</span></span><br><span class="line"><span class="comment">//rgb(8,8,8)</span></span><br><span class="line"><span class="comment">//åå…­è¿›åˆ¶ï¼š#080808</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#080808</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h1><ul>
<li>æœ‰æ—¶æ··åˆä¸­åµŒå¥—äº†æ¯”è¾ƒå¤šçš„è§„åˆ™ï¼Œè€Œæˆ‘ä»¬åªéœ€è¦å…¶ä¸­ä¸€éƒ¨åˆ†ï¼Œå¯ä½¿ç”¨å‘½åç©ºé—´è·å–</li>
</ul>
<h2 id="ä½¿ç”¨-â€œ-gt-â€-ç¬¦å·"><a href="#ä½¿ç”¨-â€œ-gt-â€-ç¬¦å·" class="headerlink" title="ä½¿ç”¨ â€œ&gt;â€ ç¬¦å·"></a>ä½¿ç”¨ â€œ&gt;â€ ç¬¦å·</h2><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ··åˆé›†</span></span><br><span class="line"><span class="selector-id">#bgcolor</span>() &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="selector-class">.a</span>() &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#888</span>;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.b</span>() &#123;</span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#ff0000</span>;</span><br><span class="line">    &#125;    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bgcolor1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fdfee0</span>;</span><br><span class="line">  <span class="selector-id">#bgcolor</span>&gt;<span class="selector-class">.a</span>;     <span class="comment">//åªä½¿ç”¨.a()</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor2</span> &#123;</span><br><span class="line">  <span class="selector-id">#bgcolor</span>&gt;<span class="selector-class">.a</span>&gt;<span class="selector-class">.b</span>;  <span class="comment">//åªä½¿ç”¨.b()</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.bgcolor1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fdfee0</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#888</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor1</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor2</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="çœç•¥-â€œ-gt-â€ï¼Œæ¢æˆç©ºæ ¼"><a href="#çœç•¥-â€œ-gt-â€ï¼Œæ¢æˆç©ºæ ¼" class="headerlink" title="çœç•¥ â€œ&gt;â€ï¼Œæ¢æˆç©ºæ ¼"></a>çœç•¥ â€œ&gt;â€ï¼Œæ¢æˆç©ºæ ¼</h2><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ··åˆé›†</span></span><br><span class="line"><span class="selector-id">#bgcolor</span>() &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="selector-class">.a</span>() &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#888</span>;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.b</span>() &#123;</span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#ff0000</span>;</span><br><span class="line">    &#125;    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bgcolor1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fdfee0</span>;</span><br><span class="line">  <span class="selector-id">#bgcolor</span> <span class="selector-class">.a</span>;     <span class="comment">//åªä½¿ç”¨.a()</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor2</span> &#123;</span><br><span class="line">  <span class="selector-id">#bgcolor</span> <span class="selector-class">.a</span> <span class="selector-class">.b</span>;  <span class="comment">//åªä½¿ç”¨.b()</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.bgcolor1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fdfee0</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#888</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor1</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bgcolor2</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#ff0000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h1><ul>
<li>å¼•å…¥ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å®šä¹‰çš„è§„åˆ™å¯åœ¨å½“å‰lessæ–‡ä»¶ä¸­ä½¿ç”¨</li>
<li>ä½¿ç”¨@import</li>
</ul>
<h2 id="å¼•å…¥lessæ–‡ä»¶"><a href="#å¼•å…¥lessæ–‡ä»¶" class="headerlink" title="å¼•å…¥lessæ–‡ä»¶"></a>å¼•å…¥lessæ–‡ä»¶</h2><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//main.less</span></span><br><span class="line"><span class="variable">@wp:</span> <span class="number">960px</span>;</span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“å‰lessæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">"main"</span>; <span class="comment">//å¯ä»¥ä¸åŠ åç¼€</span></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@wp</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¼•å…¥cssæ–‡ä»¶"><a href="#å¼•å…¥cssæ–‡ä»¶" class="headerlink" title="å¼•å…¥cssæ–‡ä»¶"></a>å¼•å…¥cssæ–‡ä»¶</h2><ul>
<li>æ³¨æ„ï¼šä¸èƒ½æ··åˆcssçš„è§„åˆ™åˆ°é¡¹ç›®ä¸­ï¼Œç¼–è¯‘ååŸæ ·è¾“å‡ºâ€œ@import xxx.cssâ€</li>
<li>å¹¶ä¸”å¼•å…¥æ—¶ä¸èƒ½çœç•¥åç¼€å</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//main.css</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">"main.css"</span> ;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@wp</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="variable">@wp</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">"main.css"</span>;  <span class="comment">//åŸæ ·è¾“å‡º,ä½†æœ‰æ•ˆï¼Œcssæœ‰è¿™æ¡è¯­å¥</span></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">960px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¸¦å‚æ•°çš„å¼•å…¥"><a href="#å¸¦å‚æ•°çš„å¼•å…¥" class="headerlink" title="å¸¦å‚æ•°çš„å¼•å…¥"></a>å¸¦å‚æ•°çš„å¼•å…¥</h2><ul>
<li>onceï¼šé»˜è®¤ï¼Œåªå¼•å…¥ä¸€æ¬¡</li>
<li>referenceï¼šä½¿ç”¨lessæ–‡ä»¶ä½†ä¸è¾“å‡ºï¼Œæ³¨æ„å¯¹æ¯”ä¸Šé¢çš„ä¾‹å­ï¼ˆ ä¸ä½¿ç”¨ä¼šè¾“å‡ºæ²¡æœ‰åŠ æ‹¬å·çš„æ··åˆï¼‰</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@wp:</span> <span class="number">960px</span>;</span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“å‰lessæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">@import</span> (reference) <span class="string">"main"</span>;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@wp</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>inlineï¼šåœ¨è¾“å‡ºä¸­åŒ…å«lessæ–‡ä»¶ä½†æ˜¯ä¸èƒ½æ“ä½œ</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@wp:</span> <span class="number">960px</span>;</span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“å‰lessæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">@import</span> (inline) <span class="string">"main"</span>; </span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@wp</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="variable">@wp:</span> <span class="number">960px</span>;    <span class="comment">//æŠ¥é”™ï¼Œ@wpæœªçŸ¥</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>lessï¼šå°†æ–‡ä»¶ä½œä¸ºlessæ–‡ä»¶å¯¹è±¡ï¼Œæ— è®ºä»€ä¹ˆæ–‡ä»¶æ‰©å±•å</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//main.cssæ–‡ä»¶</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“å‰less</span></span><br><span class="line"><span class="keyword">@import</span> (less) <span class="string">"main.css"</span>;</span><br><span class="line">  <span class="selector-class">.content</span> &#123;</span><br><span class="line"><span class="selector-class">.color</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ff6600</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>cssï¼šå°†æ–‡ä»¶ä½œä¸ºcssæ–‡ä»¶å¯¹è±¡ï¼Œæ— è®ºä»€ä¹ˆæ–‡ä»¶æ‰©å±•å</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å½“å‰lessæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">@import</span> (css) <span class="string">"main.less"</span>;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">"main.less"</span>;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>multipleï¼šå…è®¸å¼•å…¥å¤šæ¬¡ç›¸åŒæ–‡ä»¶åçš„æ–‡ä»¶</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å½“å‰less</span></span><br><span class="line"><span class="keyword">@import</span> (multiple) <span class="string">"main.less"</span>;</span><br><span class="line"><span class="keyword">@import</span> (multiple) <span class="string">"main.less"</span>;</span><br><span class="line"><span class="keyword">@import</span> (multiple) <span class="string">"main.less"</span>;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@wp</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="important"><a href="#important" class="headerlink" title="!important"></a>!important</h1><ul>
<li>æå‡æƒé‡ä¼˜å…ˆçº§ä¸ºæœ€é«˜ï¼ˆå°½é‡é¿å…ä½¿ç”¨ï¼‰</li>
<li>åœ¨è°ƒç”¨çš„æ··åˆé›†åé¢è¿½åŠ  !important å…³é”®å­—ï¼Œæ··åˆé›†ä¸­æ‰€æœ‰å±æ€§éƒ½ç»§æ‰¿<code>!important</code></li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.foo</span>(<span class="variable">@bg</span>: <span class="number">#fdfdfd</span>, <span class="variable">@color</span>: <span class="number">#900</span>) &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="variable">@bg</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.important</span> &#123;</span><br><span class="line">  <span class="selector-class">.foo</span>() !important</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.important</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fdfdfd</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#990000</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ¡ä»¶è¡¨è¾¾å¼"><a href="#æ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="æ¡ä»¶è¡¨è¾¾å¼"></a>æ¡ä»¶è¡¨è¾¾å¼</h1><h2 id="å¸¦æ¡ä»¶çš„æ··åˆ"><a href="#å¸¦æ¡ä»¶çš„æ··åˆ" class="headerlink" title="å¸¦æ¡ä»¶çš„æ··åˆ"></a>å¸¦æ¡ä»¶çš„æ··åˆ</h2><ul>
<li>æ¯”è¾ƒè¿ç®—ç¬¦ï¼š&gt;, &gt;=, =, =&lt;, &lt;</li>
<li>æ ¼å¼ï¼šwhen() { }</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">// lightness() æ˜¯æ£€æµ‹äº®åº¦çš„å‡½æ•°ï¼Œç”¨%åº¦é‡</span></span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span>(lightness(<span class="variable">@a</span>) &gt;= <span class="number">50%</span> ) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span>(lightness(<span class="variable">@a</span>) &lt; <span class="number">50%</span> ) &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@a</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#ddd</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">#555</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#dddddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#555555</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç±»å‹æ£€æµ‹å‡½æ•°"><a href="#ç±»å‹æ£€æµ‹å‡½æ•°" class="headerlink" title="ç±»å‹æ£€æµ‹å‡½æ•°"></a>ç±»å‹æ£€æµ‹å‡½æ•°</h2><ul>
<li>æ£€æµ‹å€¼çš„ç±»å‹<ul>
<li>iscolor</li>
<li>isnumber</li>
<li>isstring</li>
<li>iskeyword</li>
<li>isurl</li>
</ul>
</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>: <span class="number">#fff</span>; <span class="variable">@b</span>: <span class="number">0</span>) <span class="keyword">when</span>(isnumber(<span class="variable">@b</span>)) &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@a</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="variable">@b</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>; <span class="variable">@b</span>: black) <span class="keyword">when</span>(iscolor(<span class="variable">@b</span>)) &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="variable">@a</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@b</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å•ä½æ£€æµ‹å‡½æ•°"><a href="#å•ä½æ£€æµ‹å‡½æ•°" class="headerlink" title="å•ä½æ£€æµ‹å‡½æ•°"></a>å•ä½æ£€æµ‹å‡½æ•°</h2><ul>
<li>æ£€æµ‹ä¸€ä¸ªå€¼é™¤äº†æ•°å­—æ˜¯å¦æ˜¯ä¸€ä¸ªç‰¹å®šçš„å•ä½<ul>
<li>ispixel</li>
<li>ispercentage</li>
<li>isem</li>
<li>isunit</li>
</ul>
</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span>(ispixel(<span class="variable">@a</span>)) &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@a</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.mixin</span>(<span class="variable">@a</span>) <span class="keyword">when</span>(ispercentage(<span class="variable">@a</span>)) &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">960px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>(<span class="number">95%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.class1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">960px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">95%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h1><ul>
<li>æ··åˆå¯ä»¥è°ƒç”¨è‡ªèº«ï¼Œå½“ä¸€ä¸ªæ··åˆé€’å½’è°ƒç”¨è‡ªèº«å°±æ„æˆå¾ªç¯ç»“æ„</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.loop</span>(<span class="variable">@counter</span>) <span class="keyword">when</span>(<span class="variable">@counter</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="selector-class">.h</span><span class="variable">@&#123;counter&#125;</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: (<span class="number">10px</span>*<span class="variable">@counter</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.loop</span>((<span class="variable">@counter</span> - <span class="number">1</span>)); <span class="comment">//é€’å½’è°ƒç”¨è‡ªèº«</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="selector-class">.loop</span>(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-class">.h5</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-class">.h4</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-class">.h3</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-class">.h2</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span> <span class="selector-class">.h1</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="åˆå¹¶å±æ€§"><a href="#åˆå¹¶å±æ€§" class="headerlink" title="åˆå¹¶å±æ€§"></a>åˆå¹¶å±æ€§</h1><ul>
<li>å°†å¤šæ¡è§„åˆ™åˆå¹¶ä¸ºä¸€æ¡</li>
</ul>
<h2 id="æ–¹å¼ä¸€"><a href="#æ–¹å¼ä¸€" class="headerlink" title="æ–¹å¼ä¸€"></a>æ–¹å¼ä¸€</h2><ul>
<li>åœ¨éœ€è¦åˆå¹¶çš„å±æ€§çš„å†’å·ä¹‹å‰åŠ ä¸Š â€œ+â€ï¼Œåˆå¹¶åç”¨é€—å·åˆ†éš”</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">  <span class="selector-tag">box-shadow</span>+: <span class="selector-tag">inset</span> <span class="selector-tag">0</span> <span class="selector-tag">0</span> <span class="selector-tag">10px</span> <span class="selector-id">#555</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>;</span><br><span class="line">  <span class="selector-tag">box-shadow</span>+: <span class="selector-tag">0</span> <span class="selector-tag">0</span> <span class="selector-tag">20px</span> <span class="selector-tag">black</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.myclass</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#555</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> black; <span class="comment">//é€—å·åˆ†éš”ä¸¤ä¸ªå±æ€§å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹å¼äºŒ"><a href="#æ–¹å¼äºŒ" class="headerlink" title="æ–¹å¼äºŒ"></a>æ–¹å¼äºŒ</h2><ul>
<li>åœ¨éœ€è¦åˆå¹¶çš„å±æ€§çš„å†’å·ä¹‹å‰åŠ ä¸Š â€œ+_â€ï¼Œåˆå¹¶ç”¨ç©ºæ ¼åˆ†éš”</li>
</ul>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">  <span class="selector-tag">background</span>+<span class="selector-tag">_</span>: <span class="selector-id">#f66</span>;</span><br><span class="line">  <span class="selector-tag">background</span>+<span class="selector-tag">_</span>: <span class="selector-tag">url</span>(<span class="string">"/sss.jpg"</span>) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f66</span> url(<span class="string">"/sss.jpg"</span>); <span class="comment">//ç©ºæ ¼åˆ†éš”</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸¤ç§æ–¹å¼ç»“åˆ"><a href="#ä¸¤ç§æ–¹å¼ç»“åˆ" class="headerlink" title="ä¸¤ç§æ–¹å¼ç»“åˆ"></a>ä¸¤ç§æ–¹å¼ç»“åˆ</h2><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.mixin</span>() &#123;</span><br><span class="line">  <span class="selector-tag">background</span>+<span class="selector-tag">_</span>: <span class="selector-id">#f66</span>;</span><br><span class="line">  <span class="selector-tag">background</span>+: <span class="selector-tag">url</span>(<span class="string">"/sss.jpg"</span>);</span><br><span class="line">  <span class="selector-tag">background</span>+<span class="selector-tag">_</span>: <span class="selector-tag">no-repeat</span>;</span><br><span class="line">  <span class="selector-tag">background</span>+: <span class="selector-tag">center</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="selector-class">.mixin</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–è¯‘è¾“å‡º</span></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f66</span>, url(<span class="string">"/sss.jpg"</span>)  no-repeat, center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å‡½æ•°åº“"><a href="#å‡½æ•°åº“" class="headerlink" title="å‡½æ•°åº“"></a>å‡½æ•°åº“</h1><ul>
<li>lessä¸­å°è£…äº†éå¸¸å¤šå‡½æ•°åº“ï¼Œä¾‹å¦‚é¢œè‰²å®šä¹‰ã€é¢œè‰²æ“ä½œã€é¢œè‰²æ··åˆã€å­—ç¬¦ä¸²å¤„ç†ç­‰ç­‰</li>
<li>ä¾‹å¦‚color()ï¼šç”¨äºè§£æé¢œè‰²ï¼Œå°†ä»£è¡¨é¢œè‰²çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºé¢œè‰²å€¼</li>
</ul>
<p>æ›´å¤šå‚è€ƒï¼š<a href="https://less.bootcss.com/functions/#functions-overview" target="_blank" rel="noopener">https://less.bootcss.com/functions/#functions-overview</a></p>
<h1 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h1><p>LESS ä¸­çš„ä½œç”¨åŸŸè·Ÿå…¶ä»–ç¼–ç¨‹è¯­è¨€éå¸¸ç±»ä¼¼ï¼Œé¦–å…ˆä¼šä»æœ¬åœ°æŸ¥æ‰¾å˜é‡æˆ–è€…æ··åˆæ¨¡å—ï¼Œå¦‚æœæ²¡æ‰¾åˆ°çš„è¯ä¼šå»çˆ¶çº§ä½œç”¨åŸŸä¸­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢.</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@var:</span> red;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#page</span> &#123;</span><br><span class="line">  <span class="variable">@var:</span> white;</span><br><span class="line">  <span class="selector-id">#header</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">@var</span>; <span class="comment">// white</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@var</span>; <span class="comment">// red  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é¿å…ç¼–è¯‘"><a href="#é¿å…ç¼–è¯‘" class="headerlink" title="é¿å…ç¼–è¯‘"></a>é¿å…ç¼–è¯‘</h1><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è¾“å‡ºä¸€äº›ä¸æ­£ç¡®çš„CSSè¯­æ³•æˆ–è€…ä½¿ç”¨ä¸€äº› LESSä¸è®¤è¯†çš„ä¸“æœ‰è¯­æ³•.</p>
<p>è¦è¾“å‡ºè¿™æ ·çš„å€¼æˆ‘ä»¬å¯ä»¥åœ¨å­—ç¬¦ä¸²å‰åŠ ä¸Šä¸€ä¸ª <code>~</code>, ä¾‹å¦‚:</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="string">~"ms:alwaysHasItsOwnSyntax.For.Stuff()"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//output</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.class</span> &#123;</span><br><span class="line">  <span class="attribute">filter</span>: <span class="attribute">ms</span>:alwaysHasItsOwnSyntax.For.Stuff();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h1><ul>
<li><code>/**/</code> å¯ä»¥ä½¿ç”¨ï¼Œä¼šè¢«ç¼–è¯‘</li>
<li><code>//</code> å¯ä»¥ä½¿ç”¨ï¼Œä½†ä¸ä¼šè¢«ç¼–è¯‘åˆ°cssä¸­ï¼Œä¼šè‡ªåŠ¨è¿‡æ»¤æ‰ã€‚</li>
<li><code>less</code>ä¸è®¤è¯†çš„å†…å®¹ ä¸ä¼šè¢«ç¼–è¯‘</li>
</ul>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://www.html.cn/doc/less/features/" target="_blank" rel="noopener">https://www.html.cn/doc/less/features/</a></p>
<p><a href="http://www.bootcss.com/p/lesscss/#guide" target="_blank" rel="noopener">http://www.bootcss.com/p/lesscss/#guide</a></p>
<p><a href="https://www.jianshu.com/p/15ed47ff8b06" target="_blank" rel="noopener">https://www.jianshu.com/p/15ed47ff8b06</a></p>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>Less</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidæ··æ·†(Proguard)è¯¦è§£</title>
    <url>/2019/04/12/Android%E6%B7%B7%E6%B7%86-Proguard-%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="æ··æ·†çš„ä½œç”¨åŠå¥½å¤„"><a href="#æ··æ·†çš„ä½œç”¨åŠå¥½å¤„" class="headerlink" title="æ··æ·†çš„ä½œç”¨åŠå¥½å¤„"></a>æ··æ·†çš„ä½œç”¨åŠå¥½å¤„</h1><p>æ··æ·†å±äºæ•´ä¸ªåº”ç”¨ç¨‹åºå¼€å‘ç”Ÿå‘½å‘¨æœŸååæœŸé˜¶æ®µçš„æŠ€æœ¯äº†ï¼Œæ‰€ä»¥è¦è€ƒè™‘åº”ç”¨çš„å®‰å…¨æ€§åŠæ€§èƒ½çš„é—®é¢˜ï¼Œæ··æ·†å°±æ˜¯ä¸ºäº†è¿™ç§éœ€æ±‚äº§ç”Ÿçš„ä¸€ç§æŠ€æœ¯ï¼Œç®€å•è¯´ï¼Œæ··æ·†å°±æ˜¯å°†å…³é”®å­—å’Œå…³é”®ç±»åï¼Œä¿®æ”¹ä¸ºæ— æ„ä¹‰çš„å­—ç¬¦ä»¥èµ·åˆ°è¿·æƒ‘è¯•å›¾åç¼–è¯‘å»æŸ¥çœ‹æºç çš„äººã€‚åœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½è¿‡æ»¤æ‰ä¸€äº›å…¥é—¨åç¼–è¯‘è€…ï¼Œæ··æ·†æ˜¯ä¿éšœAndroidç¨‹åºæºç å®‰å…¨çš„ç¬¬ä¸€é“é—¨æ§›ï¼Œ<br>ä»¥ä¸Šè°ˆäº†ä¸‹æ··æ·†çš„ä½œç”¨ï¼Œè€Œæ··æ·†çš„å¥½å¤„é™¤äº†èƒ½ä¿è¯æºç å®‰å…¨æ€§ä¹‹å¤–å°±å¤§æ¦‚æ˜¯é€šè¿‡ä¿®æ”¹å…³é”®å­—ä¸ºæ— æ„ä¹‰å­—ç¬¦ä¸²ï¼Œæˆ–è€…å‰”é™¤æŸäº›è¾…åŠ©ç±»ï¼Œæ¯”å¦‚Logï¼Œä»è€Œå‡å°‘æ–‡ä»¶å¤§å°ã€‚</p>
<a id="more"></a>
<h1 id="æ··æ·†çš„åŸç†"><a href="#æ··æ·†çš„åŸç†" class="headerlink" title="æ··æ·†çš„åŸç†"></a>æ··æ·†çš„åŸç†</h1><p><a href="https://www.guardsquare.com/en/products/proguard" target="_blank" rel="noopener">proguardå®˜ç½‘</a></p>
<p>Java æ˜¯ä¸€ç§è·¨å¹³å°çš„ã€è§£é‡Šå‹è¯­è¨€ï¼ŒJava æºä»£ç ç¼–è¯‘æˆä¸­é—´â€å­—èŠ‚ç â€å­˜å‚¨äº class æ–‡ä»¶ä¸­ã€‚ç”±äºè·¨å¹³å°çš„éœ€è¦ï¼ŒJava   å­—èŠ‚ç ä¸­åŒ…æ‹¬äº†å¾ˆå¤šæºä»£ç ä¿¡æ¯ï¼Œå¦‚å˜é‡åã€æ–¹æ³•åï¼Œå¹¶ä¸”é€šè¿‡è¿™äº›åç§°æ¥è®¿é—®å˜é‡å’Œæ–¹æ³•ï¼Œè¿™äº›ç¬¦å·å¸¦æœ‰è®¸å¤šè¯­ä¹‰ä¿¡æ¯ï¼Œå¾ˆå®¹æ˜“è¢«åç¼–è¯‘æˆ Java æºä»£ç ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§ç°è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Java æ··æ·†å™¨å¯¹ Java å­—èŠ‚ç è¿›è¡Œæ··æ·†ã€‚<br>æ··æ·†å°±æ˜¯å¯¹å‘å¸ƒå‡ºå»çš„ç¨‹åºè¿›è¡Œé‡æ–°ç»„ç»‡å’Œå¤„ç†ï¼Œä½¿å¾—å¤„ç†åçš„ä»£ç ä¸å¤„ç†å‰ä»£ç å®Œæˆç›¸åŒçš„åŠŸèƒ½ï¼Œè€Œæ··æ·†åçš„ä»£ç å¾ˆéš¾è¢«åç¼–è¯‘ï¼Œå³ä½¿åç¼–è¯‘æˆåŠŸä¹Ÿå¾ˆéš¾å¾—å‡ºç¨‹åºçš„çœŸæ­£è¯­ä¹‰ã€‚è¢«æ··æ·†è¿‡çš„ç¨‹åºä»£ç ï¼Œä»ç„¶éµç…§åŸæ¥çš„æ¡£æ¡ˆæ ¼å¼å’ŒæŒ‡ä»¤é›†ï¼Œæ‰§è¡Œç»“æœä¹Ÿä¸æ··æ·†å‰ä¸€æ ·ï¼Œåªæ˜¯æ··æ·†å™¨å°†ä»£ç ä¸­çš„æ‰€æœ‰å˜é‡ã€å‡½æ•°ã€ç±»çš„åç§°å˜ä¸ºç®€çŸ­çš„è‹±æ–‡å­—æ¯ä»£å·ï¼Œåœ¨ç¼ºä¹ç›¸åº”çš„å‡½æ•°åå’Œç¨‹åºæ³¨é‡Šçš„å†µä¸‹ï¼Œå³ä½¿è¢«åç¼–è¯‘ï¼Œä¹Ÿå°†éš¾ä»¥é˜…è¯»ã€‚åŒæ—¶æ··æ·†æ˜¯ä¸å¯é€†çš„ï¼Œåœ¨æ··æ·†çš„è¿‡ç¨‹ä¸­ä¸€äº›ä¸å½±å“æ­£å¸¸è¿è¡Œçš„ä¿¡æ¯å°†æ°¸ä¹…ä¸¢å¤±ï¼Œè¿™äº›ä¿¡æ¯çš„ä¸¢å¤±ä½¿ç¨‹åºå˜å¾—æ›´åŠ éš¾ä»¥ç†è§£ã€‚<br>æ··æ·†å™¨çš„ä½œç”¨ä¸ä»…ä»…æ˜¯ä¿æŠ¤ä»£ç ï¼Œå®ƒä¹Ÿæœ‰ç²¾ç®€ç¼–è¯‘åç¨‹åºå¤§å°çš„ä½œç”¨ã€‚ç”±äºä»¥ä¸Šä»‹ç»çš„ç¼©çŸ­å˜é‡å’Œå‡½æ•°åä»¥åŠä¸¢å¤±éƒ¨åˆ†ä¿¡æ¯çš„åŸå› ï¼Œ ç¼–è¯‘å jar æ–‡ä»¶ä½“ç§¯å¤§çº¦èƒ½å‡å°‘25%ï¼Œè¿™å¯¹å½“å‰è´¹ç”¨è¾ƒè´µçš„æ— çº¿ç½‘ç»œä¼ è¾“æ˜¯æœ‰ä¸€å®šæ„ä¹‰çš„ã€‚</p>
<h1 id="æ··æ·†çš„å…·ä½“ä½¿ç”¨"><a href="#æ··æ·†çš„å…·ä½“ä½¿ç”¨" class="headerlink" title="æ··æ·†çš„å…·ä½“ä½¿ç”¨"></a>æ··æ·†çš„å…·ä½“ä½¿ç”¨</h1><p>æ¨¡å—(Module)ä¸‹çš„build.gradleçš„é…ç½®</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">android&#123;</span><br><span class="line">  buildTypes&#123;</span><br><span class="line">    release &#123; </span><br><span class="line">       <span class="comment">// æ˜¯å¦è¿›è¡Œæ··æ·†  </span></span><br><span class="line">       minifyEnabled <span class="keyword">false</span>  </span><br><span class="line">       <span class="comment">// æ··æ·†æ–‡ä»¶çš„ä½ç½®ï¼Œå…¶ä¸­'proguard-android.txt'ä¸ºsdké»˜è®¤çš„æ··æ·†é…ç½®ï¼Œ</span></span><br><span class="line">       <span class="comment">//'proguard-rules.pro' æ˜¯è¯¥æ¨¡å—ä¸‹çš„æ··æ·†é…ç½®</span></span><br><span class="line">       proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span>  </span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ˜¯proguardåœ¨æ¨¡å—ä¸‹build.gradleæ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯ï¼Œå…¶ä¸­<code>proguard-android.txt</code>ä¸ºsdké»˜è®¤çš„æ··æ·†é…ç½®ï¼Œ<code>proguard-rules.pro</code>æ˜¯åœ¨é»˜è®¤é…ç½®çš„åŸºç¡€ä¸Šé’ˆå¯¹æœ¬æ¨¡å—åšå‡ºçš„é’ˆå¯¹æ€§æ··æ·†å¤„ç†ã€‚</p>
<ul>
<li>proguard-android.txt è¿™ä¸ªæ–‡ä»¶æ˜¯ç³»ç»Ÿé»˜è®¤æ··æ·†æ–‡ä»¶ä¸€èˆ¬ä¸éœ€è¦åšä¿®æ”¹</li>
<li>åœ¨ debug ç‰ˆä¸‹ä¹Ÿå¯ä»¥å¼€å¯æ··æ·†åšä¸ºæµ‹è¯•</li>
<li>Gradle 2.2 ä¹‹åï¼ŒdefaultProguardFile æ²¡æœ‰ä½¿ç”¨ SDK ç›®å½•ä¸‹çš„ proguard-android.txtï¼Œè€Œæ˜¯ä½¿ç”¨äº† gradle è‡ªå¸¦çš„ proguard-android.txtï¼Œä¸åŒçš„ gradle ç‰ˆæœ¬å¸¦æœ‰ä¸åŒçš„é»˜è®¤æ··æ·†æ–‡ä»¶ï¼Œæ¯”å¦‚åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ build/intermediates/proguard-files/proguard-android.txt-2.3.3ï¼Œå³ä¸º gradle è‡ªå¸¦çš„æ··æ·†æ–‡ä»¶ã€‚åœ¨ proguard-android.txt-2.3.3 æ–‡ä»¶ä¸­ä¹Ÿå†™æœ‰è¯´æ˜ï¼ŒGradle 2.2 ä¹‹åè‡ªå¸¦æ··æ·†æ–‡ä»¶</li>
</ul>
<blockquote>
<p>æ³¨ï¼šproguard-android.txtçš„ä½ç½®ä½äºandroid-sdk/tools/proguard/proguard-android.txt</p>
</blockquote>
<h1 id="æ··æ·†è§„åˆ™"><a href="#æ··æ·†è§„åˆ™" class="headerlink" title="æ··æ·†è§„åˆ™"></a>æ··æ·†è§„åˆ™</h1><p>è¿™ä¸ªè¯­æ³•çš„ä½œç”¨æ˜¯å®šä¹‰å‡º <strong>ä¸éœ€è¦</strong>æ··æ·†çš„æºä»£ç ï¼Œé‚£ä¹ˆç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨å°†æœªå®šä¹‰çš„éƒ¨åˆ†å…¨éƒ½æ··æ·†ã€‚è€Œå¦‚ä¸‹æ˜¯ä¸éœ€è¦æ··æ·†çš„</p>
<ul>
<li>Android å››å¤§ç»„ä»¶</li>
<li>nativeæ–¹æ³•</li>
<li>Java åå°„ç”¨åˆ°çš„ç±»</li>
<li>è‡ªå®šä¹‰æ§ä»¶</li>
<li>æšä¸¾ç±»</li>
<li>JavaBean</li>
<li>Parcelableã€Serializable åºåˆ—åŒ–ç±»</li>
<li>WebView ä¸ JS äº¤äº’æ‰€ç”¨åˆ°çš„ç±»å’Œæ–¹æ³•</li>
</ul>
<h1 id="æ··æ·†æ­¥éª¤"><a href="#æ··æ·†æ­¥éª¤" class="headerlink" title="æ··æ·†æ­¥éª¤"></a>æ··æ·†æ­¥éª¤</h1><p><img src="proguard.png" alt></p>
<p><strong>proguardåˆ†ä¸º4ä¸ªæ­¥éª¤ï¼š</strong></p>
<ol>
<li>å‹ç¼©ï¼ˆshrinkï¼‰<br>ç§»é™¤æœªä½¿ç”¨çš„ç±»ã€æ–¹æ³•ã€å­—æ®µç­‰ï¼›</li>
<li>ä¼˜åŒ–ï¼ˆoptimizeï¼‰<br>ä¼˜åŒ–å­—èŠ‚ç ã€ç®€åŒ–ä»£ç ç­‰æ“ä½œï¼›</li>
<li>æ··æ·†ï¼ˆobfuscateï¼‰<br>ä½¿ç”¨ç®€çŸ­çš„ã€æ— æ„ä¹‰çš„åç§°é‡å…¨åç±»åã€æ–¹æ³•åã€å­—æ®µç­‰ï¼›</li>
<li>é¢„æ ¡éªŒï¼ˆpreverifyï¼‰<br>ä¸ºclassæ·»åŠ é¢„æ ¡éªŒä¿¡æ¯ã€‚</li>
</ol>
<h1 id="æ··æ·†åŸºæœ¬æŒ‡ä»¤"><a href="#æ··æ·†åŸºæœ¬æŒ‡ä»¤" class="headerlink" title="æ··æ·†åŸºæœ¬æŒ‡ä»¤"></a>æ··æ·†åŸºæœ¬æŒ‡ä»¤</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-dontshrink</span><br><span class="line"># å£°æ˜ä¸è¿›è¡Œå‹ç¼©æ“ä½œï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œé™¤äº†-keepé…ç½®ï¼ˆä¸‹è¯¦ï¼‰çš„ç±»åŠå…¶ç›´æ¥æˆ–é—´æ¥å¼•ç”¨åˆ°çš„ç±»ï¼Œéƒ½ä¼šè¢«ç§»é™¤ã€‚</span><br><span class="line"></span><br><span class="line">#---------------------------------------------- shrink</span><br><span class="line"></span><br><span class="line">-dontoptimize</span><br><span class="line"># ä¸å¯¹classè¿›è¡Œä¼˜åŒ–ï¼Œé»˜è®¤å¼€å¯ä¼˜åŒ–ã€‚</span><br><span class="line"># æ³¨æ„ï¼šç”±äºä¼˜åŒ–ä¼šè¿›è¡Œç±»åˆå¹¶ã€å†…è”ç­‰å¤šç§ä¼˜åŒ–ï¼Œ-applymappingå¯èƒ½æ— æ³•å®Œå…¨åº”ç”¨ï¼Œéœ€ä½¿ç”¨çƒ­ä¿®å¤çš„åº”ç”¨ï¼Œå»ºè®®ä½¿ç”¨æ­¤# é…ç½®å…³é—­ä¼˜åŒ–ã€‚</span><br><span class="line"></span><br><span class="line">-optimizationpasses n</span><br><span class="line"># æ‰§è¡Œä¼˜åŒ–çš„æ¬¡æ•°ï¼Œé»˜è®¤1æ¬¡ï¼Œå¤šæ¬¡èƒ½è¾¾åˆ°æ›´å¥½çš„ä¼˜åŒ–æ•ˆæœã€‚</span><br><span class="line"></span><br><span class="line">-optimizations optimization_filter</span><br><span class="line">ä¼˜åŒ–é…ç½®ï¼Œå¯è¿›è¡Œå­—æ®µä¼˜åŒ–ã€å†…è”ã€ç±»åˆå¹¶ã€ä»£ç ç®€åŒ–ã€ç®—æ³•æŒ‡ä»¤ç²¾ç®€ç­‰æ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">#åªè¿›è¡Œ ç§»é™¤æœªä½¿ç”¨çš„å±€éƒ¨å˜é‡ã€ç®—æ³•æŒ‡ä»¤ç²¾ç®€</span><br><span class="line">-optimizations code/removal/variable,code/simplification/arithmetic</span><br><span class="line"></span><br><span class="line">#è¿›è¡Œé™¤ ç®—æ³•æŒ‡ä»¤ç²¾ç®€ã€å­—æ®µã€ç±»åˆå¹¶å¤–çš„æ‰€æœ‰ä¼˜åŒ–</span><br><span class="line">-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*</span><br><span class="line"></span><br><span class="line">#---------------------------------------------- optimize</span><br><span class="line"></span><br><span class="line">-dontobfuscate</span><br><span class="line"># ä¸è¿›è¡Œæ··æ·†ï¼Œé»˜è®¤å¼€å¯æ··æ·†ã€‚é™¤-keepæŒ‡å®šçš„ç±»åŠæˆå‘˜å¤–ï¼Œéƒ½ä¼šè¢«æ›¿æ¢æˆç®€çŸ­ã€éšæœºçš„åç§°ï¼Œä»¥è¾¾åˆ°æ··æ·†çš„ç›®çš„ã€‚</span><br><span class="line"></span><br><span class="line">-applymapping filename</span><br><span class="line"># æ ¹æ®æŒ‡å®šçš„mappingæ˜ å°„æ–‡ä»¶è¿›è¡Œæ··æ·†ã€‚</span><br><span class="line"></span><br><span class="line">-obfuscationdictionary filename</span><br><span class="line"># æŒ‡å®šå­—æ®µã€æ–¹æ³•åçš„æ··æ·†å­—å…¸ï¼Œé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨abcç­‰å­—æ¯ç»„åˆï¼Œæ¯”å¦‚æ ¹æ®è‡ªå·±çš„å–œå¥½æŒ‡å®šä¸­æ–‡ã€ç‰¹æ®Šå­—ç¬¦è¿›è¡Œæ··æ·†å‘½åã€‚</span><br><span class="line"></span><br><span class="line">-classobfuscationdictionary filename</span><br><span class="line"># æŒ‡å®šç±»åæ··æ·†å­—å…¸ã€‚</span><br><span class="line"></span><br><span class="line">-packageobfuscationdictionary filename</span><br><span class="line"># æŒ‡å®šåŒ…åæ··æ·†å­—å…¸ã€‚</span><br><span class="line"></span><br><span class="line">-useuniqueclassmembernames</span><br><span class="line"># æŒ‡å®šç›¸åŒçš„æ··æ·†åç§°å¯¹åº”ä¸åŒç±»çš„ç›¸åŒæˆå‘˜ï¼Œä¸åŒçš„æ··æ·†åç§°å¯¹åº”ä¸åŒçš„ç±»æˆå‘˜ã€‚åœ¨æ²¡æœ‰æŒ‡å®šè¿™ä¸ªé€‰é¡¹æ—¶ï¼Œä¸åŒç±»çš„ä¸åŒæ–¹æ³•éƒ½å¯èƒ½æ˜ å°„åˆ°a,b,cã€‚</span><br><span class="line"></span><br><span class="line"># æœ‰ä¸€ç§æƒ…å†µï¼Œæ¯”å¦‚ä¸¤ä¸ªä¸åŒçš„æ¥å£ï¼Œæ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ç­¾åï¼Œåœ¨æ²¡æœ‰æŒ‡å®šè¿™ä¸ªé€‰é¡¹æ—¶ï¼Œè¿™ä¸¤ä¸ªæ¥å£çš„æ–¹æ³•å¯èƒ½æ··æ·†æˆä¸åŒçš„åç§°ã€‚ä½†å¦‚æœæ–°å¢ä¸€ä¸ªç±»åŒæ—¶å®ç°è¿™ä¸¤ä¸ªæ¥å£ï¼Œå¹¶ä¸”åˆ©ç”¨-applymappingæŒ‡å®šä¹‹å‰çš„mappingæ˜ å°„æ–‡ä»¶æ—¶ï¼Œè¿™ä¸¤ä¸ªæ¥å£çš„æ–¹æ³•å¿…é¡»æ··æ·†æˆç›¸åŒçš„åç§°ï¼Œè¿™æ—¶å°±å’Œä¹‹å‰çš„mappingå†²çªäº†ã€‚</span><br><span class="line"></span><br><span class="line"># åœ¨æŸæ­¤çƒ­ä¿®å¤åœºæ™¯ä¸‹éœ€è¦æŒ‡å®šæ­¤é€‰é¡¹ã€‚</span><br><span class="line"></span><br><span class="line">-dontusemixedcaseclassnames</span><br><span class="line"># æŒ‡å®šä¸ä½¿ç”¨å¤§å°å†™æ··ç”¨çš„ç±»åï¼Œé»˜è®¤æƒ…å†µä¸‹æ··æ·†åçš„ç±»åå¯èƒ½åŒæ—¶åŒ…å«å¤§å†™å°å­—æ¯ã€‚è¿™åœ¨æŸäº›å¯¹å¤§å°å†™ä¸æ•æ„Ÿçš„ç³»ç»Ÿï¼ˆå¦‚windownsï¼‰ä¸Šè§£å‹æ—¶ï¼Œå¯èƒ½å­˜åœ¨æ–‡ä»¶è¢«ç›¸äº’è¦†ç›–çš„æƒ…å†µã€‚</span><br><span class="line"></span><br><span class="line">-keeppackagenames [package_filter]</span><br><span class="line"># æŒ‡å®šä¸æ··æ·†æŒ‡å®šçš„åŒ…åï¼Œå¤šä¸ªåŒ…åå¯ä»¥ç”¨é€—å·åˆ†éš”ï¼Œå¯ä»¥ä½¿ç”¨? * **é€šé…ç¬¦ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¦å®šç¬¦ï¼ˆ!ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">-keepattributes [attribute_filter]</span><br><span class="line"># æŒ‡å®šä¿ç•™å±æ€§ï¼Œå¤šä¸ªå±æ€§å¯ä»¥ç”¨å¤šä¸ª-keepattributesé…ç½®ï¼Œä¹Ÿå¯ä»¥ç”¨é€—å·åˆ†éš”ï¼Œå¯ä»¥ä½¿ç”¨? * **é€šé…ç¬¦ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¦å®šç¬¦ï¼ˆ!ï¼‰ã€‚</span><br><span class="line"># æ¯”å¦‚ï¼Œåœ¨æ··æ·†ibraryåº“æ—¶ï¼Œåº”è¯¥è‡³å°‘keep Exceptions, InnerClasses, Signatureï¼›å¦‚æœåœ¨è¿½è¸ªä»£ç ï¼Œè¿˜éœ€è¦keepç¬¦å·è¡¨ï¼›ä½¿ç”¨åˆ°æ³¨è§£æ—¶ä¹Ÿéœ€è¦keepã€‚</span><br><span class="line">-keepattributes Exceptions,InnerClasses,Signature</span><br><span class="line">-keepattributes SourceFile,LineNumberTable</span><br><span class="line">-keepattributes *Annotation*</span><br><span class="line"></span><br><span class="line">-keepparameternames</span><br><span class="line"># æŒ‡å®škeepå·²ç»è¢«keepçš„æ–¹æ³•çš„å‚æ•°ç±»å‹å’Œå‚æ•°åç§°ï¼Œåœ¨æ··æ·†libraryåº“æ—¶éå¸¸æœ‰ç”¨ï¼Œå¯ä¾›IDEå¸®åŠ©ç”¨æˆ·è¿›è¡Œä¿¡æ¯æç¤ºå’Œä»£ç è‡ªåŠ¨å¡«å……ã€‚</span><br><span class="line"></span><br><span class="line">#---------------------------------------------- obfuscate</span><br><span class="line"></span><br><span class="line">-dontpreverify</span><br><span class="line"># æŒ‡å®šä¸å¯¹classè¿›è¡Œé¢„æ ¡éªŒï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ç¼–è¯‘ç‰ˆæœ¬ä¸ºmicroæˆ–è€…1.6æˆ–æ›´é«˜ç‰ˆæœ¬æ—¶æ˜¯å¼€å¯çš„ã€‚ä½†ç¼–è¯‘æˆAndroidç‰ˆæœ¬æ—¶ï¼Œé¢„æ ¡éªŒæ˜¯ä¸å¿…é¡»çš„ï¼Œé…ç½®è¿™ä¸ªé€‰é¡¹å¯ä»¥èŠ‚çœä¸€ç‚¹ç¼–è¯‘æ—¶é—´ã€‚ï¼ˆAndroidä¼šæŠŠclassç¼–è¯‘æˆdexï¼Œå¹¶å¯¹dexæ–‡ä»¶è¿›è¡Œæ ¡éªŒï¼Œå¯¹classè¿›è¡Œé¢„æ ¡éªŒæ˜¯å¤šä½™çš„ã€‚ï¼‰</span><br><span class="line"></span><br><span class="line">#---------------------------------------------- preverify</span><br></pre></td></tr></table></figure>
<h2 id="keepé…ç½®"><a href="#keepé…ç½®" class="headerlink" title="keepé…ç½®"></a>keepé…ç½®</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># -keep [,modifier,...] class_specification</span><br><span class="line"># æŒ‡å®šç±»åŠç±»æˆå‘˜ä½œä¸ºä»£ç å…¥å£ï¼Œä¿æŠ¤å…¶ä¸è¢«proguardï¼Œå¦‚ï¼š</span><br><span class="line">-keep class com.rush.Test</span><br><span class="line">-keep interface com.rush.InterfaceTest</span><br><span class="line">-keep class com.rush.** &#123;</span><br><span class="line">    &lt;init&gt;;</span><br><span class="line">    public &lt;fields&gt;;</span><br><span class="line">    public &lt;methods&gt;;</span><br><span class="line">    public *** get*();</span><br><span class="line">    void set*(***);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>classè¡¨ç¤ºkeepç±»æˆ–æ¥å£</li>
<li>interfaceä»…è¡¨ç¤ºkeepæ¥å£</li>
</ul>
<p><strong>ç±»å é€šé…ç¬¦å¦‚ä¸‹:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">é€šé…ç¬¦</th>
<th style="text-align:left">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">?</td>
<td style="text-align:left">åŒ¹é…å•ä¸ªå­—ç¬¦ï¼ŒåŒ…ååˆ†éš”ç¬¦ï¼ˆ.ï¼‰é™¤å¤–</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">åŒ¹é…é™¤ï¼ˆ.ï¼‰å¤–çš„ä»»æ„å­—ç¬¦</td>
</tr>
<tr>
<td style="text-align:left">**</td>
<td style="text-align:left">åŒ¹é…ä»»æ„å­—ç¬¦ï¼ˆåŒ…å«.ï¼‰ï¼Œå¦‚com.rush.**åŒ¹é…com.rushåŒ…ä¸‹çš„æ‰€æœ‰ç±»åŠå…¶æ‰€æœ‰å­åŒ…çš„ç±»ã€‚</td>
</tr>
</tbody>
</table>
<p><strong>å­—æ®µå’Œæ–¹æ³• é€šé…ç¬¦å¦‚ä¸‹ï¼š</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">é€šé…ç¬¦</th>
<th style="text-align:left">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>&lt;init&gt;</code></td>
<td style="text-align:left">åŒ¹é…æ‰€æœ‰æ„é€ æ–¹æ³•</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;fields&gt;</code></td>
<td style="text-align:left">åŒ¹é…æ‰€æœ‰å­—æ®µ</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;methods&gt;</code></td>
<td style="text-align:left">åŒ¹é…æ‰€æœ‰æ–¹æ³•</td>
</tr>
<tr>
<td style="text-align:left">?</td>
<td style="text-align:left">åŒ¹é…å•ä¸ªå­—ç¬¦ï¼ŒåŒ…ååˆ†éš”ç¬¦ï¼ˆ.ï¼‰é™¤å¤–</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">åŒ¹é…é™¤ï¼ˆ.ï¼‰å¤–çš„ä»»æ„å­—ç¬¦</td>
</tr>
</tbody>
</table>
<p><strong>ç±»å‹ é€šé…ç¬¦å¦‚ä¸‹ï¼š</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">é€šé…ç¬¦</th>
<th style="text-align:left">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">%</td>
<td style="text-align:left">åŒ¹é…åŸå§‹ç±»å‹ï¼Œå¦‚int, booleanç­‰</td>
</tr>
<tr>
<td style="text-align:left">?</td>
<td style="text-align:left">åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">åŒ¹é…é™¤åŒ…ååˆ†éš”ç¬¦ï¼ˆ.ï¼‰å¤–çš„ä»»æ„å­—ç¬¦</td>
</tr>
<tr>
<td style="text-align:left">**</td>
<td style="text-align:left">åŒ¹é…ä»»æ„å­—ç¬¦ï¼ŒåŒ…æ‹¬åŒ…ååˆ†éš”ç¬¦ï¼ˆ.ï¼‰</td>
</tr>
<tr>
<td style="text-align:left">***</td>
<td style="text-align:left">åŒ¹é…ä»»æ„ç±»å‹ï¼ˆåŸå§‹ç±»å‹ã€éåŸå§‹ç±»å‹ã€æ•°ç»„æˆ–éæ•°ç»„ç±»å‹ï¼‰</td>
</tr>
<tr>
<td style="text-align:left">â€¦</td>
<td style="text-align:left">åŒ¹é…ä»»æ„å‚æ•°ä¸ªæ•°ï¼Œä»»æ„å‚æ•°ç±»å‹</td>
</tr>
</tbody>
</table>
<p><strong>å…¶ä¸­ç±»é…ç½®å®Œæ•´å®šä¹‰å¦‚ä¸‹ï¼Œå…¶ä¸­[]è¡¨ç¤ºå¯é€‰ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[@annotationtype] [[!]public|final|abstract|@ ...] [!]interface|class|enum classname</span><br><span class="line">    [extends|implements [@annotationtype] classname]</span><br><span class="line">[&#123;</span><br><span class="line">    [@annotationtype] [[!]public|private|protected|static|volatile|transient ...] &lt;fields&gt; |</span><br><span class="line">                                                                      (fieldtype fieldname);</span><br><span class="line">    [@annotationtype] [[!]public|private|protected|static|synchronized|native|abstract|strictfp ...] &lt;methods&gt; |</span><br><span class="line">                                                                                           &lt;init&gt;(argumenttype,...) |</span><br><span class="line">                                                                                           classname(argumenttype,...) |</span><br><span class="line">                                                                                           (returntype methodname(argumenttype,...));</span><br><span class="line">    [@annotationtype] [[!]public|private|protected|static ... ] *;</span><br><span class="line">    ...</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left">ä¿ç•™</th>
<th style="text-align:left">é˜²æ­¢è¢«ç§»é™¤æˆ–é‡å‘½å</th>
<th style="text-align:left">é˜²æ­¢è¢«é‡å‘½åï¼ˆæœªä½¿ç”¨çš„ä¼šè¢«ç§»é™¤ï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ç±»å’Œç±»æˆå‘˜</td>
<td style="text-align:left">-keep</td>
<td style="text-align:left">-keepnames</td>
</tr>
<tr>
<td style="text-align:left">ä»…ç±»æˆå‘˜</td>
<td style="text-align:left">-keepclassmembers</td>
<td style="text-align:left">-keepclassmembernames</td>
</tr>
<tr>
<td style="text-align:left">å¦‚ç±»å«æœ‰æŸæˆå‘˜ï¼Œä¿ç•™ç±»åŠå…¶æˆå‘˜</td>
<td style="text-align:left">-keepclasseswithmembers</td>
<td style="text-align:left">-keepclasseswithmembernames</td>
</tr>
</tbody>
</table>
<h1 id="æ›´å¤šè¯¦ç»†æŒ‡ä»¤"><a href="#æ›´å¤šè¯¦ç»†æŒ‡ä»¤" class="headerlink" title="æ›´å¤šè¯¦ç»†æŒ‡ä»¤"></a>æ›´å¤šè¯¦ç»†æŒ‡ä»¤</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä»£ç æ··æ·†å‹ç¼©æ¯”ï¼Œåœ¨ 0~7 ä¹‹é—´</span><br><span class="line">-optimizationpasses 5</span><br><span class="line"></span><br><span class="line"># ä¸æç¤ºè­¦å‘Š</span><br><span class="line">-dontwarn</span><br><span class="line"></span><br><span class="line"># æ··åˆæ—¶ä¸ä½¿ç”¨å¤§å°å†™æ··åˆï¼Œæ··åˆåçš„ç±»åä¸ºå°å†™</span><br><span class="line">-dontusemixedcaseclassnames</span><br><span class="line"></span><br><span class="line"># æŒ‡å®šä¸å¿½ç•¥éå…¬å…±åº“çš„ç±»å’Œç±»æˆå‘˜</span><br><span class="line">-dontskipnonpubliclibraryclasses</span><br><span class="line">-dontskipnonpubliclibraryclassmembers</span><br><span class="line"></span><br><span class="line"># è¿™å¥è¯èƒ½å¤Ÿä½¿æˆ‘ä»¬çš„é¡¹ç›®æ··æ·†åäº§ç”Ÿæ˜ å°„æ–‡ä»¶</span><br><span class="line"># åŒ…å«æœ‰ç±»å-&gt;æ··æ·†åç±»åçš„æ˜ å°„å…³ç³»</span><br><span class="line">-verbose</span><br><span class="line"></span><br><span class="line"># ä¸åšé¢„æ ¡éªŒï¼Œpreverifyæ˜¯proguardçš„å››ä¸ªæ­¥éª¤ä¹‹ä¸€ï¼ŒAndroidä¸éœ€è¦preverifyï¼Œå»æ‰è¿™ä¸€æ­¥èƒ½å¤ŸåŠ å¿«æ··æ·†é€Ÿåº¦</span><br><span class="line">-dontpreverify</span><br><span class="line"></span><br><span class="line"># ä¿ç•™Annotationä¸æ··æ·†</span><br><span class="line">-keepattributes *Annotation*,InnerClasses</span><br><span class="line"></span><br><span class="line"># é¿å…æ··æ·†æ³›å‹</span><br><span class="line">-keepattributes Signature</span><br><span class="line"></span><br><span class="line"># æŠ›å‡ºå¼‚å¸¸æ—¶ä¿ç•™ä»£ç è¡Œå·</span><br><span class="line">-keepattributes SourceFile,LineNumberTable</span><br><span class="line"></span><br><span class="line"># æŒ‡å®šæ··æ·†æ˜¯é‡‡ç”¨çš„ç®—æ³•ï¼Œåé¢çš„å‚æ•°æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨</span><br><span class="line"># è¿™ä¸ªè¿‡æ»¤å™¨æ˜¯ Google æ¨èçš„ç®—æ³•ï¼Œä¸€èˆ¬ä¸åšä¿®æ”¹</span><br><span class="line">-optimizations !code/simplification/arithmetic,!code/simplification/cast,!field/*,!class/merging/*</span><br><span class="line"></span><br><span class="line"># æ˜¯å¦å…è®¸æ”¹å˜ä½œç”¨åŸŸçš„ï¼Œå¯ä»¥æé«˜ä¼˜åŒ–æ•ˆæœ</span><br><span class="line"># ä½†æ˜¯ï¼Œå¦‚æœä½ çš„ä»£ç æ˜¯ä¸€ä¸ªåº“çš„è¯ï¼Œæœ€å¥½ä¸è¦é…ç½®è¿™ä¸ªé€‰é¡¹ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šå¯¼è‡´ä¸€äº› private å˜é‡è¢«æ”¹æˆ publicï¼Œè°¨æ…ä½¿ç”¨</span><br><span class="line">#-allowaccessmodification</span><br><span class="line"></span><br><span class="line"># æŒ‡å®šä¸€äº›æ¥å£å¯èƒ½ä¼šè¢«åˆå¹¶ï¼Œå³ä½¿ä¸€äº›å­ç±»æ²¡æœ‰åŒæ—¶å®ç°ä¸¤ä¸ªæ¥å£çš„æ–¹æ³•ã€‚è¿™ç§æƒ…å†µåœ¨javaæºç ä¸­æ˜¯ä¸å…è®¸å­˜åœ¨çš„ï¼Œä½†æ˜¯åœ¨javaå­—èŠ‚ç ä¸­æ˜¯å…è®¸å­˜åœ¨çš„ã€‚</span><br><span class="line"># å®ƒçš„ä½œç”¨æ˜¯é€šè¿‡åˆå¹¶æ¥å£å‡å°‘ç±»çš„æ•°é‡ï¼Œä»è€Œè¾¾åˆ°å‡å°‘è¾“å‡ºæ–‡ä»¶ä½“ç§¯çš„æ•ˆæœã€‚ä»…åœ¨ optimize é˜¶æ®µæœ‰æ•ˆã€‚</span><br><span class="line"># å¦‚æœåœ¨å¼€å¯åæ²¡æœ‰ä»»ä½•å½±å“å¯ä»¥ä½¿ç”¨ï¼Œè¿™é¡¹é…ç½®å¯¹äºä¸€äº›è™šæ‹Ÿæœºçš„65535æ–¹æ³•æ•°é™åˆ¶æ˜¯æœ‰ä¸€å®šæ•ˆæœçš„ï¼Œè°¨æ…ä½¿ç”¨</span><br><span class="line">#-mergeinterfacesaggressively</span><br><span class="line"></span><br><span class="line"># è¾“å‡ºæ‰€æœ‰æ‰¾ä¸åˆ°å¼•ç”¨å’Œä¸€äº›å…¶å®ƒé”™è¯¯çš„è­¦å‘Šï¼Œä½†æ˜¯ç»§ç»­æ‰§è¡Œå¤„ç†è¿‡ç¨‹ã€‚ä¸å¤„ç†è­¦å‘Šæœ‰äº›å±é™©ï¼Œæ‰€ä»¥åœ¨æ¸…æ¥šé…ç½®çš„å…·ä½“ä½œç”¨çš„æ—¶å€™å†ä½¿ç”¨</span><br><span class="line">-ignorewarnings</span><br><span class="line">-include &#123;filename&#125;     #ä»ç»™å®šçš„æ–‡ä»¶ä¸­è¯»å–é…ç½®å‚æ•°</span><br><span class="line">-basedirectory &#123;directoryname&#125;    #æŒ‡å®šåŸºç¡€ç›®å½•ä¸ºä»¥åç›¸å¯¹çš„æ¡£æ¡ˆåç§°</span><br><span class="line">-injars &#123;class_path&#125;    #æŒ‡å®šè¦å¤„ç†çš„åº”ç”¨ç¨‹åºjar,war,earå’Œç›®å½•</span><br><span class="line">-outjars &#123;class_path&#125;     #æŒ‡å®šå¤„ç†å®Œåè¦è¾“å‡ºçš„jar,war,earå’Œç›®å½•çš„åç§°</span><br><span class="line">-libraryjars &#123;classpath&#125;     #æŒ‡å®šè¦å¤„ç†çš„åº”ç”¨ç¨‹åºjar,war,earå’Œç›®å½•æ‰€éœ€è¦çš„ç¨‹åºåº“æ–‡ä»¶</span><br><span class="line">-dontskipnonpubliclibraryclasses     #æŒ‡å®šä¸å»å¿½ç•¥éå…¬å…±çš„åº“ç±»ã€‚</span><br><span class="line">-dontskipnonpubliclibraryclassmembers     #æŒ‡å®šä¸å»å¿½ç•¥åŒ…å¯è§çš„åº“ç±»çš„æˆå‘˜ã€‚</span><br><span class="line"></span><br><span class="line"> #ä¿ç•™é€‰é¡¹</span><br><span class="line">-keep &#123;Modifier&#125; &#123;class_specification&#125;     #ä¿æŠ¤æŒ‡å®šçš„ç±»æ–‡ä»¶å’Œç±»çš„æˆå‘˜</span><br><span class="line">-keepclassmembers &#123;modifier&#125; &#123;class_specification&#125;     #ä¿æŠ¤æŒ‡å®šç±»çš„æˆå‘˜ï¼Œå¦‚æœæ­¤ç±»å—åˆ°ä¿æŠ¤ä»–ä»¬ä¼šä¿æŠ¤çš„æ›´å¥½</span><br><span class="line">-keepclasseswithmembers &#123;class_specification&#125;     #ä¿æŠ¤æŒ‡å®šçš„ç±»å’Œç±»çš„æˆå‘˜ï¼Œä½†æ¡ä»¶æ˜¯æ‰€æœ‰æŒ‡å®šçš„ç±»å’Œç±»æˆå‘˜æ˜¯è¦å­˜åœ¨ã€‚</span><br><span class="line">-keepnames &#123;class_specification&#125;     #ä¿æŠ¤æŒ‡å®šçš„ç±»å’Œç±»çš„æˆå‘˜çš„åç§°ï¼ˆå¦‚æœä»–ä»¬ä¸ä¼šå‹ç¼©æ­¥éª¤ä¸­åˆ é™¤ï¼‰</span><br><span class="line">-keepclassmembernames &#123;class_specification&#125;     #ä¿æŠ¤æŒ‡å®šçš„ç±»çš„æˆå‘˜çš„åç§°ï¼ˆå¦‚æœä»–ä»¬ä¸ä¼šå‹ç¼©æ­¥éª¤ä¸­åˆ é™¤ï¼‰</span><br><span class="line">-keepclasseswithmembernames &#123;class_specification&#125;     #ä¿æŠ¤æŒ‡å®šçš„ç±»å’Œç±»çš„æˆå‘˜çš„åç§°ï¼Œå¦‚æœæ‰€æœ‰æŒ‡å®šçš„ç±»æˆå‘˜å‡ºå¸­ï¼ˆåœ¨å‹ç¼©æ­¥éª¤ä¹‹åï¼‰</span><br><span class="line">-printseeds &#123;filename&#125;     #åˆ—å‡ºç±»å’Œç±»çš„æˆå‘˜-keepé€‰é¡¹çš„æ¸…å•ï¼Œæ ‡å‡†è¾“å‡ºåˆ°ç»™å®šçš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line"> #å‹ç¼©</span><br><span class="line">-dontshrink     #ä¸å‹ç¼©è¾“å…¥çš„ç±»æ–‡ä»¶</span><br><span class="line">-printusage &#123;filename&#125;</span><br><span class="line">-whyareyoukeeping &#123;class_specification&#125;</span><br><span class="line"></span><br><span class="line"> #ä¼˜åŒ–</span><br><span class="line">-dontoptimize     #ä¸ä¼˜åŒ–è¾“å…¥çš„ç±»æ–‡ä»¶</span><br><span class="line">-assumenosideeffects &#123;class_specification&#125;     #ä¼˜åŒ–æ—¶å‡è®¾æŒ‡å®šçš„æ–¹æ³•ï¼Œæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨</span><br><span class="line">-allowaccessmodification     #ä¼˜åŒ–æ—¶å…è®¸è®¿é—®å¹¶ä¿®æ”¹æœ‰ä¿®é¥°ç¬¦çš„ç±»å’Œç±»çš„æˆå‘˜</span><br><span class="line"></span><br><span class="line"> #æ··æ·†</span><br><span class="line">-dontobfuscate     #ä¸æ··æ·†è¾“å…¥çš„ç±»æ–‡ä»¶</span><br><span class="line">-printmapping &#123;filename&#125;</span><br><span class="line">-applymapping &#123;filename&#125;     #é‡ç”¨æ˜ å°„å¢åŠ æ··æ·†</span><br><span class="line">-obfuscationdictionary &#123;filename&#125;     #ä½¿ç”¨ç»™å®šæ–‡ä»¶ä¸­çš„å…³é”®å­—ä½œä¸ºè¦æ··æ·†æ–¹æ³•çš„åç§°</span><br><span class="line">-overloadaggressively     #æ··æ·†æ—¶åº”ç”¨ä¾µå…¥å¼é‡è½½</span><br><span class="line">-useuniqueclassmembernames     #ç¡®å®šç»Ÿä¸€çš„æ··æ·†ç±»çš„æˆå‘˜åç§°æ¥å¢åŠ æ··æ·†</span><br><span class="line">-flattenpackagehierarchy &#123;package_name&#125;     #é‡æ–°åŒ…è£…æ‰€æœ‰é‡å‘½åçš„åŒ…å¹¶æ”¾åœ¨ç»™å®šçš„å•ä¸€åŒ…ä¸­</span><br><span class="line">-repackageclass &#123;package_name&#125;     #é‡æ–°åŒ…è£…æ‰€æœ‰é‡å‘½åçš„ç±»æ–‡ä»¶ä¸­æ”¾åœ¨ç»™å®šçš„å•ä¸€åŒ…ä¸­</span><br><span class="line">-dontusemixedcaseclassnames     #æ··æ·†æ—¶ä¸ä¼šäº§ç”Ÿå½¢å½¢è‰²è‰²çš„ç±»å</span><br><span class="line">-keepattributes &#123;attribute_name,...&#125;     #ä¿æŠ¤ç»™å®šçš„å¯é€‰å±æ€§ï¼Œä¾‹å¦‚LineNumberTable, LocalVariableTable, SourceFile, Deprecated, Synthetic, Signature, and</span><br><span class="line"></span><br><span class="line"> #InnerClasses.</span><br><span class="line">-renamesourcefileattribute &#123;string&#125;     #è®¾ç½®æºæ–‡ä»¶ä¸­ç»™å®šçš„å­—ç¬¦ä¸²å¸¸é‡</span><br></pre></td></tr></table></figure>
<h1 id="æ··æ·†æ—¥å¿—"><a href="#æ··æ·†æ—¥å¿—" class="headerlink" title="æ··æ·†æ—¥å¿—"></a>æ··æ·†æ—¥å¿—</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># APK åŒ…å†…æ‰€æœ‰ class çš„å†…éƒ¨ç»“æ„</span><br><span class="line">-dump proguard/class_files.txt</span><br><span class="line"># æœªæ··æ·†çš„ç±»å’Œæˆå‘˜</span><br><span class="line">-printseeds proguard/seeds.txt</span><br><span class="line"># åˆ—å‡ºä» APK ä¸­åˆ é™¤çš„ä»£ç </span><br><span class="line">-printusage proguard/unused.txt</span><br><span class="line"># æ··æ·†å‰åçš„æ˜ å°„ï¼Œè¿™ä¸ªæ–‡ä»¶åœ¨è¿½è¸ªå¼‚å¸¸çš„æ—¶å€™æ˜¯æœ‰ç”¨çš„</span><br><span class="line">-printmapping proguard/mapping.txt</span><br></pre></td></tr></table></figure>
<h1 id="å…¶ä»–è‡ªå®šä¹‰æ··æ·†è§„åˆ™"><a href="#å…¶ä»–è‡ªå®šä¹‰æ··æ·†è§„åˆ™" class="headerlink" title="å…¶ä»–è‡ªå®šä¹‰æ··æ·†è§„åˆ™"></a>å…¶ä»–è‡ªå®šä¹‰æ··æ·†è§„åˆ™</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># JavaBean å®ä½“ç±»ä¸èƒ½æ··æ·†ï¼Œä¸€èˆ¬ä¼šå°†å®ä½“ç±»ç»Ÿä¸€æ”¾åˆ°ä¸€ä¸ªåŒ…ä¸‹ï¼Œyou.package.path è¯·æ”¹æˆä½ è‡ªå·±çš„é¡¹ç›®è·¯å¾„</span><br><span class="line">-keep public class com.frame.mvp.entity.** &#123;</span><br><span class="line">    *;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ç½‘é¡µä¸­çš„ JavaScript è¿›è¡Œäº¤äº’ï¼Œyou.package.path è¯·æ”¹æˆä½ è‡ªå·±çš„é¡¹ç›®è·¯å¾„</span><br><span class="line">#-keepclassmembers class you.package.path.JSInterface &#123;</span><br><span class="line">#    &lt;methods&gt;;</span><br><span class="line">#&#125;</span><br><span class="line"></span><br><span class="line"># éœ€è¦é€šè¿‡åå°„æ¥è°ƒç”¨çš„ç±»ï¼Œæ²¡æœ‰å¯å¿½ç•¥ï¼Œyou.package.path è¯·æ”¹æˆä½ è‡ªå·±çš„é¡¹ç›®è·¯å¾„</span><br><span class="line">#-keep class you.package.path.** &#123; *; &#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä¸€äº›ä¸æ˜¯å¾ˆå¸¸ç”¨ä½†æ¯”è¾ƒå®ç”¨çš„æ··æ·†å‘½ä»¤"><a href="#ä¸€äº›ä¸æ˜¯å¾ˆå¸¸ç”¨ä½†æ¯”è¾ƒå®ç”¨çš„æ··æ·†å‘½ä»¤" class="headerlink" title="ä¸€äº›ä¸æ˜¯å¾ˆå¸¸ç”¨ä½†æ¯”è¾ƒå®ç”¨çš„æ··æ·†å‘½ä»¤"></a>ä¸€äº›ä¸æ˜¯å¾ˆå¸¸ç”¨ä½†æ¯”è¾ƒå®ç”¨çš„æ··æ·†å‘½ä»¤</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># æ‰€æœ‰é‡æ–°å‘½åçš„åŒ…éƒ½é‡æ–°æ‰“åŒ…ï¼Œå¹¶æŠŠæ‰€æœ‰çš„ç±»ç§»åŠ¨åˆ°æ‰€ç»™å®šçš„åŒ…ä¸‹é¢ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š packagenameï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ç±»éƒ½ä¼šè¢«ç§»åŠ¨åˆ°æ ¹ç›®å½•ä¸‹</span><br><span class="line"># å¦‚æœéœ€è¦ä»ç›®å½•ä¸­è¯»å–èµ„æºæ–‡ä»¶ï¼Œç§»åŠ¨åŒ…çš„ä½ç½®å¯èƒ½ä¼šå¯¼è‡´å¼‚å¸¸ï¼Œè°¨æ…ä½¿ç”¨</span><br><span class="line"># you.package.path è¯·æ”¹æˆä½ è‡ªå·±çš„é¡¹ç›®è·¯å¾„</span><br><span class="line">-flatternpackagehierarchy</span><br><span class="line"></span><br><span class="line"># æ‰€æœ‰é‡æ–°å‘½åè¿‡çš„ç±»éƒ½é‡æ–°æ‰“åŒ…ï¼Œå¹¶æŠŠä»–ä»¬ç§»åŠ¨åˆ°æŒ‡å®šçš„packagenameç›®å½•ä¸‹ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š packagenameï¼ŒåŒæ ·æŠŠä»–ä»¬æ”¾åˆ°æ ¹ç›®å½•ä¸‹é¢ã€‚</span><br><span class="line"># è¿™é¡¹é…ç½®ä¼šè¦†ç›–-flatternpackagehierarchyçš„é…ç½®ã€‚å®ƒå¯ä»¥ä»£ç ä½“ç§¯æ›´å°ï¼Œå¹¶ä¸”æ›´åŠ éš¾ä»¥ç†è§£ã€‚</span><br><span class="line"># you.package.path è¯·æ”¹æˆä½ è‡ªå·±çš„é¡¹ç›®è·¯å¾„</span><br><span class="line">-repackageclasses you.package.path</span><br><span class="line"></span><br><span class="line"># æŒ‡å®šä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ç”¨æ¥ç”Ÿæˆæ··æ·†åçš„åå­—ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ··æ·†åçš„åå­—ä¸€èˆ¬ä¸º aã€bã€c è¿™ç§ã€‚</span><br><span class="line"># é€šè¿‡ä½¿ç”¨é…ç½®çš„å­—å…¸æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›éè‹±æ–‡å­—ç¬¦åšä¸ºç±»åã€‚æˆå‘˜å˜é‡åã€æ–¹æ³•åã€‚å­—å…¸æ–‡ä»¶ä¸­çš„ç©ºæ ¼ï¼Œæ ‡ç‚¹ç¬¦å·ï¼Œé‡å¤çš„è¯ï¼Œè¿˜æœ‰ä»¥&apos;#&apos;å¼€å¤´çš„è¡Œéƒ½ä¼šè¢«å¿½ç•¥ã€‚</span><br><span class="line"># éœ€è¦æ³¨æ„çš„æ˜¯æ·»åŠ äº†å­—å…¸å¹¶ä¸ä¼šæ˜¾è‘—æé«˜æ··æ·†çš„æ•ˆæœï¼Œåªä¸è¿‡æ˜¯æ›´ä¸åˆ©ä¸äººç±»çš„é˜…è¯»ã€‚æ­£å¸¸çš„ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¤„ç†ä»–ä»¬ï¼Œå¹¶ä¸”è¾“å‡ºå‡ºæ¥çš„jaråŒ…ä¹Ÿå¯ä»¥è½»æ˜“çš„æ¢ä¸ªå­—å…¸å†é‡æ–°æ··æ·†ä¸€æ¬¡ã€‚</span><br><span class="line"># æœ€æœ‰ç”¨çš„åšæ³•ä¸€èˆ¬æ˜¯é€‰æ‹©å·²ç»åœ¨ç±»æ–‡ä»¶ä¸­å­˜åœ¨çš„å­—ç¬¦ä¸²åšå­—å…¸ï¼Œè¿™æ ·å¯ä»¥ç¨å¾®å‹ç¼©åŒ…çš„ä½“ç§¯ã€‚</span><br><span class="line"># å­—å…¸æ–‡ä»¶çš„æ ¼å¼ï¼šä¸€è¡Œä¸€ä¸ªå•è¯ï¼Œç©ºè¡Œå¿½ç•¥ï¼Œé‡å¤å¿½ç•¥</span><br><span class="line">-obfuscationdictionary</span><br><span class="line"></span><br><span class="line"># æŒ‡å®šä¸€ä¸ªæ··æ·†ç±»åçš„å­—å…¸ï¼Œå­—å…¸æ ¼å¼ä¸ -obfuscationdictionary ç›¸åŒ</span><br><span class="line">#-classobfuscationdictionary</span><br><span class="line"># æŒ‡å®šä¸€ä¸ªæ··æ·†åŒ…åçš„å­—å…¸ï¼Œå­—å…¸æ ¼å¼ä¸ -obfuscationdictionary ç›¸åŒ</span><br><span class="line">-packageobfuscationdictionary</span><br><span class="line"></span><br><span class="line"># æ··æ·†çš„æ—¶å€™å¤§é‡ä½¿ç”¨é‡è½½ï¼Œå¤šä¸ªæ–¹æ³•åä½¿ç”¨åŒä¸€ä¸ªæ··æ·†åï¼Œä½†æ˜¯ä»–ä»¬çš„æ–¹æ³•ç­¾åä¸åŒã€‚è¿™å¯ä»¥ä½¿åŒ…çš„ä½“ç§¯å‡å°ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥åŠ å¤§ç†è§£çš„éš¾åº¦ã€‚ä»…åœ¨æ··æ·†é˜¶æ®µæœ‰æ•ˆã€‚</span><br><span class="line"># è¿™ä¸ªå‚æ•°åœ¨ JDK ç‰ˆæœ¬ä¸Šæœ‰ä¸€å®šçš„é™åˆ¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æœªçŸ¥çš„é”™è¯¯ï¼Œè°¨æ…ä½¿ç”¨</span><br><span class="line">-overloadaggressively</span><br><span class="line"></span><br><span class="line"># æ–¹æ³•åŒåæ··æ·†åäº¦åŒåï¼Œæ–¹æ³•ä¸åŒåæ··æ·†åäº¦ä¸åŒåã€‚ä¸ä½¿ç”¨è¯¥é€‰é¡¹æ—¶ï¼Œç±»æˆå‘˜å¯è¢«æ˜ å°„åˆ°ç›¸åŒçš„åç§°ã€‚å› æ­¤è¯¥é€‰é¡¹ä¼šå¢åŠ äº›è®¸è¾“å‡ºæ–‡ä»¶çš„å¤§å°ã€‚</span><br><span class="line">-useuniqueclassmembernames</span><br><span class="line"></span><br><span class="line"># æŒ‡å®šåœ¨æ··æ·†çš„æ—¶å€™ä¸ä½¿ç”¨å¤§å°å†™æ··ç”¨çš„ç±»åã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ··æ·†åçš„ç±»åå¯èƒ½åŒæ—¶åŒ…å«å¤§å†™å­—æ¯å’Œå°å†™å­—æ¯ã€‚</span><br><span class="line"># è¿™æ ·ç”ŸæˆjaråŒ…å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚åªæœ‰åœ¨å¤§å°å†™ä¸æ•æ„Ÿçš„ç³»ç»Ÿï¼ˆä¾‹å¦‚windowsï¼‰ä¸Šè§£å‹æ—¶ï¼Œæ‰ä¼šæ¶‰åŠåˆ°è¿™ä¸ªé—®é¢˜ã€‚</span><br><span class="line"># å› ä¸ºå¤§å°å†™ä¸åŒºåˆ†ï¼Œå¯èƒ½ä¼šå¯¼è‡´éƒ¨åˆ†æ–‡ä»¶åœ¨è§£å‹çš„æ—¶å€™ç›¸äº’è¦†ç›–ã€‚å¦‚æœæœ‰åœ¨windowsç³»ç»Ÿä¸Šè§£å‹è¾“å‡ºåŒ…çš„éœ€æ±‚çš„è¯ï¼Œå¯ä»¥åŠ ä¸Šè¿™ä¸ªé…ç½®ã€‚</span><br><span class="line">-dontusemixedcaseclassnames</span><br></pre></td></tr></table></figure>
<h1 id="Androidå¼€å‘å¸¸ç”¨ä¸éœ€è¦æ··æ·†æŒ‡ä»¤"><a href="#Androidå¼€å‘å¸¸ç”¨ä¸éœ€è¦æ··æ·†æŒ‡ä»¤" class="headerlink" title="Androidå¼€å‘å¸¸ç”¨ä¸éœ€è¦æ··æ·†æŒ‡ä»¤"></a>Androidå¼€å‘å¸¸ç”¨ä¸éœ€è¦æ··æ·†æŒ‡ä»¤</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Android å››å¤§ç»„ä»¶ç›¸å…³</span><br><span class="line">-keep public class * extends android.app.Activity</span><br><span class="line">-keep public class * extends android.app.Appliction</span><br><span class="line">-keep public class * extends android.app.Service</span><br><span class="line">-keep public class * extends android.content.BroadcastReceiver</span><br><span class="line">-keep public class * extends android.content.ContentProvider</span><br><span class="line">-keep public class * extends android.app.backup.BackupAgentHelper</span><br><span class="line">-keep public class * extends android.preference.Preference</span><br><span class="line">-keep public class * extends android.view.View</span><br><span class="line">-keep public class com.android.vending.licensing.ILicensingService</span><br><span class="line"></span><br><span class="line"># Fragment</span><br><span class="line">-keep public class * extends android.support.v4.app.Fragment</span><br><span class="line">-keep public class * extends android.app.Fragment</span><br><span class="line"></span><br><span class="line"># ä¿ç•™supportä¸‹çš„æ‰€æœ‰ç±»åŠå…¶å†…éƒ¨ç±»</span><br><span class="line">-keep class android.support.** &#123; *; &#125;</span><br><span class="line">-keep interface android.support.** &#123; *; &#125;</span><br><span class="line">-dontwarn android.support.**</span><br><span class="line"></span><br><span class="line"># ä¿ç•™ R ä¸‹é¢çš„èµ„æº</span><br><span class="line">-keep class **.R$* &#123;*;&#125;</span><br><span class="line">-keepclassmembers class **.R$* &#123;</span><br><span class="line">    public static &lt;fields&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ä¿ç•™æœ¬åœ° native æ–¹æ³•ä¸è¢«æ··æ·†</span><br><span class="line">-keepclasseswithmembernames class * &#123;</span><br><span class="line">    native &lt;methods&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ä¿ç•™åœ¨ Activity ä¸­çš„æ–¹æ³•å‚æ•°æ˜¯ view çš„æ–¹æ³•ï¼Œ</span><br><span class="line"># è¿™æ ·ä»¥æ¥æˆ‘ä»¬åœ¨ layout ä¸­å†™çš„ onClick å°±ä¸ä¼šè¢«å½±å“</span><br><span class="line">-keepclassmembers class * extends android.app.Activity&#123;</span><br><span class="line">    public void *(android.view.View);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ä¿ç•™æšä¸¾ç±»ä¸è¢«æ··æ·†</span><br><span class="line">-keepclassmembers enum * &#123;</span><br><span class="line">    public static **[] values();</span><br><span class="line">    public static ** valueOf(java.lang.String);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ä¿ç•™è‡ªå®šä¹‰æ§ä»¶ï¼ˆç»§æ‰¿è‡ªViewï¼‰ä¸è¢«æ··æ·†</span><br><span class="line">-keep public class * extends android.view.View&#123;</span><br><span class="line">    *** get*();</span><br><span class="line">    void set*(***);</span><br><span class="line">    public &lt;init&gt;(android.content.Context);</span><br><span class="line">    public &lt;init&gt;(android.content.Context, android.util.AttributeSet);</span><br><span class="line">    public &lt;init&gt;(android.content.Context, android.util.AttributeSet, int);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ä¿ç•™ Parcelable åºåˆ—åŒ–ç±»ä¸è¢«æ··æ·†</span><br><span class="line">-keep class * implements android.os.Parcelable &#123;</span><br><span class="line">  public static final android.os.Parcelable$Creator *;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ä¿ç•™ Serializable åºåˆ—åŒ–çš„ç±»ä¸è¢«æ··æ·†</span><br><span class="line">-keepclassmembers class * implements java.io.Serializable &#123;</span><br><span class="line">    static final long serialVersionUID;</span><br><span class="line">    private static final java.io.ObjectStreamField[] serialPersistentFields;</span><br><span class="line">    private void writeObject(java.io.ObjectOutputStream);</span><br><span class="line">    private void readObject(java.io.ObjectInputStream);</span><br><span class="line">    java.lang.Object writeReplace();</span><br><span class="line">    java.lang.Object readResolve();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># å¯¹äºå¸¦æœ‰å›è°ƒå‡½æ•°çš„ onXXEvent çš„ï¼Œä¸èƒ½è¢«æ··æ·†</span><br><span class="line">-keepclassmembers class * &#123;</span><br><span class="line">    void *(**On*Event);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># WebViewï¼Œæ²¡æœ‰ä½¿ç”¨ WebView è¯·æ³¨é‡Šæ‰</span><br><span class="line">-keepclassmembers class fqcn.of.javascript.interface.for.webview &#123;</span><br><span class="line">   public *;</span><br><span class="line">&#125;</span><br><span class="line">-keepclassmembers class * extends android.webkit.webViewClient &#123;</span><br><span class="line">    public void *(android.webkit.WebView, java.lang.String, android.graphics.Bitmap);</span><br><span class="line">    public boolean *(android.webkit.WebView, java.lang.String);</span><br><span class="line">&#125;</span><br><span class="line">-keepclassmembers class * extends android.webkit.webViewClient &#123;</span><br><span class="line">    public void *(android.webkit.webView, jav.lang.String);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ä¸æ··æ·†ä½¿ç”¨äº† @Keep æ³¨è§£ç›¸å…³çš„ç±»</span><br><span class="line">-keep class android.support.annotation.Keep</span><br><span class="line"></span><br><span class="line">-keep @android.support.annotation.Keep class * &#123;*;&#125;</span><br><span class="line"></span><br><span class="line">-keepclasseswithmembers class * &#123;</span><br><span class="line">    @android.support.annotation.Keep &lt;methods&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-keepclasseswithmembers class * &#123;</span><br><span class="line">    @android.support.annotation.Keep &lt;fields&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-keepclasseswithmembers class * &#123;</span><br><span class="line">    @android.support.annotation.Keep &lt;init&gt;(...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># åˆ é™¤ä»£ç ä¸­ Log ç›¸å…³çš„ä»£ç ï¼Œå¦‚æœåˆ é™¤äº†ä¸€äº›é¢„æ–™ä¹‹å¤–çš„ä»£ç ï¼Œå¾ˆå®¹æ˜“å°±ä¼šå¯¼è‡´ä»£ç å´©æºƒï¼Œè°¨æ…ä½¿ç”¨</span><br><span class="line">-assumenosideeffects class android.util.Log&#123;</span><br><span class="line">   public static boolean isLoggable(java.lang.String,int);</span><br><span class="line">   public static int v(...);</span><br><span class="line">   public static int i(...);</span><br><span class="line">   public static int w(...);</span><br><span class="line">   public static int d(...);</span><br><span class="line">   public static int e(...);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># åˆ é™¤è‡ªå®šä¹‰Logå·¥å…·</span><br><span class="line">-assumenosideeffects class com.example.Log.Logger&#123;</span><br><span class="line">   public static int v(...);</span><br><span class="line">   public static int i(...);</span><br><span class="line">   public static int w(...);</span><br><span class="line">   public static int d(...);</span><br><span class="line">   public static int e(...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="proguardé…ç½®ç¤ºä¾‹"><a href="#proguardé…ç½®ç¤ºä¾‹" class="headerlink" title="proguardé…ç½®ç¤ºä¾‹"></a>proguardé…ç½®ç¤ºä¾‹</h1><h2 id="Androidé»˜è®¤æ¨èé…ç½®"><a href="#Androidé»˜è®¤æ¨èé…ç½®" class="headerlink" title="Androidé»˜è®¤æ¨èé…ç½®"></a>Androidé»˜è®¤æ¨èé…ç½®</h2><p>åœ¨IDEè‡ªåŠ¨ç”Ÿæˆçš„project.propertiesæ–‡ä»¶ä¸­ï¼Œæœ‰è¿™æ ·ä¸€è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#proguard.config=$&#123;sdk.dir&#125;/tools/proguard/proguard-android.txt:proguard-project.txt</span><br></pre></td></tr></table></figure>
<p>Android Studioé»˜è®¤ç”Ÿæˆçš„build.gradleæ–‡ä»¶æœ‰å¦‚ä¸‹é…ç½®ï¼š</p>
<figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled <span class="literal">false</span></span><br><span class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­getDefaultProguardFile(â€˜proguard-android.txtâ€™)è·å–çš„ä¹Ÿæ˜¯tools/proguard/proguard-android.txtã€‚</p>
<p>ä¸‹é¢çœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶çš„é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># ä¸ä½¿ç”¨å¤§å°å†™æ··åˆç±»å</span><br><span class="line">-dontusemixedcaseclassnames</span><br><span class="line"># ä¸è·¯è¿‡å¼•ç”¨åº“ä¸­çš„épublicç±»</span><br><span class="line">-dontskipnonpubliclibraryclasses</span><br><span class="line"># è¾“å‡ºæ›´å¤šä¿¡æ¯</span><br><span class="line">-verbose</span><br><span class="line"></span><br><span class="line"># ä¸è¿›è¡Œä¼˜åŒ–</span><br><span class="line">-dontoptimize</span><br><span class="line"># ä¸è¿›è¡Œé¢„æ ¡éªŒ</span><br><span class="line">-dontpreverify</span><br><span class="line"></span><br><span class="line"># keepæ³¨è§£</span><br><span class="line">-keepattributes *Annotation*</span><br><span class="line">#keep google licenseæœåŠ¡æ¥å£</span><br><span class="line">-keep public class com.google.vending.licensing.ILicensingService</span><br><span class="line">-keep public class com.android.vending.licensing.ILicensingService</span><br><span class="line"></span><br><span class="line"># keep nativeæ–¹æ³•åŠå…¶æ‰€å±ç±»</span><br><span class="line">-keepclasseswithmembernames class * &#123;</span><br><span class="line">    native &lt;methods&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># keepè‡ªå®šä¹‰viewçš„get/setæ–¹æ³•</span><br><span class="line">-keepclassmembers public class * extends android.view.View &#123;</span><br><span class="line">   void set*(***);</span><br><span class="line">   *** get*();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># keepç»§ç»­è‡ªActivityä¸­æ‰€æœ‰åŒ…å«public void *(android.view.View)ç­¾åçš„æ–¹æ³•ï¼Œå¦‚onClick</span><br><span class="line">-keepclassmembers class * extends android.app.Activity &#123;</span><br><span class="line">   public void *(android.view.View);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># keepæšä¸¾ä¸­çš„valueså’ŒvalueOfæ–¹æ³•</span><br><span class="line">-keepclassmembers enum * &#123;</span><br><span class="line">    public static **[] values();</span><br><span class="line">    public static ** valueOf(java.lang.String);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># keep Parcelableçš„CREATORæˆå‘˜</span><br><span class="line">-keepclassmembers class * implements android.os.Parcelable &#123;</span><br><span class="line">  public static final android.os.Parcelable$Creator CREATOR;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># keep Ræ–‡ä»¶çš„é™æ€å­—æ®µ</span><br><span class="line">-keepclassmembers class **.R$* &#123;</span><br><span class="line">    public static &lt;fields&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># ä¸è¾“å‡ºsupportåŒ…ä¸­çš„è­¦å‘Š</span><br><span class="line">-dontwarn android.support.**</span><br></pre></td></tr></table></figure>
<h2 id="å…¸å‹libraryåº“çš„é…ç½®"><a href="#å…¸å‹libraryåº“çš„é…ç½®" class="headerlink" title="å…¸å‹libraryåº“çš„é…ç½®"></a>å…¸å‹libraryåº“çš„é…ç½®</h2><p>ç¤ºä¾‹å¼•ç”¨è‡ªå®˜æ–¹æ–‡æ¡£samples:<em><a href="https://www.guardsquare.com/en/products/proguard/manual/examples#library" target="_blank" rel="noopener">https://www.guardsquare.com/en/products/proguard/manual/examples#library</a></em></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># è¿™ä¸ªé…ç½®æœªå¼„æ¸…æ¥šï¼Œå¾…æµ‹è¯•</span><br><span class="line">-renamesourcefileattribute SourceFile </span><br><span class="line">-keepattributes Exceptions,InnerClasses,Signature,Deprecated,</span><br><span class="line">                SourceFile,LineNumberTable,*Annotation*,EnclosingMethod </span><br><span class="line"></span><br><span class="line"># keepæ‰€æœ‰ç±»çš„protectedæˆå‘˜</span><br><span class="line">-keep public class * &#123; </span><br><span class="line">      public protected *; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"># keepåœ¨jdk 1.2ä¸­ç¼–è¯‘å™¨æ’å…¥çš„ä»£ç </span><br><span class="line">-keepclassmembernames class * &#123; </span><br><span class="line">    java.lang.Class class$(java.lang.String); </span><br><span class="line">    java.lang.Class class$(java.lang.String, boolean); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"># keep nativeæ–¹æ³•</span><br><span class="line">-keepclasseswithmembernames,includedescriptorclasses class * &#123; </span><br><span class="line">    native &lt;methods&gt;; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"># keepæšä¸¾ä¸­çš„valueså’ŒvalueOfæ–¹æ³•</span><br><span class="line">-keepclassmembers,allowoptimization enum * &#123; </span><br><span class="line">    public static **[] values(); </span><br><span class="line">    public static ** valueOf(java.lang.String); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"># keepç³»åˆ—åŒ–ç›¸å…³æ–¹æ³•</span><br><span class="line">-keepclassmembers class * implements java.io.Serializable &#123; </span><br><span class="line">    static final long serialVersionUID; </span><br><span class="line">    private static final java.io.ObjectStreamField[] serialPersistentFields; </span><br><span class="line">    private void writeObject(java.io.ObjectOutputStream); </span><br><span class="line">    private void readObject(java.io.ObjectInputStream); </span><br><span class="line">    java.lang.Object writeReplace(); </span><br><span class="line">    java.lang.Object readResolve(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸€ä¸ªå…¸å‹Android-Appçš„é…ç½®"><a href="#ä¸€ä¸ªå…¸å‹Android-Appçš„é…ç½®" class="headerlink" title="ä¸€ä¸ªå…¸å‹Android Appçš„é…ç½®"></a>ä¸€ä¸ªå…¸å‹Android Appçš„é…ç½®</h2><p>ç¤ºä¾‹å¼•ç”¨è‡ªå®˜æ–¹æ–‡æ¡£samples:<em><a href="https://www.guardsquare.com/en/products/proguard/manual/examples#androidapplication" target="_blank" rel="noopener">https://www.guardsquare.com/en/products/proguard/manual/examples#androidapplication</a></em></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-dontpreverify </span><br><span class="line">-repackageclasses &apos;&apos; </span><br><span class="line">-allowaccessmodification </span><br><span class="line"># ä¸ä¼˜åŒ–ç®—æ³•æŒ‡ä»¤</span><br><span class="line">-optimizations !code/simplification/arithmetic </span><br><span class="line">-keepattributes *Annotation* </span><br><span class="line"></span><br><span class="line"># keepç»§æ‰¿è‡ªç³»ç»Ÿç»„ä»¶çš„ç±»</span><br><span class="line">-keep public class * extends android.app.Activity </span><br><span class="line">-keep public class * extends android.app.Application </span><br><span class="line">-keep public class * extends android.app.Service </span><br><span class="line">-keep public class * extends android.content.BroadcastReceiver </span><br><span class="line">-keep public class * extends android.content.ContentProvider</span><br><span class="line"></span><br><span class="line"># keepè‡ªå®šä¹‰viewåŠå…¶æ„é€ æ–¹æ³•ã€setæ–¹æ³•</span><br><span class="line">-keep public class * extends android.view.View &#123; </span><br><span class="line">      public &lt;init&gt;(android.content.Context); </span><br><span class="line">      public &lt;init&gt;(android.content.Context, android.util.AttributeSet); </span><br><span class="line">      public &lt;init&gt;(android.content.Context, android.util.AttributeSet, int); </span><br><span class="line">      public void set*(...); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">-keepclasseswithmembers class * &#123; </span><br><span class="line">    public &lt;init&gt;(android.content.Context, android.util.AttributeSet); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">-keepclasseswithmembers class * &#123; </span><br><span class="line">    public &lt;init&gt;(android.content.Context, android.util.AttributeSet, int); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">-keepclassmembers class * extends android.content.Context &#123; </span><br><span class="line">    public void *(android.view.View); </span><br><span class="line">    public void *(android.view.MenuItem); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">-keepclassmembers class * implements android.os.Parcelable &#123; </span><br><span class="line">    static ** CREATOR; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">-keepclassmembers class **.R$* &#123; </span><br><span class="line">    public static &lt;fields&gt;; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"># keep javascriptæ³¨é‡Šçš„æ–¹æ³•ï¼Œä½¿ç”¨åˆ°webview jså›è°ƒæ–¹æ³•çš„éœ€è¦æ·»åŠ æ­¤é…ç½®</span><br><span class="line">-keepclassmembers class * &#123; </span><br><span class="line">    @android.webkit.JavascriptInterface &lt;methods&gt;; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å…³äºåå°„"><a href="#å…³äºåå°„" class="headerlink" title="å…³äºåå°„"></a>å…³äºåå°„</h1><p>å¹¶ä¸æ˜¯æ‰€æœ‰ä¼šè¢«åå°„å¼•ç”¨çš„ç±»éƒ½å¿…é¡»keepï¼Œåœ¨proguradè¿‡ç¨‹ä¸­èƒ½ç›´æ¥åˆ†æåˆ°å¼•ç”¨çš„ç±»ä¼šè¢«proguardåšç›¸åº”çš„å¤„ç†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Class.forNameçš„ç±»å&quot;SomeClass&quot;è¢«æ··æ·†åè‡ªåŠ¨æ›¿æ¢</span><br><span class="line">Class.forName(&quot;SomeClass&quot;)</span><br><span class="line">SomeClass.class</span><br><span class="line"># ä»¥ä¸‹å­—æ®µå’Œæ–¹æ³•åéƒ½ä¼šåœ¨è¢«æ··æ·†åè‡ªåŠ¨æ›¿æ¢</span><br><span class="line">SomeClass.class.getField(&quot;someField&quot;)</span><br><span class="line">SomeClass.class.getDeclaredField(&quot;someField&quot;)</span><br><span class="line">SomeClass.class.getMethod(&quot;someMethod&quot;, new Class[] &#123;&#125;)</span><br><span class="line">SomeClass.class.getMethod(&quot;someMethod&quot;, new Class[] &#123; A.class &#125;)</span><br><span class="line">SomeClass.class.getMethod(&quot;someMethod&quot;, new Class[] &#123; A.class, B.class &#125;)</span><br><span class="line">SomeClass.class.getDeclaredMethod(&quot;someMethod&quot;, new Class[] &#123;&#125;)</span><br><span class="line">SomeClass.class.getDeclaredMethod(&quot;someMethod&quot;, new Class[] &#123; A.class &#125;)</span><br><span class="line">SomeClass.class.getDeclaredMethod(&quot;someMethod&quot;, new Class[] &#123; A.class, B.class &#125;)</span><br><span class="line">AtomicIntegerFieldUpdater.newUpdater(SomeClass.class, &quot;someField&quot;)</span><br><span class="line">AtomicLongFieldUpdater.newUpdater(SomeClass.class, &quot;someField&quot;)</span><br><span class="line">AtomicReferenceFieldUpdater.newUpdater(SomeClass.class, SomeType.class, &quot;someField&quot;)</span><br></pre></td></tr></table></figure>
<p>éªŒè¯ä¸€ä¸‹ï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">Class&lt;?&gt; clazz = Class.forName(<span class="string">"com.rush.test.SimpleClass1"</span>);</span><br><span class="line">clazz.getDeclaredMethod(<span class="string">"Test1"</span>);</span><br><span class="line">SimpleClass2.class.getDeclaredField("mTestField");</span><br><span class="line">SimpleClass2.class.getDeclaredMethod("Test2");</span><br></pre></td></tr></table></figure>
<p>å¯¹ä»¥ä¸Šä»£ç ç¼–è¯‘å¹¶proguardï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">Class.forName(<span class="string">"com.rush.a.a"</span>).getDeclaredMethod(<span class="string">"Test1"</span>, <span class="keyword">new</span> Class[<span class="number">0</span>]);</span><br><span class="line">b.class.getDeclaredField("a");</span><br><span class="line">b.class.getDeclaredMethod("a", new Class[0]);</span><br></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡Class.forNameåå°„çš„class com.rush.test.SimpleClass1â€è¢«è‡ªåŠ¨æ›¿æ¢æˆäº†â€com.rush.a.aâ€ï¼›</li>
<li>ä½†é€šè¿‡Class.forNameè·å–çš„classå†å»åå°„æ–¹æ³•æ²¡æœ‰æ­£ç¡®å¤„ç†ï¼›</li>
<li>é€šè¿‡å®Œæ•´class.getDeclaredFieldæˆ–è€…getDeclaredMethodåå°„æ—¶èƒ½å¤ŸæŠŠå­—æ®µåå’Œæ–¹æ³•åè‡ªåŠ¨æ›¿æ¢æ‰ã€‚</li>
</ul>
<p>ä»ç»“æœçœ‹ï¼Œåå°„å¹¶ä¸æ˜¯å¤§å®¶æƒ³åƒçš„é‚£æ ·å¿…é¡»keepï¼Œproguardèƒ½è‡ªåŠ¨åˆ†æåˆ°å¼•ç”¨çš„æƒ…å†µéƒ½èƒ½æ­£ç¡®å¤„ç†ã€‚ä½†æœ‰äº›ç±»æ˜¯åœ¨é…ç½®æ–‡ä»¶é‡Œé…ç½®ï¼Œæˆ–è€…åŠ¨æ€æ‹¼æ¥ç±»ååå°„çš„ï¼Œè¿™äº›æƒ…å†µéœ€è¦åšå¥½keepã€‚</p>
<p>ä¸ºäº†é—®é¢˜è¿½è¸ªçš„æ–¹ä¾¿ï¼Œå»ºè®®æ‰€æœ‰ä¼šè¢«åå°„å¼•ç”¨çš„ä»£ç å’Œlibrary publicæ¥å£éƒ½åšå¥½keepã€‚</p>
<h1 id="å…³äºproguardé…ç½®çš„ä¸€äº›å»ºè®®"><a href="#å…³äºproguardé…ç½®çš„ä¸€äº›å»ºè®®" class="headerlink" title="å…³äºproguardé…ç½®çš„ä¸€äº›å»ºè®®"></a>å…³äºproguardé…ç½®çš„ä¸€äº›å»ºè®®</h1><ul>
<li>æ‰€æœ‰ä¼šè¢«åå°„å¼•ç”¨çš„ç±»éƒ½åšå¥½keepï¼ˆå»ºè®®ï¼Œè™½ç„¶æœ‰äº›åå°„èƒ½è¢«æ­£ç¡®å¤„ç†ï¼‰ã€‚<br>å¦‚nativeæ–¹æ³•ï¼Œå››å¤§ç»„ä»¶ï¼Œæ¥å£modelï¼Œæšä¸¾ï¼Œåºåˆ—åŒ–ç±»ç­‰ã€‚</li>
<li>åªkeepå¿…é¡»ä¿ç•™çš„å†…å®¹ï¼Œä¸è¦è¿‡åº¦keep</li>
<li>ä½¿ç”¨çƒ­ä¿®å¤çš„Appï¼Œæ·»åŠ -dontoptimizeé…ç½®</li>
</ul>
<h1 id="èµ„æºæ··æ·†"><a href="#èµ„æºæ··æ·†" class="headerlink" title="èµ„æºæ··æ·†"></a>èµ„æºæ··æ·†</h1><p><code>AndResGuard</code>æ˜¯ä¸€ä¸ªå¸®åŠ©ä½ ç¼©å°APKå¤§å°çš„å·¥å…·ï¼Œä»–çš„åŸç†ç±»ä¼¼Java Proguardï¼Œä½†æ˜¯åªé’ˆå¯¹èµ„æºã€‚ä»–ä¼šå°†åŸæœ¬å†—é•¿çš„èµ„æºè·¯å¾„å˜çŸ­ï¼Œä¾‹å¦‚å°†<code>res/drawable/wechatå˜ä¸ºr/d/a</code>ã€‚</p>
<p><code>AndResGuard</code>ä¸æ¶‰åŠç¼–è¯‘è¿‡ç¨‹ï¼Œåªéœ€è¾“å…¥ä¸€ä¸ªapk(æ— è®ºç­¾åä¸å¦ï¼Œ<code>debug</code>ç‰ˆï¼Œ<code>release</code>ç‰ˆå‡å¯ï¼Œåœ¨å¤„ç†è¿‡ç¨‹ä¸­ä¼šç›´æ¥å°†åŸç­¾ååˆ é™¤)ï¼Œå¯å¾—åˆ°ä¸€ä¸ªå®ç°èµ„æºæ··æ·†åçš„apk(è‹¥åœ¨é…ç½®æ–‡ä»¶ä¸­è¾“å…¥ç­¾åä¿¡æ¯ï¼Œå¯è‡ªåŠ¨é‡ç­¾åå¹¶å¯¹é½ï¼Œå¾—åˆ°å¯ç›´æ¥å‘å¸ƒçš„apk)ä»¥åŠå¯¹åº”èµ„æºIDçš„mappingæ–‡ä»¶ã€‚</p>
<p>github:<a href="https://github.com/shwenzhang/AndResGuard/blob/master/README.zh-cn.md" target="_blank" rel="noopener">https://github.com/shwenzhang/AndResGuard/blob/master/README.zh-cn.md</a></p>
<p>åŸç†:<a href="https://mp.weixin.qq.com/s?__biz=MzAwNDY1ODY2OQ==&amp;mid=208135658&amp;idx=1&amp;sn=ac9bd6b4927e9e82f9fa14e396183a8f#rd" target="_blank" rel="noopener">https://mp.weixin.qq.com/s?__biz=MzAwNDY1ODY2OQ==&amp;mid=208135658&amp;idx=1&amp;sn=ac9bd6b4927e9e82f9fa14e396183a8f#rd</a></p>
<h1 id="ä¸§å¿ƒç—…ç‹‚çš„æ··æ·†æ“ä½œ"><a href="#ä¸§å¿ƒç—…ç‹‚çš„æ··æ·†æ“ä½œ" class="headerlink" title="ä¸§å¿ƒç—…ç‹‚çš„æ··æ·†æ“ä½œ"></a>ä¸§å¿ƒç—…ç‹‚çš„æ··æ·†æ“ä½œ</h1><p>åŸç†ï¼šæ··æ·†æ˜¯å¯ä»¥é…ç½®è¯å…¸,<a href="https://mp.weixin.qq.com/s/ya0RiLuHfIBrPLkl2lTbaA" target="_blank" rel="noopener">åŸæ–‡é“¾æ¥</a></p>
<p>éšä¾¿æ‰¾ä¸€ä¸ªå¼€æºé¡¹ç›®ä¸Šæ‰‹</p>
<p><a href="https://github.com/kingwang666/GetApk" target="_blank" rel="noopener">https://github.com/kingwang666/GetApk</a></p>
<p>å¼€å¯æ··æ·†</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">buildTypes &#123;</span><br><span class="line">    debug &#123;</span><br><span class="line">        minifyEnabled <span class="keyword">true</span></span><br><span class="line">        proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢é…ç½®äº†æ··æ·†æ–‡ä»¶åŒ…å«ï¼š<code>proguard-rules.pro</code></p>
<p>å’Œmouduleçš„build.gradleåœ¨åŒä¸€ç›®å½•ï¼Œåœ¨é‡Œé¢å¯ä»¥æ·»åŠ ä½ çš„è¯å…¸é…ç½®ï¼š</p>
<p><img src="demo.png" alt></p>
<blockquote>
<p>å¼ºçƒˆå»ºè®®ï¼Œå¼€å¯æ··æ·†åï¼Œé…ç½®è¯å…¸å‰ï¼Œå…ˆæ‰“ä¸ªåŒ…è¿è¡Œä¸€ä¸‹ç¡®å®šå¯ä»¥æ­£å¸¸è¿è¡Œã€‚</p>
</blockquote>
<p>æœ€åä¸Šé¢çš„æ··æ·†è¯å…¸ï¼Œåˆ†åˆ«æ¥è‡ªä¸åŒçš„å¼€æºé¡¹ç›®ï¼š</p>
<p><a href="https://github.com/RockyQu/ProguardDictionary" target="_blank" rel="noopener">https://github.com/RockyQu/ProguardDictionary</a></p>
<p>åŒ…å«ä½¿ç”¨Javaå…³é”®è¯çš„è¯å…¸ã€‚</p>
<p><a href="https://github.com/o2e/ProguardDictionaryGenerator" target="_blank" rel="noopener">https://github.com/o2e/ProguardDictionaryGenerator</a></p>
<p>åŒ…å«æœ€åé‚£ä¸ªå…¨æ˜¯éå¸¸ç¥å¥‡çš„å­—ç¬¦çš„ã€‚</p>
<p><a href="https://github.com/WrBug/FrenziedProguard" target="_blank" rel="noopener">https://github.com/WrBug/FrenziedProguard</a></p>
<p>åŒ…å«1il,ä¸­æ–‡ï¼Œ0oOçš„ã€‚</p>
<blockquote>
<p>æ”¾ä¸€ä¸ªæ··æ·†åçš„apkåœ°å€ï¼Œå¦‚æœå®åœ¨æ‡’å¾—runåˆæƒ³çœ‹çœ‹æ•ˆæœï¼š<br><a href="http://wanandroid.com/blogimgs/57ed3c61-08ee-4a3f-b859-f3cd1d748437.apk" target="_blank" rel="noopener">http://wanandroid.com/blogimgs/57ed3c61-08ee-4a3f-b859-f3cd1d748437.apk</a></p>
</blockquote>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="https://www.jianshu.com/p/60e82aafcfd0" target="_blank" rel="noopener">https://www.jianshu.com/p/60e82aafcfd0</a></p>
<p><a href="https://rockycoder.cn/android/2018/03/15/Android-proguard-rules.html" target="_blank" rel="noopener">https://rockycoder.cn/android/2018/03/15/Android-proguard-rules.html</a></p>
<p><a href="https://juejin.im/post/5ae7edc7f265da0b776f7a95" target="_blank" rel="noopener">https://juejin.im/post/5ae7edc7f265da0b776f7a95</a></p>
<p><a href="https://www.imooc.com/learn/879" target="_blank" rel="noopener">https://www.imooc.com/learn/879</a></p>
<p><a href="https://mp.weixin.qq.com/s/BP3SIDaxAy4-5rZYMibpmA" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/BP3SIDaxAy4-5rZYMibpmA</a></p>
<p><a href="https://www.guardsquare.com/en/proguard/manual/introduction" target="_blank" rel="noopener">https://www.guardsquare.com/en/proguard/manual/introduction</a></p>
<p><a href="https://www.guardsquare.com/en/proguard/manual/usage" target="_blank" rel="noopener">https://www.guardsquare.com/en/proguard/manual/usage</a></p>
<p><a href="https://www.guardsquare.com/en/proguard/manual/examples" target="_blank" rel="noopener">https://www.guardsquare.com/en/proguard/manual/examples</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Macåº”ç”¨ç¨‹åºæ— æ³•æ‰“å¼€æˆ–æ–‡ä»¶æŸåçš„å¤„ç†æ–¹æ³•</title>
    <url>/2019/04/12/Mac%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80%E6%88%96%E6%96%87%E4%BB%B6%E6%8D%9F%E5%9D%8F%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä»Šå¤©å®‰è£…ä¸€äº›è½¯ä»¶æ—¶é‡åˆ°äº† <strong>æ— æ³•æ‰“å¼€æˆ–æ–‡ä»¶æŸåçš„Macåº”ç”¨ç¨‹åº</strong>ï¼Œæ‰€ä»¥æŸ¥äº†ä¸€ä¸‹è§£å†³åŠæ³•ï¼Œè®°å½•åœ¨äº†åšå®¢ä¸‹ã€‚</p>
<p>æœ¬äººæœºå™¨ç³»ç»Ÿç‰ˆæœ¬<code>Mojave 10.14.4</code></p>
<a id="more"></a>
<h1 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h1><p>å¤§å¤šæ•°ç”¨æˆ·åœ¨å®‰è£… Mac åº”ç”¨æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°æç¤º â€œ XXX.app å·²æŸåï¼Œæ‰“ä¸å¼€ã€‚æ‚¨åº”è¯¥å°†å®ƒç§»åˆ°åºŸçº¸ç¯“ â€ æˆ– â€œ æ‰“ä¸å¼€ XXX.appï¼Œå› ä¸ºå®ƒæ¥è‡ªèº«ä»½ä¸æ˜çš„å¼€å‘è€… â€ ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="f1.png" alt></p>
<p><img src="f2.png" alt></p>
<p><strong>1. æ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½®ç•Œé¢ï¼Œè¿›å…¥å®‰å…¨æ€§ä¸éšç§</strong></p>
<p><img src="f3.jpeg" alt></p>
<p><strong>2. ç‚¹æŒ‰å·¦ä¸‹è§’çš„é”å¤´å›¾æ ‡ï¼Œè§£é”æ›´æ”¹æƒé™</strong></p>
<p><strong>3. å°†å…è®¸ä»ä»¥ä¸‹ä½ç½®ä¸‹è½½çš„åº”ç”¨ï¼Œæ›´æ”¹ä¸º â€œ ä»»ä½•æ¥æº â€ ï¼Œç„¶åå†æ‰“å¼€åº”ç”¨å³å¯</strong></p>
<p><img src="f4.jpeg" alt></p>
<p>è‹¥æ²¡æœ‰â€œä»»ä½•æ¥æºâ€è¿™ä¸ªé€‰é¡¹ï¼ˆ<code>macOS Sierra 10.12</code>åŠä»¥ä¸Šçš„ç”¨æˆ·å¯èƒ½ä¼šé‡åˆ°ï¼‰ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œï¼š<br>æ‰“å¼€ç»ˆç«¯<code>ï¼ˆTerminal.appï¼‰</code><br>æ‹·è´ç²˜è´´<code>sudo spctl --master-disable</code>ï¼ŒæŒ‰å›è½¦é”®</p>
<p>è¾“å…¥ä½ çš„è´¦æˆ·å¯†ç ï¼ŒæŒ‰å›è½¦é”®ç¡®è®¤æ‰§è¡Œï¼ˆè¯¥å¯†ç ä¸ä¼šæ˜¾ç¤ºï¼Œç›´æ¥è¾“å…¥å³å¯ï¼‰</p>
<p><img src="f5.png" alt></p>
<p><img src="f6.png" alt></p>
<h1 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h1><p>å¦‚å®‰è£…åº”ç”¨æ—¶ï¼Œå‡ºç° â€œ æ‰“ä¸å¼€ XXX.appï¼Œå› ä¸ºå®ƒæ¥è‡ªèº«ä»½ä¸æ˜çš„å¼€å‘è€… â€ ï¼Œå¹¶æç¤ºä½ çš„è½¯ä»¶åœ¨ä»€ä¹ˆä½ç½®ä»€ä¹ˆæ—¶é—´ä¸‹è½½äº†ç£ç›˜å½±åƒã€‚å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="f7.png" alt></p>
<p><strong>1ã€å°†è½¯ä»¶æ”¾å…¥â€œåº”ç”¨ç¨‹åºâ€åï¼Œç‚¹å‡»è½¯ä»¶ å³é”®-æ‰“å¼€ ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</strong></p>
<p><img src="f8.png" alt></p>
<p><strong>2ã€å¼¹å‡ºä»¥ä¸‹å¯¹è¯æ¡†åï¼Œä½ æ‰“å¼€å³å¯ã€‚</strong></p>
<p><img src="f9.png" alt></p>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="http://www.puasu.com/article/share/201805/10.html" target="_blank" rel="noopener">http://www.puasu.com/article/share/201805/10.html</a></p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§»åŠ¨ç«¯å‰ç«¯å¼€å‘ä¹‹viewport</title>
    <url>/2019/04/11/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B9%8Bviewport/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>æµè§ˆå™¨çš„<code>viewport</code>æ˜¯å¯ä»¥çœ‹åˆ°Webå†…å®¹çš„çª—å£åŒºåŸŸï¼Œé€šå¸¸ä¸æ¸²æŸ“å‡ºçš„é¡µé¢çš„å¤§å°ä¸åŒï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šæä¾›æ»šåŠ¨æ¡ä»¥æ»šåŠ¨è®¿é—®æ‰€æœ‰å†…å®¹ã€‚</p>
<p>çª„å±å¹•è®¾å¤‡ï¼ˆå¦‚ç§»åŠ¨è®¾å¤‡ï¼‰åœ¨ä¸€ä¸ªè™šæ‹Ÿçª—å£æˆ–è§†å£ä¸­æ¸²æŸ“é¡µé¢ï¼Œè¿™ä¸ªçª—å£æˆ–è§†å£é€šå¸¸æ¯”å±å¹•å®½ï¼›ç„¶åç¼©å°æ¸²æŸ“çš„ç»“æœï¼Œä»¥ä¾¿åœ¨ä¸€å±å†…æ˜¾ç¤ºæ‰€æœ‰å†…å®¹ã€‚ç„¶åç”¨æˆ·å¯ä»¥ç§»åŠ¨ã€ç¼©æ”¾ä»¥æŸ¥çœ‹é¡µé¢çš„ä¸åŒåŒºåŸŸã€‚ä¾‹å¦‚ï¼Œå¦‚æœç§»åŠ¨å±å¹•çš„å®½åº¦ä¸º640pxï¼Œåˆ™å¯èƒ½ä¼šç”¨980pxçš„è™šæ‹Ÿè§†å£æ¸²æŸ“é¡µé¢ï¼Œç„¶åç¼©å°é¡µé¢ä»¥é€‚åº”640pxçš„çª—å£å¤§å°ã€‚</p>
<p>è¿™æ ·åšæ˜¯å› ä¸ºè®¸å¤šé¡µé¢æ²¡æœ‰åšç§»åŠ¨ç«¯ä¼˜åŒ–ï¼Œåœ¨å°çª—å£æ¸²æŸ“æ—¶ä¼šä¹±æ‰ï¼ˆæˆ–çœ‹èµ·æ¥ä¹±ï¼‰ã€‚æ‰€ä»¥ï¼Œè¿™ç§è™šæ‹Ÿè§†å£æ˜¯ä¸€ç§è®©æœªåšç§»åŠ¨ç«¯ä¼˜åŒ–çš„ç½‘ç«™åœ¨çª„å±è®¾å¤‡ä¸Šçœ‹èµ·æ¥æ›´å¥½çš„åŠæ³•ã€‚</p>
<a id="more"></a>
<h1 id="ç§»åŠ¨æµè§ˆå™¨çš„é—®é¢˜"><a href="#ç§»åŠ¨æµè§ˆå™¨çš„é—®é¢˜" class="headerlink" title="ç§»åŠ¨æµè§ˆå™¨çš„é—®é¢˜"></a>ç§»åŠ¨æµè§ˆå™¨çš„é—®é¢˜</h1><p>å½“æˆ‘ä»¬å°†ç§»â€‹â€‹åŠ¨æµè§ˆå™¨ä¸æ¡Œé¢æµè§ˆå™¨è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œæœ€æ˜æ˜¾çš„åŒºåˆ«æ˜¯å±å¹•å°ºå¯¸ã€‚ç§»åŠ¨æµè§ˆå™¨æ˜¾ç¤ºçš„æ¡Œé¢ä¼˜åŒ–ç½‘ç«™æ˜¾ç€å°‘äºæ¡Œé¢æµè§ˆå™¨; é€šè¿‡ç¼©å°ç›´åˆ°æ–‡æœ¬ä¸å¯è¯»çš„å°ï¼Œæˆ–è€…åªæ˜¾ç¤ºé€‚åˆå±å¹•çš„ç½‘ç«™çš„ä¸€å°éƒ¨åˆ†ã€‚</p>
<p>ç§»åŠ¨å±å¹•è¿œå°äºæ¡Œé¢å±å¹•; è€ƒè™‘æœ€å¤§å®½åº¦ä¸º400pxï¼Œæœ‰æ—¶å€™è¦å°‘å¾—å¤šã€‚ï¼ˆæœ‰äº›æ‰‹æœºæŠ¥å‘Šçš„å®½åº¦è¾ƒå¤§ï¼Œä½†å®ƒä»¬æ­£åœ¨æ’’è° - æˆ–è€…è‡³å°‘ç»™æˆ‘ä»¬æ— ç”¨çš„ä¿¡æ¯ã€‚ï¼‰</p>
<p>å¹³æ¿ç”µè„‘è®¾å¤‡çš„ä¸­é—´å±‚ï¼Œå¦‚iPadæˆ–ä¼ é—»ä¸­çš„åŸºäºHP webOSçš„å¹³æ¿è®¾å¤‡ï¼Œå°†å¼¥åˆæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡ä¹‹é—´çš„å·®è·ï¼Œä½†è¿™ä¸ä¼šæ”¹å˜æ ¹æœ¬é—®é¢˜ã€‚ç½‘ç«™ä¹Ÿå¿…é¡»åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè¿è¡Œï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»è®©å®ƒä»¬åœ¨å°å±å¹•ä¸Šæ˜¾ç¤ºã€‚</p>
<p>æœ€é‡è¦çš„é—®é¢˜é›†ä¸­åœ¨CSSä¸Šï¼Œå°¤å…¶æ˜¯è§†å£çš„å°ºå¯¸ã€‚å¦‚æœæˆ‘ä»¬ä¸€å¯¹ä¸€åœ°å¤åˆ¶æ¡Œé¢æ¨¡å‹ï¼Œæˆ‘ä»¬çš„CSSå°±ä¼šå¼€å§‹æƒ¨ä¸å¿ç¹ã€‚</p>
<p>è®©æˆ‘ä»¬å›åˆ°æˆ‘ä»¬çš„ä¾§è¾¹æ å§width: 10%ã€‚å¦‚æœç§»åŠ¨æµè§ˆå™¨ä¸æ¡Œé¢æµè§ˆå™¨å®Œå…¨ç›¸åŒï¼Œé‚£ä¹ˆå®ƒä»¬æœ€å¤šåªèƒ½ç”Ÿæˆ40pxå®½çš„å…ƒç´ ï¼Œè€Œä¸”è¿™ä¸ªå…ƒç´ å¤ªçª„äº†ã€‚ä½ çš„æ¶²ä½“å¸ƒå±€çœ‹èµ·æ¥ä¼šéå¸¸å¯æ€•ã€‚</p>
<p>è§£å†³é—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯ä¸ºç§»åŠ¨æµè§ˆå™¨æ„å»ºä¸€ä¸ªç‰¹æ®Šç½‘ç«™ã€‚å³ä½¿é™¤äº†ä½ æ˜¯å¦åº”è¯¥è¿™æ ·åšçš„æ ¹æœ¬é—®é¢˜ä¹‹å¤–ï¼Œå®é™…çš„é—®é¢˜æ˜¯åªæœ‰æå°‘æ•°çš„ç½‘ç«™æ‰€æœ‰è€…è¢«å……åˆ†åˆ©ç”¨ä»¥æ»¡è¶³ç§»åŠ¨è®¾å¤‡çš„éœ€æ±‚ã€‚</p>
<p>ç§»åŠ¨æµè§ˆå™¨ä¾›åº”å•†å¸Œæœ›ä¸ºä»–ä»¬çš„å®¢æˆ·æä¾›æœ€ä½³ä½“éªŒï¼Œç°åœ¨è¿™æ„å‘³ç€â€œå°½å¯èƒ½åƒæ¡Œé¢ä¸€æ ·ã€‚â€å› æ­¤éœ€è¦ä¸€äº›æŠ€å·§ã€‚</p>
<h1 id="è®¾å¤‡åƒç´ å’ŒCSSåƒç´ "><a href="#è®¾å¤‡åƒç´ å’ŒCSSåƒç´ " class="headerlink" title="è®¾å¤‡åƒç´ å’ŒCSSåƒç´ "></a>è®¾å¤‡åƒç´ å’ŒCSSåƒç´ </h1><p>è®²è§£viewportè§†å£å‰å…ˆæ¥äº†è§£ä¸€ä¸‹è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µè™½ç„¶éƒ½æ˜¯è¯´åƒç´ ï¼Œä½†æ˜¯æ­¤åƒç´ éå½¼åƒç´ ã€‚</p>
<h2 id="è®¾å¤‡åƒç´ "><a href="#è®¾å¤‡åƒç´ " class="headerlink" title="è®¾å¤‡åƒç´ "></a>è®¾å¤‡åƒç´ </h2><p><strong>è®¾å¤‡åƒç´ </strong>ï¼ˆdevice pixelï¼‰æ˜¯ç‰©ç†æ¦‚å¿µï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¾ç¤ºå±æ˜¯ç”±ä¸€ä¸ªä¸ªç‰©ç†åƒç´ ç‚¹ç»„æˆçš„ï¼Œé€šè¿‡æ§åˆ¶æ¯ä¸ªåƒç´ ç‚¹çš„é¢œè‰²ï¼Œä½¿å±å¹•æ˜¾ç¤ºå‡ºä¸åŒçš„å›¾åƒï¼Œå±å¹•ä»å·¥å‚å‡ºæ¥é‚£å¤©èµ·ï¼Œå®ƒä¸Šé¢çš„ç‰©ç†åƒç´ ç‚¹å°±å›ºå®šä¸å˜äº†ï¼Œå•ä½ã€‚</p>
<blockquote>
<p>ptåœ¨csså•ä½ä¸­å±äºçœŸæ­£çš„ç»å¯¹å•ä½ï¼Œ1pt = 1/72(inch),inchåŠè‹±å¯¸ï¼Œè€Œ1è‹±å¯¸ç­‰äº2.54å˜ç±³ã€‚<br>pt = 1/72(è‹±å¯¸), px = 1/dpi(è‹±å¯¸)</p>
</blockquote>
<p>ä¸åŒçš„è®¾å¤‡ï¼Œå…¶å›¾åƒåŸºæœ¬å•ä½æ˜¯ä¸åŒçš„ï¼Œæ¯”å¦‚æ˜¾ç¤ºå™¨çš„ç‚¹è·ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯æ˜¾ç¤ºå™¨çš„ç‰©ç†åƒç´ ã€‚ç°åœ¨çš„æ¶²æ™¶æ˜¾ç¤ºå™¨çš„ç‚¹è·ä¸€èˆ¬åœ¨0.25mmåˆ°0.29mmä¹‹é—´ã€‚è€Œæ‰“å°æœºçš„å¢¨ç‚¹ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯æ‰“å°æœºçš„ç‰©ç†åƒç´ ï¼Œ300DPIå°±æ˜¯0.085mmï¼Œ600DPIå°±æ˜¯0.042mmã€‚</p>
<p><img src="dp.jpeg" alt></p>
<p><strong>æ³¨æ„</strong>ï¼Œæˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„æ˜¾ç¤ºå™¨åˆ†è¾¨ç‡ï¼Œå…¶å®æ˜¯æŒ‡æ¡Œé¢è®¾å®šçš„åˆ†è¾¨ç‡ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºå™¨çš„ç‰©ç†åˆ†è¾¨ç‡ã€‚åªä¸è¿‡ç°åœ¨æ¶²æ™¶æ˜¾ç¤ºå™¨æˆä¸ºä¸»æµï¼Œç”±äºæ¶²æ™¶çš„æ˜¾ç¤ºåŸç†ä¸CRTä¸åŒï¼Œåªæœ‰åœ¨æ¡Œé¢åˆ†è¾¨ç‡ä¸ç‰©ç†åˆ†è¾¨ç‡ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œæ˜¾ç¤ºæ•ˆæœæœ€ä½³ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬çš„æ¡Œé¢åˆ†è¾¨ç‡å‡ ä¹æ€»æ˜¯ä¸æ˜¾ç¤ºå™¨çš„ç‰©ç†åˆ†è¾¨ç‡ä¸€è‡´äº†ã€‚</p>
<h2 id="CSSåƒç´ "><a href="#CSSåƒç´ " class="headerlink" title="CSSåƒç´ "></a>CSSåƒç´ </h2><p><strong>CSSåƒç´ </strong>ï¼ˆcss pixelï¼‰æ˜¯Webç¼–ç¨‹æ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯CSSæ ·å¼ä»£ç ä¸­ä½¿ç”¨çš„é€»è¾‘åƒç´ ã€‚</p>
<p>åœ¨CSSè§„èŒƒä¸­ï¼Œé•¿åº¦å•ä½åˆ†ä¸ºä¸¤ç±»ï¼šç»å¯¹ï¼ˆabsoluteï¼‰å•ä½å’Œç›¸å¯¹ï¼ˆrelativeï¼‰å•ä½ã€‚è€Œpxæ˜¯ä¸€ä¸ªç›¸å¯¹å•ä½ï¼Œç›¸å¯¹äºè®¾å¤‡åƒç´ ã€‚</p>
<p><strong>CSSåƒç´ çš„ç›¸å¯¹æ€§</strong></p>
<p>ä¸¾ä¸ªä¾‹å­ç†è§£ï¼š</p>
<p>ä½¿ç”¨PCç«¯æµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªç½‘é¡µï¼Œç½‘é¡µä¸­æœ‰ä¸€ä¸ªå®½400pxçš„ç›’å­ï¼ˆå—çº§å…ƒç´ ï¼‰ã€‚æµè§ˆå™¨å®½ä¸º800pxï¼Œé‚£ä¹ˆè¿™ä¸ªç›’å­çš„å®½æ­¤æ—¶åº”è¯¥å æ®é¡µé¢çš„ä¸€åŠã€‚ä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨æµè§ˆå™¨ä¸­é¡µé¢æ”¾å¤§åŠŸèƒ½ï¼Œæ”¾å¤§200%ï¼Œä¹Ÿå°±æ˜¯åŸæ¥çš„ä¸¤å€ï¼Œé‚£ä¹ˆæ­¤æ—¶è¯¥ç›’å­å®½åº”è¯¥å æ»¡äº†æ•´ä¸ªé¡µé¢ã€‚ä½†æ˜¯æ—¢æ²¡æœ‰è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°ï¼Œä¹Ÿæ²¡æœ‰æ”¹å˜ä»»ä½•çš„cssæ ·å¼ï¼Œä½†æ˜¯è¯¥ç›’å­å´çœ‹ä¸Šå»æ”¾å¤§äº†ä¸€å€ã€‚è¿™æ˜¯å› ä¸ºä½¿ç”¨é¡µé¢æ”¾å¤§åŠŸèƒ½æŠŠcssåƒç´ æ”¾å¤§äº†ä¸¤å€ã€‚</p>
<p>CSSåƒç´ ä¸å±å¹•åƒç´ 1ï¼š1åŒæ ·å¤§å°æ—¶ï¼š</p>
<p><img src="csslizi1.png" alt></p>
<p>CSSåƒç´ (é»‘è‰²è¾¹æ¡†)å¼€å§‹è¢«æ‹‰ä¼¸ï¼Œæ­¤æ—¶1ä¸ªCSSåƒç´ å¤§äº1ä¸ªå±å¹•åƒç´ </p>
<p><img src="csslizi2.png" alt></p>
<p>é»˜è®¤æƒ…å†µä¸‹ä¸€ä¸ªCSSåƒç´ åº”è¯¥æ˜¯ç­‰åŒäºä¸€ä¸ªç‰©ç†åƒç´ çš„ï¼Œä½†æ˜¯æµè§ˆå™¨æ”¾å¤§çš„æ“ä½œè®©ä¸€ä¸ªCSSåƒç´ ç­‰äºä¸¤å€çš„è®¾å¤‡åƒç´ ã€‚</p>
<p>è€Œåœ¨ç§»åŠ¨ç«¯ä¸­çš„é«˜PPIçš„è®¾å¤‡ä¸Šï¼ŒCSSåƒç´ åœ¨é»˜è®¤æƒ…å†µä¸‹å°±ç›¸å½“äºå¤šä¸ªè®¾å¤‡åƒç´ ï¼Œå¦‚iPhone5ä½¿ç”¨çš„æ˜¯Retinaè§†ç½‘è†œå±å¹•ï¼Œä½¿ç”¨<code>2px * 2px</code>çš„è®¾å¤‡åƒç´ ä»£è¡¨<code>1px * 1px</code>çš„CSSåƒç´ ã€‚æ‰€ä»¥è®¾å¤‡åƒç´ ä¸º<code>640 * 1136</code>ï¼Œè€ŒCSSåƒç´ ä¸º<code>320px * 568px</code>ã€‚</p>
<p><strong>è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼ˆDevice Independent Pixelï¼‰ç®€å†™DIPæˆ–DP</strong></p>
<p>è®¾å¤‡ç‹¬ç«‹åƒç´ ä¹Ÿå« <strong>å¯†åº¦æ— å…³åƒç´ </strong> ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯è®¡ç®—æœºåæ ‡ç³»ç»Ÿä¸­çš„ä¸€ä¸ªç‚¹ï¼Œè¿™ä¸ªç‚¹è¡¨ç¤ºä¸€ä¸ªå¯ä»¥ç”±ç¨‹åºä½¿ç”¨å¹¶æ§åˆ¶çš„è™šæ‹Ÿåƒç´ ï¼Œå¯ä»¥ç”±ç›¸å…³ç³»ç»Ÿè½¬æ¢ä¸ºç‰©ç†åƒç´ ã€‚è®¾å¤‡ç‹¬ç«‹åƒç´ æ˜¯ä¸€ä¸ªæ•´ä½“æ¦‚å¿µï¼ŒåŒ…æ‹¬äº†cssåƒç´ ï¼Œæ¯”å¦‚:cssåƒç´ ï¼Œ<strong>åªæ˜¯åœ¨android /iosæœºä¸­ï¼Œcssåƒç´ ä¸å« â€œcssåƒç´ äº†â€ï¼Œè€Œå«â€œè®¾å¤‡ç‹¬ç«‹åƒç´ â€</strong>ã€‚iOS ä¸­çš„ pt å’Œå®‰å“ä¸­çš„å•ä½ dp æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œè®¾å¤‡éƒ½æ˜¯ç‹¬ç«‹åƒç´ çš„æ„æ€ï¼Œåªæ˜¯è¯´æ³•ä¸ä¸€æ ·ã€‚</p>
<blockquote>
<p>æ‰€ä»¥é€»è¾‘ä¸Šå„å•ä½çš„å…³ç³»ï¼šCSSåƒç´  = è®¾å¤‡ç‹¬ç«‹åƒç´  = é€»è¾‘åƒç´ </p>
</blockquote>
<h2 id="è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»"><a href="#è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»" class="headerlink" title="è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»"></a>è®¾å¤‡åƒç´ ä¸CSSåƒç´ çš„å…³ç³»</h2><p>äº†è§£å®ƒä»¬é—´çš„å…³ç³»æ—¶ï¼Œå…ˆæ¥äº†è§£ä¸¤ä¸ªæ¦‚å¿µï¼š<code>ppi</code>å’Œ<code>dpr</code></p>
<blockquote>
<p>PPIåƒç´ å¯†åº¦(pixel per inch) | DPRè®¾å¤‡åƒç´ æ¯”(device pixel ratio)</p>
</blockquote>
<h3 id="PPIï¼šå±å¹•å¯†åº¦"><a href="#PPIï¼šå±å¹•å¯†åº¦" class="headerlink" title="PPIï¼šå±å¹•å¯†åº¦"></a>PPIï¼šå±å¹•å¯†åº¦</h3><p><code>ppi</code>:è¡¨ç¤ºæ¯è‹±å¯¸æ‰€æ‹¥æœ‰çš„åƒç´ æ•°ç›®ï¼Œæ•°å€¼è¶Šé«˜ï¼Œä»£è¡¨æ˜¾ç¤ºå±èƒ½å¤Ÿä»¥è¶Šé«˜çš„å¯†åº¦æ˜¾ç¤ºå›¾åƒã€‚å³æ¯è‹±å¯¸åƒç´ å–å€¼ï¼Œæ›´ç¡®åˆ‡çš„è¯´æ³•åº”è¯¥æ˜¯åƒç´ å¯†åº¦ï¼Œä¹Ÿå°±æ˜¯è¡¡é‡å•ä½ç‰©ç†é¢ç§¯å†…æ‹¥æœ‰åƒç´ å€¼çš„æƒ…å†µã€‚</p>
<p><code>ppi</code>çš„è®¡ç®—å…¬å¼å¯ä»¥æŸ¥é˜…èµ„æ–™<a href="https://zh.wikipedia.org/wiki/%E6%AF%8F%E8%8B%B1%E5%AF%B8%E5%83%8F%E7%B4%A0" target="_blank" rel="noopener">ppiè®¡ç®—å…¬å¼</a>ã€‚</p>
<p><img src="ppicalc.png" alt></p>
<p>æ¥ç®—ä¸€ä¸‹æ•°å­¦</p>
<p><img src="calclizi.png" alt></p>
<p>å›¾ä¸­ä»¥å±å¹•å°ºå¯¸ä¸º4å¯¸çš„<code>iPhone 5s</code>ä¸ºä¾‹ï¼Œåˆ†è¾¨ç‡ä¸º<code>1136 x 640</code>ï¼Œä»£å…¥å…¬å¼åƒç´ å¯†åº¦ä¸º<code>326PPI</code>ã€‚è®¡ç®—ç»“æœä¼šæœ‰å‡ºå…¥ã€‚</p>
<blockquote>
<p><strong>DPI</strong>: æ¯è‹±å¯¸å¤šå°‘ç‚¹ã€‚å¦‚æœæ˜¯åœ¨å½“ç”¨äºæè¿°æ˜¾ç¤ºå™¨è®¾å¤‡æ—¶ï¼Œppiå’Œdpiæ˜¯åŒä¸€æ¦‚å¿µï¼Œæ˜¯ç›¸ç­‰çš„ã€‚</p>
<p>è¿™é‡Œçš„ç‚¹æ˜¯ä¸€ä¸ªæŠ½è±¡çš„å•ä½ï¼Œå®ƒå¯ä»¥æ˜¯å±å¹•åƒç´ ç‚¹ã€å›¾ç‰‡åƒç´ ç‚¹ä¹Ÿå¯ä»¥æ˜¯æ‰“å°æœºçš„å¢¨ç‚¹ã€‚</p>
<p>å¹³æ—¶ä½ å¯èƒ½ä¼šçœ‹åˆ°ä½¿ç”¨<code>DPI</code>æ¥æè¿°å›¾ç‰‡å’Œå±å¹•ï¼Œè¿™æ—¶çš„<code>DPI</code>åº”è¯¥å’Œ<code>PPI</code>æ˜¯ç­‰ä»·çš„ï¼Œ<code>DPI</code>æœ€å¸¸ç”¨çš„æ˜¯ç”¨äºæè¿°æ‰“å°æœºï¼Œè¡¨ç¤ºæ‰“å°æœºæ¯è‹±å¯¸å¯ä»¥æ‰“å°çš„ç‚¹æ•°ã€‚</p>
<p>ä¸€å¼ å›¾ç‰‡åœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ—¶ï¼Œå®ƒçš„åƒç´ ç‚¹æ•°æ˜¯è§„åˆ™æ’åˆ—çš„ï¼Œæ¯ä¸ªåƒç´ ç‚¹éƒ½æœ‰ç‰¹å®šçš„ä½ç½®å’Œé¢œè‰²ã€‚</p>
<p>å½“ä½¿ç”¨æ‰“å°æœºè¿›è¡Œæ‰“å°æ—¶ï¼Œæ‰“å°æœºå¯èƒ½ä¸ä¼šè§„åˆ™çš„å°†è¿™äº›ç‚¹æ‰“å°å‡ºæ¥ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªä¸ªæ‰“å°ç‚¹æ¥å‘ˆç°è¿™å¼ å›¾åƒï¼Œè¿™äº›æ‰“å°ç‚¹ä¹‹é—´ä¼šæœ‰ä¸€å®šçš„ç©ºéš™ï¼Œè¿™å°±æ˜¯<code>DPI</code>æ‰€æè¿°çš„ï¼šæ‰“å°ç‚¹çš„å¯†åº¦</p>
</blockquote>
<p><img src="dpiprint.png" alt></p>
<blockquote>
<p>åœ¨ä¸Šé¢çš„å›¾åƒä¸­æˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°ï¼Œæ‰“å°æœºæ˜¯å¦‚ä½•ä½¿ç”¨å¢¨ç‚¹æ¥æ‰“å°ä¸€å¼ å›¾åƒã€‚æ‰€ä»¥ï¼Œæ‰“å°æœºçš„<code>DPI</code>è¶Šé«˜ï¼Œæ‰“å°å›¾åƒçš„ç²¾ç»†ç¨‹åº¦å°±è¶Šé«˜ï¼ŒåŒæ—¶è¿™ä¹Ÿä¼šæ¶ˆè€—æ›´å¤šçš„å¢¨ç‚¹å’Œæ—¶é—´ã€‚</p>
</blockquote>
<h3 id="DPRï¼šè®¾å¤‡åƒç´ æ¯”"><a href="#DPRï¼šè®¾å¤‡åƒç´ æ¯”" class="headerlink" title="DPRï¼šè®¾å¤‡åƒç´ æ¯”"></a>DPRï¼šè®¾å¤‡åƒç´ æ¯”</h3><p>è®¾å¤‡åƒç´ æ¯”ï¼ˆdevice pixel ratioï¼‰å®šä¹‰äº†è®¾å¤‡åƒç´ å’Œè®¾å¤‡ç‹¬ç«‹åƒç´ ï¼ˆCSSåƒç´ ï¼‰çš„è½¬æ¢å…³ç³»ï¼Œå³ä¸€ä¸ªè®¾å¤‡åƒç´ å¯¹åº”å¤šå°‘ä¸ªè®¾å¤‡ç‹¬ç«‹åƒç´ ï¼ˆCSSåƒç´ ï¼‰ã€‚</p>
<ul>
<li>ä¸è®¾å¤‡çš„å…³ç³»ï¼š<code>DPR = å±å¹•æ¨ªå‘è®¾å¤‡åƒç´  / è®¾å¤‡PPI</code></li>
<li>ä¸è®¾å¤‡åƒç´ ã€CSSåƒç´ çš„å…³ç³»ï¼š<code>DPR = è®¾å¤‡åƒç´  / CSSåƒç´ </code></li>
<li>ä¸ <strong>ç†æƒ³è§†å£</strong>(ä¸‹æ–‡å°†æåˆ°)çš„å…³ç³»ï¼š<code>DPR = å±å¹•æ¨ªå‘è®¾å¤‡åƒç´  / ç†æƒ³è§†å£çš„å®½åº¦</code></li>
</ul>
<p>åœ¨ä¸€å°ç§»åŠ¨ç»ˆç«¯ä¸­ï¼Œè®¾å¤‡åƒç´ çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œä¸å¯å˜çš„ã€‚ä½†æ˜¯<code>è®¾å¤‡ç‹¬ç«‹åƒç´ dip</code>æ˜¯å¯ä»¥è¢«æ‹‰é•¿æˆ–å‹ç¼©çš„ã€‚</p>
<p><img src="whatisdip.png" alt></p>
<p>ä¾‹å¦‚iPhone5sä¸­ä½¿ç”¨çš„æ˜¯Retinaè§†ç½‘è†œå±å¹•ï¼Œå³PPIè¶…è¿‡300çš„éƒ½å«åšè¶…é«˜å¯†åº¦å±å¹•ï¼Œåªä¸è¿‡è‹¹æœå…¬å¸ç»™äº†æ¢äº†ä¸ªé«˜å¤§ä¸Šçš„åå­—ï¼šRetinaè§†ç½‘è†œå±å¹•ã€‚</p>
<p>ä½†æ˜¯åœ¨æ™®é€šå±å¹•ä¸‹1ä¸ªè®¾å¤‡åƒç´ ç­‰äºä¸€ä¸ªCSSåƒç´ çš„è®¾å¤‡å·²ç»å¾ˆå°‘äº†ï¼Œæ¯”å¦‚ Iphone 5s è®¾å¤‡åƒç´ æ¯”ä¸º2ï¼ŒIphone 6s è®¾å¤‡åƒç´ æ¯”ä¸º3ã€‚è‡³äºå®‰å“æœºä¸­çš„è®¾å¤‡åƒç´ æ¯”å°±æ›´å¤šäº†ï¼Œæœ‰1.3ã€1.5ã€2ã€3ç­‰ç­‰ã€‚</p>
<p><strong>å¦‚ä½•ç†è§£DPR</strong></p>
<p>è®¾å¤‡åƒç´ æ¯”(dpr) æ˜¯æŒ‡åœ¨ç§»åŠ¨å¼€å‘ä¸­1ä¸ªcssåƒç´ å ç”¨å¤šå°‘è®¾å¤‡åƒç´ ï¼Œå¦‚2ä»£è¡¨1ä¸ªcssåƒç´ ç”¨2x2ä¸ªè®¾å¤‡åƒç´ æ¥ç»˜åˆ¶ã€‚</p>
<p>è®¾å¤‡åƒç´ æ¯”(dpr)ï¼Œå…¬å¼ä¸º<code>1px = (dpr)^2 * 1dp</code>ï¼Œå¯ä»¥ç†è§£ä¸º1pxç”±å¤šå°‘ä¸ªè®¾å¤‡åƒç´ ç»„æˆï¼›</p>
<blockquote>
<p>æ‰“å¼€<code>chrome</code>çš„å¼€å‘è€…å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿå„ä¸ªæ‰‹æœºå‹å·çš„æ˜¾ç¤ºæƒ…å†µï¼Œæ¯ç§å‹å·ä¸Šé¢ä¼šæ˜¾ç¤ºä¸€ä¸ªå°ºå¯¸ï¼Œæ¯”å¦‚<code>iPhone X</code>æ˜¾ç¤ºçš„å°ºå¯¸æ˜¯<code>375x812</code>ï¼Œå®é™…<code>iPhone X</code>çš„åˆ†è¾¨ç‡ä¼šæ¯”è¿™é«˜å¾ˆå¤šï¼Œè¿™é‡Œæ˜¾ç¤ºçš„å°±æ˜¯è®¾å¤‡ç‹¬ç«‹åƒç´ ã€‚</p>
</blockquote>
<h3 id="è®¾å¤‡åƒç´ å’ŒCSSåƒç´ çš„å…³ç³»"><a href="#è®¾å¤‡åƒç´ å’ŒCSSåƒç´ çš„å…³ç³»" class="headerlink" title="è®¾å¤‡åƒç´ å’ŒCSSåƒç´ çš„å…³ç³»"></a>è®¾å¤‡åƒç´ å’ŒCSSåƒç´ çš„å…³ç³»</h3><p>ä»¥iPhone6/7/8ä¸ºä¾‹ï¼š</p>
<blockquote>
<p>è®¾å¤‡å®½é«˜ä¸º375 Ã— 667ï¼Œå¯ä»¥ç†è§£ä¸ºè®¾å¤‡ç‹¬ç«‹åƒç´ (æˆ–cssåƒç´ )ã€‚<br>dprä¸º2ï¼Œæ ¹æ®ä¸Šé¢çš„è®¡ç®—å…¬å¼ï¼Œå…¶ç‰©ç†åƒç´ å°±ä¸º750 Ã— 1334ã€‚</p>
</blockquote>
<p><img src="csspixel.png" alt></p>
<p>ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¯¹äºè¿™æ ·çš„cssæ ·å¼ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">width</span>: 2<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">height</span>: 2<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸åŒçš„å±å¹•ä¸Š(æ™®é€šå±å¹• vs retinaå±å¹•)ï¼Œcssåƒç´ æ‰€å‘ˆç°çš„å¤§å°(ç‰©ç†å°ºå¯¸)æ˜¯ä¸€è‡´çš„ï¼Œä¸åŒçš„æ˜¯1ä¸ªcssåƒç´ æ‰€å¯¹åº”çš„ç‰©ç†åƒç´ ä¸ªæ•°æ˜¯ä¸ä¸€è‡´çš„ã€‚</p>
<p>åœ¨æ™®é€šå±å¹•ä¸‹ï¼Œ1ä¸ªcssåƒç´  å¯¹åº” 1ä¸ªç‰©ç†åƒç´ (1:1)ã€‚ åœ¨retina å±å¹•ä¸‹ï¼Œ1ä¸ªcssåƒç´ å¯¹åº” 4ä¸ªç‰©ç†åƒç´ (1:4)ã€‚</p>
<h2 id="window-devicePixelRatio"><a href="#window-devicePixelRatio" class="headerlink" title="window.devicePixelRatio"></a>window.devicePixelRatio</h2><p><code>window.devicePixelRatio</code>æ˜¯è®¾å¤‡ä¸Šç‰©ç†åƒç´ å’Œè®¾å¤‡ç‹¬ç«‹åƒç´ (device-independent pixels (dips))çš„æ¯”ä¾‹ã€‚<br>å…¬å¼è¡¨ç¤ºå°±æ˜¯ï¼š<code>window.devicePixelRatio = ç‰©ç†åƒç´  / dips</code>ã€‚</p>
<p>dipæˆ–dp,ï¼ˆdevice independent pixelsï¼Œè®¾å¤‡ç‹¬ç«‹åƒç´ ï¼‰ä¸å±å¹•å¯†åº¦æœ‰å…³ã€‚dipå¯ä»¥ç”¨æ¥è¾…åŠ©åŒºåˆ†è§†ç½‘è†œè®¾å¤‡è¿˜æ˜¯éè§†ç½‘è†œè®¾å¤‡ã€‚</p>
<p>æ‰€æœ‰éè§†ç½‘è†œå±å¹•çš„iphoneåœ¨å‚ç›´çš„æ—¶å€™ï¼Œå®½åº¦ä¸º320ç‰©ç†åƒç´ ã€‚å½“ä½ ä½¿ç”¨<code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;</code>çš„æ—¶å€™ï¼Œä¼šè®¾ç½®è§†çª—å¸ƒå±€å®½åº¦ï¼ˆä¸åŒäºè§†è§‰åŒºåŸŸå®½åº¦ï¼Œä¸æ”¾å¤§æ˜¾ç¤ºæƒ…å†µä¸‹ï¼Œä¸¤è€…å¤§å°ä¸€è‡´ï¼Œè§ä¸‹å›¾ï¼‰ä¸º320px, äºæ˜¯ï¼Œé¡µé¢å¾ˆè‡ªç„¶åœ°è¦†ç›–åœ¨å±å¹•ä¸Šã€‚</p>
<p>è¿™æ ·ï¼Œéè§†ç½‘è†œå±å¹•çš„iphoneä¸Šï¼Œå±å¹•ç‰©ç†åƒç´ 320åƒç´ ï¼Œç‹¬ç«‹åƒç´ ä¹Ÿæ˜¯320åƒç´ ï¼Œå› æ­¤ï¼Œwindow.devicePixelRatioç­‰äº1.</p>
<p>è€Œå¯¹äºè§†ç½‘è†œå±å¹•çš„iphoneï¼Œå¦‚iphone4s, çºµå‘æ˜¾ç¤ºçš„æ—¶å€™ï¼Œå±å¹•ç‰©ç†åƒç´ 640åƒç´ ã€‚åŒæ ·ï¼Œå½“ç”¨æˆ·è®¾ç½®<code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;</code>çš„æ—¶å€™ï¼Œå…¶è§†åŒºå®½åº¦å¹¶ä¸æ˜¯640åƒç´ ï¼Œè€Œæ˜¯320åƒç´ ï¼Œè¿™æ˜¯ä¸ºäº†æœ‰æ›´å¥½çš„é˜…è¯»ä½“éªŒ â€“ æ›´åˆé€‚çš„æ–‡å­—å¤§å°ã€‚</p>
<p>è¿™æ ·ï¼Œåœ¨è§†ç½‘è†œå±å¹•çš„iphoneä¸Šï¼Œå±å¹•ç‰©ç†åƒç´ 640åƒç´ ï¼Œç‹¬ç«‹åƒç´ è¿˜æ˜¯320åƒç´ ï¼Œå› æ­¤ï¼Œ<code>window.devicePixelRatio</code>ç­‰äº<code>2</code>.</p>
<blockquote>
<p>åœ¨cssä¸­ï¼Œå¯ä»¥é€šè¿‡-webkit-device-pixel-ratioï¼Œwebkit-min-device-pixel-ratioå’Œ-webkit-max-device-pixel-ratioè¿›è¡Œåª’ä½“æŸ¥è¯¢ï¼Œå¯¹ä¸åŒdprçš„è®¾å¤‡ï¼Œåšä¸€äº›æ ·å¼é€‚é…(è¿™é‡Œåªé’ˆå¯¹webkitå†…æ ¸çš„æµè§ˆå™¨å’Œwebview)ã€‚</p>
</blockquote>
<p><strong>å…¼å®¹æ€§</strong></p>
<p>æ¥è‡ª<a href="https://caniuse.com/#search=window.devicePixelRatio" target="_blank" rel="noopener">caniuse.com</a></p>
<p><img src="caniusedevicepixelratio.png" alt></p>
<p>å–œå¿§å‚åŠã€‚å¥½çš„æ˜¯Safari, Android WebKit, Chrome 22+(Android), Opera Mobile, BlackBerry WebKit, QQ, Palm WebKit, åŠDolfinéƒ½èƒ½æ­£ç¡®å®ç°è¯¥å±æ€§ã€‚</p>
<p>å½“ç„¶ï¼Œå¤§éƒ¨åˆ†è¿™äº›æµè§ˆå™¨ä»ç„¶è¿è¡Œåœ¨<code>devicePixelRatio</code>å€¼åº”è¯¥ä¸º<code>1</code>çš„ç³»ç»Ÿä¸Šï¼Œå½“å®ƒä»¬ç§»åŠ¨åˆ°è§†ç½‘è†œç±»ä¼¼è®¾å¤‡æ—¶å€™ï¼Œå¯èƒ½å°±ä¼šé‡åˆ°é—®é¢˜ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šä½ å¯ä»¥ä¸ºè¿™ä¸ª window.devicePixelRatio é‡æ–°èµ‹å€¼ï¼Œä½†å¹¶ä¸ä¼šå¯¹æœ€ç»ˆçš„æ˜¾ç¤ºé€ æˆä»»ä½•çš„å½±å“ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.devicePixelRatio = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.devicePixelRatio); <span class="comment">//10</span></span><br></pre></td></tr></table></figure>
<h2 id="åª’ä½“æŸ¥è¯¢min-device-pixel-ratio"><a href="#åª’ä½“æŸ¥è¯¢min-device-pixel-ratio" class="headerlink" title="åª’ä½“æŸ¥è¯¢min-device-pixel-ratio"></a>åª’ä½“æŸ¥è¯¢min-device-pixel-ratio</h2><p>è®¾å¤‡åƒç´ æ¯”<code>device pixel ratio</code>ç®€ç§°<code>dpr</code>ï¼Œå³ç‰©ç†åƒç´ å’Œè®¾å¤‡ç‹¬ç«‹åƒç´ çš„æ¯”å€¼ã€‚</p>
<p>åœ¨<code>web</code>ä¸­ï¼Œæµè§ˆå™¨ä¸ºæˆ‘ä»¬æä¾›äº†<code>window.devicePixelRatio</code>æ¥å¸®åŠ©æˆ‘ä»¬è·å–<code>dpr</code>ã€‚</p>
<p>åœ¨<code>css</code>ä¸­ï¼Œå¯ä»¥ä½¿ç”¨åª’ä½“æŸ¥è¯¢<code>min-device-pixel-ratio</code>ï¼ŒåŒºåˆ†<code>dpr</code>ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">@<span class="keyword">media</span> (-webkit-min-device-pixel-ratio: <span class="number">2</span>),(min-device-pixel-ratio: <span class="number">2</span>)&#123; &#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨<code>React Native</code>ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨<code>PixelRatio.get()</code>æ¥è·å–<code>DPR</code>ã€‚</p>
<p>å½“ç„¶ï¼Œä¸Šé¢çš„è§„åˆ™ä¹Ÿæœ‰ä¾‹å¤–ï¼Œ<code>iPhone 6ã€7ã€8 Plus</code>çš„å®é™…ç‰©ç†åƒç´ æ˜¯<code>1080 x 1920</code>ï¼Œåœ¨å¼€å‘è€…å·¥å…·ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼šå®ƒçš„è®¾å¤‡ç‹¬ç«‹åƒç´ æ˜¯<code>414 x 736</code>ï¼Œè®¾å¤‡åƒç´ æ¯”ä¸º<code>3</code>ï¼Œè®¾å¤‡ç‹¬ç«‹åƒç´ å’Œè®¾å¤‡åƒç´ æ¯”çš„ä¹˜ç§¯å¹¶ä¸ç­‰äº<code>1080 x 1920</code>ï¼Œè€Œæ˜¯ç­‰äº<code>1242 x 2208</code>ã€‚</p>
<p>å®é™…ä¸Šï¼Œæ‰‹æœºä¼šè‡ªåŠ¨æŠŠ<code>1242 x 2208</code>ä¸ªåƒç´ ç‚¹å¡è¿›<code>1080 * 1920</code>ä¸ªç‰©ç†åƒç´ ç‚¹æ¥æ¸²æŸ“ï¼Œæˆ‘ä»¬ä¸ç”¨å…³å¿ƒè¿™ä¸ªè¿‡ç¨‹ï¼Œè€Œ<code>1242 x 2208</code>è¢«ç§°ä¸ºå±å¹•çš„<code>è®¾è®¡åƒç´ </code>ã€‚æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯ä»¥è¿™ä¸ª<code>è®¾è®¡åƒç´ </code>ä¸ºå‡†ã€‚</p>
<blockquote>
<p>å®é™…ä¸Šï¼Œä»è‹¹æœæå‡ºè§†ç½‘è†œå±å¹•å¼€å§‹ï¼Œæ‰å‡ºç°è®¾å¤‡åƒç´ æ¯”è¿™ä¸ªæ¦‚å¿µï¼Œå› ä¸ºåœ¨è¿™ä¹‹å‰ï¼Œç§»åŠ¨è®¾å¤‡éƒ½æ˜¯ç›´æ¥ä½¿ç”¨ç‰©ç†åƒç´ æ¥è¿›è¡Œå±•ç¤ºã€‚</p>
</blockquote>
<h2 id="è®¾è®¡å¸ˆå’Œå‰ç«¯å·¥ç¨‹å¸ˆä¹‹é—´å¦‚ä½•ååŒ"><a href="#è®¾è®¡å¸ˆå’Œå‰ç«¯å·¥ç¨‹å¸ˆä¹‹é—´å¦‚ä½•ååŒ" class="headerlink" title="è®¾è®¡å¸ˆå’Œå‰ç«¯å·¥ç¨‹å¸ˆä¹‹é—´å¦‚ä½•ååŒ"></a>è®¾è®¡å¸ˆå’Œå‰ç«¯å·¥ç¨‹å¸ˆä¹‹é—´å¦‚ä½•ååŒ</h2><p><strong>è§†è§‰ç¨¿</strong></p>
<p>åœ¨å‰ç«¯å¼€å‘ä¹‹å‰ï¼Œè§†è§‰MMä¼šç»™æˆ‘ä»¬ä¸€ä¸ªpsdæ–‡ä»¶ï¼Œç§°ä¹‹ä¸ºè§†è§‰ç¨¿ã€‚</p>
<p>å¯¹äºç§»åŠ¨ç«¯å¼€å‘è€Œè¨€ï¼Œä¸ºäº†åšåˆ°é¡µé¢é«˜æ¸…çš„æ•ˆæœï¼Œè§†è§‰ç¨¿çš„è§„èŒƒå¾€å¾€ä¼šéµå¾ªä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<p>é¦–å…ˆï¼Œé€‰å–ä¸€æ¬¾æ‰‹æœºçš„å±å¹•å®½é«˜ä½œä¸ºåŸºå‡†(ä»¥å‰æ˜¯iphone4çš„320Ã—480ï¼Œç°åœ¨æ›´å¤šçš„æ˜¯iphone6çš„375Ã—667)ã€‚<br>å¯¹äºretinaå±å¹•(å¦‚: dpr=2)ï¼Œä¸ºäº†è¾¾åˆ°é«˜æ¸…æ•ˆæœï¼Œè§†è§‰ç¨¿çš„ç”»å¸ƒå¤§å°ä¼šæ˜¯åŸºå‡†çš„2å€ï¼Œä¹Ÿå°±æ˜¯è¯´åƒç´ ç‚¹ä¸ªæ•°æ˜¯åŸæ¥çš„4å€ï¼ˆå¯¹iphone6è€Œè¨€ï¼šåŸå…ˆçš„375Ã—667ï¼Œå°±ä¼šå˜æˆ750Ã—1334ï¼‰ã€‚</p>
<p><strong>è®¾è®¡å¸ˆå’Œå‰ç«¯å¼€å‘çš„é€‚é…åä½œåŸºæœ¬æ€è·¯</strong></p>
<p>å‡ºè‡ªæ‰‹æ·˜ï¼š</p>
<ul>
<li>é€‰æ‹©ä¸€ç§å°ºå¯¸ä½œä¸ºè®¾è®¡å’Œå¼€å‘åŸºå‡†</li>
<li>å®šä¹‰ä¸€å¥—é€‚é…è§„åˆ™ï¼Œè‡ªåŠ¨é€‚é…å‰©ä¸‹çš„ä¸¤ç§å°ºå¯¸(å…¶å®ä¸ä»…è¿™ä¸¤ç§ï¼Œä½ æ‡‚çš„)</li>
<li>ç‰¹æ®Šé€‚é…æ•ˆæœç»™å‡ºè®¾è®¡æ•ˆæœ</li>
</ul>
<p>æ‰‹æ·˜è®¾è®¡å¸ˆå¸¸é€‰æ‹©iPhone6ä½œä¸ºåŸºå‡†è®¾è®¡å°ºå¯¸ï¼Œäº¤ä»˜ç»™å‰ç«¯çš„è®¾è®¡å°ºå¯¸æ˜¯æŒ‰750px * 1334pxä¸ºå‡†(é«˜åº¦ä¼šéšç€å†…å®¹å¤šå°‘è€Œæ”¹å˜)ã€‚å‰ç«¯å¼€å‘äººå‘˜é€šè¿‡ä¸€å¥—é€‚é…è§„åˆ™è‡ªåŠ¨é€‚é…åˆ°å…¶ä»–çš„å°ºå¯¸ã€‚</p>
<h1 id="åˆ†è¾¨ç‡ã€åƒç´ å’Œå±å¹•å°ºå¯¸"><a href="#åˆ†è¾¨ç‡ã€åƒç´ å’Œå±å¹•å°ºå¯¸" class="headerlink" title="åˆ†è¾¨ç‡ã€åƒç´ å’Œå±å¹•å°ºå¯¸"></a>åˆ†è¾¨ç‡ã€åƒç´ å’Œå±å¹•å°ºå¯¸</h1><p>åˆ†è¾¨ç‡æ˜¯æŒ‡ä¸€ä¸ªå—å±å¹•çš„åƒç´ å°ºå¯¸ã€‚æ¯”å¦‚è¯´<code>1334 * 750</code>æ˜¯iPhone6çš„åˆ†è¾¨ç‡ã€‚</p>
<p>å±å¹•å°ºå¯¸æ˜¯æŒ‡æ˜¾ç¤ºå±å¹•å¯¹è§’çº¿çš„å°ºå¯¸ï¼Œä¸€èˆ¬ç”¨è‹±å¯¸æ¥è¡¨ç¤ºã€‚</p>
<p>è¯¢é—®åˆ«äººä¸€ç²’åƒç´ æœ‰å¤šå¤§æ˜¯ä¸€ä¸ªéå¸¸é¸¡è´¼çš„é—®é¢˜ï¼ˆå°å¿ƒé¢è¯•é‡åˆ°è¿™æ ·çš„é¢˜ï¼‰ï¼Œè™½ç„¶æˆ‘ä»¬è¯´åƒç´ æ˜¯æ„æˆå±å¹•çš„å‘å…‰çš„ç‚¹ï¼Œæ˜¯ç‰©ç†çš„ï¼Œä½†æ˜¯åƒç´ åœ¨è„±ç¦»äº†å±å¹•å°ºå¯¸ä¹‹åæ˜¯æ²¡æœ‰å¤§å°å¯è¨€çš„ï¼Œä½ å¯ä»¥å°† 1920 * 1080 é¢—åƒç´ æ”¾åˆ°ä¸€å° 40 å¯¸çš„å°ç±³ç”µè§†æœºé‡Œé¢ï¼Œä¹Ÿå¯ä»¥å°†åŒæ ·å¤šçš„åƒç´ å…¨éƒ¨å¡åˆ°ä¸€å° 5.5 å¯¸çš„ iPhone7 Plus æ‰‹æœºé‡Œé¢å»ï¼Œé‚£ä¹ˆå¯¹äº 40 å¯¸çš„ç”µè§†è€Œè¨€ï¼Œæ¯ä¸ªåƒç´ é¢—ç²’å½“ç„¶ä¼šå¤§äº 5.5 å¯¸çš„æ‰‹æœºçš„åƒç´ ã€‚</p>
<p><img src="tvandphone.jpeg" alt></p>
<p>æ‰€ä»¥å…‰çœ‹å±å¹•çš„åˆ†è¾¨ç‡å¯¹äºè®¾è®¡å¸ˆæ¥è¯´æ˜¯ä¸å…·å¤‡å¤šå°‘å®é™…æ„ä¹‰çš„ï¼Œé€šè¿‡åˆ†è¾¨ç‡è®¡ç®—å¾—å‡ºçš„åƒç´ å¯†åº¦ï¼ˆPPIï¼‰æ‰æ˜¯è®¾è®¡å¸ˆè¦å…³å¿ƒçš„é—®é¢˜ï¼Œæˆ‘ä»¬é€šè¿‡å±å¹•åˆ†è¾¨ç‡å’Œå±å¹•å°ºå¯¸å°±èƒ½è®¡ç®—å‡ºå±å¹•çš„åƒç´ å¯†åº¦çš„ã€‚</p>
<p>å†æ¬¡ä½¿ç”¨ iPhoneï¼ˆ6~7ï¼‰ä½œä¸ºä¾‹å­ã€‚æˆ‘ä»¬çŸ¥é“è¯¥å±å¹•çš„æ¨ªå‘ç‰©ç†å°ºå¯¸ä¸º 2.3 è‹±å¯¸ ï¼Œä¸”æ¨ªå‘å…·æœ‰ 750 é¢—åƒç´ ï¼Œæ ¹æ®ä¸‹é¢çš„å…¬å¼ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç®—å‡º iPhoneï¼ˆ6~7ï¼‰çš„å±å¹•æ˜¯ 326 PPIï¼Œæ„ä¸ºæ¯å¯¸å­˜åœ¨ 326 é¢—åƒç´ ã€‚</p>
<p>å…¶å®ä¸è®ºæˆ‘ä»¬æ€ä¹ˆé™¤ï¼Œè®¡ç®—å¾—å‡ºæ¥çš„åƒç´ å¯†åº¦ï¼ˆPPIï¼‰éƒ½ä¼šæ˜¯è¿™ä¸ªæ•°ï¼Œå®½å­˜åœ¨åƒç´ é™¤ä»¥å®½ç‰©ç†é•¿åº¦ï¼Œé«˜å­˜åœ¨åƒç´ é™¤ä»¥é«˜ç‰©ç†é•¿åº¦ï¼Œå¾—æ•°éƒ½æ¥è¿‘äº 326ã€‚</p>
<h2 id="è‹±å¯¸"><a href="#è‹±å¯¸" class="headerlink" title="è‹±å¯¸"></a>è‹±å¯¸</h2><p>ä¸€èˆ¬ç”¨è‹±å¯¸æè¿°å±å¹•çš„ç‰©ç†å¤§å°ï¼Œå¦‚ç”µè„‘æ˜¾ç¤ºå™¨çš„<code>17</code>ã€<code>22</code>ï¼Œæ‰‹æœºæ˜¾ç¤ºå™¨çš„<code>4.8</code>ã€<code>5.7</code>ç­‰ä½¿ç”¨çš„å•ä½éƒ½æ˜¯è‹±å¯¸ã€‚</p>
<p>éœ€è¦æ³¨æ„ï¼Œä¸Šé¢çš„å°ºå¯¸éƒ½æ˜¯å±å¹•å¯¹è§’çº¿çš„é•¿åº¦</p>
<p>è‹±å¯¸(<code>inch</code>,ç¼©å†™ä¸º<code>in</code>)åœ¨è·å…°è¯­ä¸­çš„æœ¬æ„æ˜¯å¤§æ‹‡æŒ‡ï¼Œä¸€è‹±å¯¸å°±æ˜¯æŒ‡ç”²åº•éƒ¨æ™®é€šäººæ‹‡æŒ‡çš„å®½åº¦ã€‚</p>
<p>è‹±å¯¸å’Œå˜ç±³çš„æ¢ç®—ï¼š<code>1è‹±å¯¸ = 2.54 å˜ç±³</code></p>
<h2 id="åƒç´ "><a href="#åƒç´ " class="headerlink" title="åƒç´ "></a>åƒç´ </h2><p>åƒç´ å³ä¸€ä¸ªå°æ–¹å—ï¼Œå®ƒå…·æœ‰ç‰¹å®šçš„ä½ç½®å’Œé¢œè‰²ã€‚</p>
<p>å›¾ç‰‡ã€ç”µå­å±å¹•ï¼ˆæ‰‹æœºã€ç”µè„‘ï¼‰å°±æ˜¯ç”±æ— æ•°ä¸ªå…·æœ‰ç‰¹å®šé¢œè‰²å’Œç‰¹å®šä½ç½®çš„å°æ–¹å—æ‹¼æ¥è€Œæˆã€‚</p>
<p>åƒç´ å¯ä»¥ä½œä¸ºå›¾ç‰‡æˆ–ç”µå­å±å¹•çš„æœ€å°ç»„æˆå•ä½ã€‚</p>
<h2 id="å±å¹•åˆ†è¾¨ç‡"><a href="#å±å¹•åˆ†è¾¨ç‡" class="headerlink" title="å±å¹•åˆ†è¾¨ç‡"></a>å±å¹•åˆ†è¾¨ç‡</h2><p>å±å¹•åˆ†è¾¨ç‡æŒ‡ä¸€ä¸ªå±å¹•å…·ä½“ç”±å¤šå°‘ä¸ªåƒç´ ç‚¹ç»„æˆã€‚</p>
<p><code>iPhone XS Max</code> å’Œ <code>iPhone SE</code>çš„åˆ†è¾¨ç‡åˆ†åˆ«ä¸º<code>2688 x 1242</code>å’Œ<code>1136 x 640</code>ã€‚è¿™è¡¨ç¤ºæ‰‹æœºåˆ†åˆ«åœ¨å‚ç›´å’Œæ°´å¹³ä¸Šæ‰€å…·æœ‰çš„åƒç´ ç‚¹æ•°ã€‚</p>
<p>å½“ç„¶åˆ†è¾¨ç‡é«˜ä¸ä»£è¡¨å±å¹•å°±æ¸…æ™°ï¼Œå±å¹•çš„æ¸…æ™°ç¨‹åº¦è¿˜ä¸å°ºå¯¸æœ‰å…³ã€‚</p>
<h2 id="å›¾åƒåˆ†è¾¨ç‡"><a href="#å›¾åƒåˆ†è¾¨ç‡" class="headerlink" title="å›¾åƒåˆ†è¾¨ç‡"></a>å›¾åƒåˆ†è¾¨ç‡</h2><p>æˆ‘ä»¬é€šå¸¸è¯´çš„<code>å›¾ç‰‡åˆ†è¾¨ç‡</code>å…¶å®æ˜¯æŒ‡å›¾ç‰‡å«æœ‰çš„<code>åƒç´ æ•°</code>ï¼Œæ¯”å¦‚ä¸€å¼ å›¾ç‰‡çš„åˆ†è¾¨ç‡ä¸º<code>800 x 400</code>ã€‚è¿™è¡¨ç¤ºå›¾ç‰‡åˆ†åˆ«åœ¨å‚ç›´å’Œæ°´å¹³ä¸Šæ‰€å…·æœ‰çš„åƒç´ ç‚¹æ•°ä¸º<code>800</code>å’Œ<code>400</code>ã€‚</p>
<p>åŒä¸€å°ºå¯¸çš„å›¾ç‰‡ï¼Œåˆ†è¾¨ç‡è¶Šé«˜ï¼Œå›¾ç‰‡è¶Šæ¸…æ™°ã€‚</p>
<h1 id="viewportè§†å£"><a href="#viewportè§†å£" class="headerlink" title="viewportè§†å£"></a>viewportè§†å£</h1><p>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æµè§ˆå™¨éƒ½ä¼šè®¤ä¸ºè‡ªå·±èƒ½è®©æ‰€æœ‰ç½‘ç«™æ˜¾ç¤ºï¼Œå³ä½¿ä¸æ˜¯ä¸ºç§»åŠ¨è®¾å¤‡è®¾è®¡çš„ç½‘ç«™ã€‚ä½†æ˜¯ä»¥æµè§ˆå™¨å¯è§†åŒºåŸŸä¸ºviewportçš„è¯ï¼Œç§»åŠ¨è®¾å¤‡å±å¹•éƒ½ä¸å®½ï¼Œæ‰€ä»¥é‚£äº›ä¸ºæ¡Œé¢æµè§ˆå™¨è®¾è®¡çš„ç½‘ç«™æ”¾åˆ°ç§»åŠ¨è®¾å¤‡æ˜¾ç¤ºçš„æ—¶å€™ï¼Œå¿…ç„¶ä¼šå› ä¸ºviewportå¤ªçª„è€ŒæŒ¤ä½œä¸€å›¢ï¼Œç”šè‡³å¸ƒå±€ä¹Ÿä¼šä¹±æ‰ã€‚è™½ç„¶å¸‚é¢ä¸Šè¯´æŸæŸæ‰‹æœºåˆ†è¾¨ç‡è¾¾åˆ°<code>768 * 1024</code>ï¼Œç”šè‡³åˆ°è¾¾2kå±çš„åˆ†è¾¨ç‡ï¼Œé‚£è¿™ä¹ˆé«˜çš„åˆ†è¾¨ç‡ç”¨æ¥æ˜¾ç¤ºæ¡Œé¢ç½‘ç«™åº”è¯¥æ²¡æœ‰é—®é¢˜å§ã€‚ä½†æ˜¯åœ¨ä¸Šè¿°æ–‡ä¸­<code>CSSåƒç´ </code>ä¸­çš„1pxåªæ˜¯ä¸€ä¸ªç›¸å¯¹å€¼ï¼Œå¹¶ä¸èƒ½å¤Ÿç›´æ¥ä»£è¡¨ç­‰äºå±å¹•ä¸Šçš„1pxã€‚æ‰‹æœºåˆ†è¾¨ç‡è¶Šå¤§ï¼Œä½†æ˜¯å±å¹•å°ºå¯¸ä¸å˜çš„æƒ…å†µä¸‹ï¼Œcssåƒç´ ä¸­çš„1pxå°±å›ä»£è¡¨æ›´å¤šçš„ç‰©ç†åƒç´ ï¼Œæ‰èƒ½è®©1pxçš„ä¸œè¥¿åœ¨å±å¹•ä¸Šçš„å¤§å°ä¸é‚£äº›ä½åˆ†è¾¨ç‡çš„è®¾å¤‡å·®ä¸å¤šï¼Œä¸ç„¶ä¼šå› ä¸ºå¤ªè¿‡äºå°è€Œä½¿å¾—è‚‰çœ¼æ— æ³•çœ‹æ¸…ã€‚</p>
<p>æ‰€ä»¥åœ¨ç§»åŠ¨è®¾å¤‡ä¸‹ï¼Œæµè§ˆå™¨çš„viewportå¯ä»¥åˆ†ä¸ºä¸‰ä¸ªï¼šå¯è§†è§†å£ï¼ˆvisual viewportï¼‰ã€å¸ƒå±€è§†å£ï¼ˆlayout viewportï¼‰å’Œç†æƒ³è§†å£ï¼ˆideal viewportï¼‰ã€‚ï¼ˆæ¥è‡ªppkå¤§ç¥è§‚ç‚¹ï¼‰</p>
<blockquote>
<p>è§†å£(<code>viewport</code>)ä»£è¡¨å½“å‰å¯è§çš„è®¡ç®—æœºå›¾å½¢åŒºåŸŸã€‚åœ¨<code>Web</code>æµè§ˆå™¨æœ¯è¯­ä¸­ï¼Œé€šå¸¸ä¸æµè§ˆå™¨çª—å£ç›¸åŒï¼Œä½†ä¸åŒ…æ‹¬æµè§ˆå™¨çš„<code>UI</code>ï¼Œ èœå•æ ç­‰â€”â€”å³æŒ‡ä½ æ­£åœ¨æµè§ˆçš„æ–‡æ¡£çš„é‚£ä¸€éƒ¨åˆ†ã€‚</p>
</blockquote>
<h2 id="å¯è§†è§†å£"><a href="#å¯è§†è§†å£" class="headerlink" title="å¯è§†è§†å£"></a>å¯è§†è§†å£</h2><p>å¯è§†è§†å£å°±æ˜¯ç›®å‰åœ¨å±å¹•ä¸Šæ˜¾ç¤ºé¡µé¢çš„ä¸€éƒ¨åˆ†ã€‚ç”¨æˆ·å¯ä»¥æ»šåŠ¨ä»¥æ›´æ”¹ç”¨æˆ·è‡ªå·±æ‰€çœ‹åˆ°çš„éƒ¨åˆ†ï¼Œæˆ–è€…ç¼©æ”¾ä»¥æ›´æ”¹å¯è§†çª—å£çš„å¤§å°ã€‚</p>
<p><img src="visualviewport.jpg" alt></p>
<p>ä½†æ˜¯ï¼ŒCSSå¸ƒå±€ï¼ˆå°¤å…¶æ˜¯ç™¾åˆ†æ¯”å®½åº¦ï¼‰æ˜¯ç›¸å¯¹äºå¸ƒå±€è§†å£è®¡ç®—çš„ï¼Œ å¸ƒå±€è§†å£æ¯”è§†è§‰è§†å£å®½å¾—å¤šã€‚</p>
<p>å› æ­¤ï¼Œ<code>&lt;html&gt;</code>å…ƒç´ æœ€åˆé‡‡ç”¨å¸ƒå±€è§†å£çš„å®½åº¦ï¼Œå¹¶ä¸”æ‚¨çš„CSSè¢«è§£é‡Šä¸ºå±å¹•æ˜æ˜¾æ¯”æ‰‹æœºå±å¹•å®½ã€‚è¿™å¯ç¡®ä¿æ‚¨ç½‘ç«™çš„å¸ƒå±€ä¸æ¡Œé¢æµè§ˆå™¨ä¸Šçš„å¸ƒå±€ç›¸åŒã€‚</p>
<p>å¸ƒå±€è§†å£æœ‰å¤šå®½ï¼Ÿè¿™ä¸æµè§ˆå™¨ä¸åŒã€‚<code>Safari iPhone</code>ä½¿ç”¨<code>980px</code>ï¼Œ<code>Opera</code>ä½¿ç”¨<code>850px</code>ï¼Œ<code>Android WebKit</code>ä½¿ç”¨<code>800px</code>å’Œ<code>IE</code>ä½¿ç”¨<code>974px</code>ã€‚</p>
<blockquote>
<p>å¯è§†è§†å£çš„å®½åº¦å¯ä»¥é€šè¿‡<code>window.innerWidth</code>è·å–ï¼Œä½†æ˜¯åœ¨Android 2, Oprea mini å’Œ UC 8ä¸­æ— æ³•æ­£ç¡®è·å–ã€‚</p>
</blockquote>
<h2 id="å¸ƒå±€è§†å£"><a href="#å¸ƒå±€è§†å£" class="headerlink" title="å¸ƒå±€è§†å£"></a>å¸ƒå±€è§†å£</h2><p>ä¸€èˆ¬ç§»åŠ¨è®¾å¤‡çš„æµè§ˆå™¨éƒ½é»˜è®¤è®¾ç½®äº†ä¸€ä¸ª viewport å…ƒæ ‡ç­¾ï¼Œå®šä¹‰ä¸€ä¸ªè™šæ‹Ÿçš„å¸ƒå±€è§†å£ï¼ˆlayout viewportï¼‰ï¼Œç”¨äºè§£å†³æ—©æœŸçš„é¡µé¢åœ¨æ‰‹æœºä¸Šæ˜¾ç¤ºçš„é—®é¢˜ã€‚iOS, Android åŸºæœ¬éƒ½å°†è¿™ä¸ªè§†å£åˆ†è¾¨ç‡è®¾ç½®ä¸º 980pxï¼Œæ‰€ä»¥ PC ä¸Šçš„ç½‘é¡µåŸºæœ¬èƒ½åœ¨æ‰‹æœºä¸Šå‘ˆç°ï¼Œåªä¸è¿‡å…ƒç´ çœ‹ä¸Šå»å¾ˆå°ï¼Œä¸€èˆ¬é»˜è®¤å¯ä»¥é€šè¿‡æ‰‹åŠ¨ç¼©æ”¾ç½‘é¡µã€‚</p>
<p><strong>å®Œå…¨ç¼©å°çš„æƒ…å†µä¸‹ï¼švisual viewport = layout viewport</strong></p>
<p><img src="vv=lv.jpg" alt></p>
<p>æµè§ˆå™¨é€‰æ‹©äº†å¸ƒå±€è§†å£çš„å°ºå¯¸ï¼Œä½¿å…¶åœ¨å®Œå…¨ç¼©å°æ¨¡å¼ä¸‹å®Œå…¨è¦†ç›–å±å¹•ï¼ˆå› æ­¤ç­‰äºå¯è§†è§†å£ï¼‰.</p>
<p><strong>ä¸å®Œå…¨ç¼©å°çš„æƒ…å†µä¸‹ï¼šlayout viewport &gt; visual viewport</strong></p>
<p><img src="lv&gt;vv.jpg" alt></p>
<p>å¸ƒå±€è§†å£çš„å®½åº¦å’Œé«˜åº¦ç­‰äºåœ¨ä¸å®Œå…¨ç¼©å°æ¨¡å¼ä¸‹å¯ä»¥åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„ä»»ä½•å®½åº¦å’Œé«˜åº¦ã€‚å½“ç”¨æˆ·æ”¾å¤§è¿™äº›å°ºå¯¸æ—¶ä¿æŒä¸å˜ã€‚</p>
<p>åœ¨æ”¾å¤§å’Œç¼©å°çš„è¿‡ç¨‹ä¸­ï¼Œ<code>visual viewport</code>å’Œ<code>layout viewport</code>çš„å®½ï¼Œé«˜éƒ½æ²¡å‘ç”Ÿä»»ä½•çš„å˜åŒ–,å˜åŒ–çš„ä»…ä»…å°±åƒæ˜¯ç”¨æˆ·æ‹¿ç€è¿™ä¸ª<code>visual viewport</code>å»è¿œç¦»æˆ–è€…é è¿‘<code>layout viewport</code>ï¼Œåœ¨è¿œç¦»æˆ–è€…é è¿‘çš„è¿‡ç¨‹ä¸­ï¼Œå°±ä¼šå‘ˆç°å‡ºç¼©æ”¾çš„æ•ˆæœæ¥ã€‚</p>
<blockquote>
<p>å¸ƒå±€è§†å£çš„å®½åº¦/é«˜åº¦å¯ä»¥é€šè¿‡<code>document.documentElement.clientWidth / Height</code>è·å–ã€‚</p>
</blockquote>
<h2 id="å¸ƒå±€è§†å£å’Œå¯è§†è§†å£çš„è”ç³»"><a href="#å¸ƒå±€è§†å£å’Œå¯è§†è§†å£çš„è”ç³»" class="headerlink" title="å¸ƒå±€è§†å£å’Œå¯è§†è§†å£çš„è”ç³»"></a>å¸ƒå±€è§†å£å’Œå¯è§†è§†å£çš„è”ç³»</h2><p>å¯ä»¥æŠŠ<code>layout viewport</code>ç†è§£ä¸ºä¸€å¼ å®Œå…¨é®ä½å¹¶ä¸”ä¸èƒ½æ›´è¾¹å¤§å°çš„ç™½çº¸ï¼ŒæŠŠ<code>visual viewport</code>ç†è§£ä¸ºä¸€ä¸ªæœ‰è¾¹æ¡†çš„é€è§†å™¨ï¼Œä½ å¯ä»¥é€šè¿‡è¿™ä¸ªé€è§†å™¨æ¥æŸ¥çœ‹è¿™å¼ ç™½çº¸çš„å†…å®¹ã€‚é€šè¿‡è¿™ä¸ªé€è§†å™¨ä½ å¯ä»¥ä¸€ç‚¹ç‚¹çš„çœ‹åˆ°ç™½çº¸éƒ¨åˆ†å†…å®¹ï¼Œè¿™é‡Œæ‰€èƒ½çœ‹åˆ°çš„å°±æ˜¯<code>visual viewport</code>ã€‚ä½ ä¹Ÿå¯ä»¥é è¿‘æˆ–è€…è¿œç¦»çš„æ–¹å¼æ¥é€è§†ç™½çº¸ï¼ˆç™½çº¸é™æ­¢ä¸åŠ¨ï¼‰ï¼Œä½ çœ‹çš„å†…å®¹å¯ä»¥å˜å¤šæˆ–è€…å˜å°‘ï¼Œä½†æ˜¯ç™½çº¸<code>layout viewport</code>è‡ªèº«çš„å¤§å°å’Œå½¢çŠ¶æ˜¯ä¸ä¼šå‘ç”Ÿæ”¹å˜çš„ã€‚</p>
<h2 id="ç†æƒ³è§†å£"><a href="#ç†æƒ³è§†å£" class="headerlink" title="ç†æƒ³è§†å£"></a>ç†æƒ³è§†å£</h2><p>å¸ƒå±€è§†å£çš„é»˜è®¤å®½åº¦å¹¶ä¸æ˜¯ä¸€ä¸ªç†æƒ³çš„å®½åº¦ï¼Œäºæ˜¯ Apple å’Œå…¶ä»–æµè§ˆå™¨å‚å•†å¼•å…¥äº†ç†æƒ³è§†å£çš„æ¦‚å¿µï¼Œå®ƒå¯¹è®¾å¤‡è€Œè¨€æ˜¯æœ€ç†æƒ³çš„å¸ƒå±€è§†å£å°ºå¯¸ã€‚æ˜¾ç¤ºåœ¨ç†æƒ³è§†å£ä¸­çš„ç½‘ç«™å…·æœ‰æœ€ç†æƒ³çš„å®½åº¦ï¼Œç”¨æˆ·æ— éœ€è¿›è¡Œç¼©æ”¾ã€‚</p>
<blockquote>
<p>å®Œç¾é€‚é…ï¼šé¦–å…ˆä¸éœ€è¦ç”¨æˆ·ç¼©æ”¾å’Œæ¨ªå‘æ»šåŠ¨æ¡å°±èƒ½æ­£å¸¸çš„æŸ¥çœ‹ç½‘ç«™çš„æ‰€æœ‰å†…å®¹ï¼›ç¬¬äºŒï¼Œæ˜¾ç¤ºçš„æ–‡å­—çš„å¤§å°æ˜¯åˆé€‚ï¼Œæ¯”å¦‚ä¸€æ®µ14pxå¤§å°çš„æ–‡å­—ï¼Œä¸ä¼šå› ä¸ºåœ¨ä¸€ä¸ªé«˜å¯†åº¦åƒç´ çš„å±å¹•é‡Œæ˜¾ç¤ºå¾—å¤ªå°è€Œæ— æ³•çœ‹æ¸…ï¼Œç†æƒ³çš„æƒ…å†µæ˜¯è¿™æ®µ14pxçš„æ–‡å­—æ— è®ºæ˜¯åœ¨ä½•ç§å¯†åº¦å±å¹•ï¼Œä½•ç§åˆ†è¾¨ç‡ä¸‹ï¼Œæ˜¾ç¤ºå‡ºæ¥çš„å¤§å°éƒ½æ˜¯å·®ä¸å¤šçš„ã€‚å½“ç„¶ï¼Œä¸åªæ˜¯æ–‡å­—ï¼Œå…¶ä»–å…ƒç´ åƒå›¾ç‰‡ä»€ä¹ˆçš„ä¹Ÿæ˜¯è¿™ä¸ªé“ç†ã€‚</p>
</blockquote>
<p>ç†æƒ³è§†å£çš„å€¼å…¶å®å°±æ˜¯å±å¹•åˆ†è¾¨ç‡çš„å€¼ï¼Œå®ƒå¯¹åº”çš„åƒç´ å«åšè®¾å¤‡é€»è¾‘åƒç´ ï¼ˆdevice independent pixel, dipï¼‰ã€‚dip å’Œè®¾å¤‡çš„ç‰©ç†åƒç´ æ— å…³ï¼Œä¸€ä¸ª dip åœ¨ä»»æ„åƒç´ å¯†åº¦çš„è®¾å¤‡å±å¹•ä¸Šéƒ½å æ®ç›¸åŒçš„ç©ºé—´ã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰è¿›è¡Œ<code>ç¼©æ”¾</code>ï¼Œé‚£ä¹ˆä¸€ä¸ª CSS åƒç´ å°±ç­‰äºä¸€ä¸ª dipã€‚</p>
<p><code>ideal viewport</code>å¹¶æ²¡æœ‰ä¸€ä¸ªå›ºå®šçš„å°ºå¯¸ï¼Œä¸åŒçš„è®¾å¤‡æ‹¥æœ‰æœ‰ä¸åŒçš„<code>ideal viewport</code>ã€‚æ‰€æœ‰çš„iphoneçš„<code>ideal viewport</code>å®½åº¦éƒ½æ˜¯320pxï¼Œæ— è®ºå®ƒçš„å±å¹•å®½åº¦æ˜¯320è¿˜æ˜¯640ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨iphoneä¸­ï¼Œcssä¸­çš„320pxå°±ä»£è¡¨iphoneå±å¹•çš„å®½åº¦ã€‚</p>
<p>ä½†æ˜¯å®‰å“è®¾å¤‡å°±æ¯”è¾ƒå¤æ‚äº†ï¼Œæœ‰320pxçš„ï¼Œæœ‰360pxçš„ï¼Œæœ‰384pxçš„ç­‰ç­‰ï¼Œå…³äºä¸åŒçš„è®¾å¤‡ideal viewportçš„å®½åº¦éƒ½ä¸ºå¤šå°‘ï¼Œå¯ä»¥åˆ° <a href="http://viewportsizes.com" target="_blank" rel="noopener">http://viewportsizes.com</a> å»æŸ¥çœ‹ä¸€ä¸‹ï¼Œé‡Œé¢æ”¶é›†äº†ä¼—å¤šè®¾å¤‡çš„ç†æƒ³å®½åº¦ã€‚</p>
<p>ç”¨ä¸‹é¢çš„æ–¹æ³•å¯ä»¥ä½¿å¸ƒå±€è§†å£ä¸ç†æƒ³è§†å£çš„å®½åº¦ä¸€è‡´ï¼š<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="ç¼©æ”¾"><a href="#ç¼©æ”¾" class="headerlink" title="ç¼©æ”¾"></a>ç¼©æ”¾</h2><p>ä¸¤ä¸ªè§†å£éƒ½ä»¥CSSåƒç´ ä¸ºå•ä½è¿›è¡Œæµ‹é‡ã€‚ä½†æ˜¯ï¼Œå½“è§†è§‰è§†å£å°ºå¯¸éšç€ç¼©æ”¾è€Œå˜åŒ–æ—¶ï¼ˆå¦‚æœæ”¾å¤§ï¼Œå±å¹•ä¸Šçš„CSSåƒç´ è¾ƒå°‘ï¼‰ï¼Œå¸ƒå±€è§†å£å°ºå¯¸ä¿æŒä¸å˜ã€‚ï¼ˆå¦‚æœä»–ä»¬æ²¡æœ‰ï¼Œæ‚¨çš„é¡µé¢å°†ä¸æ–­é‡æ’ï¼Œå› ä¸ºé‡æ–°è®¡ç®—ç™¾åˆ†æ¯”å®½åº¦ã€‚ï¼‰</p>
<p>ç¼©æ”¾æ˜¯ç›¸å¯¹äº<code>ideal viewport</code>ç¼©æ”¾çš„ï¼Œç¼©æ”¾å€¼è¶Šå¤§ï¼Œå½“å‰viewportçš„å®½åº¦å°±ä¼šè¶Šå°ï¼Œåä¹‹äº¦ç„¶ã€‚ä¾‹å¦‚åœ¨iphoneä¸­ï¼Œ<code>ideal viewport</code> çš„å®½åº¦æ˜¯320pxï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®<code>initial-scale=2</code>ï¼Œæ­¤æ—¶ viewport çš„å®½åº¦ä¼šå˜ä¸ºåªæœ‰160pxäº†ï¼Œè¿™ä¹Ÿå¥½ç†è§£ï¼Œæ”¾å¤§äº†ä¸€å€å˜›ï¼Œå°±æ˜¯åŸæ¥1pxçš„ä¸œè¥¿å˜æˆ2pxäº†ï¼Œä½†æ˜¯1pxå˜ä¸º2pxå¹¶ä¸æ˜¯æŠŠåŸæ¥çš„320pxå˜ä¸º640pxäº†ï¼Œè€Œæ˜¯åœ¨å®é™…å®½åº¦ä¸å˜çš„æƒ…å†µä¸‹ï¼Œ1pxå˜å¾—è·ŸåŸæ¥çš„2pxçš„é•¿åº¦ä¸€æ ·äº†ï¼Œæ‰€ä»¥æ”¾å¤§2å€ååŸæ¥éœ€è¦320pxæ‰èƒ½å¡«æ»¡çš„å®½åº¦ç°åœ¨åªéœ€è¦160pxå°±åšåˆ°äº†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªå…¬å¼ï¼š</p>
<p><strong>è§†è§‰è§†å£å’Œç¼©æ”¾æ¯”ä¾‹çš„å…³ç³»ä¸ºï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">visual viewportå®½åº¦ = ideal viewportå®½åº¦ / å½“å‰ç¼©æ”¾å€¼</span><br><span class="line"></span><br><span class="line">å½“å‰ç¼©æ”¾å€¼ = ç†æƒ³è§†å£å®½åº¦  / è§†è§‰è§†å£å®½åº¦</span><br></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œå½“ç”¨æˆ·æ”¾å¤§æ—¶ï¼Œè§†è§‰è§†å£å°†ä¼šå˜å°ï¼ŒCSS åƒç´ å°†è·¨è¶Šæ›´å¤šçš„ç‰©ç†åƒç´ ã€‚</p>
<h2 id="è·å–è§†å£å¤§å°"><a href="#è·å–è§†å£å¤§å°" class="headerlink" title="è·å–è§†å£å¤§å°"></a>è·å–è§†å£å¤§å°</h2><p><img src="getviewport.png" alt></p>
<ul>
<li><p><code>window.innerHeight</code>ï¼šè·å–æµè§ˆå™¨è§†è§‰è§†å£é«˜åº¦ï¼ˆåŒ…æ‹¬å‚ç›´æ»šåŠ¨æ¡ï¼‰ã€‚</p>
</li>
<li><p><code>window.outerHeight</code>ï¼šè·å–æµè§ˆå™¨çª—å£å¤–éƒ¨çš„é«˜åº¦ã€‚è¡¨ç¤ºæ•´ä¸ªæµè§ˆå™¨çª—å£çš„é«˜åº¦ï¼ŒåŒ…æ‹¬ä¾§è¾¹æ ã€çª—å£é•¶è¾¹å’Œè°ƒæ­£çª—å£å¤§å°çš„è¾¹æ¡†ã€‚</p>
</li>
<li><p><code>window.screen.Height</code>ï¼šè·å–è·å±å¹•å–ç†æƒ³è§†å£é«˜åº¦ï¼Œè¿™ä¸ªæ•°å€¼æ˜¯å›ºå®šçš„ï¼Œ`è®¾å¤‡çš„åˆ†è¾¨ç‡/è®¾å¤‡åƒç´ æ¯”</p>
</li>
<li><p><code>window.screen.availHeight</code>ï¼šæµè§ˆå™¨çª—å£å¯ç”¨çš„é«˜åº¦ã€‚</p>
</li>
<li><p><code>document.documentElement.clientHeight</code>ï¼šè·å–æµè§ˆå™¨å¸ƒå±€è§†å£é«˜åº¦ï¼ŒåŒ…æ‹¬å†…è¾¹è·ï¼Œä½†ä¸åŒ…æ‹¬å‚ç›´æ»šåŠ¨æ¡ã€è¾¹æ¡†å’Œå¤–è¾¹è·ã€‚</p>
</li>
<li><p><code>document.documentElement.offsetHeight</code>ï¼šåŒ…æ‹¬å†…è¾¹è·ã€æ»šåŠ¨æ¡ã€è¾¹æ¡†å’Œå¤–è¾¹è·ã€‚</p>
</li>
<li><p><code>document.documentElement.scrollHeight</code>ï¼šåœ¨ä¸ä½¿ç”¨æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹é€‚åˆè§†å£ä¸­çš„æ‰€æœ‰å†…å®¹æ‰€éœ€çš„æœ€å°å®½åº¦ã€‚æµ‹é‡æ–¹å¼ä¸<code>clientHeight</code>ç›¸åŒï¼šå®ƒåŒ…å«å…ƒç´ çš„å†…è¾¹è·ï¼Œä½†ä¸åŒ…æ‹¬è¾¹æ¡†ï¼Œå¤–è¾¹è·æˆ–å‚ç›´æ»šåŠ¨æ¡ã€‚</p>
</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ppkå¤§ç¥æŠŠç§»åŠ¨è®¾å¤‡ä¸Šçš„viewportåˆ†ä¸º <strong>layout viewport</strong> ã€ <strong>visual viewport</strong> å’Œ <strong>ideal viewport</strong> ä¸‰ç±»ï¼Œå…¶ä¸­çš„<code>ideal viewport</code>æ˜¯æœ€é€‚åˆç§»åŠ¨è®¾å¤‡çš„viewportï¼Œ<code>ideal viewport</code>çš„å®½åº¦ç­‰äºç§»åŠ¨è®¾å¤‡çš„å±å¹•å®½åº¦ï¼Œåªè¦åœ¨cssä¸­æŠŠæŸä¸€å…ƒç´ çš„å®½åº¦è®¾ä¸º<code>ideal viewport</code>çš„å®½åº¦(å•ä½ç”¨px)ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ çš„å®½åº¦å°±æ˜¯è®¾å¤‡å±å¹•çš„å®½åº¦äº†ï¼Œä¹Ÿå°±æ˜¯å®½åº¦ä¸º100%çš„æ•ˆæœã€‚<code>ideal viewport</code> çš„æ„ä¹‰åœ¨äºï¼Œæ— è®ºåœ¨ä½•ç§åˆ†è¾¨ç‡çš„å±å¹•ä¸‹ï¼Œé‚£äº›é’ˆå¯¹<code>ideal viewport</code>è€Œè®¾è®¡çš„ç½‘ç«™ï¼Œä¸éœ€è¦ç”¨æˆ·æ‰‹åŠ¨ç¼©æ”¾ï¼Œä¹Ÿä¸éœ€è¦å‡ºç°æ¨ªå‘æ»šåŠ¨æ¡ï¼Œéƒ½å¯ä»¥å®Œç¾çš„å‘ˆç°ç»™ç”¨æˆ·ã€‚</p>
<h1 id="åˆ©ç”¨metaæ ‡ç­¾å¯¹viewportè¿›è¡Œæ§åˆ¶"><a href="#åˆ©ç”¨metaæ ‡ç­¾å¯¹viewportè¿›è¡Œæ§åˆ¶" class="headerlink" title="åˆ©ç”¨metaæ ‡ç­¾å¯¹viewportè¿›è¡Œæ§åˆ¶"></a>åˆ©ç”¨metaæ ‡ç­¾å¯¹viewportè¿›è¡Œæ§åˆ¶</h1><p>ç§»åŠ¨è®¾å¤‡é»˜è®¤çš„viewportæ˜¯layout viewportï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ªæ¯”å±å¹•è¦å®½çš„viewportï¼Œä½†åœ¨è¿›è¡Œç§»åŠ¨è®¾å¤‡ç½‘ç«™çš„å¼€å‘æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ideal viewportã€‚é‚£ä¹ˆæ€ä¹ˆæ‰èƒ½å¾—åˆ°ideal viewportå‘¢ï¼Ÿè¿™å°±è¯¥è½®åˆ°metaæ ‡ç­¾å‡ºåœºäº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è§†å£å…ƒæ ‡ç­¾ï¼ˆviewport meta æ ‡ç­¾ï¼‰æ¥è¿›è¡Œå¸ƒå±€è§†å£çš„è®¾ç½®ã€‚<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>ä¸Šè¿°<code>meta</code>æ ‡ç­¾çš„ä½œç”¨æ˜¯è®©å½“å‰viewportçš„å®½åº¦ç­‰äºè®¾å¤‡çš„å®½åº¦ï¼ŒåŒæ—¶ä¸å…è®¸ç”¨æˆ·æ‰‹åŠ¨ç¼©æ”¾ã€‚</p>
<p><code>meta viewport</code>æ ‡ç­¾é¦–å…ˆæ˜¯ç”±è‹¹æœå…¬å¸åœ¨å…¶<code>safari</code>æµè§ˆå™¨ä¸­å¼•å…¥çš„ï¼Œç›®çš„å°±æ˜¯è§£å†³ç§»åŠ¨è®¾å¤‡çš„<code>viewport</code>é—®é¢˜ã€‚åæ¥å®‰å“ä»¥åŠå„å¤§æµè§ˆå™¨å‚å•†ä¹Ÿéƒ½çº·çº·æ•ˆä»¿ï¼Œå¼•å…¥å¯¹meta viewportçš„æ”¯æŒï¼Œäº‹å®ä¹Ÿè¯æ˜è¿™ä¸ªä¸œè¥¿è¿˜æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p>
<p>åœ¨è‹¹æœçš„è§„èŒƒä¸­ï¼Œmeta viewport æœ‰6ä¸ªå±æ€§(æš‚ä¸”æŠŠcontentä¸­çš„é‚£äº›ä¸œè¥¿ç§°ä¸ºä¸€ä¸ªä¸ªå±æ€§å’Œå€¼)ï¼Œå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>å–å€¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>width</td>
<td>æ­£æ•´æ•°æˆ–device-width</td>
<td>å®šä¹‰è§†å£çš„å®½åº¦ï¼Œå•ä½ä¸ºåƒç´ </td>
</tr>
<tr>
<td>height</td>
<td>æ­£æ•´æ•°æˆ–device-height</td>
<td>å®šä¹‰è§†å£çš„é«˜åº¦ï¼Œå•ä½ä¸ºåƒç´ ï¼Œä¸€èˆ¬ä¸ç”¨</td>
</tr>
<tr>
<td>initial-scale</td>
<td>[0.0-10.0]</td>
<td>å®šä¹‰åˆå§‹ç¼©æ”¾å€¼</td>
</tr>
<tr>
<td>minimum-scale</td>
<td>[0.0-10.0]</td>
<td>å®šä¹‰æ”¾å¤§æœ€å¤§æ¯”ä¾‹ï¼Œå®ƒå¿…é¡»å°äºæˆ–ç­‰äºmaximum-scaleè®¾ç½®</td>
</tr>
<tr>
<td>maximum-scale</td>
<td>[0.0-10.0]</td>
<td>å®šä¹‰ç¼©å°æœ€å°æ¯”ä¾‹ï¼Œå®ƒå¿…é¡»å¤§äºæˆ–ç­‰äºminimum-scaleè®¾ç½®</td>
</tr>
<tr>
<td>user-scalable</td>
<td>yes / no</td>
<td>å®šä¹‰æ˜¯å¦å…è®¸ç”¨æˆ·æ‰‹åŠ¨ç¼©æ”¾é¡µé¢ï¼Œé»˜è®¤å€¼ yes</td>
</tr>
</tbody>
</table>
<p><strong>æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š</strong></p>
<ul>
<li>viewport æ ‡ç­¾åªå¯¹ç§»åŠ¨ç«¯æµè§ˆå™¨æœ‰æ•ˆï¼Œå¯¹ PC ç«¯æµè§ˆå™¨æ˜¯æ— æ•ˆçš„</li>
<li>å½“ç¼©æ”¾æ¯”ä¾‹ä¸º 100% æ—¶ï¼Œdip å®½åº¦ = CSS åƒç´ å®½åº¦ = ç†æƒ³è§†å£çš„å®½åº¦ = å¸ƒå±€è§†å£çš„å®½åº¦</li>
<li>å•ç‹¬è®¾ç½® initial-scale æˆ– width éƒ½ä¼šæœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œæ‰€ä»¥è®¾ç½®å¸ƒå±€è§†å£ä¸ºç†æƒ³è§†å£çš„æœ€ä½³æ–¹æ³•æ˜¯åŒæ—¶è®¾ç½®è¿™ä¸¤ä¸ªå±æ€§</li>
<li>å³ä½¿è®¾ç½®äº† user-scalable = noï¼Œåœ¨ Android Chrome æµè§ˆå™¨ä¸­ä¹Ÿå¯ä»¥å¼ºåˆ¶å¯ç”¨æ‰‹åŠ¨ç¼©æ”¾</li>
</ul>
<p>è¿™äº›å±æ€§å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨æˆ–æ··åˆä½¿ç”¨ï¼Œå¤šä¸ªå±æ€§åŒæ—¶ä½¿ç”¨æ—¶ç”¨é€—å·éš”å¼€å°±è¡Œäº†ã€‚</p>
<p>æ­¤å¤–ï¼Œåœ¨å®‰å“ä¸­è¿˜æ”¯æŒ<code>target-densitydpi</code> è¿™ä¸ªç§æœ‰å±æ€§ï¼Œå®ƒè¡¨ç¤ºç›®æ ‡è®¾å¤‡çš„å¯†åº¦ç­‰çº§ï¼Œä½œç”¨æ˜¯å†³å®šcssä¸­çš„1pxä»£è¡¨å¤šå°‘ç‰©ç†åƒç´ ã€‚</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>å–å€¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>target-densitydpi</td>
<td>high-dpi,medium-dpi,low-dpi,device-dpi</td>
<td>ç§æœ‰å±æ€§ï¼Œå®ƒè¡¨ç¤ºç›®æ ‡è®¾å¤‡çš„å¯†åº¦ç­‰çº§ï¼Œä½œç”¨æ˜¯å†³å®šcssä¸­çš„1pxä»£è¡¨å¤šå°‘ç‰©ç†åƒç´ </td>
</tr>
</tbody>
</table>
<p>ç‰¹åˆ«è¯´æ˜çš„æ˜¯ï¼Œå½“<code>target-densitydpi=device-dpi</code>æ—¶ï¼Œ cssä¸­çš„1pxä¼šç­‰äºç‰©ç†åƒç´ ä¸­çš„1pxã€‚</p>
<p>å› ä¸ºè¿™ä¸ªå±æ€§åªæœ‰å®‰å“æ”¯æŒï¼Œå¹¶ä¸”å®‰å“å·²ç»å†³å®šè¦åºŸå¼ƒ<code>&lt;strike&gt;target-densitydpi&lt;/strike&gt;</code>  è¿™ä¸ªå±æ€§äº†ï¼Œæ‰€ä»¥è¿™ä¸ªå±æ€§æˆ‘ä»¬è¦é¿å…è¿›è¡Œä½¿ç”¨ã€‚</p>
<h1 id="åŠ¨æ€æ”¹å˜meta-viewportæ ‡ç­¾"><a href="#åŠ¨æ€æ”¹å˜meta-viewportæ ‡ç­¾" class="headerlink" title="åŠ¨æ€æ”¹å˜meta viewportæ ‡ç­¾"></a>åŠ¨æ€æ”¹å˜meta viewportæ ‡ç­¾</h1><h2 id="ç¬¬ä¸€ç§æ–¹å¼ï¼š"><a href="#ç¬¬ä¸€ç§æ–¹å¼ï¼š" class="headerlink" title="ç¬¬ä¸€ç§æ–¹å¼ï¼š"></a>ç¬¬ä¸€ç§æ–¹å¼ï¼š</h2><p>ä½¿ç”¨<code>document.write</code>æ¥åŠ¨æ€è¾“å‡º<code>meta viewport</code>æ ‡ç­¾ï¼Œä¾‹å¦‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.write(<span class="string">'&lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬äºŒç§æ–¹å¼"><a href="#ç¬¬äºŒç§æ–¹å¼" class="headerlink" title="ç¬¬äºŒç§æ–¹å¼"></a>ç¬¬äºŒç§æ–¹å¼</h2><p>é€šè¿‡<code>setAttribute</code>æ¥æ”¹å˜</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">id</span>=<span class="string">"testViewport"</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width = 380"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> mvp = <span class="built_in">document</span>.getElementById(<span class="string">'testViewport'</span>);</span></span><br><span class="line"><span class="javascript">mvp.setAttribute(<span class="string">'content'</span>,<span class="string">'width=480'</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://segmentfault.com/a/1190000015884091" target="_blank" rel="noopener">https://segmentfault.com/a/1190000015884091</a></p>
<p><a href="https://www.quirksmode.org/mobile/viewports.html" target="_blank" rel="noopener">https://www.quirksmode.org/mobile/viewports.html</a></p>
<p><a href="https://www.quirksmode.org/mobile/viewports2.html" target="_blank" rel="noopener">https://www.quirksmode.org/mobile/viewports2.html</a></p>
<p><a href="https://www.quirksmode.org/mobile/metaviewport/" target="_blank" rel="noopener">https://www.quirksmode.org/mobile/metaviewport/</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Mobile/Viewport_meta_tag" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Mobile/Viewport_meta_tag</a></p>
<p><a href="https://www.jianshu.com/p/af6dad66e49a" target="_blank" rel="noopener">https://www.jianshu.com/p/af6dad66e49a</a></p>
<p><a href="http://viewportsizes.com" target="_blank" rel="noopener">http://viewportsizes.com</a></p>
<p><a href="https://juejin.im/post/5bb6c62be51d450e47142c60" target="_blank" rel="noopener">https://juejin.im/post/5bb6c62be51d450e47142c60</a></p>
<p><a href="https://www.jianshu.com/p/3d28f4959c5a" target="_blank" rel="noopener">https://www.jianshu.com/p/3d28f4959c5a</a></p>
<p><a href="https://stackoverflow.com/questions/6333927/difference-between-visual-viewport-and-layout-viewport" target="_blank" rel="noopener">https://stackoverflow.com/questions/6333927/difference-between-visual-viewport-and-layout-viewport</a></p>
]]></content>
      <categories>
        <category>HTML</category>
      </categories>
      <tags>
        <tag>HTML</tag>
        <tag>ç§»åŠ¨ç«¯é€‚é…</tag>
      </tags>
  </entry>
  <entry>
    <title>Android build.gradleé…ç½®è¯¦è§£</title>
    <url>/2019/04/10/Android-build-gradle%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ASæ˜¯é‡‡ç”¨gradleæ¥è¿›è¡Œæ„å»ºé¡¹ç›®ï¼Œè€Œgradleæ˜¯åŸºäºgroovyè¯­è¨€ã€‚è¿™é‡Œäº†è§£ä¸€ä¸‹é¡¹ç›®ä¸­gradleçš„è¯¦ç»†é…ç½®ã€‚</p>
<a id="more"></a>
<p><img src="project.png" alt="ä¸€ä¸ªæœ€ç®€å•çš„é¡¹ç›®ç»“æ„"></p>
<h1 id="Projectçš„build-gradleæ–‡ä»¶"><a href="#Projectçš„build-gradleæ–‡ä»¶" class="headerlink" title="Projectçš„build.gradleæ–‡ä»¶"></a>Projectçš„build.gradleæ–‡ä»¶</h1><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Top-level build file where you can add configuration options common to all sub-projects/modules.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">buildscript</span> &#123;</span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        google()<span class="comment">//ä»Android Studio3.0åæ–°å¢äº†google()é…ç½®ï¼Œå¯ä»¥å¼•ç”¨googleä¸Šçš„å¼€æºé¡¹</span></span><br><span class="line">        jcenter()<span class="comment">//æ˜¯ä¸€ä¸ªç±»ä¼¼äºgithubçš„ä»£ç æ‰˜ç®¡ä»“åº“ï¼Œå£°æ˜äº†jcenter()é…ç½®ï¼Œå¯ä»¥è½»æ¾å¼•ç”¨ jcenterä¸Šçš„å¼€æºé¡¹ç›®</span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">dependencies</span> &#123;</span><br><span class="line">        <span class="keyword">classpath</span> <span class="string">'com.android.tools.build:gradle:3.3.2'</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// <span class="doctag">NOTE:</span> Do not place your application dependencies here; they belong</span></span><br><span class="line">        <span class="comment">// in the individual module build.gradle files</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">allprojects</span> &#123;<span class="comment">//è¿™é‡Œæ˜¯é¡¹ç›®æœ¬èº«éœ€è¦çš„ä¾èµ–ï¼Œæ¯”å¦‚é¡¹ç›®æ‰€éœ€çš„mavenåº“</span></span><br><span class="line">    <span class="keyword">repositories</span> &#123;</span><br><span class="line">        google()</span><br><span class="line">        jcenter()</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿è¡Œgradle cleanæ—¶ï¼Œæ‰§è¡Œæ­¤å¤„å®šä¹‰çš„taskä»»åŠ¡ã€‚</span></span><br><span class="line"><span class="comment">// è¯¥ä»»åŠ¡ç»§æ‰¿è‡ªDeleteï¼Œåˆ é™¤æ ¹ç›®å½•ä¸­çš„buildç›®å½•ã€‚</span></span><br><span class="line"><span class="comment">// ç›¸å½“äºæ‰§è¡ŒDelete.delete(rootProject.buildDir)ã€‚</span></span><br><span class="line"><span class="comment">// gradleä½¿ç”¨groovyè¯­è¨€ï¼Œè°ƒç”¨methodæ—¶å¯ä»¥ä¸ç”¨åŠ ï¼ˆï¼‰ã€‚</span></span><br><span class="line"><span class="keyword">task</span> clean(type: <span class="keyword">Delete</span>) &#123;</span><br><span class="line">    <span class="keyword">delete</span> rootProject.buildDir</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>buildscript{}</code>é—­åŒ…æ˜¯gradleè„šæœ¬æ‰§è¡Œæ‰€éœ€è¦çš„ä¾èµ–ï¼Œåˆ†åˆ«æ˜¯å¯¹åº”çš„mavenåº“å’Œæ’ä»¶<ul>
<li><code>repositories{}</code>é—­åŒ…ï¼šé…ç½®è¿œç¨‹ä»“åº“,è¯¥é—­åŒ…ä¸­å£°æ˜äº†jcenter()å’Œgoogle()çš„é…ç½®ï¼Œå…¶ä¸­jcenteræ˜¯ä¸€ä¸ªä»£ç æ‰˜ç®¡ä»“åº“ï¼Œä¸Šé¢æ‰˜ç®¡äº†å¾ˆå¤šAndroidå¼€æºé¡¹ç›®ï¼Œåœ¨è¿™é‡Œé…ç½®äº†jcenteråæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä¸­æ–¹ä¾¿å¼•ç”¨jcenterä¸Šçš„å¼€æºé¡¹ç›®ï¼Œä»Android Studio3.0åæ–°å¢äº†google()é…ç½®ï¼Œå¯ä»¥å¼•ç”¨googleä¸Šçš„å¼€æºé¡¹ç›®</li>
<li><code>dependencies{}</code>é—­åŒ…ï¼šé…ç½®æ„å»ºå·¥å…·,è¯¥é—­åŒ…ä½¿ç”¨classpathå£°æ˜äº†ä¸€ä¸ªGradleæ’ä»¶ï¼Œç”±äºGradleå¹¶ä¸åªæ˜¯ç”¨æ¥æ„å»ºAndroidé¡¹ç›®ï¼Œå› æ­¤æ­¤å¤„å¼•å…¥ç›¸å…³æ’ä»¶æ¥æ„å»ºAndroidé¡¹ç›®ï¼Œå…¶ä¸­â€™3.0.0â€™ä¸ºè¯¥æ’ä»¶çš„ç‰ˆæœ¬å·ï¼Œå¯ä»¥æ ¹æ®æœ€æ–°çš„ç‰ˆæœ¬å·æ¥è°ƒæ•´</li>
</ul>
</li>
<li><code>allprojects{}</code>é—­åŒ…æ˜¯é¡¹ç›®æœ¬èº«éœ€è¦çš„ä¾èµ–ï¼Œæ¯”å¦‚é¡¹ç›®æ‰€éœ€è¦çš„mavenåº“</li>
<li><code>task clean(type: Delete)</code>æ˜¯è¿è¡Œgradle cleanæ—¶ï¼Œæ‰§è¡Œæ­¤å¤„å®šä¹‰çš„taskä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡ç»§æ‰¿è‡ªDeleteï¼Œåˆ é™¤æ ¹ç›®å½•ä¸­çš„buildç›®å½•ã€‚å…¶ä¸­buildscriptåŒ…å«repositoriesé—­åŒ…å’Œdependenciesé—­åŒ…</li>
</ul>
<h1 id="Moduleçš„build-gradleæ–‡ä»¶"><a href="#Moduleçš„build-gradleæ–‡ä»¶" class="headerlink" title="Moduleçš„build.gradleæ–‡ä»¶"></a>Moduleçš„build.gradleæ–‡ä»¶</h1><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">apply plugin: <span class="string">'com.android.application'</span></span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion <span class="number">28</span></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId <span class="string">"cn.net.sweetlover.myapplication"</span></span><br><span class="line">        minSdkVersion <span class="number">15</span></span><br><span class="line">        targetSdkVersion <span class="number">28</span></span><br><span class="line">        versionCode <span class="number">1</span></span><br><span class="line">        versionName <span class="string">"1.0"</span></span><br><span class="line">        testInstrumentationRunner <span class="string">"android.support.test.runner.AndroidJUnitRunner"</span></span><br><span class="line">    &#125;</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled <span class="keyword">false</span></span><br><span class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android-optimize.txt'</span>), <span class="string">'proguard-rules.pro'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])</span><br><span class="line">    implementation <span class="string">'com.android.support:appcompat-v7:28.0.0'</span></span><br><span class="line">    implementation <span class="string">'com.android.support.constraint:constraint-layout:1.1.3'</span></span><br><span class="line">    testImplementation <span class="string">'junit:junit:4.12'</span></span><br><span class="line">    androidTestImplementation <span class="string">'com.android.support.test:runner:1.0.2'</span></span><br><span class="line">    androidTestImplementation <span class="string">'com.android.support.test.espresso:espresso-core:3.0.2'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="apply-plugin"><a href="#apply-plugin" class="headerlink" title="apply plugin"></a>apply plugin</h2><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜æ˜¯Androidç¨‹åºï¼Œ</span></span><br><span class="line"><span class="comment">//com.android.application è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºæ¨¡å—</span></span><br><span class="line"><span class="comment">//com.android.library æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªåº“æ¨¡å—</span></span><br><span class="line"><span class="comment">//è€Œè¿™åŒºåˆ«ï¼šå‰è€…å¯ä»¥ç›´æ¥è¿è¡Œï¼Œåç€æ˜¯ä¾é™„åˆ«çš„åº”ç”¨ç¨‹åºè¿è¡Œ</span></span><br><span class="line">apply plugin: <span class="string">'com.android.application'</span></span><br></pre></td></tr></table></figure>
<p>apply pluginè¡¨ç¤ºåº”ç”¨äº†ä¸€ä¸ªæ’ä»¶ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§å€¼å¯é€‰ï¼š</p>
<ul>
<li><code>com.android.application</code>ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—ä¸ºåº”ç”¨ç¨‹åºæ¨¡å—ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œï¼Œæ‰“åŒ…å¾—åˆ°çš„æ˜¯<code>apk</code>æ–‡ä»¶</li>
<li><code>com.android.library</code>ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—ä¸ºåº“æ¨¡å—ï¼Œåªèƒ½ä½œä¸ºä»£ç åº“ä¾é™„ä¸åˆ«çš„åº”ç”¨ç¨‹åºæ¨¡å—æ¥è¿è¡Œï¼Œæ‰“åŒ…å¾—åˆ°çš„æ˜¯<code>aar</code>æ–‡ä»¶</li>
</ul>
<h2 id="android-é—­åŒ…"><a href="#android-é—­åŒ…" class="headerlink" title="android{}é—­åŒ…"></a>android{}é—­åŒ…</h2><p>è¿™ä¸ªé—­åŒ…ä¸»è¦ä¸ºäº†é…ç½®é¡¹ç›®æ„å»ºçš„å„ç§å±æ€§ï¼š</p>
<h3 id="signingConfigs"><a href="#signingConfigs" class="headerlink" title="signingConfigs{}"></a>signingConfigs{}</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">signingConfigs &#123;<span class="comment">// è‡ªåŠ¨åŒ–æ‰“åŒ…é…ç½®</span></span><br><span class="line">        release &#123;<span class="comment">// çº¿ä¸Šç¯å¢ƒ</span></span><br><span class="line">            keyAlias <span class="string">'test'</span></span><br><span class="line">            keyPassword <span class="string">'123456'</span></span><br><span class="line">            storeFile <span class="keyword">file</span>(<span class="string">'test.keystore'</span>)</span><br><span class="line">            storePassword <span class="string">'123456'</span></span><br><span class="line">        &#125;</span><br><span class="line">        debug &#123;<span class="comment">// å¼€å‘ç¯å¢ƒ</span></span><br><span class="line">            keyAlias <span class="string">'test'</span></span><br><span class="line">            keyPassword <span class="string">'123456'</span></span><br><span class="line">            storeFile <span class="keyword">file</span>(<span class="string">'test.keystore'</span>)</span><br><span class="line">            storePassword <span class="string">'123456'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥æ‰‹åŠ¨æ·»åŠ ç­¾åé…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>Project Structure</code>-&gt;<code>app</code>-&gt;<code>Singing</code>ï¼Œç‚¹å‡»ä¸‹é¢<code>+</code>å·å¡«å…¥é…ç½®ä¿¡æ¯å³å¯ç”Ÿæˆä»£ç é…ç½®ã€‚</p>
<p><img src="sign_auto.png" alt="ASé…ç½®"></p>
<p>ç­¾åé…ç½®å®Œæˆåå¯ä»¥æ–¹ä¾¿å¸¦ç­¾åæ‰“åŒ…ï¼Œåœ¨moduleçš„<code>Build Variants</code>ä¸­æœ‰ä¸¤ä¸ª<code>Type</code>ï¼Œåˆ†åˆ«æ˜¯<code>debug</code>å’Œ<code>release</code>ï¼Œå¯ä»¥é€‰æ‹©ä»»æ„ä¸€ä¸ªç±»å‹è¿›è¡Œæ‰“åŒ…ï¼Œå¹¶ä¸”ä»–ä»¬ä¼šåˆ©ç”¨å„è‡ªé…ç½®çš„Keyè¿›è¡Œæ‰“åŒ…ï¼Œæ‰§è¡Œ Run appæˆ–è€…<code>Build</code>-&gt;<code>Build apk</code>å°±ä¼šè‡ªåŠ¨åœ¨<code>module name/app/build/outputs/apk</code>è·¯å¾„ä¸‹ç”ŸæˆApkæ–‡ä»¶ã€‚å¦ä¸€ç§æ‰“åŒ…æ–¹å¼æ˜¯Build-&gt;Generate Signed APKå¡«å†™ç­¾åä¿¡æ¯ç”ŸæˆApkã€‚</p>
<h3 id="compileSdkVersion"><a href="#compileSdkVersion" class="headerlink" title="compileSdkVersion"></a>compileSdkVersion</h3><p>è®¾ç½®ç¼–è¯‘æ—¶ç”¨çš„Androidç‰ˆæœ¬</p>
<h3 id="buildToolsVersion"><a href="#buildToolsVersion" class="headerlink" title="buildToolsVersion"></a>buildToolsVersion</h3><p>è®¾ç½®ç¼–è¯‘æ—¶ä½¿ç”¨çš„æ„å»ºå·¥å…·çš„ç‰ˆæœ¬ï¼ŒAndroid Studio3.0åå»é™¤æ­¤é¡¹é…ç½®</p>
<h3 id="defaultConfig"><a href="#defaultConfig" class="headerlink" title="defaultConfig{}"></a>defaultConfig{}</h3><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">defaultConfig &#123;</span><br><span class="line">        applicationId <span class="string">"cn.net.sweetlover.myapplication"</span><span class="comment">//é¡¹ç›®çš„åŒ…å</span></span><br><span class="line">        minSdkVersion <span class="number">16</span><span class="comment">//é¡¹ç›®æœ€ä½å…¼å®¹çš„ç‰ˆæœ¬</span></span><br><span class="line">        targetSdkVersion <span class="number">27</span><span class="comment">//é¡¹ç›®çš„ç›®æ ‡ç‰ˆæœ¬</span></span><br><span class="line">        versionCode <span class="number">1</span><span class="comment">//ç‰ˆæœ¬å·</span></span><br><span class="line">        versionName <span class="string">"1.0"</span><span class="comment">//ç‰ˆæœ¬åç§°</span></span><br><span class="line">        testInstrumentationRunner <span class="string">"android.support.test.runner.AndroidJUnitRunner"</span><span class="comment">//è¡¨æ˜è¦ä½¿ç”¨AndroidJUnitRunnerè¿›è¡Œå•å…ƒæµ‹è¯•</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>applicationId</code>ï¼šæŒ‡å®šäº†é¡¹ç›®çš„åŒ…åã€‚</li>
<li><code>minSdkVersion</code>:æŒ‡å®šé¡¹ç›®æœ€ä½å…¼å®¹çš„ç‰ˆæœ¬ï¼Œå¦‚æœè®¾å¤‡å°äºè¿™ä¸ªç‰ˆæœ¬æˆ–è€…å¤§äºmaxSdkVersion(ä¸€èˆ¬ä¸ç”¨)å°†æ— æ³•å®‰è£…è¿™ä¸ªåº”ç”¨ï¼Œè¿™é‡ŒæŒ‡å®šä¸º16ï¼Œè¡¨ç¤ºæœ€ä½å…¼å®¹åˆ°Android 4.1ç³»ç»Ÿã€‚</li>
<li><code>targetSdkVersion</code>:æŒ‡å®šé¡¹ç›®çš„ç›®æ ‡ç‰ˆæœ¬ï¼Œè¡¨ç¤ºåœ¨è¯¥ç›®æ ‡ç‰ˆæœ¬ä¸Šå·²ç»åšè¿‡å……åˆ†æµ‹è¯•ï¼Œç³»ç»Ÿä¼šä¸ºè¯¥åº”ç”¨å¯åŠ¨ä¸€äº›å¯¹åº”è¯¥ç›®æ ‡ç³»ç»Ÿçš„æœ€æ–°åŠŸèƒ½ç‰¹æ€§ï¼ŒAndroidç³»ç»Ÿå¹³å°çš„è¡Œä¸ºå˜æ›´ï¼Œåªæœ‰targetSdkVersionçš„å±æ€§å€¼è¢«è®¾ç½®ä¸ºå¤§äºæˆ–ç­‰äºè¯¥ç³»ç»Ÿå¹³å°çš„APIç‰ˆæœ¬æ—¶ï¼Œæ‰ä¼šç”Ÿæ•ˆã€‚ä¾‹å¦‚ï¼Œè‹¥æŒ‡å®štargetSdkVersionå€¼ä¸º22ï¼Œåˆ™è¡¨ç¤ºè¯¥ç¨‹åºæœ€é«˜åªåœ¨Android5.1ç‰ˆæœ¬ä¸Šåšè¿‡å……åˆ†æµ‹è¯•ï¼Œåœ¨Android6.0ç³»ç»Ÿä¸Šï¼ˆå¯¹åº”targetSdkVersionä¸º23ï¼‰æ‹¥æœ‰çš„æ–°ç‰¹æ€§å¦‚ç³»ç»Ÿè¿è¡Œæ—¶æƒé™ç­‰åŠŸèƒ½å°±ä¸ä¼šè¢«å¯ç”¨ã€‚</li>
<li><code>versionCode</code>:è¡¨ç¤ºç‰ˆæœ¬å·ï¼Œä¸€èˆ¬æ¯æ¬¡æ‰“åŒ…ä¸Šçº¿æ—¶è¯¥å€¼åªèƒ½å¢åŠ ï¼Œæ‰“åŒ…åçœ‹ä¸è§ã€‚</li>
<li><code>versionName</code>:è¡¨ç¤ºç‰ˆæœ¬åç§°ï¼Œå±•ç¤ºåœ¨åº”ç”¨å¸‚åœºä¸Šã€‚</li>
<li><code>testInstrumentationRunner</code>:<code>&quot;android.support.test.runner.AndroidJUnitRunner&quot;</code>è¡¨æ˜è¦ä½¿ç”¨<code>AndroidJUnitRunner</code>è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚</li>
</ul>
<h3 id="buildTypes"><a href="#buildTypes" class="headerlink" title="buildTypes{}"></a>buildTypes{}</h3><p>è¿™ä¸ªé—­åŒ…ä¸»è¦æŒ‡å®šç”Ÿæˆå®‰è£…æ–‡ä»¶çš„ä¸»è¦é…ç½®ï¼Œä¸€èˆ¬åŒ…å«ä¸¤ä¸ªå­é—­åŒ…ï¼Œä¸€ä¸ªæ˜¯<code>debug</code>é—­åŒ…ï¼Œç”¨äºæŒ‡å®šç”Ÿæˆæµ‹è¯•ç‰ˆå®‰è£…æ–‡ä»¶çš„é…ç½®ï¼Œå¯ä»¥å¿½ç•¥ä¸å†™ï¼›å¦ä¸€ä¸ªæ˜¯<code>release</code>é—­åŒ…ï¼Œç”¨äºæŒ‡å®šç”Ÿæˆæ­£å¼ç‰ˆå®‰è£…æ–‡ä»¶çš„é…ç½®ã€‚ä¸¤è€…èƒ½é…ç½®çš„å‚æ•°ç›¸åŒï¼Œæœ€å¤§çš„åŒºåˆ«é»˜è®¤å±æ€§é…ç½®ä¸ä¸€æ ·ï¼Œä¸¤ç§æ¨¡å¼æ”¯æŒçš„å±æ€§é…ç½®å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="buildtype.png" alt></p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">buildTypes &#123;<span class="comment">// ç”Ÿäº§/æµ‹è¯•ç¯å¢ƒé…ç½®</span></span><br><span class="line">        release &#123;<span class="comment">// ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line">            buildConfigField(<span class="string">"boolean"</span>, <span class="string">"LOG_DEBUG"</span>, <span class="string">"false"</span>)<span class="comment">//é…ç½®Logæ—¥å¿—</span></span><br><span class="line">            buildConfigField(<span class="string">"String"</span>, <span class="string">"URL_PERFIX"</span>, <span class="string">"\"https://release.cn/\""</span>)<span class="comment">// é…ç½®URLå‰ç¼€</span></span><br><span class="line">            minifyEnabled <span class="keyword">false</span><span class="comment">//æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·†</span></span><br><span class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span><span class="comment">//æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶</span></span><br><span class="line">            signingConfig signingConfigs.release<span class="comment">//è®¾ç½®ç­¾åä¿¡æ¯</span></span><br><span class="line">            pseudoLocalesEnabled <span class="keyword">false</span><span class="comment">//æ˜¯å¦åœ¨APKä¸­ç”Ÿæˆä¼ªè¯­è¨€ç¯å¢ƒï¼Œå¸®åŠ©å›½é™…åŒ–çš„ä¸œè¥¿ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š</span></span><br><span class="line">            zipAlignEnabled <span class="keyword">true</span><span class="comment">//æ˜¯å¦å¯¹APKåŒ…æ‰§è¡ŒZIPå¯¹é½ä¼˜åŒ–ï¼Œå‡å°zipä½“ç§¯ï¼Œå¢åŠ è¿è¡Œæ•ˆç‡</span></span><br><span class="line">            applicationIdSuffix <span class="string">'test'</span><span class="comment">//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š</span></span><br><span class="line">            versionNameSuffix <span class="string">'test'</span><span class="comment">//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š</span></span><br><span class="line">        &#125;</span><br><span class="line">        debug &#123;<span class="comment">// æµ‹è¯•ç¯å¢ƒ</span></span><br><span class="line">            buildConfigField(<span class="string">"boolean"</span>, <span class="string">"LOG_DEBUG"</span>, <span class="string">"true"</span>)<span class="comment">//é…ç½®Logæ—¥å¿—</span></span><br><span class="line">            buildConfigField(<span class="string">"String"</span>, <span class="string">"URL_PERFIX"</span>, <span class="string">"\"https://test.com/\""</span>)<span class="comment">// é…ç½®URLå‰ç¼€</span></span><br><span class="line">            minifyEnabled <span class="keyword">false</span><span class="comment">//æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·†</span></span><br><span class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span><span class="comment">//æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶</span></span><br><span class="line">            signingConfig signingConfigs.debug<span class="comment">//è®¾ç½®ç­¾åä¿¡æ¯</span></span><br><span class="line">            debuggable <span class="keyword">false</span><span class="comment">//æ˜¯å¦æ”¯æŒæ–­ç‚¹è°ƒè¯•</span></span><br><span class="line">            jniDebuggable <span class="keyword">false</span><span class="comment">//æ˜¯å¦å¯ä»¥è°ƒè¯•NDKä»£ç </span></span><br><span class="line">            renderscriptDebuggable <span class="keyword">false</span><span class="comment">//æ˜¯å¦å¼€å¯æ¸²æŸ“è„šæœ¬å°±æ˜¯ä¸€äº›cå†™çš„æ¸²æŸ“æ–¹æ³•</span></span><br><span class="line">            zipAlignEnabled <span class="keyword">true</span><span class="comment">//æ˜¯å¦å¯¹APKåŒ…æ‰§è¡ŒZIPå¯¹é½ä¼˜åŒ–ï¼Œå‡å°zipä½“ç§¯ï¼Œå¢åŠ è¿è¡Œæ•ˆç‡</span></span><br><span class="line">            pseudoLocalesEnabled <span class="keyword">false</span><span class="comment">//æ˜¯å¦åœ¨APKä¸­ç”Ÿæˆä¼ªè¯­è¨€ç¯å¢ƒï¼Œå¸®åŠ©å›½é™…åŒ–çš„ä¸œè¥¿ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š</span></span><br><span class="line">            applicationIdSuffix <span class="string">'test'</span><span class="comment">//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š</span></span><br><span class="line">            versionNameSuffix <span class="string">'test'</span><span class="comment">//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><code>release{}</code>é—­åŒ…å’Œ<code>debug{}</code>é—­åŒ…ä¸¤è€…èƒ½é…ç½®çš„å‚æ•°ç›¸åŒï¼Œæœ€å¤§çš„åŒºåˆ«é»˜è®¤å±æ€§é…ç½®ä¸ä¸€æ ·ï¼š</p>
<ul>
<li><code>minifyEnabled</code>:è¡¨æ˜æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·†ï¼Œtrueè¡¨ç¤ºå¯¹ä»£ç è¿›è¡Œæ··æ·†ï¼Œfalseè¡¨ç¤ºå¯¹ä»£ç ä¸è¿›è¡Œæ··æ·†ï¼Œé»˜è®¤çš„æ˜¯falseã€‚</li>
<li><code>proguardFiles</code>:æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶ï¼Œè¿™é‡ŒæŒ‡å®šäº†<code>proguard-android.txt</code>æ–‡ä»¶å’Œ<code>proguard-rules.pro</code>æ–‡ä»¶ä¸¤ä¸ªæ–‡ä»¶ï¼Œ<code>proguard-android.txt</code>æ–‡ä»¶ä¸ºé»˜è®¤çš„æ··æ·†æ–‡ä»¶ï¼Œé‡Œé¢å®šä¹‰äº†ä¸€äº›é€šç”¨çš„æ··æ·†è§„åˆ™ã€‚<code>proguard-rules.pro</code>æ–‡ä»¶ä½äºå½“å‰é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œå¯ä»¥åœ¨è¯¥æ–‡ä»¶ä¸­å®šä¹‰ä¸€äº›é¡¹ç›®ç‰¹æœ‰çš„æ··æ·†è§„åˆ™ã€‚</li>
<li><code>buildConfigField</code>:ç”¨äºè§£å†³Betaç‰ˆæœ¬æœåŠ¡å’ŒReleaseç‰ˆæœ¬æœåŠ¡åœ°å€ä¸åŒæˆ–è€…ä¸€äº›Logæ‰“å°éœ€æ±‚æ§åˆ¶çš„ã€‚ <strong>ä¾‹å¦‚ï¼šé…ç½®buildConfigField(â€œbooleanâ€, â€œLOG_DEBUGâ€, â€œtrueâ€)</strong>ï¼Œè¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸‰ä¸ªéç©ºçš„å‚æ•°ï¼Œç¬¬ä¸€ä¸ªï¼šç¡®å®šå€¼çš„ç±»å‹ï¼Œç¬¬äºŒä¸ªï¼šæŒ‡å®škeyçš„åå­—ï¼Œç¬¬ä¸‰ä¸ªï¼šä¼ å€¼ï¼Œè°ƒç”¨çš„æ—¶å€™BuildConfig.LOG_DEBUGå³å¯è°ƒç”¨ã€‚</li>
<li><code>debuggable</code>:è¡¨ç¤ºæ˜¯å¦æ”¯æŒæ–­ç‚¹è°ƒè¯•ï¼Œreleaseé»˜è®¤ä¸ºfalseï¼Œdebugé»˜è®¤ä¸ºtrueã€‚</li>
<li><code>jniDebuggable</code>:è¡¨ç¤ºæ˜¯å¦å¯ä»¥è°ƒè¯•NDKä»£ç ï¼Œä½¿ç”¨lldbè¿›è¡Œcå’Œc++ä»£ç è°ƒè¯•ï¼Œreleaseé»˜è®¤ä¸ºfalseã€‚</li>
<li><code>signingConfig</code>:è®¾ç½®ç­¾åä¿¡æ¯ï¼Œé€šè¿‡<code>signingConfigs.release</code>æˆ–è€…<code>signingConfigs.debug</code>ï¼Œé…ç½®ç›¸åº”çš„ç­¾åï¼Œä½†æ˜¯æ·»åŠ æ­¤é…ç½®å‰å¿…é¡»å…ˆæ·»åŠ <code>signingConfigs</code>é—­åŒ…ï¼Œæ·»åŠ ç›¸åº”çš„ç­¾åä¿¡æ¯ã€‚</li>
<li><code>renderscriptDebuggable</code>:è¡¨ç¤ºæ˜¯å¦å¼€å¯æ¸²æŸ“è„šæœ¬å°±æ˜¯ä¸€äº›cå†™çš„æ¸²æŸ“æ–¹æ³•ï¼Œé»˜è®¤ä¸ºfalseã€‚</li>
<li><code>renderscriptOptimLevel</code>:è¡¨ç¤ºæ¸²æŸ“ç­‰çº§ï¼Œé»˜è®¤æ˜¯3ã€‚</li>
<li><code>pseudoLocalesEnabled</code>:æ˜¯å¦åœ¨APKä¸­ç”Ÿæˆä¼ªè¯­è¨€ç¯å¢ƒï¼Œå¸®åŠ©å›½é™…åŒ–çš„ä¸œè¥¿ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤šã€‚</li>
<li><code>applicationIdSuffix</code>:å’ŒdefaultConfigä¸­é…ç½®æ˜¯ä¸€çš„ï¼Œè¿™é‡Œæ˜¯åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤šã€‚</li>
<li><code>versionNameSuffix</code>:è¡¨ç¤ºæ·»åŠ ç‰ˆæœ¬åç§°çš„åç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤šã€‚</li>
<li><code>zipAlignEnabled</code>:è¡¨ç¤ºæ˜¯å¦å¯¹APKåŒ…æ‰§è¡ŒZIPå¯¹é½ä¼˜åŒ–ï¼Œå‡å°zipä½“ç§¯ï¼Œå¢åŠ è¿è¡Œæ•ˆç‡ï¼Œreleaseå’Œdebugé»˜è®¤éƒ½ä¸ºtrueã€‚</li>
</ul>
<h3 id="sourceSets"><a href="#sourceSets" class="headerlink" title="sourceSets{}"></a>sourceSets{}</h3><p>é…ç½®ç›®å½•æŒ‡å‘</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">sourceSets</span> &#123;<span class="comment">//ç›®å½•æŒ‡å‘é…ç½®</span></span><br><span class="line">        main &#123;</span><br><span class="line">            jniLibs.srcDirs = [<span class="string">'libs'</span>]<span class="comment">//æŒ‡å®šlibåº“ç›®å½•</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½® <code>jniLibs.srcDirs = [&#39;libs&#39;]</code>ï¼Œå¯ä»¥åœ¨<code>Android studio</code>çš„<code>Android</code>è§†å›¾ä¸‹ç”Ÿæˆ<code>jniLibs</code>æ–‡ä»¶å¤¹ï¼Œå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å­˜æ”¾jaråŒ…å’Œåº“æ–‡ä»¶ï¼Œå…¶ä¸­<code>Android</code>è§†å›¾ä¸‹çš„<code>jniLibs</code>å’Œ<code>project</code>è§†å›¾ä¸‹çš„<code>libs</code>æŒ‡å‘åŒä¸€æ–‡ä»¶å¤¹ï¼ˆappâ†’libsï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="sourceset.png" alt></p>
<p><strong>æ›´å¤šäº‹ä¾‹ï¼š</strong></p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">manifest.srcFile <span class="string">'AndroidManifest.xml'</span></span><br><span class="line">java.srcDirs = [<span class="string">'src'</span>]</span><br><span class="line">resources.srcDirs = [<span class="string">'src'</span>]</span><br><span class="line">aidl.srcDirs = [<span class="string">'src'</span>]</span><br><span class="line">renderscript.srcDirs = [<span class="string">'src'</span>]</span><br><span class="line">res.srcDirs = [<span class="string">'res'</span>]</span><br><span class="line">assets.srcDirs = [<span class="string">'assets'</span>]</span><br><span class="line">jniLibs.srcDirs = [<span class="string">'libs'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="packagingOptions"><a href="#packagingOptions" class="headerlink" title="packagingOptions{}"></a>packagingOptions{}</h3><p>æ‰“åŒ…æ—¶çš„ç›¸å…³é…ç½®</p>
<p>å½“é¡¹ç›®ä¸­ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“è¶Šæ¥è¶Šå¤šæ—¶ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°ä¸¤ä¸ªä¾èµ–åº“ä¸­å­˜åœ¨åŒä¸€ä¸ªï¼ˆåç§°ï¼‰æ–‡ä»¶ã€‚å¦‚æœè¿™æ ·ï¼ŒGradleåœ¨æ‰“åŒ…æ—¶å°±ä¼šæç¤ºé”™è¯¯ï¼ˆè­¦å‘Šï¼‰ã€‚é‚£ä¹ˆå°±å¯ä»¥æ ¹æ®æç¤ºï¼Œç„¶åä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å°†é‡å¤çš„æ–‡ä»¶å‰”é™¤ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯é€šè¿‡excludeå»é™¤é‡å¤çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">packagingOptions&#123;</span><br><span class="line">        <span class="comment">//pickFirstsåšç”¨æ˜¯ å½“æœ‰é‡å¤æ–‡ä»¶æ—¶ æ‰“åŒ…ä¼šæŠ¥é”™ è¿™æ ·é…ç½®ä¼šä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶æ‰“åŒ…è¿›å…¥apk</span></span><br><span class="line">        <span class="comment">// è¡¨ç¤ºå½“apkä¸­æœ‰é‡å¤çš„META-INFç›®å½•ä¸‹æœ‰é‡å¤çš„LICENSEæ–‡ä»¶æ—¶  åªç”¨ç¬¬ä¸€ä¸ª è¿™æ ·æ‰“åŒ…å°±ä¸ä¼šæŠ¥é”™</span></span><br><span class="line">        pickFirsts = [<span class="string">'META-INF/LICENSE'</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment">//mergesä½•å¿… å½“å‡ºç°é‡å¤æ–‡ä»¶æ—¶ åˆå¹¶é‡å¤çš„æ–‡ä»¶ ç„¶åæ‰“åŒ…å…¥apk</span></span><br><span class="line">        <span class="comment">//è¿™ä¸ªæ˜¯æœ‰é»˜è®¤å€¼å¾— merges = [] è¿™æ ·ä¼šæŠŠé»˜é»˜è®¤å€¼å»æ‰  æ‰€ä»¥æˆ‘ä»¬ç”¨ä¸‹é¢è¿™ç§æ–¹å¼ åœ¨é»˜è®¤å€¼åæ·»åŠ </span></span><br><span class="line">        merge <span class="string">'META-INF/LICENSE'</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿™ä¸ªæ˜¯åœ¨åŒæ—¶ä½¿ç”¨butterknifeã€dagger2åšçš„ä¸€ä¸ªå¤„ç†ã€‚åŒç†ï¼Œé‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œåªè¦æ ¹æ®gradleçš„æç¤ºï¼Œåšç±»ä¼¼å¤„ç†å³å¯ã€‚</span></span><br><span class="line">        <span class="keyword">exclude</span> <span class="string">'META-INF/services/javax.annotation.processing.Processor'</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="productFlavors"><a href="#productFlavors" class="headerlink" title="productFlavors{}"></a>productFlavors{}</h3><p>å¤šæ¸ é“é…ç½®</p>
<p>è¿™ä¸ªé…ç½®æ˜¯ç»å¸¸ä¼šä½¿ç”¨åˆ°çš„ï¼Œé€šå¸¸åœ¨é€‚é…å¤šä¸ªæ¸ é“çš„æ—¶å€™ï¼Œéœ€è¦ä¸ºç‰¹å®šçš„æ¸ é“åšéƒ¨åˆ†ç‰¹æ®Šçš„å¤„ç†ï¼Œæ¯”å¦‚è®¾ç½®ä¸åŒçš„åŒ…åã€åº”ç”¨åç­‰ã€‚åœºæ™¯ï¼šå½“æˆ‘ä»¬ä½¿ç”¨å‹ç›Ÿç»Ÿè®¡æ—¶ï¼Œé€šå¸¸éœ€è¦è®¾ç½®ä¸€ä¸ªæ¸ é“IDï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨productFlavorsæ¥ç”Ÿæˆå¯¹åº”æ¸ é“ä¿¡æ¯çš„åŒ…ï¼Œå¦‚ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">android &#123;  </span><br><span class="line">    productFlavors &#123;</span><br><span class="line">        wandoujia &#123;</span><br><span class="line">            <span class="comment">//è±Œè±†èšæ¸ é“åŒ…é…ç½®</span></span><br><span class="line">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: <span class="string">"wandoujia"</span>]</span><br><span class="line">            <span class="comment">//manifestPlaceholdersçš„ä½¿ç”¨åœ¨åç»­ç« èŠ‚ï¼ˆAndroidManifesté‡Œçš„å ä½ç¬¦ï¼‰ä¸­ä»‹ç»</span></span><br><span class="line">        &#125;</span><br><span class="line">        xiaomi &#123;</span><br><span class="line">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: <span class="string">"xiaomi"</span>]</span><br><span class="line">            applicationId <span class="string">"com.wiky.gradle.xiaomi"</span> <span class="comment">//é…ç½®åŒ…å</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        _360 &#123;</span><br><span class="line">            manifestPlaceholders = [UMENG_CHANNEL_VALUE: <span class="string">"_360"</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´ç®€æ´çš„æ–¹å¼ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">android &#123;  </span><br><span class="line">    productFlavors &#123;</span><br><span class="line">        wandoujia &#123;&#125;</span><br><span class="line">        xiaomi &#123;&#125;</span><br><span class="line">        _360 &#123;&#125;</span><br><span class="line">       <span class="comment">//...</span></span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">    productFlavors.all &#123; </span><br><span class="line">        <span class="comment">//æ‰¹é‡ä¿®æ”¹ï¼Œç±»ä¼¼ä¸€ä¸ªå¾ªåºéå†</span></span><br><span class="line">        flavor -&gt; flavor.manifestPlaceholders = [UMENG_CHANNEL_VALUE: name] </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½®å®Œä¹‹åï¼Œåœ¨å‘½ä»¤è¡Œçª—å£ä¸­ï¼ˆTerminalï¼‰ä¸­è¾“å…¥<code>gradlew assembleRelease</code>ï¼ˆwindowsï¼‰å³å¯å¼€å§‹æ‰“åŒ…ï¼Œåœ¨Macç³»ç»Ÿä¸­å¯¹åº”æŒ‡ä»¤æ˜¯<code>./gradlew assembleRelease</code>ã€‚å½“ç„¶ï¼Œå¦‚æœæƒ³è¦debugç‰ˆæœ¬çš„åŒ…ï¼Œå°†æŒ‡ä»¤ä¸­<code>assembleRelease</code>æ”¹ä¸º<code>assembleDebug</code>å³å¯ã€‚æœ€åç”Ÿæˆçš„åŒ…è¿˜æ˜¯åœ¨<code>app/build/outputs/apk</code>ä¸­ï¼Œé»˜è®¤å‘½åæ ¼å¼å¦‚<code>app-wandoujia-release-unsigned.apk</code>ï¼Œåœ¨moduleçš„<code>Build Variants</code>ä¸­å¯ä»¥é€‰æ‹©ç›¸åº”çš„æ¸ é“ã€‚<br>æ³¨ï¼šAndroid Studio3.0éœ€åœ¨ä¸»appçš„build.gradleé‡Œé¢çš„</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">defaultConfig &#123;</span><br><span class="line">    targetSdkVersionï¼š***</span><br><span class="line">    minSdkVersion ï¼š***</span><br><span class="line">    versionCodeï¼š***</span><br><span class="line">    versionName ï¼š***</span><br><span class="line">    <span class="comment">//ç‰ˆæœ¬ååé¢æ·»åŠ ä¸€å¥è¯ï¼Œæ„æ€å°±æ˜¯flavor dimension å®ƒçš„ç»´åº¦å°±æ˜¯è¯¥ç‰ˆæœ¬å·ï¼Œè¿™æ ·ç»´åº¦å°±æ˜¯éƒ½æ˜¯ç»Ÿä¸€çš„äº†</span></span><br><span class="line">    flavorDimensions <span class="string">"versionCode"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="lintOptions"><a href="#lintOptions" class="headerlink" title="lintOptions{}"></a>lintOptions{}</h3><p>ä»£ç æ‰«æåˆ†æ</p>
<p>Lint æ˜¯Android Studio æä¾›çš„ ä»£ç æ‰«æåˆ†æå·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å‘ç°ä»£ç ç»“æ„/è´¨é‡é—®é¢˜ï¼ŒåŒæ—¶æä¾›ä¸€äº›è§£å†³æ–¹æ¡ˆï¼Œè€Œä¸”è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦æˆ‘ä»¬æ‰‹å†™æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>Lint å‘ç°çš„æ¯ä¸ªé—®é¢˜éƒ½æœ‰æè¿°ä¿¡æ¯å’Œç­‰çº§ï¼ˆå’Œæµ‹è¯•å‘ç° bug å¾ˆç›¸ä¼¼ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®šä½é—®é¢˜ï¼ŒåŒæ—¶æŒ‰ç…§ä¸¥é‡ç¨‹åº¦è¿›è¡Œè§£å†³ã€‚</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç¨‹åºåœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šæ£€æŸ¥lintï¼Œæœ‰ä»»ä½•é”™è¯¯æç¤ºä¼šåœæ­¢buildï¼Œæˆ‘ä»¬å¯ä»¥å…³é—­è¿™ä¸ªå¼€å…³</span></span><br><span class="line">    lintOptions &#123;</span><br><span class="line">        abortOnError <span class="keyword">false</span> <span class="comment">//å³ä½¿æŠ¥é”™ä¹Ÿä¸ä¼šåœæ­¢æ‰“åŒ…</span></span><br><span class="line">        checkReleaseBuilds <span class="keyword">false</span>  <span class="comment">//æ‰“åŒ…releaseç‰ˆæœ¬çš„æ—¶å€™è¿›è¡Œæ£€æµ‹</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="dependencies"><a href="#dependencies" class="headerlink" title="dependencies{}"></a>dependencies{}</h2><p>è¯¥é—­åŒ…å®šä¹‰äº†é¡¹ç›®çš„ä¾èµ–å…³ç³»ï¼Œä¸€èˆ¬é¡¹ç›®éƒ½æœ‰ä¸‰ç§ä¾èµ–æ–¹å¼ï¼šæœ¬åœ°ä¾èµ–ã€åº“ä¾èµ–å’Œè¿œç¨‹ä¾èµ–ã€‚æœ¬åœ°ä¾èµ–å¯ä»¥å¯¹æœ¬åœ°çš„jaråŒ…æˆ–ç›®å½•æ·»åŠ ä¾èµ–å…³ç³»ï¼Œåº“ä¾èµ–å¯ä»¥å¯¹é¡¹ç›®ä¸­çš„åº“æ¨¡å—æ·»åŠ ä¾èµ–å…³ç³»ï¼Œè¿œç¨‹ä¾èµ–å¯ä»¥å¯¹jceneråº“ä¸Šçš„å¼€æºé¡¹ç›®æ·»åŠ ä¾èµ–å…³ç³»ã€‚ä»Android Studio3.0å<code>compile</code>å¼•å…¥åº“ä¸åœ¨ä½¿ç”¨ï¼Œè€Œæ˜¯é€šè¿‡<code>api</code>å’Œ<code>implementation</code>ï¼Œ<code>api</code>å®Œå…¨ç­‰åŒäºä»¥å‰çš„<code>compile</code>ï¼Œç”¨<code>api</code>å¼•å…¥çš„åº“æ•´ä¸ªé¡¹ç›®éƒ½å¯ä»¥ä½¿ç”¨ï¼Œç”¨<code>implementation</code>å¼•å…¥çš„åº“åªæœ‰å¯¹åº”çš„Moduleèƒ½ä½¿ç”¨ï¼Œå…¶ä»–Moduleä¸èƒ½ä½¿ç”¨ï¼Œç”±äºä¹‹å‰çš„é¡¹ç›®ç»Ÿä¸€ç”¨<code>compile</code>ä¾èµ–ï¼Œå¯¼è‡´çš„æƒ…å†µå°±æ˜¯æ¨¡å—è€¦åˆæ€§å¤ªé«˜ï¼Œä¸åˆ©äºé¡¹ç›®æ‹†è§£ï¼Œä½¿ç”¨<code>implementation</code>ä¹‹åè™½ç„¶ä½¿ç”¨èµ·æ¥å¤æ‚äº†ä½†æ˜¯åšåˆ°é™ä½å¶åˆå…´æé«˜å®‰å…¨æ€§ã€‚</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    implementation <span class="keyword">fileTree</span>(<span class="keyword">include</span>: [<span class="string">'*.jar'</span>], dir: <span class="string">'libs'</span>)</span><br><span class="line">    implementation <span class="string">'com.android.support:appcompat-v7:28.0.0'</span></span><br><span class="line">    implementation <span class="string">'com.android.support.constraint:constraint-layout:1.1.3'</span></span><br><span class="line">    testImplementation <span class="string">'junit:junit:4.12'</span></span><br><span class="line">    androidTestImplementation <span class="string">'com.android.support.test:runner:1.0.2'</span></span><br><span class="line">    androidTestImplementation <span class="string">'com.android.support.test.espresso:espresso-core:3.0.2'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>implementation fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)</code>ï¼š<code>implementation fileTree</code>æ˜¯ä¸€ä¸ªæœ¬åœ°ä¾èµ–å£°æ˜ï¼Œè¡¨ç¤ºå°†libsç›®å½•ä¸‹æ‰€æœ‰.jaråç¼€çš„æ–‡ä»¶éƒ½æ·»åŠ åˆ°é¡¹ç›®çš„æ„å»ºè·¯å¾„å½“ä¸­ã€‚</p>
<p><code>testImplementation</code>å’Œ<code>androidTestImplementation</code>ï¼šè¡¨ç¤ºå£°æ˜æµ‹è¯•ç”¨ä¾‹åº“ã€‚</p>
<h2 id="å®Œæ•´é…ç½®"><a href="#å®Œæ•´é…ç½®" class="headerlink" title="å®Œæ•´é…ç½®"></a>å®Œæ•´é…ç½®</h2><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜æ˜¯Androidç¨‹åºï¼Œ</span></span><br><span class="line"><span class="comment">//com.android.application è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºæ¨¡å—</span></span><br><span class="line"><span class="comment">//com.android.library æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªåº“æ¨¡å—</span></span><br><span class="line"><span class="comment">//è€Œè¿™åŒºåˆ«ï¼šå‰è€…å¯ä»¥ç›´æ¥è¿è¡Œï¼Œåç€æ˜¯ä¾é™„åˆ«çš„åº”ç”¨ç¨‹åºè¿è¡Œ</span></span><br><span class="line">apply plugin: <span class="string">'com.android.application'</span></span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    signingConfigs &#123;<span class="comment">// è‡ªåŠ¨åŒ–æ‰“åŒ…é…ç½®</span></span><br><span class="line">        release &#123;<span class="comment">// çº¿ä¸Šç¯å¢ƒ</span></span><br><span class="line">            keyAlias <span class="string">'test'</span></span><br><span class="line">            keyPassword <span class="string">'123456'</span></span><br><span class="line">            storeFile <span class="keyword">file</span>(<span class="string">'test.jks'</span>)</span><br><span class="line">            storePassword <span class="string">'123456'</span></span><br><span class="line">        &#125;</span><br><span class="line">        debug &#123;<span class="comment">// å¼€å‘ç¯å¢ƒ</span></span><br><span class="line">            keyAlias <span class="string">'test'</span></span><br><span class="line">            keyPassword <span class="string">'123456'</span></span><br><span class="line">            storeFile <span class="keyword">file</span>(<span class="string">'test.jks'</span>)</span><br><span class="line">            storePassword <span class="string">'123456'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    compileSdkVersion <span class="number">27</span><span class="comment">//è®¾ç½®ç¼–è¯‘æ—¶ç”¨çš„Androidç‰ˆæœ¬</span></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId <span class="string">"cn.net.sweetlover.myapplication"</span><span class="comment">//é¡¹ç›®çš„åŒ…å</span></span><br><span class="line">        minSdkVersion <span class="number">16</span><span class="comment">//é¡¹ç›®æœ€ä½å…¼å®¹çš„ç‰ˆæœ¬</span></span><br><span class="line">        targetSdkVersion <span class="number">27</span><span class="comment">//é¡¹ç›®çš„ç›®æ ‡ç‰ˆæœ¬</span></span><br><span class="line">        versionCode <span class="number">1</span><span class="comment">//ç‰ˆæœ¬å·</span></span><br><span class="line">        versionName <span class="string">"1.0"</span><span class="comment">//ç‰ˆæœ¬åç§°</span></span><br><span class="line">        flavorDimensions <span class="string">"versionCode"</span></span><br><span class="line">        testInstrumentationRunner <span class="string">"android.support.test.runner.AndroidJUnitRunner"</span><span class="comment">//è¡¨æ˜è¦ä½¿ç”¨AndroidJUnitRunnerè¿›è¡Œå•å…ƒæµ‹è¯•</span></span><br><span class="line">    &#125;</span><br><span class="line">    buildTypes &#123;<span class="comment">// ç”Ÿäº§/æµ‹è¯•ç¯å¢ƒé…ç½®</span></span><br><span class="line">        release &#123;<span class="comment">// ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line">            buildConfigField(<span class="string">"boolean"</span>, <span class="string">"LOG_DEBUG"</span>, <span class="string">"false"</span>)<span class="comment">//é…ç½®Logæ—¥å¿—</span></span><br><span class="line">            buildConfigField(<span class="string">"String"</span>, <span class="string">"URL_PERFIX"</span>, <span class="string">"\"https://release.cn/\""</span>)<span class="comment">// é…ç½®URLå‰ç¼€</span></span><br><span class="line">            minifyEnabled <span class="keyword">false</span><span class="comment">//æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·†</span></span><br><span class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span><span class="comment">//æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶</span></span><br><span class="line">            signingConfig signingConfigs.release<span class="comment">//è®¾ç½®ç­¾åä¿¡æ¯</span></span><br><span class="line">            pseudoLocalesEnabled <span class="keyword">false</span><span class="comment">//æ˜¯å¦åœ¨APKä¸­ç”Ÿæˆä¼ªè¯­è¨€ç¯å¢ƒï¼Œå¸®åŠ©å›½é™…åŒ–çš„ä¸œè¥¿ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š</span></span><br><span class="line">            zipAlignEnabled <span class="keyword">true</span><span class="comment">//æ˜¯å¦å¯¹APKåŒ…æ‰§è¡ŒZIPå¯¹é½ä¼˜åŒ–ï¼Œå‡å°zipä½“ç§¯ï¼Œå¢åŠ è¿è¡Œæ•ˆç‡</span></span><br><span class="line">            applicationIdSuffix <span class="string">'test'</span><span class="comment">//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š</span></span><br><span class="line">            versionNameSuffix <span class="string">'test'</span><span class="comment">//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š</span></span><br><span class="line">        &#125;</span><br><span class="line">        debug &#123;<span class="comment">// æµ‹è¯•ç¯å¢ƒ</span></span><br><span class="line">            buildConfigField(<span class="string">"boolean"</span>, <span class="string">"LOG_DEBUG"</span>, <span class="string">"true"</span>)<span class="comment">//é…ç½®Logæ—¥å¿—</span></span><br><span class="line">            buildConfigField(<span class="string">"String"</span>, <span class="string">"URL_PERFIX"</span>, <span class="string">"\"https://test.com/\""</span>)<span class="comment">// é…ç½®URLå‰ç¼€</span></span><br><span class="line">            minifyEnabled <span class="keyword">false</span><span class="comment">//æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·†</span></span><br><span class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span><span class="comment">//æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶</span></span><br><span class="line">            signingConfig signingConfigs.debug<span class="comment">//è®¾ç½®ç­¾åä¿¡æ¯</span></span><br><span class="line">            debuggable <span class="keyword">false</span><span class="comment">//æ˜¯å¦æ”¯æŒæ–­ç‚¹è°ƒè¯•</span></span><br><span class="line">            jniDebuggable <span class="keyword">false</span><span class="comment">//æ˜¯å¦å¯ä»¥è°ƒè¯•NDKä»£ç </span></span><br><span class="line">            renderscriptDebuggable <span class="keyword">false</span><span class="comment">//æ˜¯å¦å¼€å¯æ¸²æŸ“è„šæœ¬å°±æ˜¯ä¸€äº›cå†™çš„æ¸²æŸ“æ–¹æ³•</span></span><br><span class="line">            zipAlignEnabled <span class="keyword">true</span><span class="comment">//æ˜¯å¦å¯¹APKåŒ…æ‰§è¡ŒZIPå¯¹é½ä¼˜åŒ–ï¼Œå‡å°zipä½“ç§¯ï¼Œå¢åŠ è¿è¡Œæ•ˆç‡</span></span><br><span class="line">            pseudoLocalesEnabled <span class="keyword">false</span><span class="comment">//æ˜¯å¦åœ¨APKä¸­ç”Ÿæˆä¼ªè¯­è¨€ç¯å¢ƒï¼Œå¸®åŠ©å›½é™…åŒ–çš„ä¸œè¥¿ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š</span></span><br><span class="line">            applicationIdSuffix <span class="string">'test'</span><span class="comment">//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š</span></span><br><span class="line">            versionNameSuffix <span class="string">'test'</span><span class="comment">//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">sourceSets</span> &#123;<span class="comment">//ç›®å½•æŒ‡å‘é…ç½®</span></span><br><span class="line">        main &#123;</span><br><span class="line">            jniLibs.srcDirs = [<span class="string">'libs'</span>]<span class="comment">//æŒ‡å®šlibåº“ç›®å½•</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    packagingOptions&#123;<span class="comment">//æ‰“åŒ…æ—¶çš„ç›¸å…³é…ç½®</span></span><br><span class="line">        <span class="comment">//pickFirstsåšç”¨æ˜¯ å½“æœ‰é‡å¤æ–‡ä»¶æ—¶ æ‰“åŒ…ä¼šæŠ¥é”™ è¿™æ ·é…ç½®ä¼šä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶æ‰“åŒ…è¿›å…¥apk</span></span><br><span class="line">        <span class="comment">// è¡¨ç¤ºå½“apkä¸­æœ‰é‡å¤çš„META-INFç›®å½•ä¸‹æœ‰é‡å¤çš„LICENSEæ–‡ä»¶æ—¶  åªç”¨ç¬¬ä¸€ä¸ª è¿™æ ·æ‰“åŒ…å°±ä¸ä¼šæŠ¥é”™</span></span><br><span class="line">        pickFirsts = [<span class="string">'META-INF/LICENSE'</span>]</span><br><span class="line"></span><br><span class="line">        <span class="comment">//mergesä½•å¿… å½“å‡ºç°é‡å¤æ–‡ä»¶æ—¶ åˆå¹¶é‡å¤çš„æ–‡ä»¶ ç„¶åæ‰“åŒ…å…¥apk</span></span><br><span class="line">        <span class="comment">//è¿™ä¸ªæ˜¯æœ‰é»˜è®¤å€¼å¾— merges = [] è¿™æ ·ä¼šæŠŠé»˜é»˜è®¤å€¼å»æ‰  æ‰€ä»¥æˆ‘ä»¬ç”¨ä¸‹é¢è¿™ç§æ–¹å¼ åœ¨é»˜è®¤å€¼åæ·»åŠ </span></span><br><span class="line">        merge <span class="string">'META-INF/LICENSE'</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿™ä¸ªæ˜¯åœ¨åŒæ—¶ä½¿ç”¨butterknifeã€dagger2åšçš„ä¸€ä¸ªå¤„ç†ã€‚åŒç†ï¼Œé‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œåªè¦æ ¹æ®gradleçš„æç¤ºï¼Œåšç±»ä¼¼å¤„ç†å³å¯ã€‚</span></span><br><span class="line">        <span class="keyword">exclude</span> <span class="string">'META-INF/services/javax.annotation.processing.Processor'</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    productFlavors &#123;</span><br><span class="line">        wandoujia &#123;&#125;</span><br><span class="line">        xiaomi &#123;&#125;</span><br><span class="line">        _360 &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    productFlavors.all &#123;</span><br><span class="line">            <span class="comment">//æ‰¹é‡ä¿®æ”¹ï¼Œç±»ä¼¼ä¸€ä¸ªå¾ªåºéå†</span></span><br><span class="line">        flavor -&gt; flavor.manifestPlaceholders = [IFLYTEK_CHANNEL: name]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¨‹åºåœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šæ£€æŸ¥lintï¼Œæœ‰ä»»ä½•é”™è¯¯æç¤ºä¼šåœæ­¢buildï¼Œæˆ‘ä»¬å¯ä»¥å…³é—­è¿™ä¸ªå¼€å…³</span></span><br><span class="line">    lintOptions &#123;</span><br><span class="line">        abortOnError <span class="keyword">false</span></span><br><span class="line">        <span class="comment">//å³ä½¿æŠ¥é”™ä¹Ÿä¸ä¼šåœæ­¢æ‰“åŒ…</span></span><br><span class="line">        checkReleaseBuilds <span class="keyword">false</span></span><br><span class="line">        <span class="comment">//æ‰“åŒ…releaseç‰ˆæœ¬çš„æ—¶å€™è¿›è¡Œæ£€æµ‹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">    <span class="comment">//é¡¹ç›®çš„ä¾èµ–å…³ç³»</span></span><br><span class="line">    implementation <span class="keyword">fileTree</span>(<span class="keyword">include</span>: [<span class="string">'*.jar'</span>], dir: <span class="string">'libs'</span>)</span><br><span class="line">    <span class="comment">//æœ¬åœ°jaråŒ…ä¾èµ–</span></span><br><span class="line">    implementation <span class="string">'com.android.support:appcompat-v7:27.1.1'</span></span><br><span class="line">    <span class="comment">//è¿œç¨‹ä¾èµ–</span></span><br><span class="line">    implementation <span class="string">'com.android.support.constraint:constraint-layout:1.1.2'</span></span><br><span class="line">    testImplementation <span class="string">'junit:junit:4.12'</span></span><br><span class="line">    <span class="comment">//å£°æ˜æµ‹è¯•ç”¨ä¾‹åº“</span></span><br><span class="line">    androidTestImplementation <span class="string">'com.android.support.test:runner:1.0.2'</span></span><br><span class="line">    androidTestImplementation <span class="string">'com.android.support.test.espresso:espresso-core:3.0.2'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ç­¾å"><a href="#ç­¾å" class="headerlink" title="ç­¾å"></a>ç­¾å</h1><h2 id="ASä¸€é”®ç”Ÿæˆ"><a href="#ASä¸€é”®ç”Ÿæˆ" class="headerlink" title="ASä¸€é”®ç”Ÿæˆ"></a>ASä¸€é”®ç”Ÿæˆ</h2><p>1ã€ASèœå•ä¸­<code>Build</code>-&gt;<code>Generate Signed APK</code>ç‚¹å‡»</p>
<p><img src="signcreate1.png" alt></p>
<p>2ã€ç‚¹å‡»<code>Create New...</code></p>
<blockquote>
<p>â€Create newâ€¦â€æ–°å»ºä¸€ä¸ªç­¾åæ–‡ä»¶<br>â€Choose existingâ€¦â€é€‰æ‹©ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç­¾åæ–‡ä»¶</p>
</blockquote>
<p>3ã€å¡«å†™å®Œæ•´çš„ç­¾åä¿¡æ¯ã€‚</p>
<p><img src="newkeystore.png" alt></p>
<p>å¡«å†™å®Œæ¯•ç‚¹å‡»<code>OK</code></p>
<p><strong>å‚æ•°ä»‹ç»</strong></p>
<ul>
<li><code>Key store path</code> : ç­¾åæ–‡ä»¶è·¯å¾„</li>
<li><code>Password</code> : ç­¾åå¯†ç </li>
<li><code>Confirm</code> : ç¡®è®¤å¯†ç </li>
<li><code>Alias</code> : åˆ«å</li>
<li><code>Validity ( years )</code> : æœ‰é™æœŸ ï¼ˆå¹´ï¼‰</li>
<li><code>First and Last Name</code> : å…¨å</li>
<li><code>Organizational Unit</code> : ç»„ç»‡å•ä½</li>
<li><code>Organization</code> : ç»„ç»‡</li>
<li><code>City or Locality</code> : åŸå¸‚æˆ–åœ°æ–¹</li>
<li><code>State or Province</code> : å·æˆ–çœ</li>
<li><code>Country Code(XX)</code> : å›½å®¶ä»£ç </li>
</ul>
<blockquote>
<p>è¿™é‡Œå¯†ç ç»Ÿä¸€å¡«å†™â€œandroidâ€ï¼Œåˆ«åå†™ä¸ªâ€œkeyâ€å³å¯ã€‚å…¶ä»–çš„ä¿¡æ¯æ ¹æ®å®é™…æƒ…å†µå’Œéœ€æ±‚å¡«å†™ï¼Œå¹¶ä¸å¾ˆé‡è¦ã€‚</p>
</blockquote>
<p>4ã€ç”Ÿæˆæ–‡ä»¶ååç¼€ä¸º<code>keystore</code></p>
<p><img src="lastcreate.png" alt></p>
<blockquote>
<p>é€‰V1æ‰“åŒ…å‡ºæ¥çš„appæ˜¯jarçš„ï¼ˆä¸€èˆ¬è¿™ç§å°±æ˜¯å½“åšç¬¬ä¸‰æ–¹å¯¼å…¥é¡¹ç›®æ¥ç”¨çš„ï¼‰ï¼Œ<br>é€‰v2æ‰“åŒ…å‡ºæ¥çš„APPæ˜¯apkç‰ˆæœ¬çš„ï¼ˆä¹Ÿå°±æ˜¯å¯ä»¥ç›´æ¥åœ¨æ‰‹æœºä¸Šå®‰è£…çš„ï¼Œå¯æ˜¯ä¸Šçº¿çš„ï¼‰ï¼›</p>
</blockquote>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ä¸¤ä¸ªåŒæ—¶é€‰æ‹©å³å¯ã€‚ç„¶åç‚¹å‡»<code>Finish</code>å®Œæˆç”Ÿæˆç­¾åã€‚</p>
<p><strong>åŸå› ï¼š</strong></p>
<p>v2çš„ç”¨é€”è§£é‡Šï¼š<br>1.ç”¨äºéªŒè¯å…¶å®Œæ•´æ€§çš„APKçš„åŠ å¯†ç­¾åç°åœ¨ä½äºZIPä¸­å¤®ç›®å½•ä¹‹å‰ã€‚<br>2.è¿™ä¸ªç­¾åæ˜¯åœ¨æ•´ä¸ªAPKæ–‡ä»¶çš„äºŒè¿›åˆ¶å†…å®¹ä¸Šè®¡ç®—å’ŒéªŒè¯çš„ï¼Œè€Œä¸æ˜¯åœ¨v1çš„å½’æ¡£æ–‡ä»¶ä¸­è§£å‹ç¼©æ–‡ä»¶å†…å®¹ã€‚<br>3.ä¸€ä¸ªAPKå¯ä»¥åŒæ—¶ç”±v1å’Œv2ç­¾ååŒæ—¶ç­¾ç½²ï¼Œæ‰€ä»¥å®ƒä»ç„¶å¯ä»¥å‘åå…¼å®¹ä»¥å‰çš„Androidç‰ˆæœ¬ã€‚</p>
<p>ä½†æ˜¯åªè®¾ç½®v2ä¼šå¼•èµ·7.0ä»¥ä¸‹ä¼šç›´æ¥å®‰è£…å®Œæ˜¾ç¤ºæœªå®‰è£…ï¼Œ7.0ä»¥ä¸Šåˆ™ä½¿ç”¨äº†V2çš„æ–¹å¼éªŒè¯ </p>
<p>æŠ¥é”™ä¿¡æ¯ä¸ºï¼š<code>INSTALL_PARSE_FAILED_NO_CERTIFICATES</code>ã€‚</p>
<p>åŒæ—¶è®¾ç½®V1å’ŒV2åˆ™æ‰€æœ‰æœºå‹éƒ½æ²¡é—®é¢˜ã€‚è€Œåªè®¾ç½®v1ç­¾åå¹¶ä¸ä¼šå½±å“ä»€ä¹ˆï¼Œä½†æ˜¯åœ¨7.0ä¸Šä¸ä¼šä½¿ç”¨æ›´å®‰å…¨çš„éªŒè¯æ–¹å¼</p>
<blockquote>
<p>å¦‚æœä½ æƒ³åœ¨ä½¿ç”¨Androidåˆ†çº§æ’ä»¶æ—¶ç¦ç”¨æ·»åŠ v1æˆ–v2çš„ç­¾åï¼Œä½ å¯ä»¥å°†è¿™äº›è¡Œæ·»åŠ åˆ°ä½ çš„signingConfigéƒ¨åˆ†ã€‚<br>v1SigningEnabled false<br>v2SigningEnabled false</p>
</blockquote>
<h2 id="å‘½ä»¤è¡Œç”Ÿæˆ"><a href="#å‘½ä»¤è¡Œç”Ÿæˆ" class="headerlink" title="å‘½ä»¤è¡Œç”Ÿæˆ"></a>å‘½ä»¤è¡Œç”Ÿæˆ</h2><p>é…ç½®jdkå</p>
<p>è¿è¡Œå‘½ä»¤<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">keytool -genkey -<span class="built_in">alias</span> forever -keyalg RSA -validity 10000 -keystore forever.keystore</span><br></pre></td></tr></table></figure></p>
<p><strong>è¿™é‡Œå…³é”®æ–‡å­—çš„ä»£è¡¨æ„ä¹‰ï¼š</strong></p>
<ul>
<li>foreverï¼škeystoreçš„åˆ«åalias</li>
<li>10000ï¼škeystoreçš„æœ‰æ•ˆå¤©æ•°</li>
<li>forever.keystoreï¼škeystoreçš„åç§°</li>
</ul>
<p>1ã€ç¬¬ä¸€æ¬¡è¾“å…¥çš„ç§˜é’¥åº“å£ä»¤å³ä¸ºforever.keystoreçš„å¯†ç <br>2ã€ç„¶åå¡«å†™ç›¸å…³çš„ä¿¡æ¯<br>3ã€ç”Ÿæˆå¯¹åº”çš„forever.keystoreï¼Œæ–‡ä»¶åœ°å€åœ¨cmdå‘½ä»¤çš„å¯¹åº”è·¯å¾„ä¸‹é¢</p>
<p><img src="cmdcreate.png" alt></p>
<h1 id="é¢˜å¤–è¯"><a href="#é¢˜å¤–è¯" class="headerlink" title="é¢˜å¤–è¯"></a>é¢˜å¤–è¯</h1><h2 id="Projectçš„setting-gradleæ–‡ä»¶"><a href="#Projectçš„setting-gradleæ–‡ä»¶" class="headerlink" title="Projectçš„setting.gradleæ–‡ä»¶"></a>Projectçš„setting.gradleæ–‡ä»¶</h2><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">include</span> <span class="string">':app'</span></span><br></pre></td></tr></table></figure>
<p>setting.gradle æ–‡ä»¶åœ¨ åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¢«æ‰§è¡Œï¼Œæ„å»ºå™¨é€šè¿‡<code>setting.gradle</code> æ–‡ä»¶ä¸­çš„å†…å®¹äº†è§£å“ªäº›æ¨¡å—å°†è¢«<code>build</code>ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šå•æ¨¡å—é¡¹ç›®ä¸ä¸€å®šéœ€è¦æœ‰ setting æ–‡ä»¶ï¼Œä½†ä¸€æ—¦æœ‰å¤šä¸ªæ¨¡å—ï¼Œå¿…é¡»è¦æœ‰ setting æ–‡ä»¶ï¼ŒåŒæ—¶ä¹Ÿè¦å†™æ˜æ‰€æœ‰è¦æ„å»ºçš„æ¨¡å—ï¼Œå¦åˆ™ gradle ä¸ä¼š build ä¸åŒ…æ‹¬çš„æ¨¡å—ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>IOS pché¢„ç¼–è¯‘å¤´æ–‡ä»¶ä½¿ç”¨</title>
    <url>/2019/04/08/IOS-pch%E9%A2%84%E7%BC%96%E8%AF%91%E5%A4%B4%E6%96%87%E4%BB%B6%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="PCHæ˜¯ä»€ä¹ˆ"><a href="#PCHæ˜¯ä»€ä¹ˆ" class="headerlink" title="PCHæ˜¯ä»€ä¹ˆ"></a>PCHæ˜¯ä»€ä¹ˆ</h1><p>PCHæ–‡ä»¶æ˜¯ä¸€ä¸ªæ ‡å‡†çš„é¢„ç¼–è¯‘å¤´æ–‡ä»¶( Pre-Compiled Header)ï¼Œåœ¨Xcode6ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œç³»ç»Ÿæ¨¡æ¿ä¼šåœ¨Supporting Filesæ–‡ä»¶å¤¹è‡ªåŠ¨åˆ›å»ºã€‚ä½†åœ¨Xcode6ä¹‹åçš„ç‰ˆæœ¬ä¸­å–æ¶ˆäº†è¿™ä¸€æ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä½¿ç”¨pchæ–‡ä»¶ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨åˆ›å»ºã€‚å»æ‰çš„ä¸»è¦çš„åŸå› :</p>
<a id="more"></a>
<blockquote>
<p>1ã€å»æ‰è‡ªåŠ¨å¯¼å…¥çš„ç³»ç»Ÿæ¡†æ¶ç±»åº“çš„å¤´æ–‡ä»¶ï¼Œå¯ä»¥æé«˜åŸæ–‡ä»¶çš„å¤ç”¨æ€§ï¼Œä¾¿äºè¿ç§»ã€‚<br>2ã€ä¸€ä¸ªä½“ç§¯å¤§çš„Prefix Headerä¼šå¤§å¤§å¢åŠ ç¼–è¯‘æ—¶é—´ã€‚</p>
</blockquote>
<p>å†æ¥çœ‹çœ‹pchçš„ä½œç”¨ï¼š</p>
<blockquote>
<p>1.å­˜æ”¾ä¸€äº›å…¨å±€çš„å®(æ•´ä¸ªé¡¹ç›®ä¸­éƒ½ç”¨å¾—ä¸Šçš„å®)ã€‚<br>2.ç”¨æ¥åŒ…å«ä¸€äº›å¤´æ–‡ä»¶(æ•´ä¸ªé¡¹ç›®ä¸­éƒ½ç”¨å¾—ä¸Šçš„å¤´æ–‡ä»¶)ã€‚<br>3.èƒ½è‡ªåŠ¨æ‰“å¼€æˆ–è€…å…³é—­æ—¥å¿—è¾“å‡ºåŠŸèƒ½ã€‚</p>
</blockquote>
<p>å¦‚æœä½ çš„pchæ–‡ä»¶ç¡®å®å¾ˆå¤§ï¼Œé‚£é‚£è‚¯å®šå½±å“ç¼–è¯‘é€Ÿåº¦ï¼Œè‹¹æœå»æ‰ä»–å¯èƒ½æ˜¯è¦åŠ å¿«ç¼–è¯‘æ—¶é—´å¢åŠ ç”¨æˆ·ä½“éªŒã€‚è™½ç„¶å¤±å»äº†ç¼–ç¨‹çš„ä¾¿åˆ©æ€§ã€‚äº‹å®ä¸Šï¼Œæ­£ç¡®è¿ç”¨pchæ–‡ä»¶æ—¶é¢„ç¼–è¯‘åçš„å¤´æ–‡ä»¶ä¼šè¢«ç¼“å­˜èµ·æ¥ï¼Œå†æ¬¡ç¼–è¯‘çš„æ—¶å€™å°±ä¸éœ€è¦é‡æ–°ç¼–è¯‘pchæ–‡ä»¶ä¸­å¯¼å…¥çš„å†…å®¹ï¼Œç¼–è¯‘é€Ÿåº¦å¹¶ä¸ä¼šé™ä½å¾ˆå¤šã€‚å¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯pchæ–‡ä»¶ç¡®å®ç»™æˆ‘ä»¬ç¼–ç¨‹å¸¦æ¥ä¾¿åˆ©ï¼Œæˆ‘ä»¬ä¸ç”¨åœ¨æ¯ä¸ªæ–‡ä»¶å†…é‡å¤å¼•ç”¨å¦ä¸€ä¸ªæ–‡ä»¶ï¼›é‚£æ€æ ·æ‰èƒ½æé«˜ç¼–è¯‘é€Ÿåº¦å‘¢ï¼Ÿé™ä½ç¼–è¯‘é€Ÿåº¦çš„ç½ªé­ç¥¸é¦–å°±æ˜¯å¤§é‡çš„å…±ç”¨æ€§ä¸é«˜çš„å®å®šä¹‰å’Œå¤´æ–‡ä»¶çš„å¼•å…¥ã€‚ç¼–è¯‘çš„æ—¶å€™æ•´ä¸ªå·¥ç¨‹èŒƒå›´åœ°æŸ¥æ‰¾å’Œæ›¿æ¢è¿™äº›å®å®šä¹‰å­—æ®µï¼Œé‡å¤å¯¼å…¥è¿™äº›å¤´æ–‡ä»¶ï¼Œä¸æ…¢å°±å¥‡æ€ªäº†ã€‚</p>
<h1 id="PCHåˆ›å»º"><a href="#PCHåˆ›å»º" class="headerlink" title="PCHåˆ›å»º"></a>PCHåˆ›å»º</h1><h2 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h2><p><img src="create_pch.png" alt="PCHæ–‡ä»¶åˆ›å»º"></p>
<p>ç‚¹å‡»åˆ›å»ºï¼Œè¾“å…¥æ–‡ä»¶åå³å¯ã€‚</p>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>åœ¨é¡¹ç›®-&gt;<code>Build Settings</code>ä¸‹</p>
<ul>
<li><p>æ‰¾åˆ°è¯¥<code>Precompile Prefix Header</code>é¡¹è®¾ç½®ä¸º<code>YES</code>,è¿™æ ·çš„è¯pchä¼šè¢«é¢„ç¼–è¯‘ï¼Œé¢„ç¼–è¯‘åçš„pchæ–‡ä»¶ä¼šè¢«ç¼“å­˜èµ·æ¥ï¼Œä»è€Œæé«˜ç¼–è¯‘é€Ÿåº¦ã€‚å½“ <code>Precompile Prefix Header</code> ä¸º<code>NO</code>æ—¶ï¼Œé‚£ä¹ˆpchä¸ä¼šè¢«é¢„ç¼–è¯‘ï¼Œè€Œæ˜¯åœ¨æ¯ä¸€ä¸ªç”¨åˆ°å®ƒå¯¼å…¥çš„æ¡†æ¶ç±»åº“çš„<code>.m</code>æ–‡ä»¶ä¸­ç¼–è¯‘ä¸€æ¬¡</p>
</li>
<li><p>æ‰¾åˆ°<code>Prefix Header</code>é¡¹</p>
</li>
</ul>
<p><img src="pch_config.png" alt></p>
<p>åŒå‡»å¯å¼¹å‡ºè¾“å…¥æ¡†ï¼Œç»™Prefix Headerè®¾ç½®è·¯å¾„ï¼Œåªéœ€è¦ç‚¹å‡»pchæ–‡ä»¶ç„¶åæŒ‰ä½é¼ æ ‡å·¦é”®æ‹–è¿‡æ¥å°±è¡Œï¼Œä½†æ˜¯<code>/Users/zjyzy/WorkPlace/xcode/AllDemo/BarDemo/BarDemo/PrefixHeader.pch</code>ä»£è¡¨çš„æ˜¯ç»å¯¹è·¯å¾„ï¼Œå½“ç”¨åˆ«çš„ç”µè„‘æ—¶å°±ä¸èƒ½è¯†åˆ«äº†ï¼Œè¿™æ—¶å°±å¯ä»¥ç”¨åˆ°<code>$(SRCROOT)</code>æ¥æ›¿æ¢ï¼Œåœ¨iOSä¸­<code>$(SRCROOT)</code>ä»£è¡¨çš„æ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè·¯å¾„å½¢å¼ä¸ºï¼š<br><code>$(SRCROOT)/å½“å‰å·¥ç¨‹åå­—/éœ€è¦åŒ…å«å¤´æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹</code><br>æ‰€ä»¥æŠŠè·¯å¾„æ”¹ä¸º:<br><code>$(SRCROOT)/BarDemo/PrefixHeader.pch</code></p>
<h1 id="PCHä½¿ç”¨"><a href="#PCHä½¿ç”¨" class="headerlink" title="PCHä½¿ç”¨"></a>PCHä½¿ç”¨</h1><p>ä¸€èˆ¬æ¥è¯´åœ¨ä½ å‘pchæ·»åŠ å…¨å±€çš„å¤´æ–‡ä»¶ä¹‹å‰,å¿…é¡»æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __OBJC__</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå®å®šä¹‰çš„ä½œç”¨æ˜¯ä¿è¯åªæœ‰ocæ–‡ä»¶å¯ä»¥è°ƒç”¨pché‡Œé¢çš„å¤´æ–‡ä»¶ï¼Œä¸€äº›éOCè¯­è¨€ä¸èƒ½è°ƒç”¨ï¼Œæ¯”å¦‚.cpp,.mmã€‚å¦‚æœä¸åŠ å…¥ï¼Œé‚£ä¹ˆå¦‚æœä»£ç ä¸­å¸¦æœ‰.cpp,.mmæ–‡ä»¶ï¼Œé‚£ä¹ˆå°†æŠ¥é”™ã€‚NSObjCRuntime.h  NSObject.h  NSZone.hå°†ä¼šæŠ¥å‡ºç¼–è¯‘å¼‚å¸¸ã€‚<br>è¿™æ ·ä½ å°±å¯ä»¥åœ¨pchæ–‡ä»¶å½“ä¸­æ·»åŠ ä¸€äº›å¸¸ç”¨å¤´æ–‡ä»¶ã€å®å®šä¹‰äº†ã€‚</p>
<h2 id="å®æ¥è‡ªå®šä¹‰åªèƒ½åœ¨debugç¯å¢ƒä¸‹ä½¿ç”¨è¾“å‡ºæ—¥å¿—"><a href="#å®æ¥è‡ªå®šä¹‰åªèƒ½åœ¨debugç¯å¢ƒä¸‹ä½¿ç”¨è¾“å‡ºæ—¥å¿—" class="headerlink" title="å®æ¥è‡ªå®šä¹‰åªèƒ½åœ¨debugç¯å¢ƒä¸‹ä½¿ç”¨è¾“å‡ºæ—¥å¿—"></a>å®æ¥è‡ªå®šä¹‰åªèƒ½åœ¨debugç¯å¢ƒä¸‹ä½¿ç”¨è¾“å‡ºæ—¥å¿—</h2><p>åœ¨pchæ–‡ä»¶ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç </p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __OBJC__</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> DEBUG</span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">define</span> TTLog(...) NSLog(__VA_ARGS__);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta"># <span class="meta-keyword">define</span> TTLog(...);</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>TTLog</code>ä¸ºè‡ªå®šä¹‰åç§°,åœ¨é¡¹ç›®ä¸­è¾“å‡ºåˆ™å°†<code>NSLog</code>æ›¿æ¢ä¸º<code>TTLog</code>å³å¯ã€‚</p>
</blockquote>
<p><strong>å®å®šä¹‰çš„debug /releaseåˆ‡æ¢ï¼Œè§ä¸‹å›¾æ“ä½œæ­¥éª¤</strong></p>
<p><img src="rd.png" alt></p>
<p>åœ¨é€‰æ‹©äº†<code>Edit Scheme</code>å<code>run info</code>ä¸­åˆ‡æ¢<code>debug/release</code>æ¨¡å¼</p>
<p><img src="rd2.png" alt></p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://my.oschina.net/goboy/blog/1838003" target="_blank" rel="noopener">https://my.oschina.net/goboy/blog/1838003</a></p>
<p><a href="https://www.jianshu.com/p/a1d61f5cc454" target="_blank" rel="noopener">https://www.jianshu.com/p/a1d61f5cc454</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSçŠ¶æ€æ ã€å¯¼èˆªæ ä½¿ç”¨æ€»ç»“</title>
    <url>/2019/04/04/IOS%E7%8A%B6%E6%80%81%E6%A0%8F%E3%80%81%E5%AF%BC%E8%88%AA%E6%A0%8F%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>çŠ¶æ€æ ä¸å¯¼èˆªæ çš„ä½ç½®å¦‚ä¸‹å›¾</strong></p>
<a id="more"></a>
<p><strong>iOS7ä¹‹å‰ï¼š</strong>çŠ¶æ€æ ä¸å¯¼èˆªæ æ˜¯åˆ†å¼€çš„ï¼›<br><strong>iOS7ä¹‹åï¼š</strong>çŠ¶æ€æ ä¸å¯¼èˆªæ åˆåœ¨ä¸€èµ·ï¼›å¯¼èˆªéƒ¨åˆ†æ€»é«˜åº¦(64)= çŠ¶æ€æ é«˜åº¦(20) +å¯¼èˆªæ å†…å®¹é«˜åº¦((44ï¼‰</p>
<p><strong>iPhoneXä»¥åï¼š</strong>çŠ¶æ€æ çš„é«˜åº¦å˜ä¸º44ï¼Œå¯¼èˆªæ éƒ¨åˆ†æ€»é«˜åº¦(88) = çŠ¶æ€æ (44) + å¯¼èˆªæ å†…å®¹é«˜åº¦(44)</p>
<p><img src="statusbar.png" alt></p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>[UIApplication sharedApplication].statusBarFrame.size</code>è·å–çŠ¶æ€æ çš„sizeï¼ˆä¸€èˆ¬æ²¡æœ‰åˆ˜æµ·æ—¶çš„é«˜åº¦ä¸º<code>20</code>ï¼Œæœ‰åˆ˜æµ·æ—¶çš„é«˜åº¦ä¸º44ï¼‰ã€‚é€šè¿‡<code>self.navigationController.navigationBar.frame.size</code>æ¥è·å–å¯¼èˆªæ çš„sizeã€‚</p>
<h1 id="çŠ¶æ€æ "><a href="#çŠ¶æ€æ " class="headerlink" title="çŠ¶æ€æ "></a>çŠ¶æ€æ </h1><p>çŠ¶æ€æ å†…å®¹åŒ…æ‹¬ä¿¡å·ã€æ—¶é—´ã€ç”µé‡ç­‰ï¼Œåªæœ‰ä¸¤ç§é¢œè‰²æ ·å¼ï¼ˆé»‘æˆ–ç™½ï¼‰ã€‚</p>
<p>è·å–çŠ¶æ€æ frameï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">CGRect</span> statusRect = [<span class="built_in">UIApplication</span> sharedApplication].statusBarFrame;</span><br></pre></td></tr></table></figure>
<h2 id="çŠ¶æ€æ æ˜¾ç¤ºå’Œéšè—"><a href="#çŠ¶æ€æ æ˜¾ç¤ºå’Œéšè—" class="headerlink" title="çŠ¶æ€æ æ˜¾ç¤ºå’Œéšè—"></a>çŠ¶æ€æ æ˜¾ç¤ºå’Œéšè—</h2><p>å…¨å±€æ§åˆ¶ï¼šé€šè¿‡ <strong>info.plist</strong>è®¾ç½®ï¼Œæˆ–è€…è°ƒç”¨å…¨å±€æ–¹æ³•ã€‚<br>åˆ†é¡µæ§åˆ¶ï¼šåœ¨è§†å›¾æ§åˆ¶å™¨é‡Œé€šè¿‡ <strong>prefersStatusBarHidden</strong>æ–¹æ³•è®¾ç½®ã€‚</p>
<h3 id="å…¨å±€æ§åˆ¶"><a href="#å…¨å±€æ§åˆ¶" class="headerlink" title="å…¨å±€æ§åˆ¶"></a>å…¨å±€æ§åˆ¶</h3><p>é»˜è®¤è®¾ç½®æˆ–è€…æ‰‹åŠ¨è®¾ç½® <strong>info.plist</strong>æ–‡ä»¶ä¸­<code>View controller-based status bar appearance</code>è®¾ç½®ä¸º<code>NO</code>ï¼Œæ­¤æ—¶çŠ¶æ€æ éœ€è¦å…¨å±€è®¾ç½®ï¼Œæœ‰ä¸¤ç§æ–¹å¼è®¾ç½®ã€‚</p>
<p><strong>æ–¹æ³•1:</strong></p>
<p>ä¾æ¬¡è¿›å…¥<code>Targets</code>-&gt;<code>General</code>-&gt;<code>Deployment Info</code>ï¼Œç„¶åå¯è¿›è¡Œè¿›è¡Œè®¾ç½®å¦‚ä¸‹:</p>
<p><img src="hidestatusbar.png" alt></p>
<p>åœ¨<code>info.plist</code>æ–‡ä»¶ä¸­æ·»åŠ <code>Status bar is initially hidden</code>è®¾ç½®ä¸º<code>YES</code>ï¼Œåˆ™éšè—å¯åŠ¨é¡µçŠ¶æ€æ ï¼Œå¦åˆ™åä¹‹ã€‚å’Œç›´æ¥åœ¨é¡¹ç›®ä¸­è®¾ç½®ç›¸åŒã€‚</p>
<p><img src="statusbar_infop.png" alt></p>
<p><strong>æ–¹æ³•2:</strong></p>
<p>ä»£ç è®¾ç½®ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å·²è¿‡æ—¶</span></span><br><span class="line">[[<span class="built_in">UIApplication</span> sharedApplication] setStatusBarHidden:<span class="literal">YES</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¨è</span></span><br><span class="line">[<span class="built_in">UIApplication</span> sharedApplication].statusBarHidden = <span class="literal">YES</span>;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼š</strong>ä½¿ç”¨ä»£ç æ§åˆ¶å…¨å±€çš„çŠ¶æ€æ ï¼Œä»£ç çš„ä½ç½®å¾ˆé‡è¦ï¼›åœ¨AppDelegateä¸­å†™å…¥å¯ä»¥è®¾ç½®æ•´ä¸ªAppé¡µé¢çš„çŠ¶æ€æ æ ·å¼ï¼›<br>å¦‚æœéœ€è¦å•ç‹¬è®¾ç½®å…¶ä¸­ä¸€ä¸ªé¡µé¢éšè—çŠ¶æ€æ ï¼Œéœ€è¦åœ¨è¿›å…¥é¡µé¢æ—¶è®¾ç½®éšè—ï¼Œé€€å‡ºé¡µé¢æ—¶è®¾ç½®æ˜¾ç¤ºï¼Œä»¥ä¿è¯ä¸å½±å“å…¶ä»–é¡µé¢çš„çŠ¶æ€æ æ ·å¼ã€‚</p>
<h3 id="åˆ†é¡µæ§åˆ¶"><a href="#åˆ†é¡µæ§åˆ¶" class="headerlink" title="åˆ†é¡µæ§åˆ¶"></a>åˆ†é¡µæ§åˆ¶</h3><p>æ‰‹åŠ¨è®¾ç½® <strong>info.plist</strong>æ–‡ä»¶ä¸­<code>View controller-based status bar appearance</code>è®¾ç½®ä¸º<code>YES</code>ï¼Œæ­¤æ—¶å…¨å±€çŠ¶æ€è®¾ç½®æ˜¯æ— æ•ˆçš„ï¼Œéœ€è¦åˆ†é¡µè®¾ç½®æ‰èƒ½ä¿®æ”¹å…¶æ ·å¼ï¼Œå³ï¼šåœ¨æ¯ä¸ªè§†å›¾æ§åˆ¶å™¨æˆ–è€…æ§åˆ¶å™¨åŸºç±»ä¸­ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é‡å†™è¯¥æ–¹æ³•</span></span><br><span class="line">- (<span class="built_in">BOOL</span>)prefersStatusBarHidden &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;<span class="comment">//è®¾ç½®æ˜¾ç¤ºï¼ŒYESä¸ºéšè—</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="çŠ¶æ€æ é¢œè‰²"><a href="#çŠ¶æ€æ é¢œè‰²" class="headerlink" title="çŠ¶æ€æ é¢œè‰²"></a>çŠ¶æ€æ é¢œè‰²</h2><p>çŠ¶æ€æ åˆ†å‰åä¸¤ä¸ªéƒ¨åˆ†ï¼Œè¦åˆ†æ¸…ã€‚</p>
<ul>
<li>æ–‡å­—éƒ¨åˆ†ï¼šå°±æ˜¯æŒ‡ç”µæ± ã€æ—¶é—´ç­‰éƒ¨åˆ†</li>
<li>èƒŒæ™¯éƒ¨åˆ†ï¼šå°±æ˜¯æ˜¾ç¤ºé»‘è‰²æˆ–è€…å›¾ç‰‡çš„éƒ¨åˆ†</li>
</ul>
<h3 id="æ–‡å­—éƒ¨åˆ†"><a href="#æ–‡å­—éƒ¨åˆ†" class="headerlink" title="æ–‡å­—éƒ¨åˆ†"></a>æ–‡å­—éƒ¨åˆ†</h3><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è®¾ç½®æ˜¾ç¤ºç”µæ± ç”µé‡ã€æ—¶é—´ã€ç½‘ç»œéƒ¨åˆ†æ ‡ç¤ºçš„é¢œè‰²ï¼Œ è¿™é‡Œåªèƒ½è®¾ç½®ä¸¤ç§é¢œè‰²ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é»‘è‰²</span></span><br><span class="line"><span class="built_in">UIStatusBarStyleDefault</span></span><br><span class="line"><span class="comment">//ç™½è‰²</span></span><br><span class="line"><span class="built_in">UIStatusBarStyleLightContent</span></span><br></pre></td></tr></table></figure>
<p>å…¨å±€æ§åˆ¶ï¼šé€šè¿‡ <strong>info.plist</strong>è®¾ç½®ï¼Œæˆ–è€…è°ƒç”¨å…¨å±€æ–¹æ³•ã€‚<br>åˆ†é¡µæ§åˆ¶ï¼šåœ¨è§†å›¾æ§åˆ¶å™¨é‡Œé€šè¿‡ <strong>preferredStatusBarStyle</strong>æ–¹æ³•è®¾ç½®ã€‚</p>
<h4 id="å…¨å±€è®¾ç½®"><a href="#å…¨å±€è®¾ç½®" class="headerlink" title="å…¨å±€è®¾ç½®"></a>å…¨å±€è®¾ç½®</h4><p>é»˜è®¤è®¾ç½®æˆ–è€…æ‰‹åŠ¨è®¾ç½® <strong>info.plist</strong>æ–‡ä»¶ä¸­<code>View controller-based status bar appearance</code>è®¾ç½®ä¸º<code>NO</code>ï¼Œæ­¤æ—¶çŠ¶æ€æ éœ€è¦å…¨å±€è®¾ç½®ï¼Œæœ‰ä¸¤ç§æ–¹å¼è®¾ç½®ã€‚</p>
<p><strong>æ–¹æ³•1:</strong></p>
<p>ä¾æ¬¡è¿›å…¥<code>Targets</code>-&gt;<code>General</code>-&gt;<code>Deployment Info</code>ï¼Œç„¶åå¯è¿›è¡Œè¿›è¡Œè®¾ç½®å¦‚ä¸‹:</p>
<p><img src="statusbar_fontbg.png" alt></p>
<p><strong>æ–¹æ³•2:</strong></p>
<p>ä»£ç è®¾ç½®:</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//UIStatusBarStyleDefault | UIStatusBarStyleLightContent</span></span><br><span class="line"><span class="comment">//UIStatusBarStyleDefault,é»‘è‰²(é»˜è®¤)</span></span><br><span class="line"><span class="comment">//UIStatusBarStyleLightContent,ç™½è‰²</span></span><br><span class="line">[<span class="built_in">UIApplication</span> sharedApplication].statusBarStyle = <span class="built_in">UIStatusBarStyleLightContent</span>;</span><br></pre></td></tr></table></figure>
<h4 id="åˆ†é¡µè®¾ç½®"><a href="#åˆ†é¡µè®¾ç½®" class="headerlink" title="åˆ†é¡µè®¾ç½®"></a>åˆ†é¡µè®¾ç½®</h4><p>æ‰‹åŠ¨è®¾ç½® <strong>info.plist</strong>æ–‡ä»¶ä¸­<code>View controller-based status bar appearance</code>è®¾ç½®ä¸º<code>YES</code>ï¼Œæ­¤æ—¶å…¨å±€çŠ¶æ€è®¾ç½®æ˜¯æ— æ•ˆçš„ï¼Œéœ€è¦åˆ†é¡µè®¾ç½®æ‰èƒ½ä¿®æ”¹å…¶æ ·å¼ï¼Œå³ï¼šåœ¨æ¯ä¸ªè§†å›¾æ§åˆ¶å™¨æˆ–è€…æ§åˆ¶å™¨åŸºç±»ä¸­ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é‡å†™è¯¥æ–¹æ³•</span></span><br><span class="line">- (<span class="built_in">UIStatusBarStyle</span>)preferredStatusBarStyle &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">UIStatusBarStyleLightContent</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç‰¹åˆ«æ³¨æ„ï¼š</strong></p>
<p>ä½†æ˜¯ï¼Œè¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœå½“å‰è§†å›¾æ§åˆ¶å™¨æ˜¯<code>UINavigationController</code>çš„å­è§†å›¾æ§åˆ¶å™¨ï¼Œ<code>preferredStatusBarStyle</code>æ–¹æ³•å¹¶ä¸ä¼šè¢«è°ƒç”¨ã€‚è¿™æ˜¯å› ä¸ºå¯¼èˆªæ§åˆ¶å™¨é‡Œçš„<code>preferredStatusBarStyle</code>æ‰å…·æœ‰ä¿®æ”¹çŠ¶æ€æ æ ·å¼çš„èƒ½åŠ›ã€‚</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<ul>
<li>æ–¹æ³•1:æ·»åŠ å­ç±»æ§åˆ¶å™¨</li>
</ul>
<p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰çš„å­ç±»å¯¼èˆªæ§åˆ¶å™¨ï¼Œåœ¨å…¶ä¸­æ·»åŠ å¦‚ä¸‹çš„ä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="built_in">UIStatusBarStyle</span>)preferredStatusBarStyle &#123;</span><br><span class="line">    <span class="built_in">UIViewController</span> *topVC = <span class="keyword">self</span>.topViewController;</span><br><span class="line">    <span class="keyword">return</span> [topVC preferredStatusBarStyle];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•2:æ”¾å¼ƒpreferredStatusBarStyleè¯¥æ–¹æ³•</li>
</ul>
<p>ç›´æ¥ä¸ä½¿ç”¨preferredStatusBarStyleæ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥åœ¨å½“å‰è§†å›¾æ§åˆ¶å™¨ä¸­è°ƒç”¨å¦‚ä¸‹æ–¹æ³•ä¿®æ”¹çŠ¶æ€æ ã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//çŠ¶æ€æ å’Œå¯¼èˆªæ èƒŒæ™¯è‰²ä¸ºç™½è‰²ï¼ŒçŠ¶æ€æ æ–‡å­—ä¸ºé»‘è‰²</span></span><br><span class="line"><span class="keyword">self</span>.navigationController.navigationBar.barStyle = <span class="built_in">UIBarStyleDefault</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//çŠ¶æ€æ å’Œå¯¼èˆªæ èƒŒæ™¯è‰²ä¸ºé»‘è‰²ï¼ŒçŠ¶æ€æ æ–‡å­—ä¸ºç™½è‰²</span></span><br><span class="line"><span class="keyword">self</span>.navigationController.navigationBar.barStyle = <span class="built_in">UIBarStyleBlack</span>;</span><br></pre></td></tr></table></figure>
<h3 id="èƒŒæ™¯éƒ¨åˆ†"><a href="#èƒŒæ™¯éƒ¨åˆ†" class="headerlink" title="èƒŒæ™¯éƒ¨åˆ†"></a>èƒŒæ™¯éƒ¨åˆ†</h3><p>èƒŒæ™¯éƒ¨åˆ†ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯çŠ¶æ€æ çš„èƒŒæ™¯é¢œè‰²ï¼Œå…¶å®ç³»ç»ŸçŠ¶æ€æ çš„èƒŒæ™¯é¢œè‰²ä¸€ç›´æ˜¯é€æ˜çš„çŠ¶æ€ï¼Œå½“æœ‰å¯¼èˆªæ æ—¶ï¼Œå¯¼èˆªæ èƒŒæ™¯æ˜¯ä»€ä¹ˆé¢œè‰²ï¼ŒçŠ¶æ€æ å°±æ˜¯ä»€ä¹ˆé¢œè‰²ï¼Œæ²¡æœ‰å¯¼èˆªæ æ—¶ï¼ŒçŠ¶æ€æ èƒŒåçš„è§†å›¾æ—¶ä»€ä¹ˆé¢œè‰²ï¼Œå®ƒå°±æ˜¯ä»€ä¹ˆé¢œè‰²ã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®çŠ¶æ€æ ä¸åˆ°å¯¼èˆªæ éƒ½æ˜¯ä¸é€æ˜</span></span><br><span class="line"><span class="keyword">self</span>.navigationController.navigationBar.translucent = <span class="literal">NO</span>;</span><br><span class="line"><span class="comment">// è¿™ä¸ªæ–¹æ³•æ˜¯è®¾ç½®å¯¼èˆªæ èƒŒæ™¯é¢œè‰²ï¼ŒçŠ¶æ€æ ä¹Ÿä¼šéšä¹‹å˜è‰²</span></span><br><span class="line">[<span class="keyword">self</span>.navigationController.navigationBar setBarTintColor:[<span class="built_in">UIColor</span> redColor]];</span><br></pre></td></tr></table></figure>
<p><strong>å•ç‹¬è®¾ç½®</strong></p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> è®¾ç½®çŠ¶æ€æ èƒŒæ™¯é¢œè‰²</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> @param color è®¾ç½®é¢œè‰²</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)setStatusBarBackgroundColor:(<span class="built_in">UIColor</span> *)color &#123;</span><br><span class="line">    <span class="built_in">UIView</span> *statusBar = [[[<span class="built_in">UIApplication</span> sharedApplication] valueForKey:<span class="string">@"statusBarWindow"</span>] valueForKey:<span class="string">@"statusBar"</span>];</span><br><span class="line">    <span class="keyword">if</span> ([statusBar respondsToSelector:<span class="keyword">@selector</span>(setBackgroundColor:)]) &#123;</span><br><span class="line">        statusBar.backgroundColor = color;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ•ˆæœå›¾</strong></p>
<p><img src="statusbar_bg.png" alt></p>
<blockquote>
<p>å¦‚æœæ˜¯å•ç‹¬è®¾ç½®æŸä¸ªé¡µé¢çš„çŠ¶æ€æ èƒŒæ™¯è‰²ï¼Œè¿˜éœ€è¦åœ¨ç¦»å¼€é¡µé¢æ—¶æ¢å¤åŸæ ·ã€‚</p>
</blockquote>
<h2 id="çŠ¶æ€æ å¸¸ç”¨å®å®šä¹‰"><a href="#çŠ¶æ€æ å¸¸ç”¨å®å®šä¹‰" class="headerlink" title="çŠ¶æ€æ å¸¸ç”¨å®å®šä¹‰"></a>çŠ¶æ€æ å¸¸ç”¨å®å®šä¹‰</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> mark - è®¾å¤‡å‚æ•°</span></span><br><span class="line"><span class="comment">//å±å¹•å®½</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ZS_ScreenWidth   [[UIScreen mainScreen] bounds].size.width</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å±å¹•é«˜</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ZS_ScreenHeight  [[UIScreen mainScreen] bounds].size.height</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­è®¾å¤‡ç±»å‹æ˜¯å¦iPhoneX</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ZS_ISIphoneX    (([UIScreen mainScreen].bounds.size.height/[UIScreen mainScreen].bounds.size.width) &gt;= 2.16)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¼èˆªæ é«˜åº¦</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ZS_NavBarHeight (ZS_ISIphoneX ? 88.f : 64.f)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//çŠ¶æ€æ é«˜åº¦</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ZS_StatusBarHeight (ZS_ISIphoneX ? 44.f : 20.f)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¼èˆªæ å†…å®¹é«˜åº¦</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ZS_NavBarContentHeight 44.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ‡ç­¾æ é«˜åº¦</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ZS_TabBarHeight (ZS_ISIphoneX ? 49.f + 34.f : 49.f)</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šè‡ªiOS11ä¹‹åï¼ŒAppleå¼•å…¥Safe Area(å®‰å…¨åŒº)çš„æ¦‚å¿µï¼Œè¿™å°†æ˜¯æ¯”å®å®šä¹‰æ›´åŠ æœ‰æ•ˆçš„é€‚é…æ–¹æ³•ã€‚</p>
</blockquote>
<h1 id="å¯¼èˆªæ "><a href="#å¯¼èˆªæ " class="headerlink" title="å¯¼èˆªæ "></a>å¯¼èˆªæ </h1><h2 id="å¯¼èˆªæ æ ·å¼"><a href="#å¯¼èˆªæ æ ·å¼" class="headerlink" title="å¯¼èˆªæ æ ·å¼"></a>å¯¼èˆªæ æ ·å¼</h2><p>è®¾ç½®å½“å‰å¯¼èˆªæ çš„æ ‡é¢˜ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">self</span>.navigationItem.title = @<span class="string">"title"</span>;</span><br></pre></td></tr></table></figure>
<p>è·å–å½“å‰å¯¼èˆªæ frameï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">CGRect</span> navRect = <span class="keyword">self</span>.navigationController.navigationBar.frame;</span><br></pre></td></tr></table></figure>
<p>è®¾ç½®å¯¼èˆªæ æ ·å¼å¯åˆ†ä¸ºå…¨å±€è®¾ç½®æˆ–åˆ†é¡µè®¾ç½®</p>
<h3 id="å…¨å±€è®¾ç½®-1"><a href="#å…¨å±€è®¾ç½®-1" class="headerlink" title="å…¨å±€è®¾ç½®"></a>å…¨å±€è®¾ç½®</h3><p>å…¨å±€è®¾ç½®åœ¨<code>AppDelegate</code>ä¸­è®¾ç½®ï¼Œåœ¨æ•´ä¸ªappéƒ½ä¼šç”Ÿæ•ˆ</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®å¯¼èˆªæ èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">[[<span class="built_in">UINavigationBar</span> appearance] setBarTintColor:[<span class="built_in">UIColor</span> redColor]];</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®å¯¼èˆªæ èƒŒæ™¯å›¾ç‰‡</span></span><br><span class="line">[[<span class="built_in">UINavigationBar</span> appearance] setBackgroundImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"bg"</span>] forBarMetrics:<span class="built_in">UIBarMetricsDefault</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®å¯¼èˆªæ æ ‡é¢˜æ ·å¼</span></span><br><span class="line">[[<span class="built_in">UINavigationBar</span> appearance] setTitleTextAttributes:[<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:</span><br><span class="line">                                                          [<span class="built_in">UIColor</span> redColor], <span class="built_in">NSForegroundColorAttributeName</span>,</span><br><span class="line">                                                          [<span class="built_in">UIFont</span> boldSystemFontOfSize:<span class="number">25</span>], <span class="built_in">NSFontAttributeName</span>,</span><br><span class="line">                                                          <span class="literal">nil</span>]];</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®å¯¼èˆªæ è¿”å›æŒ‰é’®çš„é¢œè‰²</span></span><br><span class="line">[[<span class="built_in">UINavigationBar</span> appearance] setTintColor:[<span class="built_in">UIColor</span> redColor]];</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®å¯¼èˆªæ éšè—</span></span><br><span class="line">[[<span class="built_in">UINavigationBar</span> appearance] setHidden:<span class="literal">YES</span>];</span><br></pre></td></tr></table></figure>
<h3 id="åˆ†é¡µè®¾ç½®-1"><a href="#åˆ†é¡µè®¾ç½®-1" class="headerlink" title="åˆ†é¡µè®¾ç½®"></a>åˆ†é¡µè®¾ç½®</h3><p>å…¨å±€è®¾ç½®åï¼Œä½†æ˜¯æœ‰å‡ ä¸ªé¡µé¢éœ€æ±‚ä¸åŒï¼Œåˆ™ä¹Ÿå¯ä»¥è¿›è¡Œå•ç‹¬çš„åˆ†é¡µè®¾ç½®ã€‚</p>
<p>åˆ†é¡µè®¾ç½®çš„è°ƒç”¨æ–¹æ³•å˜ä¸º<code>self.navigationController.navigationBar</code>ã€‚<br>å¹¶ä¸”åˆ†é¡µè®¾ç½®éœ€è¦éµå¾ªï¼š <strong>è¿›å…¥é¡µé¢æ—¶ä¿®æ”¹ï¼Œç¦»å¼€é¡µé¢æ—¶è¿˜åŸ</strong>çš„åŸåˆ™ã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿›å…¥é¡µé¢æ—¶è®¾ç½®é¢œè‰²ï¼šç°è‰²</span></span><br><span class="line">- (<span class="keyword">void</span>)viewWillAppear:(<span class="built_in">BOOL</span>)animated&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillAppear:animated];</span><br><span class="line">    [<span class="keyword">self</span>.navigationController.navigationBar setBarTintColor:[<span class="built_in">UIColor</span> grayColor]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¦»å¼€é¡µé¢æ—¶è¿˜åŸä¸ºå…¨å±€è®¾ç½®ï¼šæ©™è‰²</span></span><br><span class="line">- (<span class="keyword">void</span>)viewWillDisappear:(<span class="built_in">BOOL</span>)animated&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillDisappear:animated];</span><br><span class="line">    [<span class="keyword">self</span>.navigationController.navigationBar setBarTintColor:[<span class="built_in">UIColor</span> orangeColor]];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¯¼èˆªæ å¼•èµ·çš„å¸ƒå±€é—®é¢˜"><a href="#å¯¼èˆªæ å¼•èµ·çš„å¸ƒå±€é—®é¢˜" class="headerlink" title="å¯¼èˆªæ å¼•èµ·çš„å¸ƒå±€é—®é¢˜"></a>å¯¼èˆªæ å¼•èµ·çš„å¸ƒå±€é—®é¢˜</h2><p>å½“å¯¼èˆªæ é€æ˜æ—¶ä¼šå‡ºç°ä»¥ä¸‹æƒ…å†µï¼š</p>
<h3 id="å†…å®¹åç§»å±æ€§ï¼šautomaticallyAdjustsScrollViewInsets"><a href="#å†…å®¹åç§»å±æ€§ï¼šautomaticallyAdjustsScrollViewInsets" class="headerlink" title="å†…å®¹åç§»å±æ€§ï¼šautomaticallyAdjustsScrollViewInsets"></a>å†…å®¹åç§»å±æ€§ï¼šautomaticallyAdjustsScrollViewInsets</h3><p>automaticallyAdjustsScrollViewInsetsæ˜¯è§†å›¾æ§åˆ¶å™¨çš„ä¸€ä¸ªå±æ€§ï¼Œé»˜è®¤ä¸ºYESï¼Œç”¨äºä¼˜åŒ–æ»‘åŠ¨ç±»è§†å›¾(ç»§æ‰¿äºUIScrollViewçš„è§†å›¾)åœ¨è§†å›¾æ§åˆ¶é‡Œçš„æ˜¾ç¤ºï¼š</p>
<p>iOSç³»ç»Ÿçš„å¯¼èˆªæ UINavigationBarä¸æ ‡ç­¾æ UITabBaré»˜è®¤éƒ½æ˜¯åŠé€æ˜æ¨¡ç³Šæ•ˆæœï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ç³»ç»Ÿä¼šå¯¹è§†å›¾æ§åˆ¶å™¨çš„UIå¸ƒå±€è¿›è¡Œä¼˜åŒ–ï¼š <strong>è§†å›¾æ§åˆ¶å™¨é‡Œé¢ç¬¬ä¸€ä¸ªè¢«æ·»åŠ è¿›å»çš„è§†å›¾æ˜¯æ»‘åŠ¨ç±»è§†å›¾ï¼Œå¹¶ä¸”å…¶Frameæ˜¯æ•´ä¸ªå±å¹•å¤§å°æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒæ•´å…¶contenInsetï¼Œä»¥ä¿è¯æ»‘åŠ¨è§†å›¾é‡Œçš„å†…å®¹ä¸è¢«UINavigationBarä¸UITabBaré®æŒ¡ã€‚</strong></p>
<p>ä½†æ˜¯å¯¹äºæ™®é€šçš„è§†å›¾ï¼Œæ­¤æ—¶æˆ‘ä»¬ä»ç„¶éœ€è¦æ³¨æ„ï¼šéæ»‘åŠ¨è§†å›¾çš„å¸ƒå±€ä»ç„¶è¦è€ƒè™‘å¯¼èˆªæ å’Œæ ‡ç­¾æ é«˜åº¦ï¼Œæ³¨æ„ä¸è¢«é®æŒ¡ï¼Œæ¯”å¦‚å¸ƒå±€çš„æ—¶å€™åŠ ä¸Šå¯¼èˆªæ é«˜åº¦ï¼Œä»¥å…å†…å®¹è¢«å¯¼èˆªæ é®æŒ¡ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€æ®µä»£ç æ¥æµ‹è¯•ä¸€ä¸‹æ•ˆæœï¼Œåœ¨é»˜è®¤å¯¼èˆªæ (åŠé€æ˜)çš„è§†å›¾æ§åˆ¶å™¨é‡Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//UITextViewæ˜¯æ»‘åŠ¨è§†å›¾ï¼Œå†…å®¹è‡ªåŠ¨å‘ä¸‹åç§»ï¼Œä¸ä¼šè¢«å¯¼èˆªæ è¦†ç›–</span></span><br><span class="line">    <span class="built_in">UITextView</span> *leftTextView = [[<span class="built_in">UITextView</span> alloc] init];</span><br><span class="line">    leftTextView.frame = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>,<span class="number">100</span>, <span class="number">675</span>);</span><br><span class="line">    leftTextView.backgroundColor = [<span class="built_in">UIColor</span> lightGrayColor];</span><br><span class="line">    leftTextView.text = <span class="string">@"å›ä¸è§ï¼Œé»„æ²³ä¹‹æ°´å¤©ä¸Šæ¥ï¼Œå¥”æµåˆ°æµ·ä¸å¤å›ã€‚å›ä¸è§ï¼Œé«˜å ‚æ˜é•œæ‚²ç™½å‘ï¼Œæœå¦‚é’ä¸æš®æˆé›ªã€‚äººç”Ÿå¾—æ„é¡»å°½æ¬¢ï¼Œè«ä½¿é‡‘æ¨½ç©ºå¯¹æœˆã€‚å¤©ç”Ÿæˆ‘æå¿…æœ‰ç”¨ï¼Œåƒé‡‘æ•£å°½è¿˜å¤æ¥ã€‚"</span>;</span><br><span class="line">    leftTextView.font = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">18</span>];</span><br><span class="line">    leftTextView.editable = <span class="literal">NO</span>;</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:leftTextView];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//UIViewæ˜¯éæ»‘åŠ¨è§†å›¾ï¼Œå†…å®¹è¢«å¯¼èˆªæ éƒ¨åˆ†è¦†ç›–</span></span><br><span class="line">    <span class="built_in">UIView</span> *rightView= [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">150</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)];</span><br><span class="line">    rightView.backgroundColor = [<span class="built_in">UIColor</span> redColor];</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:rightView];</span><br></pre></td></tr></table></figure>
<p><img src="auto.png" alt="å¯¼èˆªæ é€æ˜æƒ…å†µä¸‹ï¼Œæ»‘åŠ¨è§†å›¾è‡ªåŠ¨åç§»ï¼Œæ™®é€šè§†å›¾è¢«é®æŒ¡"></p>
<p>è¿™é‡Œä¼šå‘ç°éæ»‘åŠ¨è§†å›¾ä¼šè¢«å¯¼èˆªæ é®æŒ¡ï¼Œä½†æ˜¯æ»‘åŠ¨è§†å›¾å³ä½¿å»¶ä¼¸åˆ°äº†å¯¼èˆªæ ä¸‹ï¼Œä½†æ˜¯å…¶å†…å®¹éƒ¨åˆ†å´è‡ªåŠ¨å‘ä¸‹åç§»äº†ï¼Œæ²¡æœ‰è¢«å¯¼èˆªæ é®æŒ¡ä½ï¼Œè¿™æ˜¯å› ä¸ºç³»ç»Ÿè‡ªåŠ¨ä¼˜åŒ–äº†å…¶å†…è¾¹è·ã€‚</p>
<p>å…¶å®ï¼Œè¿™ç§ç³»ç»Ÿçš„ä¼˜åŒ–ä¹Ÿæ˜¯å¯ä»¥æ§åˆ¶å…³é—­çš„ï¼Œå…³é—­ä¼˜åŒ–ä¹‹åï¼Œæ»‘åŠ¨è§†å›¾å°±ä¼šå’Œæ™®é€šè§†å›¾ä¸€æ ·ï¼Œå¦‚æœè¿˜è®¾ç½®å…¶å¸ƒå±€çš„åŸç‚¹æ˜¯(0,0),å…¶å†…å®¹å°±ä¼šè¢«å¯¼èˆªæ æ‰€è¦†ç›–ï¼Œå…³é”®ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//automaticallyAdjustsScrollViewInsetsåœ¨11.0åå¤±æ•ˆï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­</span></span><br><span class="line"><span class="keyword">if</span> (@available(iOS <span class="number">11.0</span>,*)) &#123;</span><br><span class="line">       scrollView.contentInsetAdjustmentBehavior = <span class="built_in">UIScrollViewContentInsetAdjustmentNever</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       <span class="comment">//automaticallyAdjustsScrollViewInï¼Œå…³é—­è‡ªåŠ¨åç§»çš„ç³»ç»Ÿä¼˜åŒ–</span></span><br><span class="line">       <span class="keyword">self</span>.automaticallyAdjustsScrollViewInsets = <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¾¹ç¼˜å»¶ä¼¸å±æ€§ï¼šedgesForExtendedLayout"><a href="#è¾¹ç¼˜å»¶ä¼¸å±æ€§ï¼šedgesForExtendedLayout" class="headerlink" title="è¾¹ç¼˜å»¶ä¼¸å±æ€§ï¼šedgesForExtendedLayout"></a>è¾¹ç¼˜å»¶ä¼¸å±æ€§ï¼šedgesForExtendedLayout</h3><p>edgesForExtendedLayoutä¹Ÿæ˜¯è§†å›¾æ§åˆ¶å™¨çš„å¸ƒå±€å±æ€§ï¼Œé»˜è®¤å€¼æ˜¯UIRectEdgeAllï¼Œå³ï¼šå½“å‰è§†å›¾æ§åˆ¶å™¨é‡Œå„ç§UIæ§ä»¶ä¼šå¿½ç•¥å¯¼èˆªæ å’Œæ ‡ç­¾çš„å­˜åœ¨ï¼Œå¸ƒå±€æ—¶è‹¥è®¾ç½®å…¶åŸç‚¹è®¾ç½®ä¸º(0,0)ï¼Œè§†å›¾ä¼šå»¶ä¼¸æ˜¾ç¤ºåˆ°å¯¼èˆªæ çš„ä¸‹é¢è¢«è¦†ç›–ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¾ç½®<code>self.edgesForExtendedLayout=UIRectEdgeNone</code>ï¼Œæ­¤æ—¶è§†å›¾æ§åˆ¶å™¨é‡Œå†…å®¹å°±ä¼šé¿å¼€å¯¼èˆªæ å’Œæ ‡ç­¾æ äº†ã€‚</p>
<h2 id="å¯¼èˆªæ é€æ˜"><a href="#å¯¼èˆªæ é€æ˜" class="headerlink" title="å¯¼èˆªæ é€æ˜"></a>å¯¼èˆªæ é€æ˜</h2><p>å¯¼èˆªæ å¸ƒå±€é—®é¢˜éƒ½æ˜¯å› ä¸ºå¯¼èˆªæ é€æ˜åº¦å½±å“ï¼Œä½†æ˜¯éœ€æ±‚æ²¡æœ‰å¿…è¦é€æ˜ï¼Œé‚£ä¹ˆè§†å›¾æ§åˆ¶å™¨é‡Œçš„æ§ä»¶å°±ä¼šé»˜è®¤ä»(0,64)å¼€å§‹å¸ƒå±€äº†ï¼Œè®¾ç½®å¯¼èˆªæ ä¸é€æ˜çš„æ–¹æ³•å¦‚ä¸‹:</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="keyword">self</span>.navigationController.navigationBar.translucent= <span class="literal">NO</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidä¸­MVCã€MVPã€MVVMä»‹ç»</title>
    <url>/2019/04/01/Android%E4%B8%ADMVC%E3%80%81MVP%E3%80%81MVVM%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>MVC,MVP,MVVMç®€å•ä»‹ç»</strong></p>
<a id="more"></a>
<h1 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h1><p><code>MVC</code>å…¨åæ˜¯<code>Model-View-Controller</code>ï¼Œæ˜¯æ¨¡å‹(model)-è§†å›¾(view)-æ§åˆ¶å™¨(controller)çš„ç¼©å†™ï¼Œä¸€ç§è½¯ä»¶è®¾è®¡çš„å…¸èŒƒï¼Œç”¨ä¸€ç§ä¸šåŠ¡é€»è¾‘ã€æ•°æ®ã€ç•Œé¢æ˜¾ç¤ºåˆ†ç¦»çš„æ–¹å¼æ¥ç»„ç»‡ä»£ç ï¼Œåœ¨æ”¹è¿›å’Œä¸ªæ€§åŒ–å®šåˆ¶æ´é¢ä»¥åŠç”¨æˆ·äº¤äº’çš„åŒæ—¶ï¼Œä¸éœ€è¦é‡æ–°ç¼–å†™ä¸šåŠ¡é€»è¾‘ã€‚å…¶ä¸­<code>Model</code>å±‚å¤„ç†æ•°æ®ï¼Œä¸šåŠ¡é€»è¾‘ç­‰ã€‚<code>View</code>å±‚å¤„ç†ç•Œé¢çš„æ˜¾ç¤ºç»“æœã€‚<code>Controller</code>å±‚èµ·åˆ°æ¡¥æ¢çš„ä½œç”¨ï¼Œæ¥æ§åˆ¶<code>View</code>å±‚å’Œ<code>Model</code>å±‚é€šä¿¡ä»¥æ­¤æ¥è¾¾åˆ°åˆ†ç¦»è§†å›¾æ˜¾ç¤ºå’Œä¸šåŠ¡é€»è¾‘å±‚ã€‚</p>
<p><img src="mvc.png" alt></p>
<p>æˆ‘ä»¬å¾€å¾€æŠŠAndroidä¸­ç•Œé¢éƒ¨åˆ†çš„å®ç°ä¹Ÿç†è§£ä¸ºé‡‡ç”¨äº†MVCæ¡†æ¶ï¼Œå¸¸å¸¸æŠŠActivityç†è§£ä¸ºMVCæ¨¡å¼ä¸­çš„Controllerã€‚</p>
<p><strong>çœ‹ä¼¼æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„åœ°æ–¹ï¼Œä½†æ˜¯ç”±å‡ ä¸ªéœ€è¦ç‰¹åˆ«å…³æ³¨çš„å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>Viewæ˜¯æŠŠæ§åˆ¶æƒäº¤ç»™Controllerï¼Œè‡ªå·±ä¸æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚</li>
<li>Controlleræ‰§è¡Œä¸šåŠ¡é€»è¾‘å¹¶ä¸”æ“ä½œModelï¼Œä½†ä¸ä¼šç›´æ¥æ“ä½œViewï¼Œå¯ä»¥è¯´å®ƒæ˜¯å¯¹Viewæ— çŸ¥çš„ã€‚</li>
<li>Viewå’ŒModelçš„åŒæ­¥æ¶ˆæ¯æ˜¯é€šè¿‡è§‚å¯Ÿç€æ¨¡å¼è¿›è¡Œï¼Œè€ŒåŒæ­¥æ“ä½œæ˜¯ç”±Viewè‡ªå·±è¯·æ±‚Modelçš„æ•°æ®ç„¶åå¯¹è§†å›¾è¿›è¡Œæ›´æ–°ã€‚</li>
</ul>
<h2 id="MVCçš„ä¼˜ç¼ºç‚¹"><a href="#MVCçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="MVCçš„ä¼˜ç¼ºç‚¹"></a>MVCçš„ä¼˜ç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹</strong></p>
<ul>
<li>æŠŠä¸šåŠ¡é€»è¾‘å…¨éƒ¨åˆ†ç¦»åˆ°controllerä¸­ï¼Œæ¨¡å—åŒ–ç¨‹åº¦é«˜ã€‚å½“ä¸šåŠ¡é€»è¾‘å˜æ›´çš„æ—¶å€™ï¼Œä¸éœ€è¦æ›´æ”¹viewå’Œmodelï¼Œåªéœ€è¦æ›´æ”¹controllerå³å¯ï¼ˆswappable controllerï¼‰ã€‚</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥åšåˆ°å¤šè§†å›¾åŒæ—¶æ›´æ–°</li>
</ul>
<p><strong>ç¼ºç‚¹</strong></p>
<ul>
<li>controlleræµ‹è¯•å›°éš¾ï¼Œå› ä¸ºè§†å›¾åŒæ­¥æ“ä½œæ˜¯ç”±viewè‡ªå·±æ‰§è¡Œï¼Œè€Œviewåªèƒ½åœ¨æœ‰UIçš„ç¯å¢ƒä¸‹è¿è¡Œã€‚åœ¨æ²¡æœ‰UIçš„ç¯å¢ƒä¸‹å¯¹controllerè¿›è¡Œå•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œcontrollerä¸šåŠ¡é€»è¾‘çš„æ­£ç¡®æ€§æ˜¯æ— æ³•éªŒè¯çš„ã€‚controlleræ›´æ–°modelçš„æ—¶å€™ï¼Œæ— æ³•å¯¹viewçš„æ›´æ–°æ“ä½œè¿›è¡Œæ–­è¨€ã€‚</li>
<li>viewæ— æ³•ç»„ä»¶åŒ–ã€‚viewæ˜¯å¼ºä¾èµ–ç‰¹å®šçš„modelçš„ï¼Œå¦‚æœéœ€è¦æŠŠè¿™ä¸ªviewæŠ½å‡ºæ¥ä½œä¸ºå¦å¤–ä¸€ä¸ªåº”ç”¨ç¨‹åºå¯æœç”¨çš„ç»„ä»¶å°±å›°éš¾äº†ï¼Œå› ä¸ºä¸åŒçš„ç¨‹åºmodelæ˜¯ä¸ä¸€æ ·çš„ã€‚</li>
</ul>
<h1 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a>MVP</h1><p><code>MVP</code>å…¶å®æ˜¯<code>MVC</code>çš„ä¸€ç§æ¼”è¿›ç‰ˆæœ¬ï¼Œå®ƒæ›´ç®€å•ï¼Œå°†<code>MVC</code>ä¸­çš„<code>Controller</code>æ”¹ä¸ºäº†<code>Presenter</code>ï¼Œ<code>View</code>é€šè¿‡æ¥å£ä¸<code>Presenter</code>è¿›è¡Œäº¤äº’ï¼Œé™ä½è€¦åˆï¼Œæ–¹ä¾¿è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚</p>
<ul>
<li><strong>View:</strong>è´Ÿè´£ç»˜åˆ¶UIå…ƒç´ ï¼Œä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼ˆActivityã€Viewã€Fragmentéƒ½å¯ä»¥ä½œä¸ºViewå±‚ï¼‰</li>
<li><strong>Model:</strong>å¯¹æ•°æ®çš„æ“ä½œã€å¯¹ç½‘ç»œç­‰çš„æ“ä½œï¼Œå’Œä¸šåŠ¡ç›¸å…³çš„é€»è¾‘å¤„ç†</li>
<li><strong>Presenter:</strong>ä½œä¸ºViewä¸Modeläº¤äº’çš„ä¸­é—´çº½å¸¦ï¼Œå¤„ç†ä¸ç”¨æˆ·äº¤äº’çš„é€»è¾‘ã€‚å¯ä»¥æŠŠPresenterç†è§£ä¸ºä¸€ä¸ªä¸­é—´å±‚çš„è§’è‰²ï¼Œå®ƒæ¥å—Modelå±‚çš„æ•°æ®ï¼Œå¹¶ä¸”å¤„ç†ä¹‹åä¼ é€’ç»™Viewå±‚ï¼Œè¿˜éœ€è¦å¤„ç†Viewå±‚çš„ç”¨æˆ·<br>äº¤äº’ç­‰æ“ä½œã€‚</li>
</ul>
<p><img src="mvp.png" alt></p>
<p><strong>å…³é”®ç‚¹</strong></p>
<ul>
<li>Viewä¸å†è´Ÿè´£åŒæ­¥çš„é€»è¾‘ï¼Œè€Œæ˜¯ç”±Presenterè´Ÿè´£ã€‚Presenterä¸­æ—¢æœ‰ä¸šåŠ¡é€»è¾‘ä¹Ÿæœ‰åŒæ­¥é€»è¾‘ã€‚</li>
<li>Viewéœ€è¦æä¾›æ“ä½œç•Œé¢çš„æ¥å£ç»™Presenterè¿›è¡Œè°ƒç”¨ã€‚ï¼ˆå…³é”®ï¼‰</li>
</ul>
<p>å¯¹æ¯”åœ¨MVCä¸­ï¼ŒControlleræ˜¯ä¸èƒ½æ“ä½œViewçš„ï¼ŒViewä¹Ÿæ²¡æœ‰æä¾›ç›¸åº”çš„æ¥å£ã€‚è€Œåœ¨MVPå½“ä¸­ï¼ŒPresenterå¯ä»¥æ“ä½œViewï¼ŒViewéœ€è¦æä¾›ä¸€ç»„å¯¹ç•Œé¢æ“ä½œçš„æ¥å£ç»™Presenterè¿›è¡Œè°ƒç”¨ã€‚Modelä»ç„¶é€šè¿‡äº‹ä»¶å¹¿æ’­è‡ªå·±çš„å˜æ›´ï¼Œä½†ç”±äºPresenterç›‘å¬è€Œä¸æ˜¯Viewã€‚</p>
<h2 id="MVPï¼ˆPassive-Viewï¼‰ä¼˜ç¼ºç‚¹"><a href="#MVPï¼ˆPassive-Viewï¼‰ä¼˜ç¼ºç‚¹" class="headerlink" title="MVPï¼ˆPassive Viewï¼‰ä¼˜ç¼ºç‚¹"></a>MVPï¼ˆPassive Viewï¼‰ä¼˜ç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹</strong></p>
<ul>
<li>ä¾¿äºæµ‹è¯•ï¼ŒPresenterå¯¹Viewæ˜¯é€šè¿‡æ¥å£è¿›è¡Œï¼Œåœ¨å¯¹Presenterè¿›è¡Œä¸ä¾èµ–UIç¯å¢ƒçš„å•å…ƒæµ‹è¯•çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡Mockä¸€ä¸ªViewå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åªéœ€è¦å®ç°äº†Viewçš„æ¥å£å³å¯ã€‚ç„¶åä¾èµ–æ³¨å…¥åˆ°Presenterä¸­ï¼Œå•å…ƒæµ‹è¯•çš„æ—¶å€™å°±å¯ä»¥å®Œæ•´çš„æµ‹è¯•Presenterä¸šåŠ¡é€»è¾‘çš„æ­£ç¡®æ€§ã€‚</li>
<li>Viewå¯ä»¥è¿›è¡Œç»„ä»¶åŒ–ã€‚åœ¨MVPå½“ä¸­ï¼ŒViewä¸ä¾èµ–Modelã€‚è¿™æ ·å°±å¯ä»¥è®©Viewä»ç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ä¸­è„±ç¦»å‡ºæ¥ï¼Œå¯ä»¥è¯´Viewå¯ä»¥åšåˆ°å¯¹ä¸šåŠ¡é€»è¾‘å®Œå…¨æ— çŸ¥ã€‚å®ƒåªéœ€è¦æä¾›ä¸€ç³»åˆ—æ¥å£æä¾›ç»™ä¸Šå±‚æ¥æ“ä½œã€‚è¿™æ ·å°±å¯ä»¥åšåˆ°é«˜åº¦å¯å¤ç”¨çš„Viewç»„ä»¶ã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹</strong></p>
<ul>
<li>Presenterä¸­é™¤äº†ä¸šåŠ¡é€»è¾‘æ„å¤–ï¼Œè¿˜æœ‰å¤§é‡çš„View-&gt;Modelï¼ŒModel-&gt;Viewçš„æ‰‹åŠ¨åŒæ­¥é€»è¾‘ï¼Œé€ æˆPresenteræ¯”è¾ƒç¬¨é‡ï¼Œç»´æŠ¤èµ·æ¥ä¼šæ¯”è¾ƒå›°éš¾ã€‚</li>
</ul>
<h1 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h1><p><code>MVVM</code>æ¨¡å¼ï¼ˆMode-View-ViewModelï¼‰ï¼Œå’Œ<code>MVP</code>æ¨¡å¼ç›¸æ¯”ï¼Œ<code>MVVM</code>æ¨¡å¼ç”¨ViewModelæ›¿æ¢äº†Presenterï¼Œå…¶ä»–å±‚åŸºæœ¬ä¸Šä¸<code>MVP</code>æ¨¡å¼ä¸€ç›´ï¼Œ<code>ViewModel</code>å¯ä»¥ç†è§£æˆæ˜¯<code>View</code>çš„æ•°æ®æ¨¡å‹å’Œ<code>Presenter</code>çš„åˆä½“ã€‚</p>
<p><code>MVVM</code>é‡‡ç”¨åŒå‘ç»‘å®šï¼ˆdata-bindingï¼‰ã€‚Viewçš„å˜åŠ¨ï¼Œè‡ªåŠ¨ååº”åœ¨ViewModelï¼Œåä¹‹äº¦ç„¶ã€‚è¿™ç§æ¨¡å¼å®é™…ä¸Šæ˜¯æ¡†æ¶æ›¿åº”ç”¨å¼€å‘è€…åšäº†ä¸€äº›å·¥ä½œï¼ˆç›¸å½“äºViewModelç±»æ˜¯ç”±åº“å¸®æˆ‘ä»¬ç”Ÿæˆçš„ï¼‰ï¼Œå¼€å‘è€…åªéœ€è¦è¾ƒå°‘ä»£ç å°±èƒ½å®ç°æ¯”è¾ƒå¤æ‚çš„äº¤äº’ã€‚</p>
<p><img src="mvvm.png" alt></p>
<p><strong>MVVMè°ƒç”¨å…³ç³»</strong></p>
<p>MVVMçš„è°ƒç”¨å…³ç³»å’ŒMVPä¸€æ ·ã€‚ä½†æ˜¯ï¼Œåœ¨ViewModelå½“ä¸­ä¼šæœ‰ä¸€ä¸ªå«Binderï¼Œæˆ–è€…æ˜¯Data-binding engineçš„ä¸œè¥¿ã€‚ä»¥å‰å…¨éƒ¨ç”±Presenterè´Ÿè´£çš„Viewå’ŒModelä¹‹é—´æ•°æ®åŒæ­¥æ“ä½œäº¤ç”±ç»™Binderå¤„ç†ã€‚ä½ åªéœ€è¦åœ¨Viewçš„æ¨¡ç‰ˆè¯­æ³•å½“ä¸­ï¼ŒæŒ‡ä»¤å¼åœ°å£°æ˜Viewä¸Šçš„æ˜¾ç¤ºçš„å†…å®¹æ˜¯å’ŒModelçš„å“ªä¸€å—æ•°æ®ç»‘å®šçš„ã€‚å½“ViewModelå¯¹è¿›è¡ŒModelæ›´æ–°çš„æ—¶å€™ï¼ŒBinderä¼šè‡ªåŠ¨æŠŠæ•°æ®æ›´æ–°åˆ°Viewä¸Šå»ï¼Œå½“ç”¨æˆ·å¯¹Viewè¿›è¡Œæ“ä½œï¼ˆä¾‹å¦‚è¡¨å•è¾“å…¥ï¼‰ï¼ŒBinderä¹Ÿä¼šè‡ªåŠ¨æŠŠæ•°æ®æ›´æ–°åˆ°Modelä¸Šå»ã€‚è¿™ç§æ–¹å¼ç§°ä¸ºï¼šTwo-way data-bindingï¼ŒåŒå‘æ•°æ®ç»‘å®šã€‚å¯ä»¥ç®€å•è€Œä¸æ°å½“åœ°ç†è§£ä¸ºä¸€ä¸ªæ¨¡ç‰ˆå¼•æ“ï¼Œä½†æ˜¯ä¼šæ ¹æ®æ•°æ®å˜æ›´å®æ—¶æ¸²æŸ“ã€‚</p>
<p><strong>å…³é”®ç‚¹</strong></p>
<ul>
<li>MVVMæŠŠViewå’ŒModelçš„åŒæ­¥é€»è¾‘è‡ªåŠ¨åŒ–äº†ã€‚ä»¥å‰Presenterè´Ÿè´£çš„Viewå’ŒModelåŒæ­¥ä¸å†æ‰‹åŠ¨åœ°è¿›è¡Œæ“ä½œï¼Œè€Œæ˜¯äº¤ç”±æ¡†æ¶æ‰€æä¾›çš„Binderè¿›è¡Œè´Ÿè´£ã€‚</li>
<li>åªéœ€è¦å‘Šè¯‰Binderï¼ŒViewæ˜¾ç¤ºçš„æ•°æ®å¯¹åº”çš„æ˜¯Modelå“ªä¸€éƒ¨åˆ†å³å¯ã€‚</li>
</ul>
<h2 id="MVVMä¼˜ç¼ºç‚¹"><a href="#MVVMä¼˜ç¼ºç‚¹" class="headerlink" title="MVVMä¼˜ç¼ºç‚¹"></a>MVVMä¼˜ç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹</strong></p>
<ul>
<li>æé«˜å¯ç»´æŠ¤æ€§ã€‚è§£å†³äº†MVPå¤§é‡çš„æ‰‹åŠ¨Viewå’ŒModelåŒæ­¥çš„é—®é¢˜ï¼Œæä¾›åŒå‘ç»‘å®šæœºåˆ¶ã€‚æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</li>
<li>ç®€åŒ–æµ‹è¯•ã€‚å› ä¸ºåŒæ­¥é€»è¾‘æ˜¯äº¤ç”±Binderåšçš„ï¼ŒViewè·Ÿç€ModelåŒæ—¶å˜æ›´ï¼Œæ‰€ä»¥åªéœ€è¦ä¿è¯Modelçš„æ­£ç¡®æ€§ï¼ŒViewå°±æ­£ç¡®ã€‚å¤§å¤§å‡å°‘äº†å¯¹ViewåŒæ­¥æ›´æ–°çš„æµ‹è¯•ã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹</strong></p>
<ul>
<li>è¿‡äºç®€å•çš„å›¾å½¢ç•Œé¢ä¸é€‚ç”¨ï¼Œæˆ–è¯´ç‰›åˆ€æ€é¸¡ã€‚</li>
<li>å¯¹äºå¤§å‹çš„å›¾å½¢åº”ç”¨ç¨‹åºï¼Œè§†å›¾çŠ¶æ€è¾ƒå¤šï¼ŒViewModelçš„æ„å»ºå’Œç»´æŠ¤çš„æˆæœ¬éƒ½ä¼šæ¯”è¾ƒé«˜ã€‚</li>
<li>æ•°æ®ç»‘å®šçš„å£°æ˜æ˜¯æŒ‡ä»¤å¼åœ°å†™åœ¨Viewçš„æ¨¡ç‰ˆå½“ä¸­çš„ï¼Œè¿™äº›å†…å®¹æ˜¯æ²¡åŠæ³•å»æ‰“æ–­ç‚¹debugçš„ã€‚</li>
</ul>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä¸‰è€…ï¼Œéƒ½æ˜¯åè€…è§£å†³å‰è€…é—ç•™çš„é—®é¢˜ï¼Œä½†æ¯ä¸ªå­˜åœ¨å¿…æœ‰å…¶çš„ç†ç”±ã€‚æ¯ç§æ¨¡å¼å¹¶ä¸èƒ½å› ä¸ºç”¨è€Œç”¨ï¼Œè€Œæ˜¯æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚æ¥å®šåˆ¶ã€‚</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>CSSç»å…¸é¢è¯•æ¡ˆä¾‹è¯¦è§£</title>
    <url>/2019/03/28/CSS%E7%BB%8F%E5%85%B8%E9%9D%A2%E8%AF%95%E6%A1%88%E4%BE%8B%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="åŒ…å«å—"><a href="#åŒ…å«å—" class="headerlink" title="åŒ…å«å—"></a>åŒ…å«å—</h1><p>ä¸€ä¸ªå…ƒç´ çš„å°ºå¯¸å’Œä½ç½®ç»å¸¸å—å…¶åŒ…å«å—çš„å½±å“ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒåŒ…å«å—å°±æ˜¯è¿™ä¸ªå…ƒç´ æœ€è¿‘çš„ç¥–å…ˆå…ƒç´ çš„å†…å®¹å»ï¼Œä½†æ˜¯ä¹Ÿä¸æ˜¯æ€»æ˜¯è¿™æ ·çš„ã€‚<br><a id="more"></a></p>
<p>å½“ä¸€ä¸ªå®¢æˆ·ç«¯ä»£ç†ï¼ˆæ¯”å¦‚è¯´æµè§ˆå™¨ï¼‰å±•ç¤ºä¸€ä¸ªæ–‡æ¡£æ—¶ï¼Œå¯¹æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒéƒ½äº§ç”Ÿäº†ä¸€ä¸ªç›’å­ã€‚æ¯ä¸€ä¸ªç›’å­éƒ½è¢«åˆ’åˆ†ä¸ºå››ä¸ªåŒºåŸŸã€‚</p>
<ul>
<li>å†…å®¹åŒº</li>
<li>å†…è¾¹è·åŒº</li>
<li>è¾¹æ¡†åŒº</li>
<li>å¤–è¾¹è·åŒº<br><img src="boxdim.png" alt></li>
</ul>
<p>å¾ˆå¤šè¢«è¯¯å¯¼çš„è§‚å¿µï¼šä¸€ä¸ªå…ƒç´ çš„åŒ…å«å—å°±æ˜¯ä»–çš„çˆ¶å…ƒç´ çš„å†…å®¹åŒºï¼Œä½†å¹¶éæ˜¯è¿™æ ·çš„ã€‚</p>
<h2 id="åŒ…å«å—æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"><a href="#åŒ…å«å—æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ" class="headerlink" title="åŒ…å«å—æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"></a>åŒ…å«å—æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</h2><p>å…ƒç´ çš„å°ºå¯¸åŠä½ç½®ï¼Œå¸¸å¸¸ä¼šå—å®ƒçš„åŒ…å«å—æ‰€å½±å“ã€‚å¯¹äºä¸€äº›å±æ€§ï¼Œä¾‹å¦‚ width, height, padding, marginï¼Œç»å¯¹å®šä½å…ƒç´ çš„åç§»å€¼ ï¼ˆæ¯”å¦‚ position è¢«è®¾ç½®ä¸º absolute æˆ– fixedï¼‰ï¼Œå½“æˆ‘ä»¬å¯¹å…¶èµ‹äºˆç™¾åˆ†æ¯”å€¼æ—¶ï¼Œè¿™äº›å€¼çš„è®¡ç®—å€¼ï¼Œå°±æ˜¯é€šè¿‡å…ƒç´ çš„åŒ…å«å—è®¡ç®—å¾—æ¥ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯åŒ…å«å—"><a href="#ä»€ä¹ˆæ˜¯åŒ…å«å—" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒ…å«å—"></a>ä»€ä¹ˆæ˜¯åŒ…å«å—</h2><p>æœ‰è¿™ä¹ˆå¤§çš„å½±å“ï¼Œé‚£ä¹ˆåŒ…å«å—åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ<br>å¦‚æœå¯¹äºæµ®åŠ¨å…ƒç´ ï¼Œå…¶åŒ…å«å—å®šä¹‰ä¸ºæœ€è¿‘çš„å—çº§ç¥–å…ˆå…ƒç´ ã€‚ä½†æ˜¯å¯¹äºå®šä½çš„å…ƒç´ åˆ™è¡Œä¸ºç›¸å¯¹å¤æ‚äº†ã€‚</p>
<ul>
<li><p>â€œæ ¹å…ƒç´ â€çš„åŒ…å«å—ï¼ˆä¹Ÿè¢«ç§°ä¸ºåˆå§‹åŒ…å«å—ï¼‰ç”±ç”¨æˆ·ä»£ç†å»ºç«‹ã€‚åœ¨HTMLä¸­ï¼Œæ ¹å…ƒç´ å°±æ˜¯htmlå…ƒç´ ã€‚ä¸è¿‡æœ‰äº›æµè§ˆå™¨ä¼šä½¿ç”¨bodyä½œä¸ºæ ¹å…ƒç´ ã€‚åœ¨å¤§å¤šæ•°æµè§ˆå™¨ä¸­ï¼Œåˆå§‹åŒ…å«å—æ˜¯ä¸€ä¸ªè§†çª—å¤§å°çš„çŸ©å½¢ã€‚<del>ä½†ä¸ä»£è¡¨å°±æ˜¯è§†å£ã€‚</del></p>
<blockquote>
<p>åœ¨ç”µè„‘å›¾å½¢å­¦é‡Œé¢ï¼Œè§†å£ä»£è¡¨äº†ä¸€ä¸ªå¯çœ‹è§çš„å¤šè¾¹å½¢åŒºåŸŸï¼ˆé€šå¸¸æ¥è¯´æ˜¯çŸ©å½¢ï¼‰ã€‚åœ¨æµè§ˆå™¨èŒƒç•´é‡Œï¼Œå®ƒä»£è¡¨çš„æ˜¯æµè§ˆå™¨ä¸­ç½‘ç«™å¯è§å†…å®¹çš„éƒ¨åˆ†ã€‚</p>
</blockquote>
</li>
<li><p>å¯¹äºä¸€ä¸ªéæ ¹å…ƒç´ ï¼Œå¦‚æœå…¶<code>position</code>å€¼æ˜¯<code>relative</code>æˆ–<code>static</code>ï¼ŒåŒ…å«å—åˆ™ç”±æœ€è¿‘çš„å—çº§æ¡†ã€è¡¨å•å…ƒæ ¼æˆ–è¡Œå†…å—ç¥–å…ˆæ¡†çš„å†…å®¹è¾¹ç•Œæ„æˆã€‚</p>
<blockquote>
<p>å½“æ—¶ç½‘é¡µä¸­åŸºæœ¬ä¸ä¼šä½¿ç”¨è¡¨å•å…ƒæ ¼ã€è¡Œå†…å—æ¥ä½œä¸ºé¡µé¢çš„åŸºæœ¬å¸ƒå±€ã€‚</p>
</blockquote>
</li>
<li><p>å¯¹äºä¸€ä¸ªéæ ¹å…ƒç´ ï¼Œå¦‚æœå…¶<code>position</code>å€¼æ˜¯<code>absolute</code>ï¼ŒåŒ…å«å—è®¾ç½®ä¸ºæœ€è¿‘çš„<code>position</code>å€¼ä¸æ˜¯<code>static</code>çš„ç¥–å…ˆå…ƒç´ ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼‰ã€‚</p>
<ul>
<li>å¦‚æœè¿™ä¸ªç¥–å…ˆå…ƒç´ æ˜¯å—çº§å…ƒç´ ï¼ŒåŒ…å«å—åˆ™è®¾ç½®ä¸ºè¯¥å…ƒç´ çš„å†…è¾¹è·è¾¹ç•Œï¼Œæ¢å¥è¯è¯´å°±æ˜¯ç”±è¾¹æ¡†ç•Œå®šçš„åŒºåŸŸã€‚</li>
<li>å¦‚æœè¿™ä¸ªç¥–å…ˆå…ƒç´ æ˜¯è¡Œå†…å…ƒç´ ï¼ŒåŒ…å«å—åˆ™è®¾ç½®ä¸ºè¯¥ç¥–å…ˆå…ƒç´ çš„å†…å®¹è¾¹ç•Œã€‚åœ¨ä»å·¦å‘å³çš„è¯­è¨€ä¸­ï¼ŒåŒ…å«å—çš„ä¸Šè¾¹ç•Œå’Œå·¦è¾¹ç•Œæ˜¯è¯¥ç¥–å…ˆå…ƒç´ ä¸­ç¬¬ä¸€ä¸ªæ¡†å†…å®¹åŒºçš„ä¸Šè¾¹ç•Œå’Œå·¦è¾¹ç•Œï¼ŒåŒ…å«å—çš„ä¸‹è¾¹ç•Œå’Œå³è¾¹ç•Œæ˜¯æœ€åä¸€ä¸ªæ¡†å†…å®¹åŒºçš„ä¸‹è¾¹ç•Œå’Œå³è¾¹ç•Œã€‚è€Œä»å³å‘å·¦è¯»çš„è¯­è¨€ä¸­ï¼ŒåŒ…å«å—çš„å³è¾¹ç•Œå¯¹åº”äºç¬¬ä¸€ä¸ªæ¡†çš„å³å†…å®¹è¾¹ç•Œï¼ŒåŒ…å«å—çš„å·¦è¾¹ç•Œåˆ™å–è‡ªæœ€åä¸€ä¸ªæ¡†çš„åšå†…å®¹è¾¹ç•Œï¼Œä¸Šä¸‹è¾¹ç•Œä¹Ÿæ˜¯ä¸€æ ·ã€‚</li>
<li>å¦‚æœæ²¡æœ‰ç¥–å…ˆï¼Œå…ƒç´ çš„åŒ…å«å—å®šä¹‰ä¸ºåˆå§‹åŒ…å«å—ã€‚</li>
</ul>
</li>
</ul>
<p><strong>çœ‹ä¸€ä¸‹æ¡ˆä¾‹ï¼Œå¯¹äºåŒ…å«å—çš„å½±å“</strong></p>
<h3 id="åˆå§‹åŒ…å«å—"><a href="#åˆå§‹åŒ…å«å—" class="headerlink" title="åˆå§‹åŒ…å«å—"></a>åˆå§‹åŒ…å«å—</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line">        html &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line"><span class="css">            <span class="comment">/*margin: 30px;*/</span></span></span><br><span class="line">            border: 1px red solid;</span><br><span class="line">        &#125;</span><br><span class="line">        body &#123;</span><br><span class="line"><span class="css">            <span class="comment">/*margin: 30px;*/</span></span></span><br><span class="line">            border: 1px pink solid;</span><br><span class="line">            height: 90%;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="æ¡ˆä¾‹ä¸€"><a href="#æ¡ˆä¾‹ä¸€" class="headerlink" title="æ¡ˆä¾‹ä¸€"></a>æ¡ˆä¾‹ä¸€</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Page Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#wrap</span> &#123;</span></span><br><span class="line">            background-color: beige;</span><br><span class="line">            width: 400px;</span><br><span class="line">            height: 800px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line">            background-color: pink;</span><br><span class="line"><span class="css">            <span class="comment">/* 200px */</span></span></span><br><span class="line">            width: 50%;  </span><br><span class="line"><span class="css">            <span class="comment">/* 200px */</span></span></span><br><span class="line">            height: 50%;</span><br><span class="line"><span class="css">            <span class="comment">/* 40px */</span></span></span><br><span class="line">            margin: 10%;</span><br><span class="line"><span class="css">            <span class="comment">/* 40px */</span></span></span><br><span class="line">            padding: 10%;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>contentæ ‡ç­¾ä¸ºé™æ€å®šä½ï¼Œåˆ™wrapæ ‡ç­¾ä¸ºä»–çš„åŒ…å«å—ï¼Œæ‰€ä»¥contentæ ‡ç­¾çš„é«˜å’Œå®½çš„ç™¾åˆ†æ¯”å€¼æœ‰wrapåŒ…å«å—çš„é«˜å’Œå®½æ¥å†³å®šï¼Œmarginå’Œpaddingçš„ç™¾åˆ†æ¯”å€¼åˆ™ç”±wrapåŒ…å«å—çš„å®½æ¥å†³å®šã€‚</p>
<h3 id="æ¡ˆä¾‹äºŒ"><a href="#æ¡ˆä¾‹äºŒ" class="headerlink" title="æ¡ˆä¾‹äºŒ"></a>æ¡ˆä¾‹äºŒ</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Page Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#wrap</span> &#123;</span></span><br><span class="line">            background-color: yellow;</span><br><span class="line">            display: inline;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line">            background-color: pink;</span><br><span class="line"><span class="css">            <span class="comment">/* 200px */</span></span></span><br><span class="line">            width: 50%;  </span><br><span class="line">            height: 200px;</span><br><span class="line"><span class="css">            <span class="comment">/* 40px */</span></span></span><br><span class="line">            margin: 10%;</span><br><span class="line"><span class="css">            <span class="comment">/* 40px */</span></span></span><br><span class="line">            padding: 10%;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸æ¡ˆä¾‹1ç›¸ä¼¼çš„ç»“æ„ï¼Œä½†æ˜¯wrapå…ƒç´ å˜æˆäº†å†…è”å…ƒç´ ï¼Œåˆ™wrapä¸æ˜¯contentçš„åŒ…å«å—ï¼Œæ²¡æœ‰ç¥–å…ˆå…ƒç´ èƒ½å¤Ÿæˆä¸ºcontentçš„åŒ…å«å—ï¼Œåˆ™contentçš„åŒ…å«å—ä¸ºåˆå§‹åŒ…å«å—ã€‚æ‰€ä»¥contentçš„å®½å’Œé«˜çš„ç™¾åˆ†æ¯”å€¼å°†ä¸å†ç”±wrapå…ƒç´ å†³å®šã€‚</p>
<h3 id="æ¡ˆä¾‹ä¸‰"><a href="#æ¡ˆä¾‹ä¸‰" class="headerlink" title="æ¡ˆä¾‹ä¸‰"></a>æ¡ˆä¾‹ä¸‰</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Page Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#wrap</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            left: 0px;</span><br><span class="line">            top: 0px;</span><br><span class="line">            background-color: yellow;</span><br><span class="line">            width: 500px;</span><br><span class="line">            height: 500px;</span><br><span class="line">            padding: 50px 50px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line"><span class="css">            <span class="comment">/* 300px */</span></span></span><br><span class="line">            width: 50%; </span><br><span class="line"><span class="css">            <span class="comment">/* 150px */</span></span></span><br><span class="line">            height: 25%;</span><br><span class="line"><span class="css">            <span class="comment">/* 60px */</span></span></span><br><span class="line">            padding: 10%;</span><br><span class="line"><span class="css">            <span class="comment">/* 60px */</span></span></span><br><span class="line">            margin: 10%;</span><br><span class="line">            background-color: pink;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¸æ¡ˆä¾‹1ç›¸ä¼¼çš„ç»“æ„ï¼Œwrapå’Œcontentå…ƒç´ éƒ½å¼€å¯äº†ç»å¯¹å®šä½ï¼Œé‚£ä¹ˆwrapå…ƒç´ åˆ™ä¸ºcontentå…ƒç´ çš„åŒ…å«å—ï¼Œæ‰€ä»¥contentçš„ç™¾åˆ†æ¯”å€¼æœ‰wrapå…ƒç´ æ¥å†³å®šï¼Œä½†æ˜¯æ³¨æ„wrapçš„ç›’æ¨¡å‹æœ‰paddingå€¼ï¼Œè®¡ç®—æ—¶éœ€è¦åŠ ä¸Šã€‚</p>
<blockquote>
<p>å¦‚æœåŒ…å«å—çš„ box-sizing å€¼è®¾ç½®ä¸º border-box ï¼Œå°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚</p>
</blockquote>
<h3 id="æ¡ˆä¾‹å››"><a href="#æ¡ˆä¾‹å››" class="headerlink" title="æ¡ˆä¾‹å››"></a>æ¡ˆä¾‹å››</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Page Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#wrap</span> &#123;</span></span><br><span class="line">            width: 400px;</span><br><span class="line">            height: 300px;</span><br><span class="line">            margin: 50px;</span><br><span class="line">            padding: 30px;</span><br><span class="line">            background-color: yellow;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line">            position: fixed;</span><br><span class="line">            left: 0;</span><br><span class="line">            top: 0;</span><br><span class="line"><span class="css">            <span class="comment">/* 50% vw */</span></span></span><br><span class="line">            width: 50%;</span><br><span class="line"><span class="css">            <span class="comment">/* 50% scroll h  */</span></span></span><br><span class="line">            height: 50%;</span><br><span class="line"><span class="css">            <span class="comment">/* 10% vw */</span></span></span><br><span class="line">            margin: 10%;</span><br><span class="line"><span class="css">            <span class="comment">/* 10% vw */</span></span></span><br><span class="line">            padding: 10%;</span><br><span class="line">            background-color: pink;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>contentå…ƒç´ çš„åŒ…å«å—çš„å®šä½ä¸º<code>fixed</code>ï¼Œæ‰€ä»¥ä»–çš„åŒ…å«å—å³ä¸ºåˆå§‹åŒ…å«å—ï¼ˆå±å¹•ä¸Šï¼Œä¹Ÿå³æ˜¯viewportï¼‰,contentå…ƒç´ åˆ™ä¼šéšç€æµè§ˆå™¨çª—å£çš„å¤§å°çš„å˜åŒ–è€Œå˜åŒ–ã€‚</p>
<h3 id="æ¡ˆä¾‹äº”"><a href="#æ¡ˆä¾‹äº”" class="headerlink" title="æ¡ˆä¾‹äº”"></a>æ¡ˆä¾‹äº”</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Page Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line">            background: beige;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        section &#123;</span><br><span class="line">            transform: rotate(0deg);</span><br><span class="line">            width: 400px;</span><br><span class="line">            height: 160px;</span><br><span class="line">            background: lightgray;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        p &#123;</span><br><span class="line">            position: absolute;</span><br><span class="line">            left: 80px;</span><br><span class="line">            top: 30px;</span><br><span class="line">            width: 50%;</span><br><span class="line"><span class="css">            <span class="comment">/* == 200px */</span></span></span><br><span class="line">            height: 25%;</span><br><span class="line"><span class="css">            <span class="comment">/* == 40px */</span></span></span><br><span class="line">            margin: 5%;</span><br><span class="line"><span class="css">            <span class="comment">/* == 20px */</span></span></span><br><span class="line">            padding: 5%;</span><br><span class="line"><span class="css">            <span class="comment">/* == 20px */</span></span></span><br><span class="line">            background: cyan;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a paragraph!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒP å…ƒç´ çš„ position ä¸º absoluteï¼Œæ‰€ä»¥å®ƒçš„åŒ…å«å—æ˜¯ <section>ï¼Œä¹Ÿå°±æ˜¯è·ç¦»å®ƒæœ€è¿‘çš„ä¸€ä¸ª transform å€¼ä¸ä¸º none çš„çˆ¶å…ƒç´ ã€‚</section></p>
<h1 id="é»˜è®¤å€¼"><a href="#é»˜è®¤å€¼" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h1><p>leftã€topã€rightã€bottomã€widthã€heighté»˜è®¤å€¼ä¸ºautoã€‚<br>marginã€paddingé»˜è®¤å€¼ä¸º0ã€‚</p>
<h1 id="æµ®åŠ¨å…ƒç´ å±‚çº§"><a href="#æµ®åŠ¨å…ƒç´ å±‚çº§" class="headerlink" title="æµ®åŠ¨å…ƒç´ å±‚çº§"></a>æµ®åŠ¨å…ƒç´ å±‚çº§</h1><p>çœ‹ä¸€ä¸ªæ¡ˆä¾‹<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        div &#123;</span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#up</span> &#123;</span></span><br><span class="line">            background-color: yellow;</span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#down</span> &#123;</span></span><br><span class="line">            background-color: pink;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"up"</span>&gt;</span>upupup<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"down"</span>&gt;</span>downdowndown<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>åŸæ¥<code>up</code>idçš„å…ƒç´ ä¸å¼€å¯æµ®åŠ¨çš„æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªå—çº§å…ƒç´ ä¸Šä¸‹æ’åˆ—ï¼Œä½†æ˜¯å¼€å¯äº†<code>up</code>idçš„å…ƒç´ çš„æµ®åŠ¨åï¼Œ<br><code>down</code>idçš„å…ƒç´ ç”±äºæ”¶åˆ°äº†<code>up</code>å…ƒç´ çš„å½±å“é¡¶äº†ä¸Šå»ï¼Œä½†æ˜¯å‘ç°æ–‡å­—å¹¶æ²¡æœ‰è·Ÿç€ä¸Šå»ã€‚<br>è§£é‡Šï¼š<br><strong>åœ¨æµ®åŠ¨çš„æƒ…å†µä¸‹ï¼Œå…ƒç´ å±‚çº§åªæå‡åŠå±‚ï¼Œå…ƒç´ åˆ†ä¸¤å±‚ï¼Œä¸€å±‚ä¸ç›’æ¨¡å‹ç›¸å…³ï¼Œä¸€å±‚ä¸æ–‡å­—ç›¸å…³ã€‚</strong></p>
<h1 id="è´Ÿmarginè¯¦è§£"><a href="#è´Ÿmarginè¯¦è§£" class="headerlink" title="è´Ÿmarginè¯¦è§£"></a>è´Ÿmarginè¯¦è§£</h1><p><a href="https://www.w3cplus.com/css/the-definitive-guide-to-using-negative-margins.html" target="_blank" rel="noopener">è´Ÿmarginç”¨æ³•æƒå¨æŒ‡å—</a></p>
<p>ä½•ä¸ºè´Ÿmargin</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">#content &#123;margin-left:-100px;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>è´Ÿmarginæ˜¯æ ‡å‡†çš„CSSï¼Œåœ¨w3cä¸­ï¼Œmarginå±æ€§å€¼æ˜¯å…è®¸å‡ºç°è´Ÿå€¼çš„</li>
<li>è´Ÿmarginä¸æ˜¯ä¸€ç§hackæ–¹æ³•</li>
<li>ä¸è„±ç¦»æ–‡æ¡£æµï¼ˆåœ¨ä¸ä½¿ç”¨æµ®åŠ¨çš„æƒ…å†µä¸‹ï¼‰</li>
<li>å®Œå…¨å…¼å®¹</li>
<li>æµ®åŠ¨ä¼šå½±å“è´Ÿmarginçš„ä½¿ç”¨</li>
<li><del>dreamveaverä¸è§£æè´Ÿmarginï¼ˆå‰ç«¯å·¥ç¨‹å¸ˆä¸æ¨èä½¿ç”¨ï¼Œä¹Ÿä¸åº”è¯¥åœ¨è®¾è®¡è§†å›¾ä¸­æ£€æŸ¥ç½‘ç«™ï¼‰</del></li>
</ul>
<p>**ä½œç”¨åœ¨staticå…ƒç´ ä¸Šçš„è´Ÿmarginå±æ€§å€¼<br><img src="negative-margin-1.jpg" alt><br>å½“staticå…ƒç´ æ²¡æœ‰è®¾å®šæˆæµ®åŠ¨çš„å…ƒç´ ï¼Œä¸Šå›¾ä¸­è¯´æ˜äº†è´Ÿmarginå¯¹staticå…ƒç´ çš„ä½œç”¨ã€‚</p>
<p>å½“staticå…ƒç´ çš„<code>margin-left/margin-right</code>è¢«èµ‹äºˆè´Ÿå€¼æ—¶ï¼Œå…ƒç´ å°†è¢«æ‹‰è¿›æŒ‡å®šæ–¹å‘ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#box1</span> &#123;<span class="attribute">margin-top </span>: -<span class="number">10px</span>;&#125;</span><br><span class="line"><span class="comment">/*å…ƒç´ å‘ä¸Šç§»åŠ¨10px*/</span></span><br></pre></td></tr></table></figure>
<p>å½“staticå…ƒç´ çš„<code>margin-bottom/margin-right</code>è¢«èµ‹äºˆè´Ÿå€¼æ—¶ï¼Œä¼šå°†åç»­çš„å…ƒç´ æ‹–æ‹‰è¿›æ¥ï¼Œè¦†ç›–åŸæ¥çš„å…ƒç´ ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#box1</span> &#123;<span class="attribute">margin-bottom </span>: -<span class="number">10px</span>;&#125;</span><br><span class="line"><span class="comment">/*box1åç»­çš„å…ƒç´ å°†å‘ä¸Šç§»åŠ¨10pxï¼Œbox1æœ¬èº«ä¸ä¼šç§»åŠ¨*/</span></span><br></pre></td></tr></table></figure>
<p><strong>ä½œç”¨åœ¨æµ®åŠ¨å…ƒç´ ä¸Šçš„è´Ÿmarginå±æ€§å€¼</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mydiv1"</span>&gt;</span>First<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mydiv2"</span>&gt;</span>Second<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* åº”ç”¨åœ¨ä¸æµ®åŠ¨ç›¸åæ–¹å‘çš„è´Ÿmargin */</span></span><br><span class="line"><span class="selector-id">#mydiv1</span> &#123;<span class="attribute">float</span>:left; <span class="attribute">margin-right</span>:-<span class="number">100px</span>;&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœç»™ä¸€ä¸ªæµ®åŠ¨å…ƒç´ åŠ ä¸Šç›¸åæ–¹å‘çš„è´Ÿmarginï¼Œåˆ™ä¼šä½¿è¡Œé—´è·ä¸º0ä¸”å†…å®¹é‡å ã€‚è¿™å¯¹äºåˆ›å»º1åˆ—æ˜¯100%å®½åº¦è€Œå…¶ä»–åˆ—æ˜¯å›ºå®šå®½åº¦ï¼ˆæ¯”å¦‚100pxï¼‰çš„è‡ªé€‚åº”å¸ƒå±€æ¥è¯´æ˜¯éå¸¸æœ‰ç”¨çš„æ–¹æ³•ã€‚</p>
<p>è‹¥ä¸¤ä¸ªå…ƒç´ éƒ½ä¸ºæµ®åŠ¨ï¼Œä¸”#mydiv1çš„å…ƒç´ è®¾å®šmargin-rightä¸º20pxã€‚è¿™æ ·#mydiv2ä¼šè®¤ä¸º#mydiv1çš„å®½åº¦æ¯”åŸæ¥å®½åº¦ç¼©çŸ­äº†20pxï¼ˆå› æ­¤ä¼šå¯¼è‡´é‡å ï¼‰ã€‚ä½†æœ‰æ„æ€çš„æ˜¯ï¼Œ#mydiv1çš„å†…å®¹ä¸å—å½±å“ï¼Œä¿æŒåŸæœ‰çš„å®½åº¦ã€‚</p>
<p>å¦‚æœè´Ÿmarginç­‰äºå®é™…å®½åº¦ï¼Œåˆ™å…ƒç´ ä¼šè¢«å®Œå…¨è¦†ç›–ã€‚è¿™æ˜¯å› ä¸ºå…ƒç´ çš„å®Œå…¨å®½åº¦ç­‰äºmarginï¼Œpaddingï¼Œborderï¼Œwidthç›¸åŠ è€Œæˆï¼Œæ‰€ä»¥å¦‚æœè´Ÿmarginç­‰äºä½™ä¸‹ä¸‰è€…çš„å’Œï¼Œé‚£å…ƒç´ çš„å®é™…å®½åº¦ä¹Ÿå°±å˜æˆäº†0pxã€‚</p>
<h1 id="åœ£æ¯å¸ƒå±€"><a href="#åœ£æ¯å¸ƒå±€" class="headerlink" title="åœ£æ¯å¸ƒå±€"></a>åœ£æ¯å¸ƒå±€</h1><p>çœ‹åœ£æ¯å¸ƒå±€å‰ï¼Œå…ˆçœ‹çœ‹å¦‚ä½•å®ç°ä¸‰åˆ—å¸ƒå±€</p>
<p><strong>ä¸‰åˆ—å¸ƒå±€éœ€æ±‚ï¼š</strong></p>
<ul>
<li>ä¸¤è¾¹å›ºå®šï¼Œä¸­é—´è‡ªé€‚åº”</li>
<li>å½“ä¸­åˆ—è¦å®Œæ•´æ˜¾ç¤º</li>
<li>å½“ä¸­åˆ—ä¼˜å…ˆåŠ è½½</li>
</ul>
<h2 id="å®šä½å®ç°"><a href="#å®šä½å®ç°" class="headerlink" title="å®šä½å®ç°"></a>å®šä½å®ç°</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Page Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line"><span class="css">            <span class="comment">/* ä¸¤å€çš„left+right */</span></span></span><br><span class="line">            min-width: 600px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line">            position: relative;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-id">#left</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-id">#right</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 400px;</span><br><span class="line">            background-color: yellow;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#left</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            left: 0;</span><br><span class="line">            top: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#right</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            right: 0;</span><br><span class="line">            top: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#middle</span> &#123;</span></span><br><span class="line">            height: 400px;</span><br><span class="line">            padding: 0 200px;</span><br><span class="line">            background-color: pink;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"middle"</span>&gt;</span>middle<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯é¡µé¢çš„æ•´ä½“å¸ƒå±€å¾ˆå°‘ä¼šä½¿ç”¨å®šä½æ¥å®ç°ï¼Œè€Œä¸”å®šä½éœ€è¦ä¸€ä¸ªå®¹å™¨ï¼Œå®¹å™¨çš„å®šä½å¿…é¡»æ˜¯ç›¸å¯¹å®šä½ï¼Œå®šä½ä¼šæå‡å…ƒç´ å±‚çº§ï¼Œè¿™æ ·å¸ƒå±€ä¼šç›¸å¯¹å¤æ‚ã€‚</p>
<h2 id="æµ®åŠ¨å®ç°"><a href="#æµ®åŠ¨å®ç°" class="headerlink" title="æµ®åŠ¨å®ç°"></a>æµ®åŠ¨å®ç°</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Page Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line"><span class="css">            <span class="comment">/* ä¸¤å€çš„left+right */</span></span></span><br><span class="line">            min-width: 600px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#left</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-id">#right</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 400px;</span><br><span class="line">            background-color: yellow;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#left</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#right</span> &#123;</span></span><br><span class="line">            float: right;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#middle</span> &#123;</span></span><br><span class="line">            height: 400px;</span><br><span class="line">            background-color: pink;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"middle"</span>&gt;</span>middle<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæµ®åŠ¨æ¥å®ç°ä¸‰åˆ—å¸ƒå±€æ¯”ä½¿ç”¨å®šä½æ¥å®ç°ä¸‰åˆ—å¸ƒå±€æ›´åŠ æ–¹ä¾¿ã€‚ä½†æ˜¯ä¹Ÿé€ æˆä¸€ä¸ªé—®é¢˜ï¼Œä¸­é—´åˆ—æŒ‰ç…§æ–‡æ¡£çš„åŠ è½½é¡ºåºï¼Œæ— æ³•åšåˆ°ä¸­é—´åˆ—ä¼˜å…ˆåŠ è½½ï¼Œæ‰€ä»¥åœ£æ¯å¸ƒå±€å°±å‡ºç°äº†ã€‚</p>
<h2 id="å®ç°åœ£æ¯å¸ƒå±€"><a href="#å®ç°åœ£æ¯å¸ƒå±€" class="headerlink" title="å®ç°åœ£æ¯å¸ƒå±€"></a>å®ç°åœ£æ¯å¸ƒå±€</h2><p>å®Œæ•´å®ç°ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Page Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#header</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-id">#footer</span> &#123;</span></span><br><span class="line">            background-color: gray;</span><br><span class="line">            text-align: center;</span><br><span class="line">            line-height: 50px;</span><br><span class="line">            height: 50px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#left</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-id">#right</span> &#123;</span></span><br><span class="line">            background-color: yellow;</span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#middle</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/* 1ã€ä¸­é—´è‡ªé€‚åº”ï¼Œç»™äºˆå®½åº¦100%ï¼Œmiddleçš„åŒ…å«å—ä¸ºcontainer */</span></span></span><br><span class="line">            width: 100%;</span><br><span class="line">            background-color: pink;</span><br><span class="line">            height: 200px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#middle</span>, <span class="selector-id">#left</span>, <span class="selector-id">#right</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/* 2ã€ä¸‰ä¸ªå—è®¾ç½®æµ®åŠ¨ï¼Œä¸”middleå®½åº¦ä¸º100%ï¼Œåˆ™leftï¼Œå’Œrightæ¢è¡Œæ˜¾ç¤º */</span></span></span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#left</span> &#123;</span></span><br><span class="line">            /* 3ã€è§£å†³leftï¼Œè®¾ç½®margin-leftä¸º-100%ï¼Œå› ä¸ºleftçš„åŒ…å«å—å’Œmiddleçš„åŒ…å«å—æ˜¯åŒä¸€ä¸ªï¼Œ</span><br><span class="line">            åˆ™-100%çš„å€¼ç­‰äºmiddleçš„å®½åº¦ï¼Œåˆ™leftè¢«æ‹‰æˆä¸middleåŒè¡Œæ˜¾ç¤ºä¸”é middleå·¦è¾¹å¯¹é½ */</span><br><span class="line">            margin-left: -100%;</span><br><span class="line"><span class="css">            <span class="comment">/* 6ã€å°†è‡ªå·±å¾€å¤–æ‹‰è‡ªèº«çš„å®½åº¦å€¼ */</span></span></span><br><span class="line">            position: relative;</span><br><span class="line">            left: -200px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#right</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/* 4ã€åŒç†ï¼Œåªéœ€è¦è®¾ç½®è´Ÿå€¼ä¸ºä¸è‡ªèº«å®½åº¦ç›¸åŒï¼Œåˆ™è¢«æ‹‰ä¸Šä¸middleåŒè¡Œæ˜¾ç¤ºï¼Œä¸”å³è¾¹ä¸middleå³è¾¹å¯¹å…¶ */</span></span></span><br><span class="line">            margin-left: -200px;</span><br><span class="line"><span class="css">            <span class="comment">/* 7ã€å°†è‡ªå·±å¾€å¤–æ‹‰è‡ªèº«çš„å®½åº¦å€¼ */</span></span></span><br><span class="line">            position: relative;</span><br><span class="line">            right: -200px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#middle</span> &#123;</span></span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#container</span> &#123;</span></span><br><span class="line">            /* 5ã€å®Œæˆåï¼Œä½†æ˜¯middleå®½åº¦è¿˜æ˜¯æ•´ä¸ªçš„100%ï¼Œleftä¸rightå…¶å®åªæ˜¯ç›–ç€å®ƒä»¬ï¼Œå¹¶æ²¡æœ‰æŠŠå†…å®¹è®¾ç½®åˆ°ä¸­é—´ï¼Œä½†æ˜¯è¿™é‡Œä¸èƒ½ç®€å•çš„è®¾ç½®paddingå€¼ï¼Œ</span><br><span class="line">            å› ä¸ºä¸­é—´çš„å®½åº¦æ˜¯100&amp;è®¾å®šæ­»çš„ï¼Œè€Œä¸”leftçš„marginä¹Ÿä¼šéšä¹‹å˜åŒ–ï¼Œ</span><br><span class="line">            æ‰€ä»¥è¦ç»™å®ƒä»¬ä¸‰ä¸ªçš„çˆ¶å…ƒç´ containerè®¾ç½®paddingå€¼ï¼Œç„¶åå†å°†leftå’Œrightå¾€å¤–æ‹‰ */</span><br><span class="line">            padding: 0 200px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="comment">/* 0ã€è§£å†³é«˜åº¦å¡Œé™· */</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span> &#123;</span></span><br><span class="line">            *zoom: 1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">            content: "";</span><br><span class="line">            display: block;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"header"</span>&gt;</span>header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"middle"</span>&gt;</span>middle<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"left"</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"right"</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"footer"</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ£æ¯å¸ƒå±€ç»“åˆäº†æµ®åŠ¨ã€å®šä½ç­‰æŠ€æœ¯ï¼Œä½†æœ€é‡è¦ä¸€ç‚¹æ˜¯ä½¿ç”¨äº†<code>è´Ÿmargin</code>çš„ç”¨æ³•ã€‚</p>
<h1 id="ä¼ªç­‰é«˜å¸ƒå±€"><a href="#ä¼ªç­‰é«˜å¸ƒå±€" class="headerlink" title="ä¼ªç­‰é«˜å¸ƒå±€"></a>ä¼ªç­‰é«˜å¸ƒå±€</h1><p>é€šå¸¸æˆ‘ä»¬ä¼šé‡åˆ°ä¸€äº›éœ€æ±‚ï¼Œè¦æ±‚ä¸¤åˆ—é«˜åº¦ç›¸åŒï¼Œä½†æ˜¯ä¸¤åˆ—å†…å®¹æ‰€æ’‘å¼€çš„é«˜åº¦ä¸ä¸€å®šç›¸åŒï¼Œä¼ªç­‰é«˜å¸ƒå±€å°±å‡ºç°äº†ã€‚</p>
<p>å®ç°ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line">            margin: 0 400px;</span><br><span class="line">            border: 1px black solid;</span><br><span class="line"><span class="css">            <span class="comment">/* çˆ¶å®¹å™¨è®¾ç½®å†…å®¹æº¢å‡ºæ˜¾ç¤º */</span></span></span><br><span class="line">            overflow: hidden;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">            width: 400px;</span><br><span class="line">            background-color: pink;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">            width: 400px;</span><br><span class="line">            background-color: gray;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.left</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.right</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/* è®¾ç½®paddingï¼Œè®©å†…å®¹æ’‘å¼€ä¸€å®šé«˜åº¦ */</span></span></span><br><span class="line">            padding-bottom: 10000px;</span><br><span class="line"><span class="css">            <span class="comment">/*å†…å®¹è¾¹ç•Œåœ¨æ”¶ç¼©å›æ¥ã€‚*/</span></span></span><br><span class="line">            margin-bottom: -10000px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="comment">/* è§£å†³é«˜åº¦å¡Œé™· */</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span> &#123;</span></span><br><span class="line">            *zoom: 1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">            content: "";</span><br><span class="line">            display: block;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>left<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>left<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>left<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>left<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>left<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>left<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>left<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>left<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>left<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>left<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>left<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>left<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>right<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åŒæ ·å¤šåˆ—ä¹Ÿæ˜¯å¦‚æ­¤è¿ç”¨ï¼Œä½†æ˜¯åŸç†è¿˜æ˜¯åˆ©ç”¨äº†<code>è´Ÿmargin</code>çš„ç‰¹æ€§æ¥å®ç°ã€‚</p>
<h1 id="åŒé£ç¿¼å¸ƒå±€"><a href="#åŒé£ç¿¼å¸ƒå±€" class="headerlink" title="åŒé£ç¿¼å¸ƒå±€"></a>åŒé£ç¿¼å¸ƒå±€</h1><p>å› ä¸ºåœ£æ¯å¸ƒå±€å¤–éƒ¨æ•´ä½“å¸ƒå±€è¿˜æ˜¯ä¼šä½¿ç”¨åˆ°å®šä½ï¼Œè¿™æ ·è¿˜æ˜¯ä¼šå¯¹é¡µé¢å¸ƒå±€äº§ç”Ÿæ¯”è¾ƒå¤§çš„å½±å“ï¼Œé‚£ä¹ˆåŒé£ç¿¼å¸ƒå±€å°±å‡ºç°äº†ï¼Œå¯¹æ¯”åœ£æ¯ï¼Œä»…ä»…åªæ˜¯åŠ äº†ä¸€ä¸ªæ ‡ç­¾æ¥æ­å»ºæ•´ä½“ç»“æ„ï¼Œä¸ä¼šä½¿ç”¨åˆ°å®šä½è¿™äº›å…ƒç´ æ¥å½±å“åˆ°æ•´ä½“çš„å¸ƒå±€ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#header</span>,</span></span><br><span class="line"><span class="css">        <span class="selector-id">#footer</span> &#123;</span></span><br><span class="line">            background-color: yellow;</span><br><span class="line">            line-height: 50px;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#container</span> <span class="selector-class">.left</span>, <span class="selector-id">#container</span> <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">            background-color: pink;</span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#container</span> <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">            margin-left: -100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#container</span> <span class="selector-class">.right</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">            margin-left: -200px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#container</span> <span class="selector-class">.middle</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: aqua;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#container</span> <span class="selector-class">.middle</span> <span class="selector-class">.content</span> &#123;</span></span><br><span class="line">            padding: 0 200px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="comment">/* è§£å†³é«˜åº¦å¡Œé™· */</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span> &#123;</span></span><br><span class="line">            *zoom: 1;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">            content: "";</span><br><span class="line">            display: block;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"header"</span>&gt;</span>header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å¯¹æ¯”åœ£æ¯å¸ƒå±€ï¼Œå°±æ˜¯åœ¨middleé‡Œå†åŠ ä¸€ä¸ªå…ƒç´ ç”¨æ¥åšå†…å®¹çš„å®¹å™¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¹å™¨å†è®¾ç½®paddingå°±ä¸ä¼šå½±å“åˆ°ä¸¤ä¾§å…ƒç´ äº† --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">                middle content</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span>right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"footer"</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="æ»šåŠ¨æ¡"><a href="#æ»šåŠ¨æ¡" class="headerlink" title="æ»šåŠ¨æ¡"></a>æ»šåŠ¨æ¡</h1><p>å…ˆçœ‹ä¸€æ®µä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        html &#123;</span><br><span class="line">            margin: 30px;</span><br><span class="line">            border: 1px black solid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line">            margin: 30px;</span><br><span class="line">            border: 1px black solid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            height: 5000px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>çœ‹çœ‹è¿™æ—¶å€™çš„æ»šåŠ¨æ¡ä½œç”¨ä¸è°èº«ä¸Šï¼Œä¸æ˜¯bodyï¼Œä¹Ÿä¸æ˜¯htmlï¼Œè€Œæ˜¯ä½œç”¨ä¸<code>æ–‡æ¡£</code>ä¸Šã€‚</p>
<p>å†çœ‹ä¸€ä¸ªæ¡ˆä¾‹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        html &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line">            margin: 30px;</span><br><span class="line">            border: 1px black solid;</span><br><span class="line">            overflow: scroll;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line">            margin: 30px;</span><br><span class="line">            border: 1px black solid;</span><br><span class="line">            overflow: scroll;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            height: 5000px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>bodyå’Œhtmléƒ½æ·»åŠ äº†é«˜åº¦ä¸º100%çš„å±æ€§å€¼ï¼Œè€Œå®ƒä¿©çš„åŒ…å«å—ä¸ºåˆå§‹åŒ…å«å—ï¼Œæ‰€ä»¥å®ƒä»¬ä¸¤ä¸ªé«˜åº¦ä¸ºè§†å£çš„é«˜åº¦ã€‚è€Œä¸¤ä¸ªéƒ½æ·»åŠ äº†overflowä¸ºscrollæ—¶ï¼Œä¸ä»…æ–‡æ¡£å‡ºç°äº†æ»šåŠ¨æ¡ï¼Œè€Œä¸”bodyèº«ä¸Šä¹Ÿå‡ºç°äº†æ»šåŠ¨æ¡ã€‚</p>
<h1 id="é™æ­¢ç³»ç»Ÿé»˜è®¤æ»šåŠ¨æ¡"><a href="#é™æ­¢ç³»ç»Ÿé»˜è®¤æ»šåŠ¨æ¡" class="headerlink" title="é™æ­¢ç³»ç»Ÿé»˜è®¤æ»šåŠ¨æ¡"></a>é™æ­¢ç³»ç»Ÿé»˜è®¤æ»šåŠ¨æ¡</h1><p>çœ‹åˆ°ä¸Šé¢çš„ä¾‹å­åï¼Œå¦‚ä½•é™æ­¢æ‰ç³»ç»Ÿçš„é»˜è®¤æ»šåŠ¨æ¡ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        html,body &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">        &#125;</span><br><span class="line">        body &#123;</span><br><span class="line">            overflow: auto;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"height: 5000px;"</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="è§£å†³IE6ä¸‹fixedå›ºå®šå®šä½å¤±æ•ˆé—®é¢˜"><a href="#è§£å†³IE6ä¸‹fixedå›ºå®šå®šä½å¤±æ•ˆé—®é¢˜" class="headerlink" title="è§£å†³IE6ä¸‹fixedå›ºå®šå®šä½å¤±æ•ˆé—®é¢˜"></a>è§£å†³IE6ä¸‹fixedå›ºå®šå®šä½å¤±æ•ˆé—®é¢˜</h1><p>å®ç°ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="comment">/* éšè—ç³»ç»Ÿæ»šåŠ¨æ¡ */</span></span></span><br><span class="line">        html,</span><br><span class="line">        body &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body &#123;</span><br><span class="line">            overflow: scroll;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.test</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            left: 50px;</span><br><span class="line">            top: 50px;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background-color: pink;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"height: 5000px;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°testå…ƒç´ ä»…ä»…åªæ˜¯è®¾ç½®äº†ç»å¯¹å®šä½ï¼Œä½†æ˜¯ä½œç”¨åŸºæœ¬ç­‰åŒäºå›ºå®šå®šä½ã€‚<br><strong>è§£é‡Šï¼š</strong>å› ä¸ºè¿™é‡Œéšè—äº†ç³»ç»Ÿçš„é»˜è®¤æ»šåŠ¨æ¡ï¼Œbodyæ˜¾ç¤ºçš„æ»šåŠ¨æ¡å¹¶ä¸ä¼šç§»åŠ¨è§†å£ï¼Œåªæœ‰ç³»ç»Ÿçš„æ»šåŠ¨æ¡æ‰ä¼šç§»åŠ¨è§†å£ã€‚bodyçš„æ»šåŠ¨æ¡ä»…ä»…åªæ˜¯ç§»åŠ¨çš„bodyå†…çš„å…ƒç´ ã€‚è€Œtestå…ƒç´ çš„åŒ…å«å—æ˜¯è§†å£ï¼Œæ‰€ä»¥å°±ç®—æ»šåŠ¨æ¡æ€ä¹ˆç§»åŠ¨ï¼Œtestå…ƒç´ ä¹Ÿä¸ä¼šç§»åŠ¨ï¼Œè¿™å°±æ˜¯å¦ç±»è§£å†³fixedå®šä½å¤±æ•ˆçš„é—®é¢˜è§£å†³åŠæ³•ã€‚</p>
<h1 id="ç²˜è¿å¸ƒå±€"><a href="#ç²˜è¿å¸ƒå±€" class="headerlink" title="ç²˜è¿å¸ƒå±€"></a>ç²˜è¿å¸ƒå±€</h1><p>å¯èƒ½ä¼šé‡åˆ°ä¸€ç§éœ€æ±‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå†…å®¹<code>main</code></p>
<ul>
<li>å½“<code>main</code>çš„é«˜åº¦è¶³å¤Ÿé•¿çš„æ—¶å€™ï¼Œ<code>footer</code>åº”è¯¥ç´§è·Ÿåœ¨<code>main</code>å…ƒç´ åé¢</li>
<li>å½“<code>main</code>å…ƒç´ æ¯”è¾ƒçŸ­çš„æ—¶å€™ï¼ˆæ¯”å¦‚å°äºå±å¹•çš„é«˜åº¦ï¼‰ï¼Œæˆ‘ä»¬æœŸæœ›è¿™ä¸ª<code>footer</code>å…ƒç´ èƒ½å¤Ÿç²˜è¿åœ¨å±å¹•åº•éƒ¨</li>
</ul>
<p>å®ç°ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            margin: 0;</span><br><span class="line">            padding: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        body,</span><br><span class="line">        html &#123;</span><br><span class="line">            height: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#wrap</span> &#123;</span></span><br><span class="line">            background-color: yellow;</span><br><span class="line">            text-align: center;</span><br><span class="line">            min-height: 100%;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#wrap</span> <span class="selector-class">.main</span> &#123;</span></span><br><span class="line">            padding-bottom: 50px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#footer</span> &#123;</span></span><br><span class="line">            background-color: pink;</span><br><span class="line">            height: 50px;</span><br><span class="line">            line-height: 50px;</span><br><span class="line">            text-align: center;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="comment">/* å°†è‡ªå·±æ‹‰ä¸Šå»ä¸€ä¸ªè‡ªå·±çš„é«˜åº¦ */</span></span></span><br><span class="line">            margin-top: -50px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            main<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            main<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            main<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            main<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            main<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            main<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            main<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt;</span></span><br><span class="line"><span class="comment">            main&lt;br /&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¿…é¡»è¦æ”¾åœ¨wrapå¤–é¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"footer"</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†…å®¹å°‘çš„æ—¶å€™ï¼Œfooterç²˜åœ¨åº•éƒ¨ï¼Œå½“å†…å®¹è¿‡å¤šæ—¶æ»šåŠ¨å¹¶ç´§è·Ÿå†…å®¹ã€‚ä¹Ÿæ˜¯ç®€å•çš„<code>è´Ÿmargin</code>çš„è¿ç”¨ã€‚</p>
<h1 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context" target="_blank" rel="noopener">BFC</a></h1><p>ç†è§£BFCæ˜¯ä»€ä¹ˆå‰æˆ‘ä»¬å…ˆæ¥ç†è§£å¦å¤–ä¸¤ä¸ªæ¦‚å¿µï¼š<code>Box</code>å’Œ<code>FC</code>(å³formatting context)</p>
<h2 id="Box"><a href="#Box" class="headerlink" title="Box"></a>Box</h2><p>ä¸€ä¸ªé¡µé¢æ˜¯ç”±å¾ˆå¤šä¸ª<code>Box</code>ç»„æˆçš„ï¼Œå…ƒç´ çš„ç±»å‹å’Œ<code>display</code>å±æ€§å†³å®šäº†è¿™ä¸ª<code>Box</code>çš„ç±»å‹ã€‚ä¸åŒç±»å‹çš„<code>Box</code>ï¼Œä¼šå‚ä¸ä¸åŒçš„Formatting Contextã€‚</p>
<p><code>Block Level</code>çš„boxä¼šå‚ä¸å½¢æˆ<code>BFC</code>ï¼Œæ¯”å¦‚<code>display</code>å€¼ä¸º<code>block</code>ï¼Œ<code>list-item</code>ï¼Œ<code>table</code>çš„å…ƒç´ ã€‚</p>
<p><code>Inline Level</code>çš„boxä¼šå‚ä¸å½¢æˆ<code>IFC</code>ï¼Œæ¯”å¦‚<code>display</code>å€¼ä¸º<code>inline</code>ï¼Œ<code>inline-table</code>ï¼Œ<code>inline-block</code>çš„å…ƒç´ ã€‚</p>
<h2 id="FC-Formatting-Context"><a href="#FC-Formatting-Context" class="headerlink" title="FC(Formatting Context)"></a>FC(Formatting Context)</h2><p>å®ƒæ˜¯W3C CSS2.1è§„èŒƒä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå®šä¹‰çš„æ˜¯é¡µé¢ä¸­çš„ä¸€å—æ¸²æŸ“åŒºåŸŸï¼Œå¹¶ä¸”æœ‰ä¸€å¥—æ¸²æŸ“è§„åˆ™ï¼Œå®ƒ <strong>å†³å®šäº†å…¶å­å…ƒç´ å°†å¦‚ä½•å®šä½</strong>ï¼Œä»¥åŠå’Œ <strong>å…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨</strong>ã€‚</p>
<p>å¸¸è§çš„<code>Formatting Context</code>æœ‰ï¼š<code>Block Formatting Context</code>(BFC|å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)å’Œ<code>Inline Formatting Context</code>(IFC|è¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡)ã€‚</p>
<h2 id="IFCã€BFCå¸ƒå±€è§„åˆ™"><a href="#IFCã€BFCå¸ƒå±€è§„åˆ™" class="headerlink" title="IFCã€BFCå¸ƒå±€è§„åˆ™"></a>IFCã€BFCå¸ƒå±€è§„åˆ™</h2><h3 id="IFCå¸ƒå±€è§„åˆ™"><a href="#IFCå¸ƒå±€è§„åˆ™" class="headerlink" title="IFCå¸ƒå±€è§„åˆ™"></a>IFCå¸ƒå±€è§„åˆ™</h3><p>åœ¨è¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­ï¼Œæ¡†ï¼ˆboxesï¼‰ä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ°´å¹³æ’åˆ—ï¼Œèµ·ç‚¹æ˜¯åŒ…å«å—çš„é¡¶éƒ¨ã€‚æ°´å¹³æ–¹å‘ä¸Šçš„<code>margin</code>ï¼Œ<code>border</code>å’Œ<code>padding</code>åœ¨æ¡†ä¹‹é—´å¾—åˆ°ä¿ç•™ã€‚æ¡†åœ¨å‚ç›´æ–¹å‘ä¸Šå¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å¯¹é½ï¼šå®ƒä»¬çš„é¡¶éƒ¨æˆ–è€…åº•éƒ¨å¯¹å…¶ï¼Œæˆ–æ ¹æ®å…¶ä¸­æ–‡å­—çš„åŸºçº¿å¯¹å…¶ã€‚åŒ…å«é‚£äº›æ¡†çš„é•¿æ–¹å½¢åŒºåŸŸï¼Œä¼šå½¢æˆä¸€è¡Œï¼Œå«åšè¡Œæ¡†ã€‚</p>
<h3 id="BFCå¸ƒå±€è§„åˆ™ã€é‡è¦ã€‘"><a href="#BFCå¸ƒå±€è§„åˆ™ã€é‡è¦ã€‘" class="headerlink" title="BFCå¸ƒå±€è§„åˆ™ã€é‡è¦ã€‘"></a>BFCå¸ƒå±€è§„åˆ™ã€é‡è¦ã€‘</h3><ul>
<li>å†…éƒ¨çš„Boxä¼šåœ¨å‚ç›´æ–¹å‘ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ”¾ç½®ã€‚</li>
<li>Boxå‚ç›´æ–¹å‘çš„è·ç¦»ç”±<code>margin</code>å†³å®šã€‚å±äºåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›¸é‚»Boxçš„<code>margin</code>ä¼šå‘ç”Ÿé‡å </li>
<li>æ¯ä¸ªå…ƒç´ çš„å·¦å¤–è¾¹ç¼˜ï¼ˆmargin-leftï¼‰ï¼Œä¸åŒ…å«å—çš„å·¦è¾¹ï¼ˆ<code>contain box left</code>)ç›¸æ¥è§¦ï¼ˆå¯¹äºä»å·¦å¾€å³çš„æ ¼å¼åŒ–ï¼Œå¦åˆ™ç›¸åï¼‰ã€‚å³ä½¿å­˜åœ¨æµ®åŠ¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚é™¤éè¿™ä¸ªå…ƒç´ è‡ªå·±å½¢æˆäº†ä¸€ä¸ªæ–°çš„BFCã€‚</li>
<li>BFCçš„åŒºåŸŸä¸ä¼šä¸<code>float box</code>é‡å ã€‚</li>
<li>BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ã€‚åä¹‹ä¹Ÿå¦‚æ­¤ã€‚</li>
<li>è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—ã€‚</li>
</ul>
<h2 id="å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆBlock-Formatting-Contextï¼ŒBFCï¼‰"><a href="#å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆBlock-Formatting-Contextï¼ŒBFCï¼‰" class="headerlink" title="å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆBlock Formatting Contextï¼ŒBFCï¼‰"></a>å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆBlock Formatting Contextï¼ŒBFCï¼‰</h2><p>æ˜¯Webé¡µé¢çš„å¯è§†åŒ–CSSæ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯å—ç›’å­çš„å¸ƒå±€è¿‡ç¨‹å‘ç”Ÿçš„åŒºåŸŸï¼Œä¹Ÿæ˜¯æµ®åŠ¨å…ƒç´ ä¸å…¶ä»–å…ƒç´ äº¤äº’çš„åŒºåŸŸã€‚</p>
<p>ä¸‹åˆ—æ–¹å¼ä¼šåˆ›å»º <strong>å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼š</strong></p>
<ul>
<li>æ ¹å…ƒç´ æˆ–åŒ…å«æ ¹å…ƒç´ çš„å…ƒç´ </li>
<li>æµ®åŠ¨å…ƒç´ ï¼ˆå…ƒç´ çš„ <code>float</code> ä¸æ˜¯ <code>none</code>ï¼‰</li>
<li>ç»å¯¹å®šä½å…ƒç´ ï¼ˆå…ƒç´ çš„ <code>position</code> ä¸º <code>absolute</code> æˆ– <code>fixed</code>ï¼‰</li>
<li>è¡Œå†…å—å…ƒç´ ï¼ˆå…ƒç´ çš„ <code>display</code> ä¸º <code>inline-block</code>ï¼‰</li>
<li>è¡¨æ ¼å•å…ƒæ ¼ï¼ˆå…ƒç´ çš„ <code>display</code>ä¸º <code>table-cell</code>ï¼ŒHTMLè¡¨æ ¼å•å…ƒæ ¼é»˜è®¤ä¸ºè¯¥å€¼ï¼‰</li>
<li>è¡¨æ ¼æ ‡é¢˜ï¼ˆå…ƒç´ çš„ <code>display</code> ä¸º <code>table-caption</code>ï¼ŒHTMLè¡¨æ ¼æ ‡é¢˜é»˜è®¤ä¸ºè¯¥å€¼ï¼‰</li>
<li>åŒ¿åè¡¨æ ¼å•å…ƒæ ¼å…ƒç´ ï¼ˆå…ƒç´ çš„ <code>display</code>ä¸º <code>table</code>ã€<code>table-row</code>ã€ <code>table-row-group</code>ã€<code>table-header-group</code>ã€<code>table-footer-group</code>ï¼ˆåˆ†åˆ«æ˜¯<code>HTML tableã€rowã€tbodyã€theadã€tfoot</code>çš„é»˜è®¤å±æ€§ï¼‰æˆ– <code>inline-table</code>ï¼‰</li>
<li><code>overflow</code> å€¼ä¸ä¸º <code>visible</code> çš„å—å…ƒç´ </li>
<li><code>display</code> å€¼ä¸º <code>flow-root</code> çš„å…ƒç´ </li>
<li><code>contain</code> å€¼ä¸º <code>layout</code>ã€<code>content</code>æˆ– <code>strict</code> çš„å…ƒç´ </li>
<li>å¼¹æ€§å…ƒç´ ï¼ˆ<code>display</code>ä¸º <code>flex</code> æˆ– <code>inline-flex</code>å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰</li>
<li>ç½‘æ ¼å…ƒç´ ï¼ˆ<code>display</code>ä¸º <code>grid</code> æˆ– <code>inline-grid</code> å…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰</li>
<li>å¤šåˆ—å®¹å™¨ï¼ˆå…ƒç´ çš„ <code>column-count</code> æˆ– <code>column-width</code> ä¸ä¸º <code>auto</code>ï¼ŒåŒ…æ‹¬ <code>column-count</code> ä¸º 1ï¼‰</li>
<li><code>column-span</code> ä¸º <code>all</code> çš„å…ƒç´ å§‹ç»ˆä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„BFCï¼Œå³ä½¿è¯¥å…ƒç´ æ²¡æœ‰åŒ…è£¹åœ¨ä¸€ä¸ªå¤šåˆ—å®¹å™¨ä¸­ï¼ˆæ ‡å‡†å˜æ›´ï¼ŒChrome bugï¼‰ã€‚</li>
</ul>
<blockquote>
<p>å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡åŒ…å«åˆ›å»ºå®ƒçš„å…ƒç´ å†…éƒ¨çš„æ‰€æœ‰å†…å®¹.</p>
</blockquote>
<p>å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡å¯¹æµ®åŠ¨å®šä½ï¼ˆå‚è§ floatï¼‰ä¸æ¸…é™¤æµ®åŠ¨ï¼ˆå‚è§ clearï¼‰éƒ½å¾ˆé‡è¦ã€‚æµ®åŠ¨å®šä½å’Œæ¸…é™¤æµ®åŠ¨æ—¶åªä¼šåº”ç”¨äºåŒä¸€ä¸ªBFCå†…çš„å…ƒç´ ã€‚æµ®åŠ¨ä¸ä¼šå½±å“å…¶å®ƒBFCä¸­å…ƒç´ çš„å¸ƒå±€ï¼Œè€Œæ¸…é™¤æµ®åŠ¨åªèƒ½æ¸…é™¤åŒä¸€BFCä¸­åœ¨å®ƒå‰é¢çš„å…ƒç´ çš„æµ®åŠ¨ã€‚å¤–è¾¹è·æŠ˜å ï¼ˆMargin collapsingï¼‰ä¹Ÿåªä¼šå‘ç”Ÿåœ¨å±äºåŒä¸€BFCçš„å—çº§å…ƒç´ ä¹‹é—´ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼šBFCå°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œæ¥ç®¡ç†å—çº§å…ƒç´ ã€‚</p>
<h1 id="IEä¸‹çš„BFCï¼ˆhasLayoutï¼‰"><a href="#IEä¸‹çš„BFCï¼ˆhasLayoutï¼‰" class="headerlink" title="IEä¸‹çš„BFCï¼ˆhasLayoutï¼‰"></a>IEä¸‹çš„BFCï¼ˆhasLayoutï¼‰</h1><p>IE5ã€6ã€7ä¸‹æ²¡æœ‰BFCçš„æ¦‚å¿µï¼Œä½†æœ‰ç±»ä¼¼äºBFCç›¸åŒçš„æ¦‚å¿µ<code>hasLayout</code>ã€‚</p>
<p>hasLayoutå¯ä»¥ç®€å•çœ‹ä½œæ˜¯IE5.5/6/7ä¸­çš„<code>BFC(Block Formatting Context)</code>ã€‚ä¹Ÿå°±æ˜¯ä¸€ä¸ªå…ƒç´ è¦ä¹ˆè‡ªå·±å¯¹è‡ªèº«å†…å®¹è¿›è¡Œç»„ç»‡å’Œå°ºå¯¸è®¡ç®—(å³å¯é€šè¿‡width/heightæ¥è®¾ç½®è‡ªèº«çš„å®½é«˜)ï¼Œè¦ä¹ˆç”±å…¶containing blockæ¥ç»„ç»‡å’Œå°ºå¯¸è®¡ç®—ã€‚è€ŒIFCï¼ˆå³æ²¡æœ‰æ‹¥æœ‰å¸ƒå±€ï¼‰è€Œè¨€ï¼Œåˆ™æ˜¯å…ƒç´ æ— æ³•å¯¹è‡ªèº«å†…å®¹è¿›è¡Œç»„ç»‡å’Œå°ºå¯¸è®¡ç®—ï¼Œè€Œæ˜¯ç”±è‡ªèº«å†…å®¹æ¥å†³å®šå…¶å°ºå¯¸ï¼ˆå³ä»…èƒ½é€šè¿‡line-heightè®¾ç½®å†…å®¹è¡Œè·ï¼Œé€šè¿‡è¡Œè·æ¥æ”¯æ’‘å…ƒç´ çš„é«˜åº¦ï¼›ä¹Ÿæ— æ³•é€šè¿‡widthè®¾ç½®å…ƒç´ å®½åº¦ï¼Œä»…èƒ½ç”±å†…å®¹æ¥å†³å®šè€Œå·²ï¼‰ã€‚</p>
<p>å½“hasLayoutä¸ºtrueæ—¶(å°±æ˜¯æ‰€è°“çš„â€æ‹¥æœ‰å¸ƒå±€â€)ï¼Œç›¸å½“äºå…ƒç´ äº§ç”Ÿæ–°BFCï¼Œå…ƒç´ è‡ªå·±å¯¹è‡ªèº«å†…å®¹è¿›è¡Œç»„ç»‡å’Œå°ºå¯¸è®¡ç®—;</p>
<p>å½“hasLayoutä¸ºfalseæ—¶(å°±æ˜¯æ‰€è°“çš„â€ä¸æ‹¥æœ‰å¸ƒå±€â€)ï¼Œç›¸å½“äºå…ƒç´ ä¸äº§ç”Ÿæ–°BFCï¼Œå…ƒç´ ç”±å…¶æ‰€å±çš„containing blockè¿›è¡Œç»„ç»‡å’Œå°ºå¯¸è®¡ç®—ã€‚</p>
<p>å’Œäº§ç”Ÿæ–°BFCçš„ç‰¹æ€§ä¸€æ ·ï¼ŒhasLayoutæ— æ³•é€šè¿‡CSSå±æ€§ç›´æ¥è®¾ç½®ï¼Œè€Œæ˜¯é€šè¿‡æŸäº›CSSå±æ€§é—´æ¥å¼€å¯è¿™ä¸€ç‰¹æ€§ã€‚ä¸åŒçš„æ˜¯æŸäº›CSSå±æ€§æ˜¯ä»¥ä¸å¯é€†æ–¹å¼é—´æ¥å¼€å¯hasLayoutä¸ºtrueã€‚å¹¶ä¸”é»˜è®¤äº§ç”Ÿæ–°BFCçš„åªæœ‰htmlå…ƒç´ ï¼Œè€Œé»˜è®¤hasLayoutä¸ºtrueçš„å…ƒç´ å°±ä¸åªæœ‰htmlå…ƒç´ äº†ã€‚</p>
<p>å¦å¤–æˆ‘ä»¬å¯ä»¥é€šè¿‡object.currentStyle.hasLayoutå±æ€§æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¼€å¯äº†hasLayoutç‰¹æ€§ã€‚</p>
<p>å¿…é¡»è¯´æ˜ï¼š **IE8åŠä»¥ä¸Šæµè§ˆå™¨ä½¿ç”¨äº†å…¨æ–°çš„æ˜¾ç¤ºå¼•æ“ï¼Œå·²ç»ä¸å†ä½¿ç”¨hasLayoutå±æ€§ï¼Œå› ä¸ºhasLayoutå±æ€§åªé’ˆå¯¹IE7ä»¥ä¸‹ã€‚</p>
<p><strong>é»˜è®¤æ‹¥æœ‰å¸ƒå±€çš„å…ƒç´ </strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span>, <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span>, <span class="tag">&lt;<span class="name">tr</span>&gt;</span>, <span class="tag">&lt;<span class="name">th</span>&gt;</span>, <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span>&gt;</span>,<span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span>&gt;</span>, <span class="tag">&lt;<span class="name">button</span>&gt;</span>, <span class="tag">&lt;<span class="name">select</span>&gt;</span>, <span class="tag">&lt;<span class="name">textarea</span>&gt;</span>, <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span>, <span class="tag">&lt;<span class="name">legend</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span>&gt;</span>, <span class="tag">&lt;<span class="name">embed</span>&gt;</span>, <span class="tag">&lt;<span class="name">object</span>&gt;</span>, <span class="tag">&lt;<span class="name">applet</span>&gt;</span>,<span class="tag">&lt;<span class="name">marquee</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>å¦‚ä½•è§¦å‘hasLayout</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">display</span>: <span class="selector-tag">inline-block</span></span><br><span class="line"><span class="selector-tag">height</span>: (é™¤ <span class="selector-tag">auto</span> å¤–ä»»ä½•å€¼)</span><br><span class="line"><span class="selector-tag">width</span>: (é™¤ <span class="selector-tag">auto</span> å¤–ä»»ä½•å€¼)</span><br><span class="line"><span class="selector-tag">float</span>: (<span class="selector-tag">left</span> æˆ– <span class="selector-tag">right</span>)</span><br><span class="line"><span class="selector-tag">position</span>: <span class="selector-tag">absolute</span></span><br><span class="line"><span class="selector-tag">writing-mode</span>: <span class="selector-tag">tb-rl</span></span><br><span class="line"><span class="selector-tag">zoom</span>: (é™¤ <span class="selector-tag">normal</span> å¤–ä»»æ„å€¼)</span><br></pre></td></tr></table></figure>
<p>IE7è¿˜æœ‰ä¸€äº›é¢å¤–çš„å±æ€§å¯è§¦å‘hasLayout</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">min-height</span>: (ä»»æ„å€¼)</span><br><span class="line"><span class="selector-tag">min-width</span>: (ä»»æ„å€¼)</span><br><span class="line"><span class="selector-tag">max-height</span>: (é™¤ <span class="selector-tag">none</span> å¤–ä»»æ„å€¼)</span><br><span class="line"><span class="selector-tag">max-width</span>: (é™¤ <span class="selector-tag">none</span> å¤–ä»»æ„å€¼)</span><br><span class="line"><span class="selector-tag">overflow</span>: (é™¤ <span class="selector-tag">visible</span> å¤–ä»»æ„å€¼ï¼Œä»…ç”¨äºå—çº§å…ƒç´ )</span><br><span class="line"><span class="selector-tag">overflow-x</span>: (é™¤ <span class="selector-tag">visible</span> å¤–ä»»æ„å€¼ï¼Œä»…ç”¨äºå—çº§å…ƒç´ )</span><br><span class="line"><span class="selector-tag">overflow-y</span>: (é™¤ <span class="selector-tag">visible</span> å¤–ä»»æ„å€¼ï¼Œä»…ç”¨äºå—çº§å…ƒç´ )</span><br><span class="line"><span class="selector-tag">position</span>: <span class="selector-tag">fixed</span></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨hasLayoutå°±æ˜¯ä¸ºäº†å…¼å®¹ä¸€äº›é¡¹ç›®éœ€è¦è¿è¡Œåœ¨IE7ä»¥ä¸‹ç‰ˆæœ¬ã€‚</p>
<h1 id="BFCå®ç°è‡ªé€‚åº”ä¸¤æ å¸ƒå±€"><a href="#BFCå®ç°è‡ªé€‚åº”ä¸¤æ å¸ƒå±€" class="headerlink" title="BFCå®ç°è‡ªé€‚åº”ä¸¤æ å¸ƒå±€"></a>BFCå®ç°è‡ªé€‚åº”ä¸¤æ å¸ƒå±€</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.left</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: aquamarine;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.middle</span> &#123;</span></span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: green;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">            content: "";</span><br><span class="line">            display: block;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span> &#123;</span></span><br><span class="line">            zoom: 1;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨ä¸‰åˆ—å¸ƒå±€çš„æ€æƒ³æ¥å®ç°ä¸¤åˆ—å¸ƒå±€ï¼Œä½†æ˜¯åˆ©ç”¨BFCçš„åŸç†å¯ä»¥æ›´ç®€å•çš„å®ç°ä¸¤åˆ—å¸ƒå±€ã€‚ç”±äºleftå—å¼€å¯æµ®åŠ¨ï¼Œä¼šä½¿å¾—leftæ˜¾ç¤ºåœ¨middleä¸Šå±‚ï¼Œä½†æ˜¯middleè¿˜æ˜¯å æ»¡100%ï¼Œå•çº¯ç”¨é¢œè‰²åˆ¤æ–­åƒæ˜¯ä¸¤åˆ—å¸ƒå±€ï¼Œä½†æ˜¯å¼€å¯lefté€æ˜åº¦ä¼šå‘ç°middleå æ»¡100%ï¼Œæ˜¯æµ®ç°åœ¨ä¸Šé¢ï¼Œè€Œè®©middleå¼€å¯BFCï¼Œoverflowä¸ºhiddenå³ä¸ºå¼€å¯äº†middleçš„BFCï¼ŒBFCçš„åŒºåŸŸå¹¶ä¸ä¼šå’Œæµ®åŠ¨åŒºåŸŸé‡å ï¼Œå³å¯å®ç°ã€‚</p>
<h1 id="æ¸…é™¤æµ®åŠ¨è§£å†³é«˜åº¦å¡Œé™·çš„æ–¹å¼"><a href="#æ¸…é™¤æµ®åŠ¨è§£å†³é«˜åº¦å¡Œé™·çš„æ–¹å¼" class="headerlink" title="æ¸…é™¤æµ®åŠ¨è§£å†³é«˜åº¦å¡Œé™·çš„æ–¹å¼"></a>æ¸…é™¤æµ®åŠ¨è§£å†³é«˜åº¦å¡Œé™·çš„æ–¹å¼</h1><h2 id="ç›´æ¥ç»™äºˆé«˜åº¦"><a href="#ç›´æ¥ç»™äºˆé«˜åº¦" class="headerlink" title="ç›´æ¥ç»™äºˆé«˜åº¦"></a>ç›´æ¥ç»™äºˆé«˜åº¦</h2><p>ç›´æ¥è®¡ç®—å†…å®¹ç›’å­é«˜åº¦ï¼Œå¹¶èµ‹äºˆçˆ¶å®¹å™¨é«˜åº¦ï¼Œç®€å•ï¼Œä½†æ˜¯æ¯«æ— æ‰©å±•æ€§ã€‚</p>
<h2 id="åˆ©ç”¨BFC"><a href="#åˆ©ç”¨BFC" class="headerlink" title="åˆ©ç”¨BFC"></a>åˆ©ç”¨BFC</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line">            border: 1px black solid;</span><br><span class="line"><span class="css">            <span class="comment">/* åˆ©ç”¨BFCå¸ƒå±€åŸåˆ™ï¼ŒBFCå—é«˜åº¦ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿä¼šå‚ä¸é«˜åº¦è®¡ç®—ï¼Œåªè¦æ»¡è¶³å¼€å¯BFCçš„æ¡ä»¶å³å¯ */</span></span></span><br><span class="line">            overflow: hidden;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: aqua;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="bræ ‡ç­¾"><a href="#bræ ‡ç­¾" class="headerlink" title="bræ ‡ç­¾"></a>bræ ‡ç­¾</h2><p><code>&lt;br clear=&quot;all&#39; /&gt;</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line">            border: 1px black solid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: aqua;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ©ç”¨bræ ‡ç­¾ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> <span class="attr">clear</span>=<span class="string">"all"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç©ºæ ‡ç­¾æ¸…é™¤æµ®åŠ¨"><a href="#ç©ºæ ‡ç­¾æ¸…é™¤æµ®åŠ¨" class="headerlink" title="ç©ºæ ‡ç­¾æ¸…é™¤æµ®åŠ¨"></a>ç©ºæ ‡ç­¾æ¸…é™¤æµ®åŠ¨</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line">            border: 1px black solid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: aqua;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span> &#123;</span></span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç©ºæ ‡ç­¾å¹¶æ¸…é™¤æµ®åŠ¨ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¼ªå…ƒç´ æ¸…é™¤æµ®åŠ¨"><a href="#ä¼ªå…ƒç´ æ¸…é™¤æµ®åŠ¨" class="headerlink" title="ä¼ªå…ƒç´ æ¸…é™¤æµ®åŠ¨"></a>ä¼ªå…ƒç´ æ¸…é™¤æµ®åŠ¨</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line">            border: 1px black solid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            float: left;</span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: aqua;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span> &#123;</span></span><br><span class="line">            *zoom: 1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">            content: "";</span><br><span class="line">            display: block;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="å‚ç›´æ°´å¹³å±…ä¸­"><a href="#å‚ç›´æ°´å¹³å±…ä¸­" class="headerlink" title="å‚ç›´æ°´å¹³å±…ä¸­"></a>å‚ç›´æ°´å¹³å±…ä¸­</h1><h2 id="æ–¹å¼1"><a href="#æ–¹å¼1" class="headerlink" title="æ–¹å¼1"></a>æ–¹å¼1</h2><p>éœ€è¦å·²çŸ¥è‡ªèº«å…ƒç´ é«˜å®½ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#wrap</span> &#123;</span></span><br><span class="line">            position: relative;</span><br><span class="line">            width: 600px;</span><br><span class="line">            height: 600px;</span><br><span class="line">            background-color: pink;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#inner</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            left: 50%;</span><br><span class="line">            top: 50%;</span><br><span class="line">            margin-left: -50px;</span><br><span class="line">            margin-top: -50px;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background-color: aqua;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"inner"</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ–¹å¼2"><a href="#æ–¹å¼2" class="headerlink" title="æ–¹å¼2"></a>æ–¹å¼2</h2><p>éœ€è¦å·²çŸ¥è‡ªèº«å…ƒç´ é«˜å®½ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#wrap</span> &#123;</span></span><br><span class="line">            position: relative;</span><br><span class="line">            width: 600px;</span><br><span class="line">            height: 600px;</span><br><span class="line">            background-color: pink;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#inner</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            left: 0;</span><br><span class="line">            top: 0;</span><br><span class="line">            right: 0;</span><br><span class="line">            bottom: 0;</span><br><span class="line">            margin: auto auto;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background-color: aqua;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"inner"</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åŸç†ï¼š</p>
<p>ç»å¯¹å®šä½ç›’å­ç‰¹æ€§ï¼šé«˜å®½æœ‰å†…å®¹æ’‘å¼€ä¸‹<br>æ°´å¹³æ–¹å‘ä¸Šï¼šleft + right + width + padding + margin = åŒ…å«å—paddingå†…å®¹åŒºåŸŸ<br>å‚ç›´æ–¹å‘ä¸Šï¼štop + bottom + width + padding + margin = åŒ…å«å—paddingå†…å®¹åŒºåŸŸ</p>
<p>ä¸Šè¿°ä¾‹å­ä¸­ï¼š<br>æ°´å¹³æ–¹å‘ä¸Šï¼š0 + 0 + 100 + 0 + auto = 600<br>å‚ç›´æ–¹å‘ä¸Šï¼š0 + 0 + 100 + 0 + auto = 600<br>åˆ™autoç­‰äº250ï¼Œå³å¯å±…ä¸­ã€‚</p>
<h2 id="æ–¹æ¡ˆ3"><a href="#æ–¹æ¡ˆ3" class="headerlink" title="æ–¹æ¡ˆ3"></a>æ–¹æ¡ˆ3</h2><p>æ— éœ€çŸ¥é“å…ƒç´ é«˜åº¦ï¼Œä½¿ç”¨transform</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#wrap</span> &#123;</span></span><br><span class="line">            position: relative;</span><br><span class="line">            width: 600px;</span><br><span class="line">            height: 600px;</span><br><span class="line">            background-color: pink;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#inner</span> &#123;</span></span><br><span class="line">            position: absolute;</span><br><span class="line">            left: 50%;</span><br><span class="line">            top: 50%;</span><br><span class="line">            transform: translate(-50%,-50%);</span><br><span class="line">            background-color: aqua;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"inner"</span>&gt;</span></span><br><span class="line">            testaaaaaaa<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            testaaaaaa<span class="tag">&lt;<span class="name">abr</span> /&gt;</span></span><br><span class="line">            testaaaaaa<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">            testaaaaaa<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="è¡Œé«˜"><a href="#è¡Œé«˜" class="headerlink" title="è¡Œé«˜"></a>è¡Œé«˜</h1><p><img src="line_height.png" alt="è¡Œé«˜"></p>
<p>ä»ä¸Šåˆ°ä¸‹å››æ¡çº¿åˆ†åˆ«æ˜¯é¡¶çº¿ã€ä¸­çº¿ã€åŸºçº¿ã€åº•çº¿ï¼Œå¾ˆåƒæ‰å­¦è‹±è¯­å­—æ¯æ—¶çš„å››çº¿ä¸‰æ ¼</p>
<p>1.è¡Œé«˜æ˜¯æŒ‡ä¸Šä¸‹æ–‡æœ¬è¡Œçš„åŸºçº¿é—´çš„å‚ç›´è·ç¦»ï¼Œå³å›¾ä¸­ä¸¤æ¡çº¢çº¿é—´å‚ç›´è·ç¦»ã€‚<br>2.è¡Œè·æ˜¯æŒ‡ä¸€è¡Œåº•çº¿åˆ°ä¸‹ä¸€è¡Œé¡¶çº¿çš„å‚ç›´è·ç¦»ï¼Œå³ç¬¬ä¸€è¡Œç²‰çº¿å’Œç¬¬äºŒè¡Œç»¿çº¿é—´çš„å‚ç›´è·ç¦»ã€‚<br>3.åŠè¡Œè·æ˜¯è¡Œè·çš„ä¸€åŠï¼Œå³åŒºåŸŸ3å‚ç›´è·ç¦»/2ï¼ŒåŒºåŸŸ1ï¼Œ2ï¼Œ3ï¼Œ4çš„è·ç¦»ä¹‹å’Œä¸ºè¡Œé«˜ï¼Œè€ŒåŒºåŸŸ1ï¼Œ2ï¼Œ4è·ç¦»ä¹‹å’Œä¸ºå­—ä½“sizeï¼Œæ‰€ä»¥åŠè¡Œè·ä¹Ÿå¯ä»¥è¿™ä¹ˆç®—ï¼šï¼ˆè¡Œé«˜-å­—ä½“sizeï¼‰/2 </p>
<p><strong>å†…å®¹åŒºï¼š</strong>åº•çº¿å’Œé¡¶çº¿åŒ…è£¹çš„åŒºåŸŸï¼Œå³ä¸‹å›¾æ·±ç°è‰²èƒŒæ™¯åŒºåŸŸã€‚<br>æ–‡æœ¬è¡Œä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå†…å®¹åŒºï¼Œè¿™ä¸ªç”±å­—ä½“çš„å¤§å°ç¡®å®šã€‚è¿™ä¸ªå†…å®¹åŒºåˆ™ä¼šç”Ÿæˆä¸€ä¸ªè¡Œå†…æ¡†ï¼Œå¦‚æœä¸å­˜åœ¨å…¶ä»–å› ç´ ï¼Œè¿™ä¸ªè¡Œå†…æ¡†å°±å®Œå…¨ç­‰äºè¯¥å…ƒç´ çš„å†…å®¹åŒºï¼Œç”±line-heightäº§ç”Ÿçš„è¡Œé—´è·å°±æ˜¯å¢åŠ å’Œå‡å°‘å„è¡Œå†…æ¡†é«˜åº¦çš„å› ç´ ä¹‹ä¸€ã€‚</p>
<p><strong>è¡Œå†…æ¡† :</strong> è¡Œå†…æ¡†æ˜¯ä¸€ä¸ªæµè§ˆå™¨æ¸²æŸ“æ¨¡å‹ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæ— æ³•æ˜¾ç¤ºå‡ºæ¥ï¼Œè¡Œå†…æ¡†é»˜è®¤ç­‰äºå†…å®¹åŒºåŸŸï¼Œ å°†line-heightçš„è®¡ç®—å€¼å‡å»font-sizeçš„è®¡ç®—å€¼ï¼Œè¿™ä¸ªå€¼å°±æ˜¯æ€»è¡Œè·ï¼Œè¿™ä¸ªå€¼å¯èƒ½æ˜¯ä¸ªè´Ÿå€¼ï¼Œä»»ä½•å°†è¡Œé—´è·/2 åˆ†åˆ«åº”ç”¨åˆ°å†…å®¹åŒºçš„é¡¶éƒ¨å’Œåº•éƒ¨ï¼Œå…¶ç»“æœå°±æ˜¯è¯¥å…ƒç´ çš„è¡Œå†…æ¡†ã€‚</p>
<p><strong>è¡Œæ¡†ï¼ˆline boxï¼‰</strong>ï¼Œè¡Œæ¡†æ˜¯æŒ‡æœ¬è¡Œçš„ä¸€ä¸ªè™šæ‹Ÿçš„çŸ©å½¢æ¡†ï¼Œæ˜¯æµè§ˆå™¨æ¸²æŸ“æ¨¡å¼ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œå¹¶æ²¡æœ‰å®é™…æ˜¾ç¤ºã€‚é»˜è®¤æƒ…å†µä¸‹è¡Œæ¡†é«˜åº¦ç­‰äºæœ¬è¡Œå†…æ‰€æœ‰å…ƒç´ ä¸­è¡Œå†…æ¡†æœ€å¤§çš„å€¼ï¼ˆä¸€è¡Œä¸Šå‚ç›´å¯¹é½æ—¶ä»¥è¡Œé«˜å€¼æœ€å¤§çš„è¡Œå†…æ¡†ä¸ºåŸºå‡†ï¼Œå…¶ä»–è¡Œå†…æ¡†é‡‡ç”¨è‡ªå·±çš„å¯¹é½æ–¹å¼å‘åŸºå‡†å¯¹é½ï¼Œæœ€ç»ˆè®¡ç®—è¡Œæ¡†çš„é«˜åº¦ï¼‰ï¼Œå½“æœ‰å¤šè¡Œå†…å®¹æ—¶ï¼Œæ¯è¡Œéƒ½ä¼šæœ‰è‡ªå·±çš„è¡Œæ¡†ã€‚</p>
<p><img src="line_height2.png" alt></p>
<h1 id="vertical-align"><a href="#vertical-align" class="headerlink" title="vertical-align"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/vertical-align" target="_blank" rel="noopener">vertical-align</a></h1><p>CSS çš„å±æ€§ <code>vertical-align</code> ç”¨æ¥æŒ‡å®šè¡Œå†…å…ƒç´ ï¼ˆinlineï¼‰æˆ–è¡¨æ ¼å•å…ƒæ ¼ï¼ˆtable-cellï¼‰å…ƒç´ çš„å‚ç›´å¯¹é½æ–¹å¼ã€‚</p>
<blockquote>
<p>æ³¨æ„ vertical-align åªå¯¹è¡Œå†…å…ƒç´ ã€è¡¨æ ¼å•å…ƒæ ¼å…ƒç´ ç”Ÿæ•ˆï¼šä¸èƒ½ç”¨å®ƒå‚ç›´å¯¹é½å—çº§å…ƒç´ ã€‚</p>
</blockquote>
<h2 id="ä½¿è¡Œå†…å…ƒç´ ç›’æ¨¡å‹ä¸å…¶è¡Œå†…å…ƒç´ å®¹å™¨å‚ç›´å¯¹é½ã€‚ä¾‹å¦‚ï¼Œç”¨äºå‚ç›´å¯¹é½ä¸€è¡Œæ–‡æœ¬çš„å†…çš„å›¾ç‰‡-lt-img-gt-ï¼š"><a href="#ä½¿è¡Œå†…å…ƒç´ ç›’æ¨¡å‹ä¸å…¶è¡Œå†…å…ƒç´ å®¹å™¨å‚ç›´å¯¹é½ã€‚ä¾‹å¦‚ï¼Œç”¨äºå‚ç›´å¯¹é½ä¸€è¡Œæ–‡æœ¬çš„å†…çš„å›¾ç‰‡-lt-img-gt-ï¼š" class="headerlink" title="ä½¿è¡Œå†…å…ƒç´ ç›’æ¨¡å‹ä¸å…¶è¡Œå†…å…ƒç´ å®¹å™¨å‚ç›´å¯¹é½ã€‚ä¾‹å¦‚ï¼Œç”¨äºå‚ç›´å¯¹é½ä¸€è¡Œæ–‡æœ¬çš„å†…çš„å›¾ç‰‡&lt;img&gt;ï¼š"></a>ä½¿è¡Œå†…å…ƒç´ ç›’æ¨¡å‹ä¸å…¶è¡Œå†…å…ƒç´ å®¹å™¨å‚ç›´å¯¹é½ã€‚ä¾‹å¦‚ï¼Œç”¨äºå‚ç›´å¯¹é½ä¸€è¡Œæ–‡æœ¬çš„å†…çš„å›¾ç‰‡<code>&lt;img&gt;</code>ï¼š</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> &#123;</span></span><br><span class="line">            width: 600px;</span><br><span class="line">            height: 600px;</span><br><span class="line">            border: 1px red solid;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">            content: "";</span><br><span class="line">            display: inline-block;</span><br><span class="line">            height: 50%;</span><br><span class="line">            width: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-id">#content</span> <span class="selector-class">.icon</span> &#123;</span></span><br><span class="line">            vertical-align: middle; </span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"icon"</span> <span class="attr">src</span>=<span class="string">"img/img.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h1><p>å·²æ”¾ç½®äº<a href="https://github.com/hackycy/CSSStudyDemo" target="_blank" rel="noopener">github</a></p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://segmentfault.com/a/1190000009545742" target="_blank" rel="noopener">https://segmentfault.com/a/1190000009545742</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context</a></p>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>è·¨åŸŸä»‹ç»ä»¥åŠè·¨åŸŸçš„æ–¹å¼</title>
    <url>/2019/03/27/%E8%B7%A8%E5%9F%9F%E4%BB%8B%E7%BB%8D%E4%BB%A5%E5%8F%8A%E8%B7%A8%E5%9F%9F%E7%9A%84%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‰ç«¯åœ¨ä¸åç«¯è¿›è¡Œæ•°æ®äº¤äº’æ—¶ç»å¸¸ä¼šç¢°åˆ°è·¨åŸŸè¯·æ±‚ï¼Œè¿™é‡Œåœ¨æ­¤æ¢è®¨ä¸€ä¸‹ã€‚</p>
<a id="more"></a>
<h1 id="ä»€ä¹ˆæ˜¯è·¨åŸŸ"><a href="#ä»€ä¹ˆæ˜¯è·¨åŸŸ" class="headerlink" title="ä»€ä¹ˆæ˜¯è·¨åŸŸ"></a>ä»€ä¹ˆæ˜¯è·¨åŸŸ</h1><h2 id="ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥åŠå…¶é™åˆ¶å†…å®¹"><a href="#ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥åŠå…¶é™åˆ¶å†…å®¹" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥åŠå…¶é™åˆ¶å†…å®¹"></a>ä»€ä¹ˆæ˜¯åŒæºç­–ç•¥åŠå…¶é™åˆ¶å†…å®¹</h2><p>åŒæºç­–ç•¥æ˜¯ä¸€ç§çº¦å®šï¼Œå®ƒæ˜¯æµè§ˆå™¨æœ€æ ¸å¿ƒä¹Ÿæ˜¯æœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚æœå°‘äº†åŒæºç­–ç•¥ï¼Œæµè§ˆå™¨å¾ˆå®¹æ˜“æ”¶åˆ°XSSï¼ŒCSFRç­‰æ”»å‡»ã€‚æ‰€è°“åŒæºæŒ‡çš„æ˜¯<code>åè®®+åŸŸå+ç«¯å£</code>ä¸‰è€…ç›¸åŒï¼Œå³ä¾¿ä¸¤ä¸ªä¸åŒçš„åŸŸåæŒ‡å‘åŒä¸€ä¸ªipåœ°å€ï¼Œä¹ŸéåŒæºã€‚</p>
<p><img src="protocozc.jpg" alt></p>
<p><strong>åŒæºç­–ç•¥çš„é™åˆ¶å†…å®¹æœ‰ï¼š</strong></p>
<ul>
<li>Cookieã€LocalStorageã€IndexedDBç­‰å­˜å‚¨æ€§å†…å®¹</li>
<li>DOMèŠ‚ç‚¹</li>
<li>AJAXè¯·æ±‚å‘é€åï¼Œç»“æœè¢«æµè§ˆå™¨æ‹¦æˆªäº†</li>
</ul>
<p>ä½†æ˜¯æœ‰ä¸‰ä¸ªæ ‡ç­¾æ˜¯å…è®¸è·¨åŸŸåŠ è½½èµ„æº</p>
<ul>
<li><code>&lt;img src=&quot;...&quot;&gt;</code></li>
<li><code>&lt;link href=&quot;...&quot;&gt;</code></li>
<li><code>&lt;script src=&quot;...&quot;&gt;</code></li>
</ul>
<h2 id="å¸¸è§è·¨åŸŸåœºæ™¯"><a href="#å¸¸è§è·¨åŸŸåœºæ™¯" class="headerlink" title="å¸¸è§è·¨åŸŸåœºæ™¯"></a>å¸¸è§è·¨åŸŸåœºæ™¯</h2><p>å½“<code>åè®®</code>ã€<code>å­åŸŸå</code>ã€<code>ä¸»åŸŸå</code>ã€<code>ç«¯å£å·</code>ä¸­ä»»æ„ä¸€ä¸ªä¸ç›¸åŒæ—¶ï¼Œéƒ½ç®—ä½œä¸åŒåŸŸã€‚ä¸åŒåŸŸä¹‹é—´ç›¸äº’è¯·æ±‚èµ„æºï¼Œå°±ç®—ä½œ<code>è·¨åŸŸ</code>ï¼Œå¸¸è§çš„è·¨åŸŸåœºæ™¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<table>
<thead>
<tr>
<th>URL</th>
<th>è¯´æ˜</th>
<th>æ˜¯å¦å…è®¸é€šä¿¡</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.a.com/a.js" target="_blank" rel="noopener">http://www.a.com/a.js</a> <br> <a href="http://www.a.com/b.js" target="_blank" rel="noopener">http://www.a.com/b.js</a></td>
<td>åŒä¸€ä¸ªåŸŸåä¸‹</td>
<td>å…è®¸</td>
</tr>
<tr>
<td><a href="http://www.a.com/lab/a.js" target="_blank" rel="noopener">http://www.a.com/lab/a.js</a> <br> <a href="http://www.a.com/script/b.js" target="_blank" rel="noopener">http://www.a.com/script/b.js</a></td>
<td>åŒä¸€åŸŸåä¸‹ä¸åŒæ–‡ä»¶å¤¹</td>
<td>å…è®¸</td>
</tr>
<tr>
<td><a href="http://www.a.com:8000/a.js" target="_blank" rel="noopener">http://www.a.com:8000/a.js</a> <br> <a href="http://www.a.com/b.js" target="_blank" rel="noopener">http://www.a.com/b.js</a></td>
<td>åŒä¸€åŸŸåï¼Œä¸åŒç«¯å£</td>
<td>ä¸å…è®¸</td>
</tr>
<tr>
<td><a href="http://www.a.com/a.js" target="_blank" rel="noopener">http://www.a.com/a.js</a> <br> <a href="https://www.a.com/b.js" target="_blank" rel="noopener">https://www.a.com/b.js</a></td>
<td>åŒä¸€åŸŸåï¼Œä¸åŒåè®®</td>
<td>ä¸å…è®¸</td>
</tr>
<tr>
<td><a href="http://www.a.com/a.js" target="_blank" rel="noopener">http://www.a.com/a.js</a> <br> <a href="http://70.32.92.74/b.js" target="_blank" rel="noopener">http://70.32.92.74/b.js</a></td>
<td>åŸŸåå’ŒåŸŸåå¯¹åº”ip</td>
<td>ä¸å…è®¸</td>
</tr>
<tr>
<td><a href="http://www.a.com/a.js" target="_blank" rel="noopener">http://www.a.com/a.js</a> <br> <a href="http://script.a.com/b.js" target="_blank" rel="noopener">http://script.a.com/b.js</a></td>
<td>ä¸»åŸŸç›¸åŒï¼Œå­åŸŸä¸åŒ</td>
<td>ä¸å…è®¸</td>
</tr>
<tr>
<td><a href="http://www.a.com/a.js" target="_blank" rel="noopener">http://www.a.com/a.js</a> <br> <a href="http://a.com/b.js" target="_blank" rel="noopener">http://a.com/b.js</a></td>
<td>åŒä¸€åŸŸåï¼Œä¸åŒäºŒçº§åŸŸå</td>
<td>ä¸å…è®¸ï¼Œcookieè¿™ç§æƒ…å†µä¸‹ä¹Ÿä¸å…è®¸</td>
</tr>
<tr>
<td><a href="http://www.cnblogs.com/a.js" target="_blank" rel="noopener">http://www.cnblogs.com/a.js</a> <br> <a href="http://www.a.com/b.js" target="_blank" rel="noopener">http://www.a.com/b.js</a></td>
<td>ä¸åŒåŸŸå</td>
<td>ä¸å…è®¸</td>
</tr>
</tbody>
</table>
<p><strong>ç‰¹åˆ«è¯´æ˜</strong></p>
<ul>
<li>å¦‚æœæ—¶åè®®å’Œç«¯å£é€ æˆçš„è·¨åŸŸé—®é¢˜ï¼Œå‰ç«¯æ—¶æ— èƒ½ä¸ºåŠ›çš„</li>
<li>åœ¨è·¨åŸŸé—®é¢˜ä¸Šï¼Œä»…ä»…æ˜¯é€šè¿‡â€œURLçš„é¦–éƒ¨â€œæ¥è¯†åˆ«è€Œä¸ä¼šæ ¹æ®åŸŸåå¯¹åº”çš„IPåœ°å€æ˜¯å¦ç›¸åŒæ¥åˆ¤æ–­ã€‚â€œURLçš„é¦–éƒ¨â€å¯ä»¥ç†è§£ä¸ºâ€œåè®®ã€åŸŸåå’Œç«¯å£å¿…é¡»åŒ¹é…â€œã€‚</li>
</ul>
<blockquote>
<p>è¯·æ±‚è·¨åŸŸï¼Œé‚£ä¹ˆè¯·æ±‚æœ‰æ²¡æœ‰å‘å‡ºå»ï¼Ÿ<br><strong>è·¨åŸŸå¹¶ä¸æ˜¯è¯·æ±‚å‘ä¸å‡ºå»ï¼Œè¯·æ±‚èƒ½å‘å‡ºå»ï¼ŒæœåŠ¡ç«¯èƒ½æ”¶åˆ°è¯·æ±‚å¹¶æ­£å¸¸è¿”å›ç»“æœï¼Œåªæ˜¯ç»“æœè¢«æµè§ˆå™¨æ‹¦æˆªäº†ã€‚</strong>ï¼Œå¯æ˜¯é€šè¿‡è¡¨å•çš„æ–¹å¼å¯ä»¥å‘èµ·è·¨åŸŸè¯·æ±‚ï¼Œä¸ºä»€ä¹ˆ<code>AJAX</code>å°±ä¸å¯ä»¥ï¼Œå½’æ ¹ç»“åº•ï¼Œè·¨åŸŸæ˜¯ä¸ºäº†é˜»æ­¢ç”¨æˆ·è¯»å–åˆ°å¦ä¸€ä¸ªåŸŸåä¸‹çš„å†…å®¹ï¼Œ<code>AJAX</code>å¯ä»¥è·å–å“åº”ï¼Œæµè§ˆå™¨è®¤ä¸ºè¿™å¹¶ä¸å®‰å…¨ï¼Œæ‰€ä»¥æ‹¦æˆªäº†å“åº”ã€‚ä½†æ˜¯è¡¨å•å¹¶ä¸ä¼šè·å–æ–°çš„å†…å®¹ï¼Œæ‰€ä»¥å¯ä»¥å‘èµ·è·¨åŸŸè¯·æ±‚ã€‚è¿™åŒæ—¶ä¹Ÿè¯´æ˜äº†è·¨åŸŸå¹¶ä¸èƒ½å®Œå…¨é˜»æ­¢<code>CSRF</code>ï¼Œå› ä¸ºè¯·æ±‚æ¯•ç«Ÿæ˜¯å‘å‡ºå»äº†ã€‚</p>
</blockquote>
<h1 id="è·¨åŸŸè§£å†³æ–¹æ¡ˆ"><a href="#è·¨åŸŸè§£å†³æ–¹æ¡ˆ" class="headerlink" title="è·¨åŸŸè§£å†³æ–¹æ¡ˆ"></a>è·¨åŸŸè§£å†³æ–¹æ¡ˆ</h1><h2 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>JSONPåŸç†æ˜¯åˆ©ç”¨<code>&lt;script&gt;</code>æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„æ¼æ´ï¼Œç½‘é¡µå¯ä»¥å¾—åˆ°ä»å…¶ä»–æ¥æºåŠ¨æ€äº§ç”Ÿçš„JSONæ•°æ®ã€‚JSONPè¯·æ±‚ä¸€å®šéœ€è¦å¯¹æ–¹çš„æœåŠ¡å™¨åšæ”¯æŒæ‰å¯ä»¥ã€‚</p>
<h3 id="JSONPä¸AJAXå¯¹æ¯”"><a href="#JSONPä¸AJAXå¯¹æ¯”" class="headerlink" title="JSONPä¸AJAXå¯¹æ¯”"></a>JSONPä¸AJAXå¯¹æ¯”</h3><p>JSONPä¸AJAXç›¸åŒï¼Œéƒ½æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€è¯·æ±‚ï¼Œä»æœåŠ¡å™¨ç«¯è·å–æ•°æ®çš„æ–¹å¼ã€‚ä½†æ˜¯AJAXå±äºåŒæºç­–ç•¥ï¼ŒJSONPå±äºéåŒæºç­–ç•¥ï¼ˆè·¨åŸŸè¯·æ±‚ï¼‰</p>
<h3 id="JSONPä¼˜ç¼ºç‚¹"><a href="#JSONPä¼˜ç¼ºç‚¹" class="headerlink" title="JSONPä¼˜ç¼ºç‚¹"></a>JSONPä¼˜ç¼ºç‚¹</h3><p>JSONPä¼˜ç‚¹æ˜¯ç®€å•å…¼å®¹æ€§å¥½ï¼Œå¯ç”¨äºè§£å†³ä¸»æµæµè§ˆå™¨çš„è·¨åŸŸæ•°æ®è®¿é—®çš„é—®é¢˜ã€‚<br>ç¼ºç‚¹æ˜¯ä»…æ”¯æŒgetæ–¹æ³•å…·æœ‰å±€é™æ€§ï¼Œä¸å®‰å…¨å¯èƒ½ä¼šXSSæ”»å‡»ã€‚</p>
<h3 id="JSONPçš„å®ç°æµç¨‹"><a href="#JSONPçš„å®ç°æµç¨‹" class="headerlink" title="JSONPçš„å®ç°æµç¨‹"></a>JSONPçš„å®ç°æµç¨‹</h3><ul>
<li>å£°æ˜ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå…¶å‡½æ•°åï¼ˆå¦‚showï¼‰å½“åšå‚æ•°å€¼ï¼Œè¦ä¼ é€’ç»™è·¨åŸŸè¯·æ±‚æ•°æ®çš„æœåŠ¡å™¨ï¼Œå‡½æ•°å½¢å‚ä¸ºè¦è·å–ç›®æ ‡æ•°æ®ï¼ˆæœåŠ¡å™¨è¿”å›çš„dataï¼‰ã€‚</li>
<li>åˆ›å»ºä¸€ä¸ª<code>&lt;script&gt;</code>æ ‡ç­¾ï¼ŒæŠŠé‚£ä¸ªè·¨åŸŸçš„APIæ•°æ®æ¥å£åœ°å€ï¼Œèµ‹å€¼ç»™scriptçš„srcï¼Œè¿˜è¦åœ¨è¿™ä¸ªåœ°å€ä¸­å‘æœåŠ¡å™¨ä¼ é€’è¯¥å‚æ•°åï¼ˆå¯ä»¥é€šè¿‡é—®å¥½ä¼ å‚ï¼š`?callback=showï¼‰ã€‚</li>
<li>æœåŠ¡å™¨æ¥å—åˆ°è¯·æ±‚åï¼Œéœ€è¦è¿›è¡Œç‰¹æ®Šçš„å¤„ç†ï¼šæŠŠä¼ é€’è¿›æ¥çš„å‡½æ•°åå’Œå®ƒéœ€è¦ç»™ä½ çš„æ•°æ®æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼šä¼ é€’è¿›å»çš„å‡½æ•°åæ˜¯showï¼Œå®ƒå‡†å¤‡å¥½çš„æ•°æ®æ˜¯show(â€˜XXXâ€™)ã€‚</li>
<li>æœ€åæœåŠ¡å™¨æŠŠå‡†å¤‡çš„æ•°æ®é€šè¿‡HTTPåè®®è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å†è°ƒç”¨æ‰§è¡Œä¹‹å‰å£°æ˜çš„å›è°ƒå‡½æ•°<code>show</code>ï¼Œå¯¹è¿”å›çš„æ•°æ®è¿›è¡Œæ“ä½œã€‚</li>
</ul>
<p>åœ¨å¼€å‘ä¸­å¯èƒ½ä¼šé‡åˆ°å¤šä¸ªJSONPè¯·æ±‚çš„å›è°ƒå‡½æ•°åæ˜¯ç›¸åŒçš„ï¼Œè¿™æ—¶å€™å°±éœ€è¦è‡ªå·±å°è£…ä¸€ä¸ªJSONPå‡½æ•°ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// index.html</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">&#123; url, params, callback &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>)</span><br><span class="line">    <span class="built_in">window</span>[callback] = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">      <span class="built_in">document</span>.body.removeChild(script)</span><br><span class="line">    &#125;</span><br><span class="line">    params = &#123; ...params, callback &#125; <span class="comment">// wd=b&amp;callback=show</span></span><br><span class="line">    <span class="keyword">let</span> arrs = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> params) &#123;</span><br><span class="line">      arrs.push(<span class="string">`<span class="subst">$&#123;key&#125;</span>=<span class="subst">$&#123;params[key]&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    script.src = <span class="string">`<span class="subst">$&#123;url&#125;</span>?<span class="subst">$&#123;arrs.join(<span class="string">'&amp;'</span>)&#125;</span>`</span></span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(script)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">jsonp(&#123;</span><br><span class="line">  url: <span class="string">'http://127.0.01:8000/say'</span>,</span><br><span class="line">  params: &#123; <span class="attr">wd</span>: <span class="string">'Iloveyou'</span> &#125;,</span><br><span class="line">  callback: <span class="string">'show'</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>ä¸Šé¢è¿™æ®µä»£ç ç›¸å½“äºå‘<code>http://127.0.0.1:8000/say?wd=Iloveyou&amp;callback=show</code>è¿™ä¸ªåœ°å€è¯·æ±‚æ•°æ®ï¼Œç„¶ååå°è¿”å›show(â€˜I love youâ€™)ï¼Œæœ€åä¼šå…è®¸show()è¿™ä¸ªå‡½æ•°ï¼Œæ‰“å°å‡ºâ€™æˆ‘ä¸çˆ±ä½ â€™</p>
<p>åç«¯nodejs<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">let</span> app = express()</span><br><span class="line">app.get(<span class="string">'/say'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> &#123; wd, callback &#125; = req.query</span><br><span class="line">  <span class="built_in">console</span>.log(wd) <span class="comment">// Iloveyou</span></span><br><span class="line">  <span class="built_in">console</span>.log(callback) <span class="comment">// show</span></span><br><span class="line">  res.end(<span class="string">`<span class="subst">$&#123;callback&#125;</span>('æˆ‘ä¸çˆ±ä½ ')`</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">8000</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="JQueryçš„jsonpå½¢å¼"><a href="#JQueryçš„jsonpå½¢å¼" class="headerlink" title="JQueryçš„jsonpå½¢å¼"></a>JQueryçš„jsonpå½¢å¼</h3><p>JSONPéƒ½æ˜¯<code>GET</code>å’Œå¼‚æ­¥è¯·æ±‚ï¼Œä¸å­˜åœ¨å…¶ä»–çš„è¯·æ±‚æ–¹å¼å’ŒåŒæ­¥è¯·æ±‚ï¼Œä¸”JQueryé»˜è®¤å°±ä¼šç»™JSONPçš„è¯·æ±‚æ¸…é™¤ç¼“å­˜ã€‚<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">url:<span class="string">"http://crossdomain.com/jsonServerResponse"</span>,</span><br><span class="line">dataType:<span class="string">"jsonp"</span>,</span><br><span class="line">type:<span class="string">"get"</span>,<span class="comment">//å¯ä»¥çœç•¥</span></span><br><span class="line">jsonpCallback:<span class="string">"show"</span>,<span class="comment">//-&gt;è‡ªå®šä¹‰ä¼ é€’ç»™æœåŠ¡å™¨çš„å‡½æ•°åï¼Œè€Œä¸æ˜¯ä½¿ç”¨jQueryè‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå¯çœç•¥</span></span><br><span class="line">jsonp:<span class="string">"callback"</span>,<span class="comment">//-&gt;æŠŠä¼ é€’å‡½æ•°åçš„é‚£ä¸ªå½¢å‚callbackï¼Œå¯çœç•¥</span></span><br><span class="line">success:<span class="function"><span class="keyword">function</span> (<span class="params">data</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(data);&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h2><p><strong>CORSéœ€è¦æµè§ˆå™¨å’Œåç«¯åŒæ—¶æ”¯æŒã€‚IE8 å’Œ 9 éœ€è¦é€šè¿‡XDomainRequestæ¥å®ç°ã€‚</strong></p>
<p>æµè§ˆå™¨ä¼šè‡ªåŠ¨CORSé€šä¿¡ï¼Œå®ç°CORSé€šä¿¡çš„å…³é”®æ˜¯åç«¯ã€‚åªè¦åç«¯å®ç°äº†CORSï¼Œå°±å®ç°äº†è·¨åŸŸã€‚</p>
<p>æœåŠ¡ç«¯è®¾ç½® Access-Control-Allow-Origin å°±å¯ä»¥å¼€å¯ CORSã€‚ è¯¥å±æ€§è¡¨ç¤ºå“ªäº›åŸŸåå¯ä»¥è®¿é—®èµ„æºï¼Œå¦‚æœè®¾ç½®é€šé…ç¬¦åˆ™è¡¨ç¤ºæ‰€æœ‰ç½‘ç«™éƒ½å¯ä»¥è®¿é—®èµ„æºã€‚</p>
<p>è™½ç„¶è®¾ç½® CORS å’Œå‰ç«¯æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼è§£å†³è·¨åŸŸé—®é¢˜çš„è¯ï¼Œä¼šåœ¨å‘é€è¯·æ±‚æ—¶å‡ºç°ä¸¤ç§æƒ…å†µï¼Œåˆ†åˆ«ä¸ºç®€å•è¯·æ±‚å’Œå¤æ‚è¯·æ±‚ã€‚</p>
<h3 id="ç®€å•è¯·æ±‚"><a href="#ç®€å•è¯·æ±‚" class="headerlink" title="ç®€å•è¯·æ±‚"></a>ç®€å•è¯·æ±‚</h3><p>åªè¦åŒæ—¶æ»¡è¶³ä¸€ä¸‹ä¸¤å¤§æ¡ä»¶ï¼Œå°±å±äºç®€å•è¯·æ±‚<br><strong>æ¡ä»¶1ï¼šä½¿ç”¨ä¸‹åˆ—æ–¹å¼ä¹‹ä¸€ï¼š</strong></p>
<ul>
<li>GET</li>
<li>HEAD</li>
<li>POST</li>
</ul>
<p><strong>æ¡ä»¶2ï¼šContent-Typeçš„å€¼ä»…é™äºä¸‹åˆ—ä¸‰è€…ä¹‹ä¸€ï¼š</strong></p>
<ul>
<li>text/plain</li>
<li>multipart/form-data</li>
<li>application/x-www-form-urlencoded</li>
</ul>
<p>è¯·æ±‚ä¸­çš„ä»»æ„ XMLHttpRequestUpload å¯¹è±¡å‡æ²¡æœ‰æ³¨å†Œä»»ä½•äº‹ä»¶ç›‘å¬å™¨ï¼› XMLHttpRequestUpload å¯¹è±¡å¯ä»¥ä½¿ç”¨ XMLHttpRequest.upload å±æ€§è®¿é—®ã€‚</p>
<h3 id="å¤æ‚è¯·æ±‚"><a href="#å¤æ‚è¯·æ±‚" class="headerlink" title="å¤æ‚è¯·æ±‚"></a>å¤æ‚è¯·æ±‚</h3><p>ä¸ç¬¦åˆä»¥ä¸Šæ¡ä»¶çš„è¯·æ±‚å°±è‚¯å®šæ˜¯å¤æ‚è¯·æ±‚äº†ã€‚<br>å¤æ‚è¯·æ±‚çš„CORSè¯·æ±‚ï¼Œä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œå¢åŠ ä¸€æ¬¡HTTPæŸ¥è¯¢è¯·æ±‚ï¼Œç§°ä¸ºâ€é¢„æ£€â€è¯·æ±‚,è¯¥è¯·æ±‚æ˜¯ option æ–¹æ³•çš„ï¼Œé€šè¿‡è¯¥è¯·æ±‚æ¥çŸ¥é“æœåŠ¡ç«¯æ˜¯å¦å…è®¸è·¨åŸŸè¯·æ±‚ã€‚</p>
<p>æˆ‘ä»¬ç”¨PUTå‘åå°è¯·æ±‚æ—¶ï¼Œå±äºå¤æ‚è¯·æ±‚ï¼Œåå°éœ€åšå¦‚ä¸‹é…ç½®ï¼š<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å…è®¸å“ªä¸ªæ–¹æ³•è®¿é—®æˆ‘</span></span><br><span class="line">res.setHeader(<span class="string">'Access-Control-Allow-Methods'</span>, <span class="string">'PUT'</span>)</span><br><span class="line"><span class="comment">// é¢„æ£€çš„å­˜æ´»æ—¶é—´</span></span><br><span class="line">res.setHeader(<span class="string">'Access-Control-Max-Age'</span>, <span class="number">6</span>)</span><br><span class="line"><span class="comment">// OPTIONSè¯·æ±‚ä¸åšä»»ä½•å¤„ç†</span></span><br><span class="line"><span class="keyword">if</span> (req.method === <span class="string">'OPTIONS'</span>) &#123;</span><br><span class="line">  res.end() </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å®šä¹‰åå°è¿”å›çš„å†…å®¹</span></span><br><span class="line">app.put(<span class="string">'/getData'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.headers)</span><br><span class="line">  res.end(<span class="string">'æˆ‘ä¸çˆ±ä½ '</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹ä¸€ä¸ªå®Œæ•´å¤æ‚è¯·æ±‚çš„ä¾‹å­ï¼Œå¹¶ä¸”ä»‹ç»ä¸‹CORSè¯·æ±‚ç›¸å…³çš„å­—æ®µ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// index.html</span></span><br><span class="line"><span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">'name=xiamen'</span> <span class="comment">// cookieä¸èƒ½è·¨åŸŸ</span></span><br><span class="line">xhr.withCredentials = <span class="literal">true</span> <span class="comment">// å‰ç«¯è®¾ç½®æ˜¯å¦å¸¦cookie</span></span><br><span class="line">xhr.open(<span class="string">'PUT'</span>, <span class="string">'http://localhost:4000/getData'</span>, <span class="literal">true</span>)</span><br><span class="line">xhr.setRequestHeader(<span class="string">'name'</span>, <span class="string">'xiamen'</span>)</span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> ((xhr.status &gt;= <span class="number">200</span> &amp;&amp; xhr.status &lt; <span class="number">300</span>) || xhr.status === <span class="number">304</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(xhr.response)</span><br><span class="line">      <span class="comment">//å¾—åˆ°å“åº”å¤´ï¼Œåå°éœ€è®¾ç½®Access-Control-Expose-Headers</span></span><br><span class="line">      <span class="built_in">console</span>.log(xhr.getResponseHeader(<span class="string">'name'</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">xhr.send()</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//server1.js</span></span><br><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">let</span> app = express();</span><br><span class="line">app.use(express.static(__dirname));</span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//server2.js</span></span><br><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">let</span> app = express()</span><br><span class="line"><span class="keyword">let</span> whitList = [<span class="string">'http://localhost:3000'</span>] <span class="comment">//è®¾ç½®ç™½åå•</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> origin = req.headers.origin</span><br><span class="line">  <span class="keyword">if</span> (whitList.includes(origin)) &#123;</span><br><span class="line">    <span class="comment">// è®¾ç½®å“ªä¸ªæºå¯ä»¥è®¿é—®æˆ‘</span></span><br><span class="line">    res.setHeader(<span class="string">'Access-Control-Allow-Origin'</span>, origin)</span><br><span class="line">    <span class="comment">// å…è®¸æºå¸¦å“ªä¸ªå¤´è®¿é—®æˆ‘</span></span><br><span class="line">    res.setHeader(<span class="string">'Access-Control-Allow-Headers'</span>, <span class="string">'name'</span>)</span><br><span class="line">    <span class="comment">// å…è®¸å“ªä¸ªæ–¹æ³•è®¿é—®æˆ‘</span></span><br><span class="line">    res.setHeader(<span class="string">'Access-Control-Allow-Methods'</span>, <span class="string">'PUT'</span>)</span><br><span class="line">    <span class="comment">// å…è®¸æºå¸¦cookie</span></span><br><span class="line">    res.setHeader(<span class="string">'Access-Control-Allow-Credentials'</span>, <span class="literal">true</span>)</span><br><span class="line">    <span class="comment">// é¢„æ£€çš„å­˜æ´»æ—¶é—´</span></span><br><span class="line">    res.setHeader(<span class="string">'Access-Control-Max-Age'</span>, <span class="number">6</span>)</span><br><span class="line">    <span class="comment">// å…è®¸è¿”å›çš„å¤´</span></span><br><span class="line">    res.setHeader(<span class="string">'Access-Control-Expose-Headers'</span>, <span class="string">'name'</span>)</span><br><span class="line">    <span class="keyword">if</span> (req.method === <span class="string">'OPTIONS'</span>) &#123;</span><br><span class="line">      res.end() <span class="comment">// OPTIONSè¯·æ±‚ä¸åšä»»ä½•å¤„ç†</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br><span class="line">app.put(<span class="string">'/getData'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.headers)</span><br><span class="line">  res.setHeader(<span class="string">'name'</span>, <span class="string">'jw'</span>) <span class="comment">//è¿”å›ä¸€ä¸ªå“åº”å¤´ï¼Œåå°éœ€è®¾ç½®</span></span><br><span class="line">  res.end(<span class="string">'æˆ‘ä¸çˆ±ä½ '</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">'/getData'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.headers)</span><br><span class="line">  res.end(<span class="string">'æˆ‘ä¸çˆ±ä½ '</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.use(express.static(__dirname))</span><br><span class="line">app.listen(<span class="number">4000</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ç”±<a href="http://localhost:3000/index.htmlå‘http://localhost:4000/è·¨åŸŸè¯·æ±‚ï¼Œæ­£å¦‚æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„ï¼Œåç«¯æ˜¯å®ç°" target="_blank" rel="noopener">http://localhost:3000/index.htmlå‘http://localhost:4000/è·¨åŸŸè¯·æ±‚ï¼Œæ­£å¦‚æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„ï¼Œåç«¯æ˜¯å®ç°</a> CORS é€šä¿¡çš„å…³é”®ã€‚</p>
<h2 id="postMessage"><a href="#postMessage" class="headerlink" title="postMessage"></a>postMessage</h2><p>postMessageæ˜¯HTML5 XMLHttpRequest Level 2ä¸­çš„APIï¼Œä¸”æ˜¯ä¸ºæ•°ä¸å¤šå¯ä»¥è·¨åŸŸæ“ä½œçš„windowå±æ€§ä¹‹ä¸€ï¼Œå®ƒå¯ç”¨äºè§£å†³ä»¥ä¸‹æ–¹é¢çš„é—®é¢˜ï¼š</p>
<ul>
<li>é¡µé¢å’Œå…¶æ‰“å¼€çš„æ–°çª—å£çš„æ•°æ®ä¼ é€’</li>
<li>å¤šçª—å£ä¹‹é—´æ¶ˆæ¯ä¼ é€’</li>
<li>é¡µé¢ä¸åµŒå¥—çš„iframeæ¶ˆæ¯ä¼ é€’</li>
<li>ä¸Šé¢ä¸‰ä¸ªåœºæ™¯çš„è·¨åŸŸæ•°æ®ä¼ é€’</li>
</ul>
<p>postMessage()æ–¹æ³•å…è®¸æ¥è‡ªä¸åŒæºçš„è„šæœ¬é‡‡ç”¨å¼‚æ­¥æ–¹å¼è¿›è¡Œæœ‰é™çš„é€šä¿¡ï¼Œå¯ä»¥å®ç°è·¨æ–‡æœ¬æ¡£ã€å¤šçª—å£ã€è·¨åŸŸæ¶ˆæ¯ä¼ é€’ã€‚</p>
<blockquote>
<p>otherWindow.postMessage(message, targetOrigin, [transfer]);</p>
</blockquote>
<ul>
<li>message: å°†è¦å‘é€åˆ°å…¶ä»– windowçš„æ•°æ®ã€‚</li>
<li>targetOrigin:é€šè¿‡çª—å£çš„originå±æ€§æ¥æŒ‡å®šå“ªäº›çª—å£èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯äº‹ä»¶ï¼Œå…¶å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²â€*â€ï¼ˆè¡¨ç¤ºæ— é™åˆ¶ï¼‰æˆ–è€…ä¸€ä¸ªURIã€‚åœ¨å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œå¦‚æœç›®æ ‡çª—å£çš„åè®®ã€ä¸»æœºåœ°å€æˆ–ç«¯å£è¿™ä¸‰è€…çš„ä»»æ„ä¸€é¡¹ä¸åŒ¹é…targetOriginæä¾›çš„å€¼ï¼Œé‚£ä¹ˆæ¶ˆæ¯å°±ä¸ä¼šè¢«å‘é€ï¼›åªæœ‰ä¸‰è€…å®Œå…¨åŒ¹é…ï¼Œæ¶ˆæ¯æ‰ä¼šè¢«å‘é€ã€‚</li>
<li>transfer(å¯é€‰)ï¼šæ˜¯ä¸€ä¸²å’Œmessage åŒæ—¶ä¼ é€’çš„ Transferable å¯¹è±¡. è¿™äº›å¯¹è±¡çš„æ‰€æœ‰æƒå°†è¢«è½¬ç§»ç»™æ¶ˆæ¯çš„æ¥æ”¶æ–¹ï¼Œè€Œå‘é€ä¸€æ–¹å°†ä¸å†ä¿æœ‰æ‰€æœ‰æƒã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸ªä¾‹å­ï¼š <code>http://localhost:3000/a.html</code>é¡µé¢å‘<code>http://localhost:4000/b.html</code>ä¼ é€’â€œæˆ‘çˆ±ä½ â€,ç„¶ååè€…ä¼ å›â€æˆ‘ä¸çˆ±ä½ â€ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// a.html</span></span><br><span class="line">  &lt;iframe src=<span class="string">"http://localhost:4000/b.html"</span> frameborder=<span class="string">"0"</span> id=<span class="string">"frame"</span> onload=<span class="string">"load()"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span> <span class="comment">//ç­‰å®ƒåŠ è½½å®Œè§¦å‘ä¸€ä¸ªäº‹ä»¶</span></span><br><span class="line">  <span class="comment">//å†…åµŒåœ¨http://localhost:3000/a.html</span></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">load</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> frame = <span class="built_in">document</span>.getElementById(<span class="string">'frame'</span>)</span><br><span class="line">        frame.contentWindow.postMessage(<span class="string">'æˆ‘çˆ±ä½ '</span>, <span class="string">'http://localhost:4000'</span>) <span class="comment">//å‘é€æ•°æ®</span></span><br><span class="line">        <span class="built_in">window</span>.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123; <span class="comment">//æ¥å—è¿”å›æ•°æ®</span></span><br><span class="line">          <span class="built_in">console</span>.log(e.data) <span class="comment">//æˆ‘ä¸çˆ±ä½ </span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// b.html</span></span><br><span class="line">  <span class="built_in">window</span>.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.data) <span class="comment">//æˆ‘çˆ±ä½ </span></span><br><span class="line">    e.source.postMessage(<span class="string">'æˆ‘ä¸çˆ±ä½ '</span>, e.origin)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="websocket"><a href="#websocket" class="headerlink" title="websocket"></a>websocket</h2><p>Websocketæ˜¯HTML5çš„ä¸€ä¸ªæŒä¹…åŒ–çš„åè®®ï¼Œå®ƒå®ç°äº†æµè§ˆå™¨ä¸æœåŠ¡å™¨çš„å…¨åŒå·¥é€šä¿¡ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è·¨åŸŸçš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚WebSocketå’ŒHTTPéƒ½æ˜¯åº”ç”¨å±‚åè®®ï¼Œéƒ½åŸºäº TCP åè®®ã€‚ä½†æ˜¯ <strong>WebSocket æ˜¯ä¸€ç§åŒå‘é€šä¿¡åè®®ï¼Œåœ¨å»ºç«‹è¿æ¥ä¹‹åï¼ŒWebSocket çš„ server ä¸ client éƒ½èƒ½ä¸»åŠ¨å‘å¯¹æ–¹å‘é€æˆ–æ¥æ”¶æ•°æ®</strong>ã€‚åŒæ—¶ï¼ŒWebSocket åœ¨å»ºç«‹è¿æ¥æ—¶éœ€è¦å€ŸåŠ© HTTP åè®®ï¼Œè¿æ¥å»ºç«‹å¥½äº†ä¹‹å client ä¸ server ä¹‹é—´çš„åŒå‘é€šä¿¡å°±ä¸ HTTP æ— å…³äº†ã€‚</p>
<p>åŸç”ŸWebSocket APIä½¿ç”¨èµ·æ¥ä¸å¤ªæ–¹ä¾¿ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>Socket.io</code>ï¼Œå®ƒå¾ˆå¥½åœ°å°è£…äº†webSocketæ¥å£ï¼Œæä¾›äº†æ›´ç®€å•ã€çµæ´»çš„æ¥å£ï¼Œä¹Ÿå¯¹ä¸æ”¯æŒwebSocketçš„æµè§ˆå™¨æä¾›äº†å‘ä¸‹å…¼å®¹ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªä¾‹å­ï¼šæœ¬åœ°æ–‡ä»¶<code>socket.html</code>å‘<code>localhost:3000</code>å‘ç”Ÿæ•°æ®å’Œæ¥å—æ•°æ®</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// socket.html</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> socket = <span class="keyword">new</span> WebSocket(<span class="string">'ws://localhost:3000'</span>);</span></span><br><span class="line"><span class="javascript">    socket.onopen = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      socket.send(<span class="string">'æˆ‘çˆ±ä½ '</span>);<span class="comment">//å‘æœåŠ¡å™¨å‘é€æ•°æ®</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    socket.onmessage = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(e.data);<span class="comment">//æ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®</span></span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">let</span> app = express();</span><br><span class="line"><span class="keyword">let</span> WebSocket = <span class="built_in">require</span>(<span class="string">'ws'</span>);<span class="comment">//è®°å¾—å®‰è£…ws</span></span><br><span class="line"><span class="keyword">let</span> wss = <span class="keyword">new</span> WebSocket.Server(&#123;<span class="attr">port</span>:<span class="number">3000</span>&#125;);</span><br><span class="line">wss.on(<span class="string">'connection'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">ws</span>) </span>&#123;</span><br><span class="line">  ws.on(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    ws.send(<span class="string">'æˆ‘ä¸çˆ±ä½ '</span>)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Nodeä¸­é—´ä»¶ä»£ç†-ä¸¤æ¬¡è·¨åŸŸ"><a href="#Nodeä¸­é—´ä»¶ä»£ç†-ä¸¤æ¬¡è·¨åŸŸ" class="headerlink" title="Nodeä¸­é—´ä»¶ä»£ç†(ä¸¤æ¬¡è·¨åŸŸ)"></a>Nodeä¸­é—´ä»¶ä»£ç†(ä¸¤æ¬¡è·¨åŸŸ)</h2><p>å®ç°åŸç†ï¼š<strong>åŒæºç­–ç•¥æ˜¯æµè§ˆå™¨éœ€è¦éµå¾ªçš„æ ‡å‡†ï¼Œè€Œå¦‚æœæ˜¯æœåŠ¡å™¨å‘æœåŠ¡å™¨è¯·æ±‚å°±æ— éœ€éµå¾ªåŒæºç­–ç•¥</strong>ã€‚<br>ä»£ç†æœåŠ¡å™¨ï¼Œéœ€è¦åšä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>æ¥å—å®¢æˆ·ç«¯è¯·æ±‚ ã€‚</li>
<li>å°†<code>è¯·æ±‚</code>è½¬å‘ç»™æœåŠ¡å™¨ã€‚</li>
<li>æ‹¿åˆ°æœåŠ¡å™¨<code>å“åº”</code>æ•°æ®ã€‚</li>
<li>å°†<code>å“åº”</code>è½¬å‘ç»™å®¢æˆ·ç«¯ã€‚</li>
</ul>
<p><img src="nodeproxy.jpg" alt></p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªä¾‹å­ï¼šæœ¬åœ°æ–‡ä»¶index.htmlæ–‡ä»¶ï¼Œé€šè¿‡ä»£ç†æœåŠ¡å™¨<code>http://localhost:3000</code>å‘ç›®æ ‡æœåŠ¡å™¨<code>http://localhost:4000</code>è¯·æ±‚æ•°æ®ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// index.html(http://127.0.0.1:5500)</span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">        url: <span class="string">'http://localhost:3000'</span>,</span></span><br><span class="line"><span class="javascript">        type: <span class="string">'post'</span>,</span></span><br><span class="line"><span class="javascript">        data: &#123; <span class="attr">name</span>: <span class="string">'xiamen'</span>, <span class="attr">password</span>: <span class="string">'123456'</span> &#125;,</span></span><br><span class="line"><span class="javascript">        contentType: <span class="string">'application/json;charset=utf-8'</span>,</span></span><br><span class="line"><span class="javascript">        success: <span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(result) <span class="comment">// &#123;"title":"fontend","password":"123456"&#125;</span></span></span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        error: <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(msg)</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">     <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// server1.js ä»£ç†æœåŠ¡å™¨(http://localhost:3000)</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="comment">// ç¬¬ä¸€æ­¥ï¼šæ¥å—å®¢æˆ·ç«¯è¯·æ±‚</span></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ä»£ç†æœåŠ¡å™¨ï¼Œç›´æ¥å’Œæµè§ˆå™¨ç›´æ¥äº¤äº’ï¼Œéœ€è¦è®¾ç½®CORS çš„é¦–éƒ¨å­—æ®µ</span></span><br><span class="line">  response.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">    <span class="string">'Access-Control-Allow-Origin'</span>: <span class="string">'*'</span>,</span><br><span class="line">    <span class="string">'Access-Control-Allow-Methods'</span>: <span class="string">'*'</span>,</span><br><span class="line">    <span class="string">'Access-Control-Allow-Headers'</span>: <span class="string">'Content-Type'</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// ç¬¬äºŒæ­¥ï¼šå°†è¯·æ±‚è½¬å‘ç»™æœåŠ¡å™¨</span></span><br><span class="line">  <span class="keyword">const</span> proxyRequest = http</span><br><span class="line">    .request(</span><br><span class="line">      &#123;</span><br><span class="line">        host: <span class="string">'127.0.0.1'</span>,</span><br><span class="line">        port: <span class="number">4000</span>,</span><br><span class="line">        url: <span class="string">'/'</span>,</span><br><span class="line">        method: request.method,</span><br><span class="line">        headers: request.headers</span><br><span class="line">      &#125;,</span><br><span class="line">      serverResponse =&gt; &#123;</span><br><span class="line">        <span class="comment">// ç¬¬ä¸‰æ­¥ï¼šæ”¶åˆ°æœåŠ¡å™¨çš„å“åº”</span></span><br><span class="line">        <span class="keyword">var</span> body = <span class="string">''</span></span><br><span class="line">        serverResponse.on(<span class="string">'data'</span>, chunk =&gt; &#123;</span><br><span class="line">          body += chunk</span><br><span class="line">        &#125;)</span><br><span class="line">        serverResponse.on(<span class="string">'end'</span>, () =&gt; &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'The data is '</span> + body)</span><br><span class="line">          <span class="comment">// ç¬¬å››æ­¥ï¼šå°†å“åº”ç»“æœè½¬å‘ç»™æµè§ˆå™¨</span></span><br><span class="line">          response.end(body)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">    .end()</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(<span class="number">3000</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'The proxyServer is running at http://localhost:3000'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// server2.js(http://localhost:4000)</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">const</span> data = &#123; <span class="attr">title</span>: <span class="string">'fontend'</span>, <span class="attr">password</span>: <span class="string">'123456'</span> &#125;</span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">request, response</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (request.url === <span class="string">'/'</span>) &#123;</span><br><span class="line">    response.end(<span class="built_in">JSON</span>.stringify(data))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(<span class="number">4000</span>, () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'The server is running at http://localhost:4000'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ç»è¿‡ä¸¤æ¬¡è·¨åŸŸï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯æµè§ˆå™¨å‘ä»£ç†æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œä¹Ÿéµå¾ªåŒæºç­–ç•¥ï¼Œæœ€ååœ¨index.htmlæ–‡ä»¶æ‰“å°å‡º<code>{&quot;title&quot;:&quot;fontend&quot;,&quot;password&quot;:&quot;123456&quot;}</code></p>
<h2 id="nginxåå‘ä»£ç†"><a href="#nginxåå‘ä»£ç†" class="headerlink" title="nginxåå‘ä»£ç†"></a>nginxåå‘ä»£ç†</h2><p>å®ç°åŸç†ç±»ä¼¼äºNodeä¸­é—´ä»¶ä»£ç†ï¼Œéœ€è¦ä½ æ­å»ºä¸€ä¸ªä¸­è½¬nginxæœåŠ¡å™¨ï¼Œç”¨äºè½¬å‘è¯·æ±‚ã€‚</p>
<p>ä½¿ç”¨nginxåå‘ä»£ç†å®ç°è·¨åŸŸï¼Œæ˜¯æœ€ç®€å•çš„è·¨åŸŸæ–¹å¼ã€‚åªéœ€è¦ä¿®æ”¹nginxçš„é…ç½®å³å¯è§£å†³è·¨åŸŸé—®é¢˜ï¼Œæ”¯æŒæ‰€æœ‰æµè§ˆå™¨ï¼Œæ”¯æŒsessionï¼Œä¸éœ€è¦ä¿®æ”¹ä»»ä½•ä»£ç ï¼Œå¹¶ä¸”ä¸ä¼šå½±å“æœåŠ¡å™¨æ€§èƒ½ã€‚</p>
<p>å®ç°æ€è·¯ï¼šé€šè¿‡nginxé…ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼ˆåŸŸåä¸domain1ç›¸åŒï¼Œç«¯å£ä¸åŒï¼‰åšè·³æ¿æœºï¼Œåå‘ä»£ç†è®¿é—®domain2æ¥å£ï¼Œå¹¶ä¸”å¯ä»¥é¡ºä¾¿ä¿®æ”¹cookieä¸­domainä¿¡æ¯ï¼Œæ–¹ä¾¿å½“å‰åŸŸcookieå†™å…¥ï¼Œå®ç°è·¨åŸŸç™»å½•ã€‚</p>
<p>å…ˆä¸‹è½½nginxï¼Œç„¶åå°†nginxç›®å½•ä¸‹çš„nginx.confä¿®æ”¹å¦‚ä¸‹:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// proxyæœåŠ¡å™¨</span><br><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  www.domain1.com;</span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass   http://www.domain2.com:8080;  #åå‘ä»£ç†</span><br><span class="line">        proxy_cookie_domain www.domain2.com www.domain1.com; #ä¿®æ”¹cookieé‡ŒåŸŸå</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line"></span><br><span class="line">        # å½“ç”¨webpack-dev-serverç­‰ä¸­é—´ä»¶ä»£ç†æ¥å£è®¿é—®nignxæ—¶ï¼Œæ­¤æ—¶æ— æµè§ˆå™¨å‚ä¸ï¼Œæ•…æ²¡æœ‰åŒæºé™åˆ¶ï¼Œä¸‹é¢çš„è·¨åŸŸé…ç½®å¯ä¸å¯ç”¨</span><br><span class="line">        add_header Access-Control-Allow-Origin http://www.domain1.com;  #å½“å‰ç«¯åªè·¨åŸŸä¸å¸¦cookieæ—¶ï¼Œå¯ä¸º*</span><br><span class="line">        add_header Access-Control-Allow-Credentials true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åé€šè¿‡å‘½ä»¤è¡Œ<code>nginx -s reload</code>å¯åŠ¨nginx</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// index.html</span></span><br><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line"><span class="comment">// å‰ç«¯å¼€å…³ï¼šæµè§ˆå™¨æ˜¯å¦è¯»å†™cookie</span></span><br><span class="line">xhr.withCredentials = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// è®¿é—®nginxä¸­çš„ä»£ç†æœåŠ¡å™¨</span></span><br><span class="line">xhr.open(<span class="string">'get'</span>, <span class="string">'http://www.domain1.com:81/?user=admin'</span>, <span class="literal">true</span>);</span><br><span class="line">xhr.send(); js</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">var</span> server = http.createServer();</span><br><span class="line"><span class="keyword">var</span> qs = <span class="built_in">require</span>(<span class="string">'querystring'</span>);</span><br><span class="line">server.on(<span class="string">'request'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> params = qs.parse(req.url.substring(<span class="number">2</span>));</span><br><span class="line">    <span class="comment">// å‘å‰å°å†™cookie</span></span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">        <span class="string">'Set-Cookie'</span>: <span class="string">'l=a123456;Path=/;Domain=www.domain2.com;HttpOnly'</span>   <span class="comment">// HttpOnly:è„šæœ¬æ— æ³•è¯»å–</span></span><br><span class="line">    &#125;);</span><br><span class="line">    res.write(<span class="built_in">JSON</span>.stringify(params));</span><br><span class="line">    res.end();</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(<span class="string">'8080'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Server is running at port 8080...'</span>);</span><br></pre></td></tr></table></figure>
<h2 id="window-name-iframe"><a href="#window-name-iframe" class="headerlink" title="window.name + iframe"></a>window.name + iframe</h2><p>window.nameå±æ€§çš„ç‹¬ç‰¹ä¹‹å¤„ï¼šnameå€¼åœ¨ä¸åŒçš„é¡µé¢ï¼ˆç”šè‡³ä¸åŒåŸŸåï¼‰åŠ è½½åä¾æ—§å­˜åœ¨ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒéå¸¸é•¿çš„ name å€¼ï¼ˆ2MBï¼‰ã€‚</p>
<p>å…¶ä¸­a.htmlå’Œb.htmlæ˜¯åŒåŸŸçš„ï¼Œéƒ½æ˜¯<code>http://localhost:3000</code>;è€Œc.htmlæ˜¯<code>http://localhost:4000</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// a.html(http://localhost:3000/b.html)</span><br><span class="line">  <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"http://localhost:4000/c.html"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">onload</span>=<span class="string">"load()"</span> <span class="attr">id</span>=<span class="string">"iframe"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> first = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// onloadäº‹ä»¶ä¼šè§¦å‘2æ¬¡ï¼Œç¬¬1æ¬¡åŠ è½½è·¨åŸŸé¡µï¼Œå¹¶ç•™å­˜æ•°æ®äºwindow.name</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">load</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line">      if(first)&#123;</span><br><span class="line"><span class="javascript">      <span class="comment">// ç¬¬1æ¬¡onload(è·¨åŸŸé¡µ)æˆåŠŸåï¼Œåˆ‡æ¢åˆ°åŒåŸŸä»£ç†é¡µé¢</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">'iframe'</span>);</span></span><br><span class="line"><span class="javascript">        iframe.src = <span class="string">'http://localhost:3000/b.html'</span>;</span></span><br><span class="line"><span class="javascript">        first = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">      &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// ç¬¬2æ¬¡onload(åŒåŸŸb.htmlé¡µ)æˆåŠŸåï¼Œè¯»å–åŒåŸŸwindow.nameä¸­æ•°æ®</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(iframe.contentWindow.name);</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>b.htmlä¸ºä¸­é—´ä»£ç†é¡µï¼Œä¸a.htmlåŒåŸŸï¼Œå†…å®¹ä¸ºç©ºã€‚<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// c.html(http://localhost:4000/c.html)</span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">   <span class="built_in">window</span>.name = <span class="string">'æˆ‘ä¸çˆ±ä½ '</span>  </span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>é€šè¿‡iframeçš„srcå±æ€§ç”±å¤–åŸŸè½¬å‘æœ¬åœ°åŸŸï¼Œè·¨åŸŸæ•°æ®å³ç”±iframeçš„window.nameä»å¤–åŸŸä¼ é€’åˆ°æœ¬åœ°åŸŸã€‚è¿™ä¸ªå°±å·§å¦™åœ°ç»•è¿‡äº†æµè§ˆå™¨çš„è·¨åŸŸè®¿é—®é™åˆ¶ï¼Œä½†åŒæ—¶å®ƒåˆæ˜¯å®‰å…¨æ“ä½œã€‚</p>
<h2 id="location-hash-iframe"><a href="#location-hash-iframe" class="headerlink" title="location.hash + iframe"></a>location.hash + iframe</h2><p>å®ç°åŸç†ï¼š a.htmlæ¬²ä¸c.htmlè·¨åŸŸç›¸äº’é€šä¿¡ï¼Œé€šè¿‡ä¸­é—´é¡µb.htmlæ¥å®ç°ã€‚ ä¸‰ä¸ªé¡µé¢ï¼Œä¸åŒåŸŸä¹‹é—´åˆ©ç”¨iframeçš„location.hashä¼ å€¼ï¼Œç›¸åŒåŸŸä¹‹é—´ç›´æ¥jsè®¿é—®æ¥é€šä¿¡ã€‚</p>
<p>å…·ä½“å®ç°æ­¥éª¤ï¼šä¸€å¼€å§‹a.htmlç»™c.htmlä¼ ä¸€ä¸ªhashå€¼ï¼Œç„¶åc.htmlæ”¶åˆ°hashå€¼åï¼Œå†æŠŠhashå€¼ä¼ é€’ç»™b.htmlï¼Œæœ€åb.htmlå°†ç»“æœæ”¾åˆ°a.htmlçš„hashå€¼ä¸­ã€‚<br>åŒæ ·çš„ï¼Œa.htmlå’Œb.htmlæ˜¯åŒåŸŸçš„ï¼Œéƒ½æ˜¯<code>http://localhost:3000</code>;è€Œc.htmlæ˜¯<code>http://localhost:4000</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// a.html</span><br><span class="line"> <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"http://localhost:4000/c.html#iloveyou"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">   <span class="built_in">window</span>.onhashchange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">//æ£€æµ‹hashçš„å˜åŒ–</span></span></span><br><span class="line"><span class="javascript">     <span class="built_in">console</span>.log(location.hash);</span></span><br><span class="line">   &#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// b.html</span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">   <span class="built_in">window</span>.parent.parent.location.hash = location.hash </span></span><br><span class="line"><span class="javascript">   <span class="comment">//b.htmlå°†ç»“æœæ”¾åˆ°a.htmlçš„hashå€¼ä¸­ï¼Œb.htmlå¯é€šè¿‡parent.parentè®¿é—®a.htmlé¡µé¢</span></span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// c.html</span></span><br><span class="line"><span class="built_in">console</span>.log(location.hash);</span><br><span class="line"> <span class="keyword">let</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>);</span><br><span class="line"> iframe.src = <span class="string">'http://localhost:3000/b.html#idontloveyou'</span>;</span><br><span class="line"> <span class="built_in">document</span>.body.appendChild(iframe);</span><br></pre></td></tr></table></figure>
<h2 id="document-domain-iframe"><a href="#document-domain-iframe" class="headerlink" title="document.domain + iframe"></a>document.domain + iframe</h2><p><strong>è¯¥æ–¹å¼åªèƒ½ç”¨äºäºŒçº§åŸŸåç›¸åŒçš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ a.test.com å’Œ b.test.com é€‚ç”¨äºè¯¥æ–¹å¼ã€‚</strong></p>
<p>åªéœ€è¦ç»™é¡µé¢æ·»åŠ <code>document.domain =&#39;test.com&#39;</code> è¡¨ç¤ºäºŒçº§åŸŸåéƒ½ç›¸åŒå°±å¯ä»¥å®ç°è·¨åŸŸã€‚</p>
<p>å®ç°åŸç†ï¼šä¸¤ä¸ªé¡µé¢éƒ½é€šè¿‡jså¼ºåˆ¶è®¾ç½®<code>document.domain</code>ä¸ºåŸºç¡€ä¸»åŸŸï¼Œå°±å®ç°äº†åŒåŸŸã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸ªä¾‹å­ï¼šé¡µé¢<code>a.zf1.cn:3000/a.html</code>è·å–é¡µé¢<code>b.zf1.cn:3000/b.html</code>ä¸­açš„å€¼</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">// a.html</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> helloa</span><br><span class="line">  <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"http://b.zf1.cn:3000/b.html"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">onload</span>=<span class="string">"load()"</span> <span class="attr">id</span>=<span class="string">"frame"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.domain = <span class="string">'zf1.cn'</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">load</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(frame.contentWindow.a);</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">/ b.html</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   hellob</span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">     <span class="built_in">document</span>.domain = <span class="string">'zf1.cn'</span></span></span><br><span class="line"><span class="javascript">     <span class="keyword">var</span> a = <span class="number">100</span>;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ul>
<li>CORSæ”¯æŒæ‰€æœ‰ç±»å‹çš„HTTPè¯·æ±‚ï¼Œæ˜¯è·¨åŸŸHTTPè¯·æ±‚çš„æ ¹æœ¬è§£å†³æ–¹æ¡ˆ</li>
<li>JSONPåªæ”¯æŒGETè¯·æ±‚ï¼ŒJSONPçš„ä¼˜åŠ¿åœ¨äºæ”¯æŒè€å¼æµè§ˆå™¨ï¼Œä»¥åŠå¯ä»¥å‘ä¸æ”¯æŒCORSçš„ç½‘ç«™è¯·æ±‚æ•°æ®ã€‚</li>
<li>ä¸ç®¡æ˜¯Nodeä¸­é—´ä»¶ä»£ç†è¿˜æ˜¯nginxåå‘ä»£ç†ï¼Œä¸»è¦æ˜¯é€šè¿‡åŒæºç­–ç•¥å¯¹æœåŠ¡å™¨ä¸åŠ é™åˆ¶ã€‚</li>
<li>æ—¥å¸¸å·¥ä½œä¸­ï¼Œç”¨å¾—æ¯”è¾ƒå¤šçš„è·¨åŸŸæ–¹æ¡ˆæ˜¯corså’Œnginxåå‘ä»£ç†</li>
</ul>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2016/04/cors.html</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage</a></p>
<p><a href="https://segmentfault.com/a/1190000011145364" target="_blank" rel="noopener">https://segmentfault.com/a/1190000011145364</a></p>
]]></content>
      <categories>
        <category>HTML</category>
      </categories>
      <tags>
        <tag>HTML</tag>
        <tag>è·¨åŸŸ</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSä¸­çš„Webå¼€å‘</title>
    <url>/2019/03/25/IOS%E4%B8%AD%E7%9A%84Web%E5%BC%80%E5%8F%91/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>ç§»åŠ¨å¼€å‘é¢†åŸŸè¿‘å¹´æ¥å·²ç»é€æ¸å‘Šåˆ«äº†é‡è›®ç”Ÿé•¿çš„æ—¶æœŸï¼Œè¿›å…¥äº†ç›¸å¯¹æˆç†Ÿçš„æ—¶ä»£ã€‚è€Œä¸€ç›´ä»¥æ¥ Native å’Œ Web çš„äº‰è®ºä»æœªåœæ­¢ï¼Œé€šè¿‡å¼€å‘è€…å­œå­œä¸å€¦çš„åŠªåŠ›ï¼ŒWeb çš„æ•ˆç‡å’Œ Native çš„ä½“éªŒä¹Ÿä¸€ç›´åœ¨å¯»æ±‚ç€å¹³è¡¡ã€‚æœ¬æ–‡èšç„¦ iOS å¼€å‘å’Œ Web å¼€å‘çš„äº¤å‰ç‚¹ï¼Œå¸Œæœ›èƒ½é€šè¿‡ç®€è¦çš„ä»‹ç»ï¼Œå¸®åŠ©å¼€å‘è€…ä¸€çª¥ Hybrid å’Œå¤§å‰ç«¯çš„æ„æƒ³ã€‚</p>
</blockquote>
<a id="more"></a>
<p><img src="intro.jpg" alt></p>
<h1 id="IOSä¸­webå®¹å™¨ä¸åŠ è½½"><a href="#IOSä¸­webå®¹å™¨ä¸åŠ è½½" class="headerlink" title="IOSä¸­webå®¹å™¨ä¸åŠ è½½"></a>IOSä¸­webå®¹å™¨ä¸åŠ è½½</h1><h2 id="1ã€IOSä¸­çš„Webå®¹å™¨"><a href="#1ã€IOSä¸­çš„Webå®¹å™¨" class="headerlink" title="1ã€IOSä¸­çš„Webå®¹å™¨"></a>1ã€IOSä¸­çš„Webå®¹å™¨</h2><p>ç›®å‰IOSç³»ç»Ÿä¸ºå¼€å‘è€…æä¾›ä¸‰ç§æ–¹å¼æ¥å±•ç¤ºWebå†…å®¹</p>
<h3 id="UIWebView"><a href="#UIWebView" class="headerlink" title="UIWebView"></a>UIWebView</h3><p>UIWebView ä» iOS2 å¼€å§‹å°±ä½œä¸º App å†…å±•ç¤º Web å†…å®¹çš„å®¹å™¨ï¼Œä½†æ˜¯é•¿ä¹…ä»¥æ¥ä¸€ç›´é­å—å¼€å‘è€…çš„è¯Ÿç—…ï¼›ç³»ç»Ÿçº§çš„å†…å­˜æ³„éœ²ã€æé«˜å†…å­˜å³°å€¼ã€è¾ƒå·®çš„ç¨³å®šæ€§ã€Touch Delay ä»¥åŠ Javascript çš„è¿è¡Œæ€§èƒ½åŠé€šä¿¡é™åˆ¶ç­‰ç­‰ã€‚åœ¨ iOS12 ä»¥åå·²ç»æ ‡è®°ä¸º Deprecated ä¸å†ç»´æŠ¤ã€‚</p>
<h3 id="WKWebView"><a href="#WKWebView" class="headerlink" title="WKWebView"></a>WKWebView</h3><p>åœ¨ iOS 8 ä¸­ï¼ŒApple å¼•å…¥äº†æ–°ä¸€ä»£çš„ WebKit frameworkï¼ŒåŒæ—¶æä¾›äº† WKWebView ç”¨æ¥æ›¿ä»£ä¼ ç»Ÿçš„ UIWebViewã€‚å®ƒæ›´åŠ çš„ç¨³å®šã€æ‹¥æœ‰ 60fps æ»šåŠ¨åˆ·æ–°ç‡ã€ä¸°å¯Œçš„æ‰‹åŠ¿ã€KVOã€é«˜æ•ˆçš„ Web å’Œ Native é€šä¿¡ï¼Œé»˜è®¤è¿›åº¦æ¡ç­‰ç­‰åŠŸèƒ½ï¼Œè€Œæœ€é‡è¦çš„ï¼Œæ˜¯ä½¿ç”¨äº†å’Œ safari ç›¸åŒçš„ Nitro å¼•æ“æå¤§æå‡äº† Javascript çš„è¿è¡Œé€Ÿåº¦ã€‚WKWebView ç‹¬ç«‹çš„è¿›ç¨‹ç®¡ç†ï¼Œä¹Ÿé™ä½äº†å†…å­˜å ç”¨åŠ Crash å¯¹ä¸» App çš„å½±å“ã€‚</p>
<h3 id="SFSafariViewController"><a href="#SFSafariViewController" class="headerlink" title="SFSafariViewController"></a>SFSafariViewController</h3><p>åœ¨ iOS 9 ä¸­ï¼ŒApple å¼•å…¥äº† SFSafariViewControllerã€‚å…¶ç‰¹ç‚¹å°±æ˜¯åœ¨ App å†…å¯ä»¥æ‰“å¼€ä¸€ä¸ªé«˜åº¦æ ‡å‡†åŒ–çš„ã€å’Œ Safari ä¸€æ ·ç•Œé¢å’Œç‰¹æ€§çš„é¡µé¢ã€‚åŒæ—¶ SFSafariViewController æ”¯æŒå’Œ Safari å…±äº« Cookie å’Œè¡¨å•æ•°æ®ç­‰ç­‰ã€‚</p>
<h3 id="Webå®¹å™¨é€‰å‹"><a href="#Webå®¹å™¨é€‰å‹" class="headerlink" title="Webå®¹å™¨é€‰å‹"></a>Webå®¹å™¨é€‰å‹</h3><p>å¯¹äº SFSafariViewControllerï¼šç”±äºå…¶æ ‡å‡†åŒ–ç¨‹åº¦ä¹‹é«˜ï¼Œä½¿ä¹‹ç•Œé¢å’Œäº¤äº’é€»è¾‘æ— æ³•å’Œ App ç»Ÿä¸€ï¼ŒåŸºäº App çš„æ•´ä½“ä½“éªŒçš„è€ƒè™‘ï¼Œä¸€èˆ¬éƒ½ä½¿ç”¨åœ¨ç›¸å¯¹ç‹¬ç«‹çš„åŠŸèƒ½å’Œæ¨¡å—ä¸­ï¼Œæœ€å¸¸è§çš„å°±æ˜¯åœ¨ App å†…æ‰“å¼€ App Store æˆ–è€…å¹¿å‘Šã€æ¸¸æˆæ¨å¹¿çš„é¡µé¢ã€‚</p>
<p>å¯¹äº UIWebView/WKWebViewï¼šå¦‚æœè¯´ä¹‹å‰ç”±äº NSURLProtocol çš„é—®é¢˜ï¼Œå¥½å¤š App éƒ½åœ¨ç»§ç»­ä½¿ç”¨ UIWebViewï¼Œé‚£ä¹ˆéšç€ App æ”¾å¼ƒç»´æŠ¤ UIWebViewï¼ˆiOS12ï¼‰ï¼Œå…¨éƒ¨çš„ App åº”è¯¥ä¼šé™†ç»­çš„åˆ‡æ¢åˆ° WKWebView ä¸­æ¥ã€‚å½“ç„¶ï¼Œæœ€åˆ WKWebView ä¹Ÿä¸ºå¼€å‘è€…ä»¬å¸¦æ¥äº†ä¸€äº›éš¾é¢˜ï¼Œä½†æ˜¯éšç€ç³»ç»Ÿçš„å‡çº§ä¸ä¸šåŠ¡é€»è¾‘çš„é€‚é…ä¹Ÿé€æ­¥çš„ä¿®å¤ï¼Œåæ–‡ä¼šåˆ—ä¸¾å‡ ä¸ªæœ€ä¸ºå…³æ³¨çš„æŠ€æœ¯ç‚¹ã€‚</p>
<p>UIWebView/WKWebView å¯¹ä¸» App å†…å­˜çš„å½±å“ï¼š<br><img src="memory.jpg" alt></p>
<h2 id="2ã€WebKit-æ¡†æ¶ä¸ä½¿ç”¨"><a href="#2ã€WebKit-æ¡†æ¶ä¸ä½¿ç”¨" class="headerlink" title="2ã€WebKit æ¡†æ¶ä¸ä½¿ç”¨"></a>2ã€WebKit æ¡†æ¶ä¸ä½¿ç”¨</h2><h3 id="WebKit-framework"><a href="#WebKit-framework" class="headerlink" title="WebKit.framework"></a>WebKit.framework</h3><p>WebKit æ˜¯ä¸€ä¸ªå¼€æºçš„ Web æµè§ˆå™¨å¼•æ“ã€‚æ¯å½“è°ˆåˆ° WebKitï¼Œå¼€å‘è€…å¸¸å¸¸è¿·æƒ‘äºå®ƒå’Œ WebKit2ã€Safariã€iOS ä¸­çš„ frameworkã€ä»¥åŠ Chromium ç­‰æµè§ˆå™¨çš„å…³ç³»ã€‚</p>
<p>å¹¿ä¹‰çš„ WebKit å…¶å®å°±æ˜¯æŒ‡ WebCoreï¼Œå®ƒä¸»è¦åŒ…å«äº† HTML å’Œ CSS çš„è§£æã€å¸ƒå±€å’Œå®šä½è¿™ç±»æ¸²æŸ“ HTML çš„åŠŸèƒ½é€»è¾‘ã€‚è€Œç‹­ä¹‰çš„ WebKit å°±æ˜¯åœ¨ WebCore çš„åŸºç¡€ä¸Šï¼Œä¸åŒå¹³å°å°è£… Javascript å¼•æ“ã€ç½‘ç»œå±‚ã€GPU ç›¸å…³çš„æŠ€æœ¯ï¼ˆWebGLã€è§†é¢‘ï¼‰ã€ç»˜åˆ¶æ¸²æŸ“æŠ€æœ¯ä»¥åŠå„ä¸ªå¹³å°å¯¹åº”çš„æ¥å£ï¼Œå½¢æˆæˆ‘ä»¬å¯ä»¥ç”¨çš„ WebView æˆ–æµè§ˆå™¨ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ WebKit Portsã€‚</p>
<p><img src="webkit.jpg" alt></p>
<p>æ¯”å¦‚åœ¨ Safari ä¸­ JS çš„å¼•æ“ä½¿ç”¨ JavascriptCoreï¼Œè€Œ Chromium ä¸­ä½¿ç”¨ V8ï¼›æ¸²æŸ“æ–¹é¢ Safari ä½¿ç”¨ CoreGraphicsï¼Œè€Œ Chromium ä¸­ä½¿ç”¨ Skiaï¼›ç½‘ç»œæ–¹é¢ Safari ä½¿ç”¨ CFNetworkï¼Œè€Œ Chromium ä¸­ä½¿ç”¨ Chromium stack ç­‰ç­‰ã€‚è€Œ WebKit2 æ˜¯ç›¸å¯¹äºç‹­ä¹‰ä¸Šçš„ WebKit æ¶æ„è€Œè¨€ï¼Œä¸»è¦å˜åŒ–æ˜¯åœ¨ API å±‚æ”¯æŒå¤šè¿›ç¨‹ï¼Œåˆ†ç¦»äº† UI å’Œ Web æ¥å£çš„è¿›ç¨‹ï¼Œä½¿ä¹‹é€šè¿‡ IPC æ¥è¿›è¡Œé€šè®¯ã€‚</p>
<p>å¯¹äº iOS ä¸­çš„ WebKit.framework å°±æ˜¯åœ¨ WebCoreã€åº•å±‚æ¡¥æ¥ã€JSCore å¼•æ“ç­‰æ ¸å¿ƒæ¨¡å—çš„åŸºç¡€ä¸Šï¼Œé’ˆå¯¹ iOS å¹³å°çš„é¡¹ç›®å°è£…ã€‚å®ƒåŸºäºæ–°çš„ WKWebViewï¼Œæä¾›äº†ä¸€ç³»åˆ—æµè§ˆç‰¹æ€§çš„è®¾ç½®ï¼Œä»¥åŠç®€å•æ–¹ä¾¿çš„åŠ è½½å›è°ƒã€‚è€Œå…·ä½“ç±»åŠä½¿ç”¨ï¼Œå¼€å‘è€…å¯ä»¥æŸ¥é˜…å®˜æ–¹æ–‡æ¡£:</p>
<blockquote>
<p><a href="https://developer.apple.com/documentation/webkit" target="_blank" rel="noopener">https://developer.apple.com/documentation/webkit</a></p>
</blockquote>
<p><img src="webkit2.jpg" alt></p>
<h3 id="Web-å®¹å™¨ä½¿ç”¨æµç¨‹ä¸å…³é”®èŠ‚ç‚¹"><a href="#Web-å®¹å™¨ä½¿ç”¨æµç¨‹ä¸å…³é”®èŠ‚ç‚¹" class="headerlink" title="Web å®¹å™¨ä½¿ç”¨æµç¨‹ä¸å…³é”®èŠ‚ç‚¹"></a>Web å®¹å™¨ä½¿ç”¨æµç¨‹ä¸å…³é”®èŠ‚ç‚¹</h3><p>å¯¹äºå¤§éƒ¨åˆ†æ—¥å¸¸ä½¿ç”¨æ¥è¯´ï¼Œå¼€å‘è€…éœ€è¦å…³æ³¨çš„å°±æ˜¯ WKWebView çš„åˆ›å»ºã€é…ç½®ã€åŠ è½½ã€ä»¥åŠç³»ç»Ÿå›è°ƒçš„æ¥æ”¶ã€‚</p>
<p><img src="webrongqi.jpg" alt></p>
<p>å¯¹äº Web å¼€å‘è€…ï¼Œä¸šåŠ¡é€»è¾‘ä¸€èˆ¬é€šè¿‡åŸºäº Web é¡µé¢ä¸­ Dom æ¸²æŸ“çš„å…³é”®èŠ‚ç‚¹æ¥å¤„ç†ã€‚è€Œå¯¹äº iOS å¼€å‘è€…ï¼ŒWKWebView æä¾›çš„çš„æ³¨å†Œã€åŠ è½½å’Œå›è°ƒæ—¶æœºï¼Œæ²¡æœ‰æ˜ç¡®çš„ä¸ Web åŠ è½½çš„å…³é”®èŠ‚ç‚¹ç›¸å…³è”ã€‚å‡†ç¡®çš„ç†è§£å’Œå¤„ç†ä¸¤ä¸ªç»´åº¦çš„åŠ è½½é¡ºåºï¼Œé€‰æ‹©åˆç†çš„ä¸šåŠ¡é€»è¾‘å¤„ç†æ—¶æœºï¼Œæ‰å¯ä»¥å®ç°å‡†ç¡®è€Œé«˜æ•ˆçš„åº”ç”¨ã€‚</p>
<p><img src="webrongqi2.jpg" alt></p>
<h3 id="WKWebView-å¸¸è§é—®é¢˜"><a href="#WKWebView-å¸¸è§é—®é¢˜" class="headerlink" title="WKWebView å¸¸è§é—®é¢˜"></a>WKWebView å¸¸è§é—®é¢˜</h3><p>ä½¿ç”¨ WKWebView å¸¦æ¥çš„å¦å¤–ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æºç ç†è§£éƒ¨åˆ†åŠ è½½é€»è¾‘ï¼Œä¸º Crash æä¾›ä¸€äº›æ€è·¯ï¼Œæˆ–è€…ä½¿ç”¨ä¸€äº›ç§æœ‰æ–¹æ³•å¤„ç†å¤æ‚ä¸šåŠ¡é€»è¾‘ã€‚</p>
<p><strong>NSURLProtocol</strong></p>
<p>WKWebView æœ€ä¸ºæ˜¾è‘—çš„æ”¹å˜ï¼Œå°±æ˜¯ä¸æ”¯æŒ NSURLProtocolã€‚ä¸ºäº†å…¼å®¹æ—§çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸€éƒ¨åˆ† App é€šè¿‡ WKBrowsingContextController ä¸­çš„éå…¬å¼€æ–¹æ³•å®ç°äº† NSURLProtocolã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// WKBrowsingContextController</span></span><br><span class="line"> + (<span class="keyword">void</span>)registerSchemeForCustomProtocol:(<span class="built_in">NSString</span> *)scheme <span class="built_in">WK_API_DEPRECATED_WITH_REPLACEMENT</span>(<span class="string">"WKURLSchemeHandler"</span>, macos(<span class="number">10.10</span>, <span class="built_in">WK_MAC_TBA</span>), ios(<span class="number">8.0</span>, <span class="built_in">WK_IOS_TBA</span>));</span><br></pre></td></tr></table></figure>
<p>åœ¨ iOS 11 ä¸­ï¼Œç³»ç»Ÿå¢åŠ äº† setURLSchemeHandler å‡½æ•°ç”¨æ¥æ‹¦æˆªè‡ªå®šä¹‰çš„ Schemeã€‚ä½†æ˜¯ä¸åŒäº UIWebViewï¼Œæ–°çš„å‡½æ•°åªèƒ½æ‹¦æˆªè‡ªå®šä¹‰çš„ Scheme(SchemeRegistry.cpp)ï¼Œå¯¹ä½¿ç”¨æœ€å¤šçš„ HTTP/HTTPS ä¾ç„¶ä¸èƒ½æœ‰æ•ˆçš„æ‹¦æˆªã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//SchemeRegistry</span></span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">const</span> StringVectorFunction functions[] &#123;</span><br><span class="line">     builtinSecureSchemes,                <span class="comment">// about;data...</span></span><br><span class="line">     builtinSchemesWithUniqueOrigins,     <span class="comment">// javascript...</span></span><br><span class="line">     builtinEmptyDocumentSchemes,</span><br><span class="line">     builtinCanDisplayOnlyIfCanRequestSchemes,</span><br><span class="line">     builtinCORSEnabledSchemes,           <span class="comment">//http;https</span></span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
<p><strong>ç™½å±</strong></p>
<p>é€šå¸¸ WKWebView ç™½å±çš„åŸå› ä¸»è¦åˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯ç”±äº Web çš„è¿›ç¨‹ Crashï¼ˆå¤šè§äºå†…éƒ¨è¿›ç¨‹é€šä¿¡ï¼‰ï¼›ä¸€ç§å°±æ˜¯ WebView æ¸²æŸ“æ—¶çš„é”™è¯¯ï¼ˆDebug ä¸€åˆ‡æ­£å¸¸åªæ˜¯æ²¡æœ‰å¯¹åº”çš„å†…å®¹ï¼‰ã€‚å¯¹äºç™½å±çš„æ£€æµ‹ï¼Œå‰è€…åœ¨ iOS9 ä¹‹åç³»ç»Ÿæä¾›äº†å¯¹åº” Crash çš„å›è°ƒå‡½æ•°ï¼ŒåŒæ—¶ä¸šç•Œä¹Ÿæœ‰é€šè¿‡åˆ¤æ–­ URL/Title æ˜¯å¦ä¸ºç©ºçš„æ–¹å¼ä½œä¸ºè¾…åŠ©ï¼›åè€…ä¸šç•Œé€šè¿‡è§†å›¾æ ‘å¯¹æ¯”ï¼Œåˆ¤æ–­ SubView æ˜¯å¦åŒ…å« WKCompsitingViewï¼Œä»¥åŠé€šè¿‡éšæœºç‚¹æˆªå›¾ç­‰æ–¹å¼ä½œä¸ºç™½å±åˆ¤æ–­çš„ä¾æ®ã€‚</p>
<p>å…¶ä»– WKWebView çš„ç³»ç»Ÿçº§é—®é¢˜å¦‚ Cookieã€POST å‚æ•°ã€å¼‚æ­¥ Javascript ç­‰ç­‰ä¸€ç³»åˆ—çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä¸šåŠ¡é€»è¾‘çš„è°ƒæ•´é‡æ–°é€‚é…ã€‚</p>
<p>ç”±äº WebKit æºç ç­‰å¼€æ”¾æ€§ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ç§æœ‰æ–¹æ³•æ¥ç®€åŒ–ä»£ç é€»è¾‘ã€å®ç°å¤æ‚çš„äº§å“éœ€æ±‚ã€‚ä¾‹å¦‚åœ¨ WKWebViewPrivate ä¸­å¯ä»¥è·å¾—å„ç§é¡µé¢ä¿¡æ¯ã€ç›´æ¥å–åˆ° UserAgentã€ åœ¨ WKBackForwardListPrivate ä¸­å¯ä»¥æ¸…ç†æ‰å…¨éƒ¨çš„è·³è½¬å†å²ã€ä»¥åŠåœ¨ WKContentViewInteraction ä¸­æ›¿æ¢æ–¹æ³•å®ç°è‡ªå®šä¹‰çš„ MenuItem ç­‰ç­‰ã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">WKWebView</span> (<span class="title">WKPrivate</span>)</span></span><br><span class="line"> <span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">NSString</span> *_userAgent <span class="built_in">WK_API_AVAILABLE</span>(macosx(<span class="number">10.11</span>), ios(<span class="number">9.0</span>));</span><br><span class="line"> ...</span><br><span class="line"></span><br><span class="line"> <span class="class"><span class="keyword">@interface</span> <span class="title">WKBackForwardList</span> (<span class="title">WKPrivate</span>)</span></span><br><span class="line"> - (<span class="keyword">void</span>)_removeAllItems;</span><br><span class="line"> ...</span><br><span class="line"></span><br><span class="line"> <span class="class"><span class="keyword">@interface</span> <span class="title">WKContentView</span> (<span class="title">WKInteraction</span>)</span></span><br><span class="line"> - (<span class="built_in">BOOL</span>)canPerformActionForWebView:(SEL)action withSender:(<span class="keyword">id</span>)sender;</span><br></pre></td></tr></table></figure>
<h2 id="3ã€App-ä¸­çš„åº”ç”¨åœºæ™¯"><a href="#3ã€App-ä¸­çš„åº”ç”¨åœºæ™¯" class="headerlink" title="3ã€App ä¸­çš„åº”ç”¨åœºæ™¯"></a>3ã€App ä¸­çš„åº”ç”¨åœºæ™¯</h2><p>WKWebView ç³»ç»Ÿæä¾›äº†å››ä¸ªç”¨äºåŠ è½½æ¸²æŸ“ Web çš„å‡½æ•°ã€‚è¿™å››ä¸ªå‡½æ•°ä»åŠ è½½çš„ç±»å‹ä¸Šå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šåŠ è½½ URL &amp; åŠ è½½ HTML\Dataã€‚æ‰€ä»¥åŸºäºæ­¤ä¹Ÿå»¶ä¼¸å‡ºä¸¤ç§ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼šåŠ è½½ URL çš„é¡µé¢ç›´å‡ºç±»å’ŒåŠ è½½æ•°æ®çš„æ¨¡æ¿æ¸²æŸ“ç±»ï¼ŒåŒæ—¶ä¸¤ç§ç±»å‹å„è‡ªä¹Ÿæœ‰ä¸åŒçš„ä¼˜åŒ–é‡ç‚¹åŠæ–¹å‘ã€‚</p>
<h3 id="é¡µé¢ç›´å‡ºç±»"><a href="#é¡µé¢ç›´å‡ºç±»" class="headerlink" title="é¡µé¢ç›´å‡ºç±»"></a>é¡µé¢ç›´å‡ºç±»</h3><figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"> <span class="comment">// æ ¹æ® URL ç›´æ¥å±•ç¤º Web é¡µé¢</span></span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">WKNavigation</span> *)loadRequest:(<span class="built_in">NSURLRequest</span> *)request;</span><br></pre></td></tr></table></figure>
<p>é€šå¸¸å„ç±» App ä¸­çš„ Web é¡µé¢åŠ è½½éƒ½æ˜¯é€šè¿‡åŠ è½½ URL çš„æ–¹å¼ï¼Œæ¯”å¦‚åµŒå…¥çš„è¿è¥æ´»åŠ¨é¡µé¢ã€å¹¿å‘Šé¡µé¢ç­‰ç­‰ã€‚</p>
<h3 id="æ¨¡æ¿æ¸²æŸ“ç±»"><a href="#æ¨¡æ¿æ¸²æŸ“ç±»" class="headerlink" title="æ¨¡æ¿æ¸²æŸ“ç±»"></a>æ¨¡æ¿æ¸²æŸ“ç±»</h3><figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®æ¨¡æ¿ &amp; æ•°æ®æ¸²æŸ“ Web é¡µé¢</span></span><br><span class="line">  - (<span class="keyword">nullable</span> <span class="built_in">WKNavigation</span> *)loadHTMLString:(<span class="built_in">NSString</span> *)string baseURL:(<span class="keyword">nullable</span> <span class="built_in">NSURL</span> *)baseURL;</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<p>éœ€è¦ä½¿ç”¨ WebView å±•ç¤ºï¼Œä¸”äº¤äº’é€»è¾‘è¾ƒå¤šçš„é¡µé¢ï¼Œæœ€å¸¸è§çš„å°±æ˜¯èµ„è®¯ç±» App çš„å†…å®¹å±•ç¤ºé¡µã€‚</p>
<h1 id="iOS-ä¸­-Web-ä¸-Native-çš„é€šä¿¡"><a href="#iOS-ä¸­-Web-ä¸-Native-çš„é€šä¿¡" class="headerlink" title="iOS ä¸­ Web ä¸ Native çš„é€šä¿¡"></a>iOS ä¸­ Web ä¸ Native çš„é€šä¿¡</h1><p>å•çº¯çš„ä½¿ç”¨ Web å®¹å™¨åŠ è½½é¡µé¢å·²ç»ä¸èƒ½æ»¡è¶³å¤æ‚çš„åŠŸèƒ½ï¼Œå¼€å‘è€…å¸Œæœ›æ•°æ®å¯ä»¥åœ¨ Native å’Œ Web ä¹‹é—´é€šä¿¡ä¼ é€’æ¥å®ç°å¤æ‚çš„åŠŸèƒ½ï¼Œè€Œ Javascript å°±æ˜¯é€šä¿¡çš„åª’ä»‹ã€‚å¯¹äºæœ‰ WebView çš„æƒ…å†µï¼Œè™½ç„¶ WKWebView æä¾›äº†ç³»ç»Ÿçº§çš„æ–¹æ³•ï¼Œä½†æ˜¯å¤§éƒ¨åˆ† App ä»ç„¶ä½¿ç”¨åŸºäº URLScheme çš„ WebViewBridge ç”¨ä»¥å…¼å®¹ UIWebViewã€‚è€Œè„±ç¦»äº† WebView å®¹å™¨ï¼Œç³»ç»Ÿæä¾›äº† JavaScriptCore çš„ frameworkï¼Œå®ƒä¹Ÿä¸ºä¹‹åè“¬å‹ƒå‘å±•çš„è·¨å¹³å°å’Œçƒ­ä¿®å¤æŠ€æœ¯æä¾›äº†å¯èƒ½ã€‚</p>
<h2 id="1-åŸºäº-WebView-çš„é€šä¿¡"><a href="#1-åŸºäº-WebView-çš„é€šä¿¡" class="headerlink" title="1. åŸºäº WebView çš„é€šä¿¡"></a>1. åŸºäº WebView çš„é€šä¿¡</h2><p>åŸºäº WebView çš„é€šä¿¡ä¸»è¦æœ‰ä¸¤ä¸ª é€”å¾„ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡ç³»ç»Ÿæˆ–ç§æœ‰æ–¹æ³•ï¼Œè·å– WebView å½“ä¸­çš„ JSContextï¼Œä½¿ç”¨ç³»ç»Ÿå°è£…çš„åŸºäº JSCore çš„å‡½æ•°é€šä¿¡ã€‚å¦ä¸€ç±»å°±æ˜¯é€šè¿‡åˆ›å»ºè‡ªå®šä¹‰ Scheme çš„ iframe Domï¼Œå®¢æˆ·ç«¯åœ¨å›è°ƒä¸­è¿›è¡Œæ‹¦æˆªå®ç°ã€‚</p>
<h3 id="UIWebView-amp-WKWebView-ç³»ç»Ÿçº§"><a href="#UIWebView-amp-WKWebView-ç³»ç»Ÿçº§" class="headerlink" title="UIWebView &amp; WKWebView ç³»ç»Ÿçº§"></a>UIWebView &amp; WKWebView ç³»ç»Ÿçº§</h3><p>åœ¨ UIWebView æ—¶ä»£æ²¡æœ‰æä¾›ç³»ç»Ÿçº§çš„å‡½æ•°è¿›è¡Œ Web ä¸ Native çš„äº¤äº’ï¼Œç»å¤§éƒ¨åˆ† App éƒ½æ˜¯é€šè¿‡ WebViewJavascriptBridgeï¼ˆä¸‹èŠ‚ä»‹ç»ï¼‰æ¥è¿›è¡Œçš„é€šä¿¡ã€‚ä½†æ˜¯ç”±äº JavascriptCore çš„å­˜åœ¨ï¼Œå¯¹äº UIWebView æ¥è¯´åªè¦æœ‰æ•ˆçš„è·å–åˆ°å†…éƒ¨çš„ JSContextï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°ç›®çš„ã€‚ç›®å‰å·²çŸ¥æœ‰æ•ˆçš„å‡ ä¸ªç§æœ‰æ–¹æ³•è·å– Context çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡ç³»ç»ŸåºŸå¼ƒå‡½æ•°è·å– context</span></span><br><span class="line">  - (<span class="keyword">void</span>)webView:(WebView *)webView didCreateJavaScriptContext:(JSContext *)context forFrame:(WebFrame *)frame;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é€šè¿‡ valueForKeyPath è·å– context</span></span><br><span class="line">  <span class="keyword">self</span>.jsContext = [_webView valueForKeyPath:<span class="string">@"documentView.webView.mainFrame.javaScriptContext"</span>];</span><br></pre></td></tr></table></figure>
<p>åœ¨ WKWebView ä¸­æä¾›äº†ç³»ç»Ÿçº§çš„ Web å’Œ Native é€šè®¯æœºåˆ¶ï¼Œé€šè¿‡ Message Handler çš„å°è£…ä½¿å¼€å‘æ•ˆç‡æœ‰äº†å¾ˆå¤§çš„æå‡ã€‚åŒæ—¶ç³»ç»Ÿå°è£…äº† JavaScript å¯¹è±¡å’Œ Objective-C å¯¹è±¡çš„è½¬æ¢é€»è¾‘ï¼Œä¹Ÿè¿›é™ä½äº†ä½¿ç”¨çš„é—¨æ§›ã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// js ç«¯å‘é€æ¶ˆæ¯</span></span><br><span class="line">  window.webkit.messageHandlers.&#123;NAME&#125;.postMessage()</span><br><span class="line"></span><br><span class="line">  <span class="comment">//Native åœ¨å›è°ƒä¸­æ¥æ”¶</span></span><br><span class="line">  - (<span class="keyword">void</span>)userContentController:(<span class="built_in">WKUserContentController</span> *)userContentController didReceiveScriptMessage:(<span class="built_in">WKScriptMessage</span> *)message;</span><br></pre></td></tr></table></figure>
<h3 id="æ‹¦æˆªè‡ªå®šä¹‰-Scheme-è¯·æ±‚-WebViewJavascriptBridge"><a href="#æ‹¦æˆªè‡ªå®šä¹‰-Scheme-è¯·æ±‚-WebViewJavascriptBridge" class="headerlink" title="æ‹¦æˆªè‡ªå®šä¹‰ Scheme è¯·æ±‚ - WebViewJavascriptBridge"></a>æ‹¦æˆªè‡ªå®šä¹‰ Scheme è¯·æ±‚ - WebViewJavascriptBridge</h3><p>ç”±äºç§æœ‰æ–¹æ³•çš„ç¨³å®šæ€§ä¸å®¡æ ¸é£é™©ï¼Œå¼€å‘è€…ä¸æ„¿æ„ä½¿ç”¨ä¸Šæ–‡æåˆ°çš„ UIWebView è·å– JSContext çš„æ–¹å¼è¿›è¡Œé€šä¿¡ï¼Œæ‰€ä»¥é€šå¸¸éƒ½é‡‡ç”¨åŸºäº iframe å’Œè‡ªå®šä¹‰ Scheme çš„ JavascriptBridge è¿›è¡Œé€šä¿¡ã€‚è™½ç„¶åœ¨ä¹‹åçš„ WKWebView æä¾›äº†ç³»ç»Ÿå‡½æ•°ï¼Œä½†æ˜¯å¤§éƒ¨åˆ† App éƒ½éœ€è¦å…¼å®¹ UIWebView ä¸ WKWebViewï¼Œæ‰€ä»¥ç›®å‰çš„ä½¿ç”¨èŒƒå›´ä»ç„¶ååˆ†å¹¿æ³›ã€‚</p>
<p>åœ¨ Github ä¸­ç±»ä¼¼çš„å¼€æºæ¡†æ¶æœ‰å¾ˆå¤šï¼Œä½†æ˜¯æ— å¤–ä¹éƒ½æ˜¯ Web ä¾§æ ¹æ®å›ºå®šçš„æ ¼å¼åˆ›å»ºåŒ…å«é€šä¿¡ä¿¡æ¯çš„ Requestï¼Œä¹‹ååˆ›å»ºéšå¼ iFrame èŠ‚ç‚¹è¯·æ±‚ï¼›Native ä¾§åœ¨ç›¸åº”çš„ WebView å›è°ƒä¸­è§£æ Request çš„ Schemeï¼Œä¹‹åæŒ‰ç…§æ ¼å¼è§£ææ•°æ®å¹¶å¤„ç†ã€‚</p>
<p>è€Œå¯¹äºæ•°æ®ä¼ é€’å’Œå›è°ƒå¤„ç†çš„é—®é¢˜ï¼Œåœ¨å…¼å®¹ä¸¤ç§ WebViewã€æŒç»­çš„æ›´æ–°çš„ WebViewJavascriptBridge ä¸­ï¼ŒiFrame request æ²¡æœ‰ç›´æ¥ä¼ é€’æ•°æ®ï¼Œè€Œæ˜¯ Web å’Œ Native ä¾§ç»´æŠ¤å…±åŒçš„å‚æ•°æˆ–å›è°ƒ Queueï¼ŒNative é€šè¿‡ Request ä¸­ Scheme çš„è§£æè§¦å‘å¯¹ Queue é‡Œæ•°æ®çš„è¯»å–ã€‚</p>
<p><img src="jsandnative.jpg" alt></p>
<h2 id="è„±ç¦»-WebView-çš„é€šä¿¡-JavaScriptCore"><a href="#è„±ç¦»-WebView-çš„é€šä¿¡-JavaScriptCore" class="headerlink" title="è„±ç¦» WebView çš„é€šä¿¡ JavaScriptCore"></a>è„±ç¦» WebView çš„é€šä¿¡ JavaScriptCore</h2><h3 id="JavascriptCore"><a href="#JavascriptCore" class="headerlink" title="JavascriptCore"></a>JavascriptCore</h3><p>JavascriptCore ä¸€ç›´ä½œä¸º WebKit ä¸­å†…ç½®çš„ JS å¼•æ“ä½¿ç”¨ï¼Œåœ¨ iOS7 ä¹‹åï¼ŒApple å¯¹åŸæœ‰çš„ C/C++ ä»£ç è¿›è¡Œäº† OC çš„å°è£…ï¼Œæˆç³»ç»Ÿçº§çš„ framework ä¾›å¼€å‘è€…ä½¿ç”¨ã€‚ä½œä¸ºä¸€ä¸ªå¼•æ“æ¥è®²ï¼ŒJavascriptCore çš„è¯æ³•ã€è¯­æ³•åˆ†æï¼Œä»¥åŠå¤šå±‚æ¬¡çš„ JIT ç¼–è¯‘æŠ€æœ¯éƒ½æ˜¯å€¼å¾—æ·±å…¥æŒ–æ˜å’Œå­¦ä¹ çš„æ–¹å‘ï¼Œç”±äºç¯‡å¹…çš„é™åˆ¶æš‚ä¸”ä¸åšæ·±å…¥çš„è®¨è®ºã€‚</p>
<p><img src="jscore.jpg" alt></p>
<h3 id="JavascriptCore-framework"><a href="#JavascriptCore-framework" class="headerlink" title="JavascriptCore.framework"></a>JavascriptCore.framework</h3><p>è™½ç„¶ JavascriptCore.framework åªæš´éœ²äº†è¾ƒå°‘çš„å¤´æ–‡ä»¶å’Œç³»ç»Ÿå‡½æ•°ï¼Œä½†å´æä¾›äº†åœ¨ App ä¸­è„±ç¦» WebView æ‰§è¡Œ Javascript çš„ç¯å¢ƒå’Œèƒ½åŠ›ã€‚</p>
<p>JSVirtualMachineï¼šæä¾›äº† JS æ‰§è¡Œçš„åº•å±‚èµ„æºåŠå†…å­˜ã€‚è™½ç„¶ Java ä¸ Javascript æ²¡æœ‰ä¸€ç‚¹å…³ç³»ï¼Œä½†æ˜¯åŒæ ·ä½œä¸ºè™šæ‹Ÿæœºï¼ŒJSVM å’Œ JVM åšäº†ä¸€éƒ¨åˆ†ç±»ä¼¼çš„äº‹æƒ…ã€‚æ¯ä¸ª JSVirtualMachine ç‹¬å çº¿ç¨‹ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„ç©ºé—´å’Œç®¡ç†ï¼Œä½†æ˜¯å¯ä»¥åŒ…å«å¤šä¸ª JSContextã€‚JSContextï¼šæä¾›äº† JS è¿è¡Œçš„ä¸Šä¸‹æ–‡ç¯å¢ƒå’Œæ¥å£ã€‚å¯ä»¥ä¸å‡†ç¡®çš„ç†è§£ä¸ºï¼Œå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ª Javascript ä¸­çš„ Window å¯¹è±¡ã€‚JSValueï¼šæä¾›äº† OC å’Œ JS é—´æ•°æ®ç±»å‹çš„å°è£…å’Œè½¬æ¢ Type Conversionsã€‚é™¤äº†åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œéœ€è¦æ³¨æ„ OC ä¸­çš„ Block è½¬æ¢ä¸º JS ä¸­çš„ functionï¼ŒClass è½¬æ¢ä¸º Constructor ç­‰ç­‰ã€‚</p>
<p>JSManagedValueï¼šJavascript ä½¿ç”¨ GC æœºåˆ¶ç®¡ç†å†…å­˜ï¼Œè€Œ OC é‡‡ç”¨å¼•ç”¨è®¡æ•°çš„æ–¹å¼ç®¡ç†å†…å­˜ã€‚æ‰€ä»¥åœ¨ JavascriptCore ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œéš¾å…ä¼šé‡åˆ°å¾ªç¯å¼•ç”¨ä»¥åŠæå‰é‡Šæ”¾çš„é—®é¢˜ã€‚JSManagedValue è§£å†³äº†åœ¨ä¸¤ç§ç¯å¢ƒä¸­çš„å†…å­˜ç®¡ç†é—®é¢˜ã€‚JSExportï¼šæä¾›äº†ç±»ã€å±æ€§å’Œå®ä¾‹æ–¹æ³•çš„è°ƒç”¨æ¥å£ã€‚å†…éƒ¨å®ç°æ˜¯åœ¨ ProtoType &amp; Constructor ä¸­å®ç°å¯¹åº”çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
<p><img src="jscore2.jpg" alt></p>
<h3 id="ä½¿ç”¨-JavascriptCore-è¿›è¡Œé€šä¿¡"><a href="#ä½¿ç”¨-JavascriptCore-è¿›è¡Œé€šä¿¡" class="headerlink" title="ä½¿ç”¨ JavascriptCore è¿›è¡Œé€šä¿¡"></a>ä½¿ç”¨ JavascriptCore è¿›è¡Œé€šä¿¡</h3><p>Native - Web: é€šè¿‡ JavascriptCoreï¼ŒNative å¯ä»¥ç›´æ¥åœ¨ Context ä¸­æ‰§è¡Œ JS è¯­å¥ï¼Œå’Œ Web ä¾§è¿›è¡Œé€šä¿¡å’Œäº¤äº’ã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">JSValue *value = [<span class="keyword">self</span>.jsContext evaluateScript:<span class="string">@"document.cookie"</span>];</span><br></pre></td></tr></table></figure>
<p>Web - Native: å¯¹äº Web ä¾§å‘ Native çš„é€šä¿¡ï¼ŒJavascriptCore æä¾› ä¸¤ç§ æ–¹å¼ï¼Œæ³¨å†Œ Block &amp; Export åè®®ã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Native</span></span><br><span class="line">  <span class="keyword">self</span>.jsContext[<span class="string">@"addMethod"</span>] = ^ <span class="built_in">NSInteger</span>(<span class="built_in">NSInteger</span> a, <span class="built_in">NSInteger</span> b) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//JS</span></span><br><span class="line">  console.log(addMethod(<span class="number">1</span>, <span class="number">2</span>));    <span class="comment">//3</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//Native</span></span><br><span class="line">  <span class="class"><span class="keyword">@protocol</span> <span class="title">testJSExportProtocol</span> &lt;<span class="title">JSExport</span>&gt;</span></span><br><span class="line">  <span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSString</span> *string;</span><br><span class="line">  ...</span><br><span class="line">  <span class="class"><span class="keyword">@interface</span> <span class="title">OCClass</span> : <span class="title">NSObject</span> &lt;<span class="title">testJSExportProtocol</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//JS</span></span><br><span class="line">  var OCClass = new OCClass();</span><br><span class="line">  console.log(OCClass.string);</span><br></pre></td></tr></table></figure>
<p>å¯¹äº JavascriptCore ç²—æµ…çš„ç†è§£ï¼Œå¯ä»¥è®¤ä¸ºä½¿ç”¨ Block æ–¹æ³•ï¼Œå†…éƒ¨æ˜¯å°† Block ä¿å­˜åˆ°ä¿å­˜åˆ°ä¸€ä¸ª Web ç¯å¢ƒä¸­çš„å…¨å±€çš„ Object ä¸­ï¼Œä¾‹å¦‚ windowã€‚è€Œä½¿ç”¨ JSExport æ–¹æ³•ï¼Œåˆ™æ˜¯åœ¨ Web ç¯å¢ƒä¸­ Object çš„ prototype ä¸­åˆ›å»ºå±æ€§ã€å®ä¾‹æ–¹æ³•ï¼›åœ¨ constructor å¯¹è±¡ä¸­åˆ›å»ºç±»æ–¹æ³•ï¼Œä»è€Œå®ç° Web ä¸­çš„è°ƒç”¨ã€‚</p>
<h2 id="App-ä¸­çš„åº”ç”¨åœºæ™¯"><a href="#App-ä¸­çš„åº”ç”¨åœºæ™¯" class="headerlink" title="App ä¸­çš„åº”ç”¨åœºæ™¯"></a>App ä¸­çš„åº”ç”¨åœºæ™¯</h2><p>å¯¹äºåŸºäº WebView çš„é€šä¿¡ï¼Œä¸»è¦ç”¨äº App å‘ H5 é¡µé¢ä¸­æ³¨å…¥çš„ Javascript Open Apiï¼Œå¦‚æä¾› Native çš„æ‹ç…§ã€éŸ³è§†é¢‘ã€å®šä½ï¼›ä»¥åŠ App å†…çš„ç™»å½•ã€åˆ†äº«ç­‰ç­‰åŠŸèƒ½ã€‚<br>å¯¹äº JavaScriptCoreï¼Œåˆ™å‚¬ç”Ÿäº†åŠ¨æ€åŒ–ã€è·¨å¹³å°ä»¥åŠçƒ­ä¿®å¤ç­‰ä¸€ç³»åˆ—æŠ€æœ¯çš„è“¬å‹ƒå‘å±•ã€‚</p>
<h1 id="è·¨å¹³å°ä¸çƒ­ä¿®å¤"><a href="#è·¨å¹³å°ä¸çƒ­ä¿®å¤" class="headerlink" title="è·¨å¹³å°ä¸çƒ­ä¿®å¤"></a>è·¨å¹³å°ä¸çƒ­ä¿®å¤</h1><p>è¿‘å‡ å¹´æ¥å›½å†…å¤–ç§»åŠ¨ç«¯å„ç§æ–¹æ¡ˆå¦‚é›¨åæ˜¥ç¬‹èˆ¬æ¶Œç°ï¼Œâ€œWrite once, run anywhereâ€ä¸å†æ˜¯å¼€å‘è€…çš„å‘å¾€ã€‚å‰¥ç¦»è·¨å¹³å°æŠ€æœ¯åœ¨ Web ä¾§ DSLã€virtualDom ç­‰æ–¹é¢çš„ä¼˜åŒ–ï¼Œä»¥åŠ Native ä¾§ Runtime çš„åº”ç”¨ä¸å°è£…ï¼Œå¯¹äºä¸¤ç«¯é€šä¿¡çš„æ ¸å¿ƒï¼Œä¾ç„¶æ˜¯ JavascriptCoreã€‚</p>
<p>è€Œä¸åŒäºå›½å¤–å¼€å‘è€…å¯¹è·¨å¹³å°æŠ€æœ¯çš„ç§¯ææ¢ç´¢ï¼Œå›½å†…å¼€å‘è€…ä¹Ÿå¯¹çƒ­ä¿®å¤æŠ€æœ¯äº§ç”Ÿäº†æå¤§çš„çƒ­æƒ…ã€‚åŒæ ·ä½œä¸º Native å’Œ Web çš„äº¤å‰ - JavascriptCoreï¼Œä¾ç„¶æ‰¿æ‹…ç€æ•´ä¸ªæŠ€æœ¯ç»“æ„ä¸­çš„é€šä¿¡ä»»åŠ¡ã€‚</p>
<h2 id="1-åŸºäº-Web-çš„çƒ­ä¿®å¤æŠ€æœ¯"><a href="#1-åŸºäº-Web-çš„çƒ­ä¿®å¤æŠ€æœ¯" class="headerlink" title="1. åŸºäº Web çš„çƒ­ä¿®å¤æŠ€æœ¯"></a>1. åŸºäº Web çš„çƒ­ä¿®å¤æŠ€æœ¯</h2><p>å¯¹äºå›½å†…çš„ iOS å¼€å‘è€…æ¥è¯´ï¼Œå®¡æ ¸å‘¨æœŸã€æ•æ„Ÿä¸šåŠ¡ã€æ”¯ä»˜åˆ†æˆä»¥åŠ bug ä¿®å¤éƒ½å‚¬ç”Ÿäº†çƒ­ä¿®å¤æ–¹å‘çš„ä¸æ–­æ¢ç´¢ã€‚åœ¨è‹¹æœåŠ å¼ºå®¡æ ¸ä¹‹å‰ï¼Œå‡ ä¹æ‰€æœ‰å¤§å‹çš„ App éƒ½æŠŠçƒ­ä¿®å¤å½“æˆäº† iOS å¼€å‘çš„åŸºç¡€èƒ½åŠ›ï¼Œæœ€è¿‘åœ¨ã€Šç§»åŠ¨å¼€å‘è¿˜æœ‰æ•‘ä¹ˆã€‹ä¸­ä¹Ÿè¯¦ç»†çš„ä»‹ç»äº†ç›¸å…³é»‘ç§‘æŠ€çš„å‰ä¸–ä»Šç”Ÿã€‚åœ¨æ‰€æœ‰ iOS çƒ­ä¿®å¤çš„æ–¹æ¡ˆä¸­ï¼ŒåŸºäº Javascriptã€åŒæ—¶ä¹Ÿæ˜¯å½±å“æœ€å¤§çš„å°±æ˜¯ JSPatchã€‚</p>
<p>åŸºäºä¸Šæ–‡çš„åˆ†æï¼Œå¯¹äºè„±ç¦» WebView çš„ Native å’Œ Web é—´çš„é€šä¿¡ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨ JavascriptCoreã€‚è€Œåœ¨ JavascriptCore ä¸­æä¾›äº†ä¸¤ç§æ–¹å¼ç”¨äºé€šä¿¡ï¼Œå³ Context æ³¨å†Œ Block çš„å›è°ƒï¼Œä»¥åŠ JSExportã€‚å¯¹äºçƒ­ä¿®å¤çš„åœºæ™¯æ¥è¯´ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æŠŠæ½œåœ¨éœ€è¦ä¿®å¤çš„å‡½æ•°éƒ½ä¸€ä¸€ä½¿ç”¨åè®®è¿›è¡Œæ³¨å†Œï¼Œæ›´ä¸èƒ½å¯¹æ–°å¢æ–¹æ³•å’Œåˆ é™¤æ–¹æ³•ç­‰è¿›è¡Œå¤„ç†ï¼Œæ‰€ä»¥åœ¨ Native å’Œ Web é€šä¿¡è¿™ä¸ªç»´åº¦ï¼Œæˆ‘ä»¬åªèƒ½é‡‡ç”¨ Context æ³¨å†Œ Block çš„æ–¹å¼ã€‚</p>
<p>ç¡®å®šäº†é€šä¿¡é‡‡ç”¨ Block å›è°ƒçš„æ–¹å¼åï¼Œçƒ­ä¿®å¤å°±é¢ä¸´ç€å¦‚ä½•åœ¨ JS ä¸­è°ƒç”¨ç±»ä»¥åŠç±»çš„æ–¹æ³•é—®é¢˜ã€‚ç”±äºæ²¡æœ‰ä½¿ç”¨ JSExport ç­‰æ–¹å¼ï¼ŒJS æ˜¯æ— æ³•æ‰¾åˆ°ç›¸åº”ç±»ç­‰å±æ€§å’Œæ–¹æ³•ï¼Œåœ¨ JSPathc ä¸­ï¼Œé€šè¿‡ç®€å•çš„å­—ç¬¦ä¸²æ›¿æ¢ï¼Œå°†æ‰€æœ‰æ–¹æ³•éƒ½æ›¿æ¢æˆé€šç”¨å‡½æ•°ï¼ˆ__cï¼‰ï¼Œç„¶åå°±å¯ä»¥å°†ç›¸å…³ä¿¡æ¯ä¼ é€’ç»™ Nativeï¼Œè¿›è€Œä½¿ç”¨ runtime æ¥å£è°ƒç”¨æ–¹æ³•ã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ›¿æ¢å…¨éƒ¨æ–¹æ³•è°ƒç”¨</span></span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">NSString</span> *_replaceStr = <span class="string">@".__c(\"$1\")("</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">  __c: function(methodName) &#123;</span><br><span class="line">      ...</span><br><span class="line">      <span class="keyword">return</span> function()&#123;</span><br><span class="line">          ...</span><br><span class="line">          var ret = instance ? _OC_callI(instance, selectorName, args, isSuper):</span><br><span class="line">                                _OC_callC(clsName, selectorName, args)</span><br><span class="line">          <span class="keyword">return</span> _formatOCToJS(ret)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶å¯¹äº JSPatch ä»¥åŠå…¶ä»–çƒ­ä¿®å¤çš„é¡¹ç›®æ¥è¯´ï¼ŒWeb å’Œ Native é€šä¿¡åªæ˜¯æ•´ä¸ªæ¡†æ¶ä¸­çš„ä¸€ä¸ªæŠ€æœ¯ç‚¹ï¼Œæ›´å¤šçš„å®ç°åŸç†å’Œç»†èŠ‚ç”±äºç¯‡å¹…çš„å…³ç³»æš‚ä¸”ä¸åšä»‹ç»ã€‚</p>
<h2 id="2-åŸºäº-Web-çš„è·¨å¹³å°æŠ€æœ¯"><a href="#2-åŸºäº-Web-çš„è·¨å¹³å°æŠ€æœ¯" class="headerlink" title="2. åŸºäº Web çš„è·¨å¹³å°æŠ€æœ¯"></a>2. åŸºäº Web çš„è·¨å¹³å°æŠ€æœ¯</h2><p>éšç€ Google å¼€æºäº†åŸºäº Dart è¯­è¨€çš„ Flutterï¼Œè·¨å¹³å°çš„æŠ€æœ¯åˆè¿›å…¥äº†ä¸€ä¸ªæ–°çš„å‘å±•é˜¶æ®µã€‚å¯¹äºä¼ ç»Ÿçš„è·¨å¹³å°æŠ€æœ¯æ¥è®²ï¼Œå„ä¸ªå…¬å¸ä»¥ JavascriptCore ä½œä¸ºé€šä¿¡æ¡¥æ¢ï¼Œå›´ç»•ç€ DSL çš„è§£æã€æ–¹æ³•è¡¨çš„æ³¨å†Œã€æ¨¡å—æ³¨å†Œé€šä¿¡ã€å‚æ•°ä¼ é€’çš„è®¾è®¡ä»¥åŠ OC Runtime çš„è¿ç”¨ç­‰ä¸åŒæ–¹å‘ï¼Œå°è£…æˆäº†ä¸€ä¸ªåˆä¸€ä¸ªè·¨å¹³å°çš„é¡¹ç›®ã€‚</p>
<p><img src="rexiufu.jpg" alt></p>
<p>è€Œåœ¨å…¶ä¸­ï¼Œä»¥ Javascript ä½œä¸ºå‰ç«¯ DSL çš„è·¨å¹³å°æŠ€æœ¯æ–¹æ¡ˆé‡Œï¼ŒFaceBook çš„ react-native ä»¥åŠé˜¿é‡Œ (ç›®å‰æ‰˜ç®¡ç»™äº† Apache) çš„ Weex æœ€ä¸ºæµè¡Œã€‚åœ¨ç½‘ç»œä¸Šä¸¤è€…çš„æ¯”è¾ƒæ–‡ç« æœ‰å¾ˆå¤šï¼Œé›†ä¸­åœ¨å­¦ä¹ æˆæœ¬ã€æ¡†æ¶ç”Ÿæ€ã€ä»£ç ä¾µå…¥ã€æ€§èƒ½ä»¥åŠåŒ…å¤§å°ç­‰, å„ä¸ªä¸šåŠ¡å¯ä»¥æ ¹æ®è‡ªå·±çš„é‡ç‚¹é€‰æ‹©åˆç†çš„æŠ€æœ¯ç»“æ„ã€‚</p>
<p>è€Œä¸ç®¡æ˜¯ react-native è¿˜æ˜¯ Weex,Web å’Œ Native çš„é€šä¿¡æ¡¥æ¢ä»ç„¶æ˜¯ JavascriptCoreã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//weex ä¸¾ä¾‹</span></span><br><span class="line">JSValue* (^callNativeBlock)(JSValue *, JSValue *, JSValue *) = ^JSValue*(JSValue *instance, JSValue *tasks, JSValue *callback)&#123;</span><br><span class="line">    ...</span><br><span class="line">  <span class="keyword">return</span> [JSValue valueWithInt32:(int32_t)callNative(instanceId, tasksArray, callbackId) inContext:[JSContext currentContext]];</span><br><span class="line">&#125;;</span><br><span class="line">_jsContext[<span class="string">@"callNative"</span>] = callNativeBlock;</span><br></pre></td></tr></table></figure>
<h1 id="iOS-ä¸­-Web-ç›¸å…³ä¼˜åŒ–ç­–ç•¥"><a href="#iOS-ä¸­-Web-ç›¸å…³ä¼˜åŒ–ç­–ç•¥" class="headerlink" title="iOS ä¸­ Web ç›¸å…³ä¼˜åŒ–ç­–ç•¥"></a>iOS ä¸­ Web ç›¸å…³ä¼˜åŒ–ç­–ç•¥</h1><p>éšç€ Web æŠ€æœ¯çš„ä¸æ–­å‡çº§ä»¥åŠ App åŠ¨æ€æ€§ä¸šåŠ¡éœ€æ±‚çš„å¢å¤šï¼Œè¶Šæ¥è¶Šå¤šçš„ Web é¡µé¢åŠ å…¥åˆ°äº† iOS App å½“ä¸­ã€‚ä¸ä¹‹å¯¹åº”çš„ï¼Œé¦–å±å±•ç¤ºé€Ÿåº¦â€”â€”è¿™ä¸ªå¯¹äºç§»åŠ¨å®¢æˆ·ç«¯ Web çš„æœ€é‡è¦ä½“éªŒä¼˜åŒ–ï¼Œä¹Ÿæˆä¸ºäº†ç§»åŠ¨å®¢æˆ·ç«¯ä¸­ Web ä¸šåŠ¡æœ€é‡è¦çš„ä¼˜åŒ–æ–¹å‘ã€‚</p>
<p>è¿™ä¸€ç« èŠ‚æ›´ä¸ºè¯¦ç»†çš„è®¾è®¡ä¸å®ç°ï¼Œè¯·ç§»æ­¥ iOS æ–°é—»ç±» App å†…å®¹é¡µæŠ€æœ¯æ¢ç´¢ (<a href="https://dequan1331.github.io/hybrid-page-kit.html)ã€‚" target="_blank" rel="noopener">https://dequan1331.github.io/hybrid-page-kit.html)ã€‚</a></p>
<h2 id="1-ä¸åŒä¸šåŠ¡åœºæ™¯çš„ä¼˜åŒ–ç­–ç•¥"><a href="#1-ä¸åŒä¸šåŠ¡åœºæ™¯çš„ä¼˜åŒ–ç­–ç•¥" class="headerlink" title="1. ä¸åŒä¸šåŠ¡åœºæ™¯çš„ä¼˜åŒ–ç­–ç•¥"></a>1. ä¸åŒä¸šåŠ¡åœºæ™¯çš„ä¼˜åŒ–ç­–ç•¥</h2><p>å¯¹äºå•çº¯çš„ Web é¡µé¢æ¥è¯´ï¼Œä¸šç•Œæ—©å·²æœ‰äº†åˆç†çš„ä¼˜åŒ–æ–¹å‘ä»¥åŠæˆç†Ÿçš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œè€Œå¯¹äºç§»åŠ¨å®¢æˆ·ç«¯ä¸­çš„ Web æ¥è¯´ï¼Œå¼€å‘è€…åœ¨è¿›è¡Œå•ä¸€çš„ Web ä¼˜åŒ–åŒæ—¶ï¼Œè¿˜å¯ä»¥é€šè¿‡ä¼˜åŒ– Web å®¹å™¨ä»¥åŠ Web é¡µé¢ä¸­æ•°æ®åŠ è½½æ–¹å¼ç­‰å¤šä¸ªé€”å¾„åšå‡ºä¼˜åŒ–ã€‚</p>
<p>æ‰€ä»¥å¯¹äº iOS å¼€å‘ä¸­çš„ä¼˜åŒ–æ¥è¯´ï¼Œå°±æ˜¯é€šè¿‡ Native å’Œ Web ä¸¤ä¸ªç»´åº¦çš„ä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„ï¼Œä¿è¯ WebView ä¼˜å…ˆæ¸²æŸ“å®Œæ¯•ã€‚ç”±æ­¤æˆ‘ä»¬æ¢³ç†äº†å¸¸è§„ Web é¡µé¢æ•´ä½“çš„åŠ è½½é¡ºåºï¼Œä»ä¸­æ‰¾å‡ºå…³é”®æ¸²æŸ“è·¯å¾„ï¼Œç»§è€Œé€ä¸ªåˆ†æã€ä¼˜åŒ–ã€‚</p>
<p><img src="youhua.jpg" alt></p>
<h2 id="2-Web-ç»´åº¦çš„ä¼˜åŒ–"><a href="#2-Web-ç»´åº¦çš„ä¼˜åŒ–" class="headerlink" title="2. Web ç»´åº¦çš„ä¼˜åŒ–"></a>2. Web ç»´åº¦çš„ä¼˜åŒ–</h2><h3 id="é€šç”¨-Web-ä¼˜åŒ–"><a href="#é€šç”¨-Web-ä¼˜åŒ–" class="headerlink" title="é€šç”¨ Web ä¼˜åŒ–"></a>é€šç”¨ Web ä¼˜åŒ–</h3><p>å¯¹äº Web çš„é€šç”¨ä¼˜åŒ–æ–¹æ¡ˆï¼Œä¸€èˆ¬æ¥è¯´åœ¨ç½‘ç»œå±‚é¢ï¼Œå¯ä»¥é€šè¿‡ DNS å’Œ CDN æŠ€æœ¯å‡å°‘ç½‘ç»œå»¶è¿Ÿã€é€šè¿‡å„ç§ HTTP ç¼“å­˜æŠ€æœ¯å‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•°ã€é€šè¿‡èµ„æºå‹ç¼©å’Œåˆå¹¶å‡å°‘è¯·æ±‚å†…å®¹ç­‰ã€‚åœ¨æ¸²æŸ“å±‚é¢å¯ä»¥é€šè¿‡ç²¾ç®€å’Œä¼˜åŒ–ä¸šåŠ¡ä»£ç ã€æŒ‰éœ€åŠ è½½ã€é˜²æ­¢é˜»å¡ã€è°ƒæ•´åŠ è½½é¡ºåºä¼˜åŒ–ç­‰ç­‰ã€‚å¯¹äºè¿™ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ï¼Œä¸šå†…å·²ç»æœ‰ååˆ†æˆç†Ÿå’Œå®Œæ•´çš„æ€»ç»“ï¼Œä¾‹å¦‚ã€ŠBest Practices for Speeding Up Your Web Siteã€‹ï¼Œå·²ç»æœ‰äº†å¾ˆå¥½çš„æ•´ç†å’Œæ€»ç»“ã€‚</p>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>è„±ç¦»è¾ƒä¸ºé€šç”¨çš„ä¼˜åŒ–ï¼Œåœ¨å¯¹ä»£ç ä¾µå…¥å®½å®¹åº¦è¾ƒé«˜çš„åœºæ™¯ä¸­ï¼Œå¼€å‘è€…å¯¹ Web ä¼˜åŒ–æœ‰ç€æ›´ä¸ºæ¿€è¿›çš„åšæ³•ã€‚ä¾‹å¦‚åœ¨ VasSonic ä¸­ï¼Œé™¤äº† Web å®¹å™¨å¤ç”¨ã€æ•°æ®æ¨¡æ¿åˆ†ç¦»ã€é¢„æ‹‰å–å’Œé€šç”¨çš„ä¼˜åŒ–æ–¹å¼å¤–ï¼Œè¿˜é€šè¿‡è‡ªå®šä¹‰ VasSonic æ ‡ç­¾å°† HTML é¡µé¢è¿›è¡Œåˆ’åˆ†ï¼Œåˆ†æ®µè¿›è¡Œç¼“å­˜æ§åˆ¶ï¼Œä»¥è¾¾åˆ°æ›´é«˜çš„ä¼˜åŒ–æ•ˆæœã€‚</p>
<h2 id="3-Native-ç»´åº¦çš„ä¼˜åŒ–"><a href="#3-Native-ç»´åº¦çš„ä¼˜åŒ–" class="headerlink" title="3. Native ç»´åº¦çš„ä¼˜åŒ–"></a>3. Native ç»´åº¦çš„ä¼˜åŒ–</h2><h3 id="å®¹å™¨å¤ç”¨å’Œé¢„çƒ­"><a href="#å®¹å™¨å¤ç”¨å’Œé¢„çƒ­" class="headerlink" title="å®¹å™¨å¤ç”¨å’Œé¢„çƒ­"></a>å®¹å™¨å¤ç”¨å’Œé¢„çƒ­</h3><p>WKWebView è™½ç„¶ JIT å¤§å¹…ä¼˜åŒ–äº† JS çš„æ‰§è¡Œé€Ÿåº¦ï¼Œä½†æ˜¯å•çº¯çš„åŠ è½½æ¸²æŸ“ HTMLï¼ŒWKWebView æ¯” UIWebView æ…¢äº†å¾ˆå¤šã€‚æ ¹æ®æ¸²æŸ“çš„ä¸åŒé˜¶æ®µåˆ†åˆ«å¯¹è€—æ—¶è¿›è¡Œæµ‹è¯•ï¼ŒåŒæ—¶å¯¹æ¯” UIWebViewï¼Œæˆ‘ä»¬å‘ç° WKWebView åœ¨åˆå§‹åŒ–åŠæ¸²æŸ“å¼€å§‹å‰çš„è€—æ—¶è¾ƒå¤šã€‚</p>
<p><img src="loadingtime.jpg" alt></p>
<p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œä¸šç•Œä¸»æµçš„åšæ³•å°±æ˜¯å¤ç”¨ &amp; é¢„çƒ­ã€‚é¢„çƒ­å³æ—¶åœ¨ App å¯åŠ¨æ—¶åˆ›å»ºä¸€ä¸ª WKWebViewï¼Œä½¿å…¶å†…éƒ¨éƒ¨åˆ†é€»è¾‘é¢„çƒ­å·²æå‡åŠ è½½é€Ÿåº¦ã€‚è€Œå¤ç”¨åˆåˆ†ä¸ºä¸¤ç§ï¼Œè¾ƒä¸ºå¤æ‚çš„æ˜¯å¤„ç†è¾¹ç•Œæ¡ä»¶å·²è¾¾åˆ°çœŸæ­£çš„å¤ç”¨ï¼Œè¿˜æœ‰ä¸€ç§è¾ƒä¸º Triky çš„åŠæ³•å°±æ˜¯å¸¸é©»ä¸€ä¸ªç©º WKWebView åœ¨å†…å­˜ã€‚</p>
<p>HybridPageKit æä¾›äº†æ˜“äºé›†æˆçš„å®Œæ•´ WKWebView é‡ç”¨æœºåˆ¶å®ç°, å¼€å‘è€…å¯ä»¥æ— éœ€å…³æ³¨å¤ç”¨ç»†èŠ‚ï¼Œæ— ç¼çš„ä½“éªŒæ›´ä¸ºé«˜æ•ˆçš„ WKWebViewã€‚</p>
<h3 id="Native-å¹¶è¡Œèµ„æºè¯·æ±‚-amp-ç¦»çº¿åŒ…"><a href="#Native-å¹¶è¡Œèµ„æºè¯·æ±‚-amp-ç¦»çº¿åŒ…" class="headerlink" title="Native å¹¶è¡Œèµ„æºè¯·æ±‚ &amp; ç¦»çº¿åŒ…"></a>Native å¹¶è¡Œèµ„æºè¯·æ±‚ &amp; ç¦»çº¿åŒ…</h3><p>ç”±äº Web é¡µé¢å†…è¯·æ±‚æµç¨‹ä¸å¯æ§ä»¥åŠç½‘ç»œç¯å¢ƒçš„å½±å“ï¼Œå¯¹äº Web çš„åŠ è½½æ¥è¯´ï¼Œç½‘ç»œè¯·æ±‚ä¸€ç›´æ˜¯ä¼˜åŒ–çš„é‡ç‚¹ã€‚å¼€å‘è€…è¾ƒä¸ºå¸¸ç”¨çš„åšæ³•æ˜¯ä½¿ç”¨ Native å¹¶è¡Œä»£ç†æ•°æ®è¯·æ±‚ï¼Œæ›¿ä»£ Web å†…æ ¸çš„èµ„æºåŠ è½½ã€‚åœ¨å®¢æˆ·ç«¯åˆå§‹åŒ–é¡µé¢çš„åŒæ—¶ï¼Œå¹¶è¡Œå¼€å§‹ç½‘ç»œè¯·æ±‚æ•°æ®ï¼›å½“ Web é¡µé¢æ¸²æŸ“æ—¶å‘ Native è·å–å…¶ä»£ç†è¯·æ±‚çš„æ•°æ®ã€‚</p>
<p>è€Œå°†å¹¶è¡ŒåŠ è½½å’Œé¢„åŠ è½½åšåˆ°æè‡´çš„ä¼˜åŒ–ï¼Œå°±æ˜¯ç¦»çº¿åŒ…çš„ä½¿ç”¨ã€‚å°†å¸¸ç”¨çš„éœ€è¦ä¸‹è½½èµ„æºï¼ˆHTML æ¨¡æ¿ã€JS æ–‡ä»¶ã€CSS æ–‡ä»¶ã€å ä½å›¾ç‰‡ï¼‰æ‰“åŒ…ï¼ŒApp é€‰æ‹©åˆé€‚çš„æ—¶æœºå…¨éƒ¨ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå½“ Web é¡µé¢æ¸²æŸ“æ—¶å‘ Native è·å–å…¶æ•°æ®ã€‚</p>
<p>é€šè¿‡ç¦»çº¿åŒ…çš„ä½¿ç”¨ï¼ŒWeb é¡µé¢å¯ä»¥å¹¶è¡Œï¼ˆæå‰ï¼‰åŠ è½½é¡µé¢èµ„æºï¼ŒåŒæ—¶æ‘†è„±äº†ç½‘ç»œçš„å½±å“ï¼Œæé«˜äº†é¡µé¢çš„åŠ è½½é€Ÿåº¦å’ŒæˆåŠŸç‡ã€‚å½“ç„¶ç¦»çº¿åŒ…ä½œä¸ºèµ„æºåŠ¨æ€æ›´æ–°çš„ä¸€ä¸ªæ–¹å¼ï¼Œåˆç†çš„ä¸‹è½½æ—¶æœºã€å¢é‡æ›´æ–°ã€åŠ å¯†å’Œæ ¡éªŒç­‰æ–¹é¢éƒ½æ˜¯éœ€è¦è¿›è¡Œè®¾è®¡å’Œæ€è€ƒçš„æ–¹å‘ï¼Œåæ–‡ä¼šç®€å•ä»‹ç»ã€‚</p>
<h3 id="å¤æ‚-Dom-èŠ‚ç‚¹-Native-åŒ–å®ç°"><a href="#å¤æ‚-Dom-èŠ‚ç‚¹-Native-åŒ–å®ç°" class="headerlink" title="å¤æ‚ Dom èŠ‚ç‚¹ Native åŒ–å®ç°"></a>å¤æ‚ Dom èŠ‚ç‚¹ Native åŒ–å®ç°</h3><p>å½“å¹¶è¡Œè¯·æ±‚èµ„æºï¼Œå®¢æˆ·ç«¯ä»£ç†æ•°æ®è¯·æ±‚çš„æŠ€æœ¯æ–¹æ¡ˆé€æ¸æˆç†Ÿæ—¶ï¼Œç”±äº WKWebView çš„é™åˆ¶ï¼Œå¼€å‘è€…ä¸å¾—ä¸é¢å¯¹ä¸šåŠ¡è°ƒæ•´å’Œé€‚é…ã€‚å…¶ä¸­ä¿ç•™åŸæœ‰ä»£ç†é€»è¾‘ã€é‡‡ç”¨ LocalServer çš„æ–¹å¼æœ€ä¸ºæ™®éã€‚ä½†æ˜¯ç”±äº WKWebView çš„è¿›ç¨‹é—´é€šä¿¡ã€LocalServer Socket å»ºç«‹ä¸è¿æ¥ã€èµ„æºçš„é‡å¤ç¼–è§£ç éƒ½å½±å“äº†ä»£ç†è¯·æ±‚çš„æ•ˆç‡ã€‚</p>
<p><img src="dom.jpg" alt></p>
<p>æ‰€ä»¥å¯¹äºä¸€äº›èµ„è®¯ç±» Appï¼Œé€šå¸¸é‡‡ç”¨ Dom èŠ‚ç‚¹å ä½ã€Native æ¸²æŸ“å®ç°çš„æ–¹å¼è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚å›¾ç‰‡ã€åœ°å›¾ã€éŸ³è§†é¢‘ç­‰æ¨¡å—ã€‚è¿™æ ·ä¸ä½†èƒ½å‡å°‘é€šä¿¡å’Œè¯·æ±‚çš„å»ºç«‹ã€æä¾›æ›´åŠ å‹å¥½çš„äº¤äº’ã€ä¹Ÿèƒ½å¹¶è¡Œçš„è¿›è¡Œ View çš„æ¸²æŸ“å’Œå¤„ç†ï¼ŒåŒæ—¶å‡å°‘ Web é¡µé¢çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>
<p>HybridPageKit ä¸­å°±æä¾›å°è£…å¥½çš„åŠŸèƒ½æ¡†æ¶ï¼Œå¼€å‘è€…å¯ä»¥ç®€å•çš„æ›¿æ¢ Dom èŠ‚ç‚¹ä¸º NativeViewã€‚</p>
<h3 id="æŒ‰ä¼˜å…ˆçº§åˆ’åˆ†ä¸šåŠ¡é€»è¾‘"><a href="#æŒ‰ä¼˜å…ˆçº§åˆ’åˆ†ä¸šåŠ¡é€»è¾‘" class="headerlink" title="æŒ‰ä¼˜å…ˆçº§åˆ’åˆ†ä¸šåŠ¡é€»è¾‘"></a>æŒ‰ä¼˜å…ˆçº§åˆ’åˆ†ä¸šåŠ¡é€»è¾‘</h3><p>ä» App çš„ç»´åº¦ä¸Šçœ‹ï¼Œä¸€ä¸ª Web é¡µé¢ä»å…¥å£ç‚¹å‡»åˆ°æ¸²æŸ“å®Œæˆï¼Œæˆ–å¤šæˆ–å°‘éƒ½ä¼šæœ‰ Native çš„ä¸šåŠ¡é€»è¾‘å¹¶è¡Œæ‰§è¡Œã€‚æ‰€ä»¥è¿™ä¸ªè§’åº¦çš„ä¼˜åŒ–å…³é”®æ¸²æŸ“è·¯å¾„ï¼Œå°±æ˜¯ä¼˜å…ˆä¿è¯ WebView ä»¥åŠå…¶ä»–åœ¨é¦–å±ç›´æ¥å±•ç¤ºçš„ Native æ¨¡å—ä¼˜å…ˆæ¸²æŸ“ã€‚æ‰€ä»¥æ‰¿è½½ Web é¡µé¢çš„ Native å®¹å™¨ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡é€»è¾‘çš„ä¼˜å…ˆçº§ï¼Œåœ¨ä¿è¯ WebView æ¨¡å—å±•ç¤ºä¹‹åï¼Œé€‰æ‹©åˆé€‚çš„æ—¶æœºè¿›è¡Œæ•°æ®åŠ è½½ã€è§†å›¾æ¸²æŸ“ç­‰ã€‚è¿™æ ·å°±èƒ½ä¿è¯åœ¨ Native çš„ç»´åº¦ä¸Šï¼Œå…³é”®è·¯å¾„ä¼˜å…ˆæ¸²æŸ“ã€‚</p>
<p><img src="youxianji.jpg" alt></p>
<h2 id="4-ä¼˜åŒ–æ•´ä½“æµç¨‹"><a href="#4-ä¼˜åŒ–æ•´ä½“æµç¨‹" class="headerlink" title="4. ä¼˜åŒ–æ•´ä½“æµç¨‹"></a>4. ä¼˜åŒ–æ•´ä½“æµç¨‹</h2><p>æ‰€ä»¥æ•´ä½“ä¸Šå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä» Native ç»´åº¦ï¼ˆå®¹å™¨å’Œæ•°æ®åŠ è½½ï¼‰ä»¥åŠ Web ç»´åº¦ä¸¤ä¸ªæ–¹å‘æå‡åŠ è½½é€Ÿåº¦ï¼ŒæŒ‰ç…§é¡µé¢çš„åŠ è½½æµç¨‹ï¼Œæ•´ä½“çš„ä¼˜åŒ–æ–¹å‘å¦‚ä¸‹ï¼š</p>
<p><img src="liucheng.jpg" alt></p>
<h1 id="iOS-ä¸­-Web-ç›¸å…³å»¶ä¼¸ä¸šåŠ¡"><a href="#iOS-ä¸­-Web-ç›¸å…³å»¶ä¼¸ä¸šåŠ¡" class="headerlink" title="iOS ä¸­ Web ç›¸å…³å»¶ä¼¸ä¸šåŠ¡"></a>iOS ä¸­ Web ç›¸å…³å»¶ä¼¸ä¸šåŠ¡</h1><h2 id="1-æ¨¡æ¿å¼•æ“"><a href="#1-æ¨¡æ¿å¼•æ“" class="headerlink" title="1. æ¨¡æ¿å¼•æ“"></a>1. æ¨¡æ¿å¼•æ“</h2><p>ä¸ºäº†è¾¾åˆ°å¹¶è¡ŒåŠ è½½æ•°æ®ä»¥åŠå¹¶è¡Œå¤„ç†å¤æ‚çš„å±•ç¤ºé€»è¾‘ï¼Œå¯¹äºéç›´å‡ºç±»å‹çš„ Web é¡µé¢ï¼Œç»å¤§éƒ¨åˆ† App éƒ½é‡‡ç”¨æ•°æ®å’Œæ¨¡æ¿åˆ†ç¦»ä¸‹å‘çš„æ–¹å¼ã€‚è€Œè¿™æ ·çš„æŠ€æœ¯æ¶æ„ï¼Œå¯¼è‡´åœ¨å®¢æˆ·ç«¯å†…éœ€è¦å¢åŠ æ›¿æ¢å¯¹åº” DSL çš„æ¨¡æ¿æ ‡ç­¾ï¼Œå½¢æˆæœ€ç»ˆçš„ HTML çš„ä¸šåŠ¡é€»è¾‘ã€‚ç®€å•çš„å­—ç¬¦ä¸²æ›¿æ¢é€»è¾‘ä¸ä½†ä½æ•ˆï¼Œè¿˜æ— æ³•åšåˆ°åˆç†çš„ç»„ä»¶åŒ–ç®¡ç†ï¼Œä»¥åŠç»„ä»¶åˆç†çš„ä¸ Native äº¤äº’ï¼Œè€Œæ¨¡æ¿å¼•æ“ç›¸å…³æŠ€æœ¯ä¼šä½¿è¿™ç§é€»è¾‘å’Œè¡¨ç°åˆ†ç¦»çš„ä¸šåŠ¡åœºæ™¯å®ç°çš„æ›´åŠ ç®€æ´å’Œä¼˜é›…ã€‚</p>
<p>åŸºäºæ¨¡æ¿å¼•æ“ä¸æ•°æ®åˆ†ç¦»ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ ¹æ®æ•°æ®å¹¶è¡Œåˆ›å»ºå­ä¸šåŠ¡æ¨¡å—ï¼ŒåŒæ—¶åœ¨å­ä¸šåŠ¡æ¨¡å—ä¸­å¤„ç†å’Œ Native äº¤äº’çš„éƒ¨åˆ†å¦‚å›¾ç‰‡è£å‰ªé€‚é…ã€ç‚¹å‡»è·³è½¬ç­‰ç­‰ï¼Œç”Ÿæˆ HTML ä»£ç ç‰‡æ®µã€‚ä¹‹ååŸºäºæ¨¡æ¿è¿›è¡Œæ›¿æ¢ç”Ÿæˆå®Œæ•´çš„é¡µé¢ã€‚è¿™æ ·ä¸ä½†å‡å°‘äº†å¤§é‡çš„å­—ç¬¦ä¸²æ›¿æ¢é€»è¾‘ï¼ŒåŒæ—¶ä¸šåŠ¡ä¹Ÿå¾—åˆ°äº†åˆç†æ‹†åˆ†ã€‚</p>
<p><img src="template.jpg" alt></p>
<p>æ¨¡æ¿å¼•æ“çš„æœ¬è´¨å°±æ˜¯å­—ç¬¦ä¸²çš„è§£æå’Œæ›¿æ¢æ‹¼æ¥ã€‚åœ¨ Web ç«¯ä¸åŒçš„ä½¿ç”¨åœºæ™¯æœ‰å¾ˆå¤šä¸åŒè¯­æ³•çš„å¼•æ“ç±»å‹ï¼Œè€Œåœ¨å®¢æˆ·ç«¯è¾ƒä¸ºæµè¡Œçš„ï¼Œæœ‰ä½¿ç”¨è¾ƒä¸ºå¤æ‚çš„ MGTemplateEngineï¼Œå®ƒç±»ä¼¼äº Smartyï¼Œæ”¯æŒéƒ¨åˆ†æ¨¡æ¿é€»è¾‘ã€‚ä¹Ÿæœ‰åŸºäº mustacheï¼ŒLogic-less çš„ GRMustache å¯ä¾›é€‰æ‹©ã€‚</p>
<h2 id="2-èµ„æºåŠ¨æ€æ›´æ–°å’Œç®¡ç†"><a href="#2-èµ„æºåŠ¨æ€æ›´æ–°å’Œç®¡ç†" class="headerlink" title="2. èµ„æºåŠ¨æ€æ›´æ–°å’Œç®¡ç†"></a>2. èµ„æºåŠ¨æ€æ›´æ–°å’Œç®¡ç†</h2><p>æ— è®ºæ˜¯ç¦»çº¿åŒ…ã€æœ¬åœ°æ³¨å…¥çš„ JSã€CSS æ–‡ä»¶ã€ä»¥åŠæœ¬åœ°åŒ– Web ä¸­çš„é»˜è®¤å›¾ç‰‡ï¼Œç›®çš„éƒ½æ˜¯é€šè¿‡æå‰ä¸‹è½½ï¼Œæ›¿æ¢ç½‘ç»œè¯·æ±‚ä¸ºæœ¬åœ°è¯»å–æ¥ä¼˜åŒ– Web çš„åŠ è½½ä½“éªŒå’ŒæˆåŠŸç‡ã€‚è€Œå¯¹äºè¿™äº›èµ„æºçš„ç®¡ç†ï¼Œå¼€å‘è€…éœ€è¦ä»ä¸‹è½½ä¸æ›´æ–°ï¼Œä»¥åŠ Web ä¸­çš„è®¿é—®è¿™ä¸¤ä¸ªæ–¹é¢è¿›è¡Œè®¾è®¡ä¼˜åŒ–ã€‚</p>
<h3 id="ä¸‹è½½ä¸æ›´æ–°"><a href="#ä¸‹è½½ä¸æ›´æ–°" class="headerlink" title="ä¸‹è½½ä¸æ›´æ–°"></a>ä¸‹è½½ä¸æ›´æ–°</h3><p>ä¸‹è½½ä¸é‡è¯•ï¼šå¯¹äºèµ„æºæˆ–æ˜¯ç¦»çº¿åŒ…çš„ä¸‹è½½ï¼Œé€‰æ‹©åˆé€‚çš„æ—¶æœºã€å¤±è´¥é‡è½½æ—¶æœºã€å¤±è´¥é‡è½½æ¬¡æ•°éƒ½è¦æ ¹æ®ä¸šåŠ¡çµæ´»è°ƒæ•´ã€‚é€šå¸¸ä¸ºäº†å¢åŠ æˆåŠŸç‡å’ŒåŠæ—¶æ›´æ–°ï¼Œåœ¨å†·å¯åŠ¨ã€å‰åå°åˆ‡æ¢ã€å…³é”®çš„æ“ä½œèŠ‚ç‚¹ï¼Œæˆ–è€…é‡‡ç”¨å®šæ—¶è½®å¾ªçš„æ–¹å¼ï¼Œéƒ½éœ€è¦è¿›è¡Œèµ„æºç‰ˆæœ¬å·æˆ– MD5 çš„åˆ¤æ–­ï¼Œç”¨ä»¥è§¦å‘ä¸‹è½½é€»è¾‘ã€‚å½“ç„¶å¯¹äºæœåŠ¡ç«¯æ¥è¯´ï¼Œåˆç†çš„ç°åº¦æ§åˆ¶ï¼Œä¹Ÿæ˜¯ä¿è¯ä¸šåŠ¡ç¨³å®šçš„é‡è¦é€”å¾„ã€‚</p>
<p>ç­¾åæ ¡éªŒï¼šå¯¹äºåŠ¨æ€ä¸‹è½½çš„èµ„æºï¼Œæˆ‘ä»¬éƒ½éœ€è¦å°†åŸæ–‡ä»¶çš„ç­¾åè¿›è¡Œæ ¡éªŒï¼Œé˜²æ­¢åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«ç¯¡æ”¹ã€‚å¯¹äºå•é¡¹åŠ å¯†çš„åŠæ³•å°±æ˜¯åŒç«¯å¯¹æ•°æ®è¿›è¡Œ MD5 çš„åŠ å¯†ï¼Œä¹‹åå®¢æˆ·ç«¯æ ¡éªŒ MD5 æ˜¯å¦ç¬¦åˆé¢„æœŸï¼›è€ŒåŒå‘åŠ å¯†å¯ä»¥é‡‡ç”¨ DES ç­‰åŠ å¯†ç®—æ³•ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨å…¬é’¥å¯¹èµ„æºéªŒè¯ä½¿ç”¨ã€‚</p>
<p>å¢é‡æ›´æ–°ï¼šä¸ºäº†å‡å°‘èµ„æºå’Œç¦»çº¿åŒ…çš„é‡å¤ä¸‹è½½ï¼Œä¸šå†…å¤§éƒ¨åˆ†ä½¿ç”¨ç¦»çº¿åŒ…çš„åœºæ™¯éƒ½é‡‡ç”¨äº†å¢é‡æ›´æ–°çš„æ–¹å¼ã€‚å³å®¢æˆ·ç«¯åœ¨è§¦å‘è¯·æ±‚èµ„æºæ—¶ï¼Œå¸¦ä¸Šæœ¬åœ°å·²å­˜åœ¨èµ„æºçš„æ ‡ç¤ºï¼ŒæœåŠ¡ç«¯æ ¹æ®æ ‡ç¤ºå’Œæœ€æ–°èµ„æºåšå¯¹æ¯”ï¼Œä¹‹ååªæä¾›æ–°å¢æˆ–ä¿®æ”¹çš„ Patch ä¾›å®¢æˆ·ç«¯ä¸‹è½½ã€‚</p>
<h3 id="åŸºäº-LocalServer-çš„è®¿é—®"><a href="#åŸºäº-LocalServer-çš„è®¿é—®" class="headerlink" title="åŸºäº LocalServer çš„è®¿é—®"></a>åŸºäº LocalServer çš„è®¿é—®</h3><p>åœ¨å®Œæˆèµ„æºçš„ä¸‹è½½ä¸æ›´æ–°åï¼Œå¦‚ä½•å°† Web è¯·æ±‚é‡å®šå‘åˆ°æœ¬åœ°ï¼Œå¤§éƒ¨åˆ† App éƒ½ä¾èµ–äº NSURLProtocolã€‚ä¸Šæ–‡æåˆ°åœ¨ WKWebView ä¸­è™½ç„¶å¯ä»¥ä½¿ç”¨ç§æœ‰å‡½æ•°å®ç°ï¼ˆæˆ–è€… iOS11+ æä¾›ç³»ç»Ÿå‡½æ•°ï¼‰ï¼Œä½†æ˜¯ä»ç„¶æœ‰è®¸å¤šé—®é¢˜ã€‚</p>
<p>ç›®å‰ä¸šç•Œä¸€éƒ¨åˆ† Appï¼Œéƒ½é‡‡ç”¨äº†é›†æˆ LocalServer çš„æ–¹å¼ï¼Œæ¥ç®¡éƒ¨åˆ† Web è¯·æ±‚ï¼Œä»è€Œè¾¾åˆ°è®¿é—®æœ¬åœ°èµ„æºçš„ç›®çš„ã€‚åŒæ—¶é›†æˆäº† LocalServerï¼Œé€šè¿‡å°†æœ¬åœ°èµ„æºå°è£…æˆ Responseï¼Œåˆ©ç”¨ HTTP çš„ç¼“å­˜æŠ€æœ¯ï¼Œè¿›ä¸€æ­¥çš„ä¼˜åŒ–äº†è¯»å–çš„æ—¶é—´å’Œæ€§èƒ½ï¼Œå®ç°å±‚æ¬¡åŒ–çš„ç¼“å­˜ç»“æ„ã€‚è€Œä½¿ç”¨äº†æœ¬åœ°èµ„æºçš„ HTTP ç¼“å­˜ï¼Œå°±éœ€è¦è€ƒè™‘ç¼“å­˜çš„æ§åˆ¶å’Œè¿‡æœŸæ—¶é—´ã€‚é€šå¸¸å¯ä»¥é€šè¿‡åœ¨ URL ä¸Šå¢åŠ æœ¬åœ°æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ã€æˆ–æœ¬åœ°æ–‡ä»¶çš„ MD5 æ¥ç¡®ä¿ç¼“å­˜çš„æœ‰æ•ˆæ€§ã€‚</p>
<p><img src="localserver.jpg" alt></p>
<h3 id="GCDWebServer-æµ…æ"><a href="#GCDWebServer-æµ…æ" class="headerlink" title="GCDWebServer æµ…æ"></a>GCDWebServer æµ…æ</h3><p>æ’é™¤ Socket ç±»å‹ï¼Œä¸šç•Œæµè¡Œçš„ Objc ç‰ˆé’ˆå¯¹ HTTP å¼€æºçš„ WebServerï¼Œä¸å¤–ä¹å¹´ä¹…å¤±ä¿®çš„ CocoaHTTPServer ä»¥åŠ GCDWebServerã€‚GCDWebServer æ˜¯ä¸€ä¸ªåŸºäº GCD çš„è½»é‡çº§æœåŠ¡å™¨ï¼Œç®€å•çš„å››ä¸ªæ¨¡å— - Server / Connection / Request / Reponseï¼Œä»¥åŠé€šè¿‡ç»´æŠ¤ LIFO çš„ Handler é˜Ÿåˆ—ä¼ å…¥ä¸šåŠ¡é€»è¾‘ç”Ÿæˆå“åº”ã€‚åœ¨æ’é™¤äº†åŸºäº RFC çš„ Request/Response åè®®è®¾è®¡ä¹‹å¤–ï¼Œå…³é”®çš„ä»£ç å’Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//GCDWebServer ç«¯å£ç»‘å®š</span></span><br><span class="line">  bind(listeningSocket, address, length)</span><br><span class="line">  listen(listeningSocket, (<span class="keyword">int</span>)maxPendingConnections)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//GCDWebServer ç»‘å®š Socket ç«¯å£å¹¶æ¥æ”¶æ•°æ®æº</span></span><br><span class="line">  dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_READ, listeningSocket, <span class="number">0</span>, dispatch_get_global_queue(_dispatchQueuePriority, <span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">//GCDWebServer æ¥æ”¶æ•°æ®å¹¶åˆ›å»º Connection</span></span><br><span class="line">  dispatch_source_set_event_handler(source, ^&#123;</span><br><span class="line">      ...</span><br><span class="line">     GCDWebServerConnection* connection = [(GCDWebServerConnection*)[<span class="keyword">self</span>-&gt;_connectionClass alloc] initWithServer:<span class="keyword">self</span> localAddress:localAddress remoteAddress:remoteAddress socket:socket]; </span><br><span class="line"></span><br><span class="line">  <span class="comment">//GCDWebServerConnection è¯»å–æ•°æ®</span></span><br><span class="line">  dispatch_read(_socket, length, dispatch_get_global_queue(_server.dispatchQueuePriority, <span class="number">0</span>), ^(dispatch_data_t buffer, <span class="keyword">int</span> error) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//GCDWebServerConnection å¤„ç† GCDWebServerMatchBlock å’Œ GCDWebServerAsyncProcessBlock</span></span><br><span class="line">  <span class="keyword">self</span>-&gt;_request = <span class="keyword">self</span>-&gt;_handler.matchBlock(requestMethod, requestURL, requestHeaders, requestPath, requestQuery);</span><br><span class="line">  ...</span><br><span class="line">  _handler.asyncProcessBlock(request, [completion <span class="keyword">copy</span>]);</span><br></pre></td></tr></table></figure>
<p>åœ¨ LocalServer çš„ä½¿ç”¨ä¸Šï¼Œä¹Ÿè¦æ³¨æ„ç«¯å£çš„é€‰æ‹© ports used by Appleï¼Œä»¥åŠå‰åå°åˆ‡æ¢æ—¶ suspendInBackground çš„è®¾ç½®å’Œä¸šåŠ¡å¤„ç†ã€‚</p>
<h2 id="3-Javascript-Open-Api"><a href="#3-Javascript-Open-Api" class="headerlink" title="3.Javascript Open Api"></a>3.Javascript Open Api</h2><p>éšç€ App ä¸šåŠ¡çš„ä¸æ–­å‘å±•ï¼Œå•çº¯çš„ Web åŠ è½½ä¸æ¸²æŸ“æ— æ³•æ»¡è¶³å¤æ‚çš„äº¤äº’é€»è¾‘ï¼Œå¦‚æ‹ç…§ã€éŸ³è§†é¢‘ã€è“ç‰™ã€å®šä½ç­‰ï¼ŒåŒæ—¶ App å†…ä¹Ÿéœ€è¦ç»Ÿä¸€çš„ç™»å½•æ€ï¼Œç»Ÿä¸€çš„åˆ†äº«é€»è¾‘ä»¥åŠæ”¯ä»˜é€»è¾‘ç­‰ã€‚æ‰€ä»¥é’ˆå¯¹ç¬¬ä¸‰æ–¹çš„ Web é¡µé¢ï¼ŒNative éœ€è¦æ³¨å†Œç›¸åº”çš„ Javascript æ¥å£ä¾› Web ä½¿ç”¨ã€‚</p>
<p>å¯¹äº Api éœ€è¦æä¾›çš„èƒ½åŠ›ã€æ¥å£è®¾è®¡å’Œæ–‡æ¡£è§„èŒƒï¼Œä¸åŒçš„ä¸šåŠ¡é€»è¾‘å’Œå›¢é˜Ÿä»£ç é£æ ¼ä¼šæœ‰ä¸åŒçš„å®šä¹‰ï¼Œå¾®ä¿¡ JS-SDK è¯´æ˜æ–‡æ¡£ å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚è€Œè„±ç¦» Javascript Open Api å¯¹å¤–çš„æ¥å£è®¾è®¡å’Œå°è£…ï¼Œåœ¨å†…éƒ¨çš„å®ç°ä¸Šä¹Ÿæœ‰ä¸€äº›é€šç”¨çš„å…³é”®å› ç´ ï¼Œè¿™é‡Œç®€å•åˆ—ä¸¾å‡ ä¸ªï¼š</p>
<h3 id="æ³¨å…¥æ–¹å¼å’Œæ—¶æœº"><a href="#æ³¨å…¥æ–¹å¼å’Œæ—¶æœº" class="headerlink" title="æ³¨å…¥æ–¹å¼å’Œæ—¶æœº"></a>æ³¨å…¥æ–¹å¼å’Œæ—¶æœº</h3><p>å¯¹äº Javascript æ–‡ä»¶çš„æ³¨å…¥ï¼Œæœ€ç®€å•çš„å°±æ˜¯å°† JS æ–‡ä»¶æ‰“åŒ…åˆ°é¡¹ç›®ä¸­ï¼Œä½¿ç”¨ WKWebView æä¾›çš„ç³»ç»Ÿå‡½æ•°è¿›è¡Œæ³¨å…¥ã€‚è¿™ç§æ–¹å¼æ— éœ€ç½‘ç»œåŠ è½½ï¼Œå¯ä»¥åˆç†çš„é€‰æ‹©æ³¨å…¥æ—¶æœºï¼Œä½†æ˜¯æ— æ³•åŠ¨æ€çš„è¿›è¡Œä¿®æ”¹å’Œè°ƒæ•´ã€‚è€Œå¯¹äºè¿™éƒ¨åˆ†ä¸šåŠ¡éœ€æ±‚éœ€è¦ç»å¸¸è°ƒæ•´çš„ App æ¥è¯´ï¼Œä¹Ÿå¯ä»¥æŠŠæ–‡ä»¶å­˜å‚¨åˆ° CDNï¼Œé€šè¿‡æ¨¡æ¿æ›¿æ¢æˆ–è€…å’Œ Web åˆä½œè€…çº¦å®šï¼Œåœ¨ Web çš„ HTML ä¸­é€šè¿‡ URL çš„æ–¹å¼è¿›è¡ŒåŠ è½½ï¼Œè¿™ç§çš„æ–¹å¼è™½ç„¶åŠ¨æ€åŒ–ç¨‹åº¦è¾ƒé«˜ï¼Œä½†æ˜¯éœ€è¦åˆä½œæ–¹çš„é…åˆï¼ŒåŒæ—¶å¯¹äº JS Api ä¹Ÿä¸èƒ½åšåˆ°æ‹†åˆ†çš„æ³¨å…¥ã€‚</p>
<p>é’ˆå¯¹ä¸Šé¢çš„ä¸¤ç§æ–¹å¼çš„ä¼˜ç‚¹ä¸è¶³ï¼Œä¸€ä¸ªè¾ƒä¸ºåˆç†çš„æ–¹å¼æ˜¯ Javascript æ–‡ä»¶é‡‡ç”¨æœ¬åœ°æ³¨å…¥çš„æ–¹å¼ï¼ŒåŒæ—¶å»ºç«‹èµ„æºçš„åŠ¨æ€æ›´æ–°ç³»ç»Ÿï¼ˆä¸Šæ–‡ï¼‰ã€‚è¿™æ ·ä¸€æ–¹é¢æ”¯æŒäº†åŠ¨æ€æ›´æ–°ï¼ŒåŒæ—¶ä¹Ÿæ— éœ€åˆä½œæ–¹çš„é…åˆï¼Œå¯¹äºä¸åŒçš„ä¸šåŠ¡åœºæ™¯ä¹Ÿå¯ä»¥æ‹†åˆ†ä¸åŒçš„ Api è¿›è¡Œæ³¨å…¥ï¼Œä¿è¯å®‰å…¨ã€‚</p>
<h3 id="å®‰å…¨æ§åˆ¶"><a href="#å®‰å…¨æ§åˆ¶" class="headerlink" title="å®‰å…¨æ§åˆ¶"></a>å®‰å…¨æ§åˆ¶</h3><p>å¯¹äº Javascript Open Api è®¾è®¡å®ç°çš„å¦ä¸€ä¸ªé‡è¦æ–¹é¢ï¼Œå°±æ˜¯å®‰å…¨æ€§çš„æ§åˆ¶ã€‚ç”±äºå®Œæ•´çš„ Api éœ€è¦æ”¯æŒ Native ç™»å½•ã€Cookies ç­‰è¾ƒä¸ºæ•æ„Ÿçš„ä¿¡æ¯è·å–ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒä¸€äº›å¯¹ UI å’Œä½“éªŒå½±å“è¾ƒå¤šçš„åŠŸèƒ½å¦‚é¡µé¢è·³è½¬ã€åˆ†äº«ç­‰ï¼Œæ‰€ä»¥ App éœ€è¦ä¸€å¥—æƒé™åˆ†çº§çš„é€»è¾‘æ§åˆ¶ Web ç›¸å…³çš„æ¥å£è°ƒç”¨ï¼Œä¿è¯ä½“éªŒå’Œå®‰å…¨ã€‚</p>
<p>å¸¸è§„çš„åšæ³•å°±æ˜¯å¯¹ Javascript Open Api å»ºç«‹åˆ†çº§çš„ç®¡ç†ï¼Œä¸åŒæƒé™çš„ Web é¡µé¢åªèƒ½è°ƒç”¨å„è‡ªæƒé™å†…çš„æ¥å£ã€‚å®¢æˆ·ç«¯é€šè¿‡ Domain è¿›è¡Œåˆ†çº§ï¼ŒåŒæ—¶æ”¯æŒåŠ¨æ€æ‹‰å–æƒé™ Domain ç™½åå•ï¼Œçµæ´»çš„é…ç½® Web é¡µé¢çš„æƒé™ã€‚åœ¨æ­¤åŸºç¡€ä¸Š App å†…éƒ¨ä¹Ÿå¯ä»¥é€šè¿‡ä¸šåŠ¡é€»è¾‘çš„åˆ’åˆ†ï¼Œåœ¨ Native å±‚é¢ä½¿ç”¨ä¸åŒçš„å®¹å™¨åŠ è½½é¡µé¢ï¼Œè€Œå®¹å™¨æ ¹æ®ä¸šåŠ¡é€»è¾‘çš„ä¸åŒï¼Œæ³¨å…¥ä¸åŒçš„ JS æ–‡ä»¶è¿›è¡Œ Api æƒé™æ§åˆ¶ã€‚</p>
<p><img src="safe.jpg" alt></p>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><p><a href="https://github.com/dequan1331/HybridPageKit" target="_blank" rel="noopener">https://github.com/dequan1331/HybridPageKit</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>Android Jetpackæ¶æ„ç»„ä»¶ä»‹ç»</title>
    <url>/2019/03/24/Android-Jetpack%E6%9E%B6%E6%9E%84%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p><strong>Google ä¸ºäº†å¸®åŠ© Android å¼€å‘è€…æ›´å¿«æ›´å¥½åœ°å¼€å‘ Appï¼Œæ¨å‡ºäº†ä¸€ç³»åˆ—ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶è¢«æ‰“åŒ…æˆäº†ä¸€ä¸ªæ•´ä½“ï¼Œç§°ä½œ<code>Android Jetpack</code>ï¼Œå®ƒåŒ…å«çš„ç»„ä»¶å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong><br><a id="more"></a><br><img src="jetpackintro.jpg" alt></p>
<p>è€çš„ <code>support</code> åŒ…è¢«æ•´åˆè¿›äº† <code>Jetpack</code>ï¼Œä¾‹å¦‚ä¸Šå›¾ <code>Foundation</code> æ¨¡å—çš„ AppCompatï¼Œæ•´åˆè¿›å»ä¹‹åï¼ŒåŒ…ååšäº†ä¸€ä¸‹ä¿®æ”¹ï¼Œå…¨éƒ¨ä»¥ <code>androidx</code> å¼€å¤´ã€‚Android Studio æä¾›çš„è¿ç§»å·¥å…·<code>ï¼ˆRefactor &gt; Migrate to AndroidXï¼‰</code>å¯ä»¥å°†æºç ä¸­çš„æ—§åŒ…åæ›¿æ¢æˆæ–°çš„ï¼Œä½†æ˜¯å¦‚æœ Maven ä¾èµ–çš„äº§ç‰©è¿˜æœªè¿ç§»åˆ° <code>AndroidX</code>çš„è¯ï¼Œè¿˜éœ€è¦é…ç½®ä¸€ä¸ªå·¥å…·â€”â€” <code>Jetifier</code>ï¼Œåªéœ€è¦åœ¨ <code>build.gradle</code> ä¸­åŠ ä¸Šä¸¤è¡Œé…ç½®å³å¯ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">android.useAndroidX=<span class="keyword">true</span></span><br><span class="line">android.enableJetifier=<span class="keyword">true</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Jetfier ä¼šåœ¨ç¼–è¯‘é˜¶æ®µç›´æ¥ä¿®æ”¹ä¾èµ–äº§ç‰©çš„å­—èŠ‚ç ï¼Œç®€å•ç²—æš´ã€‚</p>
</blockquote>
<h1 id="æ¶æ„å¤§å›¾"><a href="#æ¶æ„å¤§å›¾" class="headerlink" title="æ¶æ„å¤§å›¾"></a>æ¶æ„å¤§å›¾</h1><p>Jetpack ä¸å±äº Android Frameworkï¼Œä¸æ˜¯ Android å¼€å‘çš„å¿…éœ€å“ï¼Œå®ƒåªæ˜¯åº”ç”¨å±‚å¼€å‘çš„ä¸€ç§è¾…åŠ©æ‰‹æ®µï¼Œå¸®æˆ‘ä»¬è§£å†³äº†ä¸€äº›å¸¸è§é—®é¢˜ï¼Œæ¯”å¦‚ç‰ˆæœ¬å…¼å®¹ã€API æ˜“ç”¨æ€§ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ç­‰ã€‚å…¶ä¸­ Architecture éƒ¨åˆ†çš„ç»„ä»¶ï¼ˆAndroid Architecture Componentsï¼Œä»¥ä¸‹ç®€ç§° AACï¼‰ç»„åˆèµ·æ¥å½¢æˆäº†ä¸€å¥—å®Œæ•´çš„æ¶æ„è§£å†³æ–¹æ¡ˆï¼Œåœ¨æ²¡æœ‰æ›´å¥½çš„æ–¹æ¡ˆè¢«å‘æ˜å‡ºæ¥ä¹‹å‰ï¼Œæˆ‘ä»¬å§‘ä¸”æŠŠ AAC å½“åš Android æ¶æ„é¢†åŸŸçš„æœ€ä½³å®è·µï¼Œå®ƒçš„å‡ºç°ä¸€å®šç¨‹åº¦ä¸Šé¿å…äº†å¾ˆå¤šä¸å¿…è¦çš„è½®å­ã€‚</p>
<p>å®˜æ–¹ç»™å‡ºçš„æ¶æ„æŒ‡å¯¼éå¸¸æ˜ç¡®åœ°è¡¨è¾¾å‡ºäº†æ¯ä¸ªæ¶æ„ç»„ä»¶çš„ä½ç½®ï¼š<br><img src="jiagou.jpg" alt></p>
<p>è¿™å¼ å›¾èƒŒåéšå«äº†ä¸‰å¤§è®¾è®¡æ€æƒ³ï¼š</p>
<ul>
<li>å…³æ³¨ç‚¹åˆ†ç¦»<code>ï¼ˆSOC / Separation Of Concernsï¼‰</code></li>
<li>æ•°æ®é©±åŠ¨UI<code>ï¼ˆReactiveï¼‰</code></li>
<li>å”¯ä¸€çœŸç›¸æº<code>ï¼ˆSSOC / Single Source Of Truthï¼‰</code></li>
</ul>
<p>SOC å…·ä½“åˆ°å·¥ç¨‹å®è·µä¸­å°±æ˜¯åˆ†å±‚åˆç†ï¼Œå•å±‚çš„èŒè´£è¶Šæ˜ç¡®ï¼Œå¯¹ä¸Šä¸‹æ¸¸çš„ä¾èµ–è¶Šæ¸…æ™°å°±æ„å‘³ç€å®ƒçš„ç»“æ„æ›´ç¨³å®šï¼Œä¹Ÿ<br>æ›´å¯æµ‹ï¼ˆtestableï¼‰ã€‚ä¸€ä¸ª App ä»å…¨å±€æ¥çœ‹ï¼Œå¯ä»¥åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šé¦–å…ˆæ˜¯ <code>UI Controller</code> å±‚ï¼ŒåŒ…å« <code>Activity</code> å’Œ <code>Fragment</code>ï¼›å…¶æ¬¡æ˜¯ <code>ViewModel</code> å±‚ï¼Œæ—¢å¯ä»¥åš <code>MVVM</code> çš„ <code>VM</code>ã€<code>MVP</code> çš„ <code>P</code>ï¼Œä¹Ÿå¯ä»¥åš UI çš„æ•°æ®é€‚é…ï¼Œè¿™ä¸€å±‚å¯ä»¥å®ç°æ•°æ®é©±åŠ¨ UIï¼›æœ€åæ˜¯ <code>Repository</code> å±‚ï¼Œå®ƒä½œä¸º SSOCï¼Œæ˜¯ä¸€ä¸ª Facade æ¨¡å¼ï¼Œå¯¹ä¸Šå±‚å±è”½äº†æ•°æ®çš„æ¥æºï¼Œå¯ä»¥æ¥è‡ª localï¼Œä¹Ÿæ˜¯æ¥è‡ª remoteï¼Œæ•°æ®æŒä¹…åŒ–ç­–ç•¥å‘ä¸Šé€æ˜ã€‚</p>
<p>ä¸€å¼ æ¶æ„è“å›¾ï¼Œä¸‰å¤§è®¾è®¡åŸåˆ™ï¼Œæ¥ä¸‹æ¥æ·±å…¥ç»†èŠ‚ï¼Œçœ‹çœ‹ç»„ä»¶ä¹‹é—´å¦‚ä½•é…åˆæ‰èƒ½å®ç°è¿™ä¸ªæ¶æ„ã€‚</p>
<h1 id="Lifecycle"><a href="#Lifecycle" class="headerlink" title="Lifecycle"></a>Lifecycle</h1><p>ä¸ React/Vue æˆ–è€… iOS ç›¸æ¯”ï¼ŒAndroid çš„ç”Ÿå‘½å‘¨æœŸéƒ½æ¯”è¾ƒå¤æ‚ï¼Œå¦‚æœè¦ç›‘å¬ç”Ÿå‘½å‘¨æœŸï¼Œä¸€èˆ¬æƒ…å†µä¸‹åªèƒ½è¦†å†™ Activity / Fragment çš„å›è°ƒæ–¹æ³•ï¼ˆonCreateã€onResumeã€onPauseã€onDestroy ç­‰ï¼‰ï¼Œæ ·æ¿ä»£ç å°‘ä¸äº†ï¼Œå¯ç»´æŠ¤æ€§ä¹Ÿå˜å·®ã€‚</p>
<p>å¦‚æœè¦å¯¹ç”Ÿå‘½å‘¨æœŸè¿›è¡Œç®€åŒ–ï¼Œå¯ä»¥æŠ½è±¡æˆä¸€ä¸ªå›¾ï¼Œç‚¹è¡¨ç¤ºçŠ¶æ€ï¼Œçº¿è¡¨ç¤ºäº‹ä»¶ï¼š</p>
<p><img src="androidlifecycle.jpg" alt></p>
<p>Lifecycle è´Ÿè´£å¤„ç†è¿™äº›ç‚¹ï¼ˆstatesï¼‰å’Œçº¿ï¼ˆeventsï¼‰ï¼ŒActivity / Fragment æ˜¯ LifecycleOwnerï¼Œç›‘å¬è€…åˆ™æ˜¯ LifecycleObserverï¼Œä¸€ä¸ªéå¸¸æ¸…æ™°çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyObserver</span> : <span class="type">LifecycleObserver &#123;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnLifecycleEvent(Lifecycle.Event.ON_RESUME)</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">connectListener</span><span class="params">()</span></span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OnLifecycleEvent(Lifecycle.Event.ON_PAUSE)</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">disconnectListener</span><span class="params">()</span></span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬çš„ç»„ä»¶éœ€è¦å¼ºç»‘å®šå£°æ˜å‘¨æœŸï¼Œé‚£ä¹ˆåªéœ€è¦å€ŸåŠ© Lifecycle å»ç›‘å¬ç”Ÿå‘½å‘¨æœŸçš„çŠ¶æ€å’Œäº‹ä»¶å³å¯ï¼Œå†ä¹Ÿä¸ç”¨è¦†å†™å„ç§å›è°ƒæ–¹æ³•äº†ã€‚ä¸‹é¢å°†è¦è®²åˆ°çš„ LiveData å’Œ ViewModel éƒ½æ˜¯ Lifecycle-Aware Componentsï¼Œå®ƒä»¬éƒ½ç”¨åˆ°äº† Lifecycleã€‚</p>
<p>Android ç”Ÿå‘½å‘¨æœŸç®¡ç†ä¸å½“å¸¦æ¥çš„æœ€å¤§é—®é¢˜å°±æ˜¯å†…å­˜æ³„éœ²ï¼Œä¸¾ä¸€ä¸ªæˆ‘ä»¬ç»å¸¸é‡åˆ°çš„åœºæ™¯ï¼šä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼ˆæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼‰æŒæœ‰äº† UI å…ƒç´ çš„å¼•ç”¨ï¼Œåªè¦ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œå®Œï¼Œæ‰€æœ‰ä¸è¿™ä¸ª UI å…ƒç´ æœ‰å¼ºå¼•ç”¨å…³ç³»çš„å…ƒç´ éƒ½æ²¡æ³•è¢« GCï¼Œå¦‚æœè¿™æ ·çš„åœºæ™¯å¤šå‘ç”Ÿå‡ æ¬¡ï¼Œå¾ˆå¯èƒ½ä¼šå¼•èµ· OOMã€‚</p>
<p>ä¸ºäº†å¼‚æ­¥å¯¹è±¡å¼•ç”¨çš„é—®é¢˜ï¼Œæœ€æ—©æˆ‘ä»¬ä½¿ç”¨ AsyncTaskï¼Œä»»åŠ¡æ‰§è¡Œåœ¨ worker threadï¼Œæ‰§è¡Œç»“æœåœ¨ä¸»çº¿ç¨‹ä¸Šå‘èµ·å›è°ƒã€‚AsyncTask çš„è‡´å‘½ç¼ºç‚¹æ˜¯ä¸æ”¯æŒæµå¼æ•°æ®ï¼ˆstreamï¼‰ï¼Œè€Œä¸”å›è°ƒåµŒå¥—å¤ªæ·±ï¼ˆcallback hellï¼‰ï¼Œä¸è½¯ä»¶è´¨é‡è¡¡é‡æŒ‡æ ‡ä¹‹ä¸€çš„ maintainable èƒŒé“è€Œé©°ï¼Œä¸å¥½ç”¨è‡ªç„¶å°±ä¼šæ…¢æ…¢è¢«æ·˜æ±°ã€‚</p>
<p>åæ¥æˆ‘ä»¬å¼€å§‹ä½¿ç”¨ RxJavaï¼Œå“åº”å¼ç¼–ç¨‹ï¼Œå£°æ˜å¼å†™æ³•ï¼Œå†å€ŸåŠ© retrolambda è¿™ç§ backportï¼Œå³ä½¿å½“å¹´ Android åªæ”¯æŒåˆ° JDK7ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥åˆ©ç”¨å„ç§ operator å†™å‡ºéå¸¸ç®€æ´çš„ä»£ç ï¼Œâ€œfilter map æˆ‘é—­~ç€çœ¼â€ã€‚RxJava ä¸ä½†å®Œç¾è§£å†³äº†çº¿ç¨‹è°ƒåº¦çš„é—®é¢˜ï¼Œè¿˜ä¸ºæˆ‘ä»¬æä¾›äº† OO ä¹‹å¤–çš„æŠ½è±¡â€”â€”ä½œç”¨åœ¨æµä¸Šçš„ lambdaï¼ŒåŸºäºå‡½æ•°çš„æŠ½è±¡ã€‚ä½†æ˜¯ï¼Œå³ä¾¿å®Œç¾å¦‚æ–¯ï¼Œç”Ÿå‘½å‘¨æœŸçš„é—®é¢˜ä¾ç„¶æ— æ³•å›é¿ï¼Œå› ä¸º Java å¤©ç”Ÿçš„å±€é™æ€§ï¼Œä¸€ä¸ª lambda æ— è®ºä¼ªé€ åœ°å†åƒé«˜é˜¶å‡½æ•°ï¼Œå®ƒæœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œè¿™ä¸ªåŒ¿åå†…éƒ¨ç±»ä¾ç„¶æŒæœ‰å¯¹ outer class å®ä¾‹çš„å¼•ç”¨ã€‚äºæ˜¯æˆ‘ä»¬å¿…é¡»é€šè¿‡ CompositeDisposable æ¥ç®¡ç†è®¢é˜…å…³ç³»ï¼Œå‘èµ·å¼‚æ­¥æ“ä½œæ—¶è®°å½•è®¢é˜…ï¼Œç¦»å¼€é¡µé¢æ—¶å–æ¶ˆè®¢é˜…ï¼Œä»ç„¶éœ€è¦è¦†å†™ onDestory æˆ–è€… onPause ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä»¥ Repository å±‚ä¸ºç•ŒæŠŠæ¶æ„è“å›¾åˆ†ä¸ºä¸Šä¸‹ä¸¤éƒ¨åˆ†çš„è¯ï¼Œä¸Šé¢çš„éƒ¨åˆ†æ˜¯æ•°æ®å±•ç¤ºï¼Œä¸‹é¢çš„éƒ¨åˆ†æ˜¯æ•°æ®è·å–ï¼Œæ•°æ®è·å–éƒ¨åˆ†å› ä¸ºè¦è¯·æ±‚ Remote æ•°æ®ï¼Œå¿…ç„¶ä¼šä¾èµ–åˆ°çº¿ç¨‹è°ƒåº¦ï¼Œè€Œæ•°æ®å±•ç¤ºå¿…ç„¶è¿è¡Œåœ¨ UI çº¿ç¨‹ï¼Œä¸ç”Ÿå‘½å‘¨æœŸå¼ºç›¸å…³ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ LiveData ç™»åœºäº†ã€‚</p>
<h1 id="LiveData"><a href="#LiveData" class="headerlink" title="LiveData"></a>LiveData</h1><p>LiveData ä¹Ÿæ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å‹ï¼Œä½†æ˜¯å®ƒæ˜¯ä¸€ä¸ªä¸ Lifecycle ç»‘å®šäº†çš„ Subjectï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å½“ UI ç»„ä»¶å¤„äº ACTIVE çŠ¶æ€æ—¶ï¼Œå®ƒçš„ Observer æ‰èƒ½æ”¶åˆ°æ¶ˆæ¯ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨åˆ‡æ–­è®¢é˜…å…³ç³»ï¼Œä¸ç”¨å†åƒ RxJava é‚£æ ·é€šè¿‡ <code>CompositeDisposable</code> æ¥æ‰‹åŠ¨å¤„ç†ã€‚</p>
<p>LiveData çš„æ•°æ®ç±»ä¼¼ EventBus çš„ sticky eventï¼Œä¸ä¼šè¢«æ¶ˆè´¹æ‰ï¼Œåªè¦æœ‰æ•°æ®ï¼Œå®ƒçš„ observer å°±ä¼šæ”¶åˆ°é€šçŸ¥ã€‚å¦‚æœæˆ‘ä»¬è¦æŠŠ LiveData ç”¨ä½œäº‹ä»¶æ€»çº¿ï¼Œè¿˜éœ€è¦åšä¸€äº›å®šåˆ¶ï¼ŒGithub ä¸Šæœ SingleLiveEvent å¯ä»¥æ‰¾åˆ°æºç å®ç°ã€‚</p>
<p>æˆ‘ä»¬æ²¡æ³•ç›´æ¥ä¿®æ”¹ LiveData çš„ valueï¼Œå› ä¸ºå®ƒæ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Œå¯å˜ï¼ˆmutableï¼‰ç‰ˆæœ¬æ˜¯ <code>MutableLiveData</code>ï¼Œé€šè¿‡è°ƒç”¨ <code>setValue</code>ï¼ˆä¸»çº¿ç¨‹ï¼‰æˆ– <code>postValue</code>ï¼ˆéä¸»çº¿ç¨‹ï¼‰å¯ä»¥ä¿®æ”¹å®ƒçš„ valueã€‚å¦‚æœæˆ‘ä»¬å¯¹å¤–æš´éœ²ä¸€ä¸ª LiveDataï¼Œä½†æ˜¯ä¸å¸Œæœ›å¤–éƒ¨å¯ä»¥æ”¹å˜å®ƒçš„å€¼ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹æŠ€å·§å®ç°ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">val</span> _waveCode = MutableLiveData&lt;String&gt;()</span><br><span class="line"><span class="keyword">val</span> waveCode: LiveData&lt;String&gt; = _waveCode</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å†…éƒ¨ç”¨ MutableLiveData ï¼Œå¯ä»¥ä¿®æ”¹å€¼ï¼Œå¯¹å¤–æš´éœ²æˆ LiveData ç±»å‹ï¼Œåªèƒ½è·å–å€¼ï¼Œä¸èƒ½ä¿®æ”¹å€¼</p>
</blockquote>
<p>LiveData æœ‰ä¸€ä¸ªå®ç°äº†ä¸­ä»‹è€…æ¨¡å¼çš„å­ç±» â€”â€” MediatorLiveDataï¼Œå®ƒå¯ä»¥æŠŠå¤šä¸ª LiveData æ•´åˆæˆä¸€ä¸ªï¼Œåªè¦ä»»ä½•ä¸€ä¸ª LiveData æœ‰æ•°æ®å˜åŒ–ï¼Œå®ƒçš„è§‚å¯Ÿè€…å°±ä¼šæ”¶åˆ°æ¶ˆæ¯ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> liveData1 = ...</span><br><span class="line"><span class="keyword">val</span> liveData2 = ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> liveDataMerger = MediatorLiveData&lt;&gt;();</span><br><span class="line">liveDataMerger.addSource(liveData1) &#123; value -&gt; liveDataMerger.setValue(value))</span><br><span class="line">liveDataMerger.addSource(liveData2) &#123; value -&gt; liveDataMerger.setValue(value))</span><br></pre></td></tr></table></figure>
<p>ç»¼ä¸Šï¼Œæˆ‘ä»¬æ±‡æ€»ä¸€ä¸‹ LiveData çš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>LiveData - immutable ç‰ˆæœ¬</li>
<li>MutableLiveData - mutable ç‰ˆæœ¬</li>
<li>MediatorLiveData - å¯æ±‡æ€»å¤šä¸ªæ•°æ®æº</li>
<li>SingleLiveEvent - äº‹ä»¶æ€»çº¿</li>
</ul>
<p>LiveData åªå­˜å‚¨æœ€æ–°çš„æ•°æ®ï¼Œè™½ç„¶ç”¨æ³•ç±»ä¼¼ RxJava2 çš„ Flowableï¼Œä½†æ˜¯å®ƒä¸æ”¯æŒèƒŒå‹ï¼ˆbackpressureï¼‰ï¼Œæ‰€ä»¥ä¸æ˜¯ä¸€ä¸ªæµï¼ˆstreamï¼‰ï¼Œåˆ©ç”¨ LiveDataReactiveStreams æˆ‘ä»¬å¯ä»¥å®ç° Flowable å’Œ LiveData çš„äº’æ¢ã€‚</p>
<p>å¦‚æœæŠŠå¼‚æ­¥è·å–åˆ°çš„æ•°æ®å°è£…æˆ Flowableï¼Œé€šè¿‡ <code>toLiveData</code> æ–¹æ³•è½¬æ¢æˆ LiveDataï¼Œæ—¢åˆ©ç”¨äº† RxJava çš„çº¿ç¨‹æ¨¡å‹ï¼Œè¿˜æ¶ˆé™¤äº† Flowable ä¸ UI Controller ç”Ÿå‘½å‘¨æœŸçš„è€¦åˆå…³ç³»ï¼Œå€ŸåŠ© Data Binding å†æŠŠ LiveData ç»‘å®šåˆ° xml UI å…ƒç´ ä¸Šï¼Œæ•°æ®é©±åŠ¨ UIï¼Œå¦¥å¦¥çš„å“åº”å¼ã€‚äºæ˜¯ä¸€å¹…å¦‚ä¸‹æ¨¡æ ·çš„æ•°æ®æµå‘å›¾å°±è¢«å‹¾å‹’äº†å‡ºæ¥ï¼š</p>
<p><img src="livedata.jpg" alt></p>
<p>å›¾ä¸­å³ä¸Šè§’çš„ Local Data æ˜¯ AAC æä¾›çš„å¦ä¸€ä¸ªå¼ºå¤§æ­¦å™¨ â€”â€” ORM æ¡†æ¶ Roomã€‚</p>
<h1 id="Room"><a href="#Room" class="headerlink" title="Room"></a>Room</h1><p>æ•°æ®åº“ä½œä¸ºæ•°æ®æŒä¹…å±‚ï¼Œå…¶é‡è¦æ€§ä¸è¨€è€Œå–»ï¼Œå½“è®¾å¤‡å¤„äºç¦»çº¿çŠ¶æ€æ—¶ï¼Œæ•°æ®åº“å¯ç”¨äºç¼“å­˜æ•°æ®ï¼›å½“å¤šä¸ª App éœ€è¦å…±äº«æ•°æ®æ—¶ï¼Œæ•°æ®åº“å¯ä»¥ä½œä¸ºæ•°æ®æºï¼Œä½†æ˜¯åŸºäºåŸç”Ÿ API å¾’æ‰‹å†™ CRUD å®åœ¨æ˜¯ç—›è‹¦ï¼Œè™½ç„¶ Github ä¸Šå‡ºç°äº†ä¸å°‘ ORM æ¡†æ¶ï¼Œä½†æ˜¯å®ƒä»¬çš„æ˜“ç”¨æ€§ä¹Ÿä¸æ•¢è®©äººæ­ç»´ï¼Œç›´åˆ° Room å‡ºæ¥ä¹‹åï¼ŒAndroid ç¨‹åºå‘˜ç»ˆäºå¯ä»¥åƒ mybatis é‚£æ ·è½»æ¾åœ°æ“çºµæ•°æ®åº“äº†ã€‚</p>
<p>Room æ˜¯ SQLite ä¹‹ä¸Šçš„åº”ç”¨æŠ½è±¡å±‚ï¼Œè€Œ SQLite æ˜¯ä¸€ä¸ªä½äº Android Framework å±‚çš„å†…å­˜å‹æ•°æ®åº“ã€‚è™½ç„¶ Realm ä¹Ÿæ˜¯ä¸€ä¸ªä¼˜ç§€çš„æ•°æ®åº“ï¼Œä½†æ˜¯å®ƒå¹¶æ²¡æœ‰å†…ç½®äº Android ç³»ç»Ÿï¼Œæ‰€ä¼šå¢å¤§ apk çš„ä½“ç§¯ï¼Œä½¿ç”¨ Room åˆ™æ²¡æœ‰è¿™æ–¹é¢çƒ¦æ¼ã€‚</p>
<p>Room çš„ç»“æ„æŠ½è±¡å¾—éå¸¸ç®€å•ï¼Œæ•°æ®å¯¹è±¡ï¼ˆè¡¨å + å­—æ®µï¼‰ç”¨ <code>@Entity</code> æ³¨è§£æ¥å®šä¹‰ï¼Œæ•°æ®è®¿é—®ç”¨ @Dao æ¥æ³¨è§£ï¼Œdb æœ¬èº«åˆ™ç”¨ <code>@Database</code> æ¥å®šä¹‰ï¼Œå¦‚æœè¦æ”¯æŒå¤æ‚ç±»å‹ï¼Œå¯ä»¥å®šä¹‰ <code>@TypeConverters</code>ï¼Œç„¶ååœ¨ç¼–è¯‘é˜¶æ®µï¼Œapt ä¼šæ ¹æ®è¿™äº›æ³¨è§£ç”Ÿæˆä»£ç ã€‚Room ä¸ App å…¶ä»–éƒ¨åˆ†çš„äº¤äº’å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="room.jpg" alt></p>
<p>Entity æ˜¯ä¸€ä¸ªæ•°æ®å®ä½“ï¼Œè¡¨ç¤ºä¸€æ¡è®°å½•ï¼Œå®ƒçš„ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity(tableName = <span class="meta-string">"actors"</span>)</span></span><br><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Actor</span></span>(</span><br><span class="line">        <span class="meta">@PrimaryKey</span> <span class="meta">@ColumnInfo(name = <span class="meta-string">"id"</span>)</span></span><br><span class="line">        <span class="keyword">val</span> actorId: String,</span><br><span class="line">        <span class="keyword">val</span> name: String,</span><br><span class="line">        <span class="keyword">val</span> birthday: Date?,</span><br><span class="line">        <span class="keyword">val</span> pictureUrl: String</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><code>Actor</code> æ˜¯ä¸€ä¸ªç”¨ <code>@Entity</code> æ³¨è§£çš„ data classï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªåå­—æ˜¯ <code>actors</code> çš„è¡¨ï¼Œæ³¨æ„åˆ°æœ‰ä¸€ä¸ªå­—æ®µæ˜¯ <code>@Date?</code> ï¼Œä½†æ˜¯ SQLite æœ¬èº«ä¸æ”¯æŒè¿™ç§å¤æ‚ç±»å‹ï¼ˆcomplex typeï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å†™ä¸€ä¸ªå¯ä»¥è½¬æ¢æˆåŸºç¡€ç±»å‹çš„è½¬æ¢å™¨ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Converters</span> </span>&#123;</span><br><span class="line">    <span class="meta">@TypeConverter</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">timestampToDate</span><span class="params">(value: <span class="type">Long</span>?)</span></span> = value?.let &#123; Date(it) &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@TypeConverter</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">dateToTimestamp</span><span class="params">(date: <span class="type">Date</span>?)</span></span> = date?.time</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è½¬æ¢å™¨é€šè¿‡ <code>@TypeConverters</code> å¯ä½œç”¨äº <code>class</code>ã€<code>field</code>ã€<code>method</code>ã€<code>parameter</code>ï¼Œåˆ†åˆ«ä»£è¡¨ä¸åŒçš„ä½œç”¨åŸŸã€‚æ¯”å¦‚ä½œç”¨åœ¨ <code>@Database</code> ç±»çš„ä¸Šï¼Œé‚£ä¹ˆå®ƒçš„ä½œç”¨åŸŸå°±æ˜¯ db ä¸­å‡ºç°çš„æ‰€æœ‰ <code>@Dao</code> å’Œ <code>@Entity</code>ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Database(entities = [Actor::class], version = 1, exportSchema = false)</span></span><br><span class="line"><span class="meta">@TypeConverters(Converters::class)</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AppDatabase</span> : <span class="type">RoomDatabase</span></span>() &#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="function"><span class="keyword">fun</span> <span class="title">actorDao</span><span class="params">()</span></span>: ActorDao</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@Query</code> ä¸­çš„ SQL è¯­å¥å¯ä»¥ç›´æ¥å¼•ç”¨æ–¹æ³•å‚æ•°ï¼Œè€Œä¸”å®ƒçš„è¿”å›å€¼å¯ä»¥æ˜¯ <code>LiveData</code> ç±»å‹ï¼Œä¹Ÿæ”¯æŒ <code>Flowable</code> ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒRoom åŸç”Ÿæ”¯æŒå“åº”å¼ï¼Œè¿™æ˜¯å¯¹æ•°æ®é©±åŠ¨æœ€æœ‰åˆ©çš„æ”¯æŒï¼Œä¹Ÿæ˜¯ Room åŒºåˆ«äºå…¶ä»– ORM æ¡†æ¶çš„æ˜¾è‘—ç‰¹å¾ã€‚</p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šï¼Œæ— è®ºæ•°æ®æ¥è‡ª Remote è¿˜æ˜¯æ¥è‡ªæœ¬åœ° DBï¼Œæ¶æ„è“å›¾ä¸­çš„ Repository å¯¹ ViewModel æä¾›çš„æ•°æ®å¯ä»¥æ°¸è¿œæ˜¯ LiveData ç±»å‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹ ViewModel çš„å¦™ç”¨ã€‚</p>
<h1 id="ViewModel"><a href="#ViewModel" class="headerlink" title="ViewModel"></a>ViewModel</h1><p>ViewModel æ˜¯ä¸€ä¸ªå¤šé¢æ‰‹ï¼Œå› ä¸ºå®ƒçš„ç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒé•¿ï¼Œå¯ä»¥è·¨è¶Šå› ä¸ºé…ç½®å˜åŠ¨ï¼ˆconfiguration changedï¼Œæ¯”å¦‚å±å¹•ç¿»è½¬ï¼‰å¼•èµ·çš„ Activity é‡å»ºï¼Œå› æ­¤ ViewModel ä¸èƒ½æŒæœ‰å¯¹ Activity / Fragment çš„å¼•ç”¨ã€‚</p>
<p><img src="viewmodel.jpg" alt></p>
<p>å¦‚æœ ViewModel ä¸­è¦ç”¨åˆ° context æ€ä¹ˆåŠå‘¢ï¼Ÿæ²¡å…³ç³»ï¼Œæ¡†æ¶æä¾›äº†ä¸€ä¸ª ViewModel çš„å­ç±» <code>AndroidViewModel</code> ï¼Œå®ƒåœ¨æ„é€ æ—¶éœ€è¦ä¼ å…¥ <code>Application</code> å®ä¾‹ã€‚</p>
<p>æ—¢ç„¶ ViewModel ä¸ UI Controller æ— å…³ï¼Œå½“ç„¶å¯ä»¥ç”¨ä½œ MVP çš„ Presenter å±‚æä¾› LiveData ç»™ View å±‚ï¼Œå› ä¸º LiveData ç»‘å®šäº† Lifecycleï¼Œæ‰€ä»¥ä¸å­˜åœ¨å†…å­˜æ³„éœ²çš„é—®é¢˜ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒViewModel ä¹Ÿå¯ä»¥ç”¨åš MVVM æ¨¡å¼çš„ VM å±‚ï¼Œåˆ©ç”¨ Data Binding ç›´æ¥æŠŠ ViewModel çš„ LiveData å±æ€§ç»‘å®šåˆ° xml å…ƒç´ ä¸Šï¼Œxml ä¸­å£°æ˜å¼çš„å†™æ³•é¿å…äº†å¾ˆå¤šæ ·æ¿ä»£ç ï¼Œæ•°æ®é©±åŠ¨ UI çš„æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨æ•°æ®çš„å˜åŒ–å³å¯ï¼ŒUI çš„çŠ¶æ€ä¼šè‡ªåŠ¨å‘ç”Ÿå˜åŒ–ã€‚</p>
<p>ViewModel é…åˆ Data Binding çš„ç”¨æ³•ä¸ React éå¸¸ç›¸ä¼¼ï¼ŒViewModel å®ä¾‹ç›¸å½“äº stateï¼Œxml æ–‡ä»¶å°±å¥½æ¯” <code>render</code> å‡½æ•°ï¼Œåªè¦ <code>state</code> æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œ<code>render</code> å°±ä¼šé‡æ–°æ¸²æŸ“ UIï¼Œä½†æ˜¯ data binding è¿˜æœ‰æ›´å¼ºå¤§çš„ä¸€ç‚¹ï¼Œå®ƒæ”¯æŒåŒå‘ç»‘å®šã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒUI éœ€è¦å±•ç¤ºä¸€ä¸ªè¯„è®ºæ¡†ï¼Œå…è®¸å±•ç¤ºè¯„è®ºï¼Œä¹Ÿå…è®¸ç”¨æˆ·ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠ <code>EditText</code> åŒå‘ç»‘å®šåˆ°ä¸€ä¸ª LiveData ä¹‹ä¸Šï¼Œåªè¦ç”¨æˆ·æœ‰è¾“å…¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ”¶åˆ°é€šçŸ¥ï¼Œå®Œå…¨ä¸éœ€è¦é€šè¿‡ Kotlin/Java æ¥æ“æ§ UIï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextInputEditText</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">"@=&#123;viewModel.commentText&#125;"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œå¦‚æœè¦åœ¨ xml ä¸­ä½¿ç”¨ LiveDataï¼Œéœ€è¦æŠŠ lifecycle owner èµ‹ç»™ bindingï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> binding: MainBinding = DataBindingUtil.setContentView(<span class="keyword">this</span>, R.layout.main)</span><br><span class="line"><span class="comment">// Specify the current activity as the lifecycle owner.</span></span><br><span class="line">binding.setLifecycleOwner(<span class="keyword">this</span>)</span><br></pre></td></tr></table></figure>
<p>å› ä¸º ViewModel æ‹¿åˆ°çš„æ•°æ®æ˜¯ Repository ç»™çš„ï¼Œå¯èƒ½ä¸é€‚ç”¨äº UI å…ƒç´ ï¼Œæ‰€ä»¥ ViewModel è¿˜æ‰¿æ‹…äº†æ•°æ®é€‚é…çš„å·¥ä½œï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æ±‡æ€» repository çš„å¤šä¸ªè¿”å›å€¼ä¸€æ¬¡æ€§ç»™åˆ° UIï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ LiveData çš„â€œæ“ä½œç¬¦â€ <code>Transformations.switchMap</code>ï¼Œç”¨æ³•å¯ä»¥è®¤ä¸ºç­‰åŒäº Rx çš„ flatMapï¼›å¦‚æœåªæƒ³å¯¹ LiveData çš„ value åšä¸€äº›æ˜ å°„ï¼Œå¯ä»¥ä½¿ç”¨ <code>Transformations.map</code>ï¼Œç›®å‰ Transformations åªæœ‰è¿™ä¸¤ä¸ªæ“ä½œç¬¦ï¼Œå› ä¸ºä¸ç®¡ Kotlin è¿˜æ˜¯ Java8ï¼Œéƒ½æä¾›äº†å¾ˆå¤šå£°æ˜å¼çš„æ“ä½œç¬¦ï¼Œå¯¹æµçš„æ”¯æŒéƒ½æ¯”è¾ƒå‹å¥½ï¼Œè€Œ <code>LiveData</code>æœ¬èº«ä¸æ˜¯ä¸€ä¸ªæµï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªæ“ä½œç¬¦è¶³çŸ£ã€‚</p>
<p>é™¤äº†æ•°æ®é€‚é…ä¹‹å¤–ï¼ŒViewModel è¿˜æœ‰ä¸€ä¸ªå¼ºå¤§çš„ç”¨æ³• â€”â€” Fragment ä¹‹é—´å…±äº«æ•°æ®ï¼Œè¿™æ · ViewModel åˆæ‰®æ¼”äº† FLUX æ¨¡å¼ä¸­çš„ store è¿™ä¸€è§’è‰²ï¼Œæ˜¯å¤šä¸ªé¡µé¢ï¼ˆfragmentï¼‰ä¹‹é—´å”¯ä¸€çš„æ•°æ®å‡ºå£ã€‚</p>
<p><img src="viewmodel2.jpg" alt></p>
<p>ViewModel çš„ç”¨æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œé€šè¿‡ <code>ViewModelProviders.of</code> å¯ä»¥è·å– ViewModel å®ä¾‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> viewModel = ViewModelProviders.of(requireActivity(), factory)</span><br><span class="line">        .<span class="keyword">get</span>(ActorViewModel::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></span><br></pre></td></tr></table></figure>
<p>ä¸€é€šæ“ä½œçŒ›å¦‚è™ä¹‹åï¼ŒUI controller å±‚å˜å¾—è–„å¦‚è‰ç¿¼ï¼Œå®ƒåªåšäº†ä¸€ä»¶äº‹æƒ…ï¼ŒæŠŠæ•°æ®ä»å·¦æ‰‹ï¼ˆViewModelï¼‰å€’ç»™äº†å³æ‰‹ï¼ˆä½¿ç”¨äº† Data Binding çš„ xmlï¼‰ã€‚</p>
<p>å¦‚æœæŠŠ ViewModel ä½œä¸º SSOCï¼ˆå”¯ä¸€çœŸç›¸æºï¼‰ï¼Œå¤šä¸ª Fragment ä¹‹é—´å…±äº«æ•°æ®ï¼Œå†åˆ©ç”¨ SingleLiveEvent åšæ€»çº¿ï¼Œä¸€ä¸ª Activity é…å¤šä¸ª Fragment çš„å†™æ³•å°±é¿å…äº† Activity ä¹‹é—´é€šè¿‡ Intent ä¼ é€’æ•°æ®çš„ç¹çã€‚ä½†æ˜¯ Fragment çš„å †æ ˆç®¡ç†ä¸€ç›´æ˜¯ä¸€ä¸ªè®©äººå¤´ç–¼çš„é—®é¢˜ï¼ŒAAC çš„ Navigation ä¸ä½†å®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œè€Œä¸”è¿˜æä¾›å¯è§†åŒ–çš„è·¯ç”±ï¼Œåªéœ€æ‹–æ‹½ä¸€ä¸‹å°±èƒ½ç”Ÿæˆç±»å‹å®‰å…¨çš„è·³è½¬é€»è¾‘ã€‚</p>
<h1 id="Navigation"><a href="#Navigation" class="headerlink" title="Navigation"></a>Navigation</h1><p>Navigation ç”¨ä¸€ä¸ªå›¾ï¼ˆgraphï¼‰æ¥è¡¨ç¤ºé¡µé¢é—´çš„è·¯ç”±å…³ç³»ï¼Œå›¾çš„èŠ‚ç‚¹ï¼ˆnodeï¼‰è¡¨ç¤ºé¡µé¢ï¼Œè¾¹ï¼ˆedgeï¼‰è¡¨ç¤ºè·³è½¬å…³ç³»ã€‚ä¾‹å¦‚ä¸‹å›¾ 8 ä¸ªé¡µé¢çš„è·³è½¬å…³ç³»ï¼Œä¸€ç›®äº†ç„¶ï¼š</p>
<p><img src="navigation.jpg" alt></p>
<p>é¡µé¢ä¸é¡µé¢ä¹‹é—´çš„è¿çº¿å« actionï¼Œå®ƒå¯ä»¥é…ç½®è¿›ç¦»åœºåŠ¨ç”»ï¼ˆAnimationsï¼‰ï¼Œä¹Ÿå¯ä»¥é…ç½®å‡ºæ ˆè¡Œä¸ºï¼ˆPop Behaviorï¼‰ï¼Œè¿˜æ”¯æŒ Single Top çš„å¯åŠ¨é€‰é¡¹ï¼ˆLaunch Optionsï¼‰ã€‚è¿›ç¦»åœºåŠ¨ç”»å’Œå¯åŠ¨é€‰é¡¹å¾ˆå¥½ç†è§£ï¼Œå‡ºæ ˆè¡Œä¸ºæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¼ºå¤§çš„åŠŸèƒ½ï¼Œaction ç®­å¤´æ‰€æŒ‡çš„æ–¹å‘è¡¨ç¤ºç›®æ ‡é¡µé¢å…¥æ ˆï¼Œç®­å¤´çš„åæ–¹å‘åˆ™è¡¨ç¤ºç›®æ ‡é¡µé¢å‡ºæ ˆï¼Œè€Œå‡ºæ ˆçš„è¡Œä¸ºåœ¨ Navigation ç¼–è¾‘å™¨ä¸­å®Œå…¨å¯æ§ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šè¦å‡ºæ ˆåˆ°å“ªä¸ªé¡µé¢ï¼Œç”šè‡³å¯ä»¥æŒ‡å®šç›®æ ‡é¡µé¢æ˜¯å¦ä¹Ÿéœ€è¦å‡ºæ ˆï¼š</p>
<p><img src="navigation2.jpg" alt></p>
<p>é’ˆå¯¹é¡µé¢èŠ‚ç‚¹ï¼Œè¿˜å¯ä»¥å®šä¹‰å®ƒè¦æ¥æ”¶çš„å‚æ•°ï¼ˆargumentsï¼‰ï¼Œæ”¯æŒé»˜è®¤å€¼ï¼Œä»æ­¤ Fragment ä¹‹é—´çš„å‚æ•°ä¼ é€’å˜å¾—éå¸¸ç›´è§‚ï¼Œéå¸¸å®‰å…¨ã€‚</p>
<p>çœ‹ä¸€ä¸‹å…·ä½“ç”¨æ³•ï¼Œé¦–å…ˆåœ¨è·³è½¬å‘èµ·é¡µé¢ï¼Œé€šè¿‡ apt ç”Ÿæˆçš„è·³è½¬å‡½æ•°ä¼ å…¥å‚æ•°ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> actorId = getSelectedActorId()</span><br><span class="line"><span class="keyword">val</span> direction = ActorListFragmentDirections.showDetail(actorId)</span><br><span class="line">findNavController().navigate(direction)</span><br></pre></td></tr></table></figure>
<p>ç„¶ååˆ©ç”¨ç›®æ ‡é¡µé¢ç”Ÿæˆçš„ <code>*Args</code> è·å–å‚æ•°ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">ç„¶ååˆ©ç”¨ç›®æ ‡é¡µé¢ç”Ÿæˆçš„ *Args è·å–å‚æ•°ï¼š</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™é‡Œçš„ navArgs æ˜¯ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œåˆ©ç”¨äº† Kotlin çš„ ReadWritePropertyã€‚</p>
</blockquote>
<p>å‡ è¡Œä»£ç å°±æå®šäº†é¡µé¢ä¹‹é—´çš„è·³è½¬ï¼Œè€Œä¸”è¿˜æ˜¯å¯è§†åŒ–ï¼ä»æ²¡æœ‰æƒ³è¿‡ Android çš„é¡µé¢è·³è½¬ç«Ÿä¼šå˜å¾—å¦‚ä½•ç®€å•ï¼Œä½†æ˜¯ Navigation çš„æ–¹æ¡ˆå¹¶ä¸æ˜¯åŸåˆ›ï¼ŒiOS çš„ Storyboard å¾ˆæ—©å°±æ”¯æŒæ‹–æ‹½ç”Ÿæˆè·¯ç”±ã€‚å½“å¹´ Android æ¨å‡º ConstraintLayout ä¹‹æ—¶ï¼Œæˆ‘ä»¬éƒ½è®¤ä¸ºæ˜¯å‚è€ƒäº† Storyboard çš„é¡µé¢æ‹–æ‹½ï¼Œç°åœ¨å†é…ä¸Š Navigationï¼Œä»é¡µé¢åˆ°è·³è½¬ï¼Œä¸€ä¸ªå®Œæ•´çš„æ‹–æ‹½é“¾è·¯å°±å½¢æˆäº†ã€‚å¹³å°è™½ç„¶æœ‰å·®å¼‚åŒ–ï¼Œä½†æ˜¯ä½¿ç”¨åœºæ™¯ä¸€è‡´çš„å‰æä¸‹ï¼Œè§£å†³æ–¹æ¡ˆä¹Ÿå°±æ®Šé€”åŒå½’äº†ã€‚</p>
<p>äº†è§£å®Œäº†ä¸ç”Ÿå‘½å‘¨æœŸæœ‰å…³çš„ç»„ä»¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ç»†èŠ‚ã€‚</p>
<h1 id="Paging"><a href="#Paging" class="headerlink" title="Paging"></a>Paging</h1><p>UI æ²¡æœ‰åŠæ³•ä¸€æ¬¡æ€§å±•ç¤ºæ‰€æœ‰çš„æ•°æ®ï¼Œç«¯ä¸Šçš„ç³»ç»Ÿèµ„æºï¼ˆç”µé‡ã€å†…å­˜ï¼‰ä¹Ÿæœ‰é™åˆ¶ï¼Œä¸å¯èƒ½æŠŠæ‰€æœ‰æ•°æ®éƒ½åŠ è½½åˆ°å†…å­˜ä¸­ï¼›è€Œä¸”å¤§æ‰¹é‡è¯·æ±‚æ•°æ®ä¸ä½†æµªè´¹å¸¦å®½ï¼Œåœ¨æŸäº›ç½‘ç»œæƒ…å†µï¼ˆå¼±ç½‘ã€æ…¢ç½‘ï¼‰ä¸‹è¿˜ä¼šå¯¼è‡´è¯·æ±‚å¤±è´¥ï¼Œæ‰€ä»¥åˆ†é¡µæ˜¯å¾ˆå¤šæƒ…æ™¯ä¸‹çš„åˆšéœ€ã€‚Github ä¸Šæœ‰å„å¼å„æ ·çš„è§£å†³æ–¹æ¡ˆï¼Œè¿™ä¸€æ¬¡ï¼ŒGoogle ç›´æ¥æ¨å‡ºäº†å®˜æ–¹çš„åˆ†é¡µç»„ä»¶â€”â€”Pagingã€‚</p>
<p>Paging å°†åˆ†é¡µé€»è¾‘æ‹†è§£ä¸ºä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li>æ•°æ®æº <code>DataSource</code></li>
<li>æ•°æ®å— <code>PagedList</code> </li>
<li>æ•°æ®å±•ç¤º <code>PagedListAdapter</code></li>
</ul>
<p>DataSource çš„æ•°æ®æ¥æºäºåç«¯æœåŠ¡æˆ–è€…æœ¬åœ°æ•°æ®åº“ï¼Œå¹¶ä¸”ç”¨ä¸‰ä¸ªå­ç±»æ¥è¡¨ç¤ºä¸‰ç§åˆ†é¡µæ¨¡å¼ï¼š</p>
<ul>
<li><strong>PageKeyedDataSource</strong> - å•é¡µæ•°æ®ä»¥ page key ä¸ºæ ‡è¯†ï¼Œä¾‹å¦‚å½“å‰é¡µçš„ Response ä¸­åŒ…å«äº†ä¸‹ä¸€é¡µçš„ urlï¼Œè¿™ä¸ª url å°±æ˜¯ page keyã€‚</li>
<li><strong>ItemKeyedDataSource</strong> - å•é¡µæ•°æ®ä»¥ item key ä¸ºæ ‡è¯†ï¼Œæ¯”å¦‚ä¸‹ä¸€é¡µçš„è¯·æ±‚è¦å¸¦å½“å‰é¡µæœ€åä¸€ä¸ª item çš„ idï¼Œè¿™ä¸ª itemId å°±æ˜¯ item keyã€‚</li>
<li><strong>PositionalDataSource</strong> - å•é¡µæ•°æ®ä»¥ä½ç½®ä¸ºæ ‡è¯†ï¼Œè¿™ç§æ¨¡å¼æ¯”è¾ƒå¸¸è§ï¼ŒRoom åªæ”¯æŒè¿™ä¸€ç§ï¼Œå› ä¸ºæ•°æ®åº“æŸ¥è¯¢ä»¥ OFFSET å’Œ LIMIT åšåˆ†é¡µã€‚</li>
</ul>
<p>PageKeyedDataSource å’Œ ItemKeyedDataSource é€‚ç”¨äºå†…å­˜å‹æ•°æ®ï¼Œæ¯”å¦‚ç›´æ¥ä»åç«¯è·å–åéœ€è¦å±•ç¤ºçš„æ•°æ®ã€‚PositionalDataSource é€‚ç”¨äºæœ¬åœ° Room æ•°æ®æˆ–è€…ä½¿ç”¨ Room åšç¼“å­˜çš„ Cache æ•°æ®ã€‚</p>
<p>æ•°æ®æµå‘çš„å…³ç³»å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="paging.jpg" alt></p>
<blockquote>
<p><code>LivePagedListBuilder</code> åˆ©ç”¨ <code>DataSource.Factory</code> å’Œ <code>PageList.Config</code> åˆ›å»º <code>LiveData</code>ï¼Œ<code>UI Controller</code> æ‹¿åˆ°æ•°æ®ä¹‹åäº¤ç»™ <code>PagedListAdapter</code> å±•ç¤ºåˆ° <code>RecyclerView</code>ã€‚</p>
</blockquote>
<p>ä¸Šå›¾è¡¨è¾¾äº†æ•°æ®çš„æµå‘ï¼Œå¦‚æœä» UI å±‚å¾€å›çœ‹ï¼Œé¡µé¢å±•ç¤ºçš„æ•°æ®å­˜å‚¨åœ¨ PagedList ä¸­ï¼ŒPagedList åªæ˜¯ DataSource çš„æ•°æ®å—ï¼ˆchunkï¼‰ï¼Œå½“ PagedList éœ€è¦æ›´å¤šæ•°æ®æ—¶ï¼ŒDataSource å°±ä¼šç»™æ›´å¤šï¼Œå½“ DataSource ä¸€æ— æ‰€æœ‰æ—¶ä¾¿ä¼šè§¦å‘ <code>BoundaryCallback</code> è·å–æ›´å¤šæ•°æ®ï¼Œç›´åˆ°æ•°æ®å…¨éƒ¨å±•ç¤ºå®Œæ¯•ã€‚</p>
<p>LivePagedListBuilder ä¼šå°† <code>PagedList</code> åŒ…è£…æˆ <code>LiveData&lt;PagedList&gt;</code> ç»™åˆ°ä¸‹æ¸¸ï¼Œå®ƒåœ¨æ•´ä¸ªæ•°æ®äº¤äº’é“¾è·¯ä¸­çš„ä½ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="paging2.jpg" alt></p>
<blockquote>
<p>Repository æ‹¿åˆ° Dao çš„ DataSource.Factory ä¹‹åï¼Œè°ƒç”¨å®ƒçš„ toLiveData æ–¹æ³•å¹¶ä¼ å…¥ PagedList.Configï¼Œç„¶åç”Ÿæˆä¸€ä¸ªåˆ†é¡µçš„ LiveData<pagedlist> äº¤ç»™ ViewModel å±‚ã€‚</pagedlist></p>
</blockquote>
<p>Paging åŠ ä¸Šç”Ÿå‘½å‘¨æœŸç›¸å…³çš„æ¶æ„ç»„ä»¶è§£å†³äº†æ•°æ®å­˜å‚¨ã€æ•°æ®æµè½¬å’Œæ•°æ®å±•ç¤ºçš„é—®é¢˜ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒAAC è¿˜åŒ…æ‹¬ä¸€ä¸ªå¼ºå¤§çš„å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå™¨ WorkManagerï¼Œå®ƒè§£å†³äº†ä»»åŠ¡æ‰§è¡Œçš„ <strong>å¯é æ€§</strong>ï¼Œæ— è®º App é€€å‡ºè¿˜æ˜¯è®¾å¤‡é‡å¯ï¼Œäº¤ç»™ WorkerManager çš„ä»»åŠ¡éƒ½ä¼šè¢«æ‰§è¡Œã€‚</p>
<h1 id="WorkManager"><a href="#WorkManager" class="headerlink" title="WorkManager"></a>WorkManager</h1><p>WorkManager è™½ç„¶è§£å†³äº†ä»»åŠ¡æ‰§è¡Œå¯é æ€§çš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒæ— æ³•ç²¾ç¡®æ§åˆ¶ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´ï¼Œå› ä¸º WorkManager è¦æ ¹æ® OS èµ„æºæ¥é€‰æ‹©æ‰§è¡Œä»»åŠ¡ã€‚Android è‡ªèº«æä¾›äº†å¾ˆå¤šæ–¹æ¡ˆæ¥è§£å†³åå°ä»»åŠ¡æ‰§è¡Œçš„é—®é¢˜ï¼Œå¯ä»¥æ ¹æ®ä¸‹å›¾çš„å†³ç­–è·¯å¾„é€‰æ‹©ä¸åŒçš„ç»„ä»¶ï¼š</p>
<p><img src="workmanager.jpg" alt></p>
<p>WorkManager æ•´ä½“ä¸Šå¯åˆ†ä¸ºå››éƒ¨åˆ†ï¼šä»»åŠ¡ç±»å‹ã€ä»»åŠ¡æ„å»ºã€ä»»åŠ¡ç›‘æ§å’Œä»»åŠ¡æ§åˆ¶ã€‚</p>
<h2 id="ä¸€ã€ä»»åŠ¡ç±»å‹"><a href="#ä¸€ã€ä»»åŠ¡ç±»å‹" class="headerlink" title="ä¸€ã€ä»»åŠ¡ç±»å‹"></a>ä¸€ã€ä»»åŠ¡ç±»å‹</h2><p>WorkManager æä¾›äº†ä¸€æ¬¡æ€§ä»»åŠ¡å’Œå‘¨æœŸæ€§ä»»åŠ¡ä¸¤ç§ä»»åŠ¡ç±»å‹ï¼š</p>
<ul>
<li>OneTimeWorkRequest â€”â€” ä¸€æ¬¡æ€§ä»»åŠ¡</li>
<li>PeriodicTimeWorkRequest â€”â€” å‘¨æœŸæ€§ä»»åŠ¡</li>
</ul>
<h2 id="äºŒã€ä»»åŠ¡æ„å»º"><a href="#äºŒã€ä»»åŠ¡æ„å»º" class="headerlink" title="äºŒã€ä»»åŠ¡æ„å»º"></a>äºŒã€ä»»åŠ¡æ„å»º</h2><p>ä¸€æ˜¯æ‰§è¡Œæ¡ä»¶ï¼ŒäºŒæ˜¯æ‰§è¡Œé¡ºåºã€‚</p>
<ul>
<li><code>Constraints</code> â€”â€” é€šè¿‡ <code>Constraints.Builder</code>æ„å»ºä»»åŠ¡æ‰§è¡Œçš„æ¡ä»¶ï¼ˆç½‘ç»œç±»å‹ã€ç”µé‡ã€è®¾å¤‡ç©ºé—´ç­‰ï¼‰</li>
<li>WorkContinuation â€”â€” å¯ä»¥æŒ‡å®šä»»åŠ¡çš„æ‰§è¡Œé¡ºåºï¼Œä¾‹å¦‚å¯ä»¥æŒ‰ç…§ PERT å›¾çš„é¡ºåºæ‰§è¡Œä»»åŠ¡ï¼š<br><img src="workmanager2.jpg" alt></li>
</ul>
<h2 id="ä¸‰ã€ä»»åŠ¡ç›‘æ§"><a href="#ä¸‰ã€ä»»åŠ¡ç›‘æ§" class="headerlink" title="ä¸‰ã€ä»»åŠ¡ç›‘æ§"></a>ä¸‰ã€ä»»åŠ¡ç›‘æ§</h2><p>é€šè¿‡å›è°ƒæ¥è·çŸ¥ä»»åŠ¡çš„å½“å‰çŠ¶æ€ï¼š</p>
<p><img src="workmanager3.jpg" alt></p>
<h2 id="å››ã€ä»»åŠ¡æ§åˆ¶"><a href="#å››ã€ä»»åŠ¡æ§åˆ¶" class="headerlink" title="å››ã€ä»»åŠ¡æ§åˆ¶"></a>å››ã€ä»»åŠ¡æ§åˆ¶</h2><p>åŒ…æ‹¬åŠ å…¥é˜Ÿåˆ—ï¼Œå–æ¶ˆä»»åŠ¡ï¼Œå…¶ä¸­ UniqueWork æä¾›äº†å¤šç§åŠ å…¥é˜Ÿåˆ—çš„ç­–ç•¥ï¼ˆREPLACEã€KEEPã€APPENDï¼‰ï¼š</p>
<ul>
<li>cancelWorkById(UUID) â€”â€” é€šè¿‡ ID å–æ¶ˆå•ä¸ªä»»åŠ¡</li>
<li>cancelAllWorkByTag(String) â€”â€” é€šè¿‡ Tag å–æ¶ˆæ‰€æœ‰ä»»åŠ¡</li>
<li>cancelUniqueWork(String) â€”â€” é€šè¿‡åå­—å–æ¶ˆå”¯ä¸€ä»»åŠ¡</li>
</ul>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒWorkerManager è¿˜æä¾›äº†å››ç§ä¸åŒçº¿ç¨‹æ¨¡å‹çš„ Workerï¼š</p>
<ul>
<li>Worker â€”â€” åŸºäºé»˜è®¤åå°çº¿ç¨‹</li>
<li>CoroutineWorker â€”â€” åŸºäº Kotlin çš„åç¨‹</li>
<li>RxWorker â€”â€” åŸºäº RxJava2</li>
<li>ListenableWorker â€”â€” åŸºäºå›è°ƒçš„å¼‚æ­¥</li>
</ul>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>Google å®˜æ–¹æ¶æ„ç»„ä»¶ AAC ä¸ºæˆ‘ä»¬æä¾›äº†å¤ªå¤šé€šç”¨é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨åœºæ™¯åŒ…æ‹¬æ•°æ®æŒä¹…åŒ–ã€å¼‚æ­¥ä»»åŠ¡è°ƒåº¦ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒUI åˆ†é¡µã€UI å¯¼èˆªï¼Œå½“ç„¶è¿˜æœ‰å¼ºå¤§çš„ MVVM æ¡†æ¶ Data Bindingï¼Œè¿™äº›æ¶æ„ç»„ä»¶ä¸ä½†ä½¿ä»£ç å˜å¾—æ¸…æ™°æ˜“è¯»ï¼Œè€Œä¸”ç‹¬ç«‹äº Android SDK å‘ä¸‹å…¼å®¹ï¼ŒAAC ä½¿æˆ‘ä»¬æ›´åŠ èšç„¦äº§å“ï¼Œä¸“æ³¨äºè§£å†³é—®é¢˜ï¼Œè€Œä¸æ˜¯èŠ±å¤ªå¤šçš„æ—¶é—´é‡å¤é€ è½®å­ã€‚</p>
<h1 id="èµ„æ–™"><a href="#èµ„æ–™" class="headerlink" title="èµ„æ–™"></a>èµ„æ–™</h1><p><a href="https://developer.android.google.cn/jetpack/androidx/migrate" target="_blank" rel="noopener">https://developer.android.google.cn/jetpack/androidx/migrate</a></p>
<p><a href="https://developer.android.google.cn/jetpack/" target="_blank" rel="noopener">https://developer.android.google.cn/jetpack/</a></p>
<p><a href="https://developer.android.google.cn/jetpack/docs/guide" target="_blank" rel="noopener">https://developer.android.google.cn/jetpack/docs/guide</a></p>
<p><a href="https://proandroiddev.com/advanced-data-binding-binding-to-livedata-one-and-two-way-binding-dae1cd68530f" target="_blank" rel="noopener">https://proandroiddev.com/advanced-data-binding-binding-to-livedata-one-and-two-way-binding-dae1cd68530f</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysqlä¼˜åŒ–å°æŠ€å·§</title>
    <url>/2019/03/24/Mysql%E4%BC%98%E5%8C%96%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ç¨‹åºåµŒå…¥SQLè¯­å¥ä¼˜åŒ–å°æŠ€å·§</p>
<a id="more"></a>
<h1 id="1ã€æ¯”è¾ƒè¿ç®—ç¬¦èƒ½ç”¨â€™-â€™å°±ä¸ç”¨â€™-lt-gt-â€™"><a href="#1ã€æ¯”è¾ƒè¿ç®—ç¬¦èƒ½ç”¨â€™-â€™å°±ä¸ç”¨â€™-lt-gt-â€™" class="headerlink" title="1ã€æ¯”è¾ƒè¿ç®—ç¬¦èƒ½ç”¨â€™=â€™å°±ä¸ç”¨â€™&lt;&gt;â€™"></a>1ã€æ¯”è¾ƒè¿ç®—ç¬¦èƒ½ç”¨â€™=â€™å°±ä¸ç”¨â€™&lt;&gt;â€™</h1><p>â€˜=â€™å¢åŠ äº†ç´¢å¼•çš„ä½¿ç”¨å‡ ç‡</p>
<h1 id="2ã€æ˜çŸ¥åªæœ‰ä¸€æ¡æŸ¥è¯¢ç»“æœï¼Œé‚£è¯·ä½¿ç”¨â€™LIMIT-1â€™"><a href="#2ã€æ˜çŸ¥åªæœ‰ä¸€æ¡æŸ¥è¯¢ç»“æœï¼Œé‚£è¯·ä½¿ç”¨â€™LIMIT-1â€™" class="headerlink" title="2ã€æ˜çŸ¥åªæœ‰ä¸€æ¡æŸ¥è¯¢ç»“æœï¼Œé‚£è¯·ä½¿ç”¨â€™LIMIT 1â€™"></a>2ã€æ˜çŸ¥åªæœ‰ä¸€æ¡æŸ¥è¯¢ç»“æœï¼Œé‚£è¯·ä½¿ç”¨â€™LIMIT 1â€™</h1><p>â€˜LIMIT 1â€™å¯ä»¥é¿å…å…¨è¡¨æ‰«æï¼Œæ‰¾åˆ°å¯¹åº”ç»“æœå°±ä¸ä¼šå†ç»§ç»­æ‰«æäº†</p>
<h1 id="3ã€ä¸ºåˆ—é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹"><a href="#3ã€ä¸ºåˆ—é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹" class="headerlink" title="3ã€ä¸ºåˆ—é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹"></a>3ã€ä¸ºåˆ—é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹</h1><p>èƒ½ç”¨<code>TINYINT</code>å°±ä¸ç”¨<code>SMALLLINT</code>,èƒ½ç”¨<code>SMALLINT</code>å°±ä¸ç”¨<code>INT</code>ï¼Œå†…å­˜æ¶ˆè€—è¶Šå°è¶Šå¥½</p>
<h1 id="4ã€å°†å¤§çš„DELETEï¼ŒUPDATEæˆ–è€…INSERTæŸ¥è¯¢å˜æˆå¤šä¸ªå°æŸ¥è¯¢"><a href="#4ã€å°†å¤§çš„DELETEï¼ŒUPDATEæˆ–è€…INSERTæŸ¥è¯¢å˜æˆå¤šä¸ªå°æŸ¥è¯¢" class="headerlink" title="4ã€å°†å¤§çš„DELETEï¼ŒUPDATEæˆ–è€…INSERTæŸ¥è¯¢å˜æˆå¤šä¸ªå°æŸ¥è¯¢"></a>4ã€å°†å¤§çš„DELETEï¼ŒUPDATEæˆ–è€…INSERTæŸ¥è¯¢å˜æˆå¤šä¸ªå°æŸ¥è¯¢</h1><p>ä¸ºäº†è¾¾åˆ°æ›´å¥½çš„æ€§èƒ½ä»¥åŠæ›´å¥½çš„æ•°æ®æ§åˆ¶ï¼Œå¯ä»¥å°†å®ƒä»¬å˜æˆå¤šä¸ªå°æŸ¥è¯¢</p>
<p><img src="moresql.png" alt></p>
<h1 id="5ã€å¦‚æœç»“æœé›†å…è®¸é‡å¤çš„è¯ï¼Œä½¿ç”¨UNION-ALLä»£æ›¿UNION"><a href="#5ã€å¦‚æœç»“æœé›†å…è®¸é‡å¤çš„è¯ï¼Œä½¿ç”¨UNION-ALLä»£æ›¿UNION" class="headerlink" title="5ã€å¦‚æœç»“æœé›†å…è®¸é‡å¤çš„è¯ï¼Œä½¿ç”¨UNION ALLä»£æ›¿UNION"></a>5ã€å¦‚æœç»“æœé›†å…è®¸é‡å¤çš„è¯ï¼Œä½¿ç”¨UNION ALLä»£æ›¿UNION</h1><p>å› ä¸ºUNION ALLä¸å»é‡å¤ï¼Œæ•ˆç‡é«˜äºUNION</p>
<h1 id="6ã€ä¸ºè·å¾—ç›¸åŒç»“æœé›†çš„å¤šæ¬¡æ‰§è¡Œï¼Œè¯·ä¿æŒSQLè¯­å¥å‰åä¸€è‡´"><a href="#6ã€ä¸ºè·å¾—ç›¸åŒç»“æœé›†çš„å¤šæ¬¡æ‰§è¡Œï¼Œè¯·ä¿æŒSQLè¯­å¥å‰åä¸€è‡´" class="headerlink" title="6ã€ä¸ºè·å¾—ç›¸åŒç»“æœé›†çš„å¤šæ¬¡æ‰§è¡Œï¼Œè¯·ä¿æŒSQLè¯­å¥å‰åä¸€è‡´"></a>6ã€ä¸ºè·å¾—ç›¸åŒç»“æœé›†çš„å¤šæ¬¡æ‰§è¡Œï¼Œè¯·ä¿æŒSQLè¯­å¥å‰åä¸€è‡´</h1><p>ç›®çš„æ˜¯ä¸ºäº†å……åˆ†åˆ©ç”¨æŸ¥è¯¢ç¼“å†²ï¼Œæ¯”å¦‚æ ¹æ®åœ°åŸŸæˆ–è€…äº§å“idæŸ¥è¯¢äº§å“ä»·æ ¼ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨äº†<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> price <span class="keyword">FROM</span> <span class="keyword">order</span> <span class="keyword">WHERE</span> <span class="keyword">id</span> = <span class="number">123456</span> <span class="keyword">and</span> region = <span class="string">'BEIJING'</span>;</span><br></pre></td></tr></table></figure></p>
<p>é‚£ä¹ˆç¬¬äºŒæ¬¡åŒæ ·çš„æŸ¥è¯¢ï¼Œè¯·ä¿æŒä»¥ä¸Šè¯­å¥çš„ä¸€è‡´æ€§ï¼Œæ¯”å¦‚ä¸è¦å°†whereè¯­å¥é‡Œé¢çš„idå’Œregionä½ç½®è°ƒæ¢é¡ºåºã€‚</p>
<h1 id="7ã€é¿å…ä½¿ç”¨â€™SELECT-â€™"><a href="#7ã€é¿å…ä½¿ç”¨â€™SELECT-â€™" class="headerlink" title="7ã€é¿å…ä½¿ç”¨â€™SELECT *â€™"></a>7ã€é¿å…ä½¿ç”¨â€™SELECT *â€™</h1><p>å¦‚æœä¸æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰çš„åˆ—ï¼Œå°½é‡é¿å…ä½¿ç”¨<code>SELECT *</code>ï¼Œå› ä¸ºè¿™æ ·ä¼šè¿›è¡Œå…¨è¡¨æ‰«æï¼Œä¸èƒ½æœ‰æ•ˆåˆ©ç”¨ç´¢å¼•ï¼Œå¢å¤§äº†æ•°æ®åº“æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼Œä»¥åŠå®ƒä¸åº”ç”¨ç¨‹åºå®¢æˆ·ç«¯ä¹‹é—´çš„ç½‘ç»œIOå¼€é”€ã€‚</p>
<h1 id="8ã€WHEREå­å¥é‡Œé¢çš„åˆ—å°½é‡è¢«ç´¢å¼•"><a href="#8ã€WHEREå­å¥é‡Œé¢çš„åˆ—å°½é‡è¢«ç´¢å¼•" class="headerlink" title="8ã€WHEREå­å¥é‡Œé¢çš„åˆ—å°½é‡è¢«ç´¢å¼•"></a>8ã€WHEREå­å¥é‡Œé¢çš„åˆ—å°½é‡è¢«ç´¢å¼•</h1><p>åªæ˜¯â€™å°½é‡â€™ï¼Œå¹¶ä¸æ˜¯è¯´æ‰€æœ‰çš„åˆ—ã€‚å› åœ°åˆ¶å®œï¼Œæ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´ï¼Œç´¢å¼•å¤ªå¤šä¹Ÿä¼šé™ä½æ€§èƒ½ã€‚</p>
<h1 id="9ã€JOINå­å¥é‡Œé¢çš„åˆ—å°½é‡è¢«ç´¢å¼•"><a href="#9ã€JOINå­å¥é‡Œé¢çš„åˆ—å°½é‡è¢«ç´¢å¼•" class="headerlink" title="9ã€JOINå­å¥é‡Œé¢çš„åˆ—å°½é‡è¢«ç´¢å¼•"></a>9ã€JOINå­å¥é‡Œé¢çš„åˆ—å°½é‡è¢«ç´¢å¼•</h1><p>åŒæ ·åªæ˜¯â€™å°½é‡â€™</p>
<h1 id="10ã€ORDER-BYçš„åˆ—å°½é‡è¢«ç´¢å¼•"><a href="#10ã€ORDER-BYçš„åˆ—å°½é‡è¢«ç´¢å¼•" class="headerlink" title="10ã€ORDER BYçš„åˆ—å°½é‡è¢«ç´¢å¼•"></a>10ã€ORDER BYçš„åˆ—å°½é‡è¢«ç´¢å¼•</h1><p>æ€§èƒ½ä¼šæ›´å¥½</p>
<h1 id="11ã€ä½¿ç”¨LIMITå®ç°åˆ†é¡µé€»è¾‘"><a href="#11ã€ä½¿ç”¨LIMITå®ç°åˆ†é¡µé€»è¾‘" class="headerlink" title="11ã€ä½¿ç”¨LIMITå®ç°åˆ†é¡µé€»è¾‘"></a>11ã€ä½¿ç”¨LIMITå®ç°åˆ†é¡µé€»è¾‘</h1><p>æé«˜æ€§èƒ½ï¼Œå‡å°‘ä¸å¿…è¦æ•°æ®åº“å’Œåº”ç”¨çš„ç½‘ç»œä¼ è¾“</p>
<h1 id="12ã€ä½¿ç”¨EXPLAINå…³é”®å­—å»æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’"><a href="#12ã€ä½¿ç”¨EXPLAINå…³é”®å­—å»æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’" class="headerlink" title="12ã€ä½¿ç”¨EXPLAINå…³é”®å­—å»æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’"></a>12ã€ä½¿ç”¨EXPLAINå…³é”®å­—å»æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’</h1><p>EXPLAINå¯ä»¥æ£€æŸ¥ç´¢å¼•ä½¿ç”¨æƒ…å†µä»¥åŠæ‰«æçš„è¡Œã€‚</p>
<h1 id="13ã€ä¸è¦åœ¨MySQLä¸­ä½¿ç”¨UTF-8"><a href="#13ã€ä¸è¦åœ¨MySQLä¸­ä½¿ç”¨UTF-8" class="headerlink" title="13ã€ä¸è¦åœ¨MySQLä¸­ä½¿ç”¨UTF-8"></a>13ã€ä¸è¦åœ¨MySQLä¸­ä½¿ç”¨UTF-8</h1><p>1.MySQLçš„â€œutf8mb4â€æ˜¯çœŸæ­£çš„â€œUTF-8â€ã€‚<br>2.MySQLçš„â€œutf8â€æ˜¯ä¸€ç§â€œä¸“å±çš„ç¼–ç â€ï¼Œå®ƒèƒ½å¤Ÿç¼–ç çš„Unicodeå­—ç¬¦å¹¶ä¸å¤šã€‚</p>
<p>ä½¿ç”¨â€œutf8â€çš„MySQLå’ŒMariaDBç”¨æˆ·éƒ½åº”è¯¥æ”¹ç”¨â€œutf8mb4â€ï¼Œæ°¸è¿œéƒ½ä¸è¦å†ä½¿ç”¨â€œutf8â€ã€‚</p>
<p>åŸç†ä»‹ç»ï¼š<a href="https://mp.weixin.qq.com/s/dN0OMvcUT--MQdsRVwDtCA" target="_blank" rel="noopener">é“¾æ¥</a></p>
<h1 id="more"><a href="#more" class="headerlink" title="more"></a>more</h1><p>SQLè°ƒä¼˜æ–¹æ³•è¿˜æœ‰å¾ˆå¤šç§ï¼ŒåŒæ ·çš„æŸ¥è¯¢ç»“æœå¯ä»¥æœ‰å¾ˆå¤šç§æŸ¥è¯¢æ–¹å¼ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯æµ‹è¯•ï¼</p>
]]></content>
      <categories>
        <category>DBA</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>CSSå…¥é—¨</title>
    <url>/2019/03/19/CSS%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="CSSå…¥é—¨å­¦ä¹ "><a href="#CSSå…¥é—¨å­¦ä¹ " class="headerlink" title="CSSå…¥é—¨å­¦ä¹ "></a>CSSå…¥é—¨å­¦ä¹ </h1><p>Tool: Visual Studio Code</p>
<a id="more"></a>
<blockquote>
<p>æ–‡ä¸­å…ƒç´ =æ ‡ç­¾</p>
</blockquote>
<h1 id="å¤–é“¾æ ·å¼ä¸å†…é“¾æ ·å¼"><a href="#å¤–é“¾æ ·å¼ä¸å†…é“¾æ ·å¼" class="headerlink" title="å¤–é“¾æ ·å¼ä¸å†…é“¾æ ·å¼"></a>å¤–é“¾æ ·å¼ä¸å†…é“¾æ ·å¼</h1><h2 id="å¤–é“¾"><a href="#å¤–é“¾" class="headerlink" title="å¤–é“¾"></a>å¤–é“¾</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"style/main.css"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å†…é“¾"><a href="#å†…é“¾" class="headerlink" title="å†…é“¾"></a>å†…é“¾</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="å—å…ƒç´ ä¸å†…è”å…ƒç´ "><a href="#å—å…ƒç´ ä¸å†…è”å…ƒç´ " class="headerlink" title="å—å…ƒç´ ä¸å†…è”å…ƒç´ "></a>å—å…ƒç´ ä¸å†…è”å…ƒç´ </h1><h2 id="å—å…ƒç´ "><a href="#å—å…ƒç´ " class="headerlink" title="å—å…ƒç´ "></a>å—å…ƒç´ </h2><p>æ¦‚å¿µï¼šç‹¬å ä¸€è¡Œçš„å…ƒç´ ï¼Œæ ‡ç­¾ä»£è¡¨æœ‰<code>div</code>,<code>p</code>ï¼Œ<code>h1~h6</code>ç­‰ç­‰</p>
<blockquote>
<p>divæ²¡æœ‰ä»»ä½•è¯­ä¹‰çš„æ ‡ç­¾ï¼Œè€Œåœ¨H5ä¸­æ–°å¢äº†ä¸€äº›è¯­ä¹‰æ ‡ç­¾ï¼Œå…·ä½“è¯·çœ‹å¦ä¸€ç‰‡æ–‡ç« å…³äºHTML5çš„æ–°ç‰¹æ€§<br>å—å…ƒç´ ä¸»è¦ä½œä¸ºé¡µé¢çš„å¸ƒå±€ï¼Œä¸€èˆ¬æƒ…å†µå—å…ƒç´ ç”¨æ¥åŒ…å«å†…è”å…ƒç´ ã€‚pæ ‡ç­¾ä¸å¯ä»¥åŒ…å«å…¶ä»–ä»»ä½•å—å…ƒç´ </p>
</blockquote>
<p>å®ä¾‹è¯æ˜:<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Page Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">media</span>=<span class="string">"screen"</span> <span class="attr">href</span>=<span class="string">"main.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"main.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        å“ˆå“ˆå“ˆ</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>å“ˆå“ˆ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æµè§ˆå™¨ä¸ŠæŸ¥çœ‹å†…å®¹å¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼Œä½†æ˜¯æ£€æŸ¥æµè§ˆå™¨å…ƒç´ çš„æ˜¾ç¤ºåˆ™è§£ææˆäº†<br><img src="perror.png" alt></p>
<h2 id="å†…è”å…ƒç´ "><a href="#å†…è”å…ƒç´ " class="headerlink" title="å†…è”å…ƒç´ "></a>å†…è”å…ƒç´ </h2><p>æ¦‚å¿µï¼šåªå è‡ªèº«å†…å®¹å¤§å°çš„å…ƒç´ ï¼Œæ ‡ç­¾ä»£è¡¨æœ‰<code>span</code>,<code>a</code>ç­‰</p>
<blockquote>
<p>aæ ‡ç­¾å¯ä»¥åŒ…å«ä»»ä½•å†…è”å’Œå—å…ƒç´ ï¼Œä½†æ˜¯é™¤äº†å®ƒæœ¬èº«</p>
</blockquote>
<p>å®ä¾‹è¯æ˜:<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Page Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">media</span>=<span class="string">"screen"</span> <span class="attr">href</span>=<span class="string">"main.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"main.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>æ£€æŸ¥æµè§ˆå™¨å…ƒç´ çš„æ˜¾ç¤ºåˆ™è§£ææˆäº†<br><img src="aerror.png" alt></p>
<h1 id="æ ‡ç­¾é—´çš„å…³ç³»"><a href="#æ ‡ç­¾é—´çš„å…³ç³»" class="headerlink" title="æ ‡ç­¾é—´çš„å…³ç³»"></a>æ ‡ç­¾é—´çš„å…³ç³»</h1><p>æ ‡ç­¾ä¹‹é—´çš„å…³ç³»ï¼š</p>
<ul>
<li>çˆ¶æ ‡ç­¾ï¼šç›´æ¥åŒ…å«å­æ ‡ç­¾çš„æ ‡ç­¾</li>
<li>å­æ ‡ç­¾ï¼šç›´æ¥è¢«çˆ¶æ ‡ç­¾åŒ…å«çš„æ ‡ç­¾</li>
<li>ç¥–å…ˆæ ‡ç­¾ï¼šç›´æ¥æˆ–é—´æ¥åŒ…å«åä»£æ ‡ç­¾çš„æ ‡ç­¾ï¼Œçˆ¶æ ‡ç­¾ä¹Ÿæ˜¯ç¥–å…ˆæ ‡ç­¾</li>
<li>åä»£æ ‡ç­¾ï¼šç›´æ¥æˆ–é—´æ¥è¢«ç¥–å…ˆæ ‡ç­¾åŒ…å«çš„æ ‡ç­¾ï¼Œå­æ ‡ç­¾ä¹Ÿæ˜¯åä»£æ ‡ç­¾</li>
<li>å…„å¼Ÿæ ‡ç­¾ï¼šæ‹¥æœ‰ç›¸åŒçˆ¶æ ‡ç­¾çš„æ ‡ç­¾</li>
</ul>
<h1 id="é€‰æ‹©å™¨"><a href="#é€‰æ‹©å™¨" class="headerlink" title="é€‰æ‹©å™¨"></a>é€‰æ‹©å™¨</h1><h2 id="æ ‡ç­¾é€‰æ‹©å™¨"><a href="#æ ‡ç­¾é€‰æ‹©å™¨" class="headerlink" title="æ ‡ç­¾é€‰æ‹©å™¨"></a>æ ‡ç­¾é€‰æ‹©å™¨</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        div &#123;</span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            color: red;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªdiv<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="IDé€‰æ‹©å™¨"><a href="#IDé€‰æ‹©å™¨" class="headerlink" title="IDé€‰æ‹©å™¨"></a>IDé€‰æ‹©å™¨</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#d1</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            color: red;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"d1"</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªdiv<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç±»é€‰æ‹©å™¨"><a href="#ç±»é€‰æ‹©å™¨" class="headerlink" title="ç±»é€‰æ‹©å™¨"></a>ç±»é€‰æ‹©å™¨</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.c1</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            color: red;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªdiv<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="é€‰æ‹©å™¨åˆ†ç»„ï¼ˆå¹¶é›†é€‰æ‹©å™¨ï¼‰"><a href="#é€‰æ‹©å™¨åˆ†ç»„ï¼ˆå¹¶é›†é€‰æ‹©å™¨ï¼‰" class="headerlink" title="é€‰æ‹©å™¨åˆ†ç»„ï¼ˆå¹¶é›†é€‰æ‹©å™¨ï¼‰"></a>é€‰æ‹©å™¨åˆ†ç»„ï¼ˆå¹¶é›†é€‰æ‹©å™¨ï¼‰</h2><p>è¯­æ³•ï¼šé€‰æ‹©å™¨1ï¼Œé€‰æ‹©å™¨2ï¼Œé€‰æ‹©å™¨3{}</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.c1</span>,<span class="selector-tag">p</span>,<span class="selector-tag">span</span>&#123;</span></span><br><span class="line">            color: red;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªdiv<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªæ®µè½<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªspan<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="é€šé…é€‰æ‹©å™¨"><a href="#é€šé…é€‰æ‹©å™¨" class="headerlink" title="é€šé…é€‰æ‹©å™¨"></a>é€šé…é€‰æ‹©å™¨</h2><p>è¯­æ³•ï¼š*{}</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        * &#123;</span><br><span class="line">            padding: 0;</span><br><span class="line">            margin: 0;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªdiv<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªæ®µè½<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªspan<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¸€èˆ¬ç”¨äºé€‚é…æ¯ä¸ªæµè§ˆå™¨çš„é»˜è®¤å€¼ã€‚</p>
<p><del>## å¤åˆé€‰æ‹©å™¨ï¼ˆäº¤é›†é€‰æ‹©å™¨)</del></p>
<p><del>è¯­æ³•ï¼šé€‰æ‹©å™¨1é€‰æ‹©å™¨2{}</del></p>
<h2 id="åä»£é€‰æ‹©å™¨"><a href="#åä»£é€‰æ‹©å™¨" class="headerlink" title="åä»£é€‰æ‹©å™¨"></a>åä»£é€‰æ‹©å™¨</h2><p>é€‰ä¸­æŒ‡å®šæ ‡ç­¾çš„æŒ‡å®šåä»£æ ‡ç­¾</p>
<p>è¯­æ³•ï¼šç¥–å…ˆæ ‡ç­¾ åä»£æ ‡ç­¾ {}</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#d1</span> <span class="selector-tag">p</span>&#123;</span></span><br><span class="line">            color: red;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"d1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªåœ¨divé‡Œçš„æ®µè½<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªæ®µè½<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å­ä»£é€‰æ‹©å™¨"><a href="#å­ä»£é€‰æ‹©å™¨" class="headerlink" title="å­ä»£é€‰æ‹©å™¨"></a>å­ä»£é€‰æ‹©å™¨</h2><p>é€‰ä¸­çˆ¶æ ‡ç­¾çš„æŒ‡å®šå­æ ‡ç­¾</p>
<p>è¯­æ³•ï¼šçˆ¶æ ‡ç­¾ &gt; å­æ ‡ç­¾ {}</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        div &gt; p &gt; span&#123;</span><br><span class="line">            color: red;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"d1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªåœ¨divé‡Œçš„æ®µè½<span class="tag">&lt;<span class="name">span</span>&gt;</span>æˆ‘æ˜¯span<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>æˆ‘ä¹Ÿæ˜¯span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªæ®µè½<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¼ªç±»é€‰æ‹©å™¨"><a href="#ä¼ªç±»é€‰æ‹©å™¨" class="headerlink" title="ä¼ªç±»é€‰æ‹©å™¨"></a>ä¼ªç±»é€‰æ‹©å™¨</h2><p>ä¼ªç±»ï¼šä¸“é—¨ç”¨æ¥è¡¨ç¤ºæ ‡ç­¾çš„ä¸€ç§ç‰¹æ®ŠçŠ¶æ€</p>
<blockquote>
<p>hoverå’Œactiveå¯ä»¥è¢«å…¶ä»–æ ‡ç­¾æ‰€ä½¿ç”¨ï¼Œä¸ä»…åªæ˜¯ç”¨äºaæ ‡ç­¾<br>vistitedä¼ªç±»ç”±äºæ¶‰åŠåˆ°ç”¨æˆ·éšç§é—®é¢˜ï¼Œæ‰€ä»¥åœ¨è¯¥æ ‡ç­¾å†…ä»…ä»…åªèƒ½è®¾ç½®colorå±æ€§ï¼Œå…¶ä»–è®¾ç½®ä¹Ÿæ— æ•ˆã€‚<br>ä¹Ÿå¯èƒ½è¿˜æœ‰å­˜åœ¨ç‰ˆæœ¬é—®é¢˜ï¼ŒIE6å¯ä»¥è®¾ç½®ï¼Œå…¶ä½™åŸºæœ¬æµ‹è¯•å¤±è´¥ã€‚</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123;</span></span><br><span class="line">            color: red;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span></span><br><span class="line">            color: blue;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line">            color: yellow;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line">            color: orange;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.baidu.com"</span>&gt;</span>æˆ‘æ˜¯è¶…é“¾æ¥<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¼ªå…ƒç´ ï¼ˆä¼ªæ ‡ç­¾ï¼‰é€‰æ‹©å™¨"><a href="#ä¼ªå…ƒç´ ï¼ˆä¼ªæ ‡ç­¾ï¼‰é€‰æ‹©å™¨" class="headerlink" title="ä¼ªå…ƒç´ ï¼ˆä¼ªæ ‡ç­¾ï¼‰é€‰æ‹©å™¨"></a>ä¼ªå…ƒç´ ï¼ˆä¼ªæ ‡ç­¾ï¼‰é€‰æ‹©å™¨</h2><p>è¡¨ç¤ºå…ƒç´ ä¸­çš„ä¸€äº›ç‰¹è®¸ä½ç½®</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">       <span class="selector-tag">p</span><span class="selector-pseudo">::first-letter</span> &#123;</span></span><br><span class="line">           color: red;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="css">       <span class="selector-tag">p</span><span class="selector-pseudo">::first-line</span> &#123;</span></span><br><span class="line">           color: yellow;</span><br><span class="line">       &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        æˆ‘æ˜¯ä¸€ä¸ªå¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿çš„æ–‡å­—</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å±æ€§é€‰æ‹©å™¨"><a href="#å±æ€§é€‰æ‹©å™¨" class="headerlink" title="å±æ€§é€‰æ‹©å™¨"></a>å±æ€§é€‰æ‹©å™¨</h2><p>æ ¹æ®å…ƒç´ ä¸­çš„å±æ€§æˆ–è€…å±æ€§å€¼æ¥é€‰æŒ‡å®šå…ƒç´ ã€‚</p>
<p>è¯­æ³•ï¼š</p>
<ul>
<li>æ ‡ç­¾[å±æ€§å]{} æœ‰è¿™ä¸ªå±æ€§çš„</li>
<li>æ ‡ç­¾[å±æ€§å=â€å±æ€§å€¼â€]{} ä»¥å±æ€§ä¸ºå±æ€§å€¼çš„</li>
<li>æ ‡ç­¾^[å±æ€§å=â€å±æ€§å€¼â€]{} ä»¥å±æ€§çš„å±æ€§å€¼ä¸ºå¼€å¤´çš„</li>
<li>æ ‡ç­¾$[å±æ€§å=â€å±æ€§å€¼â€]{} ä»¥å±æ€§çš„å±æ€§å€¼ä¸ºç»“å°¾çš„</li>
<li>æ ‡ç­¾<em>[å±æ€§å</em>=â€å±æ€§å€¼â€]{} ä»¥å±æ€§çš„å±æ€§å€¼ä¸ºåŒ…å«çš„</li>
</ul>
<p></p><p title="hello">æˆ‘æ˜¯ä¸€ä¸ªæ®µè½</p>ï¼Œtitleå°±æ˜¯å…¶ä¸­ä¸€ä¸ªå±æ€§ã€‚<p></p>
<p>titleå°±æ˜¯ä¸€ä¸ªå±æ€§</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">       <span class="selector-tag">span</span><span class="selector-attr">[class]</span> &#123;</span></span><br><span class="line">           color: red;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="css">       <span class="selector-tag">p</span><span class="selector-attr">[title="content"]</span> &#123;</span></span><br><span class="line">           color: orange;</span><br><span class="line">       &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">'hh'</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªæ®µè½<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">title</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        æˆ‘æ˜¯ä¸€ä¸ªå¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿å¾ˆé•¿çš„æ–‡å­—</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç»“æ„ä¼ªç±»é€‰æ‹©å™¨"><a href="#ç»“æ„ä¼ªç±»é€‰æ‹©å™¨" class="headerlink" title="ç»“æ„ä¼ªç±»é€‰æ‹©å™¨"></a>ç»“æ„ä¼ªç±»é€‰æ‹©å™¨</h2><p>:first-child {}     é€‰ä¸­çˆ¶å…ƒç´ ä¸­ç¬¬ä¸€ä¸ªå­å…ƒç´ <br>:last-child {}      é€‰ä¸­çˆ¶å…ƒç´ ä¸­æœ€åä¸€ä¸ªå­å…ƒç´ <br>:nth-child(n) {}    é€‰ä¸­çˆ¶å…ƒç´ ä¸­æ­£æ•°ç¬¬nä¸ªå­å…ƒç´ <br>:nth-last-child(n) {}    é€‰ä¸­çˆ¶å…ƒç´ ä¸­å€’æ•°ç¬¬nä¸ªå­å…ƒç´ <br>:first-of-type {}   é€‰ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ <br>:last-of-type {}    é€‰ä¸­æœ€åä¸€ä¸ªå…ƒç´ <br>:nth-child(n) {}    é€‰ä¸­ç¬¬nä¸ªå…ƒç´ </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">       <span class="selector-tag">p</span><span class="selector-pseudo">:first-child</span> &#123;</span></span><br><span class="line">           color: red;</span><br><span class="line">       &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å“ˆå“ˆ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å“ˆå“ˆ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å“ˆå“ˆ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å“ˆå“ˆ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç´§é‚»åŒèƒé€‰æ‹©å™¨"><a href="#ç´§é‚»åŒèƒé€‰æ‹©å™¨" class="headerlink" title="ç´§é‚»åŒèƒé€‰æ‹©å™¨"></a>ç´§é‚»åŒèƒé€‰æ‹©å™¨</h2><p>é€‰ä¸­ä¸€ä¸ªå…ƒç´ åçš„æŒ‡å®šå…„å¼Ÿå…ƒç´ ã€‚<br>è¯­æ³•ï¼šå…„å¼Ÿå…ƒç´ å‰ + å…„å¼Ÿå…ƒç´ å {}</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">       p + span &#123;</span><br><span class="line">           color: red;</span><br><span class="line">       &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å“ˆå“ˆ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å“ˆå“ˆ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>æˆ‘æ˜¯å…„å¼Ÿ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å“ˆå“ˆ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å“ˆå“ˆ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>æˆ‘æ˜¯æœ€åä¸€ä¸ªspan<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ä¸€èˆ¬åŒèƒé€‰æ‹©å™¨"><a href="#ä¸€èˆ¬åŒèƒé€‰æ‹©å™¨" class="headerlink" title="ä¸€èˆ¬åŒèƒé€‰æ‹©å™¨"></a>ä¸€èˆ¬åŒèƒé€‰æ‹©å™¨</h2><p>é€‰ä¸­ä¸€ä¸ªå…ƒç´ åçš„æ‰€æœ‰æŒ‡å®šå…„å¼Ÿå…ƒç´ </p>
<p>è¯­æ³•ï¼šå…„å¼Ÿå…ƒç´ å‰ ~ å…„å¼Ÿå…ƒç´ å {}</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#r1</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.s1</span>&#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#r2</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.s1</span>&#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">20%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#r3</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.s1</span>&#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">40%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#r4</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.s1</span>&#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">60%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#r5</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.s1</span>&#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">80%</span>;</span><br></pre></td></tr></table></figure>
<h2 id="å¦å®šä¼ªç±»é€‰æ‹©å™¨"><a href="#å¦å®šä¼ªç±»é€‰æ‹©å™¨" class="headerlink" title="å¦å®šä¼ªç±»é€‰æ‹©å™¨"></a>å¦å®šä¼ªç±»é€‰æ‹©å™¨</h2><p>å¯ä»¥ä»å·²ç»é€‰ä¸­çš„å…ƒç´ ä¸­å‰”é™¤æŸäº›å…ƒç´ </p>
<p>è¯­æ³•ï¼šé€‰æ‹©å™¨:not(é€‰æ‹©å™¨){}</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">       <span class="selector-tag">p</span><span class="selector-pseudo">:not(.c)</span> &#123;</span></span><br><span class="line">           color: red;</span><br><span class="line">       &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"c"</span>&gt;</span>æˆ‘æ˜¯p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯p<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ ·å¼çš„ç»§æ‰¿"><a href="#æ ·å¼çš„ç»§æ‰¿" class="headerlink" title="æ ·å¼çš„ç»§æ‰¿"></a>æ ·å¼çš„ç»§æ‰¿</h2><p>ç¥–å…ˆçš„å…ƒç´ ä¼šè¢«ä»–çš„åä»£æ‰€ç»§æ‰¿ã€‚å¯ä»¥åˆ©ç”¨ç»§æ‰¿çš„ç‰¹æ€§å°†ä¸€äº›åŸºæœ¬çš„æ ·å¼ç»§æ‰¿ç»™ç¥–å…ˆå…ƒç´ ã€‚<br>ä½†å¹¶ä¸æ˜¯æ‰€æœ‰æ ·å¼éƒ½ä¼šè¢«åä»£å…ƒç´ æ‰€ç»§æ‰¿ã€‚<br>ä¾‹å¦‚ä¸€äº›èƒŒæ™¯ç›¸å…³çš„æ ·å¼ï¼Œéƒ½ä¸ä¼šè¢«ç»§æ‰¿ã€‚</p>
<h2 id="é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§"><a href="#é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§" class="headerlink" title="é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§"></a>é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§</h2><p>ä½¿ç”¨ä¸åŒé€‰æ‹©å™¨æ—¶ï¼Œé€‰ä¸­äº†åŒä¸€ä¸ªå…ƒç´ å¹¶è®¾ç½®äº†ç›¸åŒçš„æ ·å¼ï¼Œåˆ™ä¼˜å…ˆçº§é«˜çš„ä¼˜å…ˆæ˜¾ç¤ºã€‚</p>
<p>ä¼˜å…ˆçº§è§„åˆ™(æ•°å€¼ä¸ºå‚è€ƒå€¼)ï¼š</p>
<ul>
<li>å†…è”æ ·å¼ ä¼˜å…ˆçº§ 1000</li>
<li>IDé€‰æ‹©å™¨ ä¼˜å…ˆçº§ 100</li>
<li>ç±»å’Œä¼ªç±» ä¼˜å…ˆçº§ 10</li>
<li>å…ƒç´ é€‰æ‹©å™¨ ä¼˜å…ˆçº§ 1</li>
<li>é€šé…é€‰æ‹©å™¨ ä¼˜å…ˆçº§ 0</li>
<li>ç»§æ‰¿æ ·å¼ æ— ä¼˜å…ˆçº§</li>
</ul>
<blockquote>
<p>å½“é€‰æ‹©å™¨æœ‰å¤šç§é€‰æ‹©å™¨æ—¶ï¼Œå…ˆå°†ä¼˜å…ˆçº§ç›¸åŠ å†è¿›è¡Œæ¯”å¯¹<br>é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§ä¸ä¼šè¶…è¿‡å®ƒçš„æœ€å¤§æ•°é‡çº§(è™½ç„¶å¾ˆå°‘è¿™æ ·å†™)<br>å¦‚æœé€‰æ‹©å™¨çš„ä¼˜å…ˆçº§ç›¸åŒï¼Œè°åœ¨ä»£ç çš„ä½ç½®é åå°±ç”¨è°ã€‚<br>å¹¶é›†é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§å•ç‹¬è®¡ç®—ï¼Œå¹¶é›†æ¯ä¸ªé€‰æ‹©å™¨éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚</p>
</blockquote>
<p>ç‰¹æ®Šæƒ…å†µï¼šåœ¨æ ·å¼åæ·»åŠ ä¸€ä¸ª<code>!important</code>ï¼Œåˆ™è¯¥æ ·å¼ä¼šè·å¾—æœ€é«˜ä¼˜å…ˆçº§ï¼Œç”šè‡³è¶…è¿‡å†…è”æ ·å¼ã€‚(å°½é‡é¿å…ä½¿ç”¨ï¼Œå¤šäººå¼€å‘æ—¶æ¯”è¾ƒéº»çƒ¦)</p>
<h2 id="ä¼ªç±»é¡ºåº"><a href="#ä¼ªç±»é¡ºåº" class="headerlink" title="ä¼ªç±»é¡ºåº"></a>ä¼ªç±»é¡ºåº</h2><p>å…³äºaçš„ä¼ªç±»æœ‰å››ä¸ª,<code>:link</code>,<code>:visited</code>,<code>hover</code>,<code>:active</code>ï¼Œè¿™å››ä¸ªä¼ªç±»ä¼˜å…ˆçº§æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>ä½†æ˜¯ç‰¹æ®Šæƒ…å†µ<code>:hover</code>ä¸<code>:active</code>è¿™ä¸¤ç§æƒ…å†µæ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯ä¼šåŒæ—¶è§¦å‘ã€‚ç”±äºä¼˜å…ˆçº§ç›¸ç­‰ï¼Œæ‰€ä»¥çœ‹è°åœ¨ä»£ç åå°±ä½¿ç”¨è°ã€‚<br>æ‰€ä»¥å†™ä¼ªç±»çš„é¡ºåºä¸€èˆ¬éƒ½æ˜¯æœ‰è§„åˆ™çš„ï¼Œæœ€å¥½ä¹ æƒ¯å†™ä¸º<code>:link</code>-&gt;<code>:visited</code>-&gt;<code>:hover</code>-&gt;<code>:active</code></p>
<h1 id="ç›’æ¨¡å‹"><a href="#ç›’æ¨¡å‹" class="headerlink" title="ç›’æ¨¡å‹"></a>ç›’æ¨¡å‹</h1><p><em>CSS æ¡†æ¨¡å‹ (Box Model) è§„å®šäº†å…ƒç´ æ¡†å¤„ç†å…ƒç´ å†…å®¹ã€å†…è¾¹è·ã€è¾¹æ¡† å’Œ å¤–è¾¹è· çš„æ–¹å¼ã€‚</em></p>
<p><img src="boxmodel.gif" alt></p>
<p>ç›’æ¨¡å‹<a href="http://www.w3school.com.cn/cssref/index.asp#box" target="_blank" rel="noopener">å±æ€§</a></p>
<p>ä¸€ä¸ªç›’å­åˆ†æˆè¿™ä¹ˆå‡ ä¸ªéƒ¨åˆ†</p>
<ul>
<li>å†…å®¹éƒ¨åˆ†</li>
<li>å†…è¾¹è·</li>
<li>è¾¹æ¡†</li>
<li>å¤–è¾¹è·</li>
</ul>
<blockquote>
<p>ä»–ä»¬éƒ½æœ‰å„è‡ªçš„ç®€å†™æ–¹å¼ã€‚<br>ç›’å­å¤§å°ç”±å†…å®¹åŒºã€å†…è¾¹è·ã€è¾¹æ¡†å…±åŒå†³å®šã€‚</p>
</blockquote>
<h2 id="å†…å®¹åŒº"><a href="#å†…å®¹åŒº" class="headerlink" title="å†…å®¹åŒº"></a>å†…å®¹åŒº</h2><p>cssä¸­å®šä¹‰widthä¸heightå®šä¹‰çš„åªæ˜¯å†…å®¹åŒºçš„å¤§å°</p>
<h2 id="è¾¹æ¡†"><a href="#è¾¹æ¡†" class="headerlink" title="è¾¹æ¡†"></a>è¾¹æ¡†</h2><p><em>å…ƒç´ çš„è¾¹æ¡† (border) æ˜¯å›´ç»•å…ƒç´ å†…å®¹å’Œå†…è¾¹è·çš„ä¸€æ¡æˆ–å¤šæ¡çº¿ã€‚CSS border å±æ€§å…è®¸ä½ è§„å®šå…ƒç´ è¾¹æ¡†çš„æ ·å¼ã€å®½åº¦å’Œé¢œè‰²ã€‚</em></p>
<p>ä¸ºå…ƒç´ è®¾å®šè¾¹æ¡†å¿…é¡»è®¾ç½®ä¸‰ä¸ªå±æ€§:<code>width</code>,<code>color</code>,<code>style</code>ã€‚ä½†æ˜¯å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½ä¼šæœ‰è¾¹æ¡†çš„é»˜è®¤å€¼ã€‚</p>
<p>è¾¹æ¡†æ ·å¼ï¼š<code>border-style</code><br>è¾¹æ¡†çš„å®½åº¦ï¼š<code>border-width</code><br>è¾¹æ¡†çš„é¢œè‰²ï¼š<code>border-color</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line"></span><br><span class="line">            border-width: 2px;</span><br><span class="line">            border-color: yellow;</span><br><span class="line">            border-style: solid;</span><br><span class="line"></span><br><span class="line"><span class="css">            <span class="comment">/*ç®€å†™*/</span></span></span><br><span class="line">            border: 2px green solid;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="å†…è¾¹è·"><a href="#å†…è¾¹è·" class="headerlink" title="å†…è¾¹è·"></a>å†…è¾¹è·</h2><p><em>å…ƒç´ çš„å†…è¾¹è·åœ¨è¾¹æ¡†å’Œå†…å®¹åŒºä¹‹é—´ã€‚æ§åˆ¶è¯¥åŒºåŸŸæœ€ç®€å•çš„å±æ€§æ˜¯ padding å±æ€§ã€‚CSS padding å±æ€§å®šä¹‰å…ƒç´ è¾¹æ¡†ä¸å…ƒç´ å†…å®¹ä¹‹é—´çš„ç©ºç™½åŒºåŸŸã€‚</em></p>
<p>paddingå±æ€§æ¥å—é•¿åº¦å€¼æˆ–è€…ç™¾åˆ†æ¯”å€¼ï¼Œä½†ä¸å…è®¸ä½¿ç”¨è´Ÿå€¼ã€‚</p>
<p>h1 å…ƒç´ çš„å„è¾¹éƒ½æœ‰ 10 åƒç´ çš„å†…è¾¹è·<br><code>h1 {padding: 10px;}</code></p>
<p>ä¹Ÿå¯ä»¥æ ¹æ®ä¸Šã€å³ã€ä¸‹ã€å·¦é¡ºåºåˆ†åˆ«èµ‹å€¼<br><code>h1 {padding: 10px 0.25em 2ex 20%;}</code></p>
<p>å•è¾¹å±æ€§</p>
<ul>
<li><code>padding-top</code></li>
<li><code>padding-right</code></li>
<li><code>padding-bottom</code></li>
<li><code>padding-left</code></li>
</ul>
<blockquote>
<p>å½“å®½åº¦ä¸ºautoï¼ˆé»˜è®¤å€¼ï¼‰æ­¤æ—¶æŒ‡å®šçš„å†…è¾¹è·ä¸ä¼šå½±å“ç›’å­çš„å¯è§å®½åº¦ï¼Œè€Œæ˜¯è‡ªåŠ¨ä¿®å¤å®½åº¦è€Œé€‚åº”å†…è¾¹è·ã€‚</p>
</blockquote>
<h2 id="å¤–è¾¹è·"><a href="#å¤–è¾¹è·" class="headerlink" title="å¤–è¾¹è·"></a>å¤–è¾¹è·</h2><p><em>å›´ç»•åœ¨å…ƒç´ è¾¹æ¡†çš„ç©ºç™½åŒºåŸŸæ˜¯å¤–è¾¹è·ã€‚è®¾ç½®å¤–è¾¹è·ä¼šåœ¨å…ƒç´ å¤–åˆ›å»ºé¢å¤–çš„â€œç©ºç™½â€ã€‚è®¾ç½®å¤–è¾¹è·çš„æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ margin å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ¥å—ä»»ä½•é•¿åº¦å•ä½ã€ç™¾åˆ†æ•°å€¼ç”šè‡³è´Ÿå€¼ã€‚</em></p>
<p>margin å±æ€§æ¥å—ä»»ä½•é•¿åº¦å•ä½ï¼Œå¯ä»¥æ˜¯åƒç´ ã€è‹±å¯¸ã€æ¯«ç±³æˆ– emã€‚margin å¯ä»¥è®¾ç½®ä¸º autoã€‚ä½†æ˜¯å…è®¸è®¾ç½®ä¸ºè´Ÿå€¼ã€‚</p>
<blockquote>
<p>autoå€¼ä¸€èˆ¬è®¾ç½®æ°´å¹³æ–¹å‘ï¼Œå¯ä»¥ç”¨æ¥è®¾ç½®å±…ä¸­ã€‚</p>
</blockquote>
<p>ç”¨æ³•åŸºæœ¬å’Œpaddingç±»ä¼¼ã€‚</p>
<blockquote>
<p>ç”±äºé¡µé¢å…ƒç´ éƒ½æ˜¯é å·¦ä¸Šæ¥è¿›è¡Œå¸ƒå±€ï¼Œåˆ™è®¾ç½®å·¦ï¼Œä¸Šå¤–è¾¹è·æ—¶ä¼šå½±å“è‡ªèº«ç›’å­çš„ä½ç½®ï¼Œç›¸åï¼Œè®¾ç½®å³ï¼Œä¸‹å¤–è¾¹è·æ—¶ä¼šå½±å“å…¶ä»–ç›’å­çš„ä½ç½®ã€‚</p>
</blockquote>
<h2 id="å¤–è¾¹è·åˆå¹¶"><a href="#å¤–è¾¹è·åˆå¹¶" class="headerlink" title="å¤–è¾¹è·åˆå¹¶"></a><a href="http://www.w3school.com.cn/css/css_margin_collapsing.asp" target="_blank" rel="noopener">å¤–è¾¹è·åˆå¹¶</a></h2><p><em>å¤–è¾¹è·åˆå¹¶æŒ‡çš„æ˜¯ï¼Œå½“ä¸¤ä¸ªå‚ç›´å¤–è¾¹è·ç›¸é‡æ—¶ï¼Œå®ƒä»¬å°†å½¢æˆä¸€ä¸ªå¤–è¾¹è·ã€‚åˆå¹¶åçš„å¤–è¾¹è·çš„é«˜åº¦ç­‰äºä¸¤ä¸ªå‘ç”Ÿåˆå¹¶çš„å¤–è¾¹è·çš„é«˜åº¦ä¸­çš„è¾ƒå¤§è€…ã€‚</em></p>
<p><strong>ä¸¤ç§æƒ…å†µï¼š</strong></p>
<ul>
<li><p>ç¬¬ä¸€ç§ï¼šä¸¤è¾¹ä¸ºå…„å¼Ÿç›¸é‚»çš„å…ƒç´ æ—¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line">            height: 200px;</span><br><span class="line">            width: 200px;</span><br><span class="line">            background-color: yellow;</span><br><span class="line"></span><br><span class="line">            margin-bottom: 100px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line">            height: 200px;</span><br><span class="line">            width: 200px;</span><br><span class="line">            background-color: green;</span><br><span class="line"></span><br><span class="line">            margin-top: 200px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸¤ç›’ç›’å­çš„marginä»…ä»…åªæœ‰200pxï¼Œè€Œä¸æ˜¯300pxï¼Œä»…å–å†³äºæœ€å¤§çš„é‚£ä¸ªmarginè€Œä¸æ˜¯ç›¸åŠ çš„å€¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¬¬äºŒç§ï¼šä¸¤è¾¹ä¸ºçˆ¶å­å…³ç³»çš„å…ƒç´ å¹¶æŸä¸ªè¾¹ä¸è¾¹é‡å æ—¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background-color: yellow;</span><br><span class="line"></span><br><span class="line">            margin-top: 100px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 300px;</span><br><span class="line">            background-color: green;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç»“æœä¼šå‘ç°box2ä¸æ˜¯ç›¸å¯¹äºboxç§»åŠ¨äº†100pxï¼Œè€Œæ˜¯boxå¾€ä¸‹ç§»åŠ¨äº†100pxï¼ŒåŸå› æ˜¯å› ä¸ºboxå’Œbox2å¤„äºçˆ¶å­å…³ç³»ï¼Œå®ƒä»¬çš„ä¸Šè¾¹æ¡†è¿›è¡Œäº†é‡å å¯¼è‡´çš„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>è§£å†³æ–¹å¼</strong></p>
<p>1ã€ä½¿ç”¨paddingï¼Œä½†æ˜¯ä¼šå½±å“ç›’å­åŸæ¥å†…å®¹å¤§å°<br>2ã€æ·»åŠ ä¸€ä¸ªç©ºçš„tableæ ‡ç­¾<br>3ã€ä½¿ç”¨<code>:before</code>ä¼ªç±»ï¼Œæ·»åŠ ä¸€ä¸ª<code>display=table</code>å±æ€§å’Œå±æ€§å€¼ï¼ŒåŸç†ä¸ç¬¬äºŒç‚¹ç›¸ä¼¼ï¼Œä½†æ˜¯ä¸ä¼šæ·»åŠ æ— æ„ä¹‰çš„æ–‡æ¡£æ ‡ç­¾ã€‚</p>
<h2 id="å†…è”å…ƒç´ çš„ç›’æ¨¡å‹"><a href="#å†…è”å…ƒç´ çš„ç›’æ¨¡å‹" class="headerlink" title="å†…è”å…ƒç´ çš„ç›’æ¨¡å‹"></a>å†…è”å…ƒç´ çš„ç›’æ¨¡å‹</h2><p>å†…è”å…ƒç´ æ— æ³•è®¾ç½®widthå’Œheightï¼Œå…¶ä½™åŸºæœ¬å’Œå—å…ƒç´ çš„ç›’æ¨¡å‹ç›¸ä¼¼ã€‚</p>
<p>ä¸‰æ­¥èµ°ï¼šå†…å®¹åŒºã€paddingã€marginã€border</p>
<h1 id="displayä¸­çš„blockã€inlineã€inline-blockã€none"><a href="#displayä¸­çš„blockã€inlineã€inline-blockã€none" class="headerlink" title="displayä¸­çš„blockã€inlineã€inline-blockã€none"></a>displayä¸­çš„blockã€inlineã€inline-blockã€none</h1><p><code>display</code>å±æ€§è§„å®šå…ƒç´ åº”è¯¥ç”Ÿæˆçš„æ¡†(ç›’æ¨¡å‹)çš„ç±»å‹ã€‚</p>
<p><strong>è¯´æ˜</strong></p>
<p>è¿™ä¸ªå±æ€§ç”¨äºå®šä¹‰å»ºç«‹å¸ƒå±€æ—¶å…ƒç´ ç”Ÿæˆçš„æ˜¾ç¤ºæ¡†ç±»å‹ã€‚å¯¹äº HTML ç­‰æ–‡æ¡£ç±»å‹ï¼Œå¦‚æœä½¿ç”¨ display ä¸è°¨æ…ä¼šå¾ˆå±é™©ï¼Œå› ä¸ºå¯èƒ½è¿å HTML ä¸­å·²ç»å®šä¹‰çš„æ˜¾ç¤ºå±‚æ¬¡ç»“æ„ã€‚å¯¹äº XMLï¼Œç”±äº XML æ²¡æœ‰å†…ç½®çš„è¿™ç§å±‚æ¬¡ç»“æ„ï¼Œæ‰€æœ‰ display æ˜¯ç»å¯¹å¿…è¦çš„ã€‚</p>
<p>ä¸»è¦ä½¿ç”¨çš„å€¼ï¼š</p>
<table>
<thead>
<tr>
<th>å€¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>none</td>
<td>æ­¤å…ƒç´ ä¸ä¼šè¢«æ˜¾ç¤º</td>
</tr>
<tr>
<td>block</td>
<td>æ­¤å…ƒç´ å°†æ˜¾ç¤ºä¸ºå—çº§å…ƒç´ ï¼Œæ­¤å…ƒç´ å‰åä¼šå¸¦æœ‰æ¢è¡Œç¬¦</td>
</tr>
<tr>
<td>inline</td>
<td>é»˜è®¤ã€‚æ­¤å…ƒç´ ä¼šè¢«æ˜¾ç¤ºä¸ºå†…è”å…ƒç´ ï¼Œå…ƒç´ å‰åæ²¡æœ‰æ¢è¡Œç¬¦</td>
</tr>
<tr>
<td>inline-block</td>
<td>è¡Œå†…å—å…ƒç´ ï¼ˆCSS2.1æ–°å¢ï¼‰</td>
</tr>
</tbody>
</table>
<p>æ›´å¤šçš„å€¼è¯·å‚è€ƒ<a href="http://www.w3school.com.cn/cssref/pr_class_display.asp" target="_blank" rel="noopener">é“¾æ¥</a></p>
<p>å°†ä¸€ä¸ªdivè®¾ç½®ä¸ºå†…è”å…ƒç´ ï¼š<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line"></span><br><span class="line">            background-color: yellow;</span><br><span class="line"></span><br><span class="line">            display: inline;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>a<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¼šå‘ç°divçš„è®¾ç½®çš„å®½åº¦å’Œé«˜åº¦è®¾ç½®æ— æ•ˆï¼Œdivå·²ç»å˜ä¸ºå†…è”å…ƒç´  --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h1 id="box-sizing"><a href="#box-sizing" class="headerlink" title="box-sizing"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/box-sizing" target="_blank" rel="noopener">box-sizing</a></h1><p>CSS ä¸­çš„ box-sizing å±æ€§å®šä¹‰äº† user agent åº”è¯¥å¦‚ä½•è®¡ç®—ä¸€ä¸ªå…ƒç´ çš„æ€»å®½åº¦å’Œæ€»é«˜åº¦ã€‚å¯ä»¥æ›´æ”¹ç”¨äºè®¡ç®—å…ƒç´ å®½åº¦å’Œé«˜åº¦çš„é»˜è®¤çš„ CSS ç›’å­æ¨¡å‹ã€‚å¯ä»¥ä½¿ç”¨æ­¤å±æ€§æ¥æ¨¡æ‹Ÿä¸æ­£ç¡®æ”¯æŒCSSç›’å­æ¨¡å‹è§„èŒƒçš„æµè§ˆå™¨çš„è¡Œä¸ºã€‚</p>
<p>åœ¨ CSS ç›’å­æ¨¡å‹çš„é»˜è®¤å®šä¹‰é‡Œï¼Œä½ å¯¹ä¸€ä¸ªå…ƒç´ æ‰€è®¾ç½®çš„ width ä¸ height åªä¼šåº”ç”¨åˆ°è¿™ä¸ªå…ƒç´ çš„å†…å®¹åŒºã€‚å¦‚æœè¿™ä¸ªå…ƒç´ æœ‰ä»»ä½•çš„ border æˆ– padding ï¼Œç»˜åˆ¶åˆ°å±å¹•ä¸Šæ—¶çš„ç›’å­å®½åº¦å’Œé«˜åº¦ä¼šåŠ ä¸Šè®¾ç½®çš„è¾¹æ¡†å’Œå†…è¾¹è·å€¼ã€‚è¿™æ„å‘³ç€å½“ä½ è°ƒæ•´ä¸€ä¸ªå…ƒç´ çš„å®½åº¦å’Œé«˜åº¦æ—¶éœ€è¦æ—¶åˆ»æ³¨æ„åˆ°è¿™ä¸ªå…ƒç´ çš„è¾¹æ¡†å’Œå†…è¾¹è·ã€‚å½“æˆ‘ä»¬å®ç°å“åº”å¼å¸ƒå±€æ—¶ï¼Œè¿™ä¸ªç‰¹ç‚¹å°¤å…¶çƒ¦äººã€‚</p>
<p><strong>box-sizing å±æ€§å¯ä»¥è¢«ç”¨æ¥è°ƒæ•´è¿™äº›è¡¨ç°:</strong></p>
<ul>
<li><code>content-box</code>æ˜¯é»˜è®¤å€¼ã€‚å¦‚æœä½ è®¾ç½®ä¸€ä¸ªå…ƒç´ çš„å®½ä¸º100pxï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ çš„å†…å®¹åŒºä¼šæœ‰100px å®½ï¼Œå¹¶ä¸”ä»»ä½•è¾¹æ¡†å’Œå†…è¾¹è·çš„å®½åº¦éƒ½ä¼šè¢«å¢åŠ åˆ°æœ€åç»˜åˆ¶å‡ºæ¥çš„å…ƒç´ å®½åº¦ä¸­ã€‚</li>
<li><code>border-box</code>å‘Šè¯‰æµè§ˆå™¨å»ç†è§£ä½ è®¾ç½®çš„è¾¹æ¡†å’Œå†…è¾¹è·çš„å€¼æ˜¯åŒ…å«åœ¨widthå†…çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ å°†ä¸€ä¸ªå…ƒç´ çš„widthè®¾ä¸º100px,é‚£ä¹ˆè¿™100pxä¼šåŒ…å«å…¶å®ƒçš„borderå’Œpaddingï¼Œå†…å®¹åŒºçš„å®é™…å®½åº¦ä¼šæ˜¯widthå‡å»border + paddingçš„è®¡ç®—å€¼ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹è¿™ä½¿å¾—æˆ‘ä»¬æ›´å®¹æ˜“çš„å»è®¾å®šä¸€ä¸ªå…ƒç´ çš„å®½é«˜ã€‚</li>
</ul>
<p><strong>å±æ€§å€¼</strong></p>
<h2 id="content-box"><a href="#content-box" class="headerlink" title="content-box"></a>content-box</h2><p>é»˜è®¤å€¼ï¼Œæ ‡å‡†ç›’å­æ¨¡å‹ã€‚ width ä¸ height åªåŒ…æ‹¬å†…å®¹çš„å®½å’Œé«˜ï¼Œ ä¸åŒ…æ‹¬è¾¹æ¡†ï¼ˆborderï¼‰ï¼Œå†…è¾¹è·ï¼ˆpaddingï¼‰ï¼Œå¤–è¾¹è·ï¼ˆmarginï¼‰ã€‚æ³¨æ„: å†…è¾¹è·, è¾¹æ¡† &amp; å¤–è¾¹è· éƒ½åœ¨è¿™ä¸ªç›’å­çš„å¤–éƒ¨ã€‚ æ¯”å¦‚. å¦‚æœ .box {width: 350px}; è€Œä¸” {border: 10px solid black;} é‚£ä¹ˆåœ¨æµè§ˆå™¨ä¸­çš„æ¸²æŸ“çš„å®é™…å®½åº¦å°†æ˜¯370px;</p>
<p><strong>å°ºå¯¸è®¡ç®—å…¬å¼ï¼š</strong><br>width = å†…å®¹çš„å®½åº¦<br>height = å†…å®¹çš„é«˜åº¦<br>å®½åº¦å’Œé«˜åº¦çš„è®¡ç®—å€¼éƒ½ä¸åŒ…å«å†…å®¹çš„è¾¹æ¡†ï¼ˆborderï¼‰å’Œå†…è¾¹è·ï¼ˆpaddingï¼‰ã€‚</p>
<h2 id="border-box"><a href="#border-box" class="headerlink" title="border-box"></a>border-box</h2><p><code>width</code> å’Œ <code>height</code> å±æ€§åŒ…æ‹¬å†…å®¹ï¼Œå†…è¾¹è·å’Œè¾¹æ¡†ï¼Œä½†ä¸åŒ…æ‹¬å¤–è¾¹è·ã€‚è¿™æ˜¯å½“æ–‡æ¡£å¤„äº Quirksæ¨¡å¼ æ—¶Internet Explorerä½¿ç”¨çš„<code>ç›’æ¨¡å‹</code>ã€‚æ³¨æ„ï¼Œå¡«å……å’Œè¾¹æ¡†å°†åœ¨ç›’å­å†… , ä¾‹å¦‚, <code>.box {width: 350px; border: 10px solid black;}</code> å¯¼è‡´åœ¨æµè§ˆå™¨ä¸­å‘ˆç°çš„å®½åº¦ä¸º350pxçš„ç›’å­ã€‚å†…å®¹æ¡†ä¸èƒ½ä¸ºè´Ÿï¼Œå¹¶ä¸”è¢«åˆ†é…åˆ°0ï¼Œä½¿å¾—ä¸å¯èƒ½ä½¿ç”¨border-boxä½¿å…ƒç´ æ¶ˆå¤±ã€‚</p>
<p><strong>å°ºå¯¸è®¡ç®—å…¬å¼ï¼š</strong><br>width = border + padding + å†…å®¹çš„å®½åº¦<br>height = border + padding + å†…å®¹çš„é«˜åº¦</p>
<h2 id="padding-box-bad"><a href="#padding-box-bad" class="headerlink" title="padding-box[bad]"></a><del>padding-box</del>[bad]</h2><p><code>width</code> å’Œ <code>height</code> å±æ€§åŒ…æ‹¬å†…å®¹å’Œå†…è¾¹è·ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬è¾¹æ¡†å’Œå¤–è¾¹è·ã€‚åªæœ‰Firefoxå®ç°äº†è¿™ä¸ªå€¼ï¼Œå®ƒåœ¨Firefox 50ä¸­è¢«åˆ é™¤ã€‚</p>
<h1 id="visibilityä¸­çš„hiddenã€visible"><a href="#visibilityä¸­çš„hiddenã€visible" class="headerlink" title="visibilityä¸­çš„hiddenã€visible"></a>visibilityä¸­çš„hiddenã€visible</h1><p>visibility å±æ€§è§„å®šå…ƒç´ æ˜¯å¦å¯è§ï¼Œå¯ä»¥è¢«ç»§æ‰¿ã€‚</p>
<table>
<thead>
<tr>
<th>å€¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>visible</td>
<td>é»˜è®¤å€¼ï¼Œå…ƒç´ æ˜¯å¯è§çš„</td>
</tr>
<tr>
<td>hidden</td>
<td>å…ƒç´ æ˜¯ä¸å¯è§çš„</td>
</tr>
<tr>
<td>collapse</td>
<td>å½“åœ¨è¡¨æ ¼å…ƒç´ ä¸­ä½¿ç”¨æ—¶ï¼Œæ­¤å€¼å¯åˆ é™¤ä¸€è¡Œæˆ–ä¸€åˆ—ï¼Œä½†æ˜¯å®ƒä¸ä¼šå½±å“è¡¨æ ¼çš„å¸ƒå±€ã€‚è¢«è¡Œæˆ–åˆ—å æ®çš„ç©ºé—´ä¼šç•™ç»™å…¶ä»–å†…å®¹ä½¿ç”¨ã€‚å¦‚æœæ­¤å€¼è¢«ç”¨åœ¨å…¶ä»–çš„å…ƒç´ ä¸Šï¼Œä¼šå‘ˆç°ä¸º â€œhiddenâ€ã€‚</td>
</tr>
<tr>
<td>inherit</td>
<td>è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ visibility å±æ€§çš„å€¼ã€‚</td>
</tr>
</tbody>
</table>
<p><strong>ä½¿ h2 å…ƒç´ ä¸å¯è§ï¼š</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">h2</span><br><span class="line">  &#123;</span><br><span class="line">  visibility:hidden;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h1 id="overflow"><a href="#overflow" class="headerlink" title="overflow"></a>overflow</h1><p>è§£å†³æº¢å‡ºå†…å®¹æ˜¾ç¤º,overflow å±æ€§è§„å®šå½“å†…å®¹æº¢å‡ºå…ƒç´ æ¡†æ—¶å‘ç”Ÿçš„äº‹æƒ…ã€‚</p>
<table>
<thead>
<tr>
<th>å€¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>visible</td>
<td>é»˜è®¤å€¼ã€‚å†…å®¹ä¸ä¼šè¢«ä¿®å‰ªï¼Œä¼šå‘ˆç°åœ¨å…ƒç´ æ¡†ä¹‹å¤–ã€‚</td>
</tr>
<tr>
<td>hidden</td>
<td>å†…å®¹ä¼šè¢«ä¿®å‰ªï¼Œå¹¶ä¸”å…¶ä½™å†…å®¹æ˜¯ä¸å¯è§çš„ã€‚</td>
</tr>
<tr>
<td>scroll</td>
<td>å†…å®¹ä¼šè¢«ä¿®å‰ªï¼Œä½†æ˜¯æµè§ˆå™¨ä¼šæ˜¾ç¤ºæ»šåŠ¨æ¡ä»¥ä¾¿æŸ¥çœ‹å…¶ä½™çš„å†…å®¹ã€‚</td>
</tr>
<tr>
<td>auto</td>
<td>å¦‚æœå†…å®¹è¢«ä¿®å‰ªï¼Œåˆ™æµè§ˆå™¨ä¼šæ˜¾ç¤ºæ»šåŠ¨æ¡ä»¥ä¾¿æŸ¥çœ‹å…¶ä½™çš„å†…å®¹ã€‚</td>
</tr>
<tr>
<td>inherit</td>
<td>è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ overflow å±æ€§çš„å€¼ã€‚</td>
</tr>
</tbody>
</table>
<p><strong>åœ¨ä¸€ä¸ªç‹­å°çš„divä»¥æ»šåŠ¨æ¡çš„æ–¹å¼æ˜¾ç¤ºä¸€æ®µæ–‡æœ¬</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line"></span><br><span class="line">            overflow: auto;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä¸Šé¢è¿™ä¸ªæ“ä½œæœ‰ä¸€äº›ç¼ºé™·ï¼Œä¸èƒ½åºåˆ—åŒ–å‡½æ•°ã€undefinedã€å¾ªç¯å¼•ç”¨ç­‰ï¼Œè¯¦è§ä¼ é€é—¨ï¼Œä½†æ˜¯ä¹Ÿèƒ½åº”ä»˜ä¸€äº›æ—¥å¸¸æƒ…å†µäº†ã€‚</span><br><span class="line">äº‹å®ä¸Šï¼Œåœ¨ Props æ˜¯å¼•ç”¨ç±»å‹æ—¶ï¼Œå•ç‹¬ä¿®æ”¹å¯¹è±¡ã€æ•°ç»„çš„æŸä¸ªå±æ€§æˆ–ä¸‹æ ‡ï¼ŒVue å¹¶ä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚å½“ç„¶ï¼Œå‰ææ˜¯ä½ è¦éå¸¸æ¸…æ¥šè‡ªå·±åœ¨åšä»€ä¹ˆï¼Œå¹¶å†™å¥½æ³¨é‡Šï¼Œé˜²æ­¢ä½ çš„å°ä¼™ä¼´ä»¬ç–‘æƒ‘ã€‚</span><br><span class="line">æœ‰çš„åŒå­¦å¯èƒ½çŸ¥é“ï¼Œåœ¨ç»„ä»¶ä¸Šç»‘å®šçš„å±æ€§ï¼Œå¦‚æœæ²¡æœ‰åœ¨ç»„ä»¶å†…éƒ¨ç”¨ Props å£°æ˜ï¼Œä¼šé»˜è®¤ç»‘å®šåˆ°ç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šå»ã€‚è¿˜æ˜¯ä¹‹å‰çš„æ —å­ï¼šã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h1 id="æ–‡æ¡£æµ"><a href="#æ–‡æ¡£æµ" class="headerlink" title="æ–‡æ¡£æµ"></a>æ–‡æ¡£æµ</h1><p>æ–‡æ¡£æµå‡ºåœ¨ç½‘é¡µæœ€åº•å±‚ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªç½‘é¡µä¸­çš„ä½ç½®ï¼Œæˆ‘ä»¬æ‰€åˆ›å»ºçš„å…ƒç´ é»˜è®¤éƒ½å¤„äºæ–‡æ¡£æµä¸­ã€‚<br>åŸæ–‡æ˜¯<code>normal flow</code>ï¼Œè‡³äºä¸ºä½•ç¿»è¯‘æˆæ–‡æ¡£æµè§ä»è§æ™ºã€‚æŒ‡è¯­è¨€æ–‡æœ¬ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹æ˜¾ç¤ºã€‚ä½†æ˜¯<code>æµ®åŠ¨</code>ã€<code>ç»å¯¹å®šä½</code>ã€<code>å›ºå®šå®šä½</code>è¿™äº›éƒ½ä¼šå¯¼è‡´è„±ç¦»æ–‡æ¡£æµã€‚</p>
<h1 id="æµ®åŠ¨"><a href="#æµ®åŠ¨" class="headerlink" title="æµ®åŠ¨"></a>æµ®åŠ¨</h1><p>float å±æ€§å®šä¹‰å…ƒç´ åœ¨å“ªä¸ªæ–¹å‘æµ®åŠ¨ã€‚ä»¥å¾€è¿™ä¸ªå±æ€§æ€»åº”ç”¨äºå›¾åƒï¼Œä½¿æ–‡æœ¬å›´ç»•åœ¨å›¾åƒå‘¨å›´ï¼Œä¸è¿‡åœ¨ CSS ä¸­ï¼Œä»»ä½•å…ƒç´ éƒ½å¯ä»¥æµ®åŠ¨ã€‚æµ®åŠ¨å…ƒç´ ä¼šç”Ÿæˆä¸€ä¸ªå—çº§æ¡†ï¼Œè€Œä¸è®ºå®ƒæœ¬èº«æ˜¯ä½•ç§å…ƒç´ ã€‚</p>
<p>å¦‚æœæµ®åŠ¨éæ›¿æ¢å…ƒç´ ï¼Œåˆ™è¦æŒ‡å®šä¸€ä¸ªæ˜ç¡®çš„å®½åº¦ï¼›å¦åˆ™ï¼Œå®ƒä»¬ä¼šå°½å¯èƒ½åœ°çª„ã€‚</p>
<table>
<thead>
<tr>
<th>å€¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>left</td>
<td>å…ƒç´ å‘å·¦æµ®åŠ¨</td>
</tr>
<tr>
<td>right</td>
<td>å…ƒç´ å‘å³æµ®åŠ¨ã€‚</td>
</tr>
<tr>
<td>none</td>
<td>é»˜è®¤å€¼ã€‚å…ƒç´ ä¸æµ®åŠ¨ï¼Œå¹¶ä¼šæ˜¾ç¤ºåœ¨å…¶åœ¨æ–‡æœ¬ä¸­å‡ºç°çš„ä½ç½®ã€‚</td>
</tr>
<tr>
<td>inherit</td>
<td>è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ float å±æ€§çš„å€¼ã€‚</td>
</tr>
</tbody>
</table>
<p>è®¾ç½®æµ®åŠ¨ä¼šè„±ç¦»æ–‡æ¡£æµï¼Œå…ƒç´ ä¼šå°½é‡å‘çˆ¶å…ƒç´ æˆ–è€…é‡åˆ°å…¶ä»–å…ƒç´ çš„å·¦ä¸Šæˆ–è€…å³ä¸Šé ã€‚å¦‚æœæµ®åŠ¨å…ƒç´ ä¸Šè¾¹æ˜¯ä¸€ä¸ªå—å…ƒç´ ï¼Œåˆ™æµ®åŠ¨å…ƒç´ ä¸ä¼šæµ®åŠ¨è¶…è¿‡è¿™ä¸ªå—å…ƒç´ ã€‚</p>
<blockquote>
<p>æµ®åŠ¨çš„å…ƒç´ ä¸ä¼šç›–ä½æ–‡å­—ï¼Œä¼šè‡ªåŠ¨ç¯ç»•åœ¨æµ®åŠ¨å…ƒç´ å‘¨å›´ã€‚<br>å½“å—å…ƒç´ è®¾ç½®floatè„±ç¦»æ–‡æ¡£æµåï¼Œå®½å’Œé«˜åˆ™é»˜è®¤æ˜¯å˜æˆè¢«å†…å®¹æ’‘å¼€ã€‚<br>å†…è”å…ƒç´ ä½¿ç”¨floatè„±ç¦»æ–‡æ¡£æµåï¼Œä¼šå˜æˆå—å…ƒç´ ã€‚</p>
</blockquote>
<h1 id="æ¸…é™¤æµ®åŠ¨"><a href="#æ¸…é™¤æµ®åŠ¨" class="headerlink" title="æ¸…é™¤æµ®åŠ¨"></a>æ¸…é™¤æµ®åŠ¨</h1><p><strong><code>clear</code> å±æ€§è§„å®šå…ƒç´ çš„å“ªä¸€ä¾§ä¸å…è®¸å…¶ä»–æµ®åŠ¨å…ƒç´ ã€‚</strong></p>
<p>clear å±æ€§å®šä¹‰äº†å…ƒç´ çš„å“ªè¾¹ä¸Šä¸å…è®¸å‡ºç°æµ®åŠ¨å…ƒç´ ã€‚åœ¨ CSS1 å’Œ CSS2 ä¸­ï¼Œè¿™æ˜¯é€šè¿‡è‡ªåŠ¨ä¸ºæ¸…é™¤å…ƒç´ ï¼ˆå³è®¾ç½®äº† clear å±æ€§çš„å…ƒç´ ï¼‰å¢åŠ ä¸Šå¤–è¾¹è·å®ç°çš„ã€‚åœ¨ CSS2.1 ä¸­ï¼Œä¼šåœ¨å…ƒç´ ä¸Šå¤–è¾¹è·ä¹‹ä¸Šå¢åŠ æ¸…é™¤ç©ºé—´ï¼Œè€Œå¤–è¾¹è·æœ¬èº«å¹¶ä¸æ”¹å˜ã€‚ä¸è®ºå“ªä¸€ç§æ”¹å˜ï¼Œæœ€ç»ˆç»“æœéƒ½ä¸€æ ·ï¼Œå¦‚æœå£°æ˜ä¸ºå·¦è¾¹æˆ–å³è¾¹æ¸…é™¤ï¼Œä¼šä½¿å…ƒç´ çš„ä¸Šå¤–è¾¹æ¡†è¾¹ç•Œåˆšå¥½åœ¨è¯¥è¾¹ä¸Šæµ®åŠ¨å…ƒç´ çš„ä¸‹å¤–è¾¹è·è¾¹ç•Œä¹‹ä¸‹ã€‚</p>
<table>
<thead>
<tr>
<th>å€¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>left</td>
<td>åœ¨å·¦ä¾§ä¸å…è®¸æµ®åŠ¨å…ƒç´ ã€‚</td>
</tr>
<tr>
<td>right</td>
<td>åœ¨å³ä¾§ä¸å…è®¸æµ®åŠ¨å…ƒç´ ã€‚</td>
</tr>
<tr>
<td>both</td>
<td>åœ¨å·¦å³ä¸¤ä¾§å‡ä¸å…è®¸æµ®åŠ¨å…ƒç´ ã€‚</td>
</tr>
<tr>
<td>none</td>
<td>é»˜è®¤å€¼ã€‚å…è®¸æµ®åŠ¨å…ƒç´ å‡ºç°åœ¨ä¸¤ä¾§ã€‚</td>
</tr>
<tr>
<td>inherit</td>
<td>è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ clear å±æ€§çš„å€¼ã€‚</td>
</tr>
</tbody>
</table>
<blockquote>
<p>bothæ˜¯æ¸…é™¤å½±å“å¯¹å½“å‰å…ƒç´ å½±å“æœ€å¤§çš„å…ƒç´ <br>å¯¹å…„å¼Ÿå…ƒç´ æœ‰æ•ˆï¼Œçˆ¶å­æ˜¯æ— æ•ˆçš„ã€‚<br>æ¸…é™¤æµ®åŠ¨<code>clean</code>å±æ€§ï¼Œæ¸…é™¤å…¶ä»–æµ®åŠ¨å…ƒç´ å¯¹å½“å‰å…ƒç´ çš„å½±å“</p>
</blockquote>
<p>å®ä¾‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line"></span><br><span class="line">            background-color: yellow;</span><br><span class="line"></span><br><span class="line">            float: right;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line"></span><br><span class="line">            background-color: blue;</span><br><span class="line"></span><br><span class="line">            clear: right;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¦‚æœbox2ä¸è®¾ç½®clearï¼Œåˆ™box2çš„ä½ç½®å°†è¢«é¡¶åˆ°box1çš„é«˜åº¦ä¸Šï¼Œ2âƒ£è€Œè®¾ç½®äº†clearåï¼Œbox2è¿˜åœ¨åŸæ¥çš„ä½ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="é«˜åº¦å¡Œé™·é—®é¢˜"><a href="#é«˜åº¦å¡Œé™·é—®é¢˜" class="headerlink" title="é«˜åº¦å¡Œé™·é—®é¢˜"></a>é«˜åº¦å¡Œé™·é—®é¢˜</h2><p>åŸå› ï¼šåœ¨æ–‡æ¡£æµä¸­ï¼Œçˆ¶å…ƒç´ é«˜åº¦é»˜è®¤æ˜¯ç”±å­å…ƒç´ çš„é«˜åº¦æ’‘èµ·æ¥çš„ï¼Œä½†æ˜¯è®¾ç½®æµ®åŠ¨åï¼Œå­å…ƒç´ è„±ç¦»äº†æ–‡æ¡£æµï¼Œåˆ™å¯¼è‡´äº†çˆ¶å…ƒç´ çš„é«˜åº¦å¡Œé™·ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="css">        <span class="selector-class">.parent</span> &#123;</span></span><br><span class="line">            border: 2px red solid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.sun</span> &#123;</span></span><br><span class="line">            height: 200px;</span><br><span class="line">            width: 100px;</span><br><span class="line"></span><br><span class="line">            background-color: yellow;</span><br><span class="line"></span><br><span class="line">            float: right;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sun"</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="è§£å†³æ–¹å¼ä¸€"><a href="#è§£å†³æ–¹å¼ä¸€" class="headerlink" title="è§£å†³æ–¹å¼ä¸€"></a>è§£å†³æ–¹å¼ä¸€</h3><p>BFC:Block Formatting ï¼ˆIE6ä»¥ä¸‹å¹¶ä¸æ”¯æŒï¼‰Contextï¼ŒW3Cæ ‡å‡†ä¸­ï¼Œé¡µé¢ä¸­éƒ½æœ‰ä¸€ä¸ªéšå«çš„å±æ€§ã€‚é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå½“æ‰“å¼€çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>çˆ¶å…ƒç´ çš„å‚ç›´å¤–è¾¹è·ä¸ä¼šä¸å­å…ƒç´ é‡å </li>
<li>å¼€å¯BFCçš„å…ƒç´ ä¸ä¼šè¢«æµ®åŠ¨å…ƒç´ æ‰€è¦†ç›–</li>
<li>å¼€å¯BFCçš„å…ƒç´ å¯ä»¥åŒ…å«æµ®åŠ¨çš„å­å…ƒç´ </li>
</ul>
<p>å¦‚ä½•å¼€å¯BFCï¼ˆæ— æ³•ç›´æ¥å¼€å¯ï¼‰</p>
<ul>
<li>è®¾ç½®å…ƒç´ æµ®åŠ¨</li>
<li>å¼€å¯å…ƒç´ ç»å¯¹å®šä½</li>
<li>è®¾ç½®å…ƒç´ çš„displayçš„å€¼ä¸ºinline-block</li>
<li>è®¾ç½®å…ƒç´ çš„overflowçš„å€¼ä¸ºévisibleçš„å€¼ï¼ˆæ¨èhiddenï¼‰ã€è¯¥æ–¹å¼æœ€ç®€å•çš„æ–¹å¼ï¼Œå‰¯ä½œç”¨æœ€å°ã€‘</li>
</ul>
<blockquote>
<p>å…¼å®¹IE6 åˆ™å¯ä»¥ä½¿ç”¨ç›¸ä¼¼äºBFCçš„ï¼Œæˆä¸º<code>hasLayout</code>ï¼Œå¼€å¯æ–¹å¼åˆ™è®¾ç½®<code>zoom:1</code>å³å¯ã€‚ä½†æ˜¯è¯¥æ–¹å¼ä»…æ”¯æŒIE8ä»¥ä¸‹ã€‚å¦‚éœ€å®Œå…¨å…¼å®¹å’Œå…¶ä»–æµè§ˆå™¨ï¼Œåˆ™è®¾ç½®ä¸¤è€…åŒæ—¶è®¾ç½®ã€‚æˆ–è€…æŒ‡å®šå…ƒç´ å®½åº¦ã€‚</p>
</blockquote>
<h3 id="è§£å†³æ–¹å¼äºŒ"><a href="#è§£å†³æ–¹å¼äºŒ" class="headerlink" title="è§£å†³æ–¹å¼äºŒ"></a>è§£å†³æ–¹å¼äºŒ</h3><p>åˆ©ç”¨æ¸…é™¤æµ®åŠ¨ï¼Œç›´æ¥åœ¨é«˜åº¦å¡Œé™·çš„çˆ¶å…ƒç´ çš„æœ€åï¼Œæ·»åŠ ä¸€ä¸ªç©ºç™½çš„divï¼Œç”±äºè¯¥å…ƒç´ æ²¡æœ‰æµ®åŠ¨ï¼Œæ‰€ä»¥å®ƒæ˜¯å¯ä»¥æ’‘å¼€çˆ¶å…ƒç´ çš„é«˜åº¦çš„ï¼Œå¯¹å…¶è¿›è¡Œæ¸…é™¤æµ®åŠ¨ï¼Œæ¶ˆé™¤äº†ä¸Šä¸€ä¸ªå…ƒç´ çš„æµ®åŠ¨å½±å“ï¼Œå³å¯æ’‘èµ·çˆ¶å…ƒç´ çš„é«˜åº¦ï¼Œä¸”è¯¥æ–¹æ¡ˆå…¼å®¹æ€§æ¯”æ–¹æ¡ˆä¸€æ›´é«˜ï¼Œå½±å“åº¦æœ€å°ã€‚ä½†æ˜¯æ·»åŠ äº†ä¸€ä¸ªæ¯«æ— æ„ä¹‰çš„divæ ‡ç­¾ï¼Œå¯è¯»æ€§å˜å·®äº†ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="css">        <span class="selector-class">.parent</span> &#123;</span></span><br><span class="line">            border: 2px red solid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.sun</span> &#123;</span></span><br><span class="line">            height: 200px;</span><br><span class="line">            width: 100px;</span><br><span class="line"></span><br><span class="line">            background-color: yellow;</span><br><span class="line"></span><br><span class="line">            float: right;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span> &#123;</span></span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sun"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"clearfix"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="è§£å†³æ–¹å¼ä¸‰"><a href="#è§£å†³æ–¹å¼ä¸‰" class="headerlink" title="è§£å†³æ–¹å¼ä¸‰"></a>è§£å†³æ–¹å¼ä¸‰</h3><p><strong>åˆ©ç”¨<code>::after</code>ä¼ªå…ƒç´ é€‰æ‹©å™¨ã€‚</strong></p>
<blockquote>
<p><code>::after</code> é€‰æ‹©å™¨åœ¨è¢«é€‰å…ƒç´ çš„å†…å®¹åé¢æ’å…¥å†…å®¹ã€‚<br>è¯·ä½¿ç”¨ content å±æ€§æ¥æŒ‡å®šè¦æ’å…¥çš„å†…å®¹ã€‚</p>
</blockquote>
<p>é€šè¿‡alterä¼ªå…ƒç´ å‘å…ƒç´ æ·»åŠ ä¸€ä¸ªç©ºç™½çš„å—å…ƒç´ ï¼Œç„¶åå¯¹å…¶æ¸…é™¤å…ƒç´ ã€‚å’Œæ–¹å¼äºŒçš„åŸç†ç›¸åŒï¼Œä½†æ˜¯è¯¥æ–¹å¼å¯è¯»æ€§æ›´é«˜ã€‚ä¸ä¼šåœ¨htmlä¸­æ·»åŠ æ¯«æ— æ„ä¹‰çš„ç©ºç™½æ ‡ç­¾ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="css">        <span class="selector-class">.parent</span> &#123;</span></span><br><span class="line">            border: 2px red solid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.sun</span> &#123;</span></span><br><span class="line">            height: 200px;</span><br><span class="line">            width: 100px;</span><br><span class="line"></span><br><span class="line">            background-color: yellow;</span><br><span class="line"></span><br><span class="line">            float: right;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /*.clearfix &#123;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;*/</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.clearfix</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">            content: "";</span><br><span class="line">            clear: both;</span><br><span class="line">            display: block;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"parent clearfix"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sun"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>displayçš„å€¼å¯ä»¥ä¸ºblockï¼Œä¹Ÿå¯ä»¥ä¸ºtableã€‚</p>
</blockquote>
<p><strong>æ ‡å‡†æ¨¡ç‰ˆ</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span> &#123;</span><br><span class="line">    *zoom: 1;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="selector-class">.clearfix</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">    <span class="attribute">visibility</span>: hidden;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å®šä½"><a href="#å®šä½" class="headerlink" title="å®šä½"></a>å®šä½</h1><p>å®šä½æŒ‡çš„æ˜¯å°†æŒ‡å®šçš„å…ƒç´ æ‘†æ”¾åœ¨é¡µé¢ä¸­æŒ‡å®šçš„ä½ç½®ï¼Œé€šè¿‡å®šä½å¯ä»¥ä»»æ„çš„æ‘†æ”¾å…ƒç´ ã€‚</p>
<p>è¿™ä¸ªå±æ€§å®šä¹‰å»ºç«‹å…ƒç´ å¸ƒå±€æ‰€ç”¨çš„å®šä½æœºåˆ¶ã€‚ä»»ä½•å…ƒç´ éƒ½å¯ä»¥å®šä½ï¼Œä¸è¿‡ç»å¯¹æˆ–å›ºå®šå…ƒç´ ä¼šç”Ÿæˆä¸€ä¸ªå—çº§æ¡†ï¼Œè€Œä¸è®ºè¯¥å…ƒç´ æœ¬èº«æ˜¯ä»€ä¹ˆç±»å‹ã€‚ç›¸å¯¹å®šä½å…ƒç´ ä¼šç›¸å¯¹äºå®ƒåœ¨æ­£å¸¸æµä¸­çš„é»˜è®¤ä½ç½®åç§»ã€‚é»˜è®¤å€¼<code>static</code>ã€‚<br>å…ƒç´ çš„ä½ç½®é€šè¿‡ â€œleftâ€, â€œtopâ€, â€œrightâ€ ä»¥åŠ â€œbottomâ€ å±æ€§è¿›è¡Œè§„å®šã€‚</p>
<table>
<thead>
<tr>
<th>å€¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>absolute</td>
<td>ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äº static å®šä½ä»¥å¤–çš„ç¬¬ä¸€ä¸ªçˆ¶å…ƒç´ è¿›è¡Œå®šä½ã€‚</td>
</tr>
<tr>
<td>fixed</td>
<td>ç”Ÿæˆç»å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½ã€‚</td>
</tr>
<tr>
<td>relative</td>
<td>ç”Ÿæˆç›¸å¯¹å®šä½çš„å…ƒç´ ï¼Œç›¸å¯¹äºå…¶æ­£å¸¸ä½ç½®è¿›è¡Œå®šä½ã€‚</td>
</tr>
<tr>
<td>static</td>
<td>é»˜è®¤å€¼ã€‚æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­ï¼ˆå¿½ç•¥ top, bottom, left, right æˆ–è€… z-index å£°æ˜ï¼‰ã€‚</td>
</tr>
<tr>
<td>inherit</td>
<td>è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ position å±æ€§çš„å€¼ã€‚</td>
</tr>
</tbody>
</table>
<h2 id="ç›¸å¯¹å®šä½"><a href="#ç›¸å¯¹å®šä½" class="headerlink" title="ç›¸å¯¹å®šä½"></a>ç›¸å¯¹å®šä½</h2><p>ç›¸å¯¹å®šä½è®¾ç½®äº†ï¼Œä½†ä¸è®¾ç½®åç§»é‡åˆ™ä¹Ÿæ²¡æœ‰æ•ˆæœ<br>ç›¸å¯¹å®šä½æ˜¯ç›¸å¯¹äºå…ƒç´ åœ¨æ–‡æ¡£æµåŸæ¥çš„ä½ç½®è¿›è¡Œå®šä½<br>ç›¸å¯¹å®šä½ä¸ä¼šè„±ç¦»æ–‡æ¡£æµ<br>ç›¸å¯¹å®šä½ä¼šä½¿å¾—å…ƒç´ æå‡ä¸€ä¸ªå±‚çº§<br>ç›¸å¯¹å®šä½ä¸ä¼šæ”¹å˜å…ƒç´ çš„æ€§è´¨ï¼Œå—å…ƒç´ ä¾ç„¶æ˜¯å—å…ƒç´ ã€‚å†…è”ä¾ç„¶ä¹Ÿä¾ç„¶æ˜¯å†…è”ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: yellow;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: green;</span><br><span class="line"></span><br><span class="line">            position: relative;</span><br><span class="line">            left: 100px;</span><br><span class="line">            top: 100px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box3</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: blue;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç›¸å¯¹äºåŸæ¥box2çš„ä½ç½®è¿›è¡Œåç§»å‘å³100åƒç´ ï¼Œå‘ä¸‹100åƒç´  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç»å¯¹å®šä½"><a href="#ç»å¯¹å®šä½" class="headerlink" title="ç»å¯¹å®šä½"></a>ç»å¯¹å®šä½</h2><p>å¼€å¯ç»å¯¹å®šä½ä¼šä½¿å…ƒç´ è„±ç¦»æ–‡æ¡£æµ<br>ç»å¯¹å®šä½æ˜¯ç›¸å½“äºç¦»å®ƒæœ€è¿‘çš„å¼€å¯äº†å®šä½çš„ç¥–å…ˆå…ƒç´ è¿›è¡Œå®šä½çš„<br>å¦‚æœæ‰€æœ‰çš„ç¥–å…ˆå…ƒç´ éƒ½æ²¡æœ‰å¼€å¯å®šä½ï¼Œåˆ™ç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½<br>ç»å¯¹å®šä½ä¼šä½¿å¾—å…ƒç´ æå‡ä¸€ä¸ªå±‚çº§å¹¶æ”¹å˜å…ƒç´ çš„æ€§è´¨</p>
<p><strong>å¦‚æœç¥–å…ˆå…ƒç´ æ²¡æœ‰ä»»ä½•ä¸€ä¸ªå¼€å¯äº†å®šä½ï¼Œåˆ™æ˜¯ç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: yellow;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: green;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box3</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: blue;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box4</span> &#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background-color: black;</span><br><span class="line"></span><br><span class="line">            position: absolute;</span><br><span class="line">            left: 0;</span><br><span class="line">            top: 0;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box4"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç¥–å…ˆå…ƒç´ éƒ½æ²¡æœ‰å¼€å¯å®šä½ï¼Œåˆ™box4çš„åŸç‚¹ä½ç½®åˆ™æ˜¯æµè§ˆå™¨å·¦ä¸Šè§’ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>å¼€å¯box2å…ƒç´ çš„å®šä½ï¼Œåˆ™box4åŸç‚¹çš„ä½ç½®å‘ç”Ÿæ”¹å˜</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.box1</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: yellow;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box2</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: green;</span><br><span class="line"></span><br><span class="line">            position: relative;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box3</span> &#123;</span></span><br><span class="line">            width: 200px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            background-color: blue;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box4</span> &#123;</span></span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            background-color: black;</span><br><span class="line"></span><br><span class="line">            position: absolute;</span><br><span class="line">            left: 0;</span><br><span class="line">            top: 0;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box4"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æœ€è¿‘çš„ç¥–å…ˆå…ƒç´ box2å¼€å¯äº†å®šä½ï¼Œåˆ™åŸç‚¹ä½ç½®å‘ç”Ÿäº†æ”¹å˜ï¼Œä¸ºbox2å—å…ƒç´ çš„å·¦ä¸Šè§’ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸€èˆ¬æƒ…å†µè‡ªå…ƒç´ å¼€å¯ç»å¯¹å®šä½ï¼Œåˆ™çˆ¶å…ƒç´ ä¼šå¼€å¯ç›¸å¯¹å®šä½</p>
</blockquote>
<h2 id="å›ºå®šå®šä½"><a href="#å›ºå®šå®šä½" class="headerlink" title="å›ºå®šå®šä½"></a>å›ºå®šå®šä½</h2><p>å›ºå®šå®šä½ä¹Ÿæ˜¯ç»å¯¹å®šä½çš„ä¸€ç§ï¼Œå¤§éƒ¨åˆ†ç‰¹ç‚¹å’Œç»å¯¹å®šä½ä¸€æ ·ã€‚ä½†æ˜¯å®ƒæ°¸è¿œéƒ½ç›¸å¯¹äºæµè§ˆå™¨çª—å£è¿›è¡Œå®šä½ï¼Œä¸ç®¡çˆ¶å…ƒç´ åˆ°åº•æœ‰æ²¡æœ‰å¼€å¯å®šä½ã€‚è€Œä¸”åªä¼šå›ºå®šåœ¨æµè§ˆå™¨çª—å£çš„ä½ç½®ï¼Œä¸ä¼šå› ä¸ºå…¶ä»–å› ç´ ï¼ˆæ»šåŠ¨æ¡ç­‰ï¼‰è€Œæ”¹å˜å…ƒç´ ä½ç½®ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">        body &#123;</span><br><span class="line">            height: 5000px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.box</span> &#123;</span></span><br><span class="line">            height: 500px;</span><br><span class="line">            width: 80px;</span><br><span class="line"></span><br><span class="line">            position: fixed;</span><br><span class="line">            background-color: yellow;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å›ºå®šå®šä½è¯¥å…ƒç´ ä¸ä¼šå› ä¸ºæµè§ˆå™¨é¡µé¢æ»šåŠ¨è€Œå‘ç”Ÿä½ç½®çš„æ”¹å˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>çœ‹çœ‹æˆ‘æœ‰æ²¡æœ‰æ»šåŠ¨å•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Šå•Š<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åº”ç”¨å¯ä»¥ç”¨äºåº•éƒ¨çš„è¿”å›ï¼Œå¯¼èˆªæ¼‚æµ®èœå•</p>
<h1 id="å…ƒç´ å±‚çº§"><a href="#å…ƒç´ å±‚çº§" class="headerlink" title="å…ƒç´ å±‚çº§"></a>å…ƒç´ å±‚çº§</h1><p>å¦‚æœå®šä½å…ƒç´ å¤„äºç›¸åŒå±‚çº§ï¼Œåˆ™åé¢çš„å…ƒç´ ä¼šç›–ä½å‰é¢çš„å…ƒç´ ï¼ˆç»“æ„ä¸Šï¼‰</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡<code>z-index</code>æ¥ä¿®æ”¹å…ƒç´ å±‚çº§ï¼Œä½†æ˜¯æ²¡æœ‰å¼€å¯å®šä½çš„å…ƒç´ ä¸èµ·ä½œç”¨ã€‚</p>
<p>çˆ¶å…ƒç´ çš„å±‚çº§å°±ç®—æ¯”å­å…ƒç´ é«˜ï¼Œä½†æ˜¯ä¹Ÿä¸ä¼šç›–ä½å­å…ƒç´ ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-tag">img</span><span class="selector-class">.x</span></span></span><br><span class="line">&#123;</span><br><span class="line"><span class="css"><span class="selector-tag">position</span><span class="selector-pseudo">:absolute</span>;</span></span><br><span class="line"><span class="css"><span class="selector-tag">left</span><span class="selector-pseudo">:0px</span>;</span></span><br><span class="line"><span class="css"><span class="selector-tag">top</span><span class="selector-pseudo">:0px</span>;</span></span><br><span class="line"><span class="css"><span class="selector-tag">z-index</span><span class="selector-pseudo">:-1</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"x"</span> <span class="attr">src</span>=<span class="string">"/i/eg_mouse.jpg"</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>é»˜è®¤çš„ z-index æ˜¯ 0ã€‚Z-index -1 æ‹¥æœ‰æ›´ä½çš„ä¼˜å…ˆçº§ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="opacity"><a href="#opacity" class="headerlink" title="opacity"></a>opacity</h1><p>opacity å±æ€§è®¾ç½®å…ƒç´ çš„ä¸é€æ˜çº§åˆ«ã€‚<br>å€¼ä¸º<code>0-1</code>åŒºé—´ã€‚0è¡¨ç¤ºå®Œå…¨é€æ˜ï¼Œ1æ˜¯å®Œå…¨ä¸é€æ˜ã€‚</p>
<blockquote>
<p>åœ¨IE8ä»¥åŠä»¥ä¸‹ä¸æ”¯æŒï¼Œéœ€è¦æ”¯æŒåˆ™ä½¿ç”¨å¦‚ä¸‹å±æ€§ä»£æ›¿ï¼Œ<code>filter</code>æ»¤é•œï¼Œå€¼ä¸º<code>alpha(opacity=50)</code>,åŒºé—´0-100,ç›¸å½“äºopacity=0.5</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span> </span><br><span class="line">body &#123;</span><br><span class="line"><span class="css"><span class="selector-tag">background-color</span><span class="selector-pseudo">:yellow</span>;</span></span><br><span class="line">&#125;</span><br><span class="line">div</span><br><span class="line">&#123;</span><br><span class="line"><span class="css"><span class="selector-tag">background-color</span><span class="selector-pseudo">:red</span>;</span></span><br><span class="line"><span class="css"><span class="selector-tag">opacity</span><span class="selector-pseudo">:0.5</span>;</span></span><br><span class="line">filter:Alpha(opacity=50); /* IE8 ä»¥åŠæ›´æ—©çš„æµè§ˆå™¨ */</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>æœ¬å…ƒç´ çš„ä¸é€æ˜åº¦æ˜¯ 0.5ã€‚è¯·æ³¨æ„ï¼Œæ–‡æœ¬å’ŒèƒŒæ™¯è‰²éƒ½å—åˆ°ä¸é€æ˜çº§åˆ«çš„å½±å“ã€‚<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>background ç®€å†™å±æ€§åœ¨ä¸€ä¸ªå£°æ˜ä¸­è®¾ç½®æ‰€æœ‰çš„èƒŒæ™¯å±æ€§ã€‚</p>
<p>å¯ä»¥è®¾ç½®å¦‚ä¸‹å±æ€§ï¼š</p>
<ul>
<li>background-color        è§„å®šè¦ä½¿ç”¨çš„èƒŒæ™¯é¢œè‰²ã€‚</li>
<li>background-position     è§„å®šèƒŒæ™¯å›¾åƒçš„ä½ç½®ã€‚</li>
<li>background-size         è§„å®šèƒŒæ™¯å›¾ç‰‡çš„å°ºå¯¸ã€‚</li>
<li>background-repeat       è§„å®šå¦‚ä½•é‡å¤èƒŒæ™¯å›¾åƒã€‚</li>
<li>background-origin       è§„å®šèƒŒæ™¯å›¾ç‰‡çš„å®šä½åŒºåŸŸã€‚    </li>
<li>background-clip         è§„å®šèƒŒæ™¯çš„ç»˜åˆ¶åŒºåŸŸã€‚</li>
<li>background-attachment   è§„å®šèƒŒæ™¯å›¾åƒæ˜¯å¦å›ºå®šæˆ–è€…éšç€é¡µé¢çš„å…¶ä½™éƒ¨åˆ†æ»šåŠ¨ã€‚</li>
<li>background-image        è§„å®šè¦ä½¿ç”¨çš„èƒŒæ™¯å›¾åƒã€‚</li>
</ul>
<p>ç®€å†™å±æ€§ï¼šæ²¡æœ‰é¡ºåºï¼Œä¹Ÿæ²¡æœ‰è§„å®šæœ‰å¤šå°‘ä¸ªå€¼ã€‚<br><code>background: #00FF00 url(bgimage.gif) no-repeat fixed top;</code></p>
<blockquote>
<p>IE8 ä»¥åŠæ›´æ—©çš„æµè§ˆå™¨ä¸æ”¯æŒä¸€ä¸ªå…ƒç´ å¤šä¸ªèƒŒæ™¯å›¾åƒã€‚<br>IE7 ä»¥åŠæ›´æ—©çš„æµè§ˆå™¨ä¸æ”¯æŒ â€œinheritâ€ã€‚IE8 éœ€è¦ !DOCTYPEã€‚IE9 æ”¯æŒ â€œinheritâ€ã€‚</p>
</blockquote>
<h2 id="IE6ä¸æ”¯æŒPNG24"><a href="#IE6ä¸æ”¯æŒPNG24" class="headerlink" title="IE6ä¸æ”¯æŒPNG24"></a>IE6ä¸æ”¯æŒPNG24</h2><p>åœ¨IE6ä¸­å¯¹å›¾ç‰‡æ ¼å¼ä¸ºPNG24çš„æ”¯æŒåº¦ä¸é«˜ï¼Œè§£å†³æ–¹å¼</p>
<ul>
<li>å°†pngè½¬ä¸ºpng-8æ ¼å¼å³å¯ï¼Œä½†æ˜¯æ¸…æ™°åº¦ä¼šæœ‰ä¸€ç‚¹æŸå¤±ã€‚</li>
<li>ä½¿ç”¨JSç¬¬ä¸‰æ–¹åº“ie6_png</li>
</ul>
<h2 id="æŒ‰é’®èƒŒæ™¯é—ªçƒ"><a href="#æŒ‰é’®èƒŒæ™¯é—ªçƒ" class="headerlink" title="æŒ‰é’®èƒŒæ™¯é—ªçƒ"></a>æŒ‰é’®èƒŒæ™¯é—ªçƒ</h2><p>æœ‰ä¸€ä¸ªæŒ‰é’®ï¼ŒæŒ‰é’®çš„çŠ¶æ€åˆ†åˆ«è®¾ç½®äº†ä¸‰ä¸ªèƒŒæ™¯ï¼Œä¸Šä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.btn</span> &#123;</span></span><br><span class="line">            display: block;</span><br><span class="line">            width: 93px;</span><br><span class="line">            height: 29px;</span><br><span class="line">            background: url('img/link.png');</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line">            background: url('img/hover.png');</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.btn</span><span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line">            background: url('img/active.png');</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>é€ æˆåŸå› ï¼šæµè§ˆå™¨å¤–éƒ¨èµ„æºä¸æ˜¯åŒæ—¶åŠ è½½ï¼Œè€Œæ˜¯èµ„æºè¢«ä½¿ç”¨æ‰ä¼šå»åŠ è½½èµ„æºï¼Œè€Œä¸Šè¿°çš„ä¾‹å­ä¸­ï¼Œ<code>link.png</code>è¢«åŠ è½½äº†ï¼Œä½†æ˜¯<code>hover</code>å’Œ<code>active</code>ä¸‹çŠ¶æ€æ²¡æœ‰é©¬ä¸Šè§¦å‘ï¼Œæ‰€ä»¥æ²¡æœ‰åŠ è½½è¯¥èµ„æºå›¾ç‰‡ï¼Œå½“çŠ¶æ€è¢«è§¦å‘çš„æ—¶å€™è¯¥çŠ¶æ€çš„å›¾ç‰‡æ‰ä¼šåŠ è½½ï¼Œä½†æ˜¯åŠ è½½å›¾ç‰‡å¹¶ä¸æ˜¯ç«‹åˆ»èƒ½å¤Ÿå®Œæˆçš„ï¼Œæ‰€ä»¥åœ¨åŠ è½½çš„è¿‡ç¨‹ä¸­æœ‰ä¸€æ®µæ—¶é—´ï¼ŒèƒŒæ™¯å›¾ç‰‡æ— æ³•æ˜¾ç¤ºï¼Œé€ æˆäº†èƒŒæ™¯é—ªçƒã€‚ä¸ºäº†è§£å†³å°†å›¾ç‰‡æ•´åˆæˆä¸€å¼ å›¾ç‰‡ï¼Œåˆ©ç”¨<code>background-position</code>æ¥åˆ†åˆ«æ˜¾ç¤ºå„è‡ªçš„ä½ç½®ï¼Œè¿™ç§å›¾ç‰‡åˆç§°<code>ç²¾çµå›¾/é›ªç¢§å›¾</code>ã€‚</p>
<p>è§£å†³æ–¹æ³•:<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.btn</span> &#123;</span></span><br><span class="line">            display: block;</span><br><span class="line">            width: 93px;</span><br><span class="line">            height: 29px;</span><br><span class="line"></span><br><span class="line">            background: url('img/btn.png');</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.btn</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line">            background: url('img/btn.png');</span><br><span class="line">            background-position: 93px 0;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.btn</span><span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line">            background: url('img/btn.png');</span><br><span class="line">            background-position: 186px 0;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="CSSç²¾çµå›¾-é›ªç¢§å›¾"><a href="#CSSç²¾çµå›¾-é›ªç¢§å›¾" class="headerlink" title="CSSç²¾çµå›¾/é›ªç¢§å›¾"></a>CSSç²¾çµå›¾/é›ªç¢§å›¾</h2><p>CSS Sprite(CSS ç²¾çµ), ä¹Ÿç§°ä½œ é›ªç¢§å›¾ã€‚</p>
<p>å°†å¯¼èˆªèƒŒæ™¯å›¾ç‰‡ï¼ŒæŒ‰é’®èƒŒæ™¯å›¾ç‰‡ç­‰æœ‰è§„åˆ™çš„åˆå¹¶æˆä¸€å¼ èƒŒæ™¯å›¾ï¼Œå³å°†å¤šå¼ å›¾ç‰‡åˆä¸ºä¸€å¼ æ•´å›¾ï¼Œç„¶åç”¨background-positionâ€æ¥å®ç°èƒŒæ™¯å›¾ç‰‡çš„å®šä½æŠ€æœ¯ã€‚</p>
<p><strong>ä¼˜åŠ¿</strong></p>
<ul>
<li>é€šè¿‡å›¾ç‰‡æ•´åˆæ¥å‡å°‘å¯¹æœåŠ¡å™¨çš„è¯·æ±‚æ¬¡æ•°ï¼Œä»è€Œæé«˜ é¡µé¢çš„åŠ è½½é€Ÿåº¦</li>
<li>é€šè¿‡æ•´åˆå›¾ç‰‡æ¥å‡å°å›¾ç‰‡çš„ä½“ç§¯</li>
</ul>
<p>å›¾ç‰‡æ•´åˆåŸåˆ™ï¼š</p>
<ul>
<li>è¾¹åˆ‡å›¾è¾¹æ•´åˆ</li>
<li>å®šä½æ—¶é¿å…ä½¿ç”¨bottom,rightç­‰ï¼Œç”¨å…·ä½“çš„æ•°å€¼ï¼Œä¸ºäº†é¿å…å½“ä½ çš„å®½åº¦æˆ–é«˜åº¦ä¸Šæ‰©å±•spriteså›¾æ—¶å‡ºç°ä½ç½®çš„é”™è¯¯</li>
<li>å°†å°å›¾æ ‡é¢„ç•™è¶³å¤Ÿçš„ç©ºé—´ï¼Œå› ä¸ºä½¿ç”¨è¿™äº›å›¾æ ‡å…ƒç´ é€šå¸¸ä¼šæœ‰å¤§é‡çš„å†…å®¹è€Œä¸”å¯èƒ½éœ€è¦æ‰©å±•çš„é—´è·ï¼Œä»¥è‡³äºå…¶å®ƒçš„å›¾ç‰‡å¯èƒ½ä¼šæ„å¤–å‡ºç°åœ¨æœ¬åŒºåŸŸå†…ã€‚ä¸€èˆ¬çš„æƒ…å†µä¸‹ï¼Œä¼šå°†è¿™äº›å°å›¾æ ‡æ•´åˆåˆ°æ–‡ä»¶çš„æœ€å³ä¾§</li>
<li>å•å¼ æ•´åˆå¥½çš„spriteå›¾ç‰‡åœ¨100KBä»¥å†…</li>
<li>æŒ‰åˆ†ç±»æ•´åˆå›¾ç‰‡</li>
<li>ä¸ºäº†æ–¹ä¾¿è®¡ç®—å°ºå¯¸ï¼Œä¸€èˆ¬æƒ…å†µä¼šå°†spriteså›¾çš„åæ ‡è®¡ç®—æˆæ•´æ•°å€</li>
</ul>
<h1 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h1><p>ç®€å•ç”¨æ³•ä¸ä»‹ç»äº†ã€‚tableæ ‡ç­¾ï¼Œtrè¡Œæ ‡ç­¾ï¼Œtdå•å…ƒæ ¼æ ‡ç­¾ï¼Œthè¡¨å¤´æ ‡ç­¾ã€‚</p>
<h2 id="å»é™¤tableä¸tdçš„è·ç¦»"><a href="#å»é™¤tableä¸tdçš„è·ç¦»" class="headerlink" title="å»é™¤tableä¸tdçš„è·ç¦»"></a>å»é™¤tableä¸tdçš„è·ç¦»</h2><p>é€šè¿‡<code>border-spacing</code>å±æ€§è®¾ç½®è¿™ä¸ªè·ç¦»ã€‚</p>
<h2 id="è¡¨æ ¼è¾¹æ¡†åˆå¹¶"><a href="#è¡¨æ ¼è¾¹æ¡†åˆå¹¶" class="headerlink" title="è¡¨æ ¼è¾¹æ¡†åˆå¹¶"></a>è¡¨æ ¼è¾¹æ¡†åˆå¹¶</h2><p>é€šè¿‡<code>border-collapse</code>è®¾ç½®ä¸º<code>collapse</code>å³å¯ï¼Œä¸€æ—¦è®¾ç½®<code>border-spacing</code>è‡ªåŠ¨å¤±æ•ˆã€‚</p>
<h2 id="é•¿è¡¨æ ¼"><a href="#é•¿è¡¨æ ¼" class="headerlink" title="é•¿è¡¨æ ¼"></a>é•¿è¡¨æ ¼</h2><p>æœ‰ä¸€äº›æƒ…å†µä¸‹ï¼Œè¡¨æ ¼æ˜¯éå¸¸é•¿çš„ï¼Œåˆ™è¿™æ—¶å€™éœ€è¦å°†è¡¨æ ¼åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†è¡¨å¤´ï¼Œè¡¨ä¸»ä½“ï¼Œè¡¨åº•éƒ¨ã€‚<br>åˆ™htmlæä¾›äº†ä¸‰ä¸ªæ ‡ç­¾<code>thead</code>,<code>tbody</code>,<code>tfoot</code>æ¥åˆ†åˆ«è¡¨ç¤ºè¿›è¡ŒåŒºåˆ†ã€‚ä½œç”¨å°±æ˜¯åŒºåˆ†è¡¨æ ¼çš„ä¸åŒéƒ¨åˆ†ã€‚å¦‚æœè¡¨æ ¼æ²¡æœ‰å†™tbodyæ ‡ç­¾ï¼Œåˆ™æµè§ˆå™¨ä¼šé»˜è®¤æ·»åŠ ä¸€ä¸ªtbodyã€‚</p>
<h1 id="CSS-Hack"><a href="#CSS-Hack" class="headerlink" title="CSS Hack"></a>CSS Hack</h1><p>æœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œï¼Œæœ‰ä¸€äº›ä»£ç åªéœ€è¦è¿è¡Œåœ¨ç‰¹å®šçš„æµè§ˆå™¨ï¼ˆIE6ç­‰ï¼‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨CSS Hackæ¥è§£å†³ï¼Œè¿™æ®µä»£ç åªåœ¨æŸäº›æµè§ˆå™¨ä¸­è¯†åˆ«ï¼Œè€Œå…¶ä»–æµè§ˆå™¨ç­‰ä¸ä¼šè¯†åˆ«ã€‚</p>
<p>ä»¥ä¸‹åˆ—ä¸¾çš„åªæ˜¯ä¸€å°éƒ¨åˆ†ï¼Œåƒç«ç‹ç­‰æµè§ˆå™¨éƒ½æœ‰è‡ªå·±çš„HACKï¼Œä½†æ˜¯ç›¸å¯¹äºä¸€èˆ¬ç”¨äºIEæ›´å¹¿æ³•ã€‚</p>
<blockquote>
<p>ä¸åˆ°ä¸‡ä¸å¾—å·²çš„æƒ…å†µå°½é‡ä¸è¦ä½¿ç”¨</p>
</blockquote>
<h2 id="æ¡ä»¶Hack"><a href="#æ¡ä»¶Hack" class="headerlink" title="æ¡ä»¶Hack"></a>æ¡ä»¶Hack</h2><p>ç”¨äºé€‰æ‹©IEæµè§ˆå™¨åŠIEçš„ä¸åŒç‰ˆæœ¬<br>ifæ¡ä»¶Hackæ˜¯HTMLçº§åˆ«çš„ï¼ˆåŒ…å«ä½†ä¸ä»…æ˜¯CSSçš„Hackï¼Œå¯ä»¥é€‰æ‹©ä»»ä½•HTMLä»£ç å—ï¼‰</p>
<blockquote>
<p>ä»…å¯¹IE10ä»¥ä¸‹æœ‰æ•ˆï¼Œå…¶ä½™æµè§ˆå™¨è§£æä¸ºhtmlæ³¨é‡Šã€‚</p>
</blockquote>
<p><strong>åˆ¤æ–­IE</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if IE]&gt;</span></span><br><span class="line"><span class="comment">    ...</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>åˆ¤æ–­IE6</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if IE 6]&gt;</span></span><br><span class="line"><span class="comment">    ...</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>åˆ¤æ–­IE9ä»¥ä¸‹ï¼ˆä½†ä¸åŒ…æ‹¬IE9ï¼‰</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if lt IE 9]&gt;</span></span><br><span class="line"><span class="comment">    ...</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>ltä¸ºå°äºï¼Œlteä¸ºå°äºç­‰äºï¼Œgtä¸ºå¤§äºï¼Œgteä¸ºå¤§äºç­‰äºï¼Œ!ä¸ºé€‰æ‹©æŒ‡å®šç‰ˆæœ¬å¤–çš„æ‰€æœ‰IEç‰ˆæœ¬(é)</p>
</blockquote>
<h2 id="å±æ€§Hack"><a href="#å±æ€§Hack" class="headerlink" title="å±æ€§Hack"></a>å±æ€§Hack</h2><p>é€‰æ‹©ä¸åŒçš„æµè§ˆå™¨åŠç‰ˆæœ¬<br>å°½å¯èƒ½å‡å°‘å¯¹CSS Hackçš„ä½¿ç”¨ã€‚Hackæœ‰é£é™©ï¼Œä½¿ç”¨éœ€è°¨æ…<br>é€šå¸¸å¦‚æœªä½œç‰¹åˆ«è¯´æ˜ï¼Œæœ¬æ–‡æ¡£æ‰€æœ‰çš„ä»£ç å’Œç¤ºä¾‹çš„é»˜è®¤è¿è¡Œç¯å¢ƒéƒ½ä¸ºæ ‡å‡†æ¨¡å¼ã€‚<br>ä¸€äº›CSS Hackç”±äºæµè§ˆå™¨å­˜åœ¨äº¤å‰è®¤è¯†ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡å±‚å±‚è¦†ç›–çš„æ–¹å¼æ¥å®ç°å¯¹ä¸åŒæµè§ˆå™¨è¿›è¡ŒHackçš„ã€‚å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">_ï¼šé€‰æ‹©IE6åŠä»¥ä¸‹ã€‚è¿æ¥çº¿ï¼ˆä¸­åˆ’çº¿ï¼‰ï¼ˆ-ï¼‰äº¦å¯ä½¿ç”¨ï¼Œä¸ºäº†é¿å…ä¸æŸäº›å¸¦ä¸­åˆ’çº¿çš„å±æ€§æ··æ·†ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰æ›´ä¸ºåˆé€‚ã€‚</span><br><span class="line"></span><br><span class="line">*ï¼šé€‰æ‹©IE7åŠä»¥ä¸‹ã€‚è¯¸å¦‚ï¼šï¼ˆ+ï¼‰ä¸ï¼ˆ#ï¼‰ä¹‹ç±»çš„å‡å¯ä½¿ç”¨ï¼Œä¸è¿‡ä¸šç•Œå¯¹ï¼ˆ*ï¼‰çš„è®¤çŸ¥åº¦æ›´é«˜</span><br><span class="line"></span><br><span class="line">\9ï¼šé€‰æ‹©IE6+</span><br><span class="line"></span><br><span class="line">\0ï¼šé€‰æ‹©IE8+å’ŒOpera</span><br><span class="line"></span><br><span class="line">[;property:value;];ï¼š</span><br><span class="line">é€‰æ‹©webkitæ ¸å¿ƒæµè§ˆå™¨ï¼ˆChrome,Safariï¼‰ã€‚IE7åŠä»¥ä¸‹ä¹Ÿèƒ½è¯†åˆ«ã€‚ä¸­æ‹¬å·å†…å¤–çš„3ä¸ªåˆ†å·å¿…é¡»ä¿ç•™ï¼Œç¬¬ä¸€ä¸ªåˆ†å·å‰å¯ä»¥æ˜¯ä»»æ„è§„åˆ™æˆ–ä»»æ„å¤šä¸ªè§„åˆ™</span><br><span class="line"></span><br><span class="line">[;color:#f00;]; ä¸ [color:#f00;color:#f00;]; ä¸ [margin:0;padding:0;color:#f00;]; æ˜¯ç­‰ä»·çš„ã€‚ç”Ÿæ•ˆçš„å§‹ç»ˆæ˜¯ä¸­æ‹¬å·å†…çš„æœ€åä¸€æ¡è§„åˆ™ï¼Œæ‰€ä»¥é€šå¸¸é€‰ç”¨ç¬¬ä¸€ç§å†™æ³•æœ€ä¸ºç®€æ´</span><br></pre></td></tr></table></figure>
<p>æ¡ˆä¾‹ä»£ç ï¼š<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-cn"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>å±æ€§çº§Hack_CSSå‚è€ƒæ‰‹å†Œ_webå‰ç«¯å¼€å‘å‚è€ƒæ‰‹å†Œç³»åˆ—<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-tag">h1</span>&#123;<span class="attribute">margin</span>:<span class="number">10px</span> <span class="number">0</span>;<span class="attribute">font-size</span>:<span class="number">16px</span>;&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.test</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>:<span class="selector-id">#c30</span>;          <span class="comment">/* For Firefox */</span></span></span><br><span class="line"><span class="css">    <span class="selector-attr">[;color:#ddd;]</span>;      <span class="comment">/* For webkit(Chrome and Safari) */</span></span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>:<span class="selector-id">#090</span>\0;        <span class="comment">/* For Opera */</span></span></span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>:<span class="selector-id">#00f</span>\9;        <span class="comment">/* For IE8+ */</span></span></span><br><span class="line"><span class="css">    *<span class="selector-tag">color</span>:<span class="selector-id">#f00</span>;         <span class="comment">/* For IE7 */</span></span></span><br><span class="line"><span class="css">    _<span class="selector-tag">color</span>:<span class="selector-id">#ff0</span>;         <span class="comment">/* For IE6 */</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>åœ¨ä¸åŒæµè§ˆå™¨ä¸‹çœ‹çœ‹æˆ‘çš„é¢œè‰²å§<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="é€‰æ‹©ç¬¦Hack"><a href="#é€‰æ‹©ç¬¦Hack" class="headerlink" title="é€‰æ‹©ç¬¦Hack"></a>é€‰æ‹©ç¬¦Hack</h2><p>é€‰æ‹©ä¸åŒçš„æµè§ˆå™¨åŠç‰ˆæœ¬<br>å°½å¯èƒ½å‡å°‘å¯¹CSS Hackçš„ä½¿ç”¨ã€‚Hackæœ‰é£é™©ï¼Œä½¿ç”¨éœ€è°¨æ…<br>é€šå¸¸å¦‚æœªä½œç‰¹åˆ«è¯´æ˜ï¼Œæœ¬æ–‡æ¡£æ‰€æœ‰çš„ä»£ç å’Œç¤ºä¾‹çš„é»˜è®¤è¿è¡Œç¯å¢ƒéƒ½ä¸ºæ ‡å‡†æ¨¡å¼ã€‚<br>ä¸€äº›CSS Hackç”±äºæµè§ˆå™¨å­˜åœ¨äº¤å‰è®¤è¯†ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡å±‚å±‚è¦†ç›–çš„æ–¹å¼æ¥å®ç°å¯¹ä¸åŒæµè§ˆå™¨è¿›è¡ŒHackçš„ã€‚</p>
<blockquote>
<p>ç”¨å¾—æ¯”è¾ƒå°‘</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">* <span class="selector-tag">html</span> <span class="selector-class">.test</span>&#123;<span class="attribute">color</span>:<span class="number">#090</span>;&#125;       <span class="comment">/* For IE6 and earlier */</span></span><br><span class="line">* + <span class="selector-tag">html</span> <span class="selector-class">.test</span>&#123;<span class="attribute">color</span>:<span class="number">#ff0</span>;&#125;     <span class="comment">/* For IE7 */</span></span><br><span class="line"><span class="selector-class">.test</span><span class="selector-pseudo">:lang(zh-cn)</span>&#123;<span class="attribute">color</span>:<span class="number">#f00</span>;&#125;  <span class="comment">/* For IE8+ and not IE */</span></span><br><span class="line"><span class="selector-class">.test</span><span class="selector-pseudo">:nth-child(1)</span>&#123;<span class="attribute">color</span>:<span class="number">#0ff</span>;&#125; <span class="comment">/* For IE9+ and not IE */</span></span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="http://www.w3school.com.cn/css" target="_blank" rel="noopener">http://www.w3school.com.cn/css</a></p>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>Macå…³é—­/å¼€å¯ç‹¬ç«‹æ˜¾å¡</title>
    <url>/2019/03/19/Mac%E5%85%B3%E9%97%AD-%E5%BC%80%E5%90%AF%E7%8B%AC%E7%AB%8B%E6%98%BE%E5%8D%A1/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ¬äººä½¿ç”¨çš„æ˜¯2018æ¬¾15å¯¸çš„Mbpï¼Œæ¯æ¬¡ç”¨è¿…é›·æ’­æ”¾å™¨è§‚çœ‹æ€»æ˜¯è‡ªåŠ¨å¸®æˆ‘åˆ‡æ¢åˆ°ç‹¬ç«‹æ˜¾å¡ï¼ŒåŠŸè€—å’Œå‘çƒ­å®åœ¨æ˜¯å¤ªä¸¥é‡äº†ï¼Œæ‰€ä»¥æƒ³å•ç‹¬ä»…ä½¿ç”¨é›†æˆæ˜¾å¡ã€‚</p>
<a id="more"></a>
<p>æ™®é€šçš„ç•Œé¢ä¸­åªæ‰¾åˆ°äº†è‡ªåŠ¨åˆ‡æ¢æ¨¡å¼åœ¨<code>è®¾ç½®</code>-<code>èŠ‚èƒ½</code>é€‰é¡¹å¡ä¸­å¯ä»¥æ‰¾åˆ°ã€‚</p>
<p><img src="autoswitch.png" alt></p>
<p>è€Œæƒ³å•ç‹¬ä½¿ç”¨ï¼Œåˆ™ç»ˆç«¯ä½¿ç”¨å‘½ä»¤<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¼ºåˆ¶ä½¿ç”¨æ ¸æ˜¾(é›†æˆæ˜¾å¡)</span></span><br><span class="line">$ sudo pmset -a GPUSwitch 0</span><br><span class="line"><span class="comment">#å¼ºåˆ¶ä½¿ç”¨ç‹¬ç«‹æ˜¾å¡</span></span><br><span class="line">$ sudo pmset -a GPUSwitch 1</span><br><span class="line"><span class="comment">#è‡ªåŠ¨åˆ‡æ¢</span></span><br><span class="line">$ sudo pmset -a GPUSwitch 2</span><br></pre></td></tr></table></figure></p>
<p>è‡ªç”±é€‰æ‹©åˆ‡æ¢å³å¯ã€‚</p>
<p>æˆ–è€…ä½¿ç”¨ä¸€ä¸ª<code>gfxCardStatus</code>è½¯ä»¶ä¹Ÿå¯å®ç°ï¼Œä½†æœªç»å°è¯•ã€‚å‘½ä»¤æ›´æ–¹ä¾¿ã€‚</p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title>PHPé¢„å®šä¹‰å˜é‡</title>
    <url>/2019/03/19/PHP%E9%A2%84%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="PHPé¢„å®šä¹‰å˜é‡"><a href="#PHPé¢„å®šä¹‰å˜é‡" class="headerlink" title="PHPé¢„å®šä¹‰å˜é‡"></a>PHPé¢„å®šä¹‰å˜é‡</h1><p>å¯¹äºå…¨éƒ¨è„šæœ¬è€Œè¨€ï¼ŒPHP æä¾›äº†å¤§é‡çš„é¢„å®šä¹‰å˜é‡ã€‚è¿™äº›å˜é‡å°†æ‰€æœ‰çš„å¤–éƒ¨å˜é‡è¡¨ç¤ºæˆå†…å»ºç¯å¢ƒå˜é‡ï¼Œå¹¶ä¸”å°†é”™è¯¯ä¿¡æ¯è¡¨ç¤ºæˆè¿”å›å¤´ã€‚</p>
<a id="more"></a>
<p>è¶…å…¨å±€å˜é‡ â€” è¶…å…¨å±€å˜é‡æ˜¯åœ¨å…¨éƒ¨ä½œç”¨åŸŸä¸­å§‹ç»ˆå¯ç”¨çš„å†…ç½®å˜é‡</p>
<ul>
<li><code>$GLOBALS</code> â€” å¼•ç”¨å…¨å±€ä½œç”¨åŸŸä¸­å¯ç”¨çš„å…¨éƒ¨å˜é‡</li>
<li><code>$_SERVER</code> â€” æœåŠ¡å™¨å’Œæ‰§è¡Œç¯å¢ƒä¿¡æ¯</li>
<li><code>$_GET</code> â€” HTTP GET å˜é‡</li>
<li><code>$_POST</code> â€” HTTP POST å˜é‡</li>
<li><code>$_FILES</code> â€” HTTP æ–‡ä»¶ä¸Šä¼ å˜é‡</li>
<li><code>$_REQUEST</code> â€” HTTP Request å˜é‡</li>
<li><code>$_SESSION</code> â€” Session å˜é‡</li>
<li><code>$_ENV</code> â€” ç¯å¢ƒå˜é‡</li>
<li><code>$_COOKIE</code> â€” HTTP Cookies</li>
<li><code>$php_errormsg</code> â€” å‰ä¸€ä¸ªé”™è¯¯ä¿¡æ¯</li>
<li><code>$HTTP_RAW_POST_DATA</code> â€” åŸç”ŸPOSTæ•°æ®</li>
<li><code>$http_response_header</code> â€” HTTP å“åº”å¤´</li>
<li><code>$argc</code> â€” ä¼ é€’ç»™è„šæœ¬çš„å‚æ•°æ•°ç›®</li>
<li><code>$argv</code> â€” ä¼ é€’ç»™è„šæœ¬çš„å‚æ•°æ•°ç»„</li>
</ul>
<p>å‚è€ƒèµ„æ–™</p>
<p><a href="https://secure.php.net/manual/zh/reserved.variables.php" target="_blank" rel="noopener">https://secure.php.net/manual/zh/reserved.variables.php</a></p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>Macç¼ºå°‘freetypeè§£å†³æ–¹æ¡ˆ</title>
    <url>/2019/03/19/Mac%E7%BC%BA%E5%B0%91freetype%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><p>Mac OS X 10.14.3</p>
<a id="more"></a>
<h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>æœ€è¿‘åœ¨ä½¿ç”¨thinkphpçš„éªŒè¯ç æ¨¡å—æ—¶ï¼Œå‡ºç°äº†ä¸€ä¸ªå¼‚å¸¸<br><code>Call to undefined function think\captcha\imagettftext()</code><br>æ²¡æœ‰<code>imagettftext()</code>è¿™ä¸ªå‡½æ•°ï¼ŒåŸå› æ˜¯å› ä¸ºphpç¼ºå°‘gdåº“ä¸­çš„freetypeæ¨¡å—å¯¼è‡´çš„ã€‚</p>
<p>çŸ¥é“äº†åŸå› åï¼ŒæŸ¥è¯¢äº†ç½‘ä¸Šå¤§è‡´çš„æ–¹æ³•ï¼Œå¤§æ¦‚è¿™ä¹ˆå‡ ç§</p>
<ul>
<li>é‡æ–°ç¼–è¯‘PHP</li>
<li>ç”¨brewé‡æ–°å®‰è£…æ–°çš„PHP</li>
<li><a href="https://php-osx.liip.ch" target="_blank" rel="noopener">https://php-osx.liip.ch</a> ä¸€å¥è¯è„šæœ¬</li>
</ul>
<p>åœ¨å°è¯•äº†å¾ˆå¤šéåï¼Œéƒ½æ²¡æœ‰æˆåŠŸã€‚æœ‰ä¸€ç¯‡æ–‡ç« è®²åˆ°äº†è¿™äº›æ–¹æ¡ˆæ¯”è¾ƒè¿‡æ—¶ï¼Œåœ¨Macos10.14ç‰ˆæœ¬ä¸‹æ›´æ”¹äº†å®‰å…¨ç­–ç•¥ï¼Œæ–°å¢äº†<code>Rootless</code>æœºåˆ¶ï¼Œå…·ä½“è¯·çœ‹æˆ‘åšå®¢ä¸­å¦ä¸€ç¯‡æ–‡ç« å…³äº<code>Rootless</code>çš„ä»‹ç»ã€‚</p>
<h1 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h1><h2 id="æ–¹æ¡ˆä¸€ï¼ˆä¾¿æºï¼‰"><a href="#æ–¹æ¡ˆä¸€ï¼ˆä¾¿æºï¼‰" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼ˆä¾¿æºï¼‰"></a>æ–¹æ¡ˆä¸€ï¼ˆä¾¿æºï¼‰</h2><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹é›†æˆç¯å¢ƒä¾‹å¦‚<code>MAMP</code>,<code>MAMP PRO</code>,<code>XAMPP</code>ç­‰</p>
<h2 id="æ–¹æ¡ˆäºŒï¼ˆæ¨èï¼‰"><a href="#æ–¹æ¡ˆäºŒï¼ˆæ¨èï¼‰" class="headerlink" title="æ–¹æ¡ˆäºŒï¼ˆæ¨èï¼‰"></a>æ–¹æ¡ˆäºŒï¼ˆæ¨èï¼‰</h2><h3 id="é¦–å…ˆå…³é—­Rootless"><a href="#é¦–å…ˆå…³é—­Rootless" class="headerlink" title="é¦–å…ˆå…³é—­Rootless"></a>é¦–å…ˆå…³é—­Rootless</h3><p>å…³é—­æ­¥éª¤<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1ã€é‡å¯ Mac å¹¶æŒ‰ä½ Command+Rï¼Œè¿›å…¥æ¢å¤æ¨¡å¼</span><br><span class="line">2ã€æ‰“å¼€ç»ˆç«¯ Terminal</span><br><span class="line">3ã€è¾“å…¥csrutil disable</span><br></pre></td></tr></table></figure></p>
<p>å¼€å¯æ­¥éª¤</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1ã€é‡å¯ Mac å¹¶æŒ‰ä½ Command+Rï¼Œè¿›å…¥æ¢å¤æ¨¡å¼</span><br><span class="line">2ã€æ‰“å¼€ç»ˆç«¯ Terminal</span><br><span class="line">3ã€è¾“å…¥csrutil enable</span><br></pre></td></tr></table></figure>
<h3 id="é‡æ–°brewå®‰è£…php"><a href="#é‡æ–°brewå®‰è£…php" class="headerlink" title="é‡æ–°brewå®‰è£…php"></a>é‡æ–°brewå®‰è£…php</h3><p><del>è¿™é‡Œæˆ‘è¯•è¿‡å…³é—­rootlessåä½¿ç”¨ä¸€å¥è¯è„šæœ¬ä¹Ÿæ²¡æœ‰åŠæ³•å®‰è£…æˆåŠŸã€‚ä¹Ÿè¯•è¿‡ä¸€äº›ç½‘ä¸Šçš„æ–¹æ¡ˆä¾‹å¦‚</del><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install php56 --with-apche --with-freetype</span><br></pre></td></tr></table></figure></p>
<p><del>ä½†æ˜¯è¿è¡Œå‡ºç°<code>Error: invalid option: --with-apche</code>æ­¤é”™è¯¯ï¼Œå¯»æ€æ²¡æœ‰è§£å†³åŠæ³•ã€‚</del></p>
<p><strong>æˆåŠŸçš„æ–¹æ¡ˆ</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew install php@7.1 --build-from-source</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è®°ä½æ·»åŠ <code>--build-from-source</code>å‚æ•°</p>
</blockquote>
<p>php ç‰ˆæœ¬å¯è‡ªè¡Œé€šè¿‡<code>brew search php</code>æ¥æŸ¥çœ‹éœ€è¦å®‰è£…æ‰€éœ€ï¼Œè¿è¡Œåå‡ºç°<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">==&gt; Installing dependencies <span class="keyword">for</span> php@7.1: pkg-config</span><br><span class="line">==&gt; Installing php@7.1 dependency: pkg-config</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/pkg-config-0.29.2.mojave.bo</span><br><span class="line"><span class="comment">######################################################################## 100.0%</span></span><br><span class="line">==&gt; Pouring pkg-config-0.29.2.mojave.bottle.tar.gz</span><br><span class="line">ğŸº  /usr/<span class="built_in">local</span>/Cellar/pkg-config/0.29.2: 11 files, 627.2KB</span><br><span class="line">==&gt; Installing php@7.1</span><br><span class="line">==&gt; Downloading https://php.net/get/php-7.1.26.tar.xz/from/this/mirror</span><br><span class="line">==&gt; Downloading from https://secure.php.net/distributions/php-7.1.26.tar.xz</span><br><span class="line">          <span class="comment">#    #    #    #                                         -=O=-      </span></span><br><span class="line">==&gt; Patching</span><br><span class="line">patching file acinclude.m4</span><br><span class="line">Hunk <span class="comment">#1 succeeded at 444 (offset 3 lines).</span></span><br><span class="line">Hunk <span class="comment">#2 succeeded at 459 (offset 3 lines).</span></span><br><span class="line">Hunk <span class="comment">#3 succeeded at 494 (offset 3 lines).</span></span><br><span class="line">Hunk <span class="comment">#4 succeeded at 506 (offset 3 lines).</span></span><br><span class="line">Hunk <span class="comment">#5 succeeded at 2507 (offset 88 lines).</span></span><br><span class="line">==&gt; ./buildconf --force</span><br><span class="line">==&gt; ./configure --prefix=/usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26 --localstatedir=/usr/l</span><br><span class="line">==&gt; make</span><br><span class="line"></span><br><span class="line">==&gt; make install</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26/bin/pear config-set php_ini /usr/<span class="built_in">local</span>/etc/</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26/bin/pear config-set php_dir /usr/<span class="built_in">local</span>/shar</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26/bin/pear config-set doc_dir /usr/<span class="built_in">local</span>/shar</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26/bin/pear config-set ext_dir /usr/<span class="built_in">local</span>/lib/</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26/bin/pear config-set bin_dir /usr/<span class="built_in">local</span>/opt/</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26/bin/pear config-set data_dir /usr/<span class="built_in">local</span>/sha</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26/bin/pear config-set cfg_dir /usr/<span class="built_in">local</span>/shar</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26/bin/pear config-set www_dir /usr/<span class="built_in">local</span>/shar</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26/bin/pear config-set man_dir /usr/<span class="built_in">local</span>/shar</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26/bin/pear config-set test_dir /usr/<span class="built_in">local</span>/sha</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26/bin/pear config-set php_bin /usr/<span class="built_in">local</span>/opt/</span><br><span class="line">==&gt; /usr/<span class="built_in">local</span>/Cellar/php@7.1/7.1.26/bin/pear update-channels</span><br><span class="line">==&gt; Caveats</span><br><span class="line">To <span class="built_in">enable</span> PHP <span class="keyword">in</span> Apache add the following to httpd.conf and restart Apache:</span><br><span class="line">    LoadModule php7_module /usr/<span class="built_in">local</span>/opt/php@7.1/lib/httpd/modules/libphp7.so</span><br><span class="line"></span><br><span class="line">    &lt;FilesMatch \.php$&gt;</span><br><span class="line">        SetHandler application/x-httpd-php</span><br><span class="line">    &lt;/FilesMatch&gt;</span><br><span class="line"></span><br><span class="line">Finally, check DirectoryIndex includes index.php</span><br><span class="line">    DirectoryIndex index.php index.html</span><br><span class="line"></span><br><span class="line">The php.ini and php-fpm.ini file can be found <span class="keyword">in</span>:</span><br><span class="line">    /usr/<span class="built_in">local</span>/etc/php/7.1/</span><br><span class="line"></span><br><span class="line">php@7.1 is keg-only, <span class="built_in">which</span> means it was not symlinked into /usr/<span class="built_in">local</span>,</span><br><span class="line">because this is an alternate version of another formula.</span><br><span class="line"></span><br><span class="line">If you need to have php@7.1 first <span class="keyword">in</span> your PATH run:</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">'export PATH="/usr/local/opt/php@7.1/bin:$PATH"'</span> &gt;&gt; ~/.bash_profile</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">'export PATH="/usr/local/opt/php@7.1/sbin:$PATH"'</span> &gt;&gt; ~/.bash_profile</span><br><span class="line"></span><br><span class="line">For compilers to find php@7.1 you may need to <span class="built_in">set</span>:</span><br><span class="line">  <span class="built_in">export</span> LDFLAGS=<span class="string">"-L/usr/local/opt/php@7.1/lib"</span></span><br><span class="line">  <span class="built_in">export</span> CPPFLAGS=<span class="string">"-I/usr/local/opt/php@7.1/include"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">To have launchd start php@7.1 now and restart at login:</span><br><span class="line">  brew services start php@7.1</span><br><span class="line">Or, <span class="keyword">if</span> you don<span class="string">'t want/need a background service you can just run:</span></span><br><span class="line"><span class="string">  php-fpm</span></span><br><span class="line"><span class="string">==&gt; Summary</span></span><br><span class="line"><span class="string">ğŸº  /usr/local/Cellar/php@7.1/7.1.26: 508 files, 63MB, built in 5 minutes 46 seconds</span></span><br><span class="line"><span class="string">==&gt; Caveats</span></span><br><span class="line"><span class="string">==&gt; php@7.1</span></span><br><span class="line"><span class="string">To enable PHP in Apache add the following to httpd.conf and restart Apache:</span></span><br><span class="line"><span class="string">    LoadModule php7_module /usr/local/opt/php@7.1/lib/httpd/modules/libphp7.so</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;FilesMatch \.php$&gt;</span></span><br><span class="line"><span class="string">        SetHandler application/x-httpd-php</span></span><br><span class="line"><span class="string">    &lt;/FilesMatch&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Finally, check DirectoryIndex includes index.php</span></span><br><span class="line"><span class="string">    DirectoryIndex index.php index.html</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">The php.ini and php-fpm.ini file can be found in:</span></span><br><span class="line"><span class="string">    /usr/local/etc/php/7.1/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">php@7.1 is keg-only, which means it was not symlinked into /usr/local,</span></span><br><span class="line"><span class="string">because this is an alternate version of another formula.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">If you need to have php@7.1 first in your PATH run:</span></span><br><span class="line"><span class="string">  echo '</span><span class="built_in">export</span> PATH=<span class="string">"/usr/local/opt/php@7.1/bin:<span class="variable">$PATH</span>"</span><span class="string">' &gt;&gt; ~/.bash_profile</span></span><br><span class="line"><span class="string">  echo '</span><span class="built_in">export</span> PATH=<span class="string">"/usr/local/opt/php@7.1/sbin:<span class="variable">$PATH</span>"</span><span class="string">' &gt;&gt; ~/.bash_profile</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">For compilers to find php@7.1 you may need to set:</span></span><br><span class="line"><span class="string">  export LDFLAGS="-L/usr/local/opt/php@7.1/lib"</span></span><br><span class="line"><span class="string">  export CPPFLAGS="-I/usr/local/opt/php@7.1/include"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">To have launchd start php@7.1 now and restart at login:</span></span><br><span class="line"><span class="string">  brew services start php@7.1</span></span><br><span class="line"><span class="string">Or, if you don'</span>t want/need a background service you can just run:</span><br><span class="line">  php-fpm</span><br></pre></td></tr></table></figure></p>
<p>ä¸»è¦æŸ¥çœ‹åé¢çš„æç¤ºä¿¡æ¯å¹¶é…ç½®ç¯å¢ƒ<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">'export PATH="/usr/local/opt/php@7.1/bin:$PATH"'</span> &gt;&gt; ~/.bash_profile</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">'export PATH="/usr/local/opt/php@7.1/sbin:$PATH"'</span> &gt;&gt; ~/.bash_profile</span><br></pre></td></tr></table></figure></p>
<p>ç„¶å<code>source ~/.bash_profire</code></p>
<p>å†æ¬¡é‡æ–°è¿è¡Œthinkphpä¸­çš„éªŒè¯ç æ¨¡å—ï¼Œå®éªŒæˆåŠŸ</p>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://blog.csdn.net/leiflyy/article/details/53016769" target="_blank" rel="noopener">https://blog.csdn.net/leiflyy/article/details/53016769</a></p>
<p><a href="https://blog.csdn.net/liaobangxiang/article/details/79460290" target="_blank" rel="noopener">https://blog.csdn.net/liaobangxiang/article/details/79460290</a></p>
<p><a href="https://github.com/EricLi404/notes/issues/1" target="_blank" rel="noopener">https://github.com/EricLi404/notes/issues/1</a></p>
<p><a href="https://stackoverflow.com/questions/50259893/home-brew-php-7-2-5-install-with-curl" target="_blank" rel="noopener">https://stackoverflow.com/questions/50259893/home-brew-php-7-2-5-install-with-curl</a></p>
<p><a href="https://hackycy.github.io/2019/03/19/Mac-OS-X-10-11-Rootless-ä»‹ç»">https://hackycy.github.io/2019/03/19/Mac-OS-X-10-11-Rootless-ä»‹ç»</a></p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Homebrew</tag>
        <tag>Mac</tag>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>Mac OS X 10.11+ Rootless ä»‹ç»</title>
    <url>/2019/03/19/Mac-OS-X-10-11-Rootless-%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Rootless"><a href="#Rootless" class="headerlink" title="Rootless"></a>Rootless</h1><p>Mac OS X 10.11+ (El Capitan) ä»¥åï¼Œå¼•å…¥äº† Rootless å®‰å…¨æœºåˆ¶ï¼Œè¯¥æœºåˆ¶é™åˆ¶äº† root ç”¨æˆ·çš„æƒé™ï¼Œæœ‰éƒ¨åˆ†æ“ä½œå³ä½¿æ˜¯ root ä¹Ÿæ— æ³•æ‰§è¡Œã€‚<br>åœ¨æ­å»ºphpç¯å¢ƒæ—¶é‡åˆ°äº†è¿™ä¸ªï¼Œæ‰€ä»¥è®°å½•äº†ä¸‹æ¥ã€‚</p>
<a id="more"></a>
<blockquote>
<p>è¯¥æœºåˆ¶çš„è¯¦ç»†ä»‹ç»ï¼Œè¯·å‚è€ƒï¼š<br>Wikipedia: System Integrity Protection<br>Apple: System Integrity Protection Guide</p>
</blockquote>
<h1 id="ä¸»è¦é™åˆ¶æœ‰ï¼š"><a href="#ä¸»è¦é™åˆ¶æœ‰ï¼š" class="headerlink" title="ä¸»è¦é™åˆ¶æœ‰ï¼š"></a>ä¸»è¦é™åˆ¶æœ‰ï¼š</h1><p>ä»¥ä¸‹ç›®å½•æ— æ³•ä¿®æ”¹ï¼š<br>/System, /bin, /sbin, æˆ–è€… /usr (/usr/local é™¤å¤–)ï¼Œä»¥åŠå†…ç½® App å’Œç³»ç»Ÿå·¥å…· Utilitiesã€‚<br>å…·ä½“çš„é™åˆ¶åå•åœ¨ /System/Library/Sandbox/rootless.conf æ–‡ä»¶ä¸­æœ‰å®šä¹‰ï¼Œè¯¥æ–‡ä»¶è¡Œé¦–çš„ * è¡¨ç¤ºè¯¥è¡Œè®°å½•ä¸åœ¨é™åˆ¶ä¹‹åˆ—<br>æ— æ³•è¿½è¸ªè°ƒè¯•ç³»ç»Ÿè¿›ç¨‹<br>æ— æ³•åŠ è½½æœªç»éªŒè¯çš„å†…æ ¸æ‰©å±•</p>
<h1 id="å¯èƒ½å¼•èµ·çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"><a href="#å¯èƒ½å¼•èµ·çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="å¯èƒ½å¼•èµ·çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"></a>å¯èƒ½å¼•èµ·çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h1><ul>
<li><p>ä¿®æ”¹å—é™åˆ¶çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo cp -f FILE /usr/bin/</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠ¥é”™ï¼š cp: /usr/bin/FILE: Operation not permitted</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ‰§è¡Œéƒ¨åˆ†å‘½ä»¤å—æŒ«</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo gem install posix-spawn -v <span class="string">'0.3.11'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠ¥é”™ï¼š</span></span><br><span class="line">Building native extensions.  This could take a <span class="keyword">while</span>...</span><br><span class="line">ERROR:  While executing gem ... (Errno::EPERM)</span><br><span class="line">    Operation not permitted - /usr/bin/posix-spawn-benchmark</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="å…³é—­-å¼€å¯Rootless"><a href="#å…³é—­-å¼€å¯Rootless" class="headerlink" title="å…³é—­/å¼€å¯Rootless"></a>å…³é—­/å¼€å¯Rootless</h1><p>å¦‚æœé‡åˆ°çš„é—®é¢˜éš¾ä»¥è§£å†³ï¼Œä¹Ÿå¯ä»¥å…³é—­ rootless åŠŸèƒ½ï¼Œå½»åº•è§£å†³å¼•èµ·çš„æƒé™é—®é¢˜ï¼Œä½†æ˜¯å…³é—­ rootless å°†ä¼šä¸¥é‡é™ä½ç³»ç»Ÿå®‰å…¨æ€§ï¼Œå¿…é¡»å°½å¿«é‡æ–°å¼€å¯ã€‚</p>
<h2 id="å…³é—­"><a href="#å…³é—­" class="headerlink" title="å…³é—­"></a>å…³é—­</h2><p>1ã€é‡å¯ Mac å¹¶æŒ‰ä½ Command+Rï¼Œè¿›å…¥æ¢å¤æ¨¡å¼<br>2ã€æ‰“å¼€ç»ˆç«¯ Terminal<br>3ã€è¾“å…¥<code>csrutil disable</code></p>
<h2 id="å¼€å¯"><a href="#å¼€å¯" class="headerlink" title="å¼€å¯"></a>å¼€å¯</h2><p>1ã€é‡å¯ Mac å¹¶æŒ‰ä½ Command+Rï¼Œè¿›å…¥æ¢å¤æ¨¡å¼<br>2ã€æ‰“å¼€ç»ˆç«¯ Terminal<br>3ã€è¾“å…¥<code>csrutil enable</code></p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoåšå®¢Nextä¸»é¢˜ä¸è’œå­å¤±æ•ˆè§£å†³</title>
    <url>/2019/03/17/hexo%E5%8D%9A%E5%AE%A2Next%E4%B8%BB%E9%A2%98%E4%B8%8D%E8%92%9C%E5%AD%90%E5%A4%B1%E6%95%88%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><em>2018å¹´åº•å‘ç°ä¸è’œå­å¼€å§‹å¤±æ•ˆï¼Œä½†æ˜¯æ²¡æœ‰ç®¡ï¼Œç°åœ¨çœ‹äº†<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener">å®˜ç½‘</a></em></p>
<a id="more"></a>
<h1 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h1><p>å®˜ç½‘è§£é‡Šï¼šå› ä¸ƒç‰›å¼ºåˆ¶è¿‡æœŸã€dn-lbstatics.qbox.meã€åŸŸåï¼Œä¸å®¢æœæ²Ÿé€šæ— æœï¼Œåªèƒ½æ›´æ¢åŸŸååˆ°ã€busuanzi.ibruce.infoã€ï¼</p>
<h1 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h1><p>ç›´æ¥æ ¹æ®æç¤ºæ›¿æ¢å³å¯</p>
<p>æ›¿æ¢è·¯å¾„<code>themes/next/layout/_third-party/analytics/busuanzi-counter.swig</code>ï¼Œæ‰“å¼€æ–‡ä»¶</p>
<p>æ‰¾åˆ°<br><code>&lt;script async src=&quot;https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt;</code><br>æ›¿æ¢<br><code>&lt;script async src=&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt;</code></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>PHPä¹‹é­”æœ¯å¸¸é‡</title>
    <url>/2019/03/14/PHP%E4%B9%8B%E9%AD%94%E6%9C%AF%E5%B8%B8%E9%87%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="é­”æœ¯å¸¸é‡"><a href="#é­”æœ¯å¸¸é‡" class="headerlink" title="é­”æœ¯å¸¸é‡"></a>é­”æœ¯å¸¸é‡</h1><p>PHP å‘å®ƒè¿è¡Œçš„ä»»ä½•è„šæœ¬æä¾›äº†å¤§é‡çš„<a href="https://secure.php.net/manual/zh/reserved.constants.php" target="_blank" rel="noopener">é¢„å®šä¹‰å¸¸é‡</a>ã€‚ä¸è¿‡å¾ˆå¤šå¸¸é‡éƒ½æ˜¯ç”±ä¸åŒçš„æ‰©å±•åº“å®šä¹‰çš„ï¼Œåªæœ‰åœ¨åŠ è½½äº†è¿™äº›æ‰©å±•åº“æ—¶æ‰ä¼šå‡ºç°ï¼Œæˆ–è€…åŠ¨æ€åŠ è½½åï¼Œæˆ–è€…åœ¨ç¼–è¯‘æ—¶å·²ç»åŒ…æ‹¬è¿›å»äº†ã€‚</p>
<p>æœ‰å…«ä¸ªé­”æœ¯å¸¸é‡å®ƒä»¬çš„å€¼éšç€å®ƒä»¬åœ¨ä»£ç ä¸­çš„ä½ç½®æ”¹å˜è€Œæ”¹å˜ã€‚ä¾‹å¦‚ <code>__LINE__</code>çš„å€¼å°±ä¾èµ–äºå®ƒåœ¨è„šæœ¬ä¸­æ‰€å¤„çš„è¡Œæ¥å†³å®šã€‚è¿™äº›ç‰¹æ®Šçš„å¸¸é‡ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¦‚ä¸‹ï¼š</p>
<a id="more"></a>
<h1 id="å‡ ä¸ªphpçš„é­”æœ¯å¸¸é‡"><a href="#å‡ ä¸ªphpçš„é­”æœ¯å¸¸é‡" class="headerlink" title="å‡ ä¸ªphpçš„é­”æœ¯å¸¸é‡"></a>å‡ ä¸ªphpçš„é­”æœ¯å¸¸é‡</h1><table>
<thead>
<tr>
<th>åç§°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>LINE</strong></td>
<td>æ–‡ä»¶ä¸­çš„å½“å‰è¡Œå·</td>
</tr>
<tr>
<td><strong>FILE</strong></td>
<td>æ–‡ä»¶çš„å®Œæ•´è·¯å¾„å’Œæ–‡ä»¶åã€‚å¦‚æœç”¨åœ¨è¢«åŒ…å«æ–‡ä»¶ä¸­ï¼Œåˆ™è¿”å›è¢«åŒ…å«çš„æ–‡ä»¶åã€‚è‡ªPHP4.0.2èµ·ï¼Œ<strong>FILE</strong>æ€»æ˜¯åŒ…å«ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼ˆå¦‚æœæ˜¯ç¬¦å·è¿æ¥ï¼Œåˆ™æ˜¯è§£æåçš„ç»å¯¹è·¯å¾„ï¼‰ï¼Œè€Œåœ¨æ­¤ä¹‹å‰çš„ç‰ˆæœ¬æœ‰æ—¶ä¼šåŒ…å«ä¸€ä¸ªç›¸å¯¹è·¯å¾„ã€‚</td>
</tr>
<tr>
<td><strong>DIR</strong></td>
<td>æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚å¦‚æœç”¨åœ¨è¢«åŒ…å«çš„æ–‡ä»¶ä¸­ï¼Œåˆ™è¿”å›è¢«åŒ…å«çš„æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œå®ƒç­‰ä»·äºdirname(<strong>_FILE</strong>)ã€‚é™¤éæ˜¯æ ¹ç›®å½•ï¼Œå¦åˆ™ç›®å½•åä¸åŒ…æ‹¬æœ«å°¾çš„æ–œæ ã€‚ï¼ˆPHP5.3.0ä¸­æ–°å¢ï¼‰ã€‚</td>
</tr>
<tr>
<td><strong>FUNCTION</strong></td>
<td>å‡½æ•°åç§°ï¼ˆPHP 4.3.0 æ–°åŠ ï¼‰ã€‚è‡ª PHP 5 èµ·æœ¬å¸¸é‡è¿”å›è¯¥å‡½æ•°è¢«å®šä¹‰æ—¶çš„åå­—ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€‚åœ¨ PHP 4 ä¸­è¯¥å€¼æ€»æ˜¯å°å†™å­—æ¯çš„ã€‚</td>
</tr>
<tr>
<td><strong>CLASS</strong></td>
<td>ç±»çš„åç§°ï¼ˆPHP 4.3.0 æ–°åŠ ï¼‰ã€‚è‡ª PHP 5 èµ·æœ¬å¸¸é‡è¿”å›è¯¥ç±»è¢«å®šä¹‰æ—¶çš„åå­—ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€‚åœ¨ PHP 4 ä¸­è¯¥å€¼æ€»æ˜¯å°å†™å­—æ¯çš„ã€‚ç±»ååŒ…æ‹¬å…¶è¢«å£°æ˜çš„ä½œç”¨åŒºåŸŸï¼ˆä¾‹å¦‚ Foo\Barï¼‰ã€‚æ³¨æ„è‡ª PHP 5.4 èµ· <strong>CLASS</strong> å¯¹ trait ä¹Ÿèµ·ä½œç”¨ã€‚å½“ç”¨åœ¨ trait æ–¹æ³•ä¸­æ—¶ï¼Œ<strong>CLASS</strong> æ˜¯è°ƒç”¨ trait æ–¹æ³•çš„ç±»çš„åå­—ã€‚</td>
</tr>
<tr>
<td><strong>TRAIT</strong></td>
<td>Trait çš„åå­—ï¼ˆPHP 5.4.0 æ–°åŠ ï¼‰ã€‚è‡ª PHP 5.4 èµ·æ­¤å¸¸é‡è¿”å› trait è¢«å®šä¹‰æ—¶çš„åå­—ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€‚Trait ååŒ…æ‹¬å…¶è¢«å£°æ˜çš„ä½œç”¨åŒºåŸŸï¼ˆä¾‹å¦‚ Foo\Barï¼‰ã€‚</td>
</tr>
<tr>
<td><strong>METHOD</strong></td>
<td>ç±»çš„æ–¹æ³•åï¼ˆPHP 5.0.0 æ–°åŠ ï¼‰ã€‚è¿”å›è¯¥æ–¹æ³•è¢«å®šä¹‰æ—¶çš„åå­—ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€‚</td>
</tr>
<tr>
<td><strong>NAMESPACE</strong></td>
<td>å½“å‰å‘½åç©ºé—´çš„åç§°ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€‚æ­¤å¸¸é‡æ˜¯åœ¨ç¼–è¯‘æ—¶å®šä¹‰çš„ï¼ˆPHP 5.3.0 æ–°å¢ï¼‰ã€‚</td>
</tr>
</tbody>
</table>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://secure.php.net/manual/zh/language.constants.predefined.php" target="_blank" rel="noopener">https://secure.php.net/manual/zh/language.constants.predefined.php</a></p>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidæ— æ³•è·å–æœ¬åœ°æœåŠ¡å™¨(Localhost)è§£å†³æ–¹æ¡ˆ</title>
    <url>/2019/03/10/Android%E6%97%A0%E6%B3%95%E8%8E%B7%E5%8F%96%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8-Localhost-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨Androidå¼€å‘ä¸­é€šè¿‡localhostæˆ–127.0.0.1è®¿é—®æœ¬åœ°æœåŠ¡å™¨æ—¶ï¼Œä¼šæŠ¥java.net.ConnectException: localhost/127.0.0.1:8083 -Connection refusedå¼‚å¸¸ã€‚</p>
<a id="more"></a>
<p>ä¸ºä»€ä¹ˆä¼šæŠ¥è¿™ä¸ªå¼‚å¸¸å‘¢ï¼Ÿå› ä¸ºAndroidæ¨¡æ‹Ÿå™¨æœ¬èº«æŠŠè‡ªå·±å½“åšäº†localhostæˆ–127.0.0.1ï¼Œè€Œæ­¤æ—¶æˆ‘ä»¬åˆé€šè¿‡localhostæˆ–127.0.0.1è®¿é—®æœ¬åœ°æœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºå¼‚å¸¸äº†ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p>ä½¿ç”¨<code>10.0.2.2</code>æ¥ä»£æ›¿<code>localhost</code>å’Œ<code>127.0.0.1</code>å³å¯</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Macæ˜¾ç¤ºéšè—æ–‡ä»¶/æ–‡ä»¶å¤¹</title>
    <url>/2019/03/08/Mac%E6%98%BE%E7%A4%BA%E9%9A%90%E8%97%8F%E6%96%87%E4%BB%B6-%E6%96%87%E4%BB%B6%E5%A4%B9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><em>Macä¸‹ä¸€äº›éšè—æ–‡ä»¶å¤¹æ˜¯æ²¡æœ‰åŠæ³•å¯è§çš„ï¼Œç»ˆç«¯ä¸‹ä¹Ÿä¸ä¼šè¿›è¡Œæ˜¾ç¤ºï¼Œä¾‹å¦‚ç”¨æˆ·æ–‡ä»¶ä¸‹ä¸‹çš„.m2</em></p>
<a id="more"></a>
<h1 id="ç»ˆç«¯æ‰§è¡Œå‘½ä»¤"><a href="#ç»ˆç«¯æ‰§è¡Œå‘½ä»¤" class="headerlink" title="ç»ˆç«¯æ‰§è¡Œå‘½ä»¤"></a>ç»ˆç«¯æ‰§è¡Œå‘½ä»¤</h1><h2 id="è®¾ç½®éšè—æ–‡ä»¶å¯è§"><a href="#è®¾ç½®éšè—æ–‡ä»¶å¯è§" class="headerlink" title="è®¾ç½®éšè—æ–‡ä»¶å¯è§"></a>è®¾ç½®éšè—æ–‡ä»¶å¯è§</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ defaults write com.apple.finder AppleShowAllFiles TRUE</span><br></pre></td></tr></table></figure>
<h2 id="è®¾ç½®éšè—æ–‡ä»¶ä¸å¯è§"><a href="#è®¾ç½®éšè—æ–‡ä»¶ä¸å¯è§" class="headerlink" title="è®¾ç½®éšè—æ–‡ä»¶ä¸å¯è§"></a>è®¾ç½®éšè—æ–‡ä»¶ä¸å¯è§</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ defaults write com.apple.finder AppleShowAllFiles FALSE</span><br></pre></td></tr></table></figure>
<h1 id="é‡å¯Finderç”Ÿæ•ˆ"><a href="#é‡å¯Finderç”Ÿæ•ˆ" class="headerlink" title="é‡å¯Finderç”Ÿæ•ˆ"></a>é‡å¯Finderç”Ÿæ•ˆ</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ killall Finder</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS3æ–°ç‰¹æ€§</title>
    <url>/2019/03/07/CSS3%E6%96%B0%E7%89%B9%E6%80%A7/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="CSS3ã€æ§åˆ¶æ ·å¼ï¼Œç½‘é¡µå¸ƒå±€ã€‘"><a href="#CSS3ã€æ§åˆ¶æ ·å¼ï¼Œç½‘é¡µå¸ƒå±€ã€‘" class="headerlink" title="CSS3ã€æ§åˆ¶æ ·å¼ï¼Œç½‘é¡µå¸ƒå±€ã€‘"></a>CSS3ã€æ§åˆ¶æ ·å¼ï¼Œç½‘é¡µå¸ƒå±€ã€‘</h1><h2 id="CSS3ä¸­æ–°ç‰¹æ€§æ ·å¼ç¯‡"><a href="#CSS3ä¸­æ–°ç‰¹æ€§æ ·å¼ç¯‡" class="headerlink" title="CSS3ä¸­æ–°ç‰¹æ€§æ ·å¼ç¯‡"></a>CSS3ä¸­æ–°ç‰¹æ€§æ ·å¼ç¯‡</h2><a id="more"></a>
<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">background-origin</span>ï¼š   è§„å®šèƒŒæ™¯å›¾ç‰‡çš„å®šä½åŒºåŸŸã€‚</span><br><span class="line">    â˜ <span class="selector-tag">padding-box</span>    èƒŒæ™¯å›¾åƒç›¸å¯¹å†…è¾¹è·å®šä½ï¼ˆé»˜è®¤å€¼ï¼‰</span><br><span class="line">    â˜ <span class="selector-tag">border-box</span>     èƒŒæ™¯å›¾åƒç›¸å¯¹è¾¹æ¡†å®šä½ã€ä»¥è¾¹æ¡†å·¦ä¸Šè§’ä¸ºå‚ç…§è¿›è¡Œä½ç½®è®¾ç½®ã€‘</span><br><span class="line">    â˜ <span class="selector-tag">content-box</span>    èƒŒæ™¯å›¾åƒç›¸å¯¹å†…å®¹åŒºåŸŸå®šä½ã€ä»¥å†…å®¹åŒºåŸŸå·¦ä¸Šè§’ä¸ºå‚ç…§è¿›è¡Œä½ç½®è®¾ç½®ã€‘</span><br><span class="line"></span><br><span class="line">   å¤‡æ³¨ï¼š</span><br><span class="line">        1. é»˜è®¤ç›’å­çš„èƒŒæ™¯å›¾ç‰‡æ˜¯åœ¨ç›’å­çš„å†…è¾¹è·å·¦ä¸Šè§’å¯¹é½è®¾ç½®ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">background-clip</span>ï¼š     è§„å®šèƒŒæ™¯çš„ç»˜åˆ¶åŒºåŸŸã€‚</span><br><span class="line">    â˜ <span class="selector-tag">border-box</span>     èƒŒæ™¯è¢«è£åˆ‡åˆ°è¾¹æ¡†ç›’å­ä½ç½® ã€å°†èƒŒæ™¯å›¾ç‰‡åœ¨æ•´ä¸ªå®¹å™¨ä¸­æ˜¾ç¤ºã€‘</span><br><span class="line">    â˜ <span class="selector-tag">padding-box</span>    èƒŒæ™¯è¢«è£åˆ‡åˆ°å†…è¾¹è·åŒºåŸŸã€å°†èƒŒæ™¯å›¾ç‰‡åœ¨å†…è¾¹è·åŒºåŸŸï¼ˆåŒ…å«å†…å®¹åŒºåŸŸï¼‰æ˜¾ç¤ºã€‘</span><br><span class="line">    â˜ <span class="selector-tag">content-box</span>    èƒŒæ™¯è¢«è£åˆ‡åˆ°å†…å®¹åŒºåŸŸã€å°†èƒŒæ™¯å›¾ç‰‡åœ¨å†…å®¹åŒºåŸŸæ˜¾ç¤ºã€‘</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">background-size</span>ï¼š     è§„å®šèƒŒæ™¯å›¾ç‰‡çš„å°ºå¯¸ã€‚</span><br><span class="line">    â˜ <span class="selector-tag">cover</span></span><br><span class="line">    â˜ <span class="selector-tag">contain</span></span><br></pre></td></tr></table></figure>
<h3 id="è¾¹æ¡†"><a href="#è¾¹æ¡†" class="headerlink" title="è¾¹æ¡†"></a>è¾¹æ¡†</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">box-shadow</span>ï¼š      ç›’å­é˜´å½±</span><br><span class="line"><span class="selector-tag">border-radius</span>ï¼š   è¾¹æ¡†åœ†è§’</span><br><span class="line"><span class="selector-tag">border-image</span>:    è¾¹æ¡†å›¾ç‰‡</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">            <span class="comment">/* è®¾ç½®è¾¹æ¡†å›¾ç‰‡ */</span></span><br><span class="line">            <span class="selector-tag">border-image-source</span>: <span class="selector-tag">url</span>("2<span class="selector-class">.png</span>");</span><br><span class="line"></span><br><span class="line">            <span class="comment">/* è¾¹æ¡†å›¾ç‰‡è£åˆ‡ : ä¸éœ€è¦å¸¦å•ä½*/</span></span><br><span class="line">            <span class="selector-tag">border-image-slice</span>: 20;</span><br><span class="line"></span><br><span class="line">            <span class="comment">/* è®¾ç½®è¾¹æ¡†å›¾ç‰‡çš„å¹³é“ºæ–¹å¼ */</span></span><br><span class="line">            <span class="comment">/* border-image-repeat: stretch; */</span></span><br><span class="line">            <span class="selector-tag">border-image-repeat</span>: <span class="selector-tag">round</span>;</span><br><span class="line">           <span class="comment">/*  border-image-repeat: repeat; */</span></span><br><span class="line"></span><br><span class="line">           <span class="selector-tag">border-image-width</span>: 20<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure>
<h3 id="æ–‡æœ¬"><a href="#æ–‡æœ¬" class="headerlink" title="æ–‡æœ¬"></a>æ–‡æœ¬</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">â˜<span class="selector-tag">text-shadow</span>ï¼š è®¾ç½®æ–‡æœ¬é˜´å½±</span><br></pre></td></tr></table></figure>
<h2 id="CSS3æ–°ç‰¹æ€§ä¹‹é€‰æ‹©å™¨ç¯‡"><a href="#CSS3æ–°ç‰¹æ€§ä¹‹é€‰æ‹©å™¨ç¯‡" class="headerlink" title="CSS3æ–°ç‰¹æ€§ä¹‹é€‰æ‹©å™¨ç¯‡"></a>CSS3æ–°ç‰¹æ€§ä¹‹é€‰æ‹©å™¨ç¯‡</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">â˜ å±æ€§é€‰æ‹©å™¨ï¼š </span><br><span class="line">        <span class="selector-attr">[å±æ€§å=å€¼]</span> &#123;&#125;</span><br><span class="line">        <span class="selector-attr">[å±æ€§å]</span> &#123;&#125;       åŒ¹é…å¯¹åº”çš„å±æ€§å³å¯</span><br><span class="line">        <span class="selector-attr">[å±æ€§å^=å€¼]</span> &#123;&#125;    ä»¥å€¼å¼€å¤´</span><br><span class="line">        <span class="selector-attr">[å±æ€§å*=å€¼]</span> &#123;&#125;    åŒ…å«</span><br><span class="line">        <span class="selector-attr">[å±æ€§å$=å€¼]</span> &#123;&#125;    ä»¥å€¼ç»“æŸ</span><br><span class="line">    </span><br><span class="line">â˜ ç»“æ„ä¼ªç±»é€‰æ‹©å™¨ï¼š</span><br><span class="line">      <span class="selector-pseudo">:first-child</span> &#123;&#125;     é€‰ä¸­çˆ¶å…ƒç´ ä¸­ç¬¬ä¸€ä¸ªå­å…ƒç´ </span><br><span class="line">      <span class="selector-pseudo">:last-child</span> &#123;&#125;      é€‰ä¸­çˆ¶å…ƒç´ ä¸­æœ€åä¸€ä¸ªå­å…ƒç´ </span><br><span class="line">      <span class="selector-pseudo">:nth-child(n)</span> &#123;&#125;    é€‰ä¸­çˆ¶å…ƒç´ ä¸­æ­£æ•°ç¬¬<span class="selector-tag">n</span>ä¸ªå­å…ƒç´ </span><br><span class="line">      <span class="selector-pseudo">:nth-last-child(n)</span> &#123;&#125;    é€‰ä¸­çˆ¶å…ƒç´ ä¸­å€’æ•°ç¬¬<span class="selector-tag">n</span>ä¸ªå­å…ƒç´ </span><br><span class="line"></span><br><span class="line">      å¤‡æ³¨ï¼›</span><br><span class="line">         <span class="selector-tag">n</span> çš„å–å€¼å¤§äºç­‰äº0</span><br><span class="line">         <span class="selector-tag">n</span> å¯ä»¥è®¾ç½®é¢„å®šä¹‰çš„å€¼</span><br><span class="line">            <span class="selector-tag">odd</span><span class="selector-attr">[é€‰ä¸­å¥‡æ•°ä½ç½®çš„å…ƒç´ ]</span>  </span><br><span class="line">            <span class="selector-tag">even</span>ã€é€‰ä¸­å¶æ•°ä½ç½®çš„å…ƒç´ ã€‘</span><br><span class="line"></span><br><span class="line">         <span class="selector-tag">n</span> å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼š</span><br><span class="line">             <span class="selector-tag">an</span>+<span class="selector-tag">b</span>çš„æ ¼å¼</span><br><span class="line"></span><br><span class="line">â˜ å…¶ä»–é€‰æ‹©å™¨ï¼š</span><br><span class="line">    <span class="selector-pseudo">:target</span>          è¢«é”šé“¾æ¥æŒ‡å‘çš„æ—¶å€™ä¼šè§¦å‘è¯¥é€‰æ‹©å™¨</span><br><span class="line">    <span class="selector-pseudo">::selection</span>      å½“è¢«é¼ æ ‡é€‰ä¸­çš„æ—¶å€™çš„æ ·å¼</span><br><span class="line">    <span class="selector-pseudo">::first-line</span>     é€‰ä¸­ç¬¬ä¸€è¡Œ</span><br><span class="line">    <span class="selector-pseudo">::first-letter</span>   é€‰ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦</span><br></pre></td></tr></table></figure>
<h2 id="CSS3æ–°ç‰¹æ€§ä¹‹é¢œè‰²æ¸å˜"><a href="#CSS3æ–°ç‰¹æ€§ä¹‹é¢œè‰²æ¸å˜" class="headerlink" title="CSS3æ–°ç‰¹æ€§ä¹‹é¢œè‰²æ¸å˜"></a>CSS3æ–°ç‰¹æ€§ä¹‹é¢œè‰²æ¸å˜</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">â˜ çº¿æ€§æ¸å˜ï¼š</span><br><span class="line">       1. å¼€å§‹é¢œè‰²å’Œç»“æŸé¢œè‰²</span><br><span class="line">       2. æ¸å˜çš„æ–¹å‘</span><br><span class="line">       3. æ¸å˜çš„èŒƒå›´</span><br><span class="line"></span><br><span class="line">     <span class="selector-tag">background-image</span>:  <span class="selector-tag">linear-gradient</span>(</span><br><span class="line">              <span class="selector-tag">to</span> <span class="selector-tag">right</span>,</span><br><span class="line">              <span class="selector-tag">red</span>,</span><br><span class="line">              <span class="selector-tag">blue</span></span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">  å¤‡æ³¨ï¼š</span><br><span class="line">      è¡¨ç¤ºæ–¹å‘ï¼š</span><br><span class="line">           1. to + right | top | bottom | left </span><br><span class="line">           2. é€šè¿‡è§’åº¦è¡¨ç¤ºä¸€ä¸ªæ–¹å‘</span><br><span class="line">             0<span class="selector-tag">deg</span> <span class="selector-attr">[ä»ä¸‹å‘ä¸Šæ¸å˜]</span> </span><br><span class="line">             90<span class="selector-tag">deg</span>ã€ä»å·¦å‘å³ã€‘</span><br><span class="line"></span><br><span class="line">â˜ å¾„å‘æ¸å˜ï¼š</span><br><span class="line">         <span class="comment">/* å¾„å‘æ¸å˜ */</span></span><br><span class="line">          <span class="selector-tag">background-image</span>: <span class="selector-tag">radial-gradient</span>(</span><br><span class="line">               100<span class="selector-tag">px</span> <span class="selector-tag">at</span> <span class="selector-tag">center</span>,</span><br><span class="line">               <span class="selector-tag">red</span>,</span><br><span class="line">               <span class="selector-tag">blue</span></span><br><span class="line">          );</span><br></pre></td></tr></table></figure>
<h2 id="2Dè½¬æ¢"><a href="#2Dè½¬æ¢" class="headerlink" title="2Dè½¬æ¢"></a>2Dè½¬æ¢</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">â˜ ä½ç§»</span><br><span class="line">     <span class="selector-tag">transform</span>: <span class="selector-tag">translate</span>(100<span class="selector-tag">px</span>,100<span class="selector-tag">px</span>);</span><br><span class="line">      </span><br><span class="line">     å¤‡æ³¨ï¼š</span><br><span class="line">         ä½ç§»æ˜¯ç›¸å¯¹å…ƒç´ è‡ªèº«çš„ä½ç½®å‘ç”Ÿä½ç½®æ”¹å˜</span><br><span class="line"></span><br><span class="line">â˜ æ—‹è½¬</span><br><span class="line">      <span class="selector-tag">transform</span>: <span class="selector-tag">rotate</span>(60<span class="selector-tag">deg</span>);</span><br><span class="line">     å¤‡æ³¨ï¼š</span><br><span class="line">         å–å€¼ä¸ºè§’åº¦</span><br><span class="line">â˜ ç¼©æ”¾</span><br><span class="line">      <span class="selector-tag">transform</span>: <span class="selector-tag">scale</span>(0<span class="selector-class">.5</span>,1);</span><br><span class="line">      å¤‡æ³¨ï¼š</span><br><span class="line">           å–å€¼ä¸ºå€æ•°å…³ç³»ï¼Œç¼©å°å¤§äº0å°äº1ï¼Œæ”¾å¤§è®¾ç½®å¤§äº1</span><br><span class="line">  </span><br><span class="line">â˜ å€¾æ–œ</span><br><span class="line">     <span class="selector-tag">transform</span>: <span class="selector-tag">skew</span>(30<span class="selector-tag">deg</span>,30<span class="selector-tag">deg</span>);</span><br><span class="line">     å¤‡æ³¨ï¼š</span><br><span class="line">        ç¬¬ä¸€ä¸ªå€¼ä»£è¡¨æ²¿ç€<span class="selector-tag">x</span>è½´æ–¹å‘å€¾æ–œ</span><br><span class="line">        ç¬¬äºŒä¸ªå€¼ä»£è¡¨æ²¿ç€<span class="selector-tag">y</span>è½´æ–¹å‘å€¾æ–œ</span><br></pre></td></tr></table></figure>
<h2 id="3Dè½¬æ¢"><a href="#3Dè½¬æ¢" class="headerlink" title="3Dè½¬æ¢"></a>3Dè½¬æ¢</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">â˜ ä½ç§»</span><br><span class="line">  <span class="selector-tag">transform</span>: <span class="selector-tag">translateX</span>()  <span class="selector-tag">translateY</span>()   <span class="selector-tag">translateZ</span>()</span><br><span class="line"></span><br><span class="line">â˜ æ—‹è½¬</span><br><span class="line">   <span class="selector-tag">transform</span>: <span class="selector-tag">rotateX</span>(60<span class="selector-tag">deg</span>)  <span class="selector-tag">rotateY</span>(60<span class="selector-tag">deg</span>)  <span class="selector-tag">rotateZ</span>(60<span class="selector-tag">deg</span>);</span><br><span class="line"></span><br><span class="line">â˜ ç¼©æ”¾</span><br><span class="line">    <span class="selector-tag">transform</span>: <span class="selector-tag">scaleX</span>(0<span class="selector-class">.5</span>)  <span class="selector-tag">scaleY</span>(1)  <span class="selector-tag">scaleZ</span>(1);</span><br><span class="line">â˜ å€¾æ–œ</span><br><span class="line">    <span class="selector-tag">transform</span>: <span class="selector-tag">skewX</span>(30<span class="selector-tag">deg</span>) <span class="selector-tag">skewY</span>();</span><br><span class="line"></span><br><span class="line">â˜ <span class="selector-tag">transform-style</span>: <span class="selector-tag">preserve-3d</span>;</span><br><span class="line">   å°†å¹³é¢å›¾å½¢è½¬æ¢ä¸ºç«‹ä½“å›¾å½¢</span><br></pre></td></tr></table></figure>
<h2 id="CSS3æ–°ç‰¹æ€§ä¹‹åŠ¨ç”»ç¯‡"><a href="#CSS3æ–°ç‰¹æ€§ä¹‹åŠ¨ç”»ç¯‡" class="headerlink" title="CSS3æ–°ç‰¹æ€§ä¹‹åŠ¨ç”»ç¯‡"></a>CSS3æ–°ç‰¹æ€§ä¹‹åŠ¨ç”»ç¯‡</h2><h3 id="è¿‡æ¸¡"><a href="#è¿‡æ¸¡" class="headerlink" title="è¿‡æ¸¡"></a>è¿‡æ¸¡</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">https://www.cnblogs.com/afighter/p/5731293.html</span><br><span class="line"></span><br><span class="line">è¡¥é—´åŠ¨ç”»</span><br><span class="line"></span><br><span class="line">           <span class="comment">/* è®¾ç½®å“ªäº›å±æ€§è¦å‚ä¸åˆ°è¿‡æ¸¡åŠ¨ç”»æ•ˆæœä¸­ï¼š all */</span></span><br><span class="line">           <span class="selector-tag">transition-property</span>: <span class="selector-tag">all</span>;</span><br><span class="line"></span><br><span class="line">           <span class="comment">/* è®¾ç½®è¿‡æ¸¡æ‰§è¡Œæ—¶é—´ */</span></span><br><span class="line">           </span><br><span class="line">           <span class="selector-tag">transition-duration</span>: 1<span class="selector-tag">s</span>;</span><br><span class="line"></span><br><span class="line">           <span class="comment">/* è®¾ç½®è¿‡æ¸¡å»¶æ—¶æ‰§è¡Œæ—¶é—´ */</span></span><br><span class="line">           <span class="selector-tag">transition-delay</span>: 1<span class="selector-tag">s</span>;</span><br><span class="line"></span><br><span class="line">           <span class="comment">/* è®¾ç½®è¿‡æ¸¡çš„é€Ÿåº¦ç±»å‹ */</span></span><br><span class="line"></span><br><span class="line">           <span class="selector-tag">transition-timing-function</span>: <span class="selector-tag">linear</span>;</span><br></pre></td></tr></table></figure>
<h3 id="åŠ¨ç”»"><a href="#åŠ¨ç”»" class="headerlink" title="åŠ¨ç”»"></a>åŠ¨ç”»</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="comment">/* 1å®šä¹‰åŠ¨ç”»é›† */</span></span><br><span class="line">    @<span class="keyword">keyframes</span>  rotate &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* å®šä¹‰å¼€å§‹çŠ¶æ€  0%*/</span></span><br><span class="line">        <span class="selector-tag">from</span> &#123;</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(0deg);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* ç»“æŸçŠ¶æ€ 100%*/</span></span><br><span class="line">        <span class="selector-tag">to</span> &#123;</span><br><span class="line">           <span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(360deg);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼š</span><br><span class="line">     1. å¦‚æœè®¾ç½®åŠ¨ç”»é›†ä½¿ç”¨çš„æ˜¯ç™¾åˆ†æ¯”ï¼Œé‚£ä¹ˆè®°ä½ç™¾åˆ†æ¯”æ˜¯ç›¸å¯¹æ•´ä¸ªåŠ¨ç”»æ‰§è¡Œæ—¶é—´çš„ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="CSS3æ–°ç‰¹æ€§ä¹‹ç½‘é¡µå¸ƒå±€ç¯‡"><a href="#CSS3æ–°ç‰¹æ€§ä¹‹ç½‘é¡µå¸ƒå±€ç¯‡" class="headerlink" title="CSS3æ–°ç‰¹æ€§ä¹‹ç½‘é¡µå¸ƒå±€ç¯‡"></a>CSS3æ–°ç‰¹æ€§ä¹‹ç½‘é¡µå¸ƒå±€ç¯‡</h2><h3 id="ä¼¸ç¼©å¸ƒå±€æˆ–è€…å¼¹æ€§å¸ƒå±€ã€å“åº”å¼å¸ƒå±€ã€‘"><a href="#ä¼¸ç¼©å¸ƒå±€æˆ–è€…å¼¹æ€§å¸ƒå±€ã€å“åº”å¼å¸ƒå±€ã€‘" class="headerlink" title="ä¼¸ç¼©å¸ƒå±€æˆ–è€…å¼¹æ€§å¸ƒå±€ã€å“åº”å¼å¸ƒå±€ã€‘"></a>ä¼¸ç¼©å¸ƒå±€æˆ–è€…å¼¹æ€§å¸ƒå±€ã€å“åº”å¼å¸ƒå±€ã€‘</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">â˜ è®¾ç½®çˆ¶å…ƒç´ ä¸ºä¼¸ç¼©ç›’å­ã€ç›´æ¥çˆ¶å…ƒç´ ã€‘</span><br><span class="line">      <span class="selector-tag">display</span>ï¼š <span class="selector-tag">flex</span></span><br><span class="line">  </span><br><span class="line">    ä¸ºä»€ä¹ˆåœ¨ä¼¸ç¼©ç›’å­ä¸­ï¼Œå­å…ƒç´ ä¼šåœ¨ä¸€è¡Œä¸Šæ˜¾ç¤ºï¼Ÿ</span><br><span class="line">           1. å­å…ƒç´ æ˜¯æŒ‰ç…§ä¼¸ç¼©ç›’å­ä¸­ä¸»è½´æ–¹å‘æ˜¾ç¤º</span><br><span class="line">           2. åªæœ‰ä¼¸ç¼©ç›’å­æ‰æœ‰ä¸»è½´å’Œä¾§è½´</span><br><span class="line">           3. ä¸»è½´ï¼š é»˜è®¤æ°´å¹³ä»å·¦å‘å³æ˜¾ç¤º</span><br><span class="line">           4ã€‚ ä¾§è½´ï¼š å§‹ç»ˆè¦å‚ç›´äºä¸»è½´</span><br><span class="line"></span><br><span class="line">â˜ è®¾ç½®ä¼¸ç¼©ç›’å­ä¸»è½´æ–¹å‘ï¼ˆ<span class="selector-tag">flex-direction</span>ï¼‰</span><br><span class="line">          <span class="selector-tag">flex-direction</span>: <span class="selector-tag">row</span>; ã€é»˜è®¤å€¼ã€‘</span><br><span class="line">          <span class="selector-tag">flex-direction</span>: <span class="selector-tag">row-reverse</span>;</span><br><span class="line">          <span class="selector-tag">flex-direction</span>: <span class="selector-tag">column</span>;</span><br><span class="line">          <span class="selector-tag">flex-direction</span>: <span class="selector-tag">column-reverse</span>;</span><br><span class="line">â˜ è®¾ç½®å…ƒç´ åœ¨ä¸»è½´çš„å¯¹é½æ–¹å¼( <span class="selector-tag">justify-content</span>)</span><br><span class="line">      <span class="comment">/* è®¾ç½®å­å…ƒç´ åœ¨ä¸»è½´æ–¹å‘çš„å¯¹é½æ–¹å¼ */</span></span><br><span class="line">          <span class="selector-tag">justify-content</span>: <span class="selector-tag">flex-start</span>;</span><br><span class="line">          <span class="selector-tag">justify-content</span>: <span class="selector-tag">flex-end</span>;</span><br><span class="line">          <span class="selector-tag">justify-content</span>: <span class="selector-tag">center</span>;</span><br><span class="line">          <span class="selector-tag">justify-content</span>: <span class="selector-tag">space-between</span>;</span><br><span class="line">          <span class="selector-tag">justify-content</span>: <span class="selector-tag">space-around</span>;</span><br><span class="line"></span><br><span class="line">â˜ è®¾ç½®å…ƒç´ åœ¨ä¾§è½´çš„å¯¹é½æ–¹å¼ ï¼ˆ<span class="selector-tag">align-items</span>ï¼‰</span><br><span class="line">          <span class="selector-tag">align-items</span>: <span class="selector-tag">flex-start</span>;</span><br><span class="line">          <span class="selector-tag">align-items</span>: <span class="selector-tag">flex-end</span>;</span><br><span class="line">          <span class="selector-tag">align-items</span>: <span class="selector-tag">center</span>;</span><br><span class="line"></span><br><span class="line">          <span class="comment">/* é»˜è®¤å€¼ */</span></span><br><span class="line">          <span class="selector-tag">align-items</span>: <span class="selector-tag">stretch</span>;</span><br><span class="line"></span><br><span class="line">â˜ è®¾ç½®å…ƒç´ æ˜¯å¦æ¢è¡Œæ˜¾ç¤ºï¼ˆ<span class="selector-tag">flex-wrap</span>ï¼‰</span><br><span class="line">        1. åœ¨ä¼¸ç¼©ç›’å­ä¸­æ‰€æœ‰çš„å…ƒç´ é»˜è®¤éƒ½ä¼šåœ¨ä¸€è¡Œä¸Šæ˜¾ç¤º</span><br><span class="line">        2. å¦‚æœå¸Œæœ›æ¢è¡Œï¼š</span><br><span class="line">          flex-wrap: wrap | nowrap;</span><br><span class="line"></span><br><span class="line">â˜ è®¾ç½®å…ƒç´ æ¢è¡Œåçš„å¯¹é½æ–¹å¼ï¼ˆ <span class="selector-tag">align-content</span>ï¼‰</span><br><span class="line">          <span class="selector-tag">align-content</span>: <span class="selector-tag">flex-start</span>;</span><br><span class="line">          <span class="selector-tag">align-content</span>: <span class="selector-tag">flex-end</span>;</span><br><span class="line">          <span class="selector-tag">align-content</span>: <span class="selector-tag">center</span>;</span><br><span class="line">          <span class="selector-tag">align-content</span>: <span class="selector-tag">space-around</span>;</span><br><span class="line">          <span class="selector-tag">align-content</span>: <span class="selector-tag">space-between</span>;</span><br><span class="line">          <span class="comment">/* æ¢è¡Œåçš„é»˜è®¤å€¼ */</span></span><br><span class="line">          <span class="selector-tag">align-content</span>: <span class="selector-tag">stretch</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>CSS</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSä¸­JSONåºåˆ—åŒ–ä¸ååºåˆ—åŒ–</title>
    <url>/2019/03/06/IOS%E4%B8%ADJSON%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="åºåˆ—åŒ–ä¸ååºåˆ—åŒ–"><a href="#åºåˆ—åŒ–ä¸ååºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–ä¸ååºåˆ—åŒ–"></a>åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</h1><p>åºåˆ—åŒ–ï¼š å°†æ•°æ®ç»“æ„æˆ–å¯¹è±¡è½¬æ¢æˆäºŒè¿›åˆ¶ä¸²çš„è¿‡ç¨‹ã€‚<br>ååºåˆ—åŒ–ï¼šå°†åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­æ‰€ç”Ÿæˆçš„äºŒè¿›åˆ¶ä¸²è½¬æ¢æˆæ•°æ®ç»“æ„æˆ–è€…å¯¹è±¡çš„è¿‡ç¨‹ã€‚</p>
<a id="more"></a>
<h1 id="NSJSONSerialization"><a href="#NSJSONSerialization" class="headerlink" title="NSJSONSerialization"></a>NSJSONSerialization</h1><h2 id="json-gt-oc"><a href="#json-gt-oc" class="headerlink" title="json-&gt;oc"></a>json-&gt;oc</h2><p>ä¸€æ®µæœåŠ¡å™¨çš„jsonæ•°æ®</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>:<span class="string">"hello"</span>,</span><br><span class="line">    <span class="attr">"code"</span>:<span class="number">200</span>,</span><br><span class="line">    <span class="attr">"msg"</span>:<span class="string">"success"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>äºŒè¿›åˆ¶æ•°æ®è½¬json,æ–¹æ³•<br><figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  * ç¬¬ä¸€ä¸ªå‚æ•°ï¼šjsonçš„äºŒè¿›åˆ¶æ•°æ®</span></span><br><span class="line"><span class="comment">  * ç¬¬äºŒä¸ªå‚æ•°ï¼š</span></span><br><span class="line"><span class="comment">  * NSJSONReadingMutableContainers = (1UL &lt;&lt; 0),å¾—åˆ°OCå¯¹è±¡æ˜¯å¯å˜çš„</span></span><br><span class="line"><span class="comment">  * NSJSONReadingMutableLeaves = (1UL &lt;&lt; 1), å­—å…¸å’Œæ•°ç»„ä¸­çš„å­—ç¬¦ä¸²éƒ½æ˜¯å¯å˜çš„ï¼ŒiOS7ä»¥åå‡ºç°å¾ˆå¤šé—®é¢˜ï¼Œä¸€èˆ¬ä¸ä¼šç”¨åˆ°</span></span><br><span class="line"><span class="comment">  * NSJSONReadingAllowFragments = (1UL &lt;&lt; 2) æ—¢ä¸æ˜¯å­—å…¸ä¹Ÿä¸æ˜¯æ•°ç»„ï¼Œåˆ™å¿…é¡»ä½¿ç”¨è¯¥æšä¸¾å€¼ å¦‚æœè¿”å›æ•°æ®ä¸º@â€œ\"hahahahaha\"â€</span></span><br><span class="line"><span class="comment">  * ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šé”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">    <span class="built_in">NSDictionary</span> *dic = [<span class="built_in">NSJSONSerialization</span> JSONObjectWithData:data options:kNilOptions error:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure></p>
<p>ä¸¾ä¾‹</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> URLWithString:<span class="string">@"http://127.0.0.1:8000/hello/name"</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSURLRequest</span> *request = [<span class="built_in">NSURLRequest</span> requestWithURL:url];</span><br><span class="line">    [<span class="built_in">NSURLConnection</span> sendAsynchronousRequest:request queue:[<span class="built_in">NSOperationQueue</span> mainQueue] completionHandler:^(<span class="built_in">NSURLResponse</span> * _Nullable response, <span class="built_in">NSData</span> * _Nullable data, <span class="built_in">NSError</span> * _Nullable connectionError) &#123;</span><br><span class="line">        <span class="keyword">if</span> (connectionError) &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, connectionError);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">NSHTTPURLResponse</span> *res = (<span class="built_in">NSHTTPURLResponse</span> *) response;</span><br><span class="line">        <span class="keyword">if</span> (res.statusCode == <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="comment">//å¼€å§‹è§£æjson</span></span><br><span class="line">            <span class="built_in">NSError</span> *error = <span class="literal">nil</span>;</span><br><span class="line">            <span class="keyword">id</span> json = [<span class="built_in">NSJSONSerialization</span> JSONObjectWithData:data options:<span class="built_in">NSJSONReadingMutableContainers</span> error:&amp;error];</span><br><span class="line">            <span class="keyword">if</span> (error) &#123;</span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, error);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, json);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"æœåŠ¡å™¨é”™è¯¯"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœ<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2019-03-06 17:44:34.480939+0800 JsonDemo[5349:107008] &#123;</span><br><span class="line">    code = 200;</span><br><span class="line">    data = hello;</span><br><span class="line">    msg = success;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="oc-gt-json"><a href="#oc-gt-json" class="headerlink" title="oc-&gt;json"></a>oc-&gt;json</h2><p>ä¸¾ä¾‹<br><figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* æ³¨æ„ï¼šå¹¶ä¸æ˜¯æ‰€æœ‰çš„OCå¯¹è±¡éƒ½å¯ä»¥è½¬åŒ–ä¸ºjson ä¾‹å¦‚å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     * é¡¶å±‚å¿…é¡»æ˜¯NSArrayæˆ–è€…NSDictionnary</span></span><br><span class="line"><span class="comment">     * æ‰€æœ‰çš„å…ƒç´ å¿…é¡»æ˜¯ NSString, NSNumber, NSArray, NSDictionary, or NSNull</span></span><br><span class="line"><span class="comment">     * å­—å…¸ä¸­æ‰€æœ‰çš„keyå¿…é¡»æ˜¯NSStringsç±»å‹çš„</span></span><br><span class="line"><span class="comment">     * NSNumbers ä¸èƒ½æ˜¯æ— ç©·å¤§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">// 1ã€æä¾›è½¬åŒ–çš„OCå­—å…¸</span></span><br><span class="line">    <span class="built_in">NSDictionary</span> *dic = @&#123;</span><br><span class="line">                          <span class="string">@"code"</span>:@<span class="number">200</span>,</span><br><span class="line">                          <span class="string">@"data"</span>:[<span class="built_in">NSNull</span> null],</span><br><span class="line">                          <span class="string">@"msg"</span>:<span class="string">@"oh my json"</span></span><br><span class="line">                          &#125;;</span><br><span class="line">    <span class="comment">// 2ã€åˆ¤æ–­OCå¯¹è±¡æ˜¯å¦å¯ä»¥è½¬æ¢ä¸ºjsonå¯¹è±¡</span></span><br><span class="line">    <span class="built_in">BOOL</span> isVaild = [<span class="built_in">NSJSONSerialization</span> isValidJSONObject:dic];</span><br><span class="line">    <span class="keyword">if</span> (isVaild) &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * ç¬¬ä¸€ä¸ªå‚æ•°ï¼šéœ€è¦åºåˆ—åŒ–çš„æ•°æ®</span></span><br><span class="line"><span class="comment">         * ç¬¬äºŒä¸ªå‚æ•°ï¼šå¦‚æœæ·»åŠ å°±è¾“å‡ºæ’ç‰ˆç¾è§‚æ•ˆæœ å¦‚æœä¸æ·»åŠ æŒ‰ç…§é»˜è®¤è¾“å‡º</span></span><br><span class="line"><span class="comment">         *        NSJSONWritingPrettyPrinted = (1UL &lt;&lt; 0)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="built_in">NSData</span> *data = [<span class="built_in">NSJSONSerialization</span> dataWithJSONObject:dic options:<span class="built_in">NSJSONWritingPrettyPrinted</span> error:<span class="literal">nil</span>];</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[[<span class="built_in">NSString</span> alloc] initWithData:data encoding:<span class="built_in">NSUTF8StringEncoding</span>]);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"è¯¥å¯¹è±¡æ— æ³•è½¬æ¢"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>æ§åˆ¶å°è¾“å‡º<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2019-03-06 17:57:27.734633+0800 JsonDemo[6202:131086] &#123;</span><br><span class="line">  &quot;msg&quot; : &quot;oh my json&quot;,</span><br><span class="line">  &quot;data&quot; : null,</span><br><span class="line">  &quot;code&quot; : 200</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="MJExtension"><a href="#MJExtension" class="headerlink" title="MJExtension"></a>MJExtension</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="CocoaPods"><a href="#CocoaPods" class="headerlink" title="CocoaPods"></a>CocoaPods</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pod <span class="string">'MJExtension'</span></span><br></pre></td></tr></table></figure>
<h3 id="æ‰‹åŠ¨å¯¼å…¥"><a href="#æ‰‹åŠ¨å¯¼å…¥" class="headerlink" title="æ‰‹åŠ¨å¯¼å…¥"></a>æ‰‹åŠ¨å¯¼å…¥</h3><p>github<a href="https://github.com/CoderMJLee/MJExtension" target="_blank" rel="noopener">é“¾æ¥</a></p>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="å­—å…¸è½¬æ¨¡å‹"><a href="#å­—å…¸è½¬æ¨¡å‹" class="headerlink" title="å­—å…¸è½¬æ¨¡å‹"></a>å­—å…¸è½¬æ¨¡å‹</h3><p>æ¨¡å‹USER<br><figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">User</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>)<span class="built_in">NSString</span> *name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>)<span class="built_in">NSString</span> *zhiye;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>)<span class="built_in">NSString</span> *money;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSDictionary</span> *dict = @&#123;</span><br><span class="line">                           <span class="string">@"name"</span>:<span class="string">@"ycy"</span>,</span><br><span class="line">                           <span class="string">@"zhiye"</span>:<span class="string">@"ç¨‹åºå‘˜"</span>,</span><br><span class="line">                           <span class="string">@"money"</span>:<span class="string">@"-4000"</span></span><br><span class="line">                           &#125;;</span><br><span class="line">    User *user = [User mj_objectWithKeyValues:dict];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,user.name);</span><br></pre></td></tr></table></figure>
<h3 id="JSONStringè½¬æ¨¡å‹"><a href="#JSONStringè½¬æ¨¡å‹" class="headerlink" title="JSONStringè½¬æ¨¡å‹"></a>JSONStringè½¬æ¨¡å‹</h3><figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.Define a JSONString</span></span><br><span class="line"><span class="built_in">NSString</span> *jsonString = <span class="string">@"&#123;\"name\":\"Jack\", \"icon\":\"lufy.png\", \"age\":20&#125;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.JSONString -&gt; User</span></span><br><span class="line">User *user = [User mj_objectWithKeyValues:jsonString];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.Print user's properties</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"name=%@, icon=%@, age=%d"</span>, user.name, user.icon, user.age);</span><br><span class="line"><span class="comment">// name=Jack, icon=lufy.png, age=20</span></span><br></pre></td></tr></table></figure>
<h3 id="more"><a href="#more" class="headerlink" title="more"></a>more</h3><p>æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å³å¯<a href="https://github.com/CoderMJLee/MJExtension" target="_blank" rel="noopener">é“¾æ¥</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>IOS9ä»¥ä¸Šä¸­çš„ATSé—®é¢˜</title>
    <url>/2019/03/06/IOS9%E4%BB%A5%E4%B8%8A%E4%B8%AD%E7%9A%84ATS%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>WWDC 15 æå‡ºçš„ <code>ATS (App Transport Security)</code> æ˜¯ Apple åœ¨æ¨è¿›ç½‘ç»œé€šè®¯å®‰å…¨çš„ä¸€ä¸ªé‡è¦æ–¹å¼ã€‚åœ¨ iOS 9 å’Œ OS X 10.11 ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹é HTTPS çš„ç½‘ç»œè®¿é—®æ˜¯è¢«ç¦æ­¢çš„ã€‚</p>
<a id="more"></a>
<p>ä½œä¸ºå‚è€ƒï¼Œè¿™é‡Œå°†æœ‰æ•ˆçš„ <code>NSAppTransportSecurity</code> å­—å…¸ç»“æ„</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSAppTransportSecurity</span> : Dictionary &#123;</span><br><span class="line">    <span class="built_in">NSAllowsArbitraryLoads</span> : Boolean</span><br><span class="line">    <span class="built_in">NSAllowsArbitraryLoadsForMedia</span> : Boolean</span><br><span class="line">    <span class="built_in">NSAllowsArbitraryLoadsInWebContent</span> : Boolean</span><br><span class="line">    <span class="built_in">NSAllowsLocalNetworking</span> : Boolean</span><br><span class="line">    <span class="built_in">NSExceptionDomains</span> : Dictionary &#123;</span><br><span class="line">        &lt;domain-name-string&gt; : Dictionary &#123;</span><br><span class="line">            <span class="built_in">NSIncludesSubdomains</span> : Boolean</span><br><span class="line">            <span class="built_in">NSExceptionAllowsInsecureHTTPLoads</span> : Boolean</span><br><span class="line">            <span class="built_in">NSExceptionMinimumTLSVersion</span> : String</span><br><span class="line">            <span class="built_in">NSExceptionRequiresForwardSecrecy</span> : Boolean   <span class="comment">// Default value is YES</span></span><br><span class="line">            <span class="built_in">NSRequiresCertificateTransparency</span> : Boolean</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ATSè®¾å®šçš„å‚ç…§è¡¨æ ¼</p>
<p><img src="ats.png" alt></p>
<p>å¦‚æœç½‘ç«™å†…æ²¡æœ‰å¯ç”¨httpsï¼Œå¦‚ä½•å…³é—­ï¼Œåœ¨<code>info.plist</code>æ–‡ä»¶ä¸­åŠ å…¥<br>source codeä¸‹<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">key</span>&gt;</span>NSAppTransportSecurity<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>NSAllowsArbitraryLoads<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">true</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>plistä¸‹<br>æ·»åŠ <code>NSAppTransportSecurity</code>å­—å…¸-&gt;å¹¶æ·»åŠ é”®å€¼å¯¹<code>NSAllowsArbitraryLoads</code>=<code>YES</code>æ¥ç¦ç”¨ATS</p>
<h1 id="å‚ç…§é“¾æ¥"><a href="#å‚ç…§é“¾æ¥" class="headerlink" title="å‚ç…§é“¾æ¥"></a>å‚ç…§é“¾æ¥</h1><p><a href="https://onevcat.com/2016/06/ios-10-ats/" target="_blank" rel="noopener">https://onevcat.com/2016/06/ios-10-ats/</a></p>
<p><a href="https://stackoverflow.com/questions/31254725/transport-security-has-blocked-a-cleartext-http" target="_blank" rel="noopener">https://stackoverflow.com/questions/31254725/transport-security-has-blocked-a-cleartext-http</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSæ¨¡æ‹Ÿå™¨æˆªå›¾/å½•åˆ¶å±å¹•</title>
    <url>/2019/03/06/IOS%E6%A8%A1%E6%8B%9F%E5%99%A8%E6%88%AA%E5%9B%BE-%E5%BD%95%E5%88%B6%E5%B1%8F%E5%B9%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="æˆªå›¾"><a href="#æˆªå›¾" class="headerlink" title="æˆªå›¾"></a>æˆªå›¾</h1><a id="more"></a>
<p>iOS çš„æ¨¡æ‹Ÿå™¨æˆªå›¾ï¼ŒæŒ‰ <code>Command + S</code>æˆ–è€…é€šè¿‡ <code>File</code> èœå•éƒ½å¯ä»¥å®Œæˆã€‚</p>
<h1 id="å½•åˆ¶å±å¹•"><a href="#å½•åˆ¶å±å¹•" class="headerlink" title="å½•åˆ¶å±å¹•"></a>å½•åˆ¶å±å¹•</h1><p>ç»ˆç«¯ä¸‹è¿è¡Œè¯¥å‘½ä»¤ï¼Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">xcrun simctl io booted recordVideo &lt;filename&gt;.&lt;extension&gt;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œå‘½ä»¤åæ²¡æœ‰æŠ¥é”™åˆ™å·²ç»å¼€å§‹å½•åˆ¶å±å¹•äº†ï¼Œå¦‚æœæƒ³è¦åœæ­¢åˆ™ç›´æ¥<code>Ctrl + C</code> åœæ­¢ç»“æŸå‘½ä»¤å³å¯ã€‚é»˜è®¤è§†é¢‘ä¼šä¿å­˜åœ¨ç»ˆç«¯çš„å½“å‰ç›®å½•ä¸‹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æŒ‡å®šå½“å‰ç›®å½•ã€‚</p>
<h2 id="xcrun-unable-to-find-simctlè§£å†³æ–¹æ³•"><a href="#xcrun-unable-to-find-simctlè§£å†³æ–¹æ³•" class="headerlink" title="xcrun unable to find simctlè§£å†³æ–¹æ³•"></a>xcrun unable to find simctlè§£å†³æ–¹æ³•</h2><p>å¦‚æœå‡ºç°å‘½ä»¤æ— æ³•æ‰§è¡Œå¹¶æŠ¥å‡ºè¿™ä¸ªé”™è¯¯<br><code>xcrun: error: unable to find utility &quot;simctl&quot;, not a developer tool or in PATH</code></p>
<p>ä¿®æ”¹ä¸€ä¸‹æ‰“å¼€<code>Xcode</code> &gt; <code>Preferences</code> &gt; <code>Locations</code> æ›´æ”¹ä¸€ä¸‹ <code>Command Line Tools</code>é€‰é¡¹å°±å¯ä»¥äº†,å¦‚å›¾</p>
<p><img src="setting.png" alt></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>Android P/9.0 httpç½‘ç»œè¯·æ±‚å¼‚å¸¸é—®é¢˜</title>
    <url>/2019/03/06/Android-P-9-0-http%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%BC%82%E5%B8%B8%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><em>ä½¿ç”¨Android Pç³»ç»Ÿæ—¶ï¼Œappä½¿ç”¨httpè¯·æ±‚å‡ºç°å¼‚å¸¸ã€‚</em></p>
<a id="more"></a>
<h1 id="å¼‚å¸¸åŸå› "><a href="#å¼‚å¸¸åŸå› " class="headerlink" title="å¼‚å¸¸åŸå› "></a>å¼‚å¸¸åŸå› </h1><blockquote>
<p>Googleè¡¨ç¤ºï¼Œä¸ºä¿è¯ç”¨æˆ·æ•°æ®å’Œè®¾å¤‡çš„å®‰å…¨ï¼Œé’ˆå¯¹ä¸‹ä¸€ä»£ Android ç³»ç»Ÿ(Android P)<br>çš„åº”ç”¨ç¨‹åºï¼Œå°†è¦æ±‚é»˜è®¤ä½¿ç”¨åŠ å¯†è¿æ¥ï¼Œè¿™æ„å‘³ç€ Android P å°†ç¦æ­¢ App<br>ä½¿ç”¨æ‰€æœ‰æœªåŠ å¯†çš„è¿æ¥ï¼Œå› æ­¤è¿è¡Œ Android P<br>ç³»ç»Ÿçš„å®‰å“è®¾å¤‡æ— è®ºæ˜¯æ¥æ”¶æˆ–è€…å‘é€æµé‡ï¼Œæœªæ¥éƒ½ä¸èƒ½æ˜ç ä¼ è¾“ï¼Œéœ€è¦ä½¿ç”¨ä¸‹ä¸€ä»£(Transport Layer<br>Security)ä¼ è¾“å±‚å®‰å…¨åè®®ï¼Œè€Œ Android Nougat å’Œ Oreo åˆ™ä¸å—å½±å“ã€‚</p>
</blockquote>
<p>å› æ­¤åœ¨<code>Android P</code>ä¸­ä½¿ç”¨<code>HttpUrlConnection</code>æ—¶ä¼šæŠ¥å‡ºæ¬¡å¼‚å¸¸</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">W/System.err: java.io.IOException: Cleartext HTTP traffic to **** not permitted</span><br></pre></td></tr></table></figure>
<p>è€Œä½¿ç”¨OKHttpæ—¶ï¼ŒåŒæ ·ä¹Ÿä¼šæŠ¥å‡ºå¼‚å¸¸</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">java.net.UnknownServiceException: CLEARTEXT communication ** not permitted by network security policy</span><br></pre></td></tr></table></figure>
<p>åœ¨Android Pç³»ç»Ÿçš„è®¾å¤‡ä¸Šï¼Œå¦‚æœåº”ç”¨ä½¿ç”¨çš„æ˜¯éåŠ å¯†çš„æ˜æ–‡æµé‡çš„httpç½‘ç»œè¯·æ±‚ï¼Œåˆ™ä¼šå¯¼è‡´è¯¥åº”ç”¨æ— æ³•è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œhttpsåˆ™ä¸ä¼šå—å½±å“ï¼ŒåŒæ ·åœ°ï¼Œå¦‚æœåº”ç”¨åµŒå¥—äº†webviewï¼Œwebviewä¹Ÿåªèƒ½ä½¿ç”¨httpsè¯·æ±‚ã€‚<br>æœ‰äººè®¤ä¸º Android P ä¸Šæ‰€æœ‰çš„ App éƒ½éœ€è¦ä½¿ç”¨ TLS åŠ å¯†ä¼šé™ä½ä¸Šç½‘ä½“éªŒï¼Œäº‹å®ä¸Šè¿™æ˜¯ä¸€ç§è¯¯è§£ï¼Œè‡³äº App å¯¹äºå°‘æ•°æ—§æœåŠ¡å™¨çš„è¿æ¥å¦‚æœéè¦ä½¿ç”¨æ˜ç ä¼ è¾“ï¼Œå¼€å‘è€…éœ€è¦æ›´æ”¹ App çš„ç½‘ç»œå®‰å…¨é…ç½®ä»¥å…è®¸æ­¤ç±»è¿æ¥ã€‚</p>
<h1 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h1><ul>
<li><p>APPå†…æ‰€æœ‰è¯·æ±‚æ›´æ”¹ä¸ºHttps</p>
</li>
<li><p>å°†targetSdkVersionæ”¹ä¸º27ä»¥ä¸‹</p>
</li>
<li><p>å¼€å¯/å…è®¸httpè¯·æ±‚</p>
<p><strong>æ–¹æ³•ä¸€</strong></p>
<p>åœ¨<code>res</code>ä¸‹æ–°å¢ä¸€ä¸ª<code>xml</code>ç›®å½•ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªåä¸ºï¼š<code>network_security_config.xml</code> æ–‡ä»¶ï¼ˆåå­—è‡ªå®šï¼‰ ï¼Œå†…å®¹å¦‚ä¸‹ï¼Œå¤§æ¦‚æ„æ€å°±æ˜¯å…è®¸å¼€å¯httpè¯·æ±‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">network-security-config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">base-config</span> <span class="attr">cleartextTrafficPermitted</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">network-security-config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨<code>AndroidManifest.xml</code>æ–‡ä»¶ä¸­çš„Applicationæ ‡ç­¾ä¸‹å¢åŠ ä¸€è¡Œå±æ€§</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:networkSecurityConfig</span>=<span class="string">"@xml/network_security_config"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æ–¹æ³•äºŒ</strong></p>
<p>åœ¨æ¸…å•æ–‡ä»¶ä¸­åŠ å…¥ <strong>android:usesCleartextTraffic=â€trueâ€</strong> å±æ€§</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">manifest</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">        </span></span><br><span class="line"><span class="tag">        <span class="attr">android:usesCleartextTraffic</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ›´å¤šå‚æ•°ä¿®æ”¹ï¼š<a href="https://developer.android.com/training/articles/security-config#trust-anchors" target="_blank" rel="noopener">https://developer.android.com/training/articles/security-config#trust-anchors</a></p>
</li>
</ul>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="https://www.jianshu.com/p/57047a84e559" target="_blank" rel="noopener">https://www.jianshu.com/p/57047a84e559</a></p>
<p><a href="https://android-developers.googleblog.com/2018/04/protecting-users-with-tls-by-default-in.html" target="_blank" rel="noopener">https://android-developers.googleblog.com/2018/04/protecting-users-with-tls-by-default-in.html</a> </p>
<p><a href="https://android-developers.googleblog.com/2018/04/dns-over-tls-support-in-android-p.html" target="_blank" rel="noopener">https://android-developers.googleblog.com/2018/04/dns-over-tls-support-in-android-p.html</a></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Html5æ–°ç‰¹æ€§</title>
    <url>/2019/03/04/Html5%E6%96%B0%E7%89%B9%E6%80%A7/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="01-HTML5åŸºç¡€"><a href="#01-HTML5åŸºç¡€" class="headerlink" title="01-HTML5åŸºç¡€"></a>01-HTML5åŸºç¡€</h1><h2 id="äº†è§£HTML5"><a href="#äº†è§£HTML5" class="headerlink" title="äº†è§£HTML5"></a>äº†è§£HTML5</h2><a id="more"></a>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">â˜HTML5å±äºä¸Šä¸€ä»£HTMLçš„æ–°è¿­ä»£è¯­è¨€ï¼Œè®¾è®¡HTML5æœ€ä¸»è¦çš„ç›®çš„æ˜¯ä¸ºäº†åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ”¯æŒå¤šåª’ä½“ï¼ï¼ï¼</span><br><span class="line">  ä¾‹å¦‚ï¼š video æ ‡ç­¾å’Œ audio åŠ canvas æ ‡è®°</span><br><span class="line"></span><br><span class="line">â˜ æ–°ç‰¹æ€§ï¼š</span><br><span class="line">     1. å–æ¶ˆäº†è¿‡æ—¶çš„æ˜¾ç¤ºæ•ˆæœæ ‡è®°  &lt;font&gt;&lt;/font&gt; å’Œ &lt;center&gt;&lt;/center&gt; ...</span><br><span class="line">     2. æ–°è¡¨å•å…ƒç´ å¼•å…¥</span><br><span class="line">     3. æ–°è¯­ä¹‰æ ‡ç­¾çš„å¼•å…¥  </span><br><span class="line">     4. canvasæ ‡ç­¾ï¼ˆå›¾å½¢è®¾è®¡ï¼‰</span><br><span class="line">     5. æœ¬åœ°æ•°æ®åº“ï¼ˆæœ¬åœ°å­˜å‚¨ï¼‰</span><br><span class="line">     6. ä¸€äº›API</span><br><span class="line">â˜ å¥½å¤„ï¼š</span><br><span class="line">     1. è·¨å¹³å°</span><br><span class="line">         ä¾‹å¦‚ï¼šæ¯”å¦‚ä½ å¼€å‘äº†ä¸€æ¬¾HTML5çš„æ¸¸æˆï¼Œä½ å¯ä»¥å¾ˆè½»æ˜“åœ°ç§»æ¤åˆ°UCçš„å¼€æ”¾å¹³å°ã€Operaçš„æ¸¸æˆä¸­å¿ƒã€Facebookåº”ç”¨å¹³å°ï¼Œç”šè‡³å¯ä»¥é€šè¿‡å°è£…çš„æŠ€æœ¯å‘æ”¾åˆ°App Storeæˆ–Google Playä¸Šï¼Œæ‰€ä»¥å®ƒçš„è·¨å¹³å°æ€§éå¸¸å¼ºå¤§ï¼Œè¿™ä¹Ÿæ˜¯å¤§å¤šæ•°äººå¯¹HTML5æœ‰å…´è¶£çš„ä¸»è¦åŸå› ã€‚</span><br><span class="line"></span><br><span class="line">â˜ ç¼ºç‚¹ï¼š</span><br><span class="line">     1. pcç«¯æµè§ˆå™¨æ”¯æŒä¸æ˜¯ç‰¹åˆ«å‹å¥½ï¼Œé€ æˆç”¨æˆ·ä½“éªŒä¸ä½³</span><br></pre></td></tr></table></figure>
<h2 id="æ–°è¯­ä¹‰æ ‡ç­¾"><a href="#æ–°è¯­ä¹‰æ ‡ç­¾" class="headerlink" title="æ–°è¯­ä¹‰æ ‡ç­¾"></a>æ–°è¯­ä¹‰æ ‡ç­¾</h2><h3 id="ç½‘é¡µå¸ƒå±€ç»“æ„æ ‡ç­¾åŠå…¼å®¹å¤„ç†"><a href="#ç½‘é¡µå¸ƒå±€ç»“æ„æ ‡ç­¾åŠå…¼å®¹å¤„ç†" class="headerlink" title="ç½‘é¡µå¸ƒå±€ç»“æ„æ ‡ç­¾åŠå…¼å®¹å¤„ç†"></a>ç½‘é¡µå¸ƒå±€ç»“æ„æ ‡ç­¾åŠå…¼å®¹å¤„ç†</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aside</span>&gt;</span><span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">....</span><br><span class="line">http://www.w3school.com.cn/html/html5_semantic_elements.asp</span><br></pre></td></tr></table></figure>
<h3 id="å¤šåª’ä½“æ ‡ç­¾åŠå±æ€§ä»‹ç»"><a href="#å¤šåª’ä½“æ ‡ç­¾åŠå±æ€§ä»‹ç»" class="headerlink" title="å¤šåª’ä½“æ ‡ç­¾åŠå±æ€§ä»‹ç»"></a>å¤šåª’ä½“æ ‡ç­¾åŠå±æ€§ä»‹ç»</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">â˜ <span class="tag">&lt;<span class="name">video</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span> è§†é¢‘</span><br><span class="line">     å±æ€§ï¼šcontrols æ˜¾ç¤ºæ§åˆ¶æ </span><br><span class="line">     å±æ€§ï¼šautoplay è‡ªåŠ¨æ’­æ”¾  </span><br><span class="line">    å±æ€§ï¼šloop  è®¾ç½®å¾ªç¯æ’­æ”¾</span><br><span class="line">â˜ <span class="tag">&lt;<span class="name">audio</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span>  éŸ³é¢‘</span><br><span class="line">     å±æ€§ï¼šcontrols æ˜¾ç¤ºæ§åˆ¶æ </span><br><span class="line">     å±æ€§ï¼šautoplay è‡ªåŠ¨æ’­æ”¾  </span><br><span class="line">    å±æ€§ï¼šloop  è®¾ç½®å¾ªç¯æ’­æ”¾</span><br><span class="line">â˜ videoæ ‡ç­¾æ”¯æŒçš„æ ¼å¼    http://www.w3school.com.cn/html5/html_5_video.asp</span><br><span class="line">â˜ å¤šåª’ä½“æ ‡ç­¾åœ¨ç½‘é¡µä¸­çš„å…¼å®¹æ•ˆæœæ–¹å¼</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"code/å¤šåª’ä½“æ ‡ç­¾/trailer.mp4"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"trailer.ogg"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"trailer.WebM"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="æ–°è¡¨å•å…ƒç´ åŠå±æ€§"><a href="#æ–°è¡¨å•å…ƒç´ åŠå±æ€§" class="headerlink" title="æ–°è¡¨å•å…ƒç´ åŠå±æ€§"></a>æ–°è¡¨å•å…ƒç´ åŠå±æ€§</h2><h3 id="æ™ºèƒ½è¡¨å•æ§ä»¶"><a href="#æ™ºèƒ½è¡¨å•æ§ä»¶" class="headerlink" title="æ™ºèƒ½è¡¨å•æ§ä»¶"></a>æ™ºèƒ½è¡¨å•æ§ä»¶</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">input</span>  <span class="attr">type</span>=<span class="string">"email"</span>&gt;</span></span><br><span class="line"> email: è¾“å…¥åˆæ³•çš„é‚®ç®±åœ°å€</span><br><span class="line"> urlï¼š  è¾“å…¥åˆæ³•çš„ç½‘å€</span><br><span class="line"> numberï¼š åªèƒ½è¾“å…¥æ•°å­—</span><br><span class="line"> rangeï¼š æ»‘å—</span><br><span class="line"> colorï¼š æ‹¾è‰²å™¨</span><br><span class="line"> dateï¼š æ˜¾ç¤ºæ—¥æœŸ</span><br><span class="line"> monthï¼š æ˜¾ç¤ºæœˆä»½</span><br><span class="line"> week ï¼š æ˜¾ç¤ºç¬¬å‡ å‘¨</span><br><span class="line"> timeï¼š  æ˜¾ç¤ºæ—¶é—´</span><br></pre></td></tr></table></figure>
<h3 id="è¡¨å•å±æ€§"><a href="#è¡¨å•å±æ€§" class="headerlink" title="è¡¨å•å±æ€§"></a>è¡¨å•å±æ€§</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"> â—†formå±æ€§ï¼š   </span><br><span class="line">    autocomplete=on | off          è‡ªåŠ¨å®Œæˆ</span><br><span class="line">    novalidate=true | false        æ˜¯å¦å…³é—­æ ¡éªŒ</span><br><span class="line"></span><br><span class="line">  â—† inputå±æ€§ï¼š</span><br><span class="line">    *autofocus  ï¼š è‡ªåŠ¨è·å–ç„¦ç‚¹</span><br><span class="line">    formï¼š       </span><br><span class="line">    listï¼š</span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">list</span>=<span class="string">"abc"</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">datalist</span> <span class="attr">id</span>=<span class="string">"abc"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"123"</span>&gt;</span>12312<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"123"</span>&gt;</span>12312<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"123"</span>&gt;</span>12312<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"123"</span>&gt;</span>12312<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">datalist</span>&gt;</span></span><br><span class="line">    multipleï¼š    å®ç°å¤šé€‰æ•ˆæœ</span><br><span class="line">    *placeholder ï¼š å ä½ç¬¦  ï¼ˆæç¤ºä¿¡æ¯ï¼‰</span><br><span class="line">    *requiredï¼š    å¿…å¡«é¡¹</span><br><span class="line"></span><br><span class="line">ä½œä¸šï¼š</span><br><span class="line">    â—†è‡ªå·±è§£å†³requiredè‡ªå®šä¹‰æç¤ºä¿¡æ¯</span><br><span class="line">    â—†é¢„ä¹ å’Œå¤ä¹ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç•™ä¸‹çš„ç–‘é—®ï¼š</span><br><span class="line">    â—† å¦‚ä½•ä¿®æ”¹è¡¨å•æ§ä»¶ä¸­çš„é»˜è®¤æç¤ºä¿¡æ¯ </span><br><span class="line">         1. è¡¨å•éªŒè¯è§¦å‘oninvalidäº‹ä»¶</span><br><span class="line">         2. é€šè¿‡setCustomValidityæ–¹æ³•è®¾ç½®ä¿®æ”¹å†…å®¹</span><br></pre></td></tr></table></figure>
<h2 id="HTMl5ä¸­çš„API"><a href="#HTMl5ä¸­çš„API" class="headerlink" title="HTMl5ä¸­çš„API"></a>HTMl5ä¸­çš„API</h2><h3 id="è·å–é¡µé¢å…ƒç´ åŠç±»åæ“ä½œå’Œè‡ªå®šä¹‰å±æ€§"><a href="#è·å–é¡µé¢å…ƒç´ åŠç±»åæ“ä½œå’Œè‡ªå®šä¹‰å±æ€§" class="headerlink" title="è·å–é¡µé¢å…ƒç´ åŠç±»åæ“ä½œå’Œè‡ªå®šä¹‰å±æ€§"></a>è·å–é¡µé¢å…ƒç´ åŠç±»åæ“ä½œå’Œè‡ªå®šä¹‰å±æ€§</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">â˜ <span class="built_in">document</span>.querySelector(<span class="string">"é€‰æ‹©å™¨"</span>)ï¼›</span><br><span class="line">   å¤‡æ³¨ï¼š</span><br><span class="line">      é€‰æ‹©å™¨ï¼š å¯ä»¥æ˜¯cssä¸­çš„ä»»æ„ä¸€ç§é€‰æ‹©å™¨</span><br><span class="line">       é€šè¿‡è¯¥é€‰æ‹©å™¨åªèƒ½é€‰ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">â˜ <span class="built_in">document</span>.querySelectorAll(<span class="string">"é€‰æ‹©å™¨"</span>);</span><br><span class="line">     å¤‡æ³¨ï¼š</span><br><span class="line">        ä¸<span class="built_in">document</span>.querySelectoråŒºåˆ«ï¼š querySelectorAll å¯ä»¥é€‰ä¸­æ‰€æœ‰ç¬¦åˆé€‰æ‹©å™¨è§„åˆ™çš„å…ƒç´ ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚querySelectorè¿”å›çš„åªæ˜¯å•ç‹¬çš„ä¸€ä¸ªå…ƒç´ </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">â˜ Dom.classList.add(<span class="string">"ç±»å"</span>): ç»™å½“å‰domå…ƒç´ æ·»åŠ ç±»æ ·å¼</span><br><span class="line"></span><br><span class="line">â˜ Dom.classList.remove(<span class="string">"ç±»å"</span>); ç»™å½“å‰domå…ƒç´ ç§»é™¤ç±»æ ·å¼</span><br><span class="line"></span><br><span class="line">â˜ classList.contains(<span class="string">"ç±»å"</span>); æ£€æµ‹æ˜¯å¦åŒ…å«ç±»æ ·å¼</span><br><span class="line"></span><br><span class="line">â˜ classList.toggle(<span class="string">"active"</span>);  åˆ‡æ¢ç±»æ ·å¼ï¼ˆæœ‰å°±åˆ é™¤ï¼Œæ²¡æœ‰å°±æ·»åŠ ï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">â˜ è‡ªå®šä¹‰å±æ€§           ï¼ˆå°æ¡ˆä¾‹åˆ†æä½“éªŒè‡ªå®šä¹‰å±æ€§ï¼‰</span><br><span class="line"></span><br><span class="line">   data-è‡ªå®šä¹‰å±æ€§å</span><br><span class="line">   å¤‡æ³¨ï¼š</span><br><span class="line">       åœ¨æ ‡ç­¾ä¸­ï¼Œä»¥data-è‡ªå®šä¹‰åç§°  </span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> è·å–è‡ªå®šä¹‰å±æ€§   Dom.dataset   è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡</span><br><span class="line">      Dom.dataset.å±æ€§å  æˆ–è€…  Dom.dataset[å±æ€§å]</span><br><span class="line">     </span><br><span class="line">      æ³¨æ„ï¼š </span><br><span class="line">              å±æ€§åæ˜¯ä¸åŒ…å«data-</span><br><span class="line"></span><br><span class="line">   <span class="number">2.</span> è®¾ç½®è‡ªå®šä¹‰å±æ€§</span><br><span class="line">      Dom.dataset.è‡ªå®šä¹‰å±æ€§å=å€¼  æˆ–è€…  Dom.dataset[è‡ªå®šä¹‰å±æ€§å]=å€¼ï¼›</span><br></pre></td></tr></table></figure>
<h3 id="æ–‡ä»¶è¯»å–"><a href="#æ–‡ä»¶è¯»å–" class="headerlink" title="æ–‡ä»¶è¯»å–"></a>æ–‡ä»¶è¯»å–</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"> â˜  FileReader</span><br><span class="line">     FileReader             æ¥å£æœ‰3ä¸ªç”¨æ¥è¯»å–æ–‡ä»¶æ–¹æ³•è¿”å›ç»“æœåœ¨resultä¸­</span><br><span class="line">     readAsBinaryString    ---å°†æ–‡ä»¶è¯»å–ä¸ºäºŒè¿›åˆ¶ç¼–ç </span><br><span class="line">     readAsText           ---å°†æ–‡ä»¶è¯»å–ä¸ºæ–‡æœ¬</span><br><span class="line">     readAsDataURL        ---å°†æ–‡ä»¶è¯»å–ä¸ºDataURL</span><br><span class="line"></span><br><span class="line">â˜  FileReader æä¾›çš„äº‹ä»¶æ¨¡å‹</span><br><span class="line">    onabort        ä¸­æ–­æ—¶è§¦å‘</span><br><span class="line">    onerror        å‡ºé”™æ—¶è§¦å‘</span><br><span class="line">    onload     æ–‡ä»¶è¯»å–æˆåŠŸå®Œæˆæ—¶è§¦å‘</span><br><span class="line">    onloadend  è¯»å–å®Œæˆè§¦å‘ï¼Œæ— è®ºæˆåŠŸæˆ–å¤±è´¥</span><br><span class="line">    onloadstart    è¯»å–å¼€å§‹æ—¶è§¦å‘</span><br><span class="line">    onprogress è¯»å–ä¸­</span><br><span class="line"></span><br><span class="line">â˜ åˆ†æè¯»å–å›¾ç‰‡å°æ¡ˆä¾‹</span><br></pre></td></tr></table></figure>
<h3 id="è·å–ç½‘ç»œçŠ¶æ€"><a href="#è·å–ç½‘ç»œçŠ¶æ€" class="headerlink" title="è·å–ç½‘ç»œçŠ¶æ€"></a>è·å–ç½‘ç»œçŠ¶æ€</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">â˜ è·å–å½“å‰ç½‘ç»œçŠ¶æ€</span><br><span class="line">       window.navigator.onLine è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼</span><br><span class="line"></span><br><span class="line">â˜ ç½‘ç»œçŠ¶æ€äº‹ä»¶</span><br><span class="line">       1. window.ononline</span><br><span class="line">       2. window.onoffline</span><br></pre></td></tr></table></figure>
<h3 id="è·å–åœ°ç†å®šä½"><a href="#è·å–åœ°ç†å®šä½" class="headerlink" title="è·å–åœ°ç†å®šä½"></a>è·å–åœ°ç†å®šä½</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">â˜  è·å–ä¸€æ¬¡å½“å‰ä½ç½®</span><br><span class="line">    <span class="built_in">window</span>.navigator.geolocation.getCurrentPosition(success,error);</span><br><span class="line"></span><br><span class="line">     <span class="number">1.</span> coords.latitude   ç»´åº¦</span><br><span class="line">     <span class="number">2.</span> coords.longitude   ç»åº¦</span><br><span class="line"></span><br><span class="line">â˜  å®æ—¶è·å–å½“å‰ä½ç½®</span><br><span class="line">    <span class="built_in">window</span>.navigator.geolocation.watchPosition(success,error);</span><br><span class="line"></span><br><span class="line">â˜ åˆ†æåœ°ç†å®šä½å°æ¡ˆä¾‹</span><br></pre></td></tr></table></figure>
<h3 id="æœ¬åœ°å­˜å‚¨"><a href="#æœ¬åœ°å­˜å‚¨" class="headerlink" title="æœ¬åœ°å­˜å‚¨"></a>æœ¬åœ°å­˜å‚¨</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">â˜å‘å±•ï¼š</span><br><span class="line">   éšç€äº’è”ç½‘çš„å¿«é€Ÿå‘å±•ï¼ŒåŸºäºç½‘é¡µçš„åº”ç”¨è¶Šæ¥è¶Šæ™®éï¼ŒåŒæ—¶ä¹Ÿå˜çš„è¶Šæ¥è¶Šå¤æ‚ï¼Œä¸ºäº†æ»¡è¶³å„ç§å„æ ·çš„éœ€æ±‚ï¼Œä¼šç»å¸¸æ€§åœ¨æœ¬åœ°å­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œä¼ ç»Ÿæ–¹å¼æˆ‘ä»¬ä»¥<span class="built_in">document</span>.cookieæ¥è¿›è¡Œå­˜å‚¨çš„ï¼Œä½†æ˜¯ç”±äºå…¶å­˜å‚¨å¤§å°åªæœ‰<span class="number">4</span>kå·¦å³ï¼Œå¹¶ä¸”è§£æä¹Ÿç›¸å½“çš„å¤æ‚ï¼Œç»™å¼€å‘å¸¦æ¥è¯¸å¤šä¸ä¾¿ï¼ŒHTML5è§„èŒƒåˆ™æå‡ºè§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨sessionStorageå’ŒlocalStorageå­˜å‚¨æ•°æ®ã€‚ </span><br><span class="line"></span><br><span class="line"> â˜  localStorageï¼š</span><br><span class="line">     <span class="number">1.</span> æ°¸ä¹…ç”Ÿæ•ˆ</span><br><span class="line">     <span class="number">2.</span> å¤šçª—å£å…±äº«</span><br><span class="line">     <span class="number">3.</span> å®¹é‡å¤§çº¦ä¸º<span class="number">20</span>M</span><br><span class="line">     </span><br><span class="line">     â—†<span class="built_in">window</span>.localStorage.setItem(key,value)  è®¾ç½®å­˜å‚¨å†…å®¹</span><br><span class="line">     â—†<span class="built_in">window</span>.localStorage.getItem(key)        è·å–å†…å®¹</span><br><span class="line">     â—†<span class="built_in">window</span>.localStorage.removeItem(key)     åˆ é™¤å†…å®¹</span><br><span class="line">     â—†<span class="built_in">window</span>.localStorage.clear()            æ¸…ç©ºå†…å®¹</span><br><span class="line">     </span><br><span class="line"> â˜ sessionStorageï¼š</span><br><span class="line">       <span class="number">1.</span> ç”Ÿå‘½å‘¨æœŸä¸ºå…³é—­å½“å‰æµè§ˆå™¨çª—å£</span><br><span class="line">        <span class="number">2.</span> å¯ä»¥åœ¨åŒä¸€ä¸ªçª—å£ä¸‹è®¿é—®</span><br><span class="line">        <span class="number">3.</span> æ•°æ®å¤§å°ä¸º<span class="number">5</span>Må·¦å³</span><br><span class="line">        </span><br><span class="line">      â—†<span class="built_in">window</span>.sessionStorage.setItem(key,value)</span><br><span class="line">     â—†<span class="built_in">window</span>.sessionStorage.getItem(key)</span><br><span class="line">     â—†<span class="built_in">window</span>.sessionStorage.removeItem(key)</span><br><span class="line">     â—†<span class="built_in">window</span>.sessionStorage.clear()</span><br></pre></td></tr></table></figure>
<h3 id="æ“ä½œå¤šåª’ä½“"><a href="#æ“ä½œå¤šåª’ä½“" class="headerlink" title="æ“ä½œå¤šåª’ä½“"></a>æ“ä½œå¤šåª’ä½“</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">http://www.w3school.com.cn/html5/html5_ref_audio_video_dom.asp</span><br><span class="line"></span><br><span class="line">ä½œä¸šï¼š</span><br><span class="line">     å®Œæˆä¸€ä¸ªåœ¨çº¿éŸ³ä¹æ’­æ”¾å™¨æˆ–è€…è§†é¢‘æ’­æ”¾å™¨</span><br></pre></td></tr></table></figure>
<h2 id="Canvasç”»å¸ƒ"><a href="#Canvasç”»å¸ƒ" class="headerlink" title="Canvasç”»å¸ƒ"></a>Canvasç”»å¸ƒ</h2><h3 id="ç»˜å›¾å·¥å…·"><a href="#ç»˜å›¾å·¥å…·" class="headerlink" title="ç»˜å›¾å·¥å…·"></a>ç»˜å›¾å·¥å…·</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">â˜ ä»‹ç»canvasç”»å¸ƒ</span><br><span class="line">â˜ è®¾ç½®ç”»å¸ƒå¤§å°ï¼š ä½¿ç”¨å±æ€§æ–¹å¼è®¾ç½®</span><br><span class="line">â˜ è§£å†³ç”»å¸ƒé‡ç»˜é—®é¢˜</span><br><span class="line">     <span class="number">1.</span> è®¾ç½®ä¸€æ¬¡æè¾¹</span><br><span class="line">     <span class="number">2.</span> å¼€å¯æ–°çš„å›¾å±‚</span><br></pre></td></tr></table></figure>
<h3 id="ç»˜å›¾æ–¹æ³•"><a href="#ç»˜å›¾æ–¹æ³•" class="headerlink" title="ç»˜å›¾æ–¹æ³•"></a>ç»˜å›¾æ–¹æ³•</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">ctx.moveTo(x,y)    è½ç¬”</span><br><span class="line">ctx.lineTo(x,y)    è¿çº¿</span><br><span class="line">ctx.stroke()       æè¾¹</span><br><span class="line"></span><br><span class="line">ctx.beginPath()ï¼›   å¼€å¯æ–°çš„å›¾å±‚</span><br><span class="line"></span><br><span class="line">æ¼”ç¤ºï¼š strokeStyle="å€¼"</span><br><span class="line">çº¿å®½ï¼š linewidth="å€¼"   å¤‡æ³¨ï¼šä¸éœ€è¦å¸¦å•ä½</span><br><span class="line"></span><br><span class="line">çº¿è¿æ¥æ–¹å¼ï¼š   lineJoin: round | bevel | miter (é»˜è®¤)</span><br><span class="line"></span><br><span class="line">çº¿å¸½ï¼ˆçº¿ä¸¤ç«¯çš„ç»“æŸæ–¹å¼ï¼‰ï¼š  lineCap: butt(é»˜è®¤å€¼) | round | square </span><br><span class="line"></span><br><span class="line">é—­åˆè·¯å¾„ï¼š ctx.closePath()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--ç»˜åˆ¶ä¸€æ¡ç›´çº¿æ¼”ç¤ºä»£ç </span><br><span class="line"></span><br><span class="line">--ä½œä¸šï¼š</span><br><span class="line">       1. ä»200,100çš„ä½ç½®ç»˜åˆ¶å®½ä¸º200é«˜ä¸º150çš„çŸ©å½¢</span><br><span class="line">        2. å‡†å¤‡ä¸€ä¸ª600*400çš„ç”»å¸ƒï¼Œä¸‰ç­‰åˆ†è¿™ä¸ªç”»å¸ƒï¼Œåˆ†åˆ«ç»˜åˆ¶æ­£æ–¹å½¢ã€‚ç›´è§’ä¸‰è§’å½¢ï¼Œæ¢¯å½¢</span><br></pre></td></tr></table></figure>
<h3 id="æ¸å˜æ–¹æ¡ˆ"><a href="#æ¸å˜æ–¹æ¡ˆ" class="headerlink" title="æ¸å˜æ–¹æ¡ˆ"></a>æ¸å˜æ–¹æ¡ˆ</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â˜ çº¿æ€§æ¸å˜</span><br><span class="line">   var grd=ctx.createLinearGradient(x0,y0,x1,y1);</span><br><span class="line">        x0--&gt;æ¸å˜å¼€å§‹çš„xåæ ‡</span><br><span class="line">        y0--&gt;æ¸å˜å¼€å§‹çš„yåæ ‡</span><br><span class="line">        x1--&gt;æ¸å˜ç»“æŸçš„xåæ ‡</span><br><span class="line">        y1--&gt;æ¸å˜ç»“æŸçš„yåæ ‡</span><br><span class="line">        </span><br><span class="line">    grd.addColorStop(0,&quot;black&quot;);      è®¾ç½®æ¸å˜çš„å¼€å§‹é¢œè‰²</span><br><span class="line">    grd.addColorStop(0.1,&quot;yellow&quot;);   è®¾ç½®æ¸å˜çš„ä¸­é—´é¢œè‰²</span><br><span class="line">    grd.addColorStop(1,&quot;red&quot;);        è®¾ç½®æ¸å˜çš„ç»“æŸé¢œè‰²</span><br><span class="line"></span><br><span class="line">    ctx.strokeStyle=grd;</span><br><span class="line">    ctx.stroke();</span><br><span class="line">    </span><br><span class="line">    å¤‡æ³¨ï¼š</span><br><span class="line">       addColorStop(offse,color);</span><br><span class="line">       ä¸­æ¸å˜çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ä»‹äº0-1ä¹‹é—´ï¼Œ0ä»£è¡¨å¼€å§‹ï¼Œ1ä»£è¡¨ç»“æŸã€‚ä¸­é—´å¯ä»¥è®¾ç½®ä»»ä½•å°æ•°</span><br><span class="line">       </span><br><span class="line">â˜ å¾„å‘æ¸å˜</span><br><span class="line"></span><br><span class="line">          ctx.createradialGradient(x0,y0,r0,x1,y1,r1);</span><br><span class="line"></span><br><span class="line">          (x0,y0)ï¼šæ¸å˜çš„å¼€å§‹åœ†çš„ x,y åæ ‡</span><br><span class="line"></span><br><span class="line">          r0ï¼šå¼€å§‹åœ†çš„åŠå¾„</span><br><span class="line"></span><br><span class="line">          (x1,y1)ï¼šæ¸å˜çš„ç»“æŸåœ†çš„ x,y åæ ‡</span><br><span class="line"></span><br><span class="line">          r1ï¼šç»“æŸåœ†çš„åŠå¾„</span><br></pre></td></tr></table></figure>
<h3 id="å¡«å……æ•ˆæœ"><a href="#å¡«å……æ•ˆæœ" class="headerlink" title="å¡«å……æ•ˆæœ"></a>å¡«å……æ•ˆæœ</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ctx.fill();         è®¾ç½®å¡«å……æ•ˆæœ</span><br><span class="line">ctx.fillstyle=&quot;å€¼&quot;; è®¾ç½®å¡«å……é¢œè‰²</span><br></pre></td></tr></table></figure>
<h3 id="éé›¶ç¯ç»•åŸåˆ™"><a href="#éé›¶ç¯ç»•åŸåˆ™" class="headerlink" title="éé›¶ç¯ç»•åŸåˆ™"></a>éé›¶ç¯ç»•åŸåˆ™</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â˜ ç»˜åˆ¶ä¸€ä¸ªå¦‚ä¸‹å›¾å½¢</span><br></pre></td></tr></table></figure>
<p><img src="assets/1526470782861.png" alt="52647078286"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â˜ éé›¶ç¯ç»•åŸåˆ™ï¼š</span><br><span class="line">     1. ä»»æ„æ‰¾ä¸€ç‚¹ï¼Œè¶Šç®€å•è¶Šå¥½</span><br><span class="line">     2. ä»¥ç‚¹ä¸ºåœ†å¿ƒï¼Œç»˜åˆ¶ä¸€æ¡å°„çº¿ï¼Œè¶Šç®€å•è¶Šå¥½ï¼ˆç›¸äº¤çš„è¾¹è¶Šå°‘è¶Šå¥½ï¼‰</span><br><span class="line">     3. ä»¥å°„çº¿ä¸ºåŠå¾„é¡ºæ—¶é’ˆæ—‹è½¬ï¼Œç›¸äº¤çš„è¾¹åŒå‘è®°ä¸º+1ï¼Œåæ–¹å‘è®°ä¸º-1ï¼Œå¦‚æœç›¸åŠ çš„åŒºåŸŸç­‰äº0ï¼Œåˆ™ä¸å¡«å……ã€‚</span><br><span class="line">     4. éé›¶åŒºåŸŸå¡«å……</span><br><span class="line">     </span><br><span class="line">â˜ éé›¶ç¯ç»•åŸåˆ™æ¡ˆä¾‹ï¼š</span><br></pre></td></tr></table></figure>
<h3 id="ç»˜åˆ¶è™šçº¿"><a href="#ç»˜åˆ¶è™šçº¿" class="headerlink" title="ç»˜åˆ¶è™šçº¿"></a>ç»˜åˆ¶è™šçº¿</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">åŸç†ï¼š</span><br><span class="line"></span><br><span class="line"> è®¾ç½®è™šçº¿å…¶å®å°±æ˜¯è®¾ç½®å®çº¿ä¸ç©ºç™½éƒ¨åˆ†ç›´æ¥çš„è·ç¦»,åˆ©ç”¨æ•°ç»„æè¿°å…¶ä¸­çš„å…³ç³»</span><br><span class="line"></span><br><span class="line"> ä¾‹å¦‚ï¼š [<span class="number">10</span>,<span class="number">10</span>]  å®çº¿éƒ¨åˆ†<span class="number">10</span>px ç©ºç™½éƒ¨åˆ†<span class="number">10</span>px</span><br><span class="line"></span><br><span class="line"> ä¾‹å¦‚ï¼š [<span class="number">10</span>,<span class="number">5</span>]  å®çº¿éƒ¨åˆ†<span class="number">10</span>px ç©ºç™½éƒ¨åˆ†<span class="number">5</span>px</span><br><span class="line"></span><br><span class="line"> ä¾‹å¦‚ï¼š [<span class="number">10</span>,<span class="number">5</span>,<span class="number">20</span>]  å®çº¿éƒ¨åˆ†<span class="number">10</span>px  ç©ºç™½<span class="number">5</span>px  å®çº¿<span class="number">20</span>px  ç©ºç™½éƒ¨åˆ†<span class="number">10</span>px å®çº¿<span class="number">5</span>px ç©ºç™½<span class="number">20</span>px....</span><br><span class="line"></span><br><span class="line">ç»˜åˆ¶ï¼š</span><br><span class="line"> ctx.setLineDash(æ•°ç»„);</span><br><span class="line"> ctx.stroke();</span><br><span class="line"> </span><br><span class="line"> ä¾‹å¦‚ï¼š</span><br><span class="line">     ctx.moveTo(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">     ctx.lineTo(<span class="number">300</span>, <span class="number">100</span>);</span><br><span class="line">     ctx.setLineDash([<span class="number">2</span>,<span class="number">4</span>]);</span><br><span class="line">     ctx.stroke();</span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼š</span><br><span class="line">    å¦‚æœè¦å°†è™šçº¿æ”¹ä¸ºå®çº¿ï¼Œåªè¦å°†æ•°ç»„æ”¹ä¸ºç©ºæ•°ç»„å³å¯ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="ç»˜åˆ¶åŠ¨ç”»æ•ˆæœ"><a href="#ç»˜åˆ¶åŠ¨ç”»æ•ˆæœ" class="headerlink" title="ç»˜åˆ¶åŠ¨ç”»æ•ˆæœ"></a>ç»˜åˆ¶åŠ¨ç”»æ•ˆæœ</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â˜ ç»˜åˆ¶ä¸€ä¸ªæè¾¹çŸ©å½¢ï¼š content.strokeRect(x,y,width,height) </span><br><span class="line">â˜ ç»˜åˆ¶ä¸€ä¸ªå¡«å……çŸ©å½¢ï¼š content.fillRect(x,y,width,height)  </span><br><span class="line">â˜ æ¸…é™¤ï¼š           content.clearRect(x,y,width,height)  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">â˜ å®ç°åŠ¨ç”»æ•ˆæœï¼š </span><br><span class="line">       1. å…ˆæ¸…å±</span><br><span class="line">       2. ç»˜åˆ¶å›¾å½¢</span><br><span class="line">       3. å¤„ç†å˜é‡</span><br></pre></td></tr></table></figure>
<h3 id="ç»˜åˆ¶æ–‡æœ¬"><a href="#ç»˜åˆ¶æ–‡æœ¬" class="headerlink" title="ç»˜åˆ¶æ–‡æœ¬"></a>ç»˜åˆ¶æ–‡æœ¬</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â˜ ç»˜åˆ¶å¡«å……æ–‡æœ¬</span><br><span class="line">    content.fillText(æ–‡æœ¬çš„å†…å®¹,x,y)</span><br><span class="line"></span><br><span class="line">â˜ ç»˜åˆ¶é•‚ç©ºæ–‡æœ¬</span><br><span class="line">     content.strokeText();</span><br><span class="line">     </span><br><span class="line">â˜ è®¾ç½®æ–‡å­—å¤§å°ï¼š</span><br><span class="line">     content.font=&quot;20px å¾®è½¯é›…é»‘&quot;</span><br><span class="line">     å¤‡æ³¨ï¼š è¯¥å±æ€§è®¾ç½®æ–‡å­—å¤§å°ï¼Œå¿…é¡»æŒ‰ç…§cssfontå±æ€§çš„æ–¹å¼è®¾ç½®</span><br><span class="line">     </span><br><span class="line">â˜ æ–‡å­—æ°´å¹³å¯¹é½æ–¹å¼ã€æ–‡å­—åœ¨åœ†å¿ƒç‚¹ä½ç½®çš„å¯¹é½æ–¹å¼ã€‘</span><br><span class="line">      content.textalign=&quot;left | right | center&quot;</span><br><span class="line"></span><br><span class="line">â˜æ–‡å­—å‚ç›´å¯¹é½æ–¹å¼</span><br><span class="line">       content.textBaseline=&quot;top | middle | bottom | alphabetic(é»˜è®¤)&quot;</span><br><span class="line"></span><br><span class="line">â˜æ–‡å­—é˜´å½±æ•ˆæœ</span><br><span class="line">       ctx.shadowColor=&quot;red&quot;;  è®¾ç½®æ–‡å­—é˜´å½±çš„é¢œè‰²</span><br><span class="line"></span><br><span class="line">       ctx.ShadowOffsetX=å€¼;   è®¾ç½®æ–‡å­—é˜´å½±çš„æ°´å¹³åç§»é‡</span><br><span class="line"></span><br><span class="line">       ctx.shadowOffsetY=å€¼;   è®¾ç½®æ–‡å­—é˜´å½±çš„å‚ç›´åç§»é‡</span><br><span class="line"></span><br><span class="line">       ctx.shadowBlur=å€¼;      è®¾ç½®æ–‡å­—é˜´å½±çš„æ¨¡ç³Šåº¦</span><br></pre></td></tr></table></figure>
<h3 id="ç»˜åˆ¶å›¾ç‰‡"><a href="#ç»˜åˆ¶å›¾ç‰‡" class="headerlink" title="ç»˜åˆ¶å›¾ç‰‡"></a>ç»˜åˆ¶å›¾ç‰‡</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â˜    </span><br><span class="line">    //å°†å›¾ç‰‡ç»˜åˆ¶åˆ°ç”»å¸ƒçš„æŒ‡å®šä½ç½®</span><br><span class="line">   content.drawImage(å›¾ç‰‡å¯¹è±¡,x,y);</span><br><span class="line"></span><br><span class="line">â˜ </span><br><span class="line">   //å°†å›¾ç‰‡ç»˜åˆ¶åˆ°æŒ‡å®šåŒºåŸŸå¤§å°çš„ä½ç½®  x,yæŒ‡çš„æ˜¯çŸ©å½¢åŒºåŸŸçš„ä½ç½®ï¼Œwidthå’ŒheightæŒ‡çš„æ˜¯çŸ©å½¢åŒºåŸŸçš„å¤§å°</span><br><span class="line">   content.drawImage(å›¾ç‰‡å¯¹è±¡,x,y,width,height);</span><br><span class="line">   </span><br><span class="line">â˜ </span><br><span class="line">   //å°†å›¾ç‰‡çš„æŒ‡å®šåŒºåŸŸç»˜åˆ¶åˆ°æŒ‡å®šçŸ©å½¢åŒºåŸŸå†…</span><br><span class="line">   content.drawImage(å›¾ç‰‡å¯¹è±¡,sx,sy,swidth,sheight,dx,dy,dwidth,dheight);</span><br><span class="line">   </span><br><span class="line">   sx,sy æŒ‡çš„æ˜¯è¦ä»å›¾ç‰‡å“ªå—åŒºåŸŸå¼€å§‹ç»˜åˆ¶ï¼Œswidthï¼Œsheight æ˜¯å€¼ æˆªå–å›¾ç‰‡åŒºåŸŸçš„å¤§å°</span><br><span class="line">   dx,dy æ˜¯æŒ‡çŸ©å½¢åŒºåŸŸçš„ä½ç½®ï¼Œdwidth,dheightæ˜¯å€¼çŸ©å½¢åŒºåŸŸçš„å¤§å°</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"> â˜ </span><br><span class="line">    è§£å†³å›¾ç‰‡ç»˜åˆ¶åˆ°æŸä¸€ä¸ªåŒºåŸŸçš„æŒ‰åŸæ¯”ä¾‹ç¼©æ”¾ç»˜åˆ¶ï¼š</span><br><span class="line">      ç»˜åˆ¶å®½ï¼šç»˜åˆ¶é«˜==åŸå§‹å®½ï¼šåŸå§‹é«˜</span><br></pre></td></tr></table></figure>
<h3 id="ç»˜åˆ¶åœ†å¼§"><a href="#ç»˜åˆ¶åœ†å¼§" class="headerlink" title="ç»˜åˆ¶åœ†å¼§"></a>ç»˜åˆ¶åœ†å¼§</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">â˜</span><br><span class="line">  content.arc(x,y,radius,startradian,endradian[,direct]);</span><br><span class="line">  </span><br><span class="line">         x,y    åœ†å¿ƒçš„åæ ‡</span><br><span class="line"></span><br><span class="line">          radius åŠå¾„</span><br><span class="line"></span><br><span class="line">          startradian   å¼€å§‹å¼§åº¦</span><br><span class="line"></span><br><span class="line">          endradian     ç»“æŸå¼§åº¦</span><br><span class="line">     </span><br><span class="line">          direct        æ–¹å‘ï¼ˆé»˜è®¤é¡ºæ—¶é’ˆ falseï¼‰   true ä»£è¡¨é€†æ—¶é’ˆ</span><br><span class="line">          </span><br><span class="line">â˜ 0åº¦è§’åœ¨å“ªï¼Ÿ</span><br><span class="line">       ä»¥åœ†å¿ƒä¸ºä¸­å¿ƒå‘å³ä¸º0è§’ é¡ºæ—¶é’ˆä¸ºæ­£ï¼Œé€†æ—¶é’ˆä¸ºè´Ÿ</span><br><span class="line">          </span><br><span class="line">â˜ å¤‡æ³¨ï¼š</span><br><span class="line">     è§’åº¦ å’Œ å¼§åº¦çš„å…³ç³»ï¼š è§’åº¦:å¼§åº¦= 180:pi</span><br><span class="line">     </span><br><span class="line">      ç‰¹æ®Šå€¼</span><br><span class="line"></span><br><span class="line">        0åº¦ = 0å¼§åº¦</span><br><span class="line"></span><br><span class="line">        30åº¦ = Ï€/6   (180åº¦çš„å…­åˆ†ä¹‹ä¸€)</span><br><span class="line"></span><br><span class="line">        45åº¦ = Ï€/4   </span><br><span class="line"></span><br><span class="line">        60åº¦ = Ï€/3</span><br><span class="line"></span><br><span class="line">        90åº¦ = Ï€/2</span><br><span class="line"></span><br><span class="line">        180åº¦ = Ï€</span><br><span class="line"></span><br><span class="line">        360åº¦ = 2Ï€</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"> â˜ ç»˜åˆ¶åœ†ä¸Šä»»æ„ç‚¹ï¼š  </span><br><span class="line">     å…¬å¼ï¼š</span><br><span class="line">        x=ox+r*cos( å¼§åº¦ )</span><br><span class="line"></span><br><span class="line">        y=oy+r*sin( å¼§åº¦ )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      ox: åœ†å¿ƒçš„æ¨ªåæ ‡</span><br><span class="line"></span><br><span class="line">      oy: åœ†å¿ƒçš„çºµåæ ‡</span><br><span class="line"></span><br><span class="line">      rï¼š åœ†çš„åŠå¾„</span><br></pre></td></tr></table></figure>
<h3 id="å¹³ç§»ã€åæ ‡ç³»åœ†ç‚¹çš„å¹³ç§»ã€‘"><a href="#å¹³ç§»ã€åæ ‡ç³»åœ†ç‚¹çš„å¹³ç§»ã€‘" class="headerlink" title="å¹³ç§»ã€åæ ‡ç³»åœ†ç‚¹çš„å¹³ç§»ã€‘"></a>å¹³ç§»ã€åæ ‡ç³»åœ†ç‚¹çš„å¹³ç§»ã€‘</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ctx.translate(x,y);</span><br><span class="line"></span><br><span class="line">   ç‰¹ç‚¹ï¼š</span><br><span class="line">      é€šè¿‡è¯¥æ–¹æ³•å¯ä»¥å°†åŸç‚¹çš„ä½ç½®è¿›è¡Œé‡æ–°è®¾ç½®ã€‚</span><br><span class="line"></span><br><span class="line">   æ³¨æ„ï¼š</span><br><span class="line">       1. translate(x,y) ä¸­ä¸èƒ½è®¾ç½®ä¸€ä¸ªå€¼</span><br><span class="line"></span><br><span class="line">       2. ä¸moveTo(x,y) çš„åŒºåˆ«ï¼š</span><br><span class="line"></span><br><span class="line">            moveTo(x,y) æŒ‡çš„æ˜¯å°†ç”»ç¬”çš„è½ç¬”ç‚¹çš„ä½ç½®æ”¹å˜ï¼Œè€Œåæ ‡ç³»ä¸­çš„åŸç‚¹ä½ç½®å¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜</span><br><span class="line"></span><br><span class="line">            translate(x,y) æ˜¯å°†åæ ‡ç³»ä¸­çš„åŸç‚¹ä½ç½®å‘ç”Ÿæ”¹å˜</span><br></pre></td></tr></table></figure>
<h3 id="æ—‹è½¬ã€åæ ‡ç³»æ—‹è½¬ã€‘"><a href="#æ—‹è½¬ã€åæ ‡ç³»æ—‹è½¬ã€‘" class="headerlink" title="æ—‹è½¬ã€åæ ‡ç³»æ—‹è½¬ã€‘"></a>æ—‹è½¬ã€åæ ‡ç³»æ—‹è½¬ã€‘</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ctx.rotate(å¼§åº¦)</span><br></pre></td></tr></table></figure>
<h3 id="ä¼¸ç¼©"><a href="#ä¼¸ç¼©" class="headerlink" title="ä¼¸ç¼©"></a>ä¼¸ç¼©</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ctx.scale(x,y)</span><br><span class="line"></span><br><span class="line">  å¤‡æ³¨ï¼š</span><br><span class="line">      æ²¿ç€xè½´å’Œyè½´ç¼©æ”¾</span><br><span class="line"></span><br><span class="line">      x,y ä¸ºå€æ•°  ä¾‹å¦‚ï¼š 0.5  1</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>HTML</category>
      </categories>
      <tags>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSä¹‹è‡ªåŠ¨å¸ƒå±€AutoLayout</title>
    <url>/2019/03/04/IOS%E4%B9%8B%E8%87%AA%E5%8A%A8%E5%B8%83%E5%B1%80AutoLayout/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="AutoLayoutè‡ªåŠ¨å¸ƒå±€ä»‹ç»"><a href="#AutoLayoutè‡ªåŠ¨å¸ƒå±€ä»‹ç»" class="headerlink" title="AutoLayoutè‡ªåŠ¨å¸ƒå±€ä»‹ç»"></a>AutoLayoutè‡ªåŠ¨å¸ƒå±€ä»‹ç»</h1><p>UIå¸ƒå±€å¯¹äºiOSå¼€å‘è€…æ¥è¯´å¹¶ä¸é™Œç”Ÿï¼Œåœ¨iOS6ä¹‹å‰ï¼Œå¤§å®¶éƒ½æ˜¯é€šè¿‡UIæ§ä»¶çš„Frameå±æ€§å’ŒAutoresizing Maskæ¥è¿›è¡ŒUIå¸ƒå±€çš„ã€‚AutoLayoutåˆ™æ˜¯è‹¹æœå…¬å¸åœ¨iOS6æ¨å‡ºçš„ä¸€ç§åŸºäºçº¦æŸçš„ï¼Œæè¿°æ€§çš„å¸ƒå±€ç³»ç»Ÿã€‚è‡ªä»AutoLayouté—®ä¸–ä»¥æ¥ï¼Œé€æ­¥å¾—åˆ°äº†iOSå¼€å‘è€…ä»¬çš„é’çï¼Œå°¤å…¶æ˜¯iPhone6æœºå‹å°ºå¯¸çš„å‡ºç°ã€‚</p>
<a id="more"></a>
<p>AutoLayoutå æ®UIå¸ƒå±€çš„ä¸»è¦é¢†å¯¼ä½ç½®ä¾èµ–äºå®ƒçš„ç‰¹æ®Šæ€§ï¼š</p>
<ul>
<li>åŸºäºçº¦æŸï¼šå’Œä»¥å¾€å®šä¹‰frameçš„ä½ç½®å’Œå°ºå¯¸ä¸åŒï¼ŒAutoLayoutçš„ä½ç½®ç¡®å®šæ˜¯ä»¥æ‰€è°“ç›¸å¯¹ä½ç½®çš„çº¦æŸæ¥å®šä¹‰çš„ï¼Œæ¯”å¦‚xåæ ‡ä¸ºsuperViewçš„ä¸­å¿ƒï¼Œyåæ ‡ä¸ºå±å¹•åº•éƒ¨ä¸Šæ–¹10åƒç´ ç­‰</li>
<li>æè¿°æ€§ï¼š çº¦æŸçš„å®šä¹‰å’Œå„ä¸ªviewçš„å…³ç³»ä½¿ç”¨æ¥è¿‘è‡ªç„¶è¯­è¨€æˆ–è€…å¯è§†åŒ–è¯­è¨€ï¼ˆç¨åä¼šæåˆ°ï¼‰çš„æ–¹æ³•æ¥è¿›è¡Œæè¿°</li>
<li>å¸ƒå±€ç³»ç»Ÿï¼šå³å­—é¢æ„æ€ï¼Œç”¨æ¥è´Ÿè´£ç•Œé¢çš„å„ä¸ªå…ƒç´ çš„ä½ç½®ã€‚</li>
</ul>
<h1 id="AutoLayoutä½¿ç”¨åŸç†"><a href="#AutoLayoutä½¿ç”¨åŸç†" class="headerlink" title="AutoLayoutä½¿ç”¨åŸç†"></a>AutoLayoutä½¿ç”¨åŸç†</h1><h2 id="åˆ›å»ºçº¦æŸ"><a href="#åˆ›å»ºçº¦æŸ" class="headerlink" title="åˆ›å»ºçº¦æŸ"></a>åˆ›å»ºçº¦æŸ</h2><p>IOS6ä¸­æ–°åŠ å…¥äº†ä¸€ä¸ªç±»ï¼Œ<code>NSLayoutConstraint</code>,å®ƒçš„çº¦æŸæ»¡è¶³ä¸€ä¸ªå…¬å¼</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">item1.attribute = multiplier â¨‰ item2.attribute + constant</span><br></pre></td></tr></table></figure>
<p>ç›¸åº”å…¬å¼çš„ä»£ç ä¸º<br><figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//view_1(çº¢è‰²)top è·ç¦»self.viewçš„top</span></span><br><span class="line"><span class="built_in">NSLayoutConstraint</span> *view_1TopToSuperViewTop = [<span class="built_in">NSLayoutConstraint</span> constraintWithItem:view_1</span><br><span class="line">                                  attribute:<span class="built_in">NSLayoutAttributeTop</span></span><br><span class="line">                                  relatedBy:<span class="built_in">NSLayoutRelationEqual</span></span><br><span class="line">                                  toItem:<span class="keyword">self</span>.view</span><br><span class="line">                                  attribute:<span class="built_in">NSLayoutAttributeTop</span></span><br><span class="line">                                  multiplier:<span class="number">1</span></span><br><span class="line">                                  constant:<span class="number">30</span>];</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œå¯¹åº”çš„çº¦æŸæ˜¯â€œview_1çš„é¡¶éƒ¨ï¼ˆyï¼‰ï¼ self.viewçš„é¡¶éƒ¨(y)*1 + 30â€ã€‚</p>
<h2 id="æ·»åŠ çº¦æŸ"><a href="#æ·»åŠ çº¦æŸ" class="headerlink" title="æ·»åŠ çº¦æŸ"></a>æ·»åŠ çº¦æŸ</h2><p>åœ¨åˆ›å»ºçº¦æŸåï¼Œéœ€è¦å°†å…¶æ·»åŠ åˆ°ä½œç”¨çš„viewä¸Šã€‚UIViewæ·»åŠ çº¦æŸçš„å®ä¾‹æ–¹æ³•</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)addConstraint:(<span class="built_in">NSLayoutConstraint</span> *)constraint <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br><span class="line">- (<span class="keyword">void</span>)addConstraints:(<span class="built_in">NSArray</span>&lt;__kindof <span class="built_in">NSLayoutConstraint</span> *&gt; *)constraints <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">6</span>_0);</span><br></pre></td></tr></table></figure>
<p>UIViewä¸­çš„ä¸€ä¸ªå±æ€§<code>translatesAutoresizingMaskIntoConstraints</code></p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœä½ å®šä¹‰çš„viewæƒ³ç”¨autolayoutï¼Œå°±å°†</span></span><br><span class="line">translatesAutoresizingMaskIntoConstraints = <span class="literal">NO</span>;</span><br><span class="line"><span class="comment">//å¦‚æœä½ ä½¿ç”¨çš„ä¸æ˜¯autolayoutï¼Œå°±å°†</span></span><br><span class="line">translatesAutoresizingMaskIntoConstraints = <span class="literal">YES</span>;</span><br></pre></td></tr></table></figure>
<p>çº¦æŸçš„å±æ€§</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th style="text-align:center">autolayout å¯¹åº”å±æ€§</th>
<th style="text-align:right">æ„ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>left</td>
<td style="text-align:center">NSLayoutAttributeLeft</td>
<td style="text-align:right">å·¦è¾¹æ¡†</td>
</tr>
<tr>
<td>top</td>
<td style="text-align:center">NSLayoutAttributeTop</td>
<td style="text-align:right">ä¸Šè¾¹æ¡†</td>
</tr>
<tr>
<td>right</td>
<td style="text-align:center">NSLayoutAttributeRight</td>
<td style="text-align:right">å³è¾¹æ¡†</td>
</tr>
<tr>
<td>bottom</td>
<td style="text-align:center">NSLayoutAttributeBottom</td>
<td style="text-align:right">ä¸‹è¾¹æ¡†</td>
</tr>
<tr>
<td>centerX</td>
<td style="text-align:center">NSLayoutAttributeCenterX</td>
<td style="text-align:right">centerçš„Xåæ ‡</td>
</tr>
<tr>
<td>centerY</td>
<td style="text-align:center">NSLayoutAttributeCenterY</td>
<td style="text-align:right">centerçš„Yåæ ‡</td>
</tr>
<tr>
<td>width</td>
<td style="text-align:center">NSLayoutAttributeWidth</td>
<td style="text-align:right">å®½åº¦</td>
</tr>
<tr>
<td>height</td>
<td style="text-align:center">NSLayoutAttributeHeight</td>
<td style="text-align:right">é«˜åº¦</td>
</tr>
<tr>
<td>leading</td>
<td style="text-align:center">NSLayoutAttributeLeading</td>
<td style="text-align:right">æ­£å¸¸æƒ…å†µä¸‹ç­‰åŒäºleft</td>
</tr>
<tr>
<td>trailing</td>
<td style="text-align:center">NSLayoutAttributeTrailing</td>
<td style="text-align:right">æ­£å¸¸æƒ…å†µä¸‹ç­‰åŒäºright</td>
</tr>
<tr>
<td>baseline</td>
<td style="text-align:center">NSLayoutAttributeBaseline</td>
<td style="text-align:right">å¯¹é½åŸºçº¿</td>
</tr>
<tr>
<td>leftMargin</td>
<td style="text-align:center">NSLayoutAttributeLeftMargin</td>
<td style="text-align:right">å·¦è¾¹çš„Margin</td>
</tr>
<tr>
<td>rightMargin</td>
<td style="text-align:center">NSLayoutAttributeRightMargin</td>
<td style="text-align:right">å³è¾¹çš„Margin</td>
</tr>
<tr>
<td>topMargin</td>
<td style="text-align:center">NSLayoutAttributeTopMargin</td>
<td style="text-align:right">é¡¶éƒ¨çš„Margin</td>
</tr>
<tr>
<td>bottomMargin</td>
<td style="text-align:center">NSLayoutAttributeBottomMargin</td>
<td style="text-align:right">åº•éƒ¨çš„Margin</td>
</tr>
<tr>
<td>leadingMargin</td>
<td style="text-align:center">NSLayoutAttributeLeadingMargin</td>
<td style="text-align:right">å‰å¯¼ï¼ˆåŸºæœ¬ç­‰äºleftï¼‰Margin</td>
</tr>
<tr>
<td>trailingMargin</td>
<td style="text-align:center">NSLayoutAttributeTrailingMargin</td>
<td style="text-align:right">åå°¾ï¼ˆåŸºæœ¬ç­‰äºtailï¼‰Margin</td>
</tr>
<tr>
<td>centerXWithinMargins</td>
<td style="text-align:center">NSLayoutAttributeCenterXWithinMargins</td>
<td style="text-align:right">ä¸­å¿ƒXåæ ‡Margin</td>
</tr>
<tr>
<td>centerYWithinMargins</td>
<td style="text-align:center">NSLayoutAttributeCenterYWithinMargins</td>
<td style="text-align:right">ä¸­å¿ƒYåæ ‡Margin</td>
</tr>
</tbody>
</table>
<p>å½“ç„¶ï¼Œå¦‚ä½•æ·»åŠ ä¹Ÿæœ‰ç›¸åº”çš„è§„åˆ™ã€‚</p>
<h3 id="å¯¹å…¶ä»–çš„viewæ²¡æœ‰ä»»ä½•å…³ç³»æ—¶ï¼Œæ·»åŠ åˆ°è‡ªå·±çš„viewä¸Š"><a href="#å¯¹å…¶ä»–çš„viewæ²¡æœ‰ä»»ä½•å…³ç³»æ—¶ï¼Œæ·»åŠ åˆ°è‡ªå·±çš„viewä¸Š" class="headerlink" title="å¯¹å…¶ä»–çš„viewæ²¡æœ‰ä»»ä½•å…³ç³»æ—¶ï¼Œæ·»åŠ åˆ°è‡ªå·±çš„viewä¸Š"></a>å¯¹å…¶ä»–çš„viewæ²¡æœ‰ä»»ä½•å…³ç³»æ—¶ï¼Œæ·»åŠ åˆ°è‡ªå·±çš„viewä¸Š</h3><p>æ¯”å¦‚è¯´æ·»åŠ ä¸€ä¸ªæŒ‰é’®çš„å®½å’Œé«˜çš„çº¦æŸï¼Œå¯¹å…¶ä»–çš„viewæ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåˆ™å°†çº¦æŸæ·»åŠ åˆ°è‡ªå·±èº«ä¸Šã€‚</p>
<p>ä¸ºæŒ‰é’®æ·»åŠ ä¸€ä¸ªå®½å’Œé«˜ä¸ºä¸¤ç™¾çš„çº¦æŸ<br><figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"ViewController.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="keyword">IBOutlet</span> <span class="built_in">UIButton</span> *btn1;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">// Do any additional setup after loading the view, typically from a nib.</span></span><br><span class="line">    <span class="built_in">NSLayoutConstraint</span> *c1 = [<span class="built_in">NSLayoutConstraint</span> constraintWithItem:<span class="keyword">self</span>.btn1 attribute:<span class="built_in">NSLayoutAttributeWidth</span> relatedBy:<span class="built_in">NSLayoutRelationEqual</span> toItem:<span class="literal">nil</span> attribute:<span class="built_in">NSLayoutAttributeWidth</span> multiplier:<span class="number">1</span> constant:<span class="number">200</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSLayoutConstraint</span> *c2 = [<span class="built_in">NSLayoutConstraint</span> constraintWithItem:<span class="keyword">self</span>.btn1 attribute:<span class="built_in">NSLayoutAttributeHeight</span> relatedBy:<span class="built_in">NSLayoutRelationEqual</span> toItem:<span class="literal">nil</span> attribute:<span class="built_in">NSLayoutAttributeHeight</span> multiplier:<span class="number">1</span> constant:<span class="number">200</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">self</span>.btn1.translatesAutoresizingMaskIntoConstraints = <span class="literal">NO</span>;</span><br><span class="line">    [<span class="keyword">self</span>.btn1 addConstraint:c1];</span><br><span class="line">    [<span class="keyword">self</span>.btn1 addConstraint:c2];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></p>
<h3 id="å¯¹äºä¸¤ä¸ªåŒå±‚çº§viewä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œåˆ™æ·»åŠ åˆ°ä»–ä»¬çš„çˆ¶Viewä¸Š"><a href="#å¯¹äºä¸¤ä¸ªåŒå±‚çº§viewä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œåˆ™æ·»åŠ åˆ°ä»–ä»¬çš„çˆ¶Viewä¸Š" class="headerlink" title="å¯¹äºä¸¤ä¸ªåŒå±‚çº§viewä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œåˆ™æ·»åŠ åˆ°ä»–ä»¬çš„çˆ¶Viewä¸Š"></a>å¯¹äºä¸¤ä¸ªåŒå±‚çº§viewä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œåˆ™æ·»åŠ åˆ°ä»–ä»¬çš„çˆ¶Viewä¸Š</h3><p>ä¾‹å¦‚<code>3.1</code>ä¸<code>3.2</code>ä¸ºåŒå±‚çº§viewï¼Œçº¦æŸå…³ç³»åˆ™æ·»åŠ åˆ°çˆ¶view<code>2.1</code>ä¸Šã€‚</p>
<p><img src="auto1.png" alt></p>
<p>æ·»åŠ äº†ä¸€ä¸ªè“è‰²viewçš„ä¸Šè¾¹çº¿ä¸ç»¿è‰²viewçš„ä¸‹è¾¹çº¿å¯¹å…¶çš„çº¦æŸï¼Œä¸¤ä¸ªviewä¸ºåŒçº§çº¦æŸï¼Œåˆ™æ·»åŠ åˆ°äº†çˆ¶viewä¸Šã€‚</p>
<p><img src="auto2.png" alt></p>
<h3 id="å¯¹äºä¸¤ä¸ªä¸åŒå±‚çº§çš„viewä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œåˆ™æ·»åŠ åˆ°å®ƒä»¬æœ€è¿‘çš„å…±åŒçš„çˆ¶viewä¸Š"><a href="#å¯¹äºä¸¤ä¸ªä¸åŒå±‚çº§çš„viewä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œåˆ™æ·»åŠ åˆ°å®ƒä»¬æœ€è¿‘çš„å…±åŒçš„çˆ¶viewä¸Š" class="headerlink" title="å¯¹äºä¸¤ä¸ªä¸åŒå±‚çº§çš„viewä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œåˆ™æ·»åŠ åˆ°å®ƒä»¬æœ€è¿‘çš„å…±åŒçš„çˆ¶viewä¸Š"></a>å¯¹äºä¸¤ä¸ªä¸åŒå±‚çº§çš„viewä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œåˆ™æ·»åŠ åˆ°å®ƒä»¬æœ€è¿‘çš„å…±åŒçš„çˆ¶viewä¸Š</h3><p>ä¾‹å¦‚<code>3.3</code>ä¸<code>3.5</code>ä¸ºåŒå±‚çº§viewï¼Œçº¦æŸå…³ç³»åˆ™æ·»åŠ åˆ°çˆ¶view<code>1</code>ä¸Šã€‚</p>
<p><img src="auto3.png" alt></p>
<p>ä½†æ˜¯ç›¸å¯¹äºè¿™ç§æƒ…å†µåº”è¯¥ç”¨çš„å¾ˆå°‘ã€‚</p>
<h3 id="å¯¹äºä¸¤ä¸ªæœ‰å±‚æ¬¡å…³ç³»çš„viewä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œåˆ™æ·»åŠ åˆ°å±‚æ¬¡è¾ƒé«˜çš„é‚£ä¸ªviewä¸Š"><a href="#å¯¹äºä¸¤ä¸ªæœ‰å±‚æ¬¡å…³ç³»çš„viewä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œåˆ™æ·»åŠ åˆ°å±‚æ¬¡è¾ƒé«˜çš„é‚£ä¸ªviewä¸Š" class="headerlink" title="å¯¹äºä¸¤ä¸ªæœ‰å±‚æ¬¡å…³ç³»çš„viewä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œåˆ™æ·»åŠ åˆ°å±‚æ¬¡è¾ƒé«˜çš„é‚£ä¸ªviewä¸Š"></a>å¯¹äºä¸¤ä¸ªæœ‰å±‚æ¬¡å…³ç³»çš„viewä¹‹é—´çš„çº¦æŸå…³ç³»ï¼Œåˆ™æ·»åŠ åˆ°å±‚æ¬¡è¾ƒé«˜çš„é‚£ä¸ªviewä¸Š</h3><p>ä¾‹å¦‚<code>1</code>å’Œ<code>2.3</code>ä¸ºçˆ¶å­å…³ç³»çš„viewï¼Œçº¦æŸå…³ç³»åˆ™æ·»åŠ åˆ°view<code>1</code>ä¸Š</p>
<p><img src="auto5.png" alt></p>
<h1 id="åˆ·æ–°çº¦æŸ"><a href="#åˆ·æ–°çº¦æŸ" class="headerlink" title="åˆ·æ–°çº¦æŸ"></a>åˆ·æ–°çº¦æŸ</h1><p>å¯ä»¥é€šè¿‡<code>setNeedsUpdateConstraints</code>å’Œ<code>layoutIfNeeded</code>ä¸¤ä¸ªæ–¹æ³•æ¥åˆ·æ–°çº¦æŸï¼Œä½¿å¾—UIViewé‡æ–°å¸ƒå±€ã€‚</p>
<h1 id="Masonryæ¡†æ¶"><a href="#Masonryæ¡†æ¶" class="headerlink" title="Masonryæ¡†æ¶"></a>Masonryæ¡†æ¶</h1><p>Masonryæ˜¯AutoLayoutçš„ä¸€ä¸ªç¬¬ä¸‰æ–¹ç±»åº“ï¼Œç”¨é“¾å¼è¯­æ³•å°è£…äº†å†—é•¿çš„AutoLayoutä»£ç </p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="built_in">NSArray</span> *)mas_makeConstraints:(<span class="keyword">void</span>(^)(MASConstraintMaker *make))block;</span><br><span class="line">- (<span class="built_in">NSArray</span> *)mas_updateConstraints:(<span class="keyword">void</span>(^)(MASConstraintMaker *make))block;</span><br><span class="line">- (<span class="built_in">NSArray</span> *)mas_remakeConstraints:(<span class="keyword">void</span>(^)(MASConstraintMaker *make))block;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">mas_makeConstraints åªè´Ÿè´£æ–°å¢çº¦æŸ Autolayoutä¸èƒ½åŒæ—¶å­˜åœ¨ä¸¤æ¡é’ˆå¯¹äºåŒä¸€å¯¹è±¡çš„çº¦æŸ å¦åˆ™ä¼šæŠ¥é”™ </span></span><br><span class="line"><span class="comment">mas_updateConstraints é’ˆå¯¹ä¸Šé¢çš„æƒ…å†µ ä¼šæ›´æ–°åœ¨blockä¸­å‡ºç°çš„çº¦æŸ ä¸ä¼šå¯¼è‡´å‡ºç°ä¸¤ä¸ªç›¸åŒçº¦æŸçš„æƒ…å†µ</span></span><br><span class="line"><span class="comment">mas_remakeConstraints åˆ™ä¼šæ¸…é™¤ä¹‹å‰çš„æ‰€æœ‰çº¦æŸ ä»…ä¿ç•™æœ€æ–°çš„çº¦æŸ</span></span><br><span class="line"><span class="comment">ä¸‰ç§å‡½æ•°å–„åŠ åˆ©ç”¨ å°±å¯ä»¥åº”å¯¹å„ç§æƒ…å†µäº†</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>å¸¸ç”¨å±æ€§</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¹˜ä»¥</span></span><br><span class="line">- (MASConstraint * (^)(<span class="built_in">CGFloat</span> multiplier))multipliedBy;</span><br><span class="line"><span class="comment">//é™¤ä»¥</span></span><br><span class="line">- (MASConstraint * (^)(<span class="built_in">CGFloat</span> divider))dividedBy;</span><br><span class="line"><span class="comment">//ä¼˜å…ˆçº§</span></span><br><span class="line">- (MASConstraint * (^)(MASLayoutPriority priority))priority;</span><br></pre></td></tr></table></figure>
<h1 id="Visual-Format-Language"><a href="#Visual-Format-Language" class="headerlink" title="Visual Format Language"></a>Visual Format Language</h1><p>VFL(Visual Format Language)å…è®¸ä½ ä½¿ç”¨ä¸€ç§ASCIIæ ¼å¼çš„å­—ç¬¦ä¸²å®šä¹‰çº¦æŸ. é€šè¿‡ä¸€è¡Œä»£ç , ä½ å¯ä»¥åœ¨æ°´å¹³æˆ–è€…å‚ç›´æ–¹å‘ä¸ŠæŒ‡å®šå¤šä¸ªçº¦æŸ, è¿™è·Ÿä¸€æ¬¡åªèƒ½åˆ›å»ºä¸€ä¸ªçº¦æŸç›¸æ¯”ä¼šèŠ‚çœå¤§é‡çš„ä»£ç é‡ã€‚</p>
<ul>
<li>åˆ›å»ºæ°´å¹³å’Œå‚ç›´çº¦æŸ</li>
<li>åœ¨VFLä¸­ä½¿ç”¨<code>views</code></li>
<li>åœ¨VFLä¸­ä½¿ç”¨<code>metrics</code></li>
<li>ä½¿ç”¨layout optionså¸ƒå±€ç•Œé¢</li>
<li>ä½¿ç”¨layout guides</li>
</ul>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="https://www.jianshu.com/p/7b61998c6d8f" target="_blank" rel="noopener">https://www.jianshu.com/p/7b61998c6d8f</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML5è¯­ä¹‰æ€§æ ‡ç­¾å…¼å®¹è§£å†³</title>
    <url>/2019/03/02/HTML5%E8%AF%AD%E4%B9%89%E6%80%A7%E6%A0%87%E7%AD%BE%E5%85%BC%E5%AE%B9%E8%A7%A3%E5%86%B3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ç°åœ¨å¤§éƒ¨åˆ†çš„æµè§ˆå™¨éƒ½èƒ½å¤Ÿå¾ˆå¥½çš„æ”¯æŒH5ï¼Œä½†è¿˜æ˜¯ä¸å…å¾—æœ‰ä¸€äº›æµè§ˆå™¨æ˜¯ä¸èƒ½å¤Ÿæ”¯æŒHTML5çš„æ–°ç‰¹æ€§åŠå…¶ä¸€äº›æ–°æ ‡ç­¾ï¼Œç‰¹åˆ«æ˜¯åœ¨IE8ä»¥ä¸‹çš„æµè§ˆå™¨ã€‚</p>
<a id="more"></a>
<h1 id="å…¼å®¹åŠæ³•"><a href="#å…¼å®¹åŠæ³•" class="headerlink" title="å…¼å®¹åŠæ³•"></a>å…¼å®¹åŠæ³•</h1><h2 id="ç¬¬ä¸€ç§"><a href="#ç¬¬ä¸€ç§" class="headerlink" title="ç¬¬ä¸€ç§"></a>ç¬¬ä¸€ç§</h2><p>é€šè¿‡<code>document.createElement(&quot;nav&quot;);</code>çš„åŠæ³•æ¥é€ä¸ªåˆ›å»ºæ ‡ç­¾å…ƒç´ ï¼Œä½†æ˜¯é€šè¿‡å…¶åŠæ³•è¿˜éœ€è¦å®šä¹‰å¥½å…¶å…ƒç´ çš„CSSæ ·å¼ã€‚</p>
<h2 id="ç¬¬äºŒç§"><a href="#ç¬¬äºŒç§" class="headerlink" title="ç¬¬äºŒç§"></a>ç¬¬äºŒç§</h2><p>ä½¿ç”¨jsæ’ä»¶ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯<code>html5shiv</code>ï¼ŒBootCDNæœ‰æä¾›,<a href="https://www.bootcdn.cn/html5shiv/" target="_blank" rel="noopener">é“¾æ¥</a></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/html5shiv/r29/html5.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="ç»ˆæè§£å†³åŠæ³•"><a href="#ç»ˆæè§£å†³åŠæ³•" class="headerlink" title="ç»ˆæè§£å†³åŠæ³•"></a>ç»ˆæè§£å†³åŠæ³•</h2><p>å•çº¯ä½¿ç”¨ç¬¬äºŒç§çš„æ—¶å€™ï¼Œæœ‰ä¸€äº›æµè§ˆå™¨æœ¬èº«å°±èƒ½å¤Ÿæ”¯æŒï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­è¿›è¡Œåˆ¤æ–­æ˜¯å¦éœ€è¦è¯¥js<br>ä½¿ç”¨æ¡ä»¶Hack</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»ˆæè§£å†³æ–¹æ¡ˆ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--[if lte IE 8]&gt;</span></span><br><span class="line"><span class="comment">        &lt;script src="https://cdn.bootcss.com/html5shiv/r29/html5.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">    &lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ˜¯å¦éœ€è¦å…¼å®¹å¯ä»¥çœ‹ä¸šåŠ¡æ˜¯å¦éœ€è¦ï¼Œä¹Ÿå¯ä»¥æç¤ºç”¨æˆ·è¿›è¡Œæ›´æ¢æµè§ˆå™¨ï¼Œæ¯•ç«ŸIEæ˜¯ä¸ªå‘çˆ¹çš„æµè§ˆå™¨ã€‚</p>
]]></content>
      <categories>
        <category>HTML</category>
      </categories>
      <tags>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>Objective-Cä¹‹Block</title>
    <url>/2019/03/01/Objective-C%E4%B9%8BBlock/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å…³äºBlock"><a href="#å…³äºBlock" class="headerlink" title="å…³äºBlock"></a>å…³äºBlock</h1><p>åœ¨iOS4.0ä¹‹åï¼Œblockæ¨ªç©ºå‡ºä¸–ï¼Œå®ƒæœ¬èº«å°è£…äº†ä¸€æ®µä»£ç å¹¶å°†è¿™æ®µä»£ç å½“åšå˜é‡ï¼Œé€šè¿‡block()çš„æ–¹å¼è¿›è¡Œå›è°ƒã€‚</p>
<a id="more"></a>
<blockquote>
<p>blockçš„ä»£ç æ˜¯å†…è”çš„ï¼Œæ•ˆç‡é«˜äºå‡½æ•°è°ƒç”¨<br>blockå¯¹äºå¤–éƒ¨å˜é‡é»˜è®¤æ˜¯åªè¯»å±æ€§<br>blockè¢«Objective-Cçœ‹æˆæ˜¯å¯¹è±¡å¤„ç†</p>
</blockquote>
<p>å¯¹äºblockçš„åº•å±‚å®ç°åœ¨ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šèµ„æ–™äº†ï¼Œå…¶æºç æ›´æ˜¯å¯ä»¥åœ¨<code>opensource.apple.com</code>ä¸Šä¸‹è½½ï¼Œå› æ­¤ï¼Œæœ¬æ–‡æ›´ç€é‡äºå¯¹äºblockçš„åŸºæœ¬åº”ç”¨ã€‚</p>
<h1 id="è®¤è¯†Block"><a href="#è®¤è¯†Block" class="headerlink" title="è®¤è¯†Block"></a>è®¤è¯†Block</h1><blockquote>
<p>Blockï¼šå¸¦æœ‰è‡ªåŠ¨å˜é‡çš„åŒ¿åå‡½æ•°ï¼Œå®ƒæ˜¯Cè¯­è¨€çš„æ‹“å±•åŠŸèƒ½ï¼Œä¹‹æ‰€ä»¥æ˜¯æ‰©å±•ï¼Œæ˜¯å› ä¸ºCè¯­è¨€ä¸å…è®¸å­˜åœ¨è¿™æ ·çš„åŒ¿åå‡½æ•°</p>
</blockquote>
<ul>
<li><p>åŒ¿åå‡½æ•°ï¼šåŒ¿åå‡½æ•°æ˜¯æŒ‡ä¸å¸¦å‡½æ•°åç§°çš„å‡½æ•°</p>
</li>
<li><p>å¸¦æœ‰è‡ªåŠ¨å˜é‡</p>
<p>è¿™æ˜¯å› ä¸ºBlockæ‹¥æœ‰æ•è·å¤–éƒ¨å˜é‡çš„åŠŸèƒ½ï¼Œåœ¨Blockä¸­è®¿é—®ä¸€ä¸ªå¤–éƒ¨çš„å±€éƒ¨å˜é‡ï¼ŒBlockä¼šæŒæœ‰å®ƒçš„ä¸´æ—¶çŠ¶æ€ï¼Œè‡ªåŠ¨æ•è·å˜é‡å€¼ï¼Œå¤–éƒ¨å±€éƒ¨å˜é‡çš„å˜åŒ–ä¸ä¼šå½±å“å®ƒçš„çŠ¶æ€</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> val = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">void</span> (^blk)(<span class="keyword">void</span>) = ^&#123;</span><br><span class="line">  printf(<span class="string">"val=%d\n"</span>, val);</span><br><span class="line">&#125;;</span><br><span class="line">val = <span class="number">2</span>;</span><br><span class="line">blk(); <span class="comment">// è¿™é‡Œè¾“å‡ºçš„å€¼æ˜¯10ï¼Œè€Œä¸æ˜¯2ï¼Œå› ä¸ºblockåœ¨å®ç°æ—¶å°±ä¼šå¯¹å®ƒæ‰€åœ¨æ–¹æ³•ä¸­å®šä¹‰çš„æ ˆå˜é‡è¿›è¡Œä¸€æ¬¡åªè¯»æ‹·è´</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸ºäº†è§£å†³blockä¸èƒ½ä¿®æ”¹è‡ªåŠ¨å˜é‡çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ <code>__block</code> ä¿®é¥°</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">__block <span class="keyword">int</span> val = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">void</span> (^blk)(<span class="keyword">void</span>) = ^&#123;</span><br><span class="line"> printf(<span class="string">"val=%d\n"</span>, val);</span><br><span class="line">&#125;;</span><br><span class="line">val = <span class="number">2</span>;</span><br><span class="line">blk(); <span class="comment">// è¿™é‡Œè¾“å‡ºçš„å€¼æ˜¯2</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>ä¸€ä¸ªç®€å•çš„blockï¼Œå®ç°ä¸¤ä¸ªæ•°ä¹‹å’Œ</strong></p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span>(^sum)(<span class="keyword">int</span> a, <span class="keyword">int</span> b) = ^(<span class="keyword">int</span> a, <span class="keyword">int</span> b)&#123;</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%d"</span>,sum(<span class="number">3</span>,<span class="number">5</span>));</span><br></pre></td></tr></table></figure>
<p>ä»£ç å·¦è¾¹æ˜¯ä¸€ä¸ªblockçš„ç”Ÿå‘½ï¼Œintä¸ºblockçš„è¿”å›å€¼ç±»å‹ï¼Œ^ç¬¦å·åé¢ä¸ºblockçš„åç§°ï¼Œåé¢æ‹¬å·é‡Œé¢ä¸ºå‚æ•°åˆ—è¡¨ï¼Œè¯¥blockçš„å‚æ•°åˆ—è¡¨æœ‰ä¸¤ä¸ªï¼Œä¸¤ä¸ªéƒ½æ˜¯intç±»å‹å‚æ•°ã€‚å³è¾¹ä¸ºblockçš„å®šä¹‰ã€‚ç”¨ç½‘ä¸Šä¸€å¼ å›¾æ¥æ›´å¥½çš„è®¤è¯†åˆ°blockã€‚<br><img src="blockcode.jpeg" alt></p>
<p><strong>è¯­æ³•ï¼š</strong> ç”±äº Block çš„è¯­æ³•æ˜¯å¦‚æ­¤çš„æ™¦æ¶©éš¾è®°ï¼Œä»¥è‡³äºå‡ºç°äº† <a href="http://fuckingblocksyntax.com/" target="_blank" rel="noopener">fuckingblocksyntax</a> è¿™æ ·çš„ç½‘ç«™ä¸“é—¨ç”¨äºè®°å½• block çš„è¯­æ³•ï¼Œç¿»è¯‘å¹¶æ‘˜å½•å¦‚ä¸‹ï¼š</p>
<p>ä½œä¸ºå˜é‡:</p>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">returnType (^blockName)(parameterTypes) = ^returnType(parameters) &#123;...&#125;;</span><br></pre></td></tr></table></figure>
<p>ä½œä¸ºå±æ€§:</p>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) returnType (^blockName)(parameterTypes);</span><br></pre></td></tr></table></figure>
<p>ä½œä¸ºå‡½æ•°å£°æ˜ä¸­çš„å‚æ•°:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- (void)someMethodThatTakesABlock:(returnType (^)(parameterTypes))blockName;</span><br></pre></td></tr></table></figure>
<p>ä½œä¸ºå‡½æ•°è°ƒç”¨ä¸­çš„å‚æ•°:</p>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">[someObject someMethodThatTakesABlock:^returnType (parameters) &#123;...&#125;];</span><br></pre></td></tr></table></figure>
<p>ä½œä¸º typedef:</p>
<figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> returnType (^TypeName)(parameterTypes);</span><br><span class="line">TypeName blockName = ^returnType(parameters) &#123;...&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="Blockè®¿é—®å¤–éƒ¨åŸºæœ¬ç±»å‹æ•°æ®"><a href="#Blockè®¿é—®å¤–éƒ¨åŸºæœ¬ç±»å‹æ•°æ®" class="headerlink" title="Blockè®¿é—®å¤–éƒ¨åŸºæœ¬ç±»å‹æ•°æ®"></a>Blockè®¿é—®å¤–éƒ¨åŸºæœ¬ç±»å‹æ•°æ®</h1><p><strong>é™æ€å˜é‡ å’Œ å…¨å±€å˜é‡åœ¨åŠ å’Œä¸åŠ <code>__block</code>éƒ½ä¼šç›´æ¥å¼•ç”¨å˜é‡åœ°å€ã€‚ä¹Ÿå°±æ„å‘³ç€ å¯ä»¥ä¿®æ”¹å˜é‡çš„å€¼ã€‚åœ¨æ²¡æœ‰åŠ <code>__block</code>å‚æ•°çš„æƒ…å†µä¸‹ã€‚</strong></p>
<p>åŸºæœ¬ç±»å‹å¸¸é‡æ—¶ï¼Œçœ‹ä¸€æ®µä»£ç </p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</span><br><span class="line">    <span class="keyword">@autoreleasepool</span> &#123;</span><br><span class="line">        <span class="comment">// insert code here...</span></span><br><span class="line">        <span class="built_in">CGPoint</span> p = <span class="built_in">CGPointMake</span>(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">        <span class="keyword">void</span>(^bt)(<span class="keyword">void</span>) = ^()&#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"%f , %f"</span>, p.x, p.y);</span><br><span class="line">        &#125;;</span><br><span class="line">        bt();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">2019-03-01 11:35:15.244937+0800 BlockDemo[866:40789] 10.000000 , 10.000000</span><br><span class="line">Program ended with <span class="built_in">exit</span> code: 0</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°blockå¯ä»¥ç›´æ¥è®¿é—®åˆ°å¤–éƒ¨çš„å±€éƒ¨å˜é‡ã€‚ä½†æ˜¯blockå†…ä½¿ç”¨å¤–éƒ¨çš„å˜é‡ç›¸å½“äºæ‹·è´äº†ä¸€ä»½å¤–éƒ¨å˜é‡æ¥ä½¿ç”¨ï¼Œå¹¶ä¸èƒ½ç›´æ¥ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ï¼Œä¾‹å¦‚</p>
<p><img src="block1.png" alt></p>
<p>ç¼–è¯‘å™¨ç›´æ¥è¿›è¡ŒæŠ¥é”™ï¼Œä½†æ˜¯å¦‚æœæƒ³ç›´æ¥ä¿®æ”¹å¤–éƒ¨çš„å±€éƒ¨å˜é‡çš„å€¼ï¼Œé‚£å°±éœ€è¦åœ¨å¤–éƒ¨çš„å±€éƒ¨å˜é‡å‰é¢åŠ ä¸Š<code>__block</code>çš„å£°æ˜ã€‚</p>
<p><img src="block2.png" alt></p>
<h1 id="Blockè®¿é—®å¤–éƒ¨å¸¸é‡å˜é‡"><a href="#Blockè®¿é—®å¤–éƒ¨å¸¸é‡å˜é‡" class="headerlink" title="Blockè®¿é—®å¤–éƒ¨å¸¸é‡å˜é‡"></a>Blockè®¿é—®å¤–éƒ¨å¸¸é‡å˜é‡</h1><p><code>NSString *a = @&quot;hello&quot;;</code> a ä¸ºå¸¸é‡å˜é‡ï¼Œ@â€œhelloâ€ä¸ºå¸¸é‡ã€‚ï¼‰â€”â€“ä¸åŠ <strong>blockç±»å‹ block ä¼šå¼•ç”¨å¸¸é‡çš„åœ°å€<code>ï¼ˆæµ…æ‹·è´ï¼‰</code>ã€‚åŠ </strong>blockç±»å‹ blockä¼šå»å¼•ç”¨å¸¸é‡å˜é‡ï¼ˆå¦‚ï¼šaå˜é‡ï¼Œa = @â€abcâ€.å¯ä»¥ä»»æ„ä¿®æ”¹a æŒ‡å‘çš„å†…å®¹ã€‚ï¼‰çš„åœ°å€ã€‚ </p>
<p>block ä¼šæ‹·è´å˜é‡å†…å®¹åˆ°è‡ªå·±çš„æ ˆå†…å­˜ä¸Šï¼Œä»¥ä¾¿æ‰§è¡Œæ—¶å¯ä»¥è°ƒç”¨ã€‚ ä½†å¹¶ä¸æ˜¯å¯¹str å†…å®¹åšäº†æ·±æ‹·è´ï¼Œé‡æ–°ç”³è¯·å†…å­˜ã€‚</p>
<p>å› ä¸ºstr æ˜¯æ ˆå†…å­˜ä¸Šçš„å˜é‡ï¼ŒæŒ‡å‘ ä¸€ä¸ªå¸¸é‡åŒºçš„@â€œhelloâ€. ç¼–è¯‘å™¨åšçš„ä¼˜åŒ–æ˜¯   å½“block å»æ‹·è´str æŒ‡å‘å†…å®¹æ—¶å‘ç°æ˜¯ä¸ªå¸¸é‡ï¼Œ</p>
<p>æ‰€ä»¥ä¼šå»å¼•ç”¨ @â€œhelloâ€ çš„æŒ‡é’ˆï¼Œæ²¡å¿…è¦å†å–ç”³è¯·ä¸€å—å†…å­˜ã€‚</p>
<h1 id="Blockè®¿é—®å¤–éƒ¨å¯¹è±¡å˜é‡"><a href="#Blockè®¿é—®å¤–éƒ¨å¯¹è±¡å˜é‡" class="headerlink" title="Blockè®¿é—®å¤–éƒ¨å¯¹è±¡å˜é‡"></a>Blockè®¿é—®å¤–éƒ¨å¯¹è±¡å˜é‡</h1><p><em>å¦‚ï¼ˆMyClass </em>classã€Block blockï¼‰ã€‚ è¿™é‡Œblock ä¹Ÿæ˜¯â€ç±»â€œå¯¹è±¡ï¼ˆç±»ä¼¼å¯¹è±¡ï¼Œå…¶åŒ…å«isaæŒ‡é’ˆ,clang åç¼–è¯‘å¯ä»¥æŸ¥çœ‹ã€‚å› ä¸ºå®ƒä¸åƒä»NSObject ç»§æ‰¿ä¸‹æ¥çš„å¯¹è±¡éƒ½æ”¯æŒ retainã€copyã€releaseï¼‰ã€‚*</p>
<p>Blockçš„copyã€retainã€releaseæ“ä½œ<br>ä¸åŒäºNSObjecçš„copyã€retainã€releaseæ“ä½œï¼š</p>
<p>Block_copyä¸copyç­‰æ•ˆï¼ŒBlock_releaseä¸releaseç­‰æ•ˆï¼›</p>
<ul>
<li>Block_copyä¸copyç­‰æ•ˆï¼ŒBlock_releaseä¸releaseç­‰æ•ˆï¼›</li>
<li>å¯¹Blockä¸ç®¡æ˜¯retainã€copyã€releaseéƒ½ä¸ä¼šæ”¹å˜å¼•ç”¨è®¡æ•°retainCountï¼ŒretainCountå§‹ç»ˆæ˜¯1ï¼›</li>
<li>NSGlobalBlockï¼šretainã€copyã€releaseæ“ä½œéƒ½æ— æ•ˆï¼›</li>
<li>NSStackBlockï¼šretainã€releaseæ“ä½œæ— æ•ˆï¼Œå¿…é¡»æ³¨æ„çš„æ˜¯ï¼ŒNSStackBlockåœ¨å‡½æ•°è¿”å›åï¼ŒBlockå†…å­˜å°†è¢«å›æ”¶ã€‚å³ä½¿retainä¹Ÿæ²¡ç”¨ã€‚å®¹æ˜“çŠ¯çš„é”™è¯¯æ˜¯[[mutableAarry addObject:stackBlock]ï¼Œåœ¨å‡½æ•°å‡ºæ ˆåï¼Œä»mutableAarryä¸­å–åˆ°çš„stackBlockå·²ç»è¢«å›æ”¶ï¼Œå˜æˆäº†é‡æŒ‡é’ˆã€‚æ­£ç¡®çš„åšæ³•æ˜¯å…ˆå°†stackBlock copyåˆ°å †ä¸Šï¼Œç„¶ååŠ å…¥æ•°ç»„ï¼š[mutableAarry addObject:[[stackBlock copy] autorelease]]ã€‚æ”¯æŒcopyï¼Œcopyä¹‹åç”Ÿæˆæ–°çš„NSMallocBlockç±»å‹å¯¹è±¡</li>
<li>NSMallocBlockæ”¯æŒretainã€releaseï¼Œè™½ç„¶retainCountå§‹ç»ˆæ˜¯1ï¼Œä½†å†…å­˜ç®¡ç†å™¨ä¸­ä»ç„¶ä¼šå¢åŠ ã€å‡å°‘è®¡æ•°ã€‚copyä¹‹åä¸ä¼šç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œåªæ˜¯å¢åŠ äº†ä¸€æ¬¡å¼•ç”¨ï¼Œç±»ä¼¼retainï¼›</li>
<li>å°½é‡ä¸è¦å¯¹Blockä½¿ç”¨retainæ“ä½œ</li>
</ul>
<h1 id="Blockçš„ä½¿ç”¨åœºæ™¯"><a href="#Blockçš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="Blockçš„ä½¿ç”¨åœºæ™¯"></a>Blockçš„ä½¿ç”¨åœºæ™¯</h1><ul>
<li><p>å£°æ˜Blockå±æ€§ åˆ©ç”¨Blockå±æ€§å“åº”äº‹ä»¶æˆ–ä¼ é€’æ•°æ®</p>
<p>UIViewController éœ€è¦ç›‘å¬TableViewä¸­Cellçš„æŸä¸ªæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ï¼Œæ—¢å¯ä»¥é€šè¿‡Delegateå›è°ƒï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨Blockå›è°ƒ Blockå›è°ƒçš„æ€è·¯ï¼š å£°æ˜ä¸€ä¸ªBlockå±æ€§ï¼Œæ³¨æ„è¿™é‡Œè¦ç”¨copyã€‚ åˆ©ç”¨Blockå±æ€§è¿›è¡Œå›è°ƒã€‚</p>
</li>
<li><p>æ–¹æ³•å‚æ•°ä¸ºBlock åˆ©ç”¨Blockå®ç°å›è°ƒ</p>
<p>ä»¥ <code>[UIView animateWithDuration:animations:]</code> ä¸ºä¾‹ï¼Œanimationsæ˜¯ä¸€ä¸ªblockå¯¹è±¡ï¼Œåˆ©ç”¨blockå®ç°è°ƒç”¨è€…ä¸UIViewä¹‹é—´çš„æ•°æ®ä¼ é€’</p>
</li>
<li><p>é“¾å¼è¯­æ³•</p>
<p>é“¾å¼ç¼–ç¨‹æ€æƒ³ï¼šå°†blockä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼ï¼Œä¸”è¿”å›å€¼çš„ç±»å‹ä¸ºè°ƒç”¨è€…æœ¬èº«ï¼Œå¹¶å°†è¯¥æ–¹æ³•ä»¥setterçš„å½¢å¼è¿”å›ï¼Œä»è€Œå®ç°è¿ç»­è°ƒç”¨</p>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  CaculateMaker.h</span></span><br><span class="line"><span class="comment">//  ChainBlockTestApp</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">CaculateMaker</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> result;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* è¿”å›ç±»å‹ CaculateMaker</span></span><br><span class="line"><span class="comment">* ä¼ å…¥å‚æ•° CGFloat num</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">- (CaculateMaker *(^)(<span class="built_in">CGFloat</span> num))add;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  CaculateMaker.m</span></span><br><span class="line"><span class="comment">//  ChainBlockTestApp</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"CaculateMaker.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">CaculateMaker</span></span></span><br><span class="line"></span><br><span class="line">- (CaculateMaker *(^)(<span class="built_in">CGFloat</span> num))add;&#123;</span><br><span class="line">    <span class="keyword">return</span> ^CaculateMaker *(<span class="built_in">CGFloat</span> num)&#123;</span><br><span class="line">        _result += num;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line">CaculateMaker *maker = [[CaculateMaker alloc] init];</span><br><span class="line">maker.add(<span class="number">20</span>).add(<span class="number">30</span>);</span><br></pre></td></tr></table></figure>
<h1 id="ä¸ºä»€ä¹ˆBlockå±æ€§éœ€è¦ç”¨copyä¿®é¥°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆBlockå±æ€§éœ€è¦ç”¨copyä¿®é¥°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆBlockå±æ€§éœ€è¦ç”¨copyä¿®é¥°ï¼Ÿ"></a>ä¸ºä»€ä¹ˆBlockå±æ€§éœ€è¦ç”¨copyä¿®é¥°ï¼Ÿ</h1><p><strong>å› ä¸ºåœ¨MRCæƒ…å†µä¸‹å¦‚æœBlockå±æ€§ä¸ä½¿ç”¨copyä¿®é¥°ï¼Œåœ¨ä½¿ç”¨ä¸­ä¼šå‡ºç°å´©æºƒï¼Œåœ¨ARCæƒ…å†µä¸‹ï¼ŒBlockå±æ€§ä½¿ç”¨strongä¿®é¥°ä¼šè¢«é»˜è®¤è¿›è¡Œcopyï¼Œæ‰€ä»¥ARCæƒ…å†µä¸‹ï¼ŒBlockå±æ€§å¯ä»¥ä½¿ç”¨strongæˆ–copyä¿®é¥°ï¼Œä¸ç„¶ä¼šå‡ºç°å´©æºƒã€‚</strong></p>
<p>Blockåœ¨å†…å­˜ä¸­çš„ä½ç½®åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</p>
<ul>
<li><p><strong>NSGlobalBlock</strong> æ˜¯ä½äºå…¨å±€åŒºçš„blockï¼Œå®ƒæ˜¯è®¾ç½®åœ¨ç¨‹åºçš„æ•°æ®åŒºä¸­ã€‚</p>
</li>
<li><p><strong>NSStackBlock</strong> æ˜¯ä½äºæ ˆåŒºï¼Œå½“è¶…å‡ºå˜é‡ä½œç”¨åŸŸæ—¶ï¼Œæ ˆä¸Šçš„Blockä»¥åŠ__blockå˜é‡éƒ½ä¼šè¢«é”€æ¯ã€‚</p>
</li>
<li><p><strong>NSMallocBlock</strong> æ˜¯ä½äºå †åŒºï¼Œåœ¨å˜é‡ä½œç”¨åŸŸç»“æŸæ—¶ä¸å—å½±å“ã€‚</p>
</li>
</ul>
<p>è¿™ä¸‰ç§ç±»å‹å¯¹åº”ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š</p>
<ul>
<li><p>Blockä¸­æ²¡æœ‰æˆªè·è‡ªåŠ¨å˜é‡æ—¶Blockç±»å‹æ˜¯<code>__NSGlobalBlock__</code></p>
</li>
<li><p>Blockä¸­æˆªè·è‡ªåŠ¨å˜é‡æ—¶Blockç±»å‹æ˜¯<code>__NSStackBlock__</code></p>
</li>
<li><p>å †ä¸­çš„Blockæ— æ³•ç›´æ¥åˆ›å»ºï¼Œå½“å¯¹<code>__NSStackBlock__</code>ç±»å‹çš„Blockè¿›è¡Œcopyæ—¶ï¼Œä¼šå°†Blockæ”¾åˆ°å †ä¸­ï¼ŒBlockç±»å‹å˜ä¸º<code>__NSMallocBlock</code></p>
</li>
</ul>
<p>å½“Blockç±»å‹æ˜¯<code>__NSStackBlock__</code>æ—¶ï¼Œä¸€æ—¦è¶…å‡ºäº†å˜é‡ä½œç”¨åŸŸï¼Œæ ˆä¸Šçš„Blockä»¥åŠ<code>__block</code>å˜é‡å°±ä¼šè¢«é”€æ¯ï¼Œä»è€Œå¯¼è‡´è°ƒç”¨Blockå›è°ƒæ—¶å´©æºƒã€‚å› æ­¤ï¼ŒBlockå±æ€§éœ€è¦ç”¨copyä¿®é¥°æ¥é¿å…è¿™ç§æƒ…å†µã€‚</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)click:(<span class="keyword">id</span>)sender &#123;</span><br><span class="line">        TestClass *test = [[TestClass alloc] init];</span><br><span class="line">        </span><br><span class="line">        __block <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// å¼±å¼•ç”¨ï¼Œblockç±»å‹æ˜¯__NSStackBlock__  å½“TestClassæ‰§è¡Œå›è°ƒæ—¶å¿…å´© EXC_BAD_ACCESS</span></span><br><span class="line">        test.weakBlock = ^() &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"ok"</span>);</span><br><span class="line">            a = <span class="number">2</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// blockç±»å‹æ˜¯__NSStackBlock__  å½“TestClassæ‰§è¡Œå›è°ƒæ—¶å¿…å´© EXC_BAD_ACCESS</span></span><br><span class="line">        test.assignBlock = ^() &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"ok"</span>);</span><br><span class="line">            a = <span class="number">3</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// blockç±»å‹æ˜¯__MallocBlock__ æ­£å¸¸æ‰§è¡Œ</span></span><br><span class="line">        test.copyBlock = ^() &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"ok"</span>);</span><br><span class="line">            a = <span class="number">4</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// blockç±»å‹æ˜¯__MallocBlock__ æ­£å¸¸æ‰§è¡Œ</span></span><br><span class="line">        test.strongBlock = ^() &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"ok"</span>);</span><br><span class="line">            a = <span class="number">5</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"copy property: %@"</span>, test.copyBlock);</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"assign property: %@"</span>, test.assignBlock);</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"weak property: %@"</span>, test.weakBlock);</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"strong property: %@"</span>, test.strongBlock);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        [test start];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Blockå¾ªç¯å¼•ç”¨"><a href="#Blockå¾ªç¯å¼•ç”¨" class="headerlink" title="Blockå¾ªç¯å¼•ç”¨"></a>Blockå¾ªç¯å¼•ç”¨</h1><p>æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µblockå¯¼è‡´å¾ªç¯å¼•ç”¨çš„ä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">XYZBlockKeeper</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">copy</span>) <span class="keyword">void</span> (^block)(<span class="keyword">void</span>);</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">XYZBlockKeeper</span></span></span><br><span class="line">- (<span class="keyword">void</span>)configureBlock &#123;</span><br><span class="line">    <span class="keyword">self</span>.block = ^&#123;</span><br><span class="line">        [<span class="keyword">self</span> doSomething];    <span class="comment">// capturing a strong reference to self</span></span><br><span class="line">                               <span class="comment">// creates a strong reference cycle</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>block åœ¨æ•è·å¤–éƒ¨å˜é‡çš„æ—¶å€™ï¼Œä¼šä¿æŒä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œå½“åœ¨ block ä¸­æ•è· <code>self</code> æ—¶ï¼Œç”±äºå¯¹è±¡ä¼šå¯¹ block è¿›è¡Œ <code>copy</code>ï¼Œäºæ˜¯ä¾¿å½¢æˆäº†å¼ºå¼•ç”¨å¾ªç¯ï¼š</p>
<p>ä¸ºäº†é¿å…å¼ºå¼•ç”¨å¾ªç¯ï¼Œæœ€å¥½æ•è·ä¸€ä¸ª <code>self</code> çš„å¼±å¼•ç”¨ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)configureBlock &#123;</span><br><span class="line">    XYZBlockKeeper * __<span class="keyword">weak</span> weakSelf = <span class="keyword">self</span>;</span><br><span class="line">    <span class="keyword">self</span>.block = ^&#123;</span><br><span class="line">        [weakSelf doSomething];   <span class="comment">// capture the weak reference</span></span><br><span class="line">                                  <span class="comment">// to avoid the reference cycle</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨å¼±å¼•ç”¨ä¼šå¸¦æ¥å¦ä¸€ä¸ªé—®é¢˜ï¼Œ<code>weakSelf</code> æœ‰å¯èƒ½ä¼šä¸º nilï¼Œå¦‚æœå¤šæ¬¡è°ƒç”¨ <code>weakSelf</code> çš„æ–¹æ³•ï¼Œæœ‰å¯èƒ½åœ¨ block æ‰§è¡Œè¿‡ç¨‹ä¸­ <code>weakSelf</code>å˜ä¸º nilã€‚å› æ­¤éœ€è¦åœ¨ block ä¸­å°† <code>weakSelf</code> â€œå¼ºåŒ–â€œ</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line">__<span class="keyword">weak</span> __typeof__(<span class="keyword">self</span>) weakSelf = <span class="keyword">self</span>;</span><br><span class="line"><span class="built_in">NSBlockOperation</span> *op = [[[<span class="built_in">NSBlockOperation</span> alloc] init] autorelease];</span><br><span class="line">[ op addExecutionBlock:^ &#123;</span><br><span class="line">    __<span class="keyword">strong</span> __typeof__(<span class="keyword">self</span>) strongSelf = weakSelf;</span><br><span class="line">    [strongSelf doSomething];</span><br><span class="line">    [strongSelf doMoreThing];</span><br><span class="line">&#125; ];</span><br><span class="line">[someOperationQueue addOperation:op];</span><br></pre></td></tr></table></figure>
<p><code>__strong</code> è¿™ä¸€å¥åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå¦‚æœ WeakSelf è¿˜æ²¡æœ‰å˜æˆ nilï¼Œé‚£ä¹ˆå°±ä¼š retain selfï¼Œè®© self åœ¨ block æ‰§è¡ŒæœŸé—´ä¸ä¼šå˜ä¸º nilã€‚è¿™æ ·ä¸Šé¢çš„ <code>doSomething</code> å’Œ <code>doMoreThing</code> è¦ä¹ˆå…¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨å¤±è´¥ï¼Œä¸ä¼šå‡ºç°ä¸€ä¸ªæˆåŠŸä¸€ä¸ªå¤±è´¥ï¼Œå³æ‰§è¡Œåˆ°ä¸­é—´ <code>self</code> å˜æˆ nil çš„æƒ…å†µã€‚</p>
<p>å¹¶éæ‰€æœ‰çš„blockéƒ½å­˜åœ¨å¾ªç¯å¼•ç”¨ï¼Œä¸‹é¢åˆ—ä¸¾ä¸€äº›å¸¸è§çš„blockä½¿ç”¨çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// self--&gt;requestModel--&gt;block--&gt;self </span></span><br><span class="line">[<span class="keyword">self</span>.requestModel requestData:^(<span class="built_in">NSData</span> *data) &#123;</span><br><span class="line">    <span class="keyword">self</span>.name = <span class="string">@"leafly"</span>;</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">// è™½ç„¶å­˜åœ¨å¼•ç”¨ç¯ï¼Œä½†æ˜¯é€šè¿‡ä¸»åŠ¨é‡Šæ”¾requestModelæ‰“ç ´äº†å¾ªç¯</span></span><br><span class="line">[<span class="keyword">self</span>.requestModel requestData:^(<span class="built_in">NSData</span> *data) &#123;</span><br><span class="line">    <span class="keyword">self</span>.name = <span class="string">@"leafly"</span>;</span><br><span class="line">    <span class="keyword">self</span>.requestModel = <span class="literal">nil</span>;</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">// t--&gt;block--&gt;self ä¸å­˜åœ¨å¾ªç¯å¼•ç”¨</span></span><br><span class="line">Test *t = [[Test alloc] init];</span><br><span class="line"></span><br><span class="line">[t requestData:^(<span class="built_in">NSData</span> *data) &#123;</span><br><span class="line">    <span class="keyword">self</span>.name = <span class="string">@"leafly"</span>;</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">// AFNetworking--&gt;block--&gt;self ä¸å­˜åœ¨å¾ªç¯å¼•ç”¨</span></span><br><span class="line">[AFNetworking requestData:^(<span class="built_in">NSData</span> *data) &#123;</span><br><span class="line">    <span class="keyword">self</span>.name = <span class="string">@"lealfy"</span>;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>Blockçš„ç‰¹æ€§ä¹Ÿèµ‹äºˆäº†å®ƒè®¸å¤šçš„çµæ´»æ€§ï¼Œä½†æ˜¯ä¹Ÿä¼šå‡ºç°å¾ˆå¤šçš„ä¸€äº›å†…å­˜æ³„æ¼ï¼Œä¸æ˜“è°ƒè¯•çš„é—®é¢˜ï¼Œè¿˜è¦å¤šå¤šæ·±å…¥æ¢ç©¶ã€‚</p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
        <tag>Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title>IOSåŸºç¡€ - WKWebViewä½¿ç”¨</title>
    <url>/2019/02/28/IOS%E5%9F%BA%E7%A1%80-WKWebView%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>WKWebViewæ˜¯æ˜¾ç¤ºäº¤äº’å¼Webå†…å®¹çš„å¯¹è±¡ï¼Œä¾‹å¦‚ç”¨äºåº”ç”¨å†…æµè§ˆå™¨ã€‚</p>
<a id="more"></a>
<p><strong>WKWebViewå¯¹æ¯”UIWebViewçš„ä¼˜åŠ¿</strong></p>
<blockquote>
<p>1.WKWebViewçš„å†…å­˜å¼€é”€è¦æ¯”UIWebViewå°å¾ˆå¤š<br>2.æ‹¥æœ‰é«˜è¾¾60FPSæ»šåŠ¨åˆ·æ–°ç‡åŠå†…ç½®æ‰‹åŠ¿<br>3.æ”¯æŒäº†æ›´å¤šçš„HTML5ç‰¹æ€§<br>4.htmlé¡µé¢å’ŒWKWebViewäº¤äº’æ›´æ–¹ä¾¿<br>5.Safariç›¸åŒçš„JavaScriptå¼•æ“<br>6.æä¾›å¸¸ç”¨çš„å±æ€§ï¼Œå¦‚åŠ è½½ç½‘é¡µè¿›åº¦çš„å±æ€§estimatedProgress</p>
</blockquote>
<h1 id="WKWebView"><a href="#WKWebView" class="headerlink" title="WKWebView"></a><a href="https://developer.apple.com/documentation/webkit/wkwebview" target="_blank" rel="noopener">WKWebView</a></h1><h2 id="ç±»æ‘˜è¦"><a href="#ç±»æ‘˜è¦" class="headerlink" title="ç±»æ‘˜è¦"></a>ç±»æ‘˜è¦</h2><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WKWebView</span> : <span class="title">UIView</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p> ä»iOS 8.0å’ŒOS X 10.10å¼€å§‹ï¼Œä½¿ç”¨WKWebViewå°†Webå†…å®¹æ·»åŠ åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºã€‚ä¸è¦ä½¿ç”¨UIWebViewæˆ–WebViewã€‚</p>
</blockquote>
<h2 id="ç±»æ–¹æ³•"><a href="#ç±»æ–¹æ³•" class="headerlink" title="ç±»æ–¹æ³•"></a>ç±»æ–¹æ³•</h2><h3 id="ç¡®å®šWebKitæ˜¯å¦å¯ä»¥åŠ è½½å†…å®¹"><a href="#ç¡®å®šWebKitæ˜¯å¦å¯ä»¥åŠ è½½å†…å®¹" class="headerlink" title="ç¡®å®šWebKitæ˜¯å¦å¯ä»¥åŠ è½½å†…å®¹"></a>ç¡®å®šWebKitæ˜¯å¦å¯ä»¥åŠ è½½å†…å®¹</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">handlesURLScheme</span>(<span class="title">String</span>) -&gt; <span class="title">Bool</span></span></span><br><span class="line"><span class="class">//è¿”å›<span class="title">WebKit</span>æ˜¯å¦æœ¬æœºæ”¯æŒä½¿ç”¨ç‰¹å®š<span class="title">URL</span>æ–¹æ¡ˆåŠ è½½èµ„æºã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="åˆå§‹åŒ–Webè§†å›¾"><a href="#åˆå§‹åŒ–Webè§†å›¾" class="headerlink" title="åˆå§‹åŒ–Webè§†å›¾"></a>åˆå§‹åŒ–Webè§†å›¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> configuration: <span class="type">WKWebViewConfiguration</span></span><br><span class="line"><span class="comment">//ç”¨äºåˆå§‹åŒ–Webè§†å›¾çš„é…ç½®å‰¯æœ¬ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">init</span>(frame: <span class="type">CGRect</span>, configuration: <span class="type">WKWebViewConfiguration</span>)</span><br><span class="line"><span class="comment">//è¿”å›ä½¿ç”¨æŒ‡å®šæ¡†æ¶å’Œé…ç½®åˆå§‹åŒ–çš„Webè§†å›¾ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">init</span>?(coder: <span class="type">NSCoder</span>)</span><br></pre></td></tr></table></figure>
<h3 id="æ£€æŸ¥è§†å›¾ä¿¡æ¯"><a href="#æ£€æŸ¥è§†å›¾ä¿¡æ¯" class="headerlink" title="æ£€æŸ¥è§†å›¾ä¿¡æ¯"></a>æ£€æŸ¥è§†å›¾ä¿¡æ¯</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> scrollView: <span class="type">UIScrollView</span></span><br><span class="line"><span class="comment">//ä¸Webè§†å›¾å…³è”çš„æ»šåŠ¨è§†å›¾ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> title: <span class="type">String?</span></span><br><span class="line"><span class="comment">//å½“å‰é¡µé¢æ ‡é¢˜ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> url: <span class="type">URL?</span></span><br><span class="line"><span class="comment">//å½“å‰æ´»åŠ¨ç½‘å€ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> customUserAgent: <span class="type">String?</span></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> serverTrust: <span class="type">SecTrust?</span></span><br><span class="line"><span class="comment">//å½“å‰å·²æäº¤å¯¼èˆªçš„SecTrustRefå¯¹è±¡ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> certificateChain: [<span class="type">Any</span>]</span><br><span class="line"><span class="comment">//å½¢æˆå½“å‰å·²æäº¤å¯¼èˆªçš„è¯ä¹¦é“¾çš„å¯¹è±¡æ•°ç»„ã€‚ -- å¼ƒç”¨</span></span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®ä»£ç†"><a href="#è®¾ç½®ä»£ç†" class="headerlink" title="è®¾ç½®ä»£ç†"></a>è®¾ç½®ä»£ç†</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> navigationDelegate: <span class="type">WKNavigationDelegate?</span></span><br><span class="line"><span class="comment">//Webè§†å›¾çš„å¯¼èˆªå§”æ‰˜ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> uiDelegate: <span class="type">WKUIDelegate?</span></span><br><span class="line"><span class="comment">//Webè§†å›¾çš„ç”¨æˆ·ç•Œé¢å§”æ‰˜ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="åŠ è½½å†…å®¹"><a href="#åŠ è½½å†…å®¹" class="headerlink" title="åŠ è½½å†…å®¹"></a>åŠ è½½å†…å®¹</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> estimatedProgress: <span class="type">Double</span></span><br><span class="line"><span class="comment">//ä¼°è®¡å½“å‰å¯¼èˆªçš„åŠ è½½æ¯”ä¾‹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hasOnlySecureContent: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºé¡µé¢ä¸Šçš„æ‰€æœ‰èµ„æºæ˜¯å¦å·²é€šè¿‡å®‰å…¨åŠ å¯†çš„è¿æ¥åŠ è½½ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">loadHTMLString</span><span class="params">(String, baseURL: URL?)</span></span> -&gt; <span class="type">WKNavigation?</span></span><br><span class="line"><span class="comment">//è®¾ç½®ç½‘é¡µå†…å®¹å’ŒåŸºæœ¬URLã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> isLoading: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºè§†å›¾å½“å‰æ˜¯å¦æ­£åœ¨åŠ è½½å†…å®¹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reload</span><span class="params">()</span></span> -&gt; <span class="type">WKNavigation?</span></span><br><span class="line"><span class="comment">//é‡æ–°åŠ è½½å½“å‰é¡µé¢ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reload</span><span class="params">(<span class="keyword">Any</span>?)</span></span></span><br><span class="line"><span class="comment">//é‡æ–°åŠ è½½å½“å‰é¡µé¢ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reloadFromOrigin</span><span class="params">()</span></span> -&gt; <span class="type">WKNavigation?</span></span><br><span class="line"><span class="comment">//é‡æ–°åŠ è½½å½“å‰é¡µé¢ï¼Œå¦‚æœå¯èƒ½ï¼Œä½¿ç”¨ç¼“å­˜éªŒè¯æ¡ä»¶æ‰§è¡Œç«¯åˆ°ç«¯é‡æ–°éªŒè¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reloadFromOrigin</span><span class="params">(<span class="keyword">Any</span>?)</span></span></span><br><span class="line"><span class="comment">//é‡æ–°åŠ è½½å½“å‰é¡µé¢ï¼Œå¦‚æœå¯èƒ½ï¼Œä½¿ç”¨ç¼“å­˜éªŒè¯æ¡ä»¶æ‰§è¡Œç«¯åˆ°ç«¯é‡æ–°éªŒè¯ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">stopLoading</span><span class="params">()</span></span></span><br><span class="line"><span class="comment">//åœæ­¢åŠ è½½å½“å‰é¡µé¢ä¸Šçš„æ‰€æœ‰èµ„æºã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">stopLoading</span><span class="params">(<span class="keyword">Any</span>?)</span></span></span><br><span class="line"><span class="comment">//åœæ­¢åŠ è½½å½“å‰é¡µé¢ä¸Šçš„æ‰€æœ‰èµ„æºã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">load</span><span class="params">(Data, mimeType: String, characterEncodingName: String, baseURL: URL)</span></span> -&gt; <span class="type">WKNavigation?</span></span><br><span class="line"><span class="comment">//è®¾ç½®ç½‘é¡µå†…å®¹å’ŒåŸºæœ¬URLã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">loadFileURL</span><span class="params">(URL, allowingReadAccessTo: URL)</span></span> -&gt; <span class="type">WKNavigation?</span></span><br><span class="line"><span class="comment">//å¯¼èˆªåˆ°æ–‡ä»¶ç³»ç»Ÿä¸Šè¯·æ±‚çš„æ–‡ä»¶URL</span></span><br></pre></td></tr></table></figure>
<h3 id="ç¼©æ”¾å†…å®¹"><a href="#ç¼©æ”¾å†…å®¹" class="headerlink" title="ç¼©æ”¾å†…å®¹"></a>ç¼©æ”¾å†…å®¹</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> allowsMagnification: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ”¾å¤§æ‰‹åŠ¿æ˜¯å¦ä¼šæ›´æ”¹Webè§†å›¾çš„æ”¾å¤§ç‡ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> magnification: <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//é¡µé¢å†…å®¹å½“å‰ç¼©æ”¾çš„å› å­ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setMagnification</span><span class="params">(CGFloat, centeredAt: CGPoint)</span></span></span><br><span class="line"><span class="comment">//æŒ‰æŒ‡å®šå› å­ç¼©æ”¾é¡µé¢å†…å®¹ï¼Œå¹¶å°†ç»“æœé›†ä¸­åœ¨æŒ‡å®šç‚¹ä¸Šã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="å¯¼èˆª"><a href="#å¯¼èˆª" class="headerlink" title="å¯¼èˆª"></a>å¯¼èˆª</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> allowsBackForwardNavigationGestures: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ°´å¹³æ»‘åŠ¨æ‰‹åŠ¿æ˜¯å¦ä¼šè§¦å‘åé€€åˆ—è¡¨å¯¼èˆªã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> backForwardList: <span class="type">WKBackForwardList</span></span><br><span class="line"><span class="comment">//Webè§†å›¾çš„åé€€åˆ—è¡¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> canGoBack: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºåå‘åˆ—è¡¨ä¸­æ˜¯å¦æœ‰å¯ä»¥å¯¼èˆªåˆ°çš„åé€€é¡¹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> canGoForward: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºåå‘åˆ—è¡¨ä¸­æ˜¯å¦å­˜åœ¨å¯ä»¥å¯¼èˆªåˆ°çš„å‰å‘é¡¹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> allowsLinkPreview: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºç¡®å®šæŒ‰ä¸‹é“¾æ¥æ˜¯å¦æ˜¾ç¤ºé“¾æ¥ç›®æ ‡çš„é¢„è§ˆã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">goBack</span><span class="params">()</span></span> -&gt; <span class="type">WKNavigation?</span></span><br><span class="line"><span class="comment">//å¯¼èˆªåˆ°åé€€åˆ—è¡¨ä¸­çš„åé€€é¡¹ç›®ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">goBack</span><span class="params">(<span class="keyword">Any</span>?)</span></span></span><br><span class="line"><span class="comment">//å¯¼èˆªåˆ°åé€€åˆ—è¡¨ä¸­çš„åé€€é¡¹ç›®ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">goForward</span><span class="params">()</span></span> -&gt; <span class="type">WKNavigation?</span></span><br><span class="line"><span class="comment">//å¯¼èˆªåˆ°åé€€åˆ—è¡¨ä¸­çš„å‰è¿›é¡¹ç›®ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">goForward</span><span class="params">(<span class="keyword">Any</span>?)</span></span></span><br><span class="line"><span class="comment">//å¯¼èˆªåˆ°åé€€åˆ—è¡¨ä¸­çš„å‰è¿›é¡¹ç›®ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">go</span><span class="params">(to: WKBackForwardListItem)</span></span> -&gt; <span class="type">WKNavigation?</span></span><br><span class="line"><span class="comment">//å¯¼èˆªåˆ°åé€€åˆ—è¡¨ä¸­çš„é¡¹ç›®å¹¶å°†å…¶è®¾ç½®ä¸ºå½“å‰é¡¹ç›®ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">load</span><span class="params">(URLRequest)</span></span> -&gt; <span class="type">WKNavigation?</span></span><br><span class="line"><span class="comment">//å¯¼èˆªåˆ°è¯·æ±‚çš„URLã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æ‰§è¡ŒJS"><a href="#æ‰§è¡ŒJS" class="headerlink" title="æ‰§è¡ŒJS"></a>æ‰§è¡ŒJS</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">evaluateJavaScript</span><span class="params">(String, completionHandler: <span class="params">(<span class="params">(<span class="keyword">Any</span>?, Error?)</span></span></span></span> -&gt; <span class="type">Void</span>)?)</span><br><span class="line"><span class="comment">//JavaScriptå­—ç¬¦ä¸²ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æ‹æ‘„å¿«ç…§"><a href="#æ‹æ‘„å¿«ç…§" class="headerlink" title="æ‹æ‘„å¿«ç…§"></a>æ‹æ‘„å¿«ç…§</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">takeSnapshot</span><span class="params">(with: WKSnapshotConfiguration?, completionHandler: <span class="params">(UIImage?, Error?)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line"><span class="comment">//æ‹æ‘„è§†å›¾å¯è§è§†å£çš„å¿«ç…§ã€‚</span></span><br></pre></td></tr></table></figure>
<h2 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h2><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"><span class="keyword">import</span> WebKit</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span>, <span class="title">WKUIDelegate</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> webView: <span class="type">WKWebView!</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">loadView</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> webConfiguration = <span class="type">WKWebViewConfiguration</span>()</span><br><span class="line">        webView = <span class="type">WKWebView</span>(frame: .zero, configuration: webConfiguration)</span><br><span class="line">        webView.uiDelegate = <span class="keyword">self</span></span><br><span class="line">        view = webView</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> myURL = <span class="type">URL</span>(string:<span class="string">"https://www.apple.com"</span>)</span><br><span class="line">        <span class="keyword">let</span> myRequest = <span class="type">URLRequest</span>(url: myURL!)</span><br><span class="line">      	<span class="comment">//åŠ è½½URL</span></span><br><span class="line">        webView.load(myRequest)</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>è¦å…è®¸ç”¨æˆ·åœ¨ç½‘é¡µå†å²è®°å½•ä¸­å‰åç§»åŠ¨ï¼Œè¯·ä½¿ç”¨å’Œæ–¹æ³•ä½œä¸ºæŒ‰é’®æ“ä½œã€‚å½“ç”¨æˆ·æ— æ³•å‘æŸä¸ªæ–¹å‘ç§»åŠ¨æ—¶ï¼Œè¯·ä½¿ç”¨å’Œå±æ€§ç¦ç”¨æŒ‰é’®ã€‚<a href="https://developer.apple.com/documentation/webkit/wkwebview/1414952-goback" target="_blank" rel="noopener"><code>goBack()</code></a>ã€<a href="https://developer.apple.com/documentation/webkit/wkwebview/1414993-goforward" target="_blank" rel="noopener"><code>goForward()</code></a>ã€<a href="https://developer.apple.com/documentation/webkit/wkwebview/1414966-cangoback" target="_blank" rel="noopener"><code>canGoBack</code></a>ã€<a href="https://developer.apple.com/documentation/webkit/wkwebview/1414962-cangoforward" target="_blank" rel="noopener"><code>canGoForward</code></a>ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒWebè§†å›¾ä¼šè‡ªåŠ¨å°†Webå†…å®¹ä¸­æ˜¾ç¤ºçš„ç”µè¯å·ç è½¬æ¢ä¸ºç”µè¯é“¾æ¥ã€‚ç‚¹å‡»ç”µè¯é“¾æ¥åï¼Œç”µè¯åº”ç”¨ç¨‹åºå°†å¯åŠ¨å¹¶æ‹¨æ‰“è¯¥å·ç ã€‚è‹¥è¦å…³é—­æ­¤é»˜è®¤è¡Œä¸ºï¼Œè¯·ä½¿ç”¨ä¸åŒ…å«è¯¥æ ‡å¿—çš„ä½åŸŸè®¾ç½®è¯¥å±æ€§ã€‚<a href="https://developer.apple.com/documentation/webkit/wkwebviewconfiguration/1641937-datadetectortypes" target="_blank" rel="noopener"><code>dataDetectorTypes</code></a>ã€<a href="https://developer.apple.com/documentation/webkit/wkdatadetectortypes" target="_blank" rel="noopener"><code>WKDataDetectorTypes</code></a>ã€<a href="https://developer.apple.com/documentation/webkit/wkdatadetectortypes/1641917-phonenumber" target="_blank" rel="noopener"><code>phoneNumber</code></a></p>
<p>æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ä»¥ç¬¬ä¸€æ¬¡åœ¨Webè§†å›¾ä¸­æ˜¾ç¤ºçš„æ–¹å¼ä»¥ç¼–ç¨‹æ–¹å¼è®¾ç½®Webå†…å®¹çš„æ¯”ä¾‹ã€‚æ­¤åï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨æ‰‹åŠ¿æ¥æ”¹å˜æ¯”ä¾‹ã€‚<a href="https://developer.apple.com/documentation/webkit/wkwebview/1414996-setmagnification" target="_blank" rel="noopener"><code>setMagnification(_:centeredAt:)</code></a></p>
<h1 id="WKNavigationDelegate"><a href="#WKNavigationDelegate" class="headerlink" title="WKNavigationDelegate"></a><a href="https://developer.apple.com/documentation/webkit/wknavigationdelegate" target="_blank" rel="noopener">WKNavigationDelegate</a></h1><p>WKNavigationDelegateåè®®çš„æ–¹æ³•å¯å¸®åŠ©æ‚¨å®ç°åœ¨Webè§†å›¾æ¥å—ï¼ŒåŠ è½½å’Œå®Œæˆå¯¼èˆªè¯·æ±‚çš„è¿‡ç¨‹ä¸­è§¦å‘çš„è‡ªå®šä¹‰è¡Œä¸ºã€‚</p>
<h2 id="åè®®æ–¹æ³•"><a href="#åè®®æ–¹æ³•" class="headerlink" title="åè®®æ–¹æ³•"></a>åè®®æ–¹æ³•</h2><h3 id="å¯åŠ¨å¯¼èˆª"><a href="#å¯åŠ¨å¯¼èˆª" class="headerlink" title="å¯åŠ¨å¯¼èˆª"></a>å¯åŠ¨å¯¼èˆª</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, didCommit: WKNavigation!)</span></span></span><br><span class="line"><span class="comment">//åœ¨Webè§†å›¾å¼€å§‹æ¥æ”¶Webå†…å®¹æ—¶è°ƒç”¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, didStartProvisionalNavigation: WKNavigation!)</span></span></span><br><span class="line"><span class="comment">//åœ¨Webè§†å›¾ä¸­å¼€å§‹åŠ è½½Webå†…å®¹æ—¶è°ƒç”¨ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="å“åº”æœåŠ¡å™¨æ“ä½œ"><a href="#å“åº”æœåŠ¡å™¨æ“ä½œ" class="headerlink" title="å“åº”æœåŠ¡å™¨æ“ä½œ"></a>å“åº”æœåŠ¡å™¨æ“ä½œ</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, didCommit: WKNavigation!)</span></span></span><br><span class="line"><span class="comment">//åœ¨Webè§†å›¾å¼€å§‹æ¥æ”¶Webå†…å®¹æ—¶è°ƒç”¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, didReceiveServerRedirectForProvisionalNavigation: WKNavigation!)</span></span></span><br><span class="line"><span class="comment">//åœ¨Webè§†å›¾æ”¶åˆ°æœåŠ¡å™¨é‡å®šå‘æ—¶è°ƒç”¨ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="èº«ä»½éªŒè¯"><a href="#èº«ä»½éªŒè¯" class="headerlink" title="èº«ä»½éªŒè¯"></a>èº«ä»½éªŒè¯</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, didReceive: URLAuthenticationChallenge, completionHandler: <span class="params">(URLSession.AuthChallengeDisposition, URLCredential?)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line"><span class="comment">//åœ¨Webè§†å›¾éœ€è¦å“åº”èº«ä»½éªŒè¯è´¨è¯¢æ—¶è°ƒç”¨ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, didFail: WKNavigation!, withError: Error)</span></span></span><br><span class="line"><span class="comment">//åœ¨å¯¼èˆªæœŸé—´å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, didFailProvisionalNavigation: WKNavigation!, withError: Error)</span></span></span><br><span class="line"><span class="comment">//åœ¨Webè§†å›¾åŠ è½½å†…å®¹æ—¶å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="è·Ÿè¸ªåŠ è½½è¿›åº¦"><a href="#è·Ÿè¸ªåŠ è½½è¿›åº¦" class="headerlink" title="è·Ÿè¸ªåŠ è½½è¿›åº¦"></a>è·Ÿè¸ªåŠ è½½è¿›åº¦</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, didFinish: WKNavigation!)</span></span></span><br><span class="line"><span class="comment">//å¯¼èˆªå®Œæˆæ—¶è°ƒç”¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webViewWebContentProcessDidTerminate</span><span class="params">(WKWebView)</span></span></span><br><span class="line"><span class="comment">//åœ¨Webè§†å›¾çš„Webå†…å®¹è¿›ç¨‹ç»ˆæ­¢æ—¶è°ƒç”¨ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="å…è®¸å¯¼èˆª"><a href="#å…è®¸å¯¼èˆª" class="headerlink" title="å…è®¸å¯¼èˆª"></a>å…è®¸å¯¼èˆª</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, decidePolicyFor: WKNavigationAction, decisionHandler: <span class="params">(WKNavigationActionPolicy)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line"><span class="comment">//å†³å®šæ˜¯å…è®¸è¿˜æ˜¯å–æ¶ˆå¯¼èˆªã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, decidePolicyFor: WKNavigationResponse, decisionHandler: <span class="params">(WKNavigationResponsePolicy)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line"><span class="comment">//å†³å®šåœ¨çŸ¥é“å“åº”åæ˜¯å…è®¸è¿˜æ˜¯å–æ¶ˆå¯¼èˆªã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="å¯¼èˆªæ”¿ç­–"><a href="#å¯¼èˆªæ”¿ç­–" class="headerlink" title="å¯¼èˆªæ”¿ç­–"></a>å¯¼èˆªæ”¿ç­–</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">WKNavigationActionPolicy</span></span></span><br><span class="line"><span class="class">//ä»è¯¥æ–¹æ³•ä¼ å›å†³ç­–å¤„ç†ç¨‹åºçš„ç­–ç•¥ã€‚</span></span><br><span class="line"><span class="class"><span class="title">webView</span>(<span class="title">_</span>:<span class="title">decidePolicyFor</span>:<span class="title">decisionHandler</span>:)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">enum</span> <span class="title">WKNavigationResponsePolicy</span></span></span><br><span class="line"><span class="class">//ä»è¯¥æ–¹æ³•ä¼ å›å†³ç­–å¤„ç†ç¨‹åºçš„ç­–ç•¥ã€‚</span></span><br><span class="line"><span class="class"><span class="title">webView</span>(<span class="title">_</span>:<span class="title">decidePolicyFor</span>:<span class="title">decisionHandler</span>:)</span></span><br></pre></td></tr></table></figure>
<h1 id="WKUIDelegate"><a href="#WKUIDelegate" class="headerlink" title="WKUIDelegate"></a><a href="https://developer.apple.com/documentation/webkit/wkuidelegate" target="_blank" rel="noopener">WKUIDelegate</a></h1><p>WKUIDelegateåè®®æä¾›ç½‘é¡µçš„å‘ˆç°æ¥å£çš„æ–¹æ³•ï¼Œä¾‹å¦‚alertã€‚</p>
<p>WKWebViewå§”æ‰˜å®ç°æ­¤åè®®ä»¥æ§åˆ¶æ–°çª—å£çš„æ‰“å¼€ï¼Œå¢å¼ºç”¨æˆ·å•å‡»å…ƒç´ æ—¶æ˜¾ç¤ºçš„é»˜è®¤èœå•é¡¹çš„è¡Œä¸ºï¼Œä»¥åŠæ‰§è¡Œå…¶ä»–ä¸ç”¨æˆ·ç•Œé¢ç›¸å…³çš„ä»»åŠ¡ã€‚å¯ä»¥åœ¨å¤„ç†JavaScriptæˆ–å…¶ä»–æ’ä»¶å†…å®¹æ—¶è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚é»˜è®¤Webè§†å›¾å®ç°å‡å®šæ¯ä¸ªWebè§†å›¾æœ‰ä¸€ä¸ªçª—å£ï¼Œå› æ­¤éä¼ ç»Ÿç”¨æˆ·ç•Œé¢å¯èƒ½å®ç°ç”¨æˆ·ç•Œé¢å§”æ‰˜ã€‚</p>
<h2 id="åè®®æ–¹æ³•-1"><a href="#åè®®æ–¹æ³•-1" class="headerlink" title="åè®®æ–¹æ³•"></a>åè®®æ–¹æ³•</h2><h3 id="åˆ›å»ºWebè§†å›¾"><a href="#åˆ›å»ºWebè§†å›¾" class="headerlink" title="åˆ›å»ºWebè§†å›¾"></a>åˆ›å»ºWebè§†å›¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, createWebViewWith: WKWebViewConfiguration, <span class="keyword">for</span>: WKNavigationAction, windowFeatures: WKWindowFeatures)</span></span> -&gt; <span class="type">WKWebView?</span></span><br><span class="line"><span class="comment">//åˆ›å»ºæ–°çš„Webè§†å›¾ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æ˜¾ç¤ºUIé¢æ¿"><a href="#æ˜¾ç¤ºUIé¢æ¿" class="headerlink" title="æ˜¾ç¤ºUIé¢æ¿"></a>æ˜¾ç¤ºUIé¢æ¿</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, runJavaScriptAlertPanelWithMessage: String, initiatedByFrame: WKFrameInfo, completionHandler: <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºJavaScriptè­¦æŠ¥é¢æ¿ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, runJavaScriptConfirmPanelWithMessage: String, initiatedByFrame: WKFrameInfo, completionHandler: <span class="params">(Bool)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºJavaScriptç¡®è®¤é¢æ¿ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, runJavaScriptTextInputPanelWithPrompt: String, defaultText: String?, initiatedByFrame: WKFrameInfo, completionHandler: <span class="params">(String?)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºJavaScriptæ–‡æœ¬è¾“å…¥é¢æ¿ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="å…³é—­Webè§†å›¾"><a href="#å…³é—­Webè§†å›¾" class="headerlink" title="å…³é—­Webè§†å›¾"></a>å…³é—­Webè§†å›¾</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webViewDidClose</span><span class="params">(WKWebView)</span></span></span><br><span class="line"><span class="comment">//é€šçŸ¥æ‚¨çš„åº”ç”¨ç¨‹åºDOMçª—å£å·²æˆåŠŸå…³é—­ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æ˜¾ç¤ºä¸Šä¼ é¢æ¿"><a href="#æ˜¾ç¤ºä¸Šä¼ é¢æ¿" class="headerlink" title="æ˜¾ç¤ºä¸Šä¼ é¢æ¿"></a>æ˜¾ç¤ºä¸Šä¼ é¢æ¿</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, runOpenPanelWith: WKOpenPanelParameters, initiatedByFrame: WKFrameInfo, completionHandler: <span class="params">([URL]?)</span></span></span> -&gt; <span class="type">Void</span>)</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºæ–‡ä»¶ä¸Šä¼ é¢æ¿ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="å“åº”å¼ºåˆ¶è§¦æ‘¸æ“ä½œ"><a href="#å“åº”å¼ºåˆ¶è§¦æ‘¸æ“ä½œ" class="headerlink" title="å“åº”å¼ºåˆ¶è§¦æ‘¸æ“ä½œ"></a>å“åº”å¼ºåˆ¶è§¦æ‘¸æ“ä½œ</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, shouldPreviewElement: WKPreviewElementInfo)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ç¡®å®šç»™å®šå…ƒç´ æ˜¯å¦åº”æ˜¾ç¤ºé¢„è§ˆã€‚ -- å¼ƒç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, previewingViewControllerForElement: WKPreviewElementInfo, defaultActions: [WKPreviewActionItem])</span></span> -&gt; <span class="type">UIViewController?</span></span><br><span class="line"><span class="comment">//å½“ç”¨æˆ·æ‰§è¡Œçª¥è§†åŠ¨ä½œæ—¶è°ƒç”¨ã€‚ -- å¼ƒç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(WKWebView, commitPreviewingViewController: UIViewController)</span></span></span><br><span class="line"><span class="comment">//å½“ç”¨æˆ·åœ¨é¢„è§ˆä¸Šæ‰§è¡Œå¼¹å‡ºæ“ä½œæ—¶è°ƒç”¨ã€‚ -- å¼ƒç”¨</span></span><br></pre></td></tr></table></figure>
<h1 id="WKWebViewConfiguration"><a href="#WKWebViewConfiguration" class="headerlink" title="WKWebViewConfiguration"></a><a href="https://developer.apple.com/documentation/webkit/wkwebviewconfiguration" target="_blank" rel="noopener">WKWebViewConfiguration</a></h1><p>ç”¨äºåˆå§‹åŒ–Webè§†å›¾çš„å±æ€§é›†åˆã€‚ä½¿ç”¨è¯¥ç±»ï¼Œæ‚¨å¯ä»¥ç¡®å®šç½‘é¡µçš„å‘ˆç°æ—¶é—´ï¼Œå¤„ç†åª’ä½“æ’­æ”¾çš„æ–¹å¼ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©çš„é¡¹ç›®çš„ç²’åº¦ä»¥åŠè®¸å¤šå…¶ä»–é€‰é¡¹ã€‚<code>WKWebViewConfiguration</code>ä»…åœ¨é¦–æ¬¡åˆå§‹åŒ–Webè§†å›¾æ—¶ä½¿ç”¨ã€‚åˆ›å»ºåï¼Œæ‚¨æ— æ³•ä½¿ç”¨æ­¤ç±»æ›´æ”¹Webè§†å›¾çš„é…ç½®ã€‚</p>
<h2 id="ç±»æ–¹æ³•-1"><a href="#ç±»æ–¹æ³•-1" class="headerlink" title="ç±»æ–¹æ³•"></a>ç±»æ–¹æ³•</h2><h3 id="é…ç½®æ–°Webè§†å›¾çš„å±æ€§"><a href="#é…ç½®æ–°Webè§†å›¾çš„å±æ€§" class="headerlink" title="é…ç½®æ–°Webè§†å›¾çš„å±æ€§"></a>é…ç½®æ–°Webè§†å›¾çš„å±æ€§</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> applicationNameForUserAgent: <span class="type">String?</span></span><br><span class="line"><span class="comment">//ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²ä¸­ä½¿ç”¨çš„åº”ç”¨ç¨‹åºçš„åç§°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> preferences: <span class="type">WKPreferences</span></span><br><span class="line"><span class="comment">//Webè§†å›¾è¦ä½¿ç”¨çš„é¦–é€‰é¡¹å¯¹è±¡ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> processPool: <span class="type">WKProcessPool</span></span><br><span class="line"><span class="comment">//ä»ä¸­è·å–è§†å›¾çš„Webå†…å®¹è¿‡ç¨‹çš„è¿›ç¨‹æ± ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> userContentController: <span class="type">WKUserContentController</span></span><br><span class="line"><span class="comment">//JSæ³¨å…¥è„šæœ¬åˆ°WebView</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> websiteDataStore: <span class="type">WKWebsiteDataStore</span></span><br><span class="line"><span class="comment">//Webè§†å›¾è¦ä½¿ç”¨çš„ç½‘ç«™æ•°æ®å­˜å‚¨ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ç¡®å®šç½‘é¡µå¯ä¼¸ç¼©æ€§"><a href="#ç¡®å®šç½‘é¡µå¯ä¼¸ç¼©æ€§" class="headerlink" title="ç¡®å®šç½‘é¡µå¯ä¼¸ç¼©æ€§"></a>ç¡®å®šç½‘é¡µå¯ä¼¸ç¼©æ€§</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ignoresViewportScaleLimits: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºç¡®å®šå¯¹è±¡æ˜¯å¦åº”å§‹ç»ˆå…è®¸ç¼©æ”¾ç½‘é¡µã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®æ¸²æŸ“é¦–é€‰é¡¹"><a href="#è®¾ç½®æ¸²æŸ“é¦–é€‰é¡¹" class="headerlink" title="è®¾ç½®æ¸²æŸ“é¦–é€‰é¡¹"></a>è®¾ç½®æ¸²æŸ“é¦–é€‰é¡¹</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> suppressesIncrementalRendering: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºWebè§†å›¾æ˜¯å¦åœ¨å†…å®¹å‘ˆç°å®Œå…¨åŠ è½½åˆ°å†…å­˜ä¹‹å‰æŠ‘åˆ¶å†…å®¹å‘ˆç°ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®åª’ä½“æ’­æ”¾é¦–é€‰é¡¹"><a href="#è®¾ç½®åª’ä½“æ’­æ”¾é¦–é€‰é¡¹" class="headerlink" title="è®¾ç½®åª’ä½“æ’­æ”¾é¦–é€‰é¡¹"></a>è®¾ç½®åª’ä½“æ’­æ”¾é¦–é€‰é¡¹</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> allowsInlineMediaPlayback: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºHTML5è§†é¢‘æ˜¯å¦å†…è”æ’­æ”¾æˆ–ä½¿ç”¨æœ¬æœºå…¨å±æ§åˆ¶å™¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> allowsAirPlayForMediaPlayback: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦å…è®¸AirPlayã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> allowsPictureInPictureMediaPlayback: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºHTML5è§†é¢‘æ˜¯å¦å¯ä»¥æ’­æ”¾ç”»ä¸­ç”»ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mediaTypesRequiringUserActionForPlayback: <span class="type">WKAudiovisualMediaTypes</span></span><br><span class="line"><span class="comment">//ç¡®å®šå“ªäº›åª’ä½“ç±»å‹éœ€è¦ç”¨æˆ·æ‰‹åŠ¿æ‰èƒ½å¼€å§‹æ’­æ”¾ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mediaPlaybackAllowsAirPlay: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//allowsAirPlayForMediaPlayback -- å¼ƒç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> requiresUserActionForMediaPlayback: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºHTML5è§†é¢‘æ˜¯å¦è¦æ±‚ç”¨æˆ·å¼€å§‹æ’­æ”¾ï¼ˆtrueï¼‰æˆ–è§†é¢‘æ˜¯å¦å¯ä»¥è‡ªåŠ¨æ’­æ”¾ï¼ˆfalseï¼‰ã€‚ -- å¼ƒç”¨</span></span><br><span class="line"><span class="keyword">var</span> mediaPlaybackRequiresUserAction: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//mediaTypesRequiringUserActionForPlayback -- å¼ƒç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">WKAudiovisualMediaTypes</span></span></span><br><span class="line"><span class="class">//éœ€è¦ç”¨æˆ·æ‰‹åŠ¿æ‰èƒ½å¼€å§‹æ’­æ”¾çš„åª’ä½“ç±»å‹</span></span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®é€‰æ‹©ç²’åº¦"><a href="#è®¾ç½®é€‰æ‹©ç²’åº¦" class="headerlink" title="è®¾ç½®é€‰æ‹©ç²’åº¦"></a>è®¾ç½®é€‰æ‹©ç²’åº¦</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> selectionGranularity: <span class="type">WKSelectionGranularity</span></span><br><span class="line"><span class="comment">//ç”¨æˆ·å¯ä»¥åœ¨Webè§†å›¾ä¸­ä»¥äº¤äº’æ–¹å¼é€‰æ‹©å†…å®¹çš„ç²’åº¦çº§åˆ«ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">WKSelectionGranularity</span></span></span><br><span class="line"><span class="class">//ç”¨äºä»¥äº¤äº’æ–¹å¼åˆ›å»ºå’Œä¿®æ”¹é€‰æ‹©çš„ç²’åº¦ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="é€‰æ‹©ç”¨æˆ·ç•Œé¢æ–¹å‘æ€§"><a href="#é€‰æ‹©ç”¨æˆ·ç•Œé¢æ–¹å‘æ€§" class="headerlink" title="é€‰æ‹©ç”¨æˆ·ç•Œé¢æ–¹å‘æ€§"></a>é€‰æ‹©ç”¨æˆ·ç•Œé¢æ–¹å‘æ€§</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> userInterfaceDirectionPolicy: <span class="type">WKUserInterfaceDirectionPolicy</span></span><br><span class="line"><span class="comment">//ç”¨æˆ·ç•Œé¢å…ƒç´ çš„æ–¹å‘æ€§ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">WKUserInterfaceDirectionPolicy</span></span></span><br><span class="line"><span class="class">//è¯¥ç­–ç•¥ç”¨äºç¡®å®š<span class="title">Web</span>è§†å›¾ä¸­ç”¨æˆ·ç•Œé¢å…ƒç´ çš„æ–¹å‘æ€§ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="è¯†åˆ«æ•°æ®ç±»å‹"><a href="#è¯†åˆ«æ•°æ®ç±»å‹" class="headerlink" title="è¯†åˆ«æ•°æ®ç±»å‹"></a>è¯†åˆ«æ•°æ®ç±»å‹</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dataDetectorTypes: <span class="type">WKDataDetectorTypes</span></span><br><span class="line"><span class="comment">//æ‰€éœ€çš„æ•°æ®æ£€æµ‹ç±»å‹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">WKDataDetectorTypes</span></span></span><br><span class="line"><span class="class">//æ£€æµ‹åˆ°çš„æ•°æ®ç±»å‹ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="ä¸ºæ–°çš„URLæ–¹æ¡ˆæ·»åŠ å¤„ç†ç¨‹åº"><a href="#ä¸ºæ–°çš„URLæ–¹æ¡ˆæ·»åŠ å¤„ç†ç¨‹åº" class="headerlink" title="ä¸ºæ–°çš„URLæ–¹æ¡ˆæ·»åŠ å¤„ç†ç¨‹åº"></a>ä¸ºæ–°çš„URLæ–¹æ¡ˆæ·»åŠ å¤„ç†ç¨‹åº</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setURLSchemeHandler</span><span class="params">(WKURLSchemeHandler?, forURLScheme: String)</span></span></span><br><span class="line"><span class="comment">//ä¸ºç»™å®šçš„URLæ–¹æ¡ˆæ·»åŠ URLæ–¹æ¡ˆå¤„ç†ç¨‹åºå¯¹è±¡ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">urlSchemeHandler</span><span class="params">(forURLScheme: String)</span></span> -&gt; <span class="type">WKURLSchemeHandler?</span></span><br><span class="line"><span class="comment">//è¿”å›ç»™å®šURLæ–¹æ¡ˆçš„å½“å‰æ³¨å†Œçš„æ–¹æ¡ˆå¤„ç†ç¨‹åº</span></span><br></pre></td></tr></table></figure>
<h1 id="WKPreferences"><a href="#WKPreferences" class="headerlink" title="WKPreferences"></a><a href="https://developer.apple.com/documentation/webkit/wkpreferences" target="_blank" rel="noopener">WKPreferences</a></h1><p><code>WKPreferences</code>å¯¹è±¡å°è£…ç”¨äºwebè§†å›¾åå¥½è®¾ç½®ã€‚ä¸Webè§†å›¾å…³è”çš„é¦–é€‰é¡¹å¯¹è±¡ç”±å…¶Webè§†å›¾é…ç½®æŒ‡å®šã€‚</p>
<h2 id="ç±»æ–¹æ³•-2"><a href="#ç±»æ–¹æ³•-2" class="headerlink" title="ç±»æ–¹æ³•"></a>ç±»æ–¹æ³•</h2><h3 id="è®¾ç½®æ¸²æŸ“é¦–é€‰é¡¹-1"><a href="#è®¾ç½®æ¸²æŸ“é¦–é€‰é¡¹-1" class="headerlink" title="è®¾ç½®æ¸²æŸ“é¦–é€‰é¡¹"></a>è®¾ç½®æ¸²æŸ“é¦–é€‰é¡¹</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> minimumFontSize: <span class="type">CGFloat</span></span><br><span class="line"><span class="comment">//æœ€å°å­—ä½“å¤§å°ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tabFocusesLinks: <span class="type">Bool</span></span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®Javaå’ŒJavaScripté¦–é€‰é¡¹"><a href="#è®¾ç½®Javaå’ŒJavaScripté¦–é€‰é¡¹" class="headerlink" title="è®¾ç½®Javaå’ŒJavaScripté¦–é€‰é¡¹"></a>è®¾ç½®Javaå’ŒJavaScripté¦–é€‰é¡¹</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> javaEnabled: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦å¯ç”¨äº†Javaã€‚ -- å¼ƒç”¨</span></span><br><span class="line"><span class="keyword">var</span> javaScriptCanOpenWindowsAutomatically: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºJavaScriptæ˜¯å¦å¯ä»¥æ‰“å¼€çª—å£è€Œæ— éœ€ç”¨æˆ·äº¤äº’ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> javaScriptEnabled: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦å¯ç”¨JavaScriptã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> plugInsEnabled: <span class="type">Bool</span></span><br><span class="line"><span class="comment">//ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦å¯ç”¨äº†æ’ä»¶ã€‚ -- å¼ƒç”¨</span></span><br></pre></td></tr></table></figure>
<h1 id="WKProcessPool"><a href="#WKProcessPool" class="headerlink" title="WKProcessPool"></a><a href="https://developer.apple.com/documentation/webkit/wkprocesspool" target="_blank" rel="noopener">WKProcessPool</a></h1><p>WKProcessPoolå¯¹è±¡è¡¨ç¤ºWebå†…å®¹è¿›ç¨‹çš„æ± ã€‚</p>
<p>ä¸Webè§†å›¾å…³è”çš„è¿›ç¨‹æ± ç”±å…¶Webè§†å›¾é…ç½®æŒ‡å®šã€‚æ¯ä¸ªWebè§†å›¾éƒ½æœ‰è‡ªå·±çš„Webå†…å®¹æµç¨‹ï¼Œç›´åˆ°è¾¾åˆ°å®ç°å®šä¹‰çš„æµç¨‹é™åˆ¶ï¼›ä¹‹åï¼Œå…·æœ‰ç›¸åŒæµç¨‹æ± çš„Webè§†å›¾æœ€ç»ˆå…±äº«Webå†…å®¹æµç¨‹ã€‚</p>
<blockquote>
<p>è¯¥ç±»æ²¡æœ‰å±æ€§æˆ–å®ƒè‡ªå·±çš„æ–¹æ³•</p>
</blockquote>
<h1 id="WKUserContentController"><a href="#WKUserContentController" class="headerlink" title="WKUserContentController"></a><a href="https://developer.apple.com/documentation/webkit/wkusercontentcontroller" target="_blank" rel="noopener">WKUserContentController</a></h1><p>è¯¥å¯¹è±¡ä¸ºJavascriptæä¾›äº†æ³¨å°„ç”¨æˆ·è„šæœ¬åˆ°WKWebVIewçš„æ–¹æ³•ã€‚</p>
<h2 id="ç±»æ–¹æ³•-3"><a href="#ç±»æ–¹æ³•-3" class="headerlink" title="ç±»æ–¹æ³•"></a>ç±»æ–¹æ³•</h2><h3 id="æ·»åŠ æ¶ˆæ¯å¤„ç†ç¨‹åº"><a href="#æ·»åŠ æ¶ˆæ¯å¤„ç†ç¨‹åº" class="headerlink" title="æ·»åŠ æ¶ˆæ¯å¤„ç†ç¨‹åº"></a>æ·»åŠ æ¶ˆæ¯å¤„ç†ç¨‹åº</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(WKScriptMessageHandler, name: String)</span></span></span><br><span class="line"><span class="comment">//æ·»åŠ è„šæœ¬æ¶ˆæ¯å¤„ç†ç¨‹åºã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æ·»åŠ å’Œåˆ é™¤ç”¨æˆ·è„šæœ¬"><a href="#æ·»åŠ å’Œåˆ é™¤ç”¨æˆ·è„šæœ¬" class="headerlink" title="æ·»åŠ å’Œåˆ é™¤ç”¨æˆ·è„šæœ¬"></a>æ·»åŠ å’Œåˆ é™¤ç”¨æˆ·è„šæœ¬</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addUserScript</span><span class="params">(WKUserScript)</span></span></span><br><span class="line"><span class="comment">//æ·»åŠ ç”¨æˆ·è„šæœ¬ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeAllUserScripts</span><span class="params">()</span></span></span><br><span class="line"><span class="comment">//åˆ é™¤æ‰€æœ‰å…³è”çš„ç”¨æˆ·è„šæœ¬ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeScriptMessageHandler</span><span class="params">(forName: String)</span></span></span><br><span class="line"><span class="comment">//åˆ é™¤è„šæœ¬æ¶ˆæ¯å¤„ç†ç¨‹åºã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> userScripts: [<span class="type">WKUserScript</span>]</span><br><span class="line"><span class="comment">//ä¸ç”¨æˆ·å†…å®¹æ§åˆ¶å™¨å…³è”çš„ç”¨æˆ·è„šæœ¬ã€‚</span></span><br></pre></td></tr></table></figure>
<h3 id="æ·»åŠ å’Œåˆ é™¤å†…å®¹è§„åˆ™"><a href="#æ·»åŠ å’Œåˆ é™¤å†…å®¹è§„åˆ™" class="headerlink" title="æ·»åŠ å’Œåˆ é™¤å†…å®¹è§„åˆ™"></a>æ·»åŠ å’Œåˆ é™¤å†…å®¹è§„åˆ™</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(WKContentRuleList)</span></span></span><br><span class="line"><span class="comment">//æ·»åŠ å†…å®¹è§„åˆ™åˆ—è¡¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">remove</span><span class="params">(WKContentRuleList)</span></span></span><br><span class="line"><span class="comment">//åˆ é™¤è§„åˆ™åˆ—è¡¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeAllContentRuleLists</span><span class="params">()</span></span></span><br><span class="line"><span class="comment">//åˆ é™¤æ‰€æœ‰è§„åˆ™åˆ—è¡¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WKContentRuleList</span></span></span><br><span class="line"><span class="class">//è¦åº”ç”¨äº<span class="title">Web</span>å†…å®¹çš„å·²ç¼–è¯‘è§„åˆ™åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">WKContentRuleListStore</span></span></span><br></pre></td></tr></table></figure>
<h1 id="WKWebViewä½¿ç”¨"><a href="#WKWebViewä½¿ç”¨" class="headerlink" title="WKWebViewä½¿ç”¨"></a>WKWebViewä½¿ç”¨</h1><p>ä¸Šè¾¹çš„ä¸€äº›æ¦‚å¿µä»‹ç»å®Œåï¼Œæˆ‘ä»¬æ¥ä½¿ç”¨ä¸€ä¸‹</p>
<h2 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h2><p><img src="oftenuse.png" alt></p>
<h2 id="åŸºæœ¬åˆ›å»ºå’Œé…ç½®"><a href="#åŸºæœ¬åˆ›å»ºå’Œé…ç½®" class="headerlink" title="åŸºæœ¬åˆ›å»ºå’Œé…ç½®"></a>åŸºæœ¬åˆ›å»ºå’Œé…ç½®</h2><p>å¼•å…¥æ¨¡å—</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Webkit</span><br></pre></td></tr></table></figure>
<p>ViewControllerä¸­å®ç°<code>WKUIDelegate</code>ã€<code>WKNavigationDelegate</code>åè®®</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WKWebViewController</span>: <span class="title">UIViewController</span>, <span class="title">WKUIDelegate</span>, <span class="title">WKNavigationDelegate</span></span></span><br></pre></td></tr></table></figure>
<p>è®¾ç½®WKWebViewçš„é…ç½®é¡¹</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> config = <span class="type">WKWebViewConfiguration</span>()</span><br><span class="line">config.preferences = <span class="type">WKPreferences</span>()</span><br><span class="line"><span class="comment">//IOS ä¸‹é»˜è®¤NOï¼Œ Macä¸‹ä¸ºYES</span></span><br><span class="line">config.preferences.javaScriptCanOpenWindowsAutomatically = <span class="literal">false</span></span><br><span class="line"><span class="comment">//é»˜è®¤ä¸ºYES</span></span><br><span class="line">config.preferences.javaScriptEnabled = <span class="literal">true</span></span><br><span class="line"><span class="comment">//é»˜è®¤ä¸º0</span></span><br><span class="line">config.preferences.minimumFontSize = <span class="number">10</span></span><br><span class="line"><span class="comment">//é€šè¿‡jsä¸webviewå†…å®¹äº¤äº’é…ç½®</span></span><br><span class="line">config.userContentController = <span class="type">WKUserContentController</span>()</span><br><span class="line"><span class="comment">// åœ¨è½½å…¥æ—¶å°±æ·»åŠ JS,é¡µé¢é€šè¿‡è°ƒç”¨showAlertå‡½æ•°å³å¯</span></span><br><span class="line"><span class="keyword">let</span> script = <span class="type">WKUserScript</span>(source: <span class="string">"function showAlert() &#123; alert('åœ¨è½½å…¥webviewæ—¶é€šè¿‡Swiftæ³¨å…¥çš„JSæ–¹æ³•'); &#125;"</span>, injectionTime: .atDocumentStart, forMainFrameOnly: <span class="literal">true</span>) <span class="comment">// åªæ·»åŠ åˆ°mainFrameä¸­</span></span><br><span class="line">config.userContentController.addUserScript(script)</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºWKWebVIewå¹¶éµå®ˆåè®®</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">self</span>.webview = <span class="type">WKWebView</span>(frame: <span class="keyword">self</span>.view.frame, configuration: configWebView())</span><br><span class="line"><span class="keyword">self</span>.webview.uiDelegate = <span class="keyword">self</span></span><br><span class="line"><span class="keyword">self</span>.webview.navigationDelegate = <span class="keyword">self</span></span><br><span class="line"><span class="comment">//å¼€å¯æ»‘åŠ¨è¿”å›</span></span><br><span class="line"><span class="keyword">self</span>.webview.allowsBackForwardNavigationGestures = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="WKWebVIewåŠ è½½æœ¬åœ°html"><a href="#WKWebVIewåŠ è½½æœ¬åœ°html" class="headerlink" title="WKWebVIewåŠ è½½æœ¬åœ°html"></a>WKWebVIewåŠ è½½æœ¬åœ°html</h2><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="type">Bundle</span>.main.url(forResource: <span class="string">"index"</span>, withExtension: <span class="string">"html"</span>)!</span><br><span class="line"><span class="keyword">self</span>.webview.loadFileURL(url, allowingReadAccessTo: <span class="type">Bundle</span>.main.bundleURL)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>htmlæ–‡ä»¶æ”¾åœ¨é¡¹ç›®ç›®å½•å³å¯ã€‚æœ‰æ–‡ä»¶å¤¹æ—¶è¯·æ›´æ”¹è·¯å¾„</p>
</blockquote>
<h2 id="å®ç°WKUIDelegate"><a href="#å®ç°WKUIDelegate" class="headerlink" title="å®ç°WKUIDelegate"></a>å®ç°WKUIDelegate</h2><p>åœ¨ç½‘é¡µä¸­ä¸€èˆ¬éƒ½ä¼šå«æœ‰alertã€promtã€confirmç­‰çš„å¯¹è¯æ¡†ï¼Œéœ€è¦æˆ‘ä»¬åŸç”Ÿå»ç¼–ç å®ç°ã€‚</p>
<p>å…ˆåˆ›å»ºä¸€ä¸ª<code>index.html</code>æ”¾åœ¨é¡¹ç›®ç›®å½•ä¸‹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"alert('è¿™æ˜¯æŒ‰é’®ç‚¹å‡»çš„alert')"</span>&gt;</span>alert<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"confirm('è¿™æ˜¯æŒ‰é’®ç‚¹å‡»çš„confirm')"</span>&gt;</span>confirm<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"prompt('è¿™æ˜¯æŒ‰é’®ç‚¹å‡»çš„promt', 'é»˜è®¤æ–‡å­—')"</span>&gt;</span>promt<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.baidu.com"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span>æ–°æ ‡ç­¾<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æ–°å»ºä¸€ä¸ªç±»å¹¶ç»§æ‰¿<code>ViewController</code>ï¼Œå¹¶éµå¾ª<code>WKUIDelegate</code>åè®®ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WKUIViewController</span>: <span class="title">UIViewController</span>, <span class="title">WKUIDelegate</span></span></span><br></pre></td></tr></table></figure>
<p>å¯¼å…¥åº“ï¼Œå¹¶æ·»åŠ webviewåˆ°ç•Œé¢ä¸Šï¼Œå¹¶åŠ è½½æœ¬åœ°index.htmlæ–‡ä»¶ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="type">Bundle</span>.main.url(forResource: <span class="string">"index"</span>, withExtension: <span class="string">"html"</span>)!</span><br><span class="line"><span class="keyword">self</span>.webview.loadFileURL(url, allowingReadAccessTo: <span class="type">Bundle</span>.main.bundleURL)</span><br></pre></td></tr></table></figure>
<p>é¢„è§ˆä¸€ä¸‹ç•Œé¢ï¼š</p>
<p><img src="uidelegatedemo.png" alt></p>
<p>å¯ä»¥å‘ç°ç‚¹å‡»æ˜¯æ²¡æœ‰ä»»ä½•ååº”çš„ï¼Œä½†æ˜¯ä¸å®ç°WKUIDelegateåè®®æˆ–è€…å®ç°äº†åè®®ä½†ä¸å®ç°æ–¹æ³•æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œä½†æ˜¯å®ç°äº†æ–¹æ³•åˆä¸åœ¨æ–¹æ³•ä½“å†…è°ƒç”¨å›è°ƒå‡½æ•°æ˜¯ä¼šæŠ¥é”™çš„ã€‚</p>
<p>è¿™é‡Œä½¿ç”¨UIAlertControllerç®€å•å®ç°UIï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Alert</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(<span class="number">_</span> webView: WKWebView, runJavaScriptAlertPanelWithMessage message: String, initiatedByFrame frame: WKFrameInfo, completionHandler: @escaping <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> alert = <span class="type">UIAlertController</span>(title: <span class="string">"æç¤º"</span>, message: message, preferredStyle: <span class="type">UIAlertController</span>.<span class="type">Style</span>.alert)</span><br><span class="line">  <span class="keyword">let</span> sure = <span class="type">UIAlertAction</span>(title: <span class="string">"ç¡®å®š"</span>, style: <span class="type">UIAlertAction</span>.<span class="type">Style</span>.<span class="keyword">default</span>) &#123; (action: <span class="type">UIAlertAction</span>) <span class="keyword">in</span></span><br><span class="line">    completionHandler()</span><br><span class="line">  &#125;</span><br><span class="line">  alert.addAction(sure)</span><br><span class="line">  <span class="keyword">self</span>.present(alert, animated: <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//Confirm</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(<span class="number">_</span> webView: WKWebView, runJavaScriptConfirmPanelWithMessage message: String, initiatedByFrame frame: WKFrameInfo, completionHandler: @escaping <span class="params">(Bool)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> alert = <span class="type">UIAlertController</span>(title: <span class="string">"æç¤º"</span>, message: message, preferredStyle: <span class="type">UIAlertController</span>.<span class="type">Style</span>.alert)</span><br><span class="line">  <span class="keyword">let</span> sure = <span class="type">UIAlertAction</span>(title: <span class="string">"ç¡®å®š"</span>, style: <span class="type">UIAlertAction</span>.<span class="type">Style</span>.<span class="keyword">default</span>) &#123; (action: <span class="type">UIAlertAction</span>) <span class="keyword">in</span></span><br><span class="line">    completionHandler(<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> cancel = <span class="type">UIAlertAction</span>(title: <span class="string">"å–æ¶ˆ"</span>, style: <span class="type">UIAlertAction</span>.<span class="type">Style</span>.cancel) &#123; (action: <span class="type">UIAlertAction</span>) <span class="keyword">in</span></span><br><span class="line">    completionHandler(<span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  alert.addAction(sure)</span><br><span class="line">  alert.addAction(cancel)</span><br><span class="line">  <span class="keyword">self</span>.present(alert, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//Prompt</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(<span class="number">_</span> webView: WKWebView, runJavaScriptTextInputPanelWithPrompt prompt: String, defaultText: String?, initiatedByFrame frame: WKFrameInfo, completionHandler: @escaping <span class="params">(String?)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> alert = <span class="type">UIAlertController</span>(title: <span class="string">"æç¤º"</span>, message: prompt, preferredStyle: <span class="type">UIAlertController</span>.<span class="type">Style</span>.alert)</span><br><span class="line">  alert.addTextField &#123; (field: <span class="type">UITextField</span>) <span class="keyword">in</span></span><br><span class="line">    field.text = defaultText</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> cancel = <span class="type">UIAlertAction</span>(title: <span class="string">"å–æ¶ˆ"</span>, style: <span class="type">UIAlertAction</span>.<span class="type">Style</span>.cancel) &#123; (action: <span class="type">UIAlertAction</span>) <span class="keyword">in</span></span><br><span class="line">    completionHandler(<span class="literal">nil</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> sure = <span class="type">UIAlertAction</span>(title: <span class="string">"ç¡®å®š"</span>, style: <span class="type">UIAlertAction</span>.<span class="type">Style</span>.<span class="keyword">default</span>) &#123; (action: <span class="type">UIAlertAction</span>) <span class="keyword">in</span></span><br><span class="line">    completionHandler(alert.textFields?.first?.text)</span><br><span class="line">  &#125;</span><br><span class="line">  alert.addAction(sure)</span><br><span class="line">  alert.addAction(cancel)</span><br><span class="line">  <span class="keyword">self</span>.present(alert, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)      </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é¡µé¢æ˜¯å¼¹å‡ºçª—å£æ—¶</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(<span class="number">_</span> webView: WKWebView, createWebViewWith configuration: WKWebViewConfiguration, <span class="keyword">for</span> navigationAction: WKNavigationAction, windowFeatures: WKWindowFeatures)</span></span> -&gt; <span class="type">WKWebView?</span> &#123;</span><br><span class="line">  <span class="comment">//_blankå¤„ç†</span></span><br><span class="line">  <span class="keyword">self</span>.webview.load(navigationAction.request)</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ç°æ•ˆæœï¼š</p>
<p><img src="uidelegatedemo2.png" alt></p>
<h2 id="å®ç°æ ‡é¢˜æ å’ŒåŠ è½½è¿›åº¦æ¡"><a href="#å®ç°æ ‡é¢˜æ å’ŒåŠ è½½è¿›åº¦æ¡" class="headerlink" title="å®ç°æ ‡é¢˜æ å’ŒåŠ è½½è¿›åº¦æ¡"></a>å®ç°æ ‡é¢˜æ å’ŒåŠ è½½è¿›åº¦æ¡</h2><p>WKWebViewä¸­æœ‰ä¸‰ä¸ªå±æ€§æ˜¯æ”¯æŒKVOçš„ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘å¬å…¶å€¼çš„å˜åŒ–æ¥å®ç°å¯¹åº”çš„åŠŸèƒ½ï¼Œå³<code>loading</code>ã€<code>title</code>ã€<code>estimatedProgress</code>ä¸‰ä¸ªå±æ€§ã€‚</p>
<p>æ–°å»ºä¸€ä¸ªç±»å¹¶ç»§æ‰¿<code>ViewController</code>ï¼Œå¹¶éµå¾ª<code>WKUIDelegate</code>ä¸<code>WKNavigationDelegate</code>åè®®ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BrowserViewController</span>: <span class="title">UIViewController</span>, <span class="title">WKUIDelegate</span>, <span class="title">WKNavigationDelegate</span></span></span><br></pre></td></tr></table></figure>
<p>åˆå§‹åŒ–WKWebViewæ–¹æ³•</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> webview: <span class="type">WKWebView!</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">initWebView</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">self</span>.webview = <span class="type">WKWebView</span>(frame: <span class="keyword">self</span>.view.frame, configuration: <span class="type">WKWebViewConfiguration</span>())</span><br><span class="line">  <span class="keyword">self</span>.view.addSubview(<span class="keyword">self</span>.webview)</span><br><span class="line">  <span class="keyword">self</span>.webview.load(<span class="type">URLRequest</span>(url: <span class="type">URL</span>(string: <span class="string">"https://objccn.io/"</span>)!))</span><br><span class="line">  <span class="comment">//kvoç›‘å¬ä»¥å®ç°æ ‡é¢˜æ å’Œè¿›åº¦æ¡</span></span><br><span class="line">  <span class="keyword">self</span>.webview.addObserver(<span class="keyword">self</span>, forKeyPath: <span class="string">"estimatedProgress"</span>, options: <span class="type">NSKeyValueObservingOptions</span>.new, context: <span class="literal">nil</span>)</span><br><span class="line">  <span class="keyword">self</span>.webview.addObserver(<span class="keyword">self</span>, forKeyPath: <span class="string">"title"</span>, options: <span class="type">NSKeyValueObservingOptions</span>.new, context: <span class="literal">nil</span>)</span><br><span class="line">  <span class="comment">//éµå®ˆåè®®</span></span><br><span class="line">  <span class="keyword">self</span>.webview.uiDelegate = <span class="keyword">self</span></span><br><span class="line">  <span class="keyword">self</span>.webview.navigationDelegate = <span class="keyword">self</span></span><br><span class="line">  <span class="comment">//å¼€å¯æ»‘åŠ¨è¿”å›</span></span><br><span class="line">  <span class="keyword">self</span>.webview.allowsBackForwardNavigationGestures = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆå§‹åŒ–è¿›åº¦æ¡æ–¹æ³•</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">initProgress</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">//æ·»åŠ è¿›åº¦æ¡</span></span><br><span class="line">  progress = <span class="type">UIProgressView</span>(frame: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="type">UIScreen</span>.main.bounds.width, height: <span class="number">2</span>))</span><br><span class="line">  progress.backgroundColor = <span class="type">UIColor</span>.blue</span><br><span class="line">  <span class="keyword">self</span>.view.addSubview(<span class="keyword">self</span>.progress)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¹¶åœ¨ViewDidLoadæ–¹æ³•ä¸­è°ƒç”¨ã€‚é‡è½½ç›‘å¬æ–¹æ³•</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åœ¨ç›‘å¬æ–¹æ³•ä¸­ç›‘å¬è¿›åº¦æ¡å’Œæ ‡é¢˜çš„å˜åŒ–</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">observeValue</span><span class="params">(forKeyPath keyPath: String?, of object: <span class="keyword">Any</span>?, change: [NSKeyValueChangeKey : <span class="keyword">Any</span>]?, context: UnsafeMutableRawPointer?)</span></span> &#123;</span><br><span class="line">  <span class="keyword">if</span> keyPath == <span class="string">"estimatedProgress"</span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.progress.setProgress(<span class="type">Float</span>(<span class="keyword">self</span>.webview.estimatedProgress), animated: <span class="literal">true</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> keyPath == <span class="string">"title"</span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.navigationController?.title = <span class="keyword">self</span>.webview.title</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.observeValue(forKeyPath: keyPath, of: object, change: change, context: context)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨å®ç°WKNavigationDelegateçš„ä¸¤ä¸ªä»£ç†æ–¹æ³•ä»¥å®ç°è¿›åº¦æ¡çš„éšè—å’Œç°å®</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">- (void)webView:(<span class="type">WKWebView</span> *)webView didStartProvisionalNavigation:(<span class="type">WKNavigation</span> *)navigation &#123;</span><br><span class="line">    [<span class="keyword">self</span>.progressView setHidden:<span class="type">NO</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¼èˆªå®Œæˆæ—¶è°ƒç”¨ã€‚</span></span><br><span class="line">- (void)webView:(<span class="type">WKWebView</span> *)webView didFinishNavigation:(<span class="type">WKNavigation</span> *)navigation &#123;</span><br><span class="line">    <span class="keyword">self</span>.progress.progress = <span class="number">0.0</span>;</span><br><span class="line">  	[<span class="keyword">self</span>.progressView setHidden:<span class="type">YES</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨é¡µé¢æ¶ˆå¤±åå–æ¶ˆç›‘å¬ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°ä¸€äº›æœªçŸ¥çš„å¼‚å¸¸ï¼Œåœ¨ViewControllerç”Ÿå‘½å‘¨æœŸçš„viewDidDisappearæ–¹æ³•ä¸­å®ç°ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidDisappear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</span><br><span class="line">  <span class="keyword">super</span>.viewDidDisappear(animated)</span><br><span class="line">  <span class="keyword">self</span>.webview.removeObserver(<span class="keyword">self</span>, forKeyPath: <span class="string">"estimatedProgress"</span>)</span><br><span class="line">  <span class="keyword">self</span>.webview.removeObserver(<span class="keyword">self</span>, forKeyPath: <span class="string">"title"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="browserdemo.png" alt></p>
<h2 id="åº”ç”¨å†…H5è·³è½¬ç¬¬ä¸‰æ–¹APP"><a href="#åº”ç”¨å†…H5è·³è½¬ç¬¬ä¸‰æ–¹APP" class="headerlink" title="åº”ç”¨å†…H5è·³è½¬ç¬¬ä¸‰æ–¹APP"></a>åº”ç”¨å†…H5è·³è½¬ç¬¬ä¸‰æ–¹APP</h2><p>åº”ç”¨å†…webè§†å›¾é¡µé¢éƒ½ä¼šæœ‰ä¸€äº›è·³è½¬ç¬¬ä¸‰æ–¹APPçš„éœ€æ±‚ï¼Œè·å–è·³è½¬APP Storeã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ª<code>redirect.html</code>é¡µé¢ï¼Œåˆ†åˆ«æ˜¯è·³è½¬ç²‰ä¸ç¦åˆ©è´­ã€æ‹¨æ‰“ç”µè¯ã€è·³è½¬å¾®ä¿¡APP Storeã€‚æ”¾åœ¨äº†é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>è·³è½¬<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">            <span class="attr">href</span>=<span class="string">"taobao://uland.taobao.com/coupon/edetail?e=cSq3k99USIAGQASttHIRqbFZJ9euuZYQylASqMukPydjTfHRi%2FIrN%2BlmuMDII2iZ%2FASFi097%2BCOSU6IuEVIxtk4aJXRcltkaWv9OAj9evKDahba4h8MrZ%2Bdth9k8bqqSHKTgBzHkoM7XTQC0vfau6E%2F9Zk7cDx8UPY2GSU4OeGe2s6x1NZzECw73BakMbfZC&amp;traceId=0b01319f15597018122426441e&amp;union_lens=lensId:0b015dd6_0b58_16b2578f429_586d&amp;xId=jwddSujflRkngxB4Q9tRDr3m1VxxlYIIvkQWXrAl4fhWOjMBIOJ0GkUZr8KQHPXIRTVNgd51FScfpn3ZqARc4s&amp;activityId=d236dbef811a47b69494c70b8b22012e"</span>&gt;</span>æµ‹è¯•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"tel://15622472425"</span>&gt;</span>æ‰“ç”µè¯ç»™å®¢æœ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://itunes.apple.com/cn/app/wechat/id414478124?mt=8"</span>&gt;</span>å¾®ä¿¡é“¾æ¥<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºWKWebViewå°±ä¸å†å¤šè®²äº†ï¼Œéœ€è¦è·³è½¬ç¬¬ä¸‰æ–¹APPæˆ–è€…æ‰“å¼€APP Storeçš„é“¾æ¥å°±éœ€è¦éµå¾ª<code>WKNavigationDelegate</code>åè®®ï¼Œå¹¶å®ç°<code>webView(_:decidePolicyFor:)</code>æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(<span class="number">_</span> webView: WKWebView, decidePolicyFor navigationAction: WKNavigationAction, decisionHandler: @escaping <span class="params">(WKNavigationActionPolicy)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">  <span class="comment">//åˆ¤æ–­schemeï¼Œhttpã€httpsã€fileåˆ™æ­£å¸¸åœ¨é¡µé¢åŠ è½½</span></span><br><span class="line">  <span class="keyword">let</span> scheme = navigationAction.request.url?.scheme</span><br><span class="line">  <span class="keyword">if</span> scheme == <span class="string">"http"</span> || scheme == <span class="string">"https"</span> || scheme == <span class="string">"file"</span> &#123;</span><br><span class="line">    <span class="comment">//å…è®¸å¯¼èˆª</span></span><br><span class="line">    decisionHandler(<span class="type">WKNavigationActionPolicy</span>.allow)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//å¦åˆ™ä¾‹å¦‚schemeä¸ºtaobaoã€alipayç­‰åˆ™æ ¹æ®ç¬¬ä¸‰æ–¹sdkåœ¨ç½‘é¡µä¸­é…ç½®urlï¼Œè¿™é‡Œæ˜¯éƒ½å¯ä»¥è·³è½¬</span></span><br><span class="line">    <span class="comment">//å–æ¶ˆå¯¼èˆªï¼Œæ‰“å¼€APP</span></span><br><span class="line">    <span class="type">UIApplication</span>.shared.openURL(navigationAction.request.url!)</span><br><span class="line">    decisionHandler(<span class="type">WKNavigationActionPolicy</span>.cancel)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯¹äºè‡ªå®šä¹‰çš„ <code>URL Scheme</code> ç±»å‹é“¾æ¥ï¼Œå¦‚æœä¸å®ç°è¯¥æ–¹æ³•ï¼Œåœ¨ <code>WKWebView</code> é‡Œç›´æ¥ç‚¹å‡»åˆ™ä¼šæŠ¥é”™ï¼š<code>Error Domain=NSURLErrorDomain Code=-1002 &quot;unsupported URL&quot;</code>ã€‚</p>
<p>å¦‚æœéœ€è¦å…·ä½“åˆ¤æ–­åˆ°æ‰“å¼€æŸäº›appåªè¦å…·ä½“åˆ¤æ–­schemeå³å¯ã€‚</p>
<p>è·³è½¬APP Storeçš„è¯å› ä¸ºapp storeçš„ç½‘é¡µå·²ç»é…ç½®äº†Universal Linkè·³è½¬ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–çš„é…ç½®å³å¯è·³è½¬ã€‚</p>
<p>æ³¨æ„ï¼šå¿…éœ€è¦åœ¨çœŸæœºä¸Šæµ‹è¯•ã€‚</p>
</blockquote>
<h2 id="WKWebViewçš„3Dtouché¢„è§ˆåŠŸèƒ½"><a href="#WKWebViewçš„3Dtouché¢„è§ˆåŠŸèƒ½" class="headerlink" title="WKWebViewçš„3Dtouché¢„è§ˆåŠŸèƒ½"></a>WKWebViewçš„3Dtouché¢„è§ˆåŠŸèƒ½</h2><p><strong>å°†WKWebViewçš„<code>allowsLinkPreview</code>å±æ€§è®¾ç½®<code>NO</code>å³å¯å…³é—­</strong></p>
<h1 id="ä»¿å¾®ä¿¡WebView"><a href="#ä»¿å¾®ä¿¡WebView" class="headerlink" title="ä»¿å¾®ä¿¡WebView"></a>ä»¿å¾®ä¿¡WebView</h1><p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://github.static.si-yee.com/IOSWKWebView/20200604140255.png" alt></p>
<p>å®ç°ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  CommonWebViewController.swift</span></span><br><span class="line"><span class="comment">//  xianqi</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by yzy on 2020/4/17.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"><span class="keyword">import</span> WebKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommonWebViewController</span>: <span class="title">UIViewController</span>, <span class="title">WKUIDelegate</span>, <span class="title">WKNavigationDelegate</span>, <span class="title">UIScrollViewDelegate</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// åŠ è½½çš„é“¾æ¥</span></span><br><span class="line">    <span class="keyword">var</span> requestUrl: <span class="type">String?</span> &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.webview.load(<span class="type">URLRequest</span>(url: <span class="type">URL</span>(string: <span class="keyword">self</span>.requestUrl!)!))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">//å››å‘¨å‡ä¸å»¶ä¼¸ï¼Œä»¥å…å‡ºç°é®æŒ¡</span></span><br><span class="line">        <span class="keyword">self</span>.edgesForExtendedLayout = []</span><br><span class="line">        <span class="keyword">self</span>.initWebView()</span><br><span class="line">        <span class="keyword">self</span>.initProgressView()</span><br><span class="line">        <span class="keyword">self</span>.setupToolbarItems()</span><br><span class="line">        <span class="comment">// åŠ è½½URL</span></span><br><span class="line">        <span class="keyword">self</span>.requestUrl = <span class="string">"https://www.baidu.com"</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// MARK: toolbar</span></span><br><span class="line">        </span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> goBackItem: <span class="type">UIBarButtonItem</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> item: <span class="type">UIBarButtonItem</span> = <span class="type">UIBarButtonItem</span>(image: <span class="type">UIImage</span>(named: <span class="string">"icon_left_arrow"</span>), style: .done, target: <span class="keyword">self</span>, action: #selector(<span class="type">CommonWebViewController</span>.goBack))</span><br><span class="line">        item.tintColor = <span class="type">UIColor</span>.black</span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> goForwardItem: <span class="type">UIBarButtonItem</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> item: <span class="type">UIBarButtonItem</span> = <span class="type">UIBarButtonItem</span>(image: <span class="type">UIImage</span>(named: <span class="string">"icon_right_arrow"</span>), style: .done, target: <span class="keyword">self</span>, action: #selector(<span class="type">CommonWebViewController</span>.goForword))</span><br><span class="line">        item.tintColor = <span class="type">UIColor</span>.black</span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> flexibleItem: <span class="type">UIBarButtonItem</span> = &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">UIBarButtonItem</span>(barButtonSystemItem: .flexibleSpace, target: <span class="literal">nil</span>, action: <span class="literal">nil</span>)</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">goBack</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.webview.canGoBack &#123;</span><br><span class="line">            webview.goBack()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">goForword</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.webview.canGoForward &#123;</span><br><span class="line">            webview.goForward()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">setupToolbarItems</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.navigationController?.toolbar.isTranslucent = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">self</span>.toolbarItems = [flexibleItem, goBackItem, flexibleItem, goForwardItem, flexibleItem]</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillAppear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewWillAppear(animated)</span><br><span class="line">        <span class="comment">// å½“Pushè¿›æ¥æ—¶å¦‚æœé¡µé¢æ²¡æœ‰æ˜¾ç¤ºNavBarï¼Œåˆ™WebViewæ‰‹åŠ¨æ˜¾ç¤º</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.navigationController?.navigationBar.isHidden ?? <span class="literal">false</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.navigationController?.setNavigationBarHidden(<span class="literal">false</span>, animated: <span class="literal">true</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidAppear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidAppear(animated)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewWillDisappear</span><span class="params">(<span class="number">_</span> animated: Bool)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewWillDisappear(animated)</span><br><span class="line">        hiddenToolbar()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">hiddenToolbar</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.navigationController?.setToolbarHidden(<span class="literal">true</span>, animated: <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">visibleToolbar</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.navigationController != <span class="literal">nil</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">self</span>.navigationController!.isToolbarHidden &#123;</span><br><span class="line">                <span class="keyword">self</span>.navigationController?.setToolbarHidden(<span class="literal">false</span>, animated: <span class="literal">true</span>)</span><br><span class="line">                <span class="keyword">self</span>.goForwardItem.isEnabled = <span class="keyword">self</span>.webview.canGoForward</span><br><span class="line">                <span class="keyword">self</span>.goBackItem.isEnabled = <span class="keyword">self</span>.webview.canGoBack</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// MARK: webviewç›¸å…³</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> webview: <span class="type">WKWebView</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> wv: <span class="type">WKWebView</span> = <span class="type">WKWebView</span>()</span><br><span class="line">        <span class="comment">// normal setting</span></span><br><span class="line">        wv.uiDelegate = <span class="keyword">self</span></span><br><span class="line">        wv.navigationDelegate = <span class="keyword">self</span></span><br><span class="line">        <span class="keyword">return</span> wv</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> progressView: <span class="type">UIProgressView</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> view: <span class="type">UIProgressView</span> = <span class="type">UIProgressView</span>(progressViewStyle: .bar)</span><br><span class="line">        view.trackTintColor = <span class="type">UIColor</span>.gray</span><br><span class="line">        view.progressTintColor = <span class="type">UIColor</span>.green.withAlphaComponent(<span class="number">0.55</span>)</span><br><span class="line">        <span class="keyword">return</span> view</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">initWebView</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">// add view</span></span><br><span class="line">        <span class="keyword">self</span>.view.addSubview(<span class="keyword">self</span>.webview)</span><br><span class="line">        <span class="comment">// add constraint</span></span><br><span class="line">        <span class="keyword">self</span>.webview.translatesAutoresizingMaskIntoConstraints = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">if</span> #available(iOS <span class="number">11.0</span>, *) &#123;</span><br><span class="line">            <span class="keyword">self</span>.view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: <span class="keyword">self</span>.webview, attribute: .top, relatedBy: .<span class="built_in">equal</span>, toItem: <span class="keyword">self</span>.view.safeAreaLayoutGuide, attribute: .top, multiplier: <span class="number">1.0</span>, constant: <span class="number">0</span>))</span><br><span class="line">            <span class="keyword">self</span>.view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: <span class="keyword">self</span>.webview, attribute: .bottom, relatedBy: .<span class="built_in">equal</span>, toItem: <span class="keyword">self</span>.view.safeAreaLayoutGuide, attribute: .bottom, multiplier: <span class="number">1.0</span>, constant: <span class="number">0</span>))</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Fallback on earlier versions</span></span><br><span class="line">            <span class="keyword">self</span>.view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: <span class="keyword">self</span>.webview, attribute: .top, relatedBy: .<span class="built_in">equal</span>, toItem: <span class="keyword">self</span>.view, attribute: .top, multiplier: <span class="number">1.0</span>, constant: <span class="number">0</span>))</span><br><span class="line">            <span class="keyword">self</span>.view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: <span class="keyword">self</span>.webview, attribute: .bottom, relatedBy: .<span class="built_in">equal</span>, toItem: <span class="keyword">self</span>.view, attribute: .bottom, multiplier: <span class="number">1.0</span>, constant: <span class="number">0</span>))</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: <span class="keyword">self</span>.webview, attribute: .<span class="keyword">left</span>, relatedBy: .<span class="built_in">equal</span>, toItem: <span class="keyword">self</span>.view, attribute: .<span class="keyword">left</span>, multiplier: <span class="number">1.0</span>, constant: <span class="number">0</span>))</span><br><span class="line">        <span class="keyword">self</span>.view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: <span class="keyword">self</span>.webview, attribute: .<span class="keyword">right</span>, relatedBy: .<span class="built_in">equal</span>, toItem: <span class="keyword">self</span>.view, attribute: .<span class="keyword">right</span>, multiplier: <span class="number">1.0</span>, constant: <span class="number">0</span>))</span><br><span class="line">        <span class="comment">// ç›‘å¬è¿›åº¦äº‹ä»¶</span></span><br><span class="line">        <span class="keyword">self</span>.webview.addObserver(<span class="keyword">self</span>, forKeyPath: #keyPath(<span class="type">WKWebView</span>.estimatedProgress), options: .new, context: <span class="literal">nil</span>)</span><br><span class="line">        <span class="comment">// ç›‘å¬ç½‘é¡µæ ‡é¢˜</span></span><br><span class="line">        <span class="keyword">self</span>.webview.addObserver(<span class="keyword">self</span>, forKeyPath: #keyPath(<span class="type">WKWebView</span>.title), options: .new, context: <span class="literal">nil</span>)</span><br><span class="line">        <span class="comment">// ç›‘å¬å‰è¿›åé€€</span></span><br><span class="line">        <span class="keyword">self</span>.webview.addObserver(<span class="keyword">self</span>, forKeyPath: #keyPath(<span class="type">WKWebView</span>.canGoForward), options: .new, context: <span class="literal">nil</span>)</span><br><span class="line">        <span class="keyword">self</span>.webview.addObserver(<span class="keyword">self</span>, forKeyPath: #keyPath(<span class="type">WKWebView</span>.canGoBack), options: .new, context: <span class="literal">nil</span>)</span><br><span class="line">        <span class="comment">// æ»šåŠ¨ç›‘å¬</span></span><br><span class="line">        <span class="keyword">self</span>.webview.scrollView.delegate = <span class="keyword">self</span></span><br><span class="line">        <span class="comment">// è®¾ç½®UA</span></span><br><span class="line">        <span class="keyword">self</span>.webview.evaluateJavaScript(<span class="string">"navigator.userAgent"</span>) &#123; (oldAgent: <span class="type">Any?</span>, error: <span class="type">Error?</span>) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> error == <span class="literal">nil</span> &#123;</span><br><span class="line">                <span class="comment">//oldAgent = [NSString stringWithFormat:@"Mozilla/5.0 (%@; CPU iPhone OS %@ like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148", [[UIDevice currentDevice] model], [[[UIDevice currentDevice] systemVersion] stringByReplacingOccurrencesOfString:@"." withString:@"_"]];</span></span><br><span class="line">                <span class="keyword">let</span> uaStr: <span class="type">String</span> = oldAgent <span class="keyword">as</span>? <span class="type">String</span> ?? <span class="string">"Mozilla/5.0 (\(UIDevice.current.model); CPU iPhone OS \(UIDevice.current.systemVersion) like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148"</span></span><br><span class="line">                <span class="comment">// ä¿å­˜è‡³æœ¬åœ°</span></span><br><span class="line">                <span class="type">UserDefaults</span>.standard.<span class="keyword">set</span>(uaStr, forKey: <span class="string">"USER_AGENT"</span>)</span><br><span class="line">                <span class="comment">// è·å–appä¿¡æ¯</span></span><br><span class="line">                <span class="keyword">let</span> infoDic = <span class="type">Bundle</span>.main.infoDictionary</span><br><span class="line">                <span class="comment">// è·å–Appçš„ç‰ˆæœ¬å·</span></span><br><span class="line">                <span class="keyword">let</span> appVersion = infoDic?[<span class="string">"CFBundleShortVersionString"</span>]</span><br><span class="line">                <span class="comment">// è·å–Appçš„buildç‰ˆæœ¬</span></span><br><span class="line">                <span class="keyword">let</span> appBuildVersion = infoDic?[<span class="string">"CFBundleVersion"</span>]</span><br><span class="line">                <span class="comment">// çœŸå®æ‹¼æ¥ UA</span></span><br><span class="line">                <span class="keyword">let</span> realUAStr = <span class="string">"\(uaStr)#xianqi#\(appVersion ?? 0)#\(appBuildVersion ?? 0)"</span></span><br><span class="line">                <span class="keyword">self</span>.webview.customUserAgent = realUAStr</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‰‹åŠ¿æ‹–åŠ¨æ—¶æ§åˆ¶Toolbaræ˜¾ç¤ºå’Œéšè— </span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">scrollViewDidScroll</span><span class="params">(<span class="number">_</span> scrollView: UIScrollView)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.webview.backForwardList.backList.<span class="built_in">count</span> &lt;= <span class="number">0</span> &amp;&amp; <span class="keyword">self</span>.webview.backForwardList.forwardList.<span class="built_in">count</span> &lt;= <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> vel = scrollView.panGestureRecognizer.velocity(<span class="keyword">in</span>: scrollView)</span><br><span class="line">        <span class="keyword">if</span> vel.y &lt; -<span class="number">8</span> &#123;</span><br><span class="line">            <span class="comment">// å‘ä¸Šæ‹–åŠ¨</span></span><br><span class="line">            hiddenToolbar()</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> vel.y &gt; <span class="number">8</span> &#123;</span><br><span class="line">            <span class="comment">// å‘ä¸‹æ‹–åŠ¨</span></span><br><span class="line">            visibleToolbar()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// ç›‘å¬</span></span><br><span class="line">    <span class="comment">/// - Parameters:</span></span><br><span class="line">    <span class="comment">///   - keyPath: keyPath description</span></span><br><span class="line">    <span class="comment">///   - object: object description</span></span><br><span class="line">    <span class="comment">///   - change: change description</span></span><br><span class="line">    <span class="comment">///   - context: context description</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">observeValue</span><span class="params">(forKeyPath keyPath: String?, of object: <span class="keyword">Any</span>?, change: [NSKeyValueChangeKey : <span class="keyword">Any</span>]?, context: UnsafeMutableRawPointer?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> keyPath == #keyPath(<span class="type">WKWebView</span>.estimatedProgress) &#123;</span><br><span class="line">            <span class="keyword">self</span>.showProgressView(progress: <span class="type">Float</span>(<span class="keyword">self</span>.webview.estimatedProgress))</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> keyPath == #keyPath(<span class="type">WKWebView</span>.title) &#123;</span><br><span class="line">            <span class="keyword">self</span>.observeWebTitle(title: <span class="keyword">self</span>.webview.title)</span><br><span class="line">            <span class="comment">// æ§åˆ¶æ˜¾ç¤ºToolbar</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">self</span>.webview.backForwardList.backList.<span class="built_in">count</span> &gt; <span class="number">0</span> || <span class="keyword">self</span>.webview.backForwardList.forwardList.<span class="built_in">count</span> &gt; <span class="number">0</span> &#123;</span><br><span class="line">                visibleToolbar()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> keyPath == #keyPath(<span class="type">WKWebView</span>.canGoForward) &#123;</span><br><span class="line">            <span class="keyword">self</span>.goForwardItem.isEnabled = <span class="keyword">self</span>.webview.canGoForward</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> keyPath == #keyPath(<span class="type">WKWebView</span>.canGoBack) &#123;</span><br><span class="line">            <span class="keyword">self</span>.goBackItem.isEnabled = <span class="keyword">self</span>.webview.canGoBack</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">super</span>.observeValue(forKeyPath: keyPath, of: object, change: change, context: context)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/// ç”¨äºæ–¹ä¾¿å­ç±»é‡å†™</span></span><br><span class="line">    <span class="comment">/// - Parameter title: webviewçš„æ ‡é¢˜</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">observeWebTitle</span><span class="params">(title: String?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.navigationItem.title = title</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">initProgressView</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">// layout</span></span><br><span class="line">        <span class="keyword">self</span>.view.addSubview(<span class="keyword">self</span>.progressView)</span><br><span class="line">        <span class="comment">// add constraint</span></span><br><span class="line">        <span class="keyword">self</span>.progressView.translatesAutoresizingMaskIntoConstraints = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">if</span> #available(iOS <span class="number">11.0</span>, *) &#123;</span><br><span class="line">            <span class="keyword">self</span>.view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: <span class="keyword">self</span>.progressView, attribute: .top, relatedBy: .<span class="built_in">equal</span>, toItem: <span class="keyword">self</span>.view.safeAreaLayoutGuide, attribute: .top, multiplier: <span class="number">1.0</span>, constant: <span class="number">0</span>))</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Fallback on earlier versions</span></span><br><span class="line">            <span class="keyword">self</span>.view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: <span class="keyword">self</span>.progressView, attribute: .top, relatedBy: .<span class="built_in">equal</span>, toItem: <span class="keyword">self</span>.view, attribute: .top, multiplier: <span class="number">1.0</span>, constant: <span class="number">0</span>))</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è®¾ç½®å®½åº¦</span></span><br><span class="line">        <span class="keyword">self</span>.view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: <span class="keyword">self</span>.progressView, attribute: .<span class="keyword">left</span>, relatedBy: .<span class="built_in">equal</span>, toItem: <span class="keyword">self</span>.view, attribute: .<span class="keyword">left</span>, multiplier: <span class="number">1.0</span>, constant: <span class="number">0</span>))</span><br><span class="line">        <span class="keyword">self</span>.view.addConstraint(<span class="type">NSLayoutConstraint</span>(item: <span class="keyword">self</span>.progressView, attribute: .<span class="keyword">right</span>, relatedBy: .<span class="built_in">equal</span>, toItem: <span class="keyword">self</span>.view, attribute: .<span class="keyword">right</span>, multiplier: <span class="number">1.0</span>, constant: <span class="number">0</span>))</span><br><span class="line">        <span class="comment">// è®¾ç½®é«˜åº¦</span></span><br><span class="line">        <span class="keyword">self</span>.progressView.addConstraint(<span class="type">NSLayoutConstraint</span>(item: <span class="keyword">self</span>.progressView, attribute: .height, relatedBy: .<span class="built_in">equal</span>, toItem: <span class="literal">nil</span>, attribute: .height, multiplier: <span class="number">1.0</span>, constant: <span class="number">2</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">showProgressView</span><span class="params">(progress: Float)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.progressView.isHidden &#123;</span><br><span class="line">            <span class="keyword">self</span>.progressView.isHidden = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.progressView.setProgress(progress, animated: <span class="literal">true</span>)</span><br><span class="line">        <span class="keyword">if</span> progress == <span class="number">1.0</span> &#123;</span><br><span class="line">            <span class="keyword">self</span>.hideProgressView()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">hideProgressView</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.progressView.isHidden = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">self</span>.progressView.setProgress(<span class="number">0.1</span>, animated: <span class="literal">false</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// MARK: WKUIDelegate</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(<span class="number">_</span> webView: WKWebView, runJavaScriptAlertPanelWithMessage message: String, initiatedByFrame frame: WKFrameInfo, completionHandler: @escaping <span class="params">()</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> alert = <span class="type">UIAlertController</span>(title: <span class="string">"æç¤º"</span>, message: message, preferredStyle: <span class="type">UIAlertController</span>.<span class="type">Style</span>.alert)</span><br><span class="line">        <span class="keyword">let</span> sure = <span class="type">UIAlertAction</span>(title: <span class="string">"ç¡®å®š"</span>, style: <span class="type">UIAlertAction</span>.<span class="type">Style</span>.<span class="keyword">default</span>) &#123; (action: <span class="type">UIAlertAction</span>) <span class="keyword">in</span></span><br><span class="line">          completionHandler()</span><br><span class="line">        &#125;</span><br><span class="line">        alert.addAction(sure)</span><br><span class="line">        <span class="keyword">self</span>.present(alert, animated: <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// MARK: WKNavigationDelegate</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(<span class="number">_</span> webView: WKWebView, didFinish navigation: WKNavigation!)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.hideProgressView()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(<span class="number">_</span> webView: WKWebView, decidePolicyFor navigationAction: WKNavigationAction, decisionHandler: @escaping <span class="params">(WKNavigationActionPolicy)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> scheme = navigationAction.request.url?.scheme</span><br><span class="line">        <span class="comment">// about ç”¨äºè§£å†³LayUIæ¡†æ¶æ˜¾ç¤ºé—®é¢˜</span></span><br><span class="line">        <span class="keyword">if</span> scheme == <span class="string">"http"</span> || scheme == <span class="string">"https"</span> || scheme == <span class="string">"file"</span> || scheme == <span class="string">"about"</span> &#123;</span><br><span class="line">            decisionHandler(.allow)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦åˆ™ä¾‹å¦‚schemeä¸ºtaobaoã€alipayç­‰åˆ™æ ¹æ®ç¬¬ä¸‰æ–¹sdkåœ¨ç½‘é¡µä¸­é…ç½®urlï¼Œè¿™é‡Œæ˜¯éƒ½å¯ä»¥è·³è½¬</span></span><br><span class="line">        <span class="keyword">if</span> <span class="type">UIApplication</span>.shared.canOpenURL(navigationAction.request.url!) &#123;</span><br><span class="line">            <span class="comment">//å–æ¶ˆå¯¼èˆªï¼Œæ‰“å¼€APP</span></span><br><span class="line">            <span class="type">UIApplication</span>.shared.openURL(navigationAction.request.url!)</span><br><span class="line">            <span class="comment">// å–æ¶ˆ</span></span><br><span class="line">            decisionHandler(.cancel)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        decisionHandler(.allow)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.webview.removeObserver(<span class="keyword">self</span>, forKeyPath: <span class="string">"estimatedProgress"</span>)</span><br><span class="line">        <span class="keyword">self</span>.webview.removeObserver(<span class="keyword">self</span>, forKeyPath: <span class="string">"title"</span>)</span><br><span class="line">        <span class="keyword">self</span>.webview.removeObserver(<span class="keyword">self</span>, forKeyPath: <span class="string">"url"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åŒ…æ‹¬äº†è®¾ç½®UAçš„æ–¹å¼ï¼Œè‡³äºå·¦ä¾§çš„å…³é—­æŒ‰é’®å’Œå³ä¾§çš„æ›´å¤šæŒ‰é’®åˆ™å¯ä»¥è‡ªå·±å®ç°ç¾åŒ–ã€‚è¿™é‡Œä¸å¤šå®ç°äº†ã€‚</p>
</blockquote>
<h1 id="èµ„æ–™å‚è€ƒ"><a href="#èµ„æ–™å‚è€ƒ" class="headerlink" title="èµ„æ–™å‚è€ƒ"></a>èµ„æ–™å‚è€ƒ</h1><p><a href="https://developer.apple.com/documentation/webkit/wkwebview" target="_blank" rel="noopener">https://developer.apple.com/documentation/webkit/wkwebview</a></p>
<p><a href="https://kangzubin.com/wkwebview-link/" target="_blank" rel="noopener">https://kangzubin.com/wkwebview-link/</a></p>
<p><a href="https://www.jianshu.com/p/bf2008d80e2d" target="_blank" rel="noopener">https://www.jianshu.com/p/bf2008d80e2d</a></p>
<p><a href="https://blog.csdn.net/kmonarch/article/details/83585795" target="_blank" rel="noopener">https://blog.csdn.net/kmonarch/article/details/83585795</a></p>
<p><a href="https://www.jianshu.com/p/0f825df61037" target="_blank" rel="noopener">https://www.jianshu.com/p/0f825df61037</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>è§£å†³AndroidStudioå¯¼å…¥é¡¹ç›®åœ¨ Building gradle project info ä¸€ç›´å¡ä½</title>
    <url>/2019/02/28/%E8%A7%A3%E5%86%B3AndroidStudio%E5%AF%BC%E5%85%A5%E9%A1%B9%E7%9B%AE%E5%9C%A8-Building-gradle-project-info-%E4%B8%80%E7%9B%B4%E5%8D%A1%E4%BD%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong> Android studioä¸€ä¸ªå°å°çš„ç—›ç‚¹ </strong></p>
<a id="more"></a>
<h1 id="è§£å†³AndroidStudioå¯¼å…¥é¡¹ç›®åœ¨-Building-gradle-project-info-ä¸€ç›´å¡ä½"><a href="#è§£å†³AndroidStudioå¯¼å…¥é¡¹ç›®åœ¨-Building-gradle-project-info-ä¸€ç›´å¡ä½" class="headerlink" title="è§£å†³AndroidStudioå¯¼å…¥é¡¹ç›®åœ¨ Building gradle project info ä¸€ç›´å¡ä½"></a>è§£å†³AndroidStudioå¯¼å…¥é¡¹ç›®åœ¨ Building gradle project info ä¸€ç›´å¡ä½</h1><p>Android Studioå¯¼å…¥é¡¹ç›®çš„æ—¶å€™ï¼Œä¸€ç›´å¡åœ¨Building gradle project infoè¿™ä¸€æ­¥ï¼Œä¸»è¦åŸå› è¿˜æ˜¯å› ä¸ºè¢«å¢™çš„ç»“æœã€‚gradleå®˜ç½‘è™½ç„¶å¯ä»¥è®¿é—®ï¼Œä½†æ˜¯é€Ÿåº¦è¿èœ—ç‰›éƒ½èµ¶ä¸ä¸Šâ€¦</p>
<h2 id="ä¸‰ç§è§£å†³åŠæ³•"><a href="#ä¸‰ç§è§£å†³åŠæ³•" class="headerlink" title="ä¸‰ç§è§£å†³åŠæ³•"></a>ä¸‰ç§è§£å†³åŠæ³•</h2><h3 id="ç¦»çº¿åŒ…ä¸‹è½½å¯¼å…¥æ–¹å¼"><a href="#ç¦»çº¿åŒ…ä¸‹è½½å¯¼å…¥æ–¹å¼" class="headerlink" title="ç¦»çº¿åŒ…ä¸‹è½½å¯¼å…¥æ–¹å¼"></a>ç¦»çº¿åŒ…ä¸‹è½½å¯¼å…¥æ–¹å¼</h3><p>æŸ¥çœ‹æ‰€éœ€gradleç‰ˆæœ¬ï¼šæ‰“å¼€<code>C:\Users\ç”¨æˆ·å\.gradle\wrapper\dists\gradle-x.xx-all\xxxxxxxxxxxx</code>ï¼Œ<br>å¦‚æœé‡Œé¢çš„gradle-xx-all.zipä¸å®Œæ•´ï¼ˆå¦‚0KBï¼‰ï¼Œåˆ™è¯´æ˜ä¸‹è½½ä¸æˆåŠŸï¼Œéœ€è¦ä¸‹è½½ç¦»çº¿åŒ…æ”¾ç½®åˆ°è¯¥ç›®å½•ä¸‹ã€‚</p>
<p>ä¸‹è½½åœ°å€ï¼š<a href="http://note.youdao.com/" target="_blank" rel="noopener">https://services.gradle.org/distributions/</a></p>
<h3 id="ä¿®æ”¹gradle-wrapper-propertiesæ–¹å¼"><a href="#ä¿®æ”¹gradle-wrapper-propertiesæ–¹å¼" class="headerlink" title="ä¿®æ”¹gradle-wrapper.propertiesæ–¹å¼"></a>ä¿®æ”¹gradle-wrapper.propertiesæ–¹å¼</h3><p>1ã€éšä¾¿æ‰¾ä¸€ä¸ªä½ ä¹‹å‰èƒ½å¤Ÿè¿è¡Œçš„ASé¡¹ç›®</p>
<p>2ã€æ‰“å¼€é¡¹ç›®çš„<code>/gradle/wrapper/gradle-wrapper.properties</code>æ–‡ä»¶</p>
<p>3ã€å¤åˆ¶æœ€åä¸€è¡ŒdistributionUrlè¿™ä¸€æ•´è¡Œçš„å†…å®¹ï¼Œä¾‹å¦‚ï¼š<code>distributionUrl=https\://services.gradle.org/distributions/</code>gradle-2.8-all.zipï¼Œæ›¿æ¢åˆ°ä½ è¦å¯¼å…¥çš„é¡¹ç›®é‡Œçš„gradle-wrapper.propertiesæ–‡ä»¶ä¸­ã€‚</p>
<p>4ã€é‡å¯Android Studioï¼Œé‡æ–°å¯¼å…¥é¡¹ç›®å°±å¯ä»¥äº†~~</p>
<h3 id="ç¿»å¢™"><a href="#ç¿»å¢™" class="headerlink" title="ç¿»å¢™"></a>ç¿»å¢™</h3><p>ç¿»å¼€ä¸­å›½ä¼Ÿå¤§çš„å¢™å°±å¯ä»¥äº†ã€‚æœ¬äººä¸€ç›´ç”¨çš„è“ç¯ã€‚</p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Studio</tag>
      </tags>
  </entry>
  <entry>
    <title>Macå®‰è£…Mysqlæ•™ç¨‹</title>
    <url>/2019/02/25/Mac%E5%AE%89%E8%A3%85Mysql%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul>
<li>MacOS10ä»¥ä¸Š</li>
</ul>
<a id="more"></a>
<h1 id="ä¸‹è½½Mysql"><a href="#ä¸‹è½½Mysql" class="headerlink" title="ä¸‹è½½Mysql"></a>ä¸‹è½½Mysql</h1><p>è¿™é‡Œä»¥Mysql5.7ä¸ºä¾‹</p>
<p><a href="https://dev.mysql.com/downloads/mysql/5.7.html#downloads" target="_blank" rel="noopener">å®˜ç½‘</a><br>ä¸ºäº†æ–¹ä¾¿å¼€å‘ï¼Œæ¨èç›´æ¥é€‰æ‹©dmgæ–‡ä»¶ä¸‹è½½å®‰è£…</p>
<p><img src="download.png" alt></p>
<h1 id="å®‰è£…Mysql"><a href="#å®‰è£…Mysql" class="headerlink" title="å®‰è£…Mysql"></a>å®‰è£…Mysql</h1><p>ç›´æ¥åŒå‡»å³å¯ï¼Œå‚»ç“œå¼æ“ä½œã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œå®‰è£…æˆåŠŸåä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œä½ ç›´æ¥å¿½ç•¥äº†å¯ä»¥çœ‹é€šçŸ¥é¢æ¿ï¼Œ<br>è¿™ä¸ªå°±æ˜¯Mysqlçš„åˆå§‹å¯†ç <br>å¦‚å›¾</p>
</blockquote>
<p><img src="mysqlpwd.png" alt></p>
<h1 id="å¯åŠ¨Mysql"><a href="#å¯åŠ¨Mysql" class="headerlink" title="å¯åŠ¨Mysql"></a>å¯åŠ¨Mysql</h1><p>å®‰è£…å®Œæ¯•åç³»ç»Ÿåå¥½è®¾ç½®ä¼šå¤šå‡ºä¸€ä¸ªé€‰é¡¹</p>
<p><img src="pane.png" alt></p>
<p>ç‚¹å‡»è¿›å»</p>
<p><img src="mysqlpane.png" alt></p>
<p>å®‰è£…ä¹‹åï¼Œé»˜è®¤MySQLçš„çŠ¶æ€æ˜¯stoppedï¼Œå…³é—­çš„ï¼Œéœ€è¦ç‚¹å‡»â€œStart MySQL Serverâ€æŒ‰é’®æ¥å¯åŠ¨å®ƒï¼Œå¯åŠ¨ä¹‹åï¼ŒçŠ¶æ€ä¼šå˜æˆrunningã€‚ä¸‹æ–¹è¿˜æœ‰ä¸€ä¸ªå¤é€‰æ¡†æŒ‰é’®ï¼Œå¯ä»¥è®¾ç½®æ˜¯å¦åœ¨ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™è‡ªåŠ¨å¯åŠ¨MySQLï¼Œé»˜è®¤æ˜¯å‹¾é€‰çš„ï¼Œå»ºè®®å–æ¶ˆï¼ŒèŠ‚çœå¼€æœºæ—¶é—´ã€‚</p>
<h1 id="ç»ˆç«¯è¿æ¥Mysql"><a href="#ç»ˆç«¯è¿æ¥Mysql" class="headerlink" title="ç»ˆç«¯è¿æ¥Mysql"></a>ç»ˆç«¯è¿æ¥Mysql</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.bash_profile</span><br></pre></td></tr></table></figure>
<p>æ·»åŠ <code>export PATH=${PATH}:/usr/local/mysql/bin</code>å³å¯</p>
<p>ç™»é™†Mysql<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure></p>
<p>è¾“å…¥åˆšå¼€å§‹å®‰è£…å¯¹è¯æ¡†ä¸­æç¤ºçš„åˆå§‹å¯†ç ï¼Œç™»é™†æˆåŠŸåè¯·ä¿®æ”¹å¯†ç ï¼Œå¦åˆ™æ— æ³•æ‰§è¡Œå…¶ä»–å‘½ä»¤ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ALTER USER <span class="string">'root'</span>@<span class="string">'localhost'</span> IDENTIFIED BY <span class="string">'newpassword'</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>DBA</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title>Macä½¿ç”¨HomeBrewå®‰è£…Composer</title>
    <url>/2019/02/25/Mac%E4%BD%BF%E7%94%A8HomeBrew%E5%AE%89%E8%A3%85Composer/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul>
<li>MacOS10ä»¥ä¸Š</li>
</ul>
<a id="more"></a>
<h1 id="å®‰è£…HomeBrew"><a href="#å®‰è£…HomeBrew" class="headerlink" title="å®‰è£…HomeBrew"></a>å®‰è£…HomeBrew</h1><p>homebrewå®˜ç½‘ <a href="https://brew.sh/" target="_blank" rel="noopener">é“¾æ¥</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/bin/ruby -e <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure>
<p>å›è½¦å®‰è£…å³å¯</p>
<h1 id="å®‰è£…Composer"><a href="#å®‰è£…Composer" class="headerlink" title="å®‰è£…Composer"></a>å®‰è£…Composer</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">brew install composer</span><br></pre></td></tr></table></figure>
<p>å®‰è£…å®Œæ¯•åcomposerå¯èƒ½ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥å‡çº§</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">composer self-update</span><br></pre></td></tr></table></figure>
<h1 id="ä¿®æ”¹Packagist-é•œåƒ"><a href="#ä¿®æ”¹Packagist-é•œåƒ" class="headerlink" title="ä¿®æ”¹Packagist é•œåƒ"></a>ä¿®æ”¹Packagist é•œåƒ</h1><p>ä¿®æ”¹ <code>composer</code> çš„å…¨å±€é…ç½®æ–‡ä»¶</p>
<p>æ‰“å¼€å‘½ä»¤è¡Œçª—å£ï¼ˆwindowsç”¨æˆ·ï¼‰æˆ–æ§åˆ¶å°ï¼ˆLinuxã€Mac ç”¨æˆ·ï¼‰å¹¶æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">composer config -g repo.packagist composer https://packagist.phpcomposer.com</span><br></pre></td></tr></table></figure></p>
<h1 id="ä½¿ç”¨composer"><a href="#ä½¿ç”¨composer" class="headerlink" title="ä½¿ç”¨composer"></a>ä½¿ç”¨composer</h1><p>ä¸¾ä¾‹æˆ‘è¦å¼•ç”¨phalconçš„å¼€å‘å·¥å…·åŒ…ã€‚åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶composer.jsonï¼Œå¹¶æ·»åŠ å¦‚ä¸‹ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;require&quot;: &#123;</span><br><span class="line">        &quot;phalcon/devtools&quot;: &quot;dev-master&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">composer update</span><br></pre></td></tr></table></figure>
<p>é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹å°±ä¼šæœ‰vendoræ–‡ä»¶å¤¹ï¼Œä¾èµ–æ–‡ä»¶éƒ½åœ¨è¿™ä¸‹é¢å•¦ã€‚<br>ä½¿ç”¨æ—¶ç›´æ¥åŒ…å«autoload.phpå°±å¯ä»¥äº†</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">'vendor/autoload.php'</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ›´å¤šå‘½ä»¤å¯ä»¥ç›´æ¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£<a href="http://docs.phpcomposer.com/03-cli.html" target="_blank" rel="noopener">http://docs.phpcomposer.com/03-cli.html</a></p>
</blockquote>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<ul>
<li><a href="https://www.jianshu.com/p/2b96cc9f593e" target="_blank" rel="noopener">https://www.jianshu.com/p/2b96cc9f593e</a></li>
<li><a href="https://pkg.phpcomposer.com/" target="_blank" rel="noopener">https://pkg.phpcomposer.com/</a></li>
<li><a href="https://getcomposer.org/" target="_blank" rel="noopener">https://getcomposer.org/</a></li>
</ul>
]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Homebrew</tag>
        <tag>Mac</tag>
        <tag>Composer</tag>
      </tags>
  </entry>
  <entry>
    <title>Macä½¿ç”¨HomeBrewå®‰è£…Maven</title>
    <url>/2019/02/20/Mac%E4%BD%BF%E7%94%A8HomeBrew%E5%AE%89%E8%A3%85Maven/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul>
<li>MacOS10ä»¥ä¸Š</li>
<li>jdk1.6æˆ–ä»¥ä¸Š</li>
</ul>
<a id="more"></a>
<h1 id="å®‰è£…HomeBrew"><a href="#å®‰è£…HomeBrew" class="headerlink" title="å®‰è£…HomeBrew"></a>å®‰è£…HomeBrew</h1><p>homebrewå®˜ç½‘ <a href="https://brew.sh/" target="_blank" rel="noopener">é“¾æ¥</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/usr/bin/ruby -e <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure>
<p>å›è½¦å®‰è£…å³å¯</p>
<h1 id="å®‰è£…Maven"><a href="#å®‰è£…Maven" class="headerlink" title="å®‰è£…Maven"></a>å®‰è£…Maven</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ brew search maven</span><br><span class="line">==&gt; Formulae</span><br><span class="line">maven âœ”                    maven-shell                maven@3.3</span><br><span class="line">maven-completion           maven@3.2                  maven@3.5</span><br><span class="line"></span><br><span class="line">==&gt; Casks</span><br><span class="line">homebrew/cask-fonts/font-maven-pro</span><br><span class="line">$ brew install maven</span><br></pre></td></tr></table></figure>
<h1 id="éªŒè¯mavenæ˜¯å¦å®‰è£…æˆåŠŸ"><a href="#éªŒè¯mavenæ˜¯å¦å®‰è£…æˆåŠŸ" class="headerlink" title="éªŒè¯mavenæ˜¯å¦å®‰è£…æˆåŠŸ"></a>éªŒè¯mavenæ˜¯å¦å®‰è£…æˆåŠŸ</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mvn -v</span><br></pre></td></tr></table></figure>
<h1 id="é…ç½®Mavenä»“åº“"><a href="#é…ç½®Mavenä»“åº“" class="headerlink" title="é…ç½®Mavenä»“åº“"></a>é…ç½®Mavenä»“åº“</h1><p>setting.xmlè·¯å¾„ä¸º<code>/usr/local/Cellar/maven/3.5.0/libexec/conf/settings.xml</code><br>ä¿®æ”¹å³å¯ã€‚</p>
<p>å¯å°†<code>settings.xml</code>ç›´æ¥æ‹·è´åˆ°<code>.m2</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œè¿›è¡Œé…ç½®ã€‚</p>
<p>~~å¦‚æœæ²¡æœ‰<code>.m2</code>æ–‡ä»¶å¤¹æ—¶,è¿è¡Œå‘½ä»¤<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mvn <span class="built_in">help</span>:system</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åæ‰“å¼€å½“å‰ç”¨æˆ·çš„ç›®å½•ï¼Œå¯ä»¥åœ¨å…¶ä¸­æ‰¾åˆ°<code>.m2</code>æ–‡ä»¶å¤¹~~</p>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Homebrew</tag>
        <tag>Mac</tag>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>CocoaPodsç®€å•å®‰è£…å’Œä½¿ç”¨</title>
    <url>/2019/01/18/CocoaPods%E7%AE%80%E5%8D%95%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä»€ä¹ˆæ˜¯CocoaPods"><a href="#ä»€ä¹ˆæ˜¯CocoaPods" class="headerlink" title="ä»€ä¹ˆæ˜¯CocoaPods"></a>ä»€ä¹ˆæ˜¯CocoaPods</h1><p>CocoaPodsæ˜¯ä¸“é—¨ä¸ºiOSå·¥ç¨‹æä¾›å¯¹ç¬¬ä¸‰æ–¹åº“çš„ä¾èµ–çš„ç®¡ç†å·¥å…·ï¼Œé€šè¿‡CocoaPodsï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–¹ä¾¿åœ°ç®¡ç†æ¯ä¸ªç¬¬ä¸‰æ–¹åº“çš„ç‰ˆæœ¬ï¼Œè€Œä¸”ä¸éœ€è¦æˆ‘ä»¬åšå¤ªå¤šçš„é…ç½®ã€‚ç›´è§‚ã€é›†ä¸­å’Œè‡ªåŠ¨åŒ–åœ°ç®¡ç†æˆ‘ä»¬é¡¹ç›®çš„ç¬¬ä¸‰æ–¹åº“ã€‚</p>
<a id="more"></a>
<h1 id="å®‰è£…CocoaPods"><a href="#å®‰è£…CocoaPods" class="headerlink" title="å®‰è£…CocoaPods"></a>å®‰è£…CocoaPods</h1><h2 id="æ›´æ–°gem"><a href="#æ›´æ–°gem" class="headerlink" title="æ›´æ–°gem"></a>æ›´æ–°gem</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo gem update --system</span><br></pre></td></tr></table></figure>
<h2 id="æ›´æ¢é•œåƒ"><a href="#æ›´æ¢é•œåƒ" class="headerlink" title="æ›´æ¢é•œåƒ"></a>æ›´æ¢é•œåƒ</h2><p>åˆ é™¤è‡ªå¸¦é•œåƒ<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gem sources --remove https://rubygems.org/</span><br></pre></td></tr></table></figure></p>
<p>æ›´æ¢<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gem sources -a https://gems.ruby-china.com/</span><br></pre></td></tr></table></figure></p>
<p>æŸ¥çœ‹<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gem sources -l</span><br></pre></td></tr></table></figure></p>
<p>å¦‚å›¾æ˜¾ç¤ºå³ä¸ºæ›¿æ¢é•œåƒæˆåŠŸ<br><img src="gemsourcel.png" alt></p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo gem install cocoapods</span><br></pre></td></tr></table></figure>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pod setup</span><br></pre></td></tr></table></figure>
<p><img src="podsetup.png" alt></p>
<p>åˆ°è¿™é‡ŒCocoaPodså°±å·²ç»å®‰è£…å®Œæ¯•äº†ã€‚</p>
<h1 id="ä½¿ç”¨CocoaPods"><a href="#ä½¿ç”¨CocoaPods" class="headerlink" title="ä½¿ç”¨CocoaPods"></a>ä½¿ç”¨CocoaPods</h1><h2 id="æŸ¥æ‰¾ç¬¬ä¸‰æ–¹åº“"><a href="#æŸ¥æ‰¾ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="æŸ¥æ‰¾ç¬¬ä¸‰æ–¹åº“"></a>æŸ¥æ‰¾ç¬¬ä¸‰æ–¹åº“</h2><p>æ¯”å¦‚è¯´è¦æŸ¥æ‰¾æŸä¸ªåº“ï¼Œç›´æ¥åœ¨ç»ˆç«¯è¾“å…¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pod search QMUIKit</span><br></pre></td></tr></table></figure>
<p>å®Œæˆåä»–ä¼šè‡ªåŠ¨è¿›å…¥ä¸€ä¸ªæ–°çš„é¡µé¢æ˜¾ç¤ºæœç´¢ç»“æœï¼Œä¸Šä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤šï¼Œè¦é€€å‡ºçš„è¯æŒ‰wqå°±å¯ä»¥äº†ã€‚ä»¥åå†æœç´¢å°±ä¸éœ€è¦å»ºç´¢å¼•äº†ã€‚</p>
<h2 id="å¼•å…¥ç¬¬ä¸‰æ–¹åº“åˆ°é¡¹ç›®ä¸­"><a href="#å¼•å…¥ç¬¬ä¸‰æ–¹åº“åˆ°é¡¹ç›®ä¸­" class="headerlink" title="å¼•å…¥ç¬¬ä¸‰æ–¹åº“åˆ°é¡¹ç›®ä¸­"></a>å¼•å…¥ç¬¬ä¸‰æ–¹åº“åˆ°é¡¹ç›®ä¸­</h2><p>è¿™é‡Œæ¼”ç¤ºç¬¬ä¸‰æ–¹åº“ä¸ºQMUIKit</p>
<p>æ‰“å¼€xcodeæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥é¡¹ç›®è·¯å¾„ä¸­ã€‚<br><img src="projectpwd.png" alt></p>
<p>è¾“å…¥<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pod init</span><br></pre></td></tr></table></figure></p>
<p>å°†è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªPodfileæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥è‡ªå·±ç”Ÿæˆï¼Œå‘½ä»¤ç”Ÿæˆæœ‰é»˜è®¤æ¨¡æ¿<br><img src="projectpwd.png" alt></p>
<p>vimç¼–å†™,æ·»åŠ qmuikit<br><img src="podqmui.png" alt></p>
<p>å®‰è£…ç¬¬ä¸‰æ–¹åº“<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pod install</span><br></pre></td></tr></table></figure></p>
<p><img src="podinstall.png" alt></p>
<p>æŸ¥çœ‹é¡¹ç›®ç›®å½•å˜åŒ–</p>
<p>åœ¨è®¿è¾¾ä¸­<br><img src="fd.png" alt></p>
<p>åŸæœ¬ä½¿ç”¨xcodeprojæ‰“å¼€é¡¹ç›®ï¼Œä½†æ˜¯ç°åœ¨è¦æ”¹å˜æˆxcworkspaceæ‰“å¼€é¡¹ç›®äº†ã€‚</p>
<p><img src="installcomple.png" alt></p>
<p>è¿™æ ·å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨è¯¥åº“å•¦ã€‚ä½†æ˜¯æœ‰æ—¶å€™æ²¡æœ‰åªèƒ½æç¤ºæ—¶å€™ï¼Œéœ€è¦æ›´æ”¹<code>Build Settings</code>ä¸­çš„<code>User header search paths</code>æ·»åŠ <code>$(SRCROOT)</code>å¹¶é€‰æ‹©<code>recursive</code></p>
<p><img src="setting.png" alt></p>
<p><img src="showtip.png" alt></p>
<h2 id="å¢åŠ ç¬¬ä¸‰æ–¹"><a href="#å¢åŠ ç¬¬ä¸‰æ–¹" class="headerlink" title="å¢åŠ ç¬¬ä¸‰æ–¹"></a>å¢åŠ ç¬¬ä¸‰æ–¹</h2><p>ç»§ç»­ç¼–å†™Podfileæ–‡ä»¶æ·»åŠ ç¬¬ä¸‰æ–¹åº“ç„¶ååœ¨æ‰§è¡Œ<code>pod install</code>å°±å¯ä»¥äº†</p>
<h2 id="æ›´æ–°ç¬¬ä¸‰æ–¹"><a href="#æ›´æ–°ç¬¬ä¸‰æ–¹" class="headerlink" title="æ›´æ–°ç¬¬ä¸‰æ–¹"></a>æ›´æ–°ç¬¬ä¸‰æ–¹</h2><p>ç¬¬ä¸‰æ–¹åº“ä»¬éƒ½æœ‰äººåœ¨ç»´æŠ¤å‡çº§ï¼Œæˆ‘ä»¬éœ€è¦éš”æ–­æ—¶é—´å°±è¦æ›´æ–°ä¸‹æˆ‘ä»¬å·¥ç¨‹ä¸­ç¬¬ä¸‰æ–¹åº“çš„ç‰ˆæœ¬ã€‚åªéœ€è¦ç»ˆç«¯è¾“å…¥å‘½ä»¤<code>pod update</code>å°±å¯ä»¥äº†ã€‚<br>å¦‚æœé‡åˆ°<code>pod install</code>æˆ–è€…<code>pod update</code>æ…¢çš„é—®é¢˜ï¼ŒåŸå› åœ¨äºå½“æ‰§è¡Œä»¥ä¸Šä¸¤ä¸ªå‘½ä»¤çš„æ—¶å€™ä¼šå‡çº§CocoaPodsçš„specä»“åº“ï¼ŒåŠ ä¸€ä¸ªå‚æ•°å¯ä»¥çœç•¥è¿™ä¸€æ­¥ï¼Œç„¶åé€Ÿåº¦å°±ä¼šæå‡ä¸å°‘ã€‚åŠ å‚æ•°çš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pod install --verbose --no-repo-update</span><br><span class="line">pod update --verbose --no-repo-update</span><br></pre></td></tr></table></figure>
<h2 id="åˆ é™¤ç¬¬ä¸‰æ–¹"><a href="#åˆ é™¤ç¬¬ä¸‰æ–¹" class="headerlink" title="åˆ é™¤ç¬¬ä¸‰æ–¹"></a>åˆ é™¤ç¬¬ä¸‰æ–¹</h2><p>å½“æˆ‘ä»¬éœ€è¦å»æ‰æŸä¸ªç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œåªéœ€è¦åœ¨Podfileåˆ é™¤è¯¥å¼•å…¥è¯¥åº“çš„è¯­å¥ï¼Œç„¶åæ‰§è¡Œ<code>pod update</code>æˆ–è€…<code>pod install</code>å°±å¯ä»¥äº†ã€‚</p>
<h1 id="å‡çº§CocoaPods"><a href="#å‡çº§CocoaPods" class="headerlink" title="å‡çº§CocoaPods"></a>å‡çº§CocoaPods</h1><p>å‡çº§CocoaPodsç‰ˆæœ¬çš„å‘½ä»¤å’Œå®‰è£…CocoaPodsçš„å‘½ä»¤ä¸€æ ·ï¼Œéƒ½æ˜¯<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo gem install cocoapods</span><br></pre></td></tr></table></figure></p>
<h1 id="å¸è½½CocoaPods"><a href="#å¸è½½CocoaPods" class="headerlink" title="å¸è½½CocoaPods"></a>å¸è½½CocoaPods</h1><p>å¸è½½CocoaPodsçš„å‘½ä»¤æ˜¯<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo gem uninstall cocoapods</span><br></pre></td></tr></table></figure></p>
<h1 id="æ›´æ¢gemå’Œpod-repoæº"><a href="#æ›´æ¢gemå’Œpod-repoæº" class="headerlink" title="æ›´æ¢gemå’Œpod repoæº"></a>æ›´æ¢gemå’Œpod repoæº</h1><h2 id="gemæ›´æ¢æº"><a href="#gemæ›´æ¢æº" class="headerlink" title="gemæ›´æ¢æº"></a>gemæ›´æ¢æº</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ gem sources --remove https://rubygems.org/ <span class="comment"># ç§»é™¤é»˜è®¤æº</span></span><br><span class="line">$ gem sources -a https://gems.ruby-china.com/ <span class="comment"># æ·»åŠ Ruby Chinaé•œåƒ</span></span><br><span class="line">$ gem sources -l</span><br></pre></td></tr></table></figure>
<p>ç¡®ä¿åªæœ‰<code>gems.ruby-china.org</code>æº</p>
<h2 id="pod-repoæ¢æº"><a href="#pod-repoæ¢æº" class="headerlink" title="pod repoæ¢æº"></a>pod repoæ¢æº</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ pod repo remove master</span><br><span class="line">$ pod repo add master https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git</span><br><span class="line">$ pod repo update</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŠŠå®ƒæ¢æˆ<code>æ¸…åtuna</code>æº</p>
<p>å¯¹äºæ—§ç‰ˆçš„ CocoaPods å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ä½¿ç”¨ tuna çš„é•œåƒ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ pod repo remove master</span><br><span class="line">$ pod repo add master https://mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git</span><br><span class="line">$ pod repo update</span><br></pre></td></tr></table></figure>
<p>æ–°ç‰ˆçš„ CocoaPods ä¸å…è®¸ç”¨pod repo addç›´æ¥æ·»åŠ masteråº“äº†ã€‚å¦‚æœæ‰§è¡Œ<code>pod repo add</code>å‡ºç°é”™è¯¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">to setup the master specs repo.....</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆä½¿ç”¨ä»¥ä¸‹åŠæ³•</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">$ pod repo <span class="keyword">remove</span> master</span><br><span class="line">$ git clone https:<span class="comment">//mirrors.tuna.tsinghua.edu.cn/git/CocoaPods/Specs.git ~/.cocoapods/repos/master</span></span><br></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œå¦‚æœ<code>Podfile</code>æ–‡ä»¶ä¸­æœ‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">source</span> <span class="string">'https://github.com/CocoaPods/Specs.git'</span></span><br></pre></td></tr></table></figure>
<p>ä¹Ÿéœ€è¦æŠŠå®ƒæ¢æˆrepoçš„æºï¼Œå¦åˆ™ä¾ç„¶æ˜¯ä½¿ç”¨GitHubæº<br> ä¸Šé¢çš„æ­¥éª¤éƒ½å®Œæˆåï¼Œå³å¯ä½¿ç”¨</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">$ pod install</span><br><span class="line">$ pod update</span><br></pre></td></tr></table></figure>
<h1 id="CocoaPods-Mac-App"><a href="#CocoaPods-Mac-App" class="headerlink" title="CocoaPods Mac App"></a>CocoaPods Mac App</h1><p>CocoaPodsæ¡Œé¢åº”ç”¨ç‰ˆä¸‹è½½åœ°å€ï¼š<a href="https://cocoapods.org/app" target="_blank" rel="noopener">https://cocoapods.org/app</a></p>
<h1 id="Mac-å‡çº§åˆ°10-13ä¹‹å-Cocoapods-ä¸èƒ½ç”¨"><a href="#Mac-å‡çº§åˆ°10-13ä¹‹å-Cocoapods-ä¸èƒ½ç”¨" class="headerlink" title="Mac å‡çº§åˆ°10.13ä¹‹å Cocoapods ä¸èƒ½ç”¨"></a>Mac å‡çº§åˆ°10.13ä¹‹å Cocoapods ä¸èƒ½ç”¨</h1><p>ä¸¤å¥è¯ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo gem update --system</span><br><span class="line">sudo gem install cocoapods -n /usr/<span class="built_in">local</span>/bin</span><br></pre></td></tr></table></figure>
<p>ä¸¤è¡Œè§£å†³é—®é¢˜ã€‚æˆ–è€…å¯ä»¥å°è¯•é‡æ–°å®‰è£…ã€‚</p>
<h1 id="ERROR-While-executing-gem-â€¦-Gem-FilePermissionError"><a href="#ERROR-While-executing-gem-â€¦-Gem-FilePermissionError" class="headerlink" title="ERROR: While executing gem â€¦ (Gem::FilePermissionError)"></a>ERROR: While executing gem â€¦ (Gem::FilePermissionError)</h1><p>æ›´æ¢è¯­å¥<code>sudo gem install -n /usr/local/bin</code>åŠ ä¸Š é¡¹ç›®å</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo gem install -n /usr/<span class="built_in">local</span>/bin fastlane</span><br><span class="line">$ sudo gem install -n /usr/<span class="built_in">local</span>/bin cocoapods</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å»ºè®®çš„æ˜¯ç”¨ <a href="http://brew.sh/" target="_blank" rel="noopener">homebrew</a> å†è£…ä¸€ä¸ª ruby, è¿™æ · local å½’ local, system å½’ system. åæ­£ä¹Ÿä¸å¤§.</p>
</blockquote>
<h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p><a href="https://juejin.im/entry/5c067eb56fb9a04a0a5ef583?utm_source=gold_browser_extension" target="_blank" rel="noopener">https://juejin.im/entry/5c067eb56fb9a04a0a5ef583?utm_source=gold_browser_extension</a><br><a href="https://guides.cocoapods.org/syntax/podfile.html#podfile" target="_blank" rel="noopener">https://guides.cocoapods.org/syntax/podfile.html#podfile</a><br><a href="https://www.jianshu.com/p/91f3b9d8f402" target="_blank" rel="noopener">https://www.jianshu.com/p/91f3b9d8f402</a><br><a href="https://blog.csdn.net/u014599371/article/details/89916513" target="_blank" rel="noopener">https://blog.csdn.net/u014599371/article/details/89916513</a></p>
]]></content>
      <categories>
        <category>Ios</category>
      </categories>
      <tags>
        <tag>Ios</tag>
      </tags>
  </entry>
  <entry>
    <title>TomcatåŸºæœ¬ä½¿ç”¨</title>
    <url>/2018/11/21/Tomcat%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h1><p>åˆ°apacheå®˜ç½‘ã€‚<a href="http://www.apache.org" target="_blank" rel="noopener">www.apache.org</a>     <a href="http://jakarta.apache.org(äº§å“çš„ä¸»é¡µ)" target="_blank" rel="noopener">http://jakarta.apache.org(äº§å“çš„ä¸»é¡µ)</a></p>
<p>å®‰è£…ç‰ˆï¼šwindow ï¼ˆexeã€msiï¼‰ linuxï¼ˆrmpï¼‰<br>å‹ç¼©ç‰ˆï¼šwindowï¼ˆrarï¼Œzipï¼‰ linuxï¼ˆtarï¼Œtar.gzï¼‰<strong> å­¦ä¹ æ—¶å€™ä½¿ç”¨ </strong></p>
<a id="more"></a>
<h2 id="è¿è¡Œå’Œå…³é—­tomcat"><a href="#è¿è¡Œå’Œå…³é—­tomcat" class="headerlink" title="è¿è¡Œå’Œå…³é—­tomcat"></a>è¿è¡Œå’Œå…³é—­tomcat</h2><h3 id="å¯åŠ¨è½¯ä»¶"><a href="#å¯åŠ¨è½¯ä»¶" class="headerlink" title="å¯åŠ¨è½¯ä»¶"></a>å¯åŠ¨è½¯ä»¶</h3><p>aï¼‰æ‰¾åˆ°%tomcat%/bin/startup.bat ï¼ŒåŒå‡»è¿™ä¸ªæ–‡ä»¶<br>bï¼‰å¼¹å‡ºçª—å£ï¼Œæ˜¾ç¤ºä¿¡æ¯ï¼ˆä¸è¦å…³é—­æ¬¡çª—å£ï¼‰<br>cï¼‰æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å‡ºä»¥ä¸‹åœ°å€ <a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a><br>dï¼‰çœ‹åˆ°ä¸€åªçŒ«ç”»é¢ï¼Œè¯æ˜è½¯ä»¶å¯åŠ¨æˆåŠŸï¼</p>
<h3 id="å…³é—­è½¯ä»¶"><a href="#å…³é—­è½¯ä»¶" class="headerlink" title="å…³é—­è½¯ä»¶"></a>å…³é—­è½¯ä»¶</h3><p>aï¼‰æ‰¾åˆ°%tomcat%/bin/shutdown.batï¼ŒåŒå‡»è¿™ä¸ªæ–‡ä»¶å³å¯ï¼<br>bï¼‰æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å‡ºä»¥ä¸‹åœ°å€ã€‚çœ‹åˆ°â€œæ— æ³•è¿æ¥â€ï¼ˆæœ€å¥½å…ˆæ¸…ç©ºæµè§ˆå™¨ç¼“å­˜ï¼‰</p>
<h1 id="Tomcatç›®å½•ç»“æ„"><a href="#Tomcatç›®å½•ç»“æ„" class="headerlink" title="Tomcatç›®å½•ç»“æ„"></a>Tomcatç›®å½•ç»“æ„</h1><h2 id="bin"><a href="#bin" class="headerlink" title="bin"></a>bin</h2><p>å­˜æ”¾å¸¸ç”¨tomcatå‘½ä»¤</p>
<h2 id="conf"><a href="#conf" class="headerlink" title="conf"></a>conf</h2><p>å­˜æ”¾serveré…ç½®æ–‡ä»¶</p>
<h2 id="lib"><a href="#lib" class="headerlink" title="lib"></a>lib</h2><p>è‡ªå¸¦jaråŒ…</p>
<h2 id="logs"><a href="#logs" class="headerlink" title="logs"></a>logs</h2><p>å­˜æ”¾æ—¥å¿—</p>
<h2 id="temp"><a href="#temp" class="headerlink" title="temp"></a>temp</h2><p>å­˜æ”¾ä¸´æ—¶æ–‡ä»¶</p>
<h2 id="webapps"><a href="#webapps" class="headerlink" title="webapps"></a>webapps</h2><p>å­˜æ”¾å…±äº«èµ„æºç›®å½•</p>
<h2 id="work"><a href="#work" class="headerlink" title="work"></a>work</h2><p>å·¥ä½œç©ºé—´</p>
<h1 id="Tomcatå¸¸è§é—®é¢˜"><a href="#Tomcatå¸¸è§é—®é¢˜" class="headerlink" title="Tomcatå¸¸è§é—®é¢˜"></a>Tomcatå¸¸è§é—®é¢˜</h1><h2 id="ä¸€é—ªè€Œè¿‡"><a href="#ä¸€é—ªè€Œè¿‡" class="headerlink" title="ä¸€é—ªè€Œè¿‡"></a>ä¸€é—ªè€Œè¿‡</h2><p>é…ç½®å¥½JDKç¯å¢ƒå³å¯ï¼Œå³JAVA_HOME,PATHï¼ŒCLASSPATHç¯å¢ƒå˜é‡å³å¯ã€‚</p>
<h2 id="ç«¯å£å ç”¨çš„é”™è¯¯"><a href="#ç«¯å£å ç”¨çš„é”™è¯¯" class="headerlink" title="ç«¯å£å ç”¨çš„é”™è¯¯"></a>ç«¯å£å ç”¨çš„é”™è¯¯</h2><p>åŸå› ï¼š tomcatå¯åŠ¨æ‰€éœ€çš„ç«¯å£è¢«å…¶ä»–è½¯ä»¶å ç”¨äº†ï¼<br>è§£å†³åŠæ³•ï¼š<br>aï¼‰å…³é—­å…¶ä»–è½¯ä»¶ç¨‹åºï¼Œé‡Šæ”¾æ‰€éœ€ç«¯å£<br>bï¼‰ä¿®æ”¹tomcatè½¯ä»¶æ‰€éœ€ç«¯å£<br>æ‰¾åˆ°å¹¶ä¿®æ”¹%tomcat%/conf/server.xmlæ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Connector</span> <span class="attr">port</span>=<span class="string">"8081"</span> <span class="attr">protocol</span>=<span class="string">"HTTP/1.1"</span> </span></span><br><span class="line"><span class="tag">              <span class="attr">connectionTimeout</span>=<span class="string">"20000"</span> </span></span><br><span class="line"><span class="tag">              <span class="attr">redirectPort</span>=<span class="string">"8443"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="CATALINAç¯å¢ƒå˜é‡é—®é¢˜"><a href="#CATALINAç¯å¢ƒå˜é‡é—®é¢˜" class="headerlink" title="CATALINAç¯å¢ƒå˜é‡é—®é¢˜"></a>CATALINAç¯å¢ƒå˜é‡é—®é¢˜</h2><p>åŸå› ï¼š tomcatè½¯ä»¶å¯åŠ¨åï¼Œé™¤äº†æŸ¥æ‰¾JAVA_HOMEåï¼Œè¿˜ä¼šå†æŸ¥æ‰¾ä¸€ä¸ªå«CATALINA_HOMEå˜é‡ï¼Œè¿™ä¸ªå˜é‡çš„ä½œç”¨æ˜¯è®¾ç½®tomcatçš„æ ¹ç›®å½•ã€‚<br>è§£å†³åŠæ³•ï¼šå»ºè®®ä¸è¦è®¾ç½®CATALINA_HOMEå˜é‡ã€‚æ£€æŸ¥å¦‚æœæœ‰çš„è¯ï¼Œæ¸…é™¤æ‰ï¼ï¼ï¼</p>
]]></content>
      <categories>
        <category>Tomcat</category>
      </categories>
      <tags>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>å•ä¾‹æ¨¡å¼-JAVAå®ç°</title>
    <url>/2018/11/20/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F-JAVA%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h1><p>ä»€ä¹ˆæ˜¯å•ä¾‹ï¼Ÿå°±æ˜¯ä¿è¯åœ¨ä¸€ä¸ªjvmå½“ä¸­åªèƒ½ç”±ä¸€ä¸ªå®ä¾‹ã€‚ï¼ˆåŒºåˆ†ä¸æ˜¯åœ¨å¤šä¸ªjvmå½“ä¸­ã€‚ï¼‰</p>
<p>å•ä¾‹æ¨¡å¼æœ‰ä¸ƒç§å†™æ³•ã€‚</p>
<p>æœ¬æ–‡åªæå‡ºä¸¤ç§ï¼Œä¸€ç§æ‡’æ±‰å¼å’Œé¥¿æ±‰å¼ã€‚</p>
<a id="more"></a>
<h2 id="æ‡’æ±‰å¼"><a href="#æ‡’æ±‰å¼" class="headerlink" title="æ‡’æ±‰å¼"></a>æ‡’æ±‰å¼</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Single</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(Singleton.getInstance());</span><br><span class="line">        System.out.println(Singleton.getInstance());</span><br><span class="line">        System.out.println(Singleton.getInstance());</span><br><span class="line">        System.out.println(Singleton.getInstance());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton mSingleton;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (mSingleton == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton<span class="class">.<span class="keyword">class</span>) </span>&#123; <span class="comment">//åŠ é”ï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•…åŠ ä¸Š</span></span><br><span class="line">                mSingleton = <span class="keyword">new</span> Singleton();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mSingleton;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cn.net.sweetlover.patern.Singleton@1540e19d</span><br><span class="line">cn.net.sweetlover.patern.Singleton@1540e19d</span><br><span class="line">cn.net.sweetlover.patern.Singleton@1540e19d</span><br><span class="line">cn.net.sweetlover.patern.Singleton@1540e19d</span><br></pre></td></tr></table></figure>
<p>è¢«éœ€è¦æ—¶æ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸”åªæœ‰åŒä¸€ä¸ªå®ä¾‹ï¼Œä½†ä¼šå‘ç”Ÿçº¿ç¨‹ä¸å®‰å…¨ã€‚</p>
<h2 id="é¥¿æ±‰å¼"><a href="#é¥¿æ±‰å¼" class="headerlink" title="é¥¿æ±‰å¼"></a>é¥¿æ±‰å¼</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Single</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(Singleton.getInstance());</span><br><span class="line">        System.out.println(Singleton.getInstance());</span><br><span class="line">        System.out.println(Singleton.getInstance());</span><br><span class="line">        System.out.println(Singleton.getInstance());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Singleton mSingleton = <span class="keyword">new</span> Singleton();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mSingleton;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cn.net.sweetlover.patern.Singleton@1540e19d</span><br><span class="line">cn.net.sweetlover.patern.Singleton@1540e19d</span><br><span class="line">cn.net.sweetlover.patern.Singleton@1540e19d</span><br><span class="line">cn.net.sweetlover.patern.Singleton@1540e19d</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™ä¸¤è€…çš„åŒºåˆ†ï¼šæ‡’æ±‰å¼ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸”æ•ˆç‡æ¯”é¥¿æ±‰å¼è¦ä½ï¼ˆå› ä¸ºåŠ äº†åŒæ­¥ï¼‰ï¼Œä½†æ˜¯èŠ‚çº¦å†…å­˜<br>ã€‚ä½†é¥¿æ±‰å¼æ˜¯å¤©ç”Ÿçº¿ç¨‹å®‰å…¨çš„ï¼Œå› ä¸ºå½“classè¢«åŠ è½½çš„æ—¶å€™å°±å·²ç»è¢«åˆå§‹åŒ–äº†ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>JAVA</tag>
      </tags>
  </entry>
  <entry>
    <title>kafkaç®€å•å…¥é—¨(æ¦‚å¿µ)</title>
    <url>/2018/11/05/kafka%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A8-%E6%A6%82%E5%BF%B5/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="kafkaç®€ä»‹"><a href="#kafkaç®€ä»‹" class="headerlink" title="kafkaç®€ä»‹"></a>kafkaç®€ä»‹</h1><p><a href="https://kafka.apache.org" target="_blank" rel="noopener">Kafka</a>æ˜¯ç›®å‰ä¸»æµçš„æµå¤„ç†å¹³å°ï¼ŒåŒæ—¶ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—å®¶æ—çš„ä¸€å‘˜ï¼Œå…¶é«˜ååæ€§ä½œä¸ºå¾ˆå¤šåœºæ™¯ä¸‹çš„ä¸»æµé€‰æ‹©ã€‚</p>
<a id="more"></a>
<h1 id="ä»€ä¹ˆæ˜¯Kafka"><a href="#ä»€ä¹ˆæ˜¯Kafka" class="headerlink" title="ä»€ä¹ˆæ˜¯Kafka"></a>ä»€ä¹ˆæ˜¯Kafka</h1><ul>
<li>LinkedInå¼€å‘</li>
<li>2011å¹´åˆå¼€æºï¼ŒåŠ å…¥ApacheåŸºé‡‘ä¼š</li>
<li>2012å¹´ä»Apache Incubatoræ¯•ä¸š</li>
<li>Apacheé¡¶çº§å¼€æº</li>
</ul>
<p>Apache Kafkaæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æµåª’ä½“å¹³å°ã€‚è¿™åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p>
<h2 id="æµåª’ä½“å¹³å°æœ‰ä¸‰ä¸ªå…³é”®åŠŸèƒ½ï¼š"><a href="#æµåª’ä½“å¹³å°æœ‰ä¸‰ä¸ªå…³é”®åŠŸèƒ½ï¼š" class="headerlink" title="æµåª’ä½“å¹³å°æœ‰ä¸‰ä¸ªå…³é”®åŠŸèƒ½ï¼š"></a>æµåª’ä½“å¹³å°æœ‰ä¸‰ä¸ªå…³é”®åŠŸèƒ½ï¼š</h2><ul>
<li>å‘å¸ƒå’Œè®¢é˜…è®°å½•æµï¼Œç±»ä¼¼äºæ¶ˆæ¯é˜Ÿåˆ—æˆ–è€…ä¼ä¸šæ¶ˆæ¯ä¼ é€’ç³»ç»Ÿã€‚</li>
<li>ä»¥å®¹é”™çš„æŒä¹…æ–¹å¼å­˜å‚¨è®°å½•æµã€‚</li>
<li>è®°å½•å‘ç”Ÿæ—¶å¤„ç†æµã€‚</li>
</ul>
<h2 id="Kafkaé€šå¸¸ç”¨äºä¸¤å¤§ç±»åº”ç”¨ï¼š"><a href="#Kafkaé€šå¸¸ç”¨äºä¸¤å¤§ç±»åº”ç”¨ï¼š" class="headerlink" title="Kafkaé€šå¸¸ç”¨äºä¸¤å¤§ç±»åº”ç”¨ï¼š"></a>Kafkaé€šå¸¸ç”¨äºä¸¤å¤§ç±»åº”ç”¨ï¼š</h2><ul>
<li>æ„å»ºå¯åœ¨ç³»ç»Ÿæˆ–åº”ç”¨ç¨‹åºä¹‹é—´å¯é è·å–æ•°æ®çš„å®æ—¶æµæ•°æ®ç®¡é“</li>
<li>æ„å»ºè½¬æ¢æˆ–å“åº”æ•°æ®æµçš„å®æ—¶æµåº”ç”¨ç¨‹åº</li>
</ul>
<h1 id="Kafkaæ¦‚å¿µ"><a href="#Kafkaæ¦‚å¿µ" class="headerlink" title="Kafkaæ¦‚å¿µ"></a>Kafkaæ¦‚å¿µ</h1><h2 id="Producer"><a href="#Producer" class="headerlink" title="Producer"></a>Producer</h2><p>æ¶ˆæ¯å’Œæ•°æ®çš„ç”Ÿäº§è€…ï¼Œå‘Kafkaçš„ä¸€ä¸ªtopicå‘å¸ƒæ¶ˆæ¯çš„è¿›ç¨‹/ä»£ç /æœåŠ¡ã€‚</p>
<h2 id="Consumer"><a href="#Consumer" class="headerlink" title="Consumer"></a>Consumer</h2><p>æ¶ˆæ¯å’Œæ•°æ®çš„æ¶ˆè´¹è€…ï¼Œè®¢é˜…æ•°æ®ï¼ˆtopicï¼‰å¹¶ä¸”å¤„ç†å…¶å‘å¸ƒçš„æ¶ˆæ¯çš„è¿›ç¨‹/ä»£ç /æœåŠ¡ã€‚</p>
<h2 id="Consumer-Group"><a href="#Consumer-Group" class="headerlink" title="Consumer Group"></a>Consumer Group</h2><p>å¯¹äºåŒä¸€ä¸ªtopicï¼Œä¼šå¹¿æ’­ç»™ä¸åŒçš„groupï¼Œä¸€ä¸ªgroupä¸­ï¼Œåªæœ‰ <strong> ä¸€ä¸ªconsumer </strong> å¯ä»¥æ¶ˆè´¹è¯¥æ¶ˆæ¯ã€‚</p>
<h2 id="Broker"><a href="#Broker" class="headerlink" title="Broker"></a>Broker</h2><p>ç‰©ç†æ¦‚å¿µï¼ŒKafkaé›†ç¾¤ä¸­æ¯ä¸ªkafkaèŠ‚ç‚¹ã€‚</p>
<h2 id="Topic"><a href="#Topic" class="headerlink" title="Topic"></a>Topic</h2><p>é€»è¾‘æ¦‚å¿µï¼ŒKafkaæ¶ˆæ¯çš„ç±»åˆ«ï¼Œå¯¹æ•°æ®è¿›è¡ŒåŒºåˆ†ã€éš”ç¦»ã€‚</p>
<h2 id="Partition"><a href="#Partition" class="headerlink" title="Partition"></a>Partition</h2><p>ç‰©ç†æ¦‚å¿µï¼ŒKafkaä¸‹æ•°æ®å­˜å‚¨çš„åŸºæœ¬å•å…ƒã€‚ä¸€ä¸ªTopicæ•°æ®ï¼Œä¼šè¢«åˆ†æ•£å­˜å‚¨åˆ°å¤šä¸ªPartitionï¼Œæ¯ä¸ªPartitionæ˜¯ <strong> æœ‰åºçš„ </strong> ã€‚</p>
<ul>
<li>æ¯ä¸€ä¸ªTopicè¢«åˆ‡åˆ†ä¸ºå¤šä¸ªPartitions</li>
<li>æ¶ˆè´¹è€…æ•°ç›®å°‘äºæˆ–è€…ç­‰äºPartitionçš„æ•°ç›®</li>
<li>Broker Groupä¸­çš„æ¯ä¸€ä¸ªBrokerä¿å­˜Topicçš„ä¸€ä¸ªæˆ–å¤šä¸ªPartitions</li>
<li>Consumer Groupçš„ä»…æœ‰ä¸€ä¸ªConsumerè¯»å–Topicçš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªPartitionsï¼Œå¹¶ä¸”æ˜¯å”¯ä¸€çš„Consumer</li>
</ul>
<h2 id="Replication"><a href="#Replication" class="headerlink" title="Replication"></a>Replication</h2><p>ä¸€ä¸ªpartitionçš„å¤šä¸ªå‰¯æœ¬ã€‚åŒä¸€ä¸ªPartitionå¯èƒ½æœ‰å¤šä¸ªReplicaï¼Œå¤šä¸ªReplicaä¹‹é—´æ•°æ®æ˜¯ä¸€æ ·çš„ï¼Œç›¸å½“äºå¤‡ä»½ä¸€æ ·ã€‚</p>
<ul>
<li>å½“é›†ç¾¤ä¸­æœ‰BrokeræŒ‚æ‰çš„æƒ…å†µï¼Œç³»ç»Ÿå¯ä»¥ä¸»åŠ¨çš„ä½¿Replicasæä¾›æœåŠ¡</li>
<li>ç³»ç»Ÿé»˜è®¤è®¾ç½®æ¯ä¸€ä¸ªTopicçš„Replicationç³»æ•°ä¸º1ï¼Œå¯ä»¥åœ¨åˆ›å»ºTopicå•ç‹¬è®¾ç½®</li>
</ul>
<h3 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h3><ul>
<li>åŸºæœ¬å•ä½æ˜¯Topicçš„Partition</li>
<li>æ‰€æœ‰çš„è¯»å’Œå†™éƒ½ä»Leaderè¿›ï¼ŒFollowersåªæ˜¯ä½œä¸ºå¤‡ä»½</li>
<li>Followerå¿…é¡»èƒ½å¤ŸåŠæ—¶å¤åˆ¶Leaderçš„æ•°æ®</li>
<li>å¢åŠ å®¹é”™æ€§å’Œå¯æ‰©å±•æ€§ã€‚</li>
</ul>
<h2 id="Replication-Leader"><a href="#Replication-Leader" class="headerlink" title="Replication Leader"></a>Replication Leader</h2><p>ä¸€ä¸ªPartitionçš„å¤šä¸ªReplicaä¸Šï¼Œéœ€è¦ä¸€ä¸ªLeaderè´Ÿè´£è¯¥Partitionä¸Šçš„Producerå’ŒConsumeräº¤äº’ã€‚ä¸”æœ‰ä¸”åªæœ‰ä¸€ä¸ªã€‚</p>
<h2 id="ReplicaManager"><a href="#ReplicaManager" class="headerlink" title="ReplicaManager"></a>ReplicaManager</h2><p>è´Ÿè´£ç®¡ç†å½“å‰Brokeræ‰€æœ‰åˆ†åŒºçš„å‰¯æœ¬çš„ä¿¡æ¯ï¼Œå¤„ç†KafkaControllerå‘èµ·çš„ä¸€äº›è¯·æ±‚ï¼Œå‰¯æœ¬çŠ¶æ€çš„åˆ‡æ¢ã€æ·»åŠ /è¯»å–æ¶ˆæ¯ç­‰ã€‚</p>
]]></content>
      <categories>
        <category>æ¶ˆæ¯é˜Ÿåˆ—</category>
      </categories>
      <tags>
        <tag>kafka</tag>
      </tags>
  </entry>
  <entry>
    <title>Androidç‚¹å‡»ä¸¤æ¬¡è¿”å›é€€å‡ºåº”ç”¨</title>
    <url>/2018/10/30/Android%E7%82%B9%E5%87%BB%E4%B8%A4%E6%AC%A1%E8%BF%94%E5%9B%9E%E9%80%80%E5%87%BA%E5%BA%94%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨ä¸€äº›appä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯ä¸»é¡µé¢éƒ½ä¼šæœ‰ä¸€ä¸ªè¿ç»­ç‚¹å‡»ä¸¤æ¬¡è¿”å›é”®å°±èƒ½å¤Ÿé€€å‡ºï¼Œä¹Ÿæ˜¯é˜²æ­¢è¿”å›é”®è¯¯è§¦å¯¼è‡´ç›´æ¥é€€å‡ºäº†åº”ç”¨ã€‚ç¤ºä¾‹æ²¡æœ‰å¤æ‚çš„activityç®¡ç†ï¼Œç‚¹å‡»ä¸¤æ¬¡åç›´æ¥finishå°±å®Œæˆäº†ã€‚</p>
<a id="more"></a>
<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p>ç›´æ¥åˆ¤æ–­ç”¨æˆ·ä¸¤æ¬¡æŒ‰é”®çš„æ—¶é—´å·®æ˜¯å¦åœ¨ä¸€ä¸ªé¢„æœŸå€¼ä¹‹å†…ï¼Œæ˜¯åˆ™é€€å‡ºï¼Œå¦åˆ™åº”è¯¥å‡ºç°ä¸€äº›æç¤ºæ¥æé†’ç”¨æˆ·ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">BaseActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®°å½•ç”¨æˆ·é¦–æ¬¡ç‚¹å‡»è¿”å›é”®çš„æ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> mExitFirstTime = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//åŒå‡»é—´éš”</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> mExitIntervalMs = <span class="number">2000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onKeyUp</span><span class="params">(<span class="keyword">int</span> keyCode, KeyEvent event)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (keyCode)&#123;</span><br><span class="line">            <span class="keyword">case</span> KeyEvent.KEYCODE_BACK:</span><br><span class="line">                <span class="keyword">long</span> secondTime = System.currentTimeMillis();</span><br><span class="line">                <span class="keyword">if</span>(secondTime - mExitFirstTime &gt; mExitIntervalMs)&#123;</span><br><span class="line">                    mExitFirstTime = secondTime;</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="keyword">this</span>, R.string.exit_tip, Toast.LENGTH_SHORT)</span><br><span class="line">                            .show();</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>; <span class="comment">//æ¶ˆè´¹æ‰è¯¥äº‹ä»¶</span></span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    finish();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.onKeyUp(keyCode, event);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>é‡å†™onKeyDown()å’ŒonBackPressed()æ–¹æ³•éƒ½èƒ½æ•è·Backçš„ç‚¹å‡»äº‹ä»¶ï¼Œ</p>
</blockquote>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼</title>
    <url>/2018/09/28/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å‚è€ƒé“¾æ¥: <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions</a></p>
<a id="more"></a>
<h1 id="ç‰¹æ®Šå­—ç¬¦"><a href="#ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="ç‰¹æ®Šå­—ç¬¦"></a>ç‰¹æ®Šå­—ç¬¦</h1><table>
<thead>
<tr>
<th style="text-align:center">å­—ç¬¦</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">\</td>
<td>åŒ¹é…è§„åˆ™å°†ä¾ç…§ä¸‹åˆ—è§„åˆ™ï¼šåœ¨éç‰¹æ®Šå­—ç¬¦ä¹‹å‰çš„åæ–œæ è¡¨ç¤ºä¸‹ä¸€ä¸ªå­—ç¬¦æ˜¯ç‰¹æ®Šçš„ï¼Œä¸èƒ½ä»å­—é¢ä¸Šè§£é‡Šã€‚ä¾‹å¦‚ï¼Œæ²¡æœ‰å‰é¢â€™\â€™çš„â€™bâ€™é€šå¸¸åŒ¹é…å°å†™â€™bâ€™ï¼Œæ— è®ºå®ƒä»¬å‡ºç°åœ¨å“ªé‡Œã€‚å¦‚æœåŠ äº†â€™\â€™,è¿™ä¸ªå­—ç¬¦å˜æˆäº†ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦ï¼Œæ„æ€æ˜¯åŒ¹é…ä¸€ä¸ªå­—ç¬¦è¾¹ç•Œã€‚åæ–œæ ä¹Ÿå¯ä»¥å°†å…¶åçš„ç‰¹æ®Šå­—ç¬¦ï¼Œè½¬ä¹‰ä¸ºå­—é¢é‡ã€‚ä¾‹å¦‚ï¼Œæ¨¡å¼ /a<em>/ ä»£è¡¨ä¼šåŒ¹é…0ä¸ªæˆ–è€…å¤šä¸ªaã€‚ç›¸åï¼Œæ¨¡å¼ /a\</em>/ å°† â€˜<em>â€˜ çš„ç‰¹æ®Šæ€§ç§»é™¤ï¼Œä»è€Œå¯ä»¥åŒ¹é…åƒ â€œa</em>â€œ è¿™æ ·çš„å­—ç¬¦ä¸²ã€‚</td>
</tr>
<tr>
<td style="text-align:center">^</td>
<td>åŒ¹é…è¾“å…¥çš„å¼€å§‹ï¼Œå¦‚æœå¤šè¡Œæ ‡å¿—è¢«è®¾ç½®ä¸ºtrueï¼Œé‚£ä¹ˆä¹ŸåŒ¹é…æ¢è¡Œç¬¦åç´§è·Ÿçš„ä½ç½®ã€‚ä¾‹å¦‚, /^A/ å¹¶ä¸åŒ¹é… â€œan Aâ€ ä¸­çš„ â€˜Aâ€™ï¼Œä½†æ˜¯ä¼šåŒ¹é… â€œAn Eâ€ä¸­çš„ â€˜Aâ€™ã€‚å½“ â€˜^â€™ ä½œä¸ºç¬¬ä¸€ä¸ªå­—ç¬¦å‡ºç°åœ¨ä¸€ä¸ªå­—ç¬¦é›†åˆæ¨¡å¼æ—¶ï¼Œå®ƒå°†ä¼šæœ‰ä¸åŒçš„å«ä¹‰ã€‚</td>
</tr>
<tr>
<td style="text-align:center">$</td>
<td>åŒ¹é…è¾“å…¥çš„ç»“æŸã€‚å¦‚æœå¤šè¡Œæ ‡å¿—è¢«è®¾ç½®ä¸ºtrueï¼Œé‚£ä¹ˆä¹ŸåŒ¹é…æ¢è¡Œç¬¦å‰çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œ /t$/ å¹¶ä¸ä¼šåŒ¹é… â€œeaterâ€ ä¸­çš„ â€˜tâ€™,ä½†æ˜¯ä¼šåŒ¹é… â€œeatâ€ ä¸­çš„ â€˜tâ€™ã€‚</td>
</tr>
<tr>
<td style="text-align:center">*</td>
<td>åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼0æ¬¡æˆ–è€…å¤šæ¬¡ã€‚ç­‰ä»·äº{0,}ã€‚ä¾‹å¦‚ï¼Œ/bo*/ ä¼šåŒ¹é…â€A ghost boooooedâ€ä¸­çš„ â€˜boooooâ€™ å’Œ â€œA bird warbledâ€ ä¸­çš„ â€˜bâ€™ï¼Œä½†æ˜¯åœ¨â€A goat gruntedâ€ ä¸­å°†ä¸ä¼šåŒ¹é…ä»»ä½•ä¸œè¥¿ã€‚</td>
</tr>
<tr>
<td style="text-align:center">+</td>
<td>åŒ¹é…å‰é¢ä¸€ä¸ªè¡¨è¾¾å¼1æ¬¡æˆ–è€…å¤šæ¬¡ã€‚ç­‰ä»·äº{1,}ã€‚ä¾‹å¦‚ï¼Œ/a+/åŒ¹é…äº†åœ¨â€candyâ€ä¸­çš„â€™aâ€™ï¼Œå’Œåœ¨â€caaaaaaandyâ€ä¸­æ‰€æœ‰çš„â€™aâ€™ã€‚</td>
</tr>
<tr>
<td style="text-align:center">?</td>
<td>åŒ¹é…å‰é¢ä¸€ä¸ªè¡¨è¾¾å¼0æ¬¡æˆ–è€…1æ¬¡ã€‚ç­‰ä»·äº{0,1}ã€‚ä¾‹å¦‚ï¼Œ/e?le?/ åŒ¹é…â€angelâ€ä¸­çš„â€™elâ€™ï¼Œå’Œâ€angelâ€ä¸­çš„â€™elâ€™ï¼Œå’Œâ€angleâ€ä¸­çš„â€™leâ€™ä»¥åŠâ€osloâ€ä¸­çš„â€™lâ€™ã€‚å¦‚æœç´§è·Ÿåœ¨ä»»ä½•é‡è¯*ã€+ã€?æˆ–è€…{}çš„åé¢ï¼Œå°†ä¼šä½¿å˜é‡å˜ä¸ºéè´ªå©ªçš„ï¼ˆåŒ¹é…å°½é‡å°‘çš„å­—ç¬¦ï¼‰ï¼Œå’Œç¼ºçœä½¿ç”¨çš„è´ªå©ªæ¨¡å¼ï¼ˆåŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦ï¼‰æ­£å¥½ç›¸åã€‚ä¾‹å¦‚ï¼Œå¯¹â€123abcâ€åº”ç”¨ /\d+/ å°†ä¼šè¿”å›â€™123â€™ï¼Œå¦‚æœä½¿ç”¨/\d+?/ï¼Œåˆ™åªä¼šåŒ¹é…åˆ°â€™1â€™ã€‚è¿˜å¯ä»¥è¿ç”¨å…ˆè¡Œæ–­è¨€ã€‚</td>
</tr>
<tr>
<td style="text-align:center">.</td>
<td>(å°æ•°ç‚¹)åŒ¹é…é™¤æ¢è¡Œç¬¦ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ/.n/å°†ä¼šåŒ¹é…â€nay, an apple is on the treeâ€ä¸­çš„â€™anâ€™å’Œâ€™onâ€™ï¼Œä½†æ˜¯ä¸ä¼šåŒ¹é…â€™nayâ€™ã€‚</td>
</tr>
<tr>
<td style="text-align:center">(x)</td>
<td>åŒ¹é…â€™xâ€™å¹¶ä¸”è®°ä½åŒ¹é…é¡¹ï¼Œå°±åƒä¸‹é¢çš„ä¾‹å­å±•ç¤ºçš„é‚£æ ·ã€‚æ‹¬å·è¢«ç§°ä¸ºæ•è·æ‹¬å·ã€‚æ¨¡å¼ <code>/(foo) (var) \1 \2/</code>ä¸­çš„â€™(foo)â€™å’Œâ€™(bar)â€™åŒ¹é…å¹¶è®°ä½å­—ç¬¦ä¸²â€foo bar foo barâ€ä¸­çš„å‰ä¸¤ä¸ªå•è¯ï¼Œæ¨¡å¼ä¸­çš„\1 å’Œ \2 åŒ¹é…å­—ç¬¦ä¸²çš„åä¸¤ä¸ªå•è¯ã€‚æ³¨æ„\1ã€\2ã€\næ˜¯ç”¨åœ¨æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ç¯èŠ‚ã€‚</td>
</tr>
<tr>
<td style="text-align:center">(?:x)</td>
<td>åŒ¹é…â€™xâ€™ä½†æ˜¯ä¸è®°ä½åŒ¹é…é¡¹ã€‚è¿™ç§å«åšéæ•è·æ‹¬å·ï¼Œä½¿å¾—ä½ èƒ½å¤Ÿå®šä¹‰ä¸ºæ­£åˆ™è¡¨è¾¾å¼è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨çš„å­è¡¨è¾¾å¼ã€‚æ¥çœ‹è¡¨è¾¾å¼/(?:foo){1,2}/ã€‚å¦‚æœè¡¨è¾¾å¼æ˜¯/foo{1,2}/ï¼Œ{1,2}å°†åªå¯¹â€™fooâ€™çš„æœ€åä¸€ä¸ªå­—ç¬¦â€™oâ€™ç”Ÿæ•ˆã€‚å¦‚æœä½¿ç”¨éæ•è·æ‹¬å·ï¼Œåˆ™{1,2}ä¼šåŒ¹é…æ•´ä¸ªâ€™fooâ€™å•è¯ã€‚</td>
</tr>
<tr>
<td style="text-align:center">x(?=y)</td>
<td>åŒ¹é…â€™xâ€™ä»…ä»…å½“â€™xâ€™åé¢è·Ÿç€â€™yâ€™ï¼Œè¿™ç§å«åšæ­£å‘è‚¯å®šæŸ¥æ‰¾ã€‚ä¾‹å¦‚ï¼Œ/Jack(?=Spart)/ä¼šåŒ¹é…åˆ°â€™Jackâ€™ä»…ä»…å½“ä»–åé¢è·Ÿç€â€™Spartâ€™ã€‚/Jack(?=Spart&#124;Frost)/åŒ¹é…â€™Jackâ€™ä»…ä»…å½“å®ƒåé¢è·Ÿç€â€™Spartâ€™æˆ–è€…æ˜¯â€™Frostâ€™ã€‚ä½†æ˜¯â€™Spartâ€™å’Œâ€™Frostâ€™éƒ½ä¸æ˜¯åŒ¹é…ç»“æœçš„ä¸€éƒ¨åˆ†ã€‚</td>
</tr>
<tr>
<td style="text-align:center">x(?!y)</td>
<td>åŒ¹é…â€™xâ€™ä»…ä»…å½“â€™xâ€™åé¢ä¸è·Ÿç€â€™yâ€™ï¼Œè¿™ä¸ªå«åšæ­£å‘å¦å®šæŸ¥æ‰¾ã€‚ä¾‹å¦‚ï¼Œ/\d+(?!.)/åŒ¹é…ä¸€ä¸ªæ•°å­—ä»…ä»…å½“è¿™ä¸ªæ•°å­—åé¢æ²¡æœ‰è·Ÿå°æ•°ç‚¹çš„æ—¶å€™ã€‚</td>
</tr>
<tr>
<td style="text-align:center">x&#124;y</td>
<td>åŒ¹é…â€™xâ€™æˆ–è€…â€™yâ€™ã€‚ä¾‹å¦‚ï¼Œ/green&#124;red/åŒ¹é…â€green appleâ€ä¸­çš„â€™greenâ€™å’Œâ€red appleâ€ä¸­çš„â€™redâ€™</td>
</tr>
<tr>
<td style="text-align:center">{n}</td>
<td>næ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼ŒåŒ¹é…äº†å‰é¢ä¸€ä¸ªå­—ç¬¦åˆšå¥½å‘ç”Ÿnæ¬¡ã€‚ æ¯”å¦‚ï¼Œ/a{2}/ä¸ä¼šåŒ¹é…â€candyâ€ä¸­çš„â€™aâ€™ï¼Œä½†æ˜¯ä¼šåŒ¹é…â€caandyâ€ä¸­çš„æ‰€æœ‰aï¼Œä»¥åŠâ€caaandyâ€ä¸­çš„å‰ä¸¤ä¸ªaã€‚</td>
</tr>
<tr>
<td style="text-align:center">{n,m}</td>
<td>n,méƒ½æ˜¯æ•´æ•°ã€‚åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å°‘næ¬¡ï¼Œæœ€å¤šmæ¬¡ã€‚å¦‚æœnå’Œmçš„å€¼ä¸º0ï¼Œè¿™ä¸ªå€¼è¢«å¿½ç•¥ã€‚ä¾‹å¦‚ï¼Œ/a{1,3}/ å¹¶ä¸åŒ¹é…â€cndyâ€ä¸­çš„ä»»æ„å­—ç¬¦ï¼ŒåŒ¹é…â€candyâ€ä¸­çš„â€™aâ€™ï¼ŒåŒ¹é…â€caandyâ€ä¸­çš„å‰ä¸¤ä¸ªâ€™aâ€™ï¼Œä¹ŸåŒ¹é…â€caaaaaaaandyâ€ä¸­çš„å‰ä¸‰ä¸ªaã€‚</td>
</tr>
<tr>
<td style="text-align:center">[xyz]</td>
<td>ä¸€ä¸ªå­—ç¬¦é›†åˆã€‚åŒ¹é…æ–¹æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦ï¼ŒåŒ…æ‹¬è½¬ä¹‰å­—ç¬¦ã€‚ä½ å¯ä»¥ä½¿ç”¨ç ´æŠ˜å·( - )æ¥æŒ‡å®šä¸€ä¸ªå­—ç¬¦èŒƒå›´ã€‚å¯¹äº( . )å’Œæ˜Ÿå·( * )è¿™æ ·çš„ç‰¹è®¸ç¬¦å·åœ¨ä¸€ä¸ªå­—ç¬¦é›†ä¸­æ²¡æœ‰ç‰¹æ®Šçš„æ„ä¹‰/ä»–ä»¬ä¸å¿…è¿›è¡Œè½¬ä¹‰ï¼Œä¸è¿‡è½¬ä¹‰ä¹Ÿæ˜¯èµ·ä½œç”¨çš„ã€‚ä¾‹å¦‚ï¼Œ[abcd]å’Œ[a-d]æ˜¯ä¸€æ ·çš„ã€‚ä»–ä»¬éƒ½åŒ¹é…â€brisketâ€ä¸­çš„â€™bâ€™ï¼Œä¹Ÿéƒ½åŒ¹é…â€cityâ€ä¸­çš„â€™câ€™ã€‚/[a-z.]+/å’Œ/[\w.]+/éƒ½åŒ¹é…â€test.i.ngâ€ä¸­çš„æ‰€æœ‰å­—ç¬¦ã€‚</td>
</tr>
<tr>
<td style="text-align:center">[^xyz]</td>
<td>åå‘å­—ç¬¦é›†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒåŒ¹é…ä»»ä½•æ²¡æœ‰åŒ…å«åœ¨åæ‹¬å·ä¸­çš„å­—ç¬¦ã€‚ä½ å¯ä»¥ä½¿å¾—ç ´æŠ˜å·( - )æ¥æŒ‡å®šä¸€ä¸ªå­—ç¬¦èŒƒå›´ã€‚ä»»ä½•æ™®é€šå­—ç¬¦åœ¨è¿™é‡Œéƒ½æ˜¯èµ·ä½œç”¨çš„ã€‚ä¾‹å¦‚ï¼Œ[^abc]å’Œ[^a-c]æ˜¯ä¸€æ ·çš„ã€‚ä»–ä»¬åŒ¹é…â€briskerâ€ä¸­çš„â€™râ€™ï¼Œä¹ŸåŒ¹é…â€chopâ€ä¸­çš„â€™hâ€™ã€‚</td>
</tr>
<tr>
<td style="text-align:center">[\b]</td>
<td>åŒ¹é…ä¸€ä¸ªé€€æ ¼ï¼ˆU+0008ï¼‰ã€‚ä¸è¦å’Œ\bæ··æ·†äº†ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\b</td>
<td>åŒ¹é…ä¸€ä¸ªè¯çš„è¾¹ç•Œã€‚ä¸€ä¸ªè¯çš„è¾¹ç•Œå°±æ˜¯ä¸€ä¸ªè¯ä¸è¢«å¦å¤–ä¸€ä¸ªâ€œå­—â€å­—ç¬¦è·Ÿéšçš„ä½ç½®æˆ–è€…æ²¡æœ‰å…¶ä»–â€œå­—â€å­—ç¬¦åœ¨å…¶å‰é¢çš„ä½ç½®ã€‚æ³¨æ„ï¼Œä¸€ä¸ªåŒ¹é…çš„è¯çš„è¾¹ç•Œå¹¶ä¸åŒ…å«åœ¨åŒ¹é…çš„å†…å®¹ä¸­ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªåŒ¹é…çš„è¯çš„è¾¹ç•Œçš„å†…å®¹çš„é•¿åº¦ä¸º0.ï¼ˆä¸è¦å’Œ[\b]æ··æ·†äº†ï¼‰ã€‚ä¾‹å¦‚ï¼Œ/\bm/åŒ¹é…â€moonâ€ä¸­çš„â€mâ€ï¼Œ/oo\b/å¹¶ä¸åŒ¹é…â€ooâ€ï¼Œå› ä¸ºâ€™ooâ€™è¢«ä¸€ä¸ªå­—ç¬¦â€™nâ€™ç´§è·Ÿç€ã€‚/oon\b/åŒ¹é…â€moonâ€ä¸­çš„â€™oonâ€™ï¼Œå› ä¸ºâ€™oonâ€™æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²çš„ç»“æŸéƒ¨åˆ†ï¼Œè¿™æ ·ä»–æ²¡æœ‰è¢«ä¸€ä¸ªå­—ç¬¦ç´§è·Ÿç€ã€‚/\w\b\w/å°†ä¸èƒ½åŒ¹é…ä»»ä½•å­—ç¬¦ä¸²ï¼Œå› ä¸ºåœ¨ä¸€ä¸ªå•è¯ä¸­é—´çš„å­—ç¬¦æ°¸è¿œä¸å¯èƒ½åŒæ—¶æ»¡è¶³æ²¡æœ‰å­—ç¬¦è·Ÿéšå’Œæœ‰å­—ç¬¦è·Ÿéšçš„ä¸¤ç§è·Ÿéšæƒ…å†µã€‚</td>
</tr>
<tr>
<td style="text-align:center">\B</td>
<td>åŒ¹é…ä¸€ä¸ªéå•è¯è¾¹ç•Œã€‚ä»–åŒ¹é…ä¸€ä¸ªå‰åå­—ç¬¦éƒ½æ˜¯ç›¸åŒç±»å‹çš„ä½ç½®ï¼šéƒ½æ˜¯å­—ç¬¦æˆ–è€…éƒ½ä¸æ˜¯å­—ç¬¦ã€‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„å¼€å§‹å’Œç»“å°¾éƒ½è¢«è®¤ä¸ºä¸æ˜¯å­—ç¬¦æˆ–è€…ç©ºå­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œ/\B../åŒ¹é…â€noondayâ€ä¸­çš„â€™ooâ€™ï¼Œè€Œ/y\B../åˆ™ä¼šåŒ¹é…â€possibly yestardayâ€ä¸­çš„â€™yesâ€™ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\cX</td>
<td>å½“Xæ˜¯å¤„äºAåˆ°Zä¹‹é—´çš„å­—ç¬¦çš„æ—¶å€™ã€‚åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªæ§åˆ¶ç¬¦ã€‚ä¾‹å¦‚ï¼Œ/\cM/åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„â€control-Mâ€(U+000D)ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\d</td>
<td>åŒ¹é…ä¸€ä¸ªæ•°å­—ï¼Œç›¸å½“äº[0-9]ã€‚ä¾‹å¦‚ï¼Œ/\d/æˆ–è€…/[0-9]/åŒ¹é…â€B2 is the bigjjâ€ä¸­çš„â€™2â€™ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\D</td>
<td>åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚ç›¸å½“äº[^0-9]ã€‚ä¾‹å¦‚ï¼Œ/\D/æˆ–è€…/[^0-9]/åŒ¹é…â€B2 is a jjâ€ä¸­çš„Bã€‚</td>
</tr>
<tr>
<td style="text-align:center">\f</td>
<td>åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦(U+000C)ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\n</td>
<td>åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦(U+000A)ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\r</td>
<td>åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦(U+000D)ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\s</td>
<td>åŒ¹é…ä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦å’Œæ¢è¡Œç¬¦ã€‚ç­‰ä»·äº[\f\n\r\t\v\u00a0\u1680\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]ã€‚ä¾‹å¦‚ï¼Œ/\s\w*/åŒ¹é…â€foo bar.â€ä¸­çš„â€™barâ€™ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\S</td>
<td>åŒ¹é…ä¸€ä¸ªéç©ºç™½å­—ç¬¦ã€‚ç­‰ä»·äº[^\f\n\r\t\v\u00a0\u1680\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]ã€‚ä¾‹å¦‚ï¼Œ/\S\w*/åŒ¹é…â€foo bar.â€ä¸­çš„â€™fooâ€™ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\t</td>
<td>åŒ¹é…ä¸€ä¸ªæ°´å¹³åˆ¶è¡¨ç¬¦(U+0009)ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\v</td>
<td>åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦(U+000B)ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\w</td>
<td>åŒ¹é…ä¸€ä¸ªå•å­—å­—ç¬¦(å­—æ¯ã€æ•°å­—æˆ–è€…ä¸‹åˆ’çº¿)ã€‚ç­‰ä»·äº[A-Za-Z0-9_]ã€‚ä¾‹å¦‚ï¼Œ/\w/åŒ¹é…â€appleâ€ä¸­çš„â€™aâ€™ï¼Œâ€$5.28â€ä¸­çš„â€™5â€™å’Œâ€3Dâ€ä¸­çš„â€™3â€™ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\W</td>
<td>åŒ¹é…ä¸€ä¸ªéå•å­—å­—ç¬¦ã€‚ç­‰ä»·äº[^A-Za-z0-9_]ã€‚ä¾‹å¦‚ï¼Œ/\W/æˆ–è€…/[^A-Za-z0-9_]/åŒ¹é…â€50%â€ä¸­çš„â€™%â€™ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\n</td>
<td>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå®ƒè¿”å›æœ€åçš„ç¬¬nä¸ªå­æ•è·åŒ¹é…çš„å­å­—ç¬¦ä¸²(æ•è·çš„æ•°ç›®ä»¥å·¦æ‹¬å·è®¡æ•°)ã€‚æ¯”å¦‚/apple(,)\sorange\1/åŒ¹é…â€apple, orange, cherry, peach.â€ä¸­çš„â€™apple, orangeâ€™ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\0</td>
<td>åŒ¹é…NULL(U+0000)å­—ç¬¦ï¼Œä¸è¦åœ¨è¿™åé¢è·Ÿå…¶å®ƒå°æ•°ï¼Œå› ä¸º<code>0&lt;digits&gt;</code>æ˜¯ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰åºåˆ—ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\xhh</td>
<td>ä¸ä»£ç hhåŒ¹é…å­—ç¬¦(ä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—)ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\uhhhh</td>
<td>ä¸ä»£ç hhhhåŒ¹é…å­—ç¬¦(å››ä¸ªåå…­è¿›åˆ¶æ•°å­—)ã€‚</td>
</tr>
<tr>
<td style="text-align:center">\u{hhhh}</td>
<td>(ä»…å½“è®¾ç½®äº†uæ ‡å¿—æ—¶)ä½¿ç”¨Unicodeå€¼hhhhåŒ¹é…å­—ç¬¦(åå…­è¿›åˆ¶æ•°å­—)ã€‚</td>
</tr>
</tbody>
</table>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">æ ‡å¿—</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">g</td>
<td style="text-align:left">å…¨å±€æœç´¢ã€‚</td>
</tr>
<tr>
<td style="text-align:center">i</td>
<td style="text-align:left">ä¸åŒºåˆ†å¤§å°å†™æœç´¢ã€‚</td>
</tr>
<tr>
<td style="text-align:center">m</td>
<td style="text-align:left">å¤šè¡Œæœç´¢ã€‚</td>
</tr>
<tr>
<td style="text-align:center">y</td>
<td style="text-align:left">æ‰§è¡Œâ€œç²˜æ€§â€æœç´¢,åŒ¹é…ä»ç›®æ ‡å­—ç¬¦ä¸²çš„å½“å‰ä½ç½®å¼€å§‹ï¼Œå¯ä»¥ä½¿ç”¨yæ ‡å¿—ã€‚</td>
</tr>
</tbody>
</table>
<h1 id="å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼"><a href="#å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼"></a>å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼</h1><h2 id="æ ¡éªŒæ•°å­—çš„è¡¨è¾¾å¼"><a href="#æ ¡éªŒæ•°å­—çš„è¡¨è¾¾å¼" class="headerlink" title="æ ¡éªŒæ•°å­—çš„è¡¨è¾¾å¼"></a>æ ¡éªŒæ•°å­—çš„è¡¨è¾¾å¼</h2><ul>
<li>æ•°å­—ï¼š^[0-9]*$</li>
<li>nä½çš„æ•°å­—ï¼š^\d{n}$</li>
<li>è‡³å°‘nä½çš„æ•°å­—ï¼š^\d{n,}$</li>
<li>m-nä½çš„æ•°å­—ï¼š^\d{m,n}$</li>
<li>é›¶å’Œéé›¶å¼€å¤´çš„æ•°å­—ï¼š^(0|[1-9][0-9]*)$</li>
<li>éé›¶å¼€å¤´çš„æœ€å¤šå¸¦ä¸¤ä½å°æ•°çš„æ•°å­—ï¼š^([1-9][0-9]*)+(.[0-9]{1,2})?$</li>
<li>å¸¦1-2ä½å°æ•°çš„æ­£æ•°æˆ–è´Ÿæ•°ï¼š^(-)?\d+(.\d{1,2})$</li>
<li>æ­£æ•°ã€è´Ÿæ•°ã€å’Œå°æ•°ï¼š^(-|+)?\d+(.\d+)?$</li>
<li>æœ‰ä¸¤ä½å°æ•°çš„æ­£å®æ•°ï¼š^[0-9]+(.[0-9]{2})?$</li>
<li>æœ‰1~3ä½å°æ•°çš„æ­£å®æ•°ï¼š^[0-9]+(.[0-9]{1,3})?$</li>
<li>éé›¶çš„æ­£æ•´æ•°ï¼š^[1-9]\d<em>$ æˆ– ^([1-9][0-9]</em>){1,3}$ æˆ– ^+?[1-9][0-9]*$</li>
<li>éé›¶çš„è´Ÿæ•´æ•°ï¼š^-[1-9][]0-9â€<em>$ æˆ– ^-[1-9]\d</em>$</li>
<li>éè´Ÿæ•´æ•°ï¼š^\d+$ æˆ– ^[1-9]\d*|0$</li>
<li>éæ­£æ•´æ•°ï¼š^-[1-9]\d*|0$ æˆ– ^((-\d+)|(0+))$</li>
<li>éè´Ÿæµ®ç‚¹æ•°ï¼š^\d+(.\d+)?$ æˆ– ^[1-9]\d<em>.\d</em>|0.\d<em>[1-9]\d</em>|0?.0+|0$</li>
<li>éæ­£æµ®ç‚¹æ•°ï¼š^((-\d+(.\d+)?)|(0+(.0+)?))$ æˆ– ^(-([1-9]\d<em>.\d</em>|0.\d<em>[1-9]\d</em>))|0?.0+|0$</li>
<li>æ­£æµ®ç‚¹æ•°ï¼š^[1-9]\d<em>.\d</em>|0.\d<em>[1-9]\d</em>$ æˆ– ^(([0-9]+.[0-9]<em>[1-9][0-9]</em>)|([0-9]<em>[1-9][0-9]</em>.[0-9]+)|([0-9]<em>[1-9][0-9]</em>))$</li>
<li>è´Ÿæµ®ç‚¹æ•°ï¼š^-([1-9]\d<em>.\d</em>|0.\d<em>[1-9]\d</em>)$ æˆ– ^(-(([0-9]+.[0-9]<em>[1-9][0-9]</em>)|([0-9]<em>[1-9][0-9]</em>.[0-9]+)|([0-9]<em>[1-9][0-9]</em>)))$</li>
<li>æµ®ç‚¹æ•°ï¼š^(-?\d+)(.\d+)?$ æˆ– ^-?([1-9]\d<em>.\d</em>|0.\d<em>[1-9]\d</em>|0?.0+|0)$</li>
</ul>
<h2 id="æ ¡éªŒå­—ç¬¦çš„è¡¨è¾¾å¼"><a href="#æ ¡éªŒå­—ç¬¦çš„è¡¨è¾¾å¼" class="headerlink" title="æ ¡éªŒå­—ç¬¦çš„è¡¨è¾¾å¼"></a>æ ¡éªŒå­—ç¬¦çš„è¡¨è¾¾å¼</h2><ul>
<li>æ±‰å­—ï¼š^[\u4e00-\u9fa5]{0,}$</li>
<li>è‹±æ–‡å’Œæ•°å­—ï¼š^[A-Za-z0-9]+$ æˆ– ^[A-Za-z0-9]{4,40}$</li>
<li>é•¿åº¦ä¸º3-20çš„æ‰€æœ‰å­—ç¬¦ï¼š^.{3,20}$</li>
<li>ç”±26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Za-z]+$</li>
<li>ç”±26ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Z]+$</li>
<li>ç”±26ä¸ªå°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[a-z]+$</li>
<li>ç”±æ•°å­—å’Œ26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Za-z0-9]+$</li>
<li>ç”±æ•°å­—ã€26ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^\w+$ æˆ– ^\w{3,20}$</li>
<li>ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—åŒ…æ‹¬ä¸‹åˆ’çº¿ï¼š^[\u4E00-\u9FA5A-Za-z0-9_]+$</li>
<li>ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ä½†ä¸åŒ…æ‹¬ä¸‹åˆ’çº¿ç­‰ç¬¦å·ï¼š^[\u4E00-\u9FA5A-Za-z0-9]+$ æˆ– ^[\u4E00-\u9FA5A-Za-z0-9]{2,20}$</li>
<li>å¯ä»¥è¾“å…¥å«æœ‰^%&amp;â€™,;=?$\â€ç­‰å­—ç¬¦ï¼š[^%&amp;â€™,;=?$\x22]+</li>
<li>ç¦æ­¢è¾“å…¥å«æœ‰~çš„å­—ç¬¦ï¼š[^~\x22]+</li>
</ul>
<h2 id="ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼"><a href="#ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼" class="headerlink" title="ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼"></a>ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼</h2><ul>
<li>Emailåœ°å€ï¼š^\w+([-+.]\w+)<em>@\w+([-.]\w+)</em>.\w+([-.]\w+)*$</li>
<li>åŸŸåï¼š[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/.?</li>
<li>InternetURLï¼š[a-zA-z]+://[^\s]<em> æˆ– ^http://([\w-]+.)+[\w-]+(/[\w-./?%&amp;=]</em>)?$</li>
<li>æ‰‹æœºå·ç ï¼š^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$</li>
<li>ç”µè¯å·ç (â€œXXX-XXXXXXXâ€ã€â€XXXX-XXXXXXXXâ€ã€â€XXX-XXXXXXXâ€ã€â€XXX-XXXXXXXXâ€ã€â€XXXXXXXâ€å’Œâ€XXXXXXXX)ï¼š^((\d{3,4}-)|\d{3.4}-)?\d{7,8}$</li>
<li>å›½å†…ç”µè¯å·ç (0511-4405222ã€021-87888822)ï¼š\d{3}-\d{8}|\d{4}-\d{7}</li>
<li>ç”µè¯å·ç æ­£åˆ™è¡¨è¾¾å¼ï¼ˆæ”¯æŒæ‰‹æœºå·ç ï¼Œ3-4ä½åŒºå·ï¼Œ7-8ä½ç›´æ’­å·ç ï¼Œ1ï¼4ä½åˆ†æœºå·ï¼‰: ((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)</li>
<li>èº«ä»½è¯å·(15ä½ã€18ä½æ•°å­—)ï¼Œæœ€åä¸€ä½æ˜¯æ ¡éªŒä½ï¼Œå¯èƒ½ä¸ºæ•°å­—æˆ–å­—ç¬¦Xï¼š(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)</li>
<li>å¸å·æ˜¯å¦åˆæ³•(å­—æ¯å¼€å¤´ï¼Œå…è®¸5-16å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿)ï¼š^[a-zA-Z][a-zA-Z0-9_]{4,15}$</li>
<li>å¯†ç (ä»¥å­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨6~18ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿)ï¼š^[a-zA-Z]\w{5,17}$</li>
<li>å¼ºå¯†ç (å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—çš„ç»„åˆï¼Œä¸èƒ½ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼Œé•¿åº¦åœ¨ 8-10 ä¹‹é—´)ï¼š^(?=.<em>\d)(?=.</em>[a-z])(?=.*[A-Z])[a-zA-Z0-9]{8,10}$</li>
<li>å¼ºå¯†ç (å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—çš„ç»„åˆï¼Œå¯ä»¥ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼Œé•¿åº¦åœ¨8-10ä¹‹é—´)ï¼š^(?=.<em>\d)(?=.</em>[a-z])(?=.*[A-Z]).{8,10}$</li>
<li>æ—¥æœŸæ ¼å¼ï¼š^\d{4}-\d{1,2}-\d{1,2}</li>
<li>ä¸€å¹´çš„12ä¸ªæœˆ(01ï½09å’Œ1ï½12)ï¼š^(0?[1-9]|1[0-2])$</li>
<li>ä¸€ä¸ªæœˆçš„31å¤©(01ï½09å’Œ1ï½31)ï¼š^((0?[1-9])|((1|2)[0-9])|30|31)$</li>
<li>xmlæ–‡ä»¶ï¼š^([a-zA-Z]+-?)+[a-zA-Z0-9]+\.[x|X][m|M][l|L]$</li>
<li>ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š[\u4e00-\u9fa5]</li>
<li>åŒå­—èŠ‚å­—ç¬¦ï¼š[^\x00-\xff] (åŒ…æ‹¬æ±‰å­—åœ¨å†…ï¼Œå¯ä»¥ç”¨æ¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦(ä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é•¿åº¦è®¡2ï¼ŒASCIIå­—ç¬¦è®¡1))</li>
<li>ç©ºç™½è¡Œçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\n\s*\r (å¯ä»¥ç”¨æ¥åˆ é™¤ç©ºç™½è¡Œ)</li>
<li>HTMLæ ‡è®°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š&lt;(\S<em>?)[^&gt;]</em>&gt;.<em>?|&lt;.</em>? /&gt; ( é¦–å°¾ç©ºç™½å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š^\s<em>|\s</em>$æˆ–(^\s<em>)|(\s</em>$) (å¯ä»¥ç”¨æ¥åˆ é™¤è¡Œé¦–è¡Œå°¾çš„ç©ºç™½å­—ç¬¦(åŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰)ï¼Œéå¸¸æœ‰ç”¨çš„è¡¨è¾¾å¼)</li>
<li>è…¾è®¯QQå·ï¼š[1-9][0-9]{4,} (è…¾è®¯QQå·ä»10000å¼€å§‹)</li>
<li>ä¸­å›½é‚®æ”¿ç¼–ç ï¼š[1-9]\d{5}(?!\d) (ä¸­å›½é‚®æ”¿ç¼–ç ä¸º6ä½æ•°å­—)</li>
<li>IPåœ°å€ï¼š((?:(?:25[0-5]|2[0-4]\d|[01]?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d?\d))</li>
</ul>
<h2 id="é’±çš„è¾“å…¥æ ¼å¼"><a href="#é’±çš„è¾“å…¥æ ¼å¼" class="headerlink" title="é’±çš„è¾“å…¥æ ¼å¼"></a>é’±çš„è¾“å…¥æ ¼å¼</h2><ul>
<li>æœ‰å››ç§é’±çš„è¡¨ç¤ºå½¢å¼æˆ‘ä»¬å¯ä»¥æ¥å—:â€10000.00â€ å’Œ â€œ10,000.00â€, å’Œæ²¡æœ‰ â€œåˆ†â€ çš„ â€œ10000â€ å’Œ â€œ10,000â€ï¼š^[1-9][0-9]*$</li>
<li>è¿™è¡¨ç¤ºä»»æ„ä¸€ä¸ªä¸ä»¥0å¼€å¤´çš„æ•°å­—,ä½†æ˜¯,è¿™ä¹Ÿæ„å‘³ç€ä¸€ä¸ªå­—ç¬¦â€0â€ä¸é€šè¿‡,æ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨ä¸‹é¢çš„å½¢å¼ï¼š^(0|[1-9][0-9]*)$</li>
<li>ä¸€ä¸ª0æˆ–è€…ä¸€ä¸ªä¸ä»¥0å¼€å¤´çš„æ•°å­—.æˆ‘ä»¬è¿˜å¯ä»¥å…è®¸å¼€å¤´æœ‰ä¸€ä¸ªè´Ÿå·ï¼š^(0|-?[1-9][0-9]*)$</li>
<li>è¿™è¡¨ç¤ºä¸€ä¸ª0æˆ–è€…ä¸€ä¸ªå¯èƒ½ä¸ºè´Ÿçš„å¼€å¤´ä¸ä¸º0çš„æ•°å­—.è®©ç”¨æˆ·ä»¥0å¼€å¤´å¥½äº†.æŠŠè´Ÿå·çš„ä¹Ÿå»æ‰,å› ä¸ºé’±æ€»ä¸èƒ½æ˜¯è´Ÿçš„å§ã€‚ä¸‹é¢æˆ‘ä»¬è¦åŠ çš„æ˜¯è¯´æ˜å¯èƒ½çš„å°æ•°éƒ¨åˆ†ï¼š^[0-9]+(.[0-9]+)?$</li>
<li>å¿…é¡»è¯´æ˜çš„æ˜¯,å°æ•°ç‚¹åé¢è‡³å°‘åº”è¯¥æœ‰1ä½æ•°,æ‰€ä»¥â€10.â€æ˜¯ä¸é€šè¿‡çš„,ä½†æ˜¯ â€œ10â€ å’Œ â€œ10.2â€ æ˜¯é€šè¿‡çš„ï¼š^[0-9]+(.[0-9]{2})?$</li>
<li>è¿™æ ·æˆ‘ä»¬è§„å®šå°æ•°ç‚¹åé¢å¿…é¡»æœ‰ä¸¤ä½,å¦‚æœä½ è®¤ä¸ºå¤ªè‹›åˆ»äº†,å¯ä»¥è¿™æ ·ï¼š^[0-9]+(.[0-9]{1,2})?$</li>
<li>è¿™æ ·å°±å…è®¸ç”¨æˆ·åªå†™ä¸€ä½å°æ•°.ä¸‹é¢æˆ‘ä»¬è¯¥è€ƒè™‘æ•°å­—ä¸­çš„é€—å·äº†,æˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š^[0-9]{1,3}(,[0-9]{3})*(.[0-9]{1,2})?$</li>
<li>1åˆ°3ä¸ªæ•°å­—,åé¢è·Ÿç€ä»»æ„ä¸ª é€—å·+3ä¸ªæ•°å­—,é€—å·æˆä¸ºå¯é€‰,è€Œä¸æ˜¯å¿…é¡»ï¼š^([0-9]+|[0-9]{1,3}(,[0-9]{3})*)(.[0-9]{1,2})?$</li>
<li>â€œ+â€å¯ä»¥ç”¨â€*â€æ›¿ä»£å¦‚æœä½ è§‰å¾—ç©ºå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ¥å—çš„è¯(å¥‡æ€ª,ä¸ºä»€ä¹ˆ?)æœ€å,åˆ«å¿˜äº†åœ¨ç”¨å‡½æ•°æ—¶å»æ‰å»æ‰é‚£ä¸ªåæ–œæ ,ä¸€èˆ¬çš„é”™è¯¯éƒ½åœ¨è¿™é‡Œ</li>
</ul>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>æ­£åˆ™è¡¨è¾¾å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>Goå¹¶å‘ä¹‹channel</title>
    <url>/2018/09/25/Go%E5%B9%B6%E5%8F%91%E4%B9%8Bchannel/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="channelæ˜¯ä»€ä¹ˆ"><a href="#channelæ˜¯ä»€ä¹ˆ" class="headerlink" title="channelæ˜¯ä»€ä¹ˆ"></a>channelæ˜¯ä»€ä¹ˆ</h1><p>channelæ˜¯Goä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§ï¼Œåœ¨Goå¹¶å‘ä¹‹goroutineé‡Œæœ‰ä»‹ç»äº†CSPæ¨¡å‹ï¼ŒCSP æ˜¯ Communicating Sequential Process çš„ç®€ç§°ï¼Œä¸­æ–‡å¯ä»¥å«åšé€šä¿¡é¡ºåºè¿›ç¨‹ï¼Œæ˜¯ä¸€ç§å¹¶å‘ç¼–ç¨‹æ¨¡å‹ã€‚Goå®ç°äº†CSPéƒ¨åˆ†çš„ç†è®ºï¼Œgoroutineå¯¹åº”CSPä¸­å¹¶å‘æ‰§è¡Œçš„å®ä½“ï¼Œchannelä¹Ÿå°±å¯¹åº”ç€CSPä¸­çš„channelã€‚</p>
<a id="more"></a>
<h1 id="channelæ“ä½œç¬¦"><a href="#channelæ“ä½œç¬¦" class="headerlink" title="channelæ“ä½œç¬¦"></a>channelæ“ä½œç¬¦</h1><p>æ“ä½œç¬¦ <code>&lt;-</code></p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯»</span></span><br><span class="line">x &lt;- <span class="keyword">chan</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å†™</span></span><br><span class="line"><span class="keyword">chan</span> &lt;- <span class="number">10</span></span><br></pre></td></tr></table></figure>
<h1 id="channelåˆ›å»º"><a href="#channelåˆ›å»º" class="headerlink" title="channelåˆ›å»º"></a>channelåˆ›å»º</h1><p>å¿…é¡»ä½¿ç”¨makeåˆ›å»ºchannel</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">bufChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">10</span>) <span class="comment">//1ã€å¸¦ç¼“å†²channel</span></span><br><span class="line">noBufChan := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>) <span class="comment">//2ã€æ— ç¼“å†²channel</span></span><br></pre></td></tr></table></figure>
<p>å’Œmapç±»ä¼¼ï¼Œchannelä¹Ÿæ˜¯ä¸€ä¸ªå¯¹åº”makeåˆ›å»ºçš„åº•å±‚æ•°æ®ç»“æ„çš„å¼•ç”¨ï¼Œå½“æˆ‘ä»¬å¤åˆ¶ä¸€ä¸ªchannelæˆ–è€…ç”¨äºå‡½æ•°å‚æ•°ä¼ é€’æ—¶ï¼Œåªæ˜¯æ‹·è´äº†ä¸€ä¸ªchannelçš„å¼•ç”¨ï¼Œchannelçš„é›¶å€¼ä¸ºnilã€‚</p>
<p>ä»¥æ–¹å¼1åˆ›å»ºçš„channelæ˜¯å¸¦ç¼“å†²çš„ï¼Œæ–¹å¼2å³ä¸ºæ— ç¼“å†²çš„ã€‚</p>
<p>ç¤ºä¾‹ä»£ç 1ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    channel := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>) <span class="comment">//åˆ›å»ºä¸€ä¸ªintç±»å‹çš„channel</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//åŒ¿åå‡½æ•°</span></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        channel &lt;- <span class="number">10</span> </span><br><span class="line">        fmt.Println(<span class="string">"chan &lt;-"</span>) <span class="comment">//å­åç¨‹</span></span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    &lt;- channel <span class="comment">//æ²¡æœ‰æ•°æ®å‰é˜»å¡</span></span><br><span class="line">    fmt.Println(<span class="string">"&lt;- chan"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿è¡Œç»“æœï¼š<br><img src="channel_example1.png" alt></p>
<p>å†æ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªä¾‹å­</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> channel <span class="keyword">chan</span> <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">        channel &lt;- <span class="number">10</span></span><br><span class="line">        fmt.Println(<span class="string">"chan &lt;-"</span>) </span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    &lt;- channel </span><br><span class="line">    fmt.Println(<span class="string">"&lt;- chan"</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç»“æœï¼š<br><img src="no_init_chan_deadlock.png" alt></p>
<p>ä¸ºä»€ä¹ˆä¼šdeadlockï¼Œå› ä¸ºchannelå¹¶æ²¡æœ‰åˆ›å»ºã€‚</p>
<h1 id="ä¸å¸¦ç¼“å†²channel"><a href="#ä¸å¸¦ç¼“å†²channel" class="headerlink" title="ä¸å¸¦ç¼“å†²channel"></a>ä¸å¸¦ç¼“å†²channel</h1><p>ä¸€ä¸ªåŸºäºæ— ç¼“å­˜çš„channelçš„å‘é€æ“ä½œå°†å¯¼è‡´å‘é€è€…goroutineé˜»å¡ï¼Œç›´åˆ°å¦ä¸€ä¸ªgoroutineåœ¨ç›¸åŒçš„channelä¸Šæ‰§è¡Œæ¥æ”¶æ“ä½œï¼Œå½“å‘é€çš„å€¼é€šè¿‡channelæˆåŠŸä¼ è¾“ä¹‹åï¼Œä¸¤ä¸ªgoroutineå¯ä»¥ç»§ç»­æ‰§è¡Œåé¢çš„è¯­å¥ã€‚åä¹‹ï¼Œå¦‚æœæ¥å—æ“ä½œå…ˆå‘ç”Ÿï¼Œé‚£ä¹ˆæ¥æ”¶è€…goroutineä¹Ÿå°†é˜»å¡ï¼Œç›´åˆ°æœ‰å¦ä¸€ä¸ªgoroutineåœ¨ç›¸åŒçš„channelä¸Šæ‰§è¡Œå‘é€æ“ä½œã€‚</p>
<p>åŸºäºæ— ç¼“å­˜channelçš„å‘é€å’Œæ¥æ”¶æ“ä½œå°†å¯¼è‡´ä¸¤ä¸ªgoroutineåšä¸€æ¬¡åŒæ­¥æ“ä½œã€‚å› ä¸ºè¿™ä¸ªåŸå› ï¼Œæ— ç¼“å­˜channelæœ‰æ—¶å€™ä¹Ÿè¢«æˆä¸ºåŒæ­¥channelã€‚å½“é€šè¿‡ä¸€ä¸ªæ— ç¼“å­˜channelå‘é€æ•°æ®æ—¶ï¼Œæ¥æ”¶è€…æ”¶åˆ°æ•°æ®å‘ç”Ÿåœ¨å”¤é†’å‘é€è€…goroutineä¹‹å‰ã€‚</p>
<p>channelæ¥å—å’Œå‘é€æ•°æ®éƒ½æ˜¯é˜»å¡çš„ï¼Œé™¤éå¦ä¸€ç«¯å·²ç»å‡†å¤‡å¥½ï¼Œè¿™æ ·ä½¿å¾—goroutineåŒæ­¥å˜å¾—æ›´åŠ çš„ç®€å•ï¼Œä¸ç”¨æ˜¾å¼çš„lockã€‚<br><strong> è°“é˜»å¡å°±æ˜¯è¯»å–ï¼Œä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æœ‰æ•°æ®æ¥æ”¶ã€‚å…¶æ¬¡ï¼Œä»»ä½•å‘é€å°†ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æ•°æ®è¢«è¯»å‡ºã€‚ </strong> æ— ç¼“å†²çš„channelæ˜¯å¤šä¸ªgoroutineä¹‹é—´åŒæ­¥å¾ˆæ£’çš„å·¥å…·ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(a []<span class="keyword">int</span>, ch <span class="keyword">chan</span> <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    total := <span class="number">0</span></span><br><span class="line">    fmt.Println(a)</span><br><span class="line">    <span class="keyword">for</span> _,v := <span class="keyword">range</span> a &#123;</span><br><span class="line">        total += v</span><br><span class="line">    &#125;</span><br><span class="line">    ch&lt;- total</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">    a := []<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;</span><br><span class="line">    <span class="keyword">go</span> sum(a[:<span class="number">3</span>], ch)</span><br><span class="line">    <span class="keyword">go</span> sum(a[<span class="number">3</span>:], ch)</span><br><span class="line">    x := &lt;-ch</span><br><span class="line">    y := &lt;-ch</span><br><span class="line">    fmt.Println(x, y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿è¡Œç»“æœï¼š<br><img src="channel_example2.png" alt></p>
<p>ç»“æœæœ‰ä¸¤ç§ï¼Œè¿™åªæ˜¯å…¶ä¸­ä¸€ç§ã€‚</p>
<h1 id="å¸¦ç¼“å†²çš„channel"><a href="#å¸¦ç¼“å†²çš„channel" class="headerlink" title="å¸¦ç¼“å†²çš„channel"></a>å¸¦ç¼“å†²çš„channel</h1><p>åœ¨Goä¸­ä¹Ÿå…è®¸æŒ‡å®šchannelçš„ç¼“å†²å¤§å°</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">type</span>, value)</span><br></pre></td></tr></table></figure>
<p>å½“ value = 0 æ—¶ï¼Œchannelå°±æ˜¯æ— ç¼“å†²çš„channelï¼Œå½“ value &gt; 0 æ—¶ï¼Œ channelæœ‰ç¼“å†²ã€æ˜¯éé˜»å¡çš„ï¼Œç›´åˆ°å†™æ»¡valueä¸ªå…ƒç´ åæ‰é˜»å¡å†™å…¥ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">2</span>) <span class="comment">//ç¼“å†²å¤§å°ä¸º2</span></span><br><span class="line">    ch&lt;- <span class="number">10</span></span><br><span class="line">    ch&lt;- <span class="number">20</span></span><br><span class="line"></span><br><span class="line">    fmt.Println(&lt;-ch)</span><br><span class="line">    fmt.Println(&lt;-ch)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿è¡Œç»“æœï¼š<br><img src="channel_example3.png" alt></p>
<p>å¦‚æœä»£ç ä¸­å°†ç¼“å­˜åŒºåŸŸè®¾ç½®ä¸º1ï¼Œåˆ™ä¼šå‡ºç°deadlocké”™è¯¯ã€‚<br>fatal error: all goroutines are asleep - deadlock!</p>
<h1 id="å•å‘channel"><a href="#å•å‘channel" class="headerlink" title="å•å‘channel"></a>å•å‘channel</h1><p>é»˜è®¤æƒ…å†µä¸‹æ˜¯åŒå‘çš„ï¼Œå³å¯è¯»å¯å†™ï¼Œè¯»ä»£è¡¨receiveï¼Œå†™ä»£è¡¨sendã€‚</p>
<p>é€šå¸¸æƒ…å†µæˆ‘ä»¬ä¼šå°†ä¸€ä¸ªé€šé“ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’è¿‡å»ï¼Œä½†æ˜¯é»˜è®¤æ˜¯åŒå‘çš„ï¼Œæˆ‘åªæƒ³è®©è¯¥å‚æ•°åªèƒ½è¿›è¡Œè¯»æˆ–è€…å†™ï¼Œé‚£å°±ç”¨åˆ°äº†å•å‘channelã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ch1 <span class="keyword">chan</span> <span class="keyword">int</span> <span class="comment">//é»˜è®¤åŒå‘</span></span><br><span class="line"><span class="keyword">var</span> ch2 <span class="keyword">chan</span>&lt;- <span class="keyword">int</span> <span class="comment">//å•å‘ï¼Œåªè¯»</span></span><br><span class="line"><span class="keyword">var</span> ch3 &lt;-<span class="keyword">chan</span> <span class="keyword">int</span> <span class="comment">//å•é¡¹ï¼Œåªå†™</span></span><br></pre></td></tr></table></figure>
<p>åŒå‘channelå¯ä»¥éšå¼è½¬æ¢ä¸ºå•å‘channelï¼Œåä¹‹åˆ™ä¸è¡Œã€‚</p>
<h1 id="å…³é—­channel"><a href="#å…³é—­channel" class="headerlink" title="å…³é—­channel"></a>å…³é—­channel</h1><p>å…³é—­channelåªéœ€è¦closeå‡½æ•°å³å¯ï¼Œå¯ä»¥ä½¿ç”¨å¤šè¿”å›å€¼çš„æ–¹å¼ <code>v,ok := &lt;-ch</code>æ–¹å¼æ¥åˆ¤æ–­channelæ˜¯å¦è¢«å…³é—­ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">foreach</span><span class="params">(arr []<span class="keyword">int</span>, b <span class="keyword">chan</span> <span class="keyword">bool</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> i,v := <span class="keyword">range</span> arr &#123;</span><br><span class="line">        fmt.Printf(<span class="string">"i=%d, v=%d \n"</span>, i, v)</span><br><span class="line">    &#125;</span><br><span class="line">    b&lt;- <span class="literal">true</span></span><br><span class="line">    <span class="built_in">close</span>(b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    arr := []<span class="keyword">int</span>&#123;<span class="number">12</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">2</span>&#125;</span><br><span class="line">    ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>, <span class="number">10</span>)</span><br><span class="line">    <span class="keyword">go</span> foreach(arr, ch)</span><br><span class="line">    <span class="keyword">if</span> v, ok := &lt;-ch; !ok &#123;</span><br><span class="line">        fmt.Println(v)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å½“ä¸€ä¸ªchannelè¢«å…³é—­åï¼Œå†å‘è¯¥channelå‘é€æ•°æ®å°†å¯¼è‡´panicå¼‚å¸¸ã€‚</p>
<p>å…¶å®ä½ å¹¶ä¸éœ€è¦å…³é—­æ¯ä¸€ä¸ªchannelã€‚åªè¦å½“éœ€è¦å‘Šè¯‰æ¥æ”¶è€…goroutineï¼Œæ‰€æœ‰çš„æ•°æ®å·²ç»å…¨éƒ¨å‘é€æ—¶æ‰éœ€è¦å…³é—­channelã€‚ä¸ç®¡ä¸€ä¸ªchannelæ˜¯å¦è¢«å…³é—­ï¼Œå½“å®ƒæ²¡æœ‰è¢«å¼•ç”¨æ—¶å°†ä¼šè¢«Goè¯­è¨€çš„åƒåœ¾è‡ªåŠ¨å›æ”¶å™¨å›æ”¶ã€‚ï¼ˆä¸è¦å°†å…³é—­ä¸€ä¸ªæ‰“å¼€æ–‡ä»¶çš„æ“ä½œå’Œå…³é—­ä¸€ä¸ªchannelæ“ä½œæ··æ·†ã€‚å¯¹äºæ¯ä¸ªæ‰“å¼€çš„æ–‡ä»¶ï¼Œéƒ½éœ€è¦åœ¨ä¸ä½¿ç”¨çš„ä½¿ç”¨è°ƒç”¨å¯¹åº”çš„Closeæ–¹æ³•æ¥å…³é—­æ–‡ä»¶ã€‚ï¼‰<br>è¯•å›¾é‡å¤å…³é—­ä¸€ä¸ªchannelå°†å¯¼è‡´panicå¼‚å¸¸ï¼Œè¯•å›¾å…³é—­ä¸€ä¸ªnilå€¼çš„channelä¹Ÿå°†å¯¼è‡´panicå¼‚å¸¸ã€‚å…³é—­ä¸€ä¸ªchannelsè¿˜ä¼šè§¦å‘ä¸€ä¸ªå¹¿æ’­æœºåˆ¶</p>
<h1 id="Rangeéå†channel"><a href="#Rangeéå†channel" class="headerlink" title="Rangeéå†channel"></a>Rangeéå†channel</h1><p>å¯ä»¥é€šè¿‡rangeï¼Œåƒæ“ä½œsliceæˆ–è€…mapä¸€æ ·æ“ä½œç¼“å­˜ç±»å‹çš„channel</p>
<p>ä½¿ç”¨rangeå®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—</p>
<p>ç¤ºä¾‹ä»£ç ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonacci</span><span class="params">(n <span class="keyword">int</span>, f <span class="keyword">chan</span> <span class="keyword">int</span>)</span></span>&#123;</span><br><span class="line">    x, y := <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i:=<span class="number">0</span>; i&lt;n; i++ &#123;</span><br><span class="line">        f &lt;- x</span><br><span class="line">        x, y = y, x+y</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">close</span>(f)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">    <span class="keyword">go</span> fibonacci(<span class="built_in">cap</span>(ch), ch)</span><br><span class="line">    <span class="keyword">for</span> v := <span class="keyword">range</span> ch &#123;</span><br><span class="line">        fmt.Printf(<span class="string">"%d  "</span>, v)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h1><p>Goæä¾›äº†ä¸€ä¸ªå…³é”®å­—selectï¼Œé€šè¿‡selectå¯ä»¥ç›‘å¬channelä¸Šçš„æ•°æ®æµåŠ¨ã€‚</p>
<p>è¯­æ³•å’Œæ¶switchéå¸¸ç›¸ä¼¼ï¼Œæ¯ä¸ªæ¡ä»¶ç”±caseæ¥æè¿°ã€‚ä½†æ˜¯selectæœ‰å¾ˆå¤šé™åˆ¶ï¼Œå…¶ä¸­ä¸€æ¡å°±æ˜¯æ¯ä¸ªcaseè¯­å¥é‡Œå¿…é¡»æ˜¯ä¸€ä¸ªIOæ“ä½œã€‚</p>
<p>å¤§è‡´ç»“æ„<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line">selct &#123;</span><br><span class="line">    <span class="keyword">case</span> &lt;-ch:</span><br><span class="line">    <span class="comment">//å¦‚æœè¯»æ•°æ®ï¼Œåˆ™æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">case</span> ch&lt;- <span class="number">1</span>:</span><br><span class="line">    <span class="comment">//å¦‚æœå†™æ•°æ®ï¼Œåˆ™æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    <span class="comment">//é»˜è®¤å¤„ç†æµç¨‹ï¼Œä½†æ˜¯ä¸€èˆ¬æƒ…å†µselectä¸ç”¨è¯¥æ¡ä»¶ï¼Œå› ä¸ºæ— æ„ä¹‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>åœ¨ä¸€ä¸ªselectè¯­å¥ä¸­ï¼ŒGoä¼šæŒ‰é¡ºåºä»å¤´åˆ°å°¾è¯„ä¼°æ¯ä¸€æ¡å‘é€å’Œæ¥æ”¶çš„è¯­å¥ã€‚</p>
<p>ä½†æ˜¯å…¶ä¸­ä»»æ„ä¸€è¯­å¥éƒ½å¯ä»¥ï¼Œæ˜¯ä»»æ„éƒ½å¯ä»¥(å³æ²¡æœ‰è¢«å µå¡)ï¼Œé‚£ä¹ˆå°±ä»é‚£ä¹ˆå¯ä»¥æ‰§è¡Œçš„è¯­å¥ä¸­ä»»æ„é€‰æ‹©æ¥ä½¿ç”¨ã€‚</p>
<p>å¦‚æœæ²¡æœ‰ä»»æ„ä¸€æ¡è¯­å¥å¯ä»¥æ‰§è¡Œï¼Œé‚£ä¹ˆå¯èƒ½æœ‰ä¸¤ç§æƒ…å†µã€‚</p>
<ul>
<li>å¦‚æœç»™å‡ºäº†defaultè¯­å¥ï¼Œåˆ™ä¼šæ‰§è¡Œdefaultè¯­å¥ï¼ŒåŒæ—¶ç¨‹åºçš„æ‰§è¡Œä¼šä»selectè¯­å¥åçš„è¯­å¥ä¸­æ¢å¤ã€‚</li>
<li>å¦‚æœæ²¡æœ‰defaultè¯­å¥ï¼Œé‚£ä¹ˆselectè¯­å¥å°†è¢«é˜»å¡ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªé€šä¿¡å¯ä»¥è¿›è¡Œä¸‹å»ã€‚</li>
</ul>
<p>ä½¿ç”¨selectå®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—<br>ç¤ºä¾‹ä»£ç ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fibonacci</span><span class="params">(n <span class="keyword">chan</span> <span class="keyword">int</span>, b <span class="keyword">chan</span> <span class="keyword">bool</span>)</span></span> &#123;</span><br><span class="line">    x, y := <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        <span class="keyword">select</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> n&lt;- x:</span><br><span class="line">            x, y = y, x+y</span><br><span class="line">        <span class="keyword">case</span> &lt;-b:</span><br><span class="line">            fmt.Println(<span class="string">"end"</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨selectå®ç°æ–æ³¢é‚£å¥‘</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    n := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">10</span>)</span><br><span class="line">    b := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">cap</span>(n); i++ &#123;</span><br><span class="line">            fmt.Println(&lt;-n)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        b&lt;- <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    &#125;()</span><br><span class="line"></span><br><span class="line">    fibonacci(n, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿è¡Œç»“æœï¼š<br><img src="select_feibo.png" alt></p>
]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>GolangåŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>Goå¹¶å‘ä¹‹goroutine</title>
    <url>/2018/09/24/Go%E5%B9%B6%E5%8F%91%E4%B9%8Bgoroutine/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Goè¯­è¨€å¹¶å‘ä¼˜åŠ¿"><a href="#Goè¯­è¨€å¹¶å‘ä¼˜åŠ¿" class="headerlink" title="Goè¯­è¨€å¹¶å‘ä¼˜åŠ¿"></a>Goè¯­è¨€å¹¶å‘ä¼˜åŠ¿</h1><p>ä½œä¸ºäº‘è®¡ç®—æ—¶ä»£çš„Cè¯­è¨€ä¹‹ç§°çš„Goè¯­è¨€ï¼Œç¬¬ä¸€æ˜¯å› ä¸ºGoè¯­è¨€è®¾è®¡ç®€å•ï¼Œç¬¬äºŒ21å®é™…æœ€é‡è¦çš„å°±æ˜¯å¹¶å‘ç¨‹åºè®¾è®¡ï¼Œè€ŒGoåœ¨è¯­è¨€å±‚é¢ä¸Šå°±æ”¯æŒäº†å¹¶å‘ã€‚åœ¨æ­¤åŒæ—¶ï¼Œå¹¶å‘ç¨‹åºçš„å†…å­˜ç®¡ç†æœ‰æ—¶å€™æ˜¯éå¸¸å¤æ‚çš„ï¼Œè€ŒGoè‡ªèº«ä¹Ÿæä¾›äº†è‡ªåŠ¨åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p>
<a id="more"></a>
<p>Goè¯­è¨€ä¸ºå¹¶å‘ç¼–ç¨‹è€Œå†…ç½®çš„ä¸Šå±‚APIæ˜¯åŸºäºCSPæ¨¡å‹ï¼Œè¿™é‡Œå¼•ç”¨äº†çŸ¥ä¹<a href="https://www.zhihu.com/question/26192499" target="_blank" rel="noopener">åŸæ–‡é“¾æ¥</a>,CSP(Communicating Sequential Process)æ¨¡å‹å’ŒActoræ¨¡å‹æ˜¯ä¸¤é—¨éå¸¸å¤å¤ä¸”å¤–å½¢æ¥è¿‘çš„å¹¶å‘æ¨¡å‹ã€‚ä½†CSPä¸Actoræœ‰ä»¥ä¸‹å‡ ç‚¹æ¯”è¾ƒå¤§çš„åŒºåˆ«ï¼š</p>
<ul>
<li>CSPå¹¶ä¸Focuså‘é€æ¶ˆæ¯çš„å®ä½“/Taskï¼Œè€Œæ˜¯å…³æ³¨å‘é€æ¶ˆæ¯æ—¶æ¶ˆæ¯æ‰€ä½¿ç”¨çš„è½½ä½“ï¼Œå³channelã€‚</li>
<li>åœ¨Actorçš„è®¾è®¡ä¸­ï¼ŒActorä¸ä¿¡ç®±æ˜¯è€¦åˆçš„ï¼Œè€Œåœ¨CSPä¸­channelæ˜¯ä½œä¸ºfirst-classç‹¬ç«‹å­˜åœ¨çš„ã€‚</li>
<li>å¦å¤–ä¸€ç‚¹åœ¨äºï¼ŒActorä¸­æœ‰æ˜ç¡®çš„send/receiveçš„å…³ç³»ï¼Œè€Œchannelä¸­å¹¶ä¸åŒºåˆ†è¿™æ ·çš„å…³ç³»ï¼Œæ‰§è¡Œå—å¯ä»¥ä»»æ„é€‰æ‹©å‘é€æˆ–è€…å–å‡ºæ¶ˆæ¯ã€‚</li>
</ul>
<p>å¦å¤–é»˜è®¤æƒ…å†µä¸‹çš„channelæ˜¯æ— ç¼“å­˜çš„,å¯¹channelçš„sendåŠ¨ä½œæ˜¯åŒæ­¥é˜»å¡çš„ï¼Œç›´åˆ°å¦å¤–ä¸€ä¸ªæŒæœ‰è¯¥channelå¼•ç”¨çš„æ‰§è¡Œå—å–å‡ºæ¶ˆæ¯(channelä¸ºç©º)ï¼Œåä¹‹ï¼ŒreceiveåŠ¨ä½œäº¦ç„¶ã€‚è—‰æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªåŸºæœ¬ç¡®å®šçš„äº‹å®ï¼Œby defaultæ—¶ï¼Œå®é™…çš„receiveæ“ä½œåªä¼šåœ¨sendä¹‹åæ‰è¢«å‘ç”Ÿã€‚è€ŒActorä¸­ï¼Œç”±äºsendè¿™ä¸ªåŠ¨ä½œæ˜¯å¼‚æ­¥çš„ï¼Œå› æ­¤Actorçš„receiveä¼šæŒ‰ç…§ä¿¡ç®±æ¥å—åˆ°æ¶ˆæ¯çš„é¡ºåºæ¥è¿›è¡Œå¤„ç†ã€‚å½“ç„¶ï¼Œé™¤æ­¤ä»¥å¤–ï¼Œchannelè¿˜æœ‰ç§Buffered Channelçš„æ¨¡å¼ï¼Œåœ¨é»˜è®¤æƒ…å†µçš„åŸºç¡€ä¸Šï¼Œä½ å¯ä»¥ç¡®å®šchannelå†…çš„æ¶ˆæ¯æ•°é‡ï¼Œå½“channelä¸­æ¶ˆæ¯æ•°é‡ä¸æ»¡è¶³äºåˆå§‹åŒ–æ—¶Bufferæ•°ç›®æ—¶ï¼ŒsendåŠ¨ä½œä¸ä¼šè¢«é˜»å¡ï¼Œå†™å…¥æ“ä½œä¼šç«‹å³å®Œæˆ(å› æ­¤Buffered Channelåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¸Actoréå¸¸æ¥è¿‘)ï¼Œç›´åˆ°Bufferæ•°ç›®å·²æ»¡ï¼Œåˆ™sendåŠ¨ä½œå¼€å§‹é˜»å¡ã€‚</p>
<p>è¿™ä¹Ÿæ„å‘³ç€æ˜¾ç¤ºé”éƒ½æ˜¯å¯ä»¥é¿å…çš„ï¼Œå› ä¸ºGoè¯­è¨€é€šè¿‡å®‰å…¨çš„é€šé“å‘é€å’Œæ¥å—ä»¥å®ç°åŒæ­¥ï¼Œä¹Ÿç®€åŒ–äº†å¹¶å‘ç¨‹åºçš„ç¼–å†™ã€‚</p>
<p>è€Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ¡Œé¢è®¡ç®—æœºè·‘åå‡ äºŒåä¸ªçº¿ç¨‹å°±æœ‰ç‚¹è´Ÿè½½äº†ï¼Œè€ŒåŒæ ·çš„ä¸€å°è®¡ç®—æœºï¼Œå´å¯ä»¥è½»æ¾è·‘<br>èµ·æˆç™¾ä¸Šåƒç”šè‡³ä¸‡ä¸ªgoroutineè¿›è¡Œèµ„æºç«äº‰ã€‚</p>
<h1 id="goroutineæ˜¯ä»€ä¹ˆ"><a href="#goroutineæ˜¯ä»€ä¹ˆ" class="headerlink" title="goroutineæ˜¯ä»€ä¹ˆ"></a>goroutineæ˜¯ä»€ä¹ˆ</h1><p>goroutineæ˜¯Goå¹¶è¡Œè®¾è®¡çš„è®¾ç½®æ ¸å¿ƒï¼Œå®ƒå…¶å®å°±æ˜¯åç¨‹ï¼Œä½†æ˜¯å®ƒæ¯”çº¿ç¨‹æ›´å°ï¼Œåå‡ ä¸ªgoroutineå¯èƒ½ä½“ç°åœ¨åº•å±‚å°±æ˜¯äº”å…­ä¸ªçº¿ç¨‹ï¼ŒGoè¯­è¨€å†…éƒ¨å¸®ä½ å®ç°äº†è¿™äº›goroutineä¹‹é—´çš„å†…å­˜å…±äº«ã€‚æ‰§è¡Œgoroutineåªéœ€æå°‘çš„æ ˆå†…å­˜ï¼Œå½“ç„¶ä¼šæ ¹æ®ç›¸åº”çš„æ•°æ®ä¼¸ç¼©ã€‚ä¹Ÿæ­£æ˜¯å¦‚æ­¤ï¼Œå¯ä»¥åŒæ—¶è¿è¡Œæˆåƒä¸Šä¸‡ä¸ªå¹¶å‘ä»»åŠ¡ã€‚goroutineæ¯”threadæ›´æ˜“ç”¨ã€æ›´é«˜æ•ˆã€æ›´è½»ä¾¿ã€‚</p>
<h1 id="goroutineçš„åˆ›å»º"><a href="#goroutineçš„åˆ›å»º" class="headerlink" title="goroutineçš„åˆ›å»º"></a>goroutineçš„åˆ›å»º</h1><p>åªéœ€è¦å‡½æ•°è°ƒç”¨å‰åŠ ä¸€ä¸ª <strong> go </strong> å…³é”®å­—ï¼Œå°±å¯ä»¥åˆ›å»ºå¹¶å‘æ‰§è¡Œå•å…ƒã€‚æ— éœ€äº†è§£å…¶ä»–ç»†èŠ‚ï¼Œè°ƒåº¦å™¨ä¼šè‡ªåŠ¨å®‰æ’åˆ°åˆé€‚çš„ç³»ç»Ÿçº¿ç¨‹ä¸Šæ‰§è¡Œã€‚</p>
<p>åƒjavaè¯­è¨€ä¸€æ ·ï¼Œgoä¹Ÿæœ‰å…¶mainå‡½æ•°ï¼Œæœ‰ç€å…¶main threadã€‚åœ¨goè¯­è¨€ä¸­ï¼Œmainå‡½æ•°æ—¢åœ¨ä¸€ä¸ªå•ç‹¬çš„goroutineä¸­è¿è¡Œï¼Œä¹Ÿå¯ä»¥æˆä¸ºmain goroutineã€‚æ–°çš„goroutineç”¨goè¯­å¥æ¥åˆ›å»ºã€‚</p>
<p>ç¤ºä¾‹ä»£ç 1ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> &#123; <span class="comment">//æ­»å¾ªç¯</span></span><br><span class="line">        fmt.Println(<span class="string">"this is main goroutine"</span>)</span><br><span class="line">        time.Sleep(time.Second)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿è¡Œç»“æœï¼š<br><img src="main_goroutine.png" alt></p>
<p>æ‰‹åŠ¨é€€å‡ºï¼Œè¿™æ˜¯ä¸€ä¸ªä¸»åç¨‹ï¼Œé‚£ä¹ˆå†çœ‹ä¸‹é¢ä¸€ä¸ªä»£ç <br>ç¤ºä¾‹ä»£ç 2ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"this is a new Task"</span>)</span><br><span class="line">        time.Sleep(time.Second)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"this is main goroutine"</span>)</span><br><span class="line">        time.Sleep(time.Second)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    newTask()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿è¡Œç»“æœï¼š<br><img src="main_goroutine.png" alt></p>
<p>æ¯«æ— ç–‘é—®ç¤ºä¾‹2ä¸ç¤ºä¾‹1ä¸­è¿è¡Œç»“æœæ²¡æœ‰åŒºåˆ«ï¼Œè€Œå¦‚ä½•è®©ä»–ä»¬åŒæ—¶æ‰§è¡Œå‘¢</p>
<p>ç¤ºä¾‹ä»£ç 3ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"this is a new Task"</span>)</span><br><span class="line">        time.Sleep(time.Second)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">go</span> newTask() <span class="comment">//æ–°å»ºä¸€ä¸ªåç¨‹</span></span><br><span class="line">    <span class="comment">//éœ€è¦å°†ä»£ç æ”¾ç½®å‰é¢ï¼Œå¦‚æœæ”¾ç½®åé¢ï¼Œæ­»å¾ªç¯åŒæ ·æ²¡åŠæ³•æ‰§è¡Œè¿™æ¡è¯­å¥</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"this is main goroutine"</span>)</span><br><span class="line">        time.Sleep(time.Second)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿è¡Œç»“æœï¼š<br><img src="new_goroutine.png" alt></p>
<p>ä¸€ä¸ªæ–°çš„åç¨‹åªéœ€è¦ä¸€ä¸ªå…³é”®å­—goå°±å·²ç»å®Œæˆäº†ã€‚</p>
<h1 id="main-goroutineå…ˆé€€å‡º"><a href="#main-goroutineå…ˆé€€å‡º" class="headerlink" title="main goroutineå…ˆé€€å‡º"></a>main goroutineå…ˆé€€å‡º</h1><p>æˆ‘ä»¬å†çœ‹ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡</p>
<p>ç¤ºä¾‹ä»£ç 4ï¼š<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"this is a new Task"</span>)</span><br><span class="line">        time.Sleep(time.Second)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">go</span> newTask()</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿è¡Œç»“æœï¼š<br><img src="main_goroutine_exit_first.png" alt></p>
<p>ä¸ºä»€ä¹ˆç»“æœä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬æ˜æ˜å·²ç»å¼€äº†ä¸€ä¸ªæ–°çš„åç¨‹æ¥è¿›è¡Œæ‰§è¡ŒnewTaskå‡½æ•°ï¼Œè¿™å°±æ˜¯goä¸­mainå‡½æ•°æ‰§è¡Œçš„å¤ªå¿«äº†ï¼Œä¹Ÿå°±æ˜¯main goroutineå·²ç»æ‰§è¡Œå®Œäº†ï¼Œæ‰€æœ‰çš„goroutineéƒ½ä¼šç›´æ¥æ‰“æ–­ï¼Œç¨‹åºé€€å‡ºã€‚</p>
<p>ä¸ºäº†é˜²æ­¢main goroutineè¿‡å¿«çš„ç»“æŸï¼Œ<br><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"this is a new Task"</span>)</span><br><span class="line">        time.Sleep(time.Second)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">go</span> newTask()</span><br><span class="line"></span><br><span class="line">    time.Sleep(<span class="number">5</span> * time.Second)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è¿è¡Œç»“æœï¼š<br><img src="sleep_main.png" alt></p>
<p>è®©main goroutineç¡äº†5ç§’ï¼Œè€ŒnewTaskä¹Ÿåˆšå¥½æ‰§è¡Œäº†5æ¬¡ï¼Œä¹Ÿè§£é‡Šäº†å½“main goroutineç»“æŸæ—¶ï¼Œæ‰€æœ‰çš„goroutineéƒ½ä¼šç›´æ¥æ‰“æ–­ï¼Œç¨‹åºé€€å‡ºã€‚</p>
]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>GolangåŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>Goç¯å¢ƒæ­å»º</title>
    <url>/2018/09/22/Go%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Goè¯­è¨€ä¼˜åŠ¿"><a href="#Goè¯­è¨€ä¼˜åŠ¿" class="headerlink" title="Goè¯­è¨€ä¼˜åŠ¿"></a>Goè¯­è¨€ä¼˜åŠ¿</h1><p>GOè¯­è¨€ï¼ˆGolangï¼‰æ˜¯äº‘è®¡ç®—æ—¶ä»£çš„Cè¯­è¨€ã€‚å®ƒä¸ä»…æœ‰ç€æ›´é«˜çš„ç”Ÿäº§æ•ˆç‡ï¼Œä¹Ÿå¯¹å¤šå¤„ç†å™¨ç³»ç»Ÿåº”ç”¨ç¨‹åºçš„ç¼–ç¨‹è¿›è¡Œäº†ä¼˜åŒ–ï¼Œè¯­è¨€å±‚é¢æ”¯æŒå¹¶å‘ï¼Œå†…ç½®runtimeï¼Œæ”¯æŒGCï¼Œå¹¶ä¸”è¯­æ³•ç®€å•æ˜“å­¦ï¼Œå¹¶ä¸åƒjavaæœ‰ç€é‚£ä¹ˆå¤æ‚çš„è¯­æ³•ã€‚</p>
<a id="more"></a>
<h1 id="Goå¯ä»¥åšä»€ä¹ˆ"><a href="#Goå¯ä»¥åšä»€ä¹ˆ" class="headerlink" title="Goå¯ä»¥åšä»€ä¹ˆ"></a>Goå¯ä»¥åšä»€ä¹ˆ</h1><ul>
<li>æœåŠ¡å™¨ç¼–ç¨‹</li>
<li>åˆ†å¸ƒå¼ç³»ç»Ÿ</li>
<li>ç½‘ç»œç¼–ç¨‹</li>
<li>å†…å­˜æ•°æ®åº“</li>
<li>äº‘å¹³å°</li>
<li>and so on</li>
</ul>
<h1 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h1><p>æ•™ç¨‹åŸºäºwin10ï¼Œlinuxç­‰ç³»ç»Ÿè¯·å‚è€ƒå…¶ä»–æ–‡ç« <br><a href="https://golang.org/" target="_blank" rel="noopener">å®˜ç½‘</a>ï¼Œè‡ªè¡Œä¸‹è½½msiæ–‡ä»¶ï¼Œå‚»ç“œå¼å®‰è£…ï¼Œå®‰è£…è·¯å¾„ä¸è¦å‡ºç°ä¸­æ–‡é¿å…å‡ºå·®é”™ã€‚<br>éœ€è¦ç¿»å¢™ï¼Œæ²¡æœ‰å¯ä»¥é€‰æ‹©<a href="https://studygolang.com" target="_blank" rel="noopener">Golangä¸­æ–‡ç½‘</a><br>æµ‹è¯•å®‰è£…ï¼šæ‰“å¼€ç»ˆç«¯è¾“å…¥<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go version</span><br><span class="line">go version go1.11 windows/amd64</span><br></pre></td></tr></table></figure></p>
<p>å³å¯å®Œæˆå®‰è£…</p>
<h1 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h1><p>æ‰“å¼€ç»ˆç«¯è¾“å…¥<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go env</span><br><span class="line"><span class="built_in">set</span> GOARCH=amd64</span><br><span class="line"><span class="built_in">set</span> GOBIN=</span><br><span class="line"><span class="built_in">set</span> GOCACHE=C:\Users\Administrator\AppData\Local\go-build</span><br><span class="line"><span class="built_in">set</span> GOEXE=.exe</span><br><span class="line"><span class="built_in">set</span> GOFLAGS=</span><br><span class="line"><span class="built_in">set</span> GOHOSTARCH=amd64</span><br><span class="line"><span class="built_in">set</span> GOHOSTOS=windows</span><br><span class="line"><span class="built_in">set</span> GOOS=windows</span><br><span class="line"><span class="built_in">set</span> GOPATH=E:\Go</span><br><span class="line"><span class="built_in">set</span> GOPROXY=</span><br><span class="line"><span class="built_in">set</span> GORACE=</span><br><span class="line"><span class="built_in">set</span> GOROOT=G:\Golang</span><br><span class="line"><span class="built_in">set</span> GOTMPDIR=</span><br><span class="line"><span class="built_in">set</span> GOTOOLDIR=G:\Golang\pkg\tool\windows_amd64</span><br><span class="line"><span class="built_in">set</span> GCCGO=gccgo</span><br><span class="line"><span class="built_in">set</span> CC=gcc</span><br><span class="line"><span class="built_in">set</span> CXX=g++</span><br><span class="line"><span class="built_in">set</span> CGO_ENABLED=1</span><br><span class="line"><span class="built_in">set</span> GOMOD=</span><br><span class="line"><span class="built_in">set</span> CGO_CFLAGS=-g -O2</span><br><span class="line"><span class="built_in">set</span> CGO_CPPFLAGS=</span><br><span class="line"><span class="built_in">set</span> CGO_CXXFLAGS=-g -O2</span><br><span class="line"><span class="built_in">set</span> CGO_FFLAGS=-g -O2</span><br><span class="line"><span class="built_in">set</span> CGO_LDFLAGS=-g -O2</span><br><span class="line"><span class="built_in">set</span> PKG_CONFIG=pkg-config</span><br><span class="line"><span class="built_in">set</span> GOGCCFLAGS=-m64 -mthreads -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=C:\Users\ADMINI~1\AppData\Local\Temp\go-build669911038=/tmp/go-build -gno-record-gcc-switches</span><br></pre></td></tr></table></figure></p>
<p>msiåŒ…åŸºæœ¬ä¼šæŠŠç¯å¢ƒé…ç½®å®Œæˆï¼Œä½†è¦é…ç½®GOPATHç›®å½•ï¼Œä¸è¦ç”¨é»˜è®¤é…ç½®çš„<br>è®¡ç®—æœº(å³é”®)-å±æ€§-é«˜çº§ç³»ç»Ÿè®¾ç½®-ç¯å¢ƒå˜é‡<br>åœ¨ <strong> ç”¨æˆ·å˜é‡ </strong> ä¸‹æ·»åŠ  <strong> GOPATH </strong><br>å€¼ä¸ºä½ æƒ³è¦çš„è·¯å¾„å³å¯ã€‚åœ¨é…ç½®ç›®å½•ä¸‹åˆ›å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«æ˜¯</p>
<ul>
<li>srcç›®å½•<br>  æ­¤ç›®å½•æ˜¯è‡ªå·±åœ¨GoPathç›®å½•ä¸‹æ‰‹åŠ¨åˆ›å»ºçš„ï¼Œç”¨äºæ”¾æºä»£ç æ–‡ä»¶ã€‚</li>
<li>pkgç›®å½•<br>  æ­¤ç›®å½•æ˜¯åœ¨srcçš„æºæ–‡ä»¶ç›®å½•ä¸‹å¯¹.goæ–‡ä»¶é€šè¿‡go installä¹‹åè‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ”¾ç¼–è¯‘åçš„åŒ…æ–‡ä»¶ã€‚</li>
<li>binç›®å½•<br>  æ­¤ç›®å½•æ˜¯åœ¨srcçš„æºæ–‡ä»¶ç›®å½•ä¸‹å¯¹ .goæ–‡ä»¶é€šè¿‡go buildå’Œgo installä¹‹åè‡ªåŠ¨ç”Ÿæˆçš„ï¼Œ.goæ–‡ä»¶è¦è°ƒç”¨pkgä¸‹çš„åŒ…æ–‡ä»¶ã€‚</li>
</ul>
<p>ç¯å¢ƒåŸºæœ¬æ­å»ºå®Œæˆã€‚<br>å†æ¬¡è¾“å…¥<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ go env</span><br></pre></td></tr></table></figure></p>
<p>å‘ç°ä¿®æ”¹äº†å³å¯ã€‚</p>
]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>GolangåŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>Mavené…ç½®</title>
    <url>/2018/09/22/Maven%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong> MavenåŸºç¡€ç¯å¢ƒæ­å»º </strong></p>
<h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul>
<li>window10</li>
<li>jdk1.6æˆ–ä»¥ä¸Š</li>
</ul>
<a id="more"></a>
<h1 id="ä¸‹è½½Maven"><a href="#ä¸‹è½½Maven" class="headerlink" title="ä¸‹è½½Maven"></a>ä¸‹è½½Maven</h1><p><a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener">å®˜ç½‘</a></p>
<p><img src="downloadmaven.png" alt></p>
<p>ç›´æ¥é€‰æ‹© apache-maven-3.5.4-bin.zipæ ¼å¼ä¸‹è½½è§£å‹å³å¯</p>
<h1 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h1><h2 id="MAVEN-HOME"><a href="#MAVEN-HOME" class="headerlink" title="MAVEN_HOME"></a>MAVEN_HOME</h2><p>æˆ‘çš„è§£å‹å­˜æ”¾çš„ç›®å½•æ˜¯ <strong> G:\Maven </strong>ï¼Œä¸‹é¢ç›®å½•è‡ªè¡Œæ›¿æ¢</p>
<p>è®¡ç®—æœº(å³é”®)-å±æ€§-é«˜çº§ç³»ç»Ÿè®¾ç½®-ç¯å¢ƒå˜é‡</p>
<p>æ–°å»ºç³»ç»Ÿå˜é‡ <strong> MAVEN_HOME </strong><br>å˜é‡å€¼ï¼š<strong> G:\Maven </strong></p>
<p>ç¼–è¾‘ç³»ç»Ÿå˜é‡ <strong> Path </strong><br>æ·»åŠ å˜é‡å€¼ï¼š <strong> G:\Maven\bin </strong></p>
<h2 id="æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸ"><a href="#æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸ" class="headerlink" title="æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸ"></a>æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸ</h2><p>git-bashæˆ–è€…å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼Œè¾“å…¥<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mvn --version</span><br><span class="line">Apache Maven 3.5.4 (1edded0938998edf8bf061f1ceb3cfdeccf443fe; 2018-06-18T02:33:14+08:00)</span><br><span class="line">Maven home: G:\Maven</span><br><span class="line">Java version: 1.8.0_131, vendor: Oracle Corporation, runtime: G:\Java\jre</span><br><span class="line">Default locale: zh_CN, platform encoding: GBK</span><br><span class="line">OS name: <span class="string">"windows 10"</span>, version: <span class="string">"10.0"</span>, arch: <span class="string">"amd64"</span>, family: <span class="string">"windows"</span></span><br></pre></td></tr></table></figure></p>
<p>å‡ºç°ç±»ä¼¼å³å¯ã€‚</p>
<h1 id="Mavené…ç½®"><a href="#Mavené…ç½®" class="headerlink" title="Mavené…ç½®"></a>Mavené…ç½®</h1><h2 id="ä¿®æ”¹æœ¬åœ°ä»“åº“åœ°å€"><a href="#ä¿®æ”¹æœ¬åœ°ä»“åº“åœ°å€" class="headerlink" title="ä¿®æ”¹æœ¬åœ°ä»“åº“åœ°å€"></a>ä¿®æ”¹æœ¬åœ°ä»“åº“åœ°å€</h2><p>Mavenç¼ºçœçš„æœ¬åœ°ä»“åº“è·¯å¾„ <code>ç”¨æˆ·ç›®å½•/.m2/repository</code></p>
<p>æ‰“å¼€mavenå®‰è£…ç›®å½•ä¸‹çš„confç›®å½•ä¸­çš„ <code>settings.xml</code> æ–‡ä»¶</p>
<p>æœç´¢ <code>localRepository</code><br><img src="localrepo.png" alt><br>å–æ¶ˆæ³¨é‡Šï¼Œä¿®æ”¹æˆæƒ³è¦å­˜æ”¾çš„è·¯å¾„ä¿å­˜å³å¯ï¼Œå¦‚å›¾æ‰€ç¤º<br><img src="localrepo_later.png" alt></p>
<h3 id="IDEAé…ç½®"><a href="#IDEAé…ç½®" class="headerlink" title="IDEAé…ç½®"></a>IDEAé…ç½®</h3><p><img src="idea_localrepo_setting.png" alt></p>
<h3 id="Eclipseé…ç½®"><a href="#Eclipseé…ç½®" class="headerlink" title="Eclipseé…ç½®"></a>Eclipseé…ç½®</h3><p><img src="eclipse_localrepo_setting.png" alt></p>
]]></content>
      <categories>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>ç¯å¢ƒæ­å»º</tag>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¶æ„å‚è€ƒ</title>
    <url>/2018/09/22/%E6%9E%B6%E6%9E%84%E5%8F%82%E8%80%83/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ¶æ„å‚è€ƒï¼ŒåŸæ–‡æ¥è‡ª(<a href="https://blog.52itstyle.com/architecture.html" target="_blank" rel="noopener">https://blog.52itstyle.com/architecture.html</a>)</p>
<a id="more"></a>
<h1 id="æŠ€æœ¯é€‰å‹"><a href="#æŠ€æœ¯é€‰å‹" class="headerlink" title="æŠ€æœ¯é€‰å‹"></a>æŠ€æœ¯é€‰å‹</h1><p>ç½‘å…³ï¼šNginxã€Kongã€Zuul<br>ç¼“å­˜ï¼šRedisã€MemCachedã€OsCacheã€EhCache<br>æœç´¢ï¼šElasticSearchã€Solr<br>ç†”æ–­ï¼šHystrix</p>
<p>è´Ÿè½½å‡è¡¡ï¼šDNSã€F5ã€LVSã€Nginxã€OpenRestyã€HAproxy<br>æ³¨å†Œä¸­å¿ƒï¼šEurekaã€Zookeeperã€Redisã€Etcdã€Consul<br>è®¤è¯é‰´æƒï¼šJWT<br>æ¶ˆè´¹é˜Ÿåˆ—ï¼šRabbitMQã€ZeroMQã€Redisã€ActiveMQã€Kafka</p>
<p>æ—¥å¿—æ”¶é›†ï¼šELKã€Redis<br>ç³»ç»Ÿç›‘æ§ï¼šGPEã€PinPointã€Zipkin<br>æ–‡ä»¶ç³»ç»Ÿï¼šOSSã€NFSã€FastDFSã€MogileFS<br>RPCæ¡†æ¶ï¼š Dubboã€Motanã€Thriftã€grpc</p>
<p>æ„å»ºå·¥å…·ï¼šMavenã€Gradle<br>é›†æˆéƒ¨ç½²ï¼šDockerã€Jenkinsã€Gitã€Maven</p>
<p>æ•°æ®åº“ï¼šMySqlã€Redisã€MongoDBã€PostgreSQLã€Memcacheã€HBase<br>ç½‘ç»œï¼šä¸“ç”¨ç½‘ç»œVPCã€å¼¹æ€§å…¬ç½‘IPã€CDN<br>æ•°æ®åº“ä¸­é—´ä»¶ï¼šDRDS ï¼ˆé˜¿é‡Œäº‘ï¼‰ã€Mycatã€360 Atlasã€Cobar (ä¸ç»´æŠ¤äº†)<br>åˆ†å¸ƒå¼æ¡†æ¶ï¼šDubboã€Motanã€Spring-Could</p>
<h1 id="æ¶æ„å¿…å¤‡"><a href="#æ¶æ„å¿…å¤‡" class="headerlink" title="æ¶æ„å¿…å¤‡"></a>æ¶æ„å¿…å¤‡</h1><p>è´Ÿè½½å‡è¡¡ï¼ˆè´Ÿè½½å‡è¡¡ç®—æ³•ï¼‰<br>åå‘ä»£ç†<br>æœåŠ¡éš”ç¦»<br>æœåŠ¡é™æµ<br>æœåŠ¡é™çº§ï¼ˆè‡ªåŠ¨ä¼˜é›…é™çº§ï¼‰<br>å¤±æ•ˆè½¬ç§»<br>è¶…æ—¶é‡è¯•ï¼ˆä»£ç†è¶…æ—¶ã€å®¹å™¨è¶…æ—¶ã€å‰ç«¯è¶…æ—¶ã€ä¸­é—´ä»¶è¶…æ—¶ã€æ•°æ®åº“è¶…æ—¶ã€NoSqlè¶…æ—¶ï¼‰<br>å›æ»šæœºåˆ¶ï¼ˆä¸Šçº¿å›æ»šã€æ•°æ®åº“ç‰ˆæœ¬å›æ»šã€äº‹åŠ¡å›æ»šï¼‰</p>
<h1 id="é«˜å¹¶å‘"><a href="#é«˜å¹¶å‘" class="headerlink" title="é«˜å¹¶å‘"></a>é«˜å¹¶å‘</h1><p>åº”ç”¨ç¼“å­˜<br>HTTPç¼“å­˜<br>å¤šçº§ç¼“å­˜<br>åˆ†å¸ƒå¼ç¼“å­˜<br>è¿æ¥æ± <br>å¼‚æ­¥å¹¶å‘</p>
<h1 id="åˆ†å¸ƒå¼äº‹åŠ¡"><a href="#åˆ†å¸ƒå¼äº‹åŠ¡" class="headerlink" title="åˆ†å¸ƒå¼äº‹åŠ¡"></a>åˆ†å¸ƒå¼äº‹åŠ¡</h1><p>äºŒé˜¶æ®µæäº¤(å¼ºä¸€è‡´)<br>ä¸‰é˜¶æ®µæäº¤(å¼ºä¸€è‡´)<br>æ¶ˆæ¯ä¸­é—´ä»¶(æœ€ç»ˆä¸€è‡´æ€§)ï¼Œæ¨èé˜¿é‡Œçš„RocketMQ</p>
<h1 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h1><p>ä»»åŠ¡é˜Ÿåˆ—<br>æ¶ˆæ¯é˜Ÿåˆ—<br>è¯·æ±‚é˜Ÿåˆ—</p>
<h1 id="æ‰©å®¹"><a href="#æ‰©å®¹" class="headerlink" title="æ‰©å®¹"></a>æ‰©å®¹</h1><p>å•ä½“å‚ç›´æ‰©å®¹<br>å•ä½“æ°´å¹³æ‰©å®¹<br>åº”ç”¨æ‹†åˆ†<br>æ•°æ®åº“æ‹†åˆ†<br>æ•°æ®åº“åˆ†åº“åˆ†è¡¨<br>æ•°æ®å¼‚æ„<br>åˆ†å¸ƒå¼ä»»åŠ¡</p>
<h1 id="ç½‘ç»œå®‰å…¨"><a href="#ç½‘ç»œå®‰å…¨" class="headerlink" title="ç½‘ç»œå®‰å…¨"></a>ç½‘ç»œå®‰å…¨</h1><p>SQLæ³¨å…¥<br>XSSæ”»å‡»<br>CSRFæ”»å‡»<br>æ‹’ç»æœåŠ¡ï¼ˆDoSï¼ŒDenialã€€ofã€€Serviceï¼‰æ”»å‡»</p>
]]></content>
      <categories>
        <category>æ¶æ„ä¹‹è·¯</category>
      </categories>
  </entry>
  <entry>
    <title>å¼€æºåè®®ä»‹ç»</title>
    <url>/2018/09/22/%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸€äº›å¼€æºåè®®çš„ä»‹ç»ï¼Œè€ƒå¤ã€‚<br>åˆ†åˆ«æ˜¯MIT,Apache,LGPL,GPL,BSD,MPL</p>
<a id="more"></a>
<p>ç°ä»Šå­˜åœ¨çš„å¼€æºåè®®å¾ˆå¤šï¼Œè€Œç»è¿‡Open Source Initiativeç»„ç»‡é€šè¿‡æ‰¹å‡†çš„å¼€æºåè®®ç›®å‰æœ‰58ç§ï¼ˆ<a href="http://www.opensource.org/licenses" target="_blank" rel="noopener">http://www.opensource.org/licenses</a> /alphabeticalï¼‰ã€‚</p>
<h1 id="Apache-Licene-2-0"><a href="#Apache-Licene-2-0" class="headerlink" title="Apache Licene 2.0"></a>Apache Licene 2.0</h1><p>Apache Licenceæ˜¯è‘—åçš„éç›ˆåˆ©å¼€æºç»„ç»‡Apacheé‡‡ç”¨çš„åè®®ã€‚è¯¥åè®®å’ŒBSDç±»ä¼¼ï¼ŒåŒæ ·é¼“åŠ±ä»£ç å…±äº«å’Œå°Šé‡åŸä½œè€…çš„è‘—ä½œæƒï¼ŒåŒæ ·å…è®¸ä»£ç ä¿®æ”¹ï¼Œå†å‘å¸ƒï¼ˆä½œä¸ºå¼€æºæˆ–å•†ä¸šè½¯ä»¶ï¼‰ã€‚éœ€è¦æ»¡è¶³çš„æ¡ä»¶ä¹Ÿå’ŒBSDç±»ä¼¼ï¼š</p>
<ul>
<li>éœ€è¦ç»™ä»£ç çš„ç”¨æˆ·ä¸€ä»½Apache Licence</li>
<li>å¦‚æœä½ ä¿®æ”¹äº†ä»£ç ï¼Œéœ€è¦åœ¨è¢«ä¿®æ”¹çš„æ–‡ä»¶ä¸­è¯´æ˜ã€‚</li>
<li>åœ¨å»¶ä¼¸çš„ä»£ç ä¸­ï¼ˆä¿®æ”¹å’Œæœ‰æºä»£ç è¡ç”Ÿçš„ä»£ç ä¸­ï¼‰éœ€è¦å¸¦æœ‰åŸæ¥ä»£ç ä¸­çš„åè®®ï¼Œå•†æ ‡ï¼Œä¸“åˆ©å£°æ˜å’Œå…¶ä»–åŸæ¥ä½œè€…è§„å®šéœ€è¦åŒ…å«çš„è¯´æ˜ã€‚</li>
<li>å¦‚æœå†å‘å¸ƒçš„äº§å“ä¸­åŒ…å«ä¸€ä¸ªNoticeæ–‡ä»¶ï¼Œåˆ™åœ¨Noticeæ–‡ä»¶ä¸­éœ€è¦å¸¦æœ‰Apache Licenceã€‚ä½ å¯ä»¥åœ¨Noticeä¸­å¢åŠ è‡ªå·±çš„è®¸å¯ï¼Œä½†ä¸å¯ä»¥è¡¨ç°ä¸ºå¯¹Apache Licenceæ„æˆæ›´æ”¹ã€‚</li>
</ul>
<p>Apache Licenceä¹Ÿæ˜¯å¯¹å•†ä¸šåº”ç”¨å‹å¥½çš„è®¸å¯ã€‚ä½¿ç”¨è€…ä¹Ÿå¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™ä¿®æ”¹ä»£ç æ¥æ»¡è¶³éœ€è¦å¹¶ä½œä¸ºå¼€æºæˆ–å•†ä¸šäº§å“å‘å¸ƒ/é”€å”®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Apache Licenceæ˜¯è‘—åçš„éç›ˆåˆ©å¼€æºç»„ç»‡Apacheé‡‡ç”¨çš„åè®®ã€‚è¯¥åè®®å’ŒBSDç±»ä¼¼ï¼ŒåŒæ ·é¼“åŠ±ä»£ç å…±äº«å’Œå°Šé‡åŸä½œè€…çš„è‘—ä½œæƒï¼ŒåŒæ ·å…è®¸ä»£ç ä¿®æ”¹ï¼Œå†å‘å¸ƒï¼ˆä½œä¸ºå¼€æºæˆ–å•†ä¸šè½¯ä»¶ï¼‰ã€‚éœ€è¦æ»¡è¶³çš„æ¡ä»¶ä¹Ÿå’ŒBSDç±»ä¼¼ï¼š </span><br><span class="line">    ï¼ˆ1ï¼‰éœ€è¦ç»™ä»£ç çš„ç”¨æˆ·ä¸€ä»½Apache Licence </span><br><span class="line">    ï¼ˆ2ï¼‰å¦‚æœä½ ä¿®æ”¹äº†ä»£ç ï¼Œéœ€è¦å†è¢«ä¿®æ”¹çš„æ–‡ä»¶ä¸­è¯´æ˜ã€‚ </span><br><span class="line">    ï¼ˆ3ï¼‰åœ¨å»¶ä¼¸çš„ä»£ç ä¸­ï¼ˆä¿®æ”¹å’Œæœ‰æºä»£ç è¡ç”Ÿçš„ä»£ç ä¸­ï¼‰éœ€è¦å¸¦æœ‰åŸæ¥ä»£ç ä¸­çš„åè®®ï¼Œå•†æ ‡ï¼Œä¸“åˆ©å£°æ˜å’Œå…¶ä»–åŸæ¥ä½œè€…è§„å®šéœ€è¦åŒ…å«çš„è¯´æ˜ã€‚ </span><br><span class="line">    ï¼ˆ4ï¼‰å¦‚æœå†å‘å¸ƒçš„äº§å“ä¸­åŒ…å«ä¸€ä¸ªNoticeæ–‡ä»¶ï¼Œåˆ™åœ¨Noticeæ–‡ä»¶ä¸­éœ€è¦å¸¦æœ‰Apache Licenceã€‚ä½ å¯ä»¥åœ¨Noticeä¸­å¢åŠ è‡ªå·±çš„è®¸å¯ï¼Œä½†ä¸å¯ä»¥è¡¨ç°ä¸ºå¯¹Apache Licenceæ„æˆæ›´æ”¹ã€‚ </span><br><span class="line">    Apache Licenceä¹Ÿæ˜¯å¯¹å•†ä¸šåº”ç”¨å‹å¥½çš„è®¸å¯ã€‚ä½¿ç”¨è€…ä¹Ÿå¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™ä¿®æ”¹ä»£ç æ¥æ»¡è¶³éœ€è¦å¹¶ä½œä¸ºå¼€æºæˆ–å•†ä¸šäº§å“å‘å¸ƒ/é”€å”®ã€‚ </span><br><span class="line">    Apache Licence 2.0ç‰ˆæœ¬æˆäºˆäº†ç”¨æˆ·å¤§é‡çš„æƒåˆ©ã€‚è¿™äº›æƒåˆ©å¯ä»¥åº”ç”¨äºæ‹·è´æƒï¼Œä¹Ÿå¯ä»¥ç”¨äºä¸“åˆ©æƒã€‚å› ä¸ºå¾ˆå¤šè®¸å¯åè®®åªèƒ½é€‚ç”¨äºæ‹·è´æƒï¼Œä¸é€‚ç”¨äºä¸“åˆ©æƒï¼Œæ‰€ä»¥è¿™ä¸ªçµæ´»æ€§å°±æˆäº†è®©æƒ³æœ‰ä¸“åˆ©çš„å¼€å‘è€…ä»¬é€‰æ‹©è®¸å¯åè®®æ—¶çš„ä¸€ä¸ªæ˜¾è‘—å‚è€ƒå› ç´ ã€‚ </span><br><span class="line">    ä¸‹é¢æ˜¯å…³äºApacheè®¸å¯åè®®æ‰€å…è®¸çš„äº‹é¡¹çš„è¯¦ç»†è¯´æ˜ï¼š </span><br><span class="line">    ï¼ˆ1ï¼‰æƒåˆ©æ°¸æ’ã€‚ä¸€æ—¦è¢«æˆæƒï¼Œæƒåˆ©æ°¸ä¹…ä¸å¤±ã€‚ </span><br><span class="line">    ï¼ˆ2ï¼‰æƒåˆ©æ— ç–†ç•Œã€‚åœ¨ä¸€ä¸ªå›½å®¶é‡Œè¢«æˆæƒï¼Œå½¢åŒäºåœ¨æ‰€æœ‰å›½å®¶è¢«æˆæƒã€‚ä¾‹å¦‚ï¼Œä½ åœ¨ç¾å›½ï¼Œä½†è®¸å¯æƒæœ€åˆåœ¨å°åº¦è¢«æˆäºˆï¼Œä½ åŒæ ·å¯ä»¥ä½¿ç”¨è¿™ä¸ªè¢«æˆæƒçš„ç¨‹åºã€‚ </span><br><span class="line">    ï¼ˆ3ï¼‰æˆæƒæ— éœ€ä»˜è´¹å’Œæ”¯ä»˜é…¬åŠ³ã€‚ä½ æ—¢ä¸éœ€è¦åœ¨ä½¿ç”¨ä¹‹å‰æ”¯ä»˜ä»»ä½•çš„è´¹ç”¨ï¼Œä¹Ÿæ— éœ€åœ¨æ¯æ¬¡ä½¿ç”¨æ—¶æ”¯ä»˜ä»»ä½•çš„è´¹ç”¨ï¼Œæˆ–è€…å…¶å®ƒç±»ä¼¼æƒ…å†µã€‚ </span><br><span class="line">    ï¼ˆ4ï¼‰æƒåˆ©ä¸æ’ä»–ã€‚ä½¿ç”¨è¿™ç§è®¸å¯åè®®ä¸‹çš„è½¯ä»¶æ—¶ï¼Œä¸å¦¨ç¢ä½ ä½¿ç”¨å…¶å®ƒè½¯ä»¶ã€‚ </span><br><span class="line">    ï¼ˆ5ï¼‰æƒåˆ©ä¸å¯å˜æ›´ã€‚ æƒåˆ©ä¸€æ—¦æˆäºˆï¼Œä¸å¯å‰¥å¤ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ åœ¨ä½¿ç”¨è¿™ä¸ªè½¯ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œä½ æ— éœ€æ‹…å¿ƒè¿™ç§æƒ…å†µï¼šå½“ä½ å¼€å‘å‡ºäº†ä»¤äººç¾¡æ…•çš„åŸºäºè¿™ç§æˆæƒè½¯ä»¶çš„è¡ç”Ÿäº§å“æ—¶ï¼Œæœ‰äººçªç„¶è·³å‡ºæ¥å¯¹ä½ è¯´ï¼Œâ€œæŠ±æ­‰ï¼Œä½ å°†ä¸å†è¢«å…è®¸ä½¿ç”¨è¿™ä¸ªç¨‹åºã€‚â€ï¼ˆåœ¨è¿™ä¸ªåè®®é‡Œæœ‰ä¸ªæ¡æ¬¾å£°æ˜ï¼šå¦‚æœä½ æ§å‘Šåˆ«äººåœ¨è¿™ä¸ªè®¸å¯åè®®ä¸‹çš„äº§å“æœ‰ä¾µçŠ¯ä¸“åˆ©çš„è¡Œä¸ºï¼Œé‚£ä½ çš„æˆæƒå°†ä¼šè‡ªåŠ¨ç»ˆæ­¢ï¼Œä½†è¿™åªæ˜¯é€‚ç”¨äºæœ‰ä¸“åˆ©æƒçš„ä½œå“ã€‚åªè¦ä½ ä¸ææœ‰ä¸“åˆ©ä½œå“çš„è¯‰è®¼ï¼Œä½ æ°¸è¿œæ— éœ€æ‹…å¿ƒè¿™ç§é—®é¢˜ã€‚ï¼‰</span><br></pre></td></tr></table></figure>
<p>è‹±æ–‡åŸæ–‡ï¼š<a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener">http://www.apache.org/licenses/LICENSE-2.0.html</a></p>
<h1 id="MPL-Mozilla-Public-License"><a href="#MPL-Mozilla-Public-License" class="headerlink" title="MPL (Mozilla Public License)"></a>MPL (Mozilla Public License)</h1><p>MPLæ˜¯The Mozilla Public Licenseçš„ç®€å†™ï¼Œæ˜¯1998å¹´åˆNetscapeçš„ Mozillaå°ç»„ä¸ºå…¶å¼€æºè½¯ä»¶é¡¹ç›®è®¾è®¡çš„è½¯ä»¶è®¸å¯è¯ã€‚MPLè®¸å¯è¯å‡ºç°çš„æœ€é‡è¦åŸå› å°±æ˜¯ï¼ŒNetscapeå…¬å¸è®¤ä¸ºGPLè®¸å¯è¯æ²¡æœ‰å¾ˆå¥½åœ°å¹³è¡¡å¼€å‘è€…å¯¹ æºä»£ç çš„éœ€æ±‚å’Œä»–ä»¬åˆ©ç”¨æºä»£ç è·å¾—çš„åˆ©ç›Šã€‚åŒè‘—åçš„GPLè®¸å¯è¯å’ŒBSDè®¸å¯è¯ç›¸æ¯”ï¼ŒMPLåœ¨è®¸å¤šæƒåˆ©ä¸ä¹‰åŠ¡çš„çº¦å®šæ–¹é¢ä¸å®ƒä»¬ç›¸åŒï¼ˆå› ä¸ºéƒ½æ˜¯ç¬¦åˆOSIA è®¤å®šçš„å¼€æºè½¯ä»¶è®¸å¯è¯ï¼‰ã€‚ä½†æ˜¯ï¼Œç›¸æ¯”è€Œè¨€MPLè¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªæ˜¾è‘—çš„ä¸åŒä¹‹å¤„:</p>
<ul>
<li>MPLè™½ç„¶è¦æ±‚å¯¹äºç»MPLè®¸å¯è¯å‘å¸ƒçš„æºä»£ç çš„ä¿®æ”¹ä¹Ÿè¦ä»¥MPLè®¸å¯è¯çš„æ–¹å¼å†è®¸å¯å‡ºæ¥ï¼Œä»¥ä¿è¯å…¶ä»–äººå¯ä»¥åœ¨MPLçš„æ¡æ¬¾ä¸‹å…±äº«æºä»£ç ã€‚ä½†æ˜¯ï¼Œåœ¨MPL è®¸å¯è¯ä¸­å¯¹â€œå‘å¸ƒâ€çš„å®šä¹‰æ˜¯â€œä»¥æºä»£ç æ–¹å¼å‘å¸ƒçš„æ–‡ä»¶â€ï¼Œè¿™å°±æ„å‘³ç€MPLå…è®¸ä¸€ä¸ªä¼ä¸šåœ¨è‡ªå·±å·²æœ‰çš„æºä»£ç åº“ä¸ŠåŠ ä¸€ä¸ªæ¥å£ï¼Œé™¤äº†æ¥å£ç¨‹åºçš„æºä»£ç ä»¥MPL è®¸å¯è¯çš„å½¢å¼å¯¹å¤–è®¸å¯å¤–ï¼Œæºä»£ç åº“ä¸­çš„æºä»£ç å°±å¯ä»¥ä¸ç”¨MPLè®¸å¯è¯çš„æ–¹å¼å¼ºåˆ¶å¯¹å¤–è®¸å¯ã€‚è¿™äº›ï¼Œå°±ä¸ºå€Ÿé‰´åˆ«äººçš„æºä»£ç ç”¨åšè‡ªå·±å•†ä¸šè½¯ä»¶å¼€å‘çš„è¡Œä¸ºç•™äº†ä¸€ä¸ª è±å£ã€‚ </li>
<li>MPLè®¸å¯è¯ç¬¬ä¸‰æ¡ç¬¬7æ¬¾ä¸­å…è®¸è¢«è®¸å¯äººå°†ç»è¿‡MPLè®¸å¯è¯è·å¾—çš„æºä»£ç åŒè‡ªå·±å…¶ä»–ç±»å‹çš„ä»£ç æ··åˆå¾—åˆ°è‡ªå·±çš„è½¯ä»¶ç¨‹åºã€‚ </li>
<li>å¯¹è½¯ä»¶ä¸“åˆ©çš„æ€åº¦ï¼ŒMPLè®¸å¯è¯ä¸åƒGPLè®¸å¯è¯é‚£æ ·æ˜ç¡®è¡¨ç¤ºåå¯¹è½¯ä»¶ä¸“åˆ©ï¼Œä½†æ˜¯å´æ˜ç¡®è¦æ±‚æºä»£ç çš„æä¾›è€…ä¸èƒ½æä¾›å·²ç»å—ä¸“åˆ©ä¿æŠ¤çš„æºä»£ç ï¼ˆé™¤éä»–æœ¬äººæ˜¯ ä¸“åˆ©æƒäººï¼Œå¹¶ä¹¦é¢å‘å…¬ä¼—å…è´¹è®¸å¯è¿™äº›æºä»£ç ï¼‰ï¼Œä¹Ÿä¸èƒ½åœ¨å°†è¿™äº›æºä»£ç ä»¥å¼€æ”¾æºä»£ç è®¸å¯è¯å½¢å¼è®¸å¯åå†å»ç”³è¯·ä¸è¿™äº›æºä»£ç æœ‰å…³çš„ä¸“åˆ©ã€‚ </li>
<li>å¯¹æºä»£ç çš„å®šä¹‰<br>è€Œåœ¨MPLï¼ˆ1.1ç‰ˆæœ¬ï¼‰è®¸å¯è¯ä¸­ï¼Œå¯¹æºä»£ç çš„å®šä¹‰æ˜¯:â€œæºä»£ç æŒ‡çš„æ˜¯å¯¹ä½œå“è¿›è¡Œä¿®æ”¹æœ€ä¼˜å…ˆæ‹© å–çš„å½¢å¼ï¼Œå®ƒåŒ…æ‹¬:æ‰€æœ‰æ¨¡å—çš„æ‰€æœ‰æºç¨‹åºï¼ŒåŠ ä¸Šæœ‰å…³çš„æ¥å£çš„å®šä¹‰ï¼ŒåŠ ä¸Šæ§åˆ¶å¯æ‰§è¡Œä½œå“çš„å®‰è£…å’Œç¼–è¯‘çš„â€˜åŸæœ¬â€™ï¼ˆåŸæ–‡ä¸ºâ€˜Scriptâ€™ï¼‰ï¼Œæˆ–è€…ä¸æ˜¯ä¸åˆå§‹ æºä»£ç æ˜¾è‘—ä¸åŒçš„æºä»£ç å°±æ˜¯è¢«æºä»£ç è´¡çŒ®è€…é€‰æ‹©çš„ä»å…¬å…±é¢†åŸŸå¯ä»¥å¾—åˆ°çš„ç¨‹åºä»£ç ã€‚â€ </li>
<li>MPLè®¸å¯è¯ç¬¬3æ¡æœ‰ä¸“é—¨çš„ä¸€æ¬¾æ˜¯å…³äºå¯¹æºä»£ç ä¿®æ”¹è¿›è¡Œæè¿°çš„è§„å®šï¼Œå°±æ˜¯è¦æ±‚æ‰€æœ‰å†å‘å¸ƒè€…éƒ½å¾—æœ‰ä¸€ä¸ªä¸“é—¨çš„æ–‡ä»¶å°±å¯¹æºä»£ç ç¨‹åºä¿®æ”¹çš„æ—¶é—´å’Œä¿®æ”¹çš„æ–¹å¼æœ‰æè¿°ã€‚</li>
</ul>
<p>è‹±æ–‡åŸæ–‡ï¼š<a href="http://www.mozilla.org/MPL/MPL-1.1.html" target="_blank" rel="noopener">http://www.mozilla.org/MPL/MPL-1.1.html</a></p>
<h1 id="BSD"><a href="#BSD" class="headerlink" title="BSD"></a>BSD</h1><p>BSDå¼€æºåè®®æ˜¯ä¸€ä¸ªç»™äºä½¿ç”¨è€…å¾ˆå¤§è‡ªç”±çš„åè®®ã€‚åŸºæœ¬ä¸Šä½¿ç”¨è€…å¯ä»¥â€ä¸ºæ‰€æ¬²ä¸ºâ€,å¯ä»¥è‡ªç”±çš„ä½¿ç”¨ï¼Œä¿®æ”¹æºä»£ç ï¼Œä¹Ÿå¯ä»¥å°†ä¿®æ”¹åçš„ä»£ç ä½œä¸ºå¼€æºæˆ–è€…ä¸“æœ‰è½¯ä»¶å†å‘å¸ƒã€‚</p>
<p>ä½†â€ä¸ºæ‰€æ¬²ä¸ºâ€çš„å‰æå½“ä½ å‘å¸ƒä½¿ç”¨äº†BSDåè®®çš„ä»£ç ï¼Œæˆ–åˆ™ä»¥BSDåè®®ä»£ç ä¸ºåŸºç¡€åšäºŒæ¬¡å¼€å‘è‡ªå·±çš„äº§å“æ—¶ï¼Œéœ€è¦æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<ul>
<li>å¦‚æœå†å‘å¸ƒçš„äº§å“ä¸­åŒ…å«æºä»£ç ï¼Œåˆ™åœ¨æºä»£ç ä¸­å¿…é¡»å¸¦æœ‰åŸæ¥ä»£ç ä¸­çš„BSDåè®®ã€‚</li>
<li>å¦‚æœå†å‘å¸ƒçš„åªæ˜¯äºŒè¿›åˆ¶ç±»åº“/è½¯ä»¶ï¼Œåˆ™éœ€è¦åœ¨ç±»åº“/è½¯ä»¶çš„æ–‡æ¡£å’Œç‰ˆæƒå£°æ˜ä¸­åŒ…å«åŸæ¥ä»£ç ä¸­çš„BSDåè®®ã€‚</li>
<li>ä¸å¯ä»¥ç”¨å¼€æºä»£ç çš„ä½œè€…/æœºæ„åå­—å’ŒåŸæ¥äº§å“çš„åå­—åšå¸‚åœºæ¨å¹¿ã€‚</li>
</ul>
<p>BSD ä»£ç é¼“åŠ±ä»£ç å…±äº«ï¼Œä½†éœ€è¦å°Šé‡ä»£ç ä½œè€…çš„è‘—ä½œæƒã€‚BSDç”±äºå…è®¸ä½¿ç”¨è€…ä¿®æ”¹å’Œé‡æ–°å‘å¸ƒä»£ç ï¼Œä¹Ÿå…è®¸ä½¿ç”¨æˆ–åœ¨BSDä»£ç ä¸Šå¼€å‘å•†ä¸šè½¯ä»¶å‘å¸ƒå’Œé”€å”®ï¼Œå› æ­¤æ˜¯å¯¹ å•†ä¸šé›†æˆå¾ˆå‹å¥½çš„åè®®ã€‚è€Œå¾ˆå¤šçš„å…¬å¸ä¼ä¸šåœ¨é€‰ç”¨å¼€æºäº§å“çš„æ—¶å€™éƒ½é¦–é€‰BSDåè®®ï¼Œå› ä¸ºå¯ä»¥å®Œå…¨æ§åˆ¶è¿™äº›ç¬¬ä¸‰æ–¹çš„ä»£ç ï¼Œåœ¨å¿…è¦çš„æ—¶å€™å¯ä»¥ä¿®æ”¹æˆ–è€…äºŒæ¬¡å¼€å‘ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">BSDå¼€æºåè®®æ˜¯ä¸€ä¸ªç»™äºä½¿ç”¨è€…å¾ˆå¤§è‡ªç”±çš„åè®®ã€‚åŸºæœ¬ä¸Šä½¿ç”¨è€…å¯ä»¥â€ä¸ºæ‰€æ¬²ä¸ºâ€,å¯ä»¥è‡ªç”±çš„ä½¿ç”¨ï¼Œä¿®æ”¹æºä»£ç ï¼Œä¹Ÿå¯ä»¥å°†ä¿®æ”¹åçš„ä»£ç ä½œä¸ºå¼€æºæˆ–è€…ä¸“æœ‰è½¯ä»¶å†å‘å¸ƒã€‚ä½†â€ä¸ºæ‰€æ¬²ä¸ºâ€çš„å‰æå½“ä½ å‘å¸ƒä½¿ç”¨äº†BSDåè®®çš„ä»£ç ï¼Œæˆ–åˆ™ä»¥BSDåè®®ä»£ç ä¸ºåŸºç¡€åšäºŒæ¬¡å¼€å‘è‡ªå·±çš„äº§å“æ—¶ï¼Œéœ€è¦æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼š </span><br><span class="line">    ï¼ˆ1ï¼‰å¦‚æœå†å‘å¸ƒçš„äº§å“ä¸­åŒ…å«æºä»£ç ï¼Œåˆ™åœ¨æºä»£ç ä¸­å¿…é¡»å¸¦æœ‰åŸæ¥ä»£ç ä¸­çš„BSDåè®®ã€‚ </span><br><span class="line">    ï¼ˆ2ï¼‰å¦‚æœå†å‘å¸ƒçš„åªæ˜¯äºŒè¿›åˆ¶ç±»åº“/è½¯ä»¶ï¼Œåˆ™éœ€è¦åœ¨ç±»åº“/è½¯ä»¶çš„æ–‡æ¡£å’Œç‰ˆæƒå£°æ˜ä¸­åŒ…å«åŸæ¥ä»£ç ä¸­çš„BSDåè®®ã€‚ </span><br><span class="line">    ï¼ˆ3ï¼‰ä¸å¯ä»¥ç”¨å¼€æºä»£ç çš„ä½œè€…/æœºæ„åå­—å’ŒåŸæ¥äº§å“çš„åå­—åšå¸‚åœºæ¨å¹¿ã€‚ </span><br><span class="line">    BSDä»£ç é¼“åŠ±ä»£ç å…±äº«ï¼Œä½†éœ€è¦å°Šé‡ä»£ç ä½œè€…çš„è‘—ä½œæƒã€‚BSDç”±äºå…è®¸ä½¿ç”¨è€…ä¿®æ”¹å’Œé‡æ–°å‘å¸ƒä»£ç ï¼Œä¹Ÿå…è®¸ä½¿ç”¨æˆ–åœ¨BSDä»£ç ä¸Šå¼€å‘å•†ä¸šè½¯ä»¶å‘å¸ƒå’Œé”€å”®ï¼Œå› æ­¤æ˜¯å¯¹å•†ä¸šé›†æˆå¾ˆå‹å¥½çš„åè®®ã€‚ è€Œå¾ˆå¤šçš„å…¬å¸ä¼ä¸šåœ¨é€‰ç”¨å¼€æºäº§å“çš„æ—¶å€™éƒ½é¦–é€‰BSDåè®®ï¼Œå› ä¸ºå¯ä»¥å®Œå…¨æ§åˆ¶è¿™äº›ç¬¬ä¸‰æ–¹çš„ä»£ç ï¼Œåœ¨å¿…è¦çš„æ—¶å€™å¯ä»¥ä¿®æ”¹æˆ–è€…äºŒæ¬¡å¼€å‘ã€‚ </span><br><span class="line">    æ–°BSDåè®®ï¼ˆâ€œ3æ¡æ¬¾è®¸å¯åè®®â€ï¼‰æ— ä»»ä½•é™åˆ¶çš„å…è®¸ä½ ä»¥ä»»ä½•ç›®çš„äºŒæ¬¡åˆ†å‘è¿™ç§è½¯ä»¶ï¼Œå”¯ä¸€çš„è¦æ±‚æ˜¯å¿…é¡»ä¿ç•™æ‹·è´æƒçš„å£°æ˜å’Œåè®®é‡Œçš„è½¯ä»¶æƒåˆ©æ”¾å¼ƒæ¡æ¬¾ã€‚è¿™ç§åè®®è¿˜æœ‰ä¸€ä¸ªé™åˆ¶ï¼Œæœªç»è®¸å¯ä¸å¾—ä½¿ç”¨è¿™ä¸ªä½œå“çš„æ‰€æœ‰æ›¾ç»æåŠ©è€…çš„ç½²åã€‚ æ–°BSDåè®®å’Œç®€åŒ–BSDåè®®çš„æœ€ä¸»è¦çš„åŒºåˆ«æ˜¯åè€…åˆ é™¤äº†ç½²åæ¡æ¬¾ã€‚</span><br></pre></td></tr></table></figure>
<h1 id="GPLï¼ˆGNU-General-Public-Licenseï¼‰"><a href="#GPLï¼ˆGNU-General-Public-Licenseï¼‰" class="headerlink" title="GPLï¼ˆGNU General Public Licenseï¼‰"></a>GPLï¼ˆGNU General Public Licenseï¼‰</h1><p>æˆ‘ä»¬å¾ˆç†Ÿæ‚‰çš„Linuxå°±æ˜¯é‡‡ç”¨äº†GPLã€‚GPLåè®®å’ŒBSD, Apache Licenceç­‰é¼“åŠ±ä»£ç é‡ç”¨çš„è®¸å¯å¾ˆä¸ä¸€æ ·ã€‚GPLçš„å‡ºå‘ç‚¹æ˜¯ä»£ç çš„å¼€æº/å…è´¹ä½¿ç”¨å’Œå¼•ç”¨/ä¿®æ”¹/è¡ç”Ÿä»£ç çš„å¼€æº/å…è´¹ä½¿ç”¨ï¼Œä½†ä¸å…è®¸ä¿®æ”¹åå’Œè¡ç”Ÿçš„ä»£ ç åšä¸ºé—­æºçš„å•†ä¸šè½¯ä»¶å‘å¸ƒå’Œé”€å”®ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬èƒ½ç”¨å…è´¹çš„å„ç§linuxï¼ŒåŒ…æ‹¬å•†ä¸šå…¬å¸çš„linuxå’Œlinuxä¸Šå„ç§å„æ ·çš„ç”±ä¸ªäººï¼Œç»„ç»‡ï¼Œä»¥åŠå•† ä¸šè½¯ä»¶å…¬å¸å¼€å‘çš„å…è´¹è½¯ä»¶äº†ã€‚</p>
<p>GPLåè®®çš„ä¸»è¦å†…å®¹æ˜¯åªè¦åœ¨ä¸€ä¸ªè½¯ä»¶ä¸­ä½¿ç”¨(â€ä½¿ç”¨â€æŒ‡ç±»åº“å¼•ç”¨ï¼Œä¿®æ”¹åçš„ä»£ç æˆ–è€…è¡ç”Ÿä»£ç )GPL åè®®çš„äº§å“ï¼Œåˆ™è¯¥è½¯ä»¶äº§å“å¿…é¡»ä¹Ÿé‡‡ç”¨GPLåè®®ï¼Œæ—¢å¿…é¡»ä¹Ÿæ˜¯å¼€æºå’Œå…è´¹ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€ä¼ æŸ“æ€§â€ã€‚GPLåè®®çš„äº§å“ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„äº§å“ä½¿ç”¨æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œ è¿˜å¯ä»¥äº«å—å…è´¹çš„ä¼˜åŠ¿ã€‚</p>
<p>ç”±äºGPLä¸¥æ ¼è¦æ±‚ä½¿ç”¨äº†GPLç±»åº“çš„è½¯ä»¶äº§å“å¿…é¡»ä½¿ç”¨GPLåè®®ï¼Œå¯¹äºä½¿ç”¨GPLåè®®çš„å¼€æºä»£ç ï¼Œå•†ä¸šè½¯ä»¶æˆ–è€…å¯¹ä»£ç æœ‰ä¿å¯†è¦æ±‚çš„éƒ¨é—¨å°±ä¸é€‚åˆé›†æˆ/é‡‡ç”¨ä½œä¸ºç±»åº“å’ŒäºŒæ¬¡å¼€å‘çš„åŸºç¡€ã€‚</p>
<p>å…¶å®ƒç»†èŠ‚å¦‚å†å‘å¸ƒçš„æ—¶å€™éœ€è¦ä¼´éšGPLåè®®ç­‰å’ŒBSD/Apacheç­‰ç±»ä¼¼ã€‚</p>
<h1 id="GPL-V2-ã€-V3"><a href="#GPL-V2-ã€-V3" class="headerlink" title="GPLã€€V2 ã€ V3"></a>GPLã€€V2 ã€ V3</h1><p>GPLåŒå…¶å®ƒçš„è‡ªç”±è½¯ä»¶è®¸å¯è¯ä¸€æ ·ï¼Œè®¸å¯ç¤¾ä¼šå…¬ä¼—äº«æœ‰ï¼šè¿è¡Œã€å¤åˆ¶è½¯ä»¶çš„è‡ªç”±ï¼Œå‘è¡Œä¼ æ’­è½¯ä»¶çš„è‡ªç”±ï¼Œè·å¾—è½¯ä»¶æºç çš„è‡ªç”±ï¼Œæ”¹è¿›è½¯ä»¶å¹¶å°†è‡ªå·±ä½œå‡ºçš„æ”¹è¿›ç‰ˆæœ¬å‘ç¤¾ä¼šå‘è¡Œä¼ æ’­çš„è‡ªç”±ã€‚<br>GPLè¿˜è§„å®šï¼šåªè¦è¿™ç§ä¿®æ”¹æ–‡æœ¬åœ¨æ•´ä½“ä¸Šæˆ–è€…å…¶æŸä¸ªéƒ¨åˆ†æ¥æºäºéµå¾ªGPLçš„ç¨‹åºï¼Œè¯¥ä¿®æ”¹æ–‡æœ¬çš„ æ•´ä½“å°±å¿…é¡»æŒ‰ç…§GPLæµé€šï¼Œä¸ä»…è¯¥ä¿®æ”¹æ–‡æœ¬çš„æºç å¿…é¡»å‘ç¤¾ä¼šå…¬å¼€ï¼Œè€Œä¸”å¯¹äºè¿™ç§ä¿®æ”¹æ–‡æœ¬çš„æµé€šä¸å‡†è®¸é™„åŠ ä¿®æ”¹è€…è‡ªå·±ä½œå‡ºçš„é™åˆ¶ã€‚å› æ­¤ï¼Œä¸€é¡¹éµå¾ªGPLæµé€š çš„ç¨‹åºä¸èƒ½åŒéè‡ªç”±çš„è½¯ä»¶åˆå¹¶ã€‚GPLæ‰€è¡¨è¾¾çš„è¿™ç§æµé€šè§„åˆ™ç§°ä¸ºcopyleftï¼Œè¡¨ç¤ºä¸copyright(ç‰ˆæƒ)çš„æ¦‚å¿µâ€œç›¸å·¦â€ã€‚</p>
<p>GPLåè®®æœ€ä¸»è¦çš„å‡ ä¸ªåŸåˆ™ï¼š</p>
<ul>
<li><p>ç¡®ä¿è½¯ä»¶è‡ªå§‹è‡³ç»ˆéƒ½ä»¥å¼€æ”¾æºä»£ç å½¢å¼å‘å¸ƒï¼Œä¿æŠ¤å¼€å‘æˆæœä¸è¢«çªƒå–ç”¨ä½œå•†ä¸šå‘å”®ã€‚ä»»ä½•ä¸€å¥—è½¯ ä»¶ï¼Œåªè¦å…¶ä¸­ä½¿ç”¨äº†å— GPL åè®®ä¿æŠ¤çš„ç¬¬ä¸‰æ–¹è½¯ä»¶çš„æºç¨‹åºï¼Œå¹¶å‘éå¼€å‘äººå‘˜å‘å¸ƒæ—¶ï¼Œè½¯ä»¶æœ¬èº«ä¹Ÿå°±è‡ªåŠ¨æˆä¸ºå— GPL ä¿æŠ¤å¹¶ä¸”çº¦æŸçš„å®ä½“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤æ—¶å®ƒå¿…é¡»å¼€æ”¾æºä»£ç ã€‚</p>
</li>
<li><p>GPL å¤§è‡´å°±æ˜¯ä¸€ä¸ªå·¦ä¾§ç‰ˆæƒï¼ˆCopyleftï¼Œæˆ–è¯‘ä¸ºâ€œåç‰ˆæƒâ€ã€â€œç‰ˆæƒå±å·¦â€ã€â€œç‰ˆæƒæ‰€æ— â€ã€â€œç‰ˆè´£â€ç­‰ï¼‰çš„ä½“ç°ã€‚ä½ å¯ä»¥å»æ‰æ‰€æœ‰åŸä½œçš„ç‰ˆæƒ ä¿¡æ¯ï¼Œåªè¦ä½ ä¿æŒå¼€æºï¼Œå¹¶ä¸”éšæºä»£ç ã€äºŒè¿›åˆ¶ç‰ˆé™„ä¸Š GPL çš„è®¸å¯è¯å°±è¡Œï¼Œè®©åäººå¯ä»¥å¾ˆæ˜ç¡®åœ°å¾—çŸ¥æ­¤è½¯ä»¶çš„æˆæƒä¿¡æ¯ã€‚GPL ç²¾é«“å°±æ˜¯ï¼Œåªè¦ä½¿è½¯ä»¶åœ¨å®Œæ•´å¼€æº çš„æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½ä½¿ä½¿ç”¨è€…å¾—åˆ°è‡ªç”±å‘æŒ¥çš„ç©ºé—´ï¼Œä½¿è½¯ä»¶å¾—åˆ°æ›´å¿«æ›´å¥½çš„å‘å±•ã€‚</p>
</li>
<li><p>æ— è®ºè½¯ä»¶ä»¥ä½•ç§å½¢å¼å‘å¸ƒï¼Œéƒ½å¿…é¡»åŒæ—¶é™„ä¸Šæºä»£ç ã€‚ä¾‹å¦‚åœ¨ Web ä¸Šæä¾›ä¸‹è½½ï¼Œå°±å¿…é¡»åœ¨äºŒè¿›åˆ¶ç‰ˆæœ¬ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ä¸‹è½½çš„åŒä¸€ä¸ªé¡µé¢ï¼Œæ¸…æ¥šåœ°æä¾›æºä»£ç ä¸‹è½½çš„é“¾æ¥ã€‚å¦‚æœä»¥å…‰ç›˜å½¢å¼å‘å¸ƒï¼Œå°±å¿…é¡»åŒæ—¶é™„ä¸Šæºæ–‡ä»¶çš„å…‰ç›˜ã€‚</p>
</li>
<li><p>å¼€å‘æˆ–ç»´æŠ¤éµå¾ª GPL åè®®å¼€å‘çš„è½¯ä»¶çš„å…¬å¸æˆ–ä¸ªäººï¼Œå¯ä»¥å¯¹ä½¿ç”¨è€…æ”¶å–ä¸€å®šçš„æœåŠ¡è´¹ç”¨ã€‚ä½†è¿˜æ˜¯ä¸€å¥è€è¯â€”â€”å¿…é¡»æ— å¿æä¾›è½¯ä»¶çš„å®Œæ•´æºä»£ç ï¼Œä¸å¾—å°†æºä»£ç ä¸æœåŠ¡åšæ†ç»‘æˆ–ä»»ä½•å˜ç›¸æ†ç»‘é”€å”®ã€‚</p>
</li>
</ul>
<h1 id="LGPLï¼ˆGNU-Lesser-General-Public-Licenseï¼‰"><a href="#LGPLï¼ˆGNU-Lesser-General-Public-Licenseï¼‰" class="headerlink" title="LGPLï¼ˆGNU Lesser General Public Licenseï¼‰"></a>LGPLï¼ˆGNU Lesser General Public Licenseï¼‰</h1><p>LGPLæ˜¯GPLçš„ä¸€ä¸ªä¸ºä¸»è¦ä¸ºç±»åº“ä½¿ç”¨è®¾è®¡çš„å¼€æºåè®®ã€‚å’ŒGPLè¦æ±‚ä»»ä½•ä½¿ç”¨/ä¿®æ”¹/è¡ç”Ÿä¹‹GPLç±»åº“çš„çš„è½¯ä»¶å¿…é¡»é‡‡ç”¨GPLåè®®ä¸åŒã€‚ LGPL å…è®¸å•†ä¸šè½¯ä»¶é€šè¿‡ç±»åº“å¼•ç”¨(link)æ–¹å¼ä½¿ç”¨LGPLç±»åº“è€Œä¸éœ€è¦å¼€æºå•†ä¸šè½¯ä»¶çš„ä»£ç ã€‚è¿™ä½¿å¾—é‡‡ç”¨LGPLåè®®çš„å¼€æºä»£ç å¯ä»¥è¢«å•†ä¸šè½¯ä»¶ä½œä¸ºç±»åº“å¼•ç”¨å¹¶ å‘å¸ƒå’Œé”€å”®ã€‚</p>
<p>ä½†æ˜¯å¦‚æœä¿®æ”¹LGPLåè®®çš„ä»£ç æˆ–è€…è¡ç”Ÿï¼Œåˆ™æ‰€æœ‰ä¿®æ”¹çš„ä»£ç ï¼Œæ¶‰åŠä¿®æ”¹éƒ¨åˆ†çš„é¢å¤–ä»£ç å’Œè¡ç”Ÿçš„ä»£ç éƒ½å¿…é¡»é‡‡ç”¨LGPLåè®®ã€‚å› æ­¤LGPLåè®®çš„å¼€æº ä»£ç å¾ˆé€‚åˆä½œä¸ºç¬¬ä¸‰æ–¹ç±»åº“è¢«å•†ä¸šè½¯ä»¶å¼•ç”¨ï¼Œä½†ä¸é€‚åˆå¸Œæœ›ä»¥LGPLåè®®ä»£ç ä¸ºåŸºç¡€ï¼Œé€šè¿‡ä¿®æ”¹å’Œè¡ç”Ÿçš„æ–¹å¼åšäºŒæ¬¡å¼€å‘çš„å•†ä¸šè½¯ä»¶é‡‡ç”¨ã€‚</p>
<p>GPL/LGPLéƒ½ä¿éšœåŸä½œè€…çš„çŸ¥è¯†äº§æƒï¼Œé¿å…æœ‰äººåˆ©ç”¨å¼€æºä»£ç å¤åˆ¶å¹¶å¼€å‘ç±»ä¼¼çš„äº§å“</p>
<h1 id="MIT"><a href="#MIT" class="headerlink" title="MIT"></a>MIT</h1><p>MITæ˜¯å’ŒBSDä¸€æ ·å®½èŒƒçš„è®¸å¯åè®®,ä½œè€…åªæƒ³ä¿ç•™ç‰ˆæƒ,è€Œæ— ä»»ä½•å…¶ä»–äº†é™åˆ¶.ä¹Ÿå°±æ˜¯è¯´,ä½ å¿…é¡»åœ¨ä½ çš„å‘è¡Œç‰ˆé‡ŒåŒ…å«åŸè®¸å¯åè®®çš„å£°æ˜,æ— è®ºä½ æ˜¯ä»¥äºŒè¿›åˆ¶å‘å¸ƒçš„è¿˜æ˜¯ä»¥æºä»£ç å‘å¸ƒçš„ã€‚</p>
<h1 id="ç›¸å…³èµ„æ–™"><a href="#ç›¸å…³èµ„æ–™" class="headerlink" title="ç›¸å…³èµ„æ–™"></a>ç›¸å…³èµ„æ–™</h1><ul>
<li><a href="http://www.open-open.com/solution/view/1319814738108" target="_blank" rel="noopener">http://www.open-open.com/solution/view/1319814738108</a></li>
<li><a href="http://www.open-open.com/solution/view/1405088577732" target="_blank" rel="noopener">http://www.open-open.com/solution/view/1405088577732</a></li>
<li><a href="http://www.open-open.com/solution/view/1319816219625" target="_blank" rel="noopener">http://www.open-open.com/solution/view/1319816219625</a></li>
</ul>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>å¼€æºåè®®</tag>
      </tags>
  </entry>
  <entry>
    <title>Go fmtåŒ…çš„æ ¼å¼åŒ–è¾“å‡º</title>
    <url>/2018/09/14/Go-fmt%E5%8C%85%E7%9A%84%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong> golang çš„fmt åŒ…å®ç°äº†æ ¼å¼åŒ–I/Oå‡½æ•°ï¼Œç±»ä¼¼äºCçš„ printf å’Œ scanf </strong></p>
<a id="more"></a>
<h1 id="æ™®é€šå ä½ç¬¦"><a href="#æ™®é€šå ä½ç¬¦" class="headerlink" title="æ™®é€šå ä½ç¬¦"></a>æ™®é€šå ä½ç¬¦</h1><table>
<thead>
<tr>
<th>å ä½ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>%v</td>
<td>ç›¸åº”å€¼çš„é»˜è®¤æ ¼å¼ï¼ŒåŸºæœ¬ä¸‡èƒ½</td>
</tr>
<tr>
<td>%+v</td>
<td>æ‰“å°ç»“æ„ä½“æ—¶ï¼Œä¼šæ·»åŠ å­—æ®µå</td>
</tr>
<tr>
<td>%#v</td>
<td>å“åº”å€¼çš„Goè¯­æ³•è¡¨ç¤º</td>
</tr>
<tr>
<td>%T</td>
<td>å“åº”å€¼çš„ç±»å‹çš„Goè¯­æ³•è¡¨ç¤º</td>
</tr>
<tr>
<td>%%</td>
<td>å­—é¢ä¸Šçš„ç™¾åˆ†å·ï¼Œå¹¶éå€¼çš„å ä½ç¬¦</td>
</tr>
</tbody>
</table>
<h1 id="å¸ƒå°”å ä½ç¬¦"><a href="#å¸ƒå°”å ä½ç¬¦" class="headerlink" title="å¸ƒå°”å ä½ç¬¦"></a>å¸ƒå°”å ä½ç¬¦</h1><table>
<thead>
<tr>
<th>å ä½ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>%t</td>
<td>true æˆ–è€… false</td>
</tr>
</tbody>
</table>
<h1 id="æ•´æ•°å ä½ç¬¦"><a href="#æ•´æ•°å ä½ç¬¦" class="headerlink" title="æ•´æ•°å ä½ç¬¦"></a>æ•´æ•°å ä½ç¬¦</h1><table>
<thead>
<tr>
<th>å ä½ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>%b</td>
<td>äºŒè¿›åˆ¶è¡¨ç¤º</td>
</tr>
<tr>
<td>%c</td>
<td>ç›¸åº”unicodeç æ‰€è¡¨ç¤ºçš„å­—ç¬¦</td>
</tr>
<tr>
<td>%d</td>
<td>åè¿›åˆ¶è¡¨ç¤º</td>
</tr>
<tr>
<td>%o</td>
<td>å…«è¿›åˆ¶è¡¨ç¤º</td>
</tr>
<tr>
<td>%q</td>
<td>å•å¼•å·å›´ç»•çš„å­—ç¬¦å­—é¢å€¼ï¼Œç”±Goè¯­æ³•å®‰å…¨çš„è½¬ä¹‰ï¼Œå¦‚Printf(%q, 0x4E2E)è¾“å‡ºâ€™ä¸­â€™</td>
</tr>
<tr>
<td>%x</td>
<td>åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå­—æ¯å½¢å¼ä¸ºå°å†™a-f</td>
</tr>
<tr>
<td>%X</td>
<td>åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå­—æ¯å½¢å¼ä¸ºA-F</td>
</tr>
<tr>
<td>%U</td>
<td>unicodeæ ¼å¼ï¼ŒU+1234 ç­‰åŒäº U+%04X</td>
</tr>
</tbody>
</table>
<h1 id="æµ®ç‚¹æ•°å’Œå¤æ•°çš„ç»„æˆéƒ¨åˆ†ï¼ˆå®éƒ¨å’Œè™šéƒ¨ï¼‰"><a href="#æµ®ç‚¹æ•°å’Œå¤æ•°çš„ç»„æˆéƒ¨åˆ†ï¼ˆå®éƒ¨å’Œè™šéƒ¨ï¼‰" class="headerlink" title="æµ®ç‚¹æ•°å’Œå¤æ•°çš„ç»„æˆéƒ¨åˆ†ï¼ˆå®éƒ¨å’Œè™šéƒ¨ï¼‰"></a>æµ®ç‚¹æ•°å’Œå¤æ•°çš„ç»„æˆéƒ¨åˆ†ï¼ˆå®éƒ¨å’Œè™šéƒ¨ï¼‰</h1><table>
<thead>
<tr>
<th>å ä½ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>%b</td>
<td>æ— å°æ•°éƒ¨åˆ†çš„ï¼ŒæŒ‡æ•°ä¸ºäºŒçš„å¹‚çš„ç§‘å­¦è®°æ•°æ³•</td>
</tr>
<tr>
<td>%e</td>
<td>ç§‘å­¦è®°æ•°æ³•</td>
</tr>
<tr>
<td>%E</td>
<td>ç§‘å­¦è®¡æ•°æ³•</td>
</tr>
<tr>
<td>%f</td>
<td>æœ‰å°æ•°ç‚¹è€Œæ— æŒ‡æ•°</td>
</tr>
<tr>
<td>%g</td>
<td>æ ¹æ®æƒ…å†µé€‰æ‹©%e æˆ–è€… %f ä»¥äº§ç”Ÿæ›´ç´§å‡‘çš„è¾“å‡º</td>
</tr>
<tr>
<td>%G</td>
<td>æ ¹æ®æƒ…å†µé€‰æ‹©%E æˆ–è€… %f ä»¥äº§ç”Ÿæ›´ç´§å‡‘çš„è¾“å‡º</td>
</tr>
</tbody>
</table>
<h1 id="å­—ç¬¦ä¸²å’Œå­—èŠ‚åˆ‡ç‰‡"><a href="#å­—ç¬¦ä¸²å’Œå­—èŠ‚åˆ‡ç‰‡" class="headerlink" title="å­—ç¬¦ä¸²å’Œå­—èŠ‚åˆ‡ç‰‡"></a>å­—ç¬¦ä¸²å’Œå­—èŠ‚åˆ‡ç‰‡</h1><table>
<thead>
<tr>
<th>å ä½ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>%s</td>
<td>è¾“å‡ºå­—ç¬¦ä¸²è¡¨ç¤ºï¼ˆå­—ç¬¦ä¸²ç±»å‹æˆ–[]byteç±»å‹ï¼‰</td>
</tr>
<tr>
<td>%q</td>
<td>åŒå¼•å·å›´ç»•çš„å­—ç¬¦ä¸²ï¼Œç”±Goè¯­æ³•å®‰å…¨åœ°è½¬ä¹‰</td>
</tr>
<tr>
<td>%x</td>
<td>åå…­è¿›åˆ¶ï¼Œå°å†™å­—æ¯ï¼Œæ¯å­—èŠ‚ä¸¤ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>%X</td>
<td>åå…­è¿›åˆ¶ï¼Œå¤§å†™å­—æ¯ï¼Œæ¯å­—èŠ‚ä¸¤ä¸ªå­—ç¬¦</td>
</tr>
</tbody>
</table>
<h1 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h1><table>
<thead>
<tr>
<th>å ä½ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>%p</td>
<td>åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå‰ç¼€0x</td>
</tr>
</tbody>
</table>
<h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><table>
<thead>
<tr>
<th>å ä½ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>æ€»æ‰“å°æ•°å€¼çš„æ­£è´Ÿå·ï¼›å¯¹äº%qï¼ˆ%+qï¼‰ä¿è¯åªè¾“å‡ºASCIIç¼–ç çš„å­—ç¬¦ã€‚</td>
</tr>
<tr>
<td>-</td>
<td>åœ¨å³ä¾§è€Œéå·¦ä¾§å¡«å……ç©ºæ ¼ï¼ˆå·¦å¯¹é½è¯¥åŒºåŸŸï¼‰</td>
</tr>
<tr>
<td>#</td>
<td>å¤‡ç”¨æ ¼å¼ï¼šä¸ºå…«è¿›åˆ¶æ·»åŠ å‰å¯¼ 0ï¼ˆ%#oï¼‰</td>
</tr>
<tr>
<td>â€˜ â€˜</td>
<td>(ç©ºæ ¼)ä¸ºæ•°å€¼ä¸­çœç•¥çš„æ­£è´Ÿå·ç•™å‡ºç©ºç™½ï¼ˆ% dï¼‰</td>
</tr>
<tr>
<td>0</td>
<td>å¡«å……å‰å¯¼çš„0è€Œéç©ºæ ¼ï¼›å¯¹äºæ•°å­—ï¼Œè¿™ä¼šå°†å¡«å……ç§»åˆ°æ­£è´Ÿå·ä¹‹å</td>
</tr>
</tbody>
</table>
<p>golangæ²¡æœ‰ â€˜%uâ€™ ç‚¹ä½ç¬¦ï¼Œè‹¥æ•´æ•°ä¸ºæ— ç¬¦å·ç±»å‹ï¼Œé»˜è®¤å°±ä¼šè¢«æ‰“å°æˆæ— ç¬¦å·çš„ã€‚</p>
<p>å®½åº¦ä¸ç²¾åº¦çš„æ§åˆ¶æ ¼å¼ä»¥Unicodeç ç‚¹ä¸ºå•ä½ã€‚å®½åº¦ä¸ºè¯¥æ•°å€¼å ç”¨åŒºåŸŸçš„æœ€å°å®½åº¦ï¼›ç²¾åº¦ä¸ºå°æ•°ç‚¹ä¹‹åçš„ä½æ•°ã€‚<br>æ“ä½œæ•°çš„ç±»å‹ä¸ºintæ—¶ï¼Œå®½åº¦ä¸ç²¾åº¦éƒ½å¯ç”¨å­—ç¬¦ â€˜*â€™ è¡¨ç¤ºã€‚</p>
<p>å¯¹äº %g/%G è€Œè¨€ï¼Œç²¾åº¦ä¸ºæ‰€æœ‰æ•°å­—çš„æ€»æ•°ï¼Œä¾‹å¦‚ï¼š123.45ï¼Œ%.4g ä¼šæ‰“å°123.5ï¼Œï¼ˆè€Œ %6.2f ä¼šæ‰“å°123.45ï¼‰ã€‚</p>
<p>%e å’Œ %f çš„é»˜è®¤ç²¾åº¦ä¸º6</p>
<p>å¯¹å¤§å¤šæ•°çš„æ•°å€¼ç±»å‹è€Œè¨€ï¼Œå®½åº¦ä¸ºè¾“å‡ºçš„æœ€å°å­—ç¬¦æ•°ï¼Œå¦‚æœå¿…è¦çš„è¯ä¼šä¸ºå·²æ ¼å¼åŒ–çš„å½¢å¼å¡«å……ç©ºæ ¼ã€‚</p>
<p>è€Œä»¥å­—ç¬¦ä¸²ç±»å‹ï¼Œç²¾åº¦ä¸ºè¾“å‡ºçš„æœ€å¤§å­—ç¬¦æ•°ï¼Œå¦‚æœå¿…è¦çš„è¯ä¼šç›´æ¥æˆªæ–­ã€‚</p>
]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>GolangåŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>Goæ ‡å‡†å‘½ä»¤</title>
    <url>/2018/09/14/Go%E6%A0%87%E5%87%86%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Goå‘½ä»¤"><a href="#Goå‘½ä»¤" class="headerlink" title="Goå‘½ä»¤"></a>Goå‘½ä»¤</h1><p>Goè¯­è¨€è‡ªå¸¦æœ‰ä¸€å¥—å®Œæ•´çš„å‘½ä»¤æ“ä½œå·¥å…·ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ<code>go</code>æ¥æŸ¥çœ‹å®ƒä»¬ï¼š</p>
<p>å›¾1.3 Goå‘½ä»¤æ˜¾ç¤ºè¯¦ç»†çš„ä¿¡æ¯</p>
<p>  è¿™äº›å‘½ä»¤å¯¹äºæˆ‘ä»¬å¹³æ—¶ç¼–å†™çš„ä»£ç éå¸¸æœ‰ç”¨ï¼Œæ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬äº†è§£ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ã€‚</p>
<a id="more"></a>
<h2 id="go-build"><a href="#go-build" class="headerlink" title="go build"></a>go build</h2><p>  è¿™ä¸ªå‘½ä»¤ä¸»è¦ç”¨äºç¼–è¯‘ä»£ç ã€‚åœ¨åŒ…çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œè‹¥æœ‰å¿…è¦ï¼Œä¼šåŒæ—¶ç¼–è¯‘ä¸ä¹‹ç›¸å…³è”çš„åŒ…ã€‚</p>
<ul>
<li><p>å¦‚æœæ˜¯æ™®é€šåŒ…ï¼Œå°±åƒæˆ‘ä»¬åœ¨1.2èŠ‚ä¸­ç¼–å†™çš„<code>mymath</code>åŒ…é‚£æ ·ï¼Œå½“ä½ æ‰§è¡Œ<code>go build</code>ä¹‹åï¼Œå®ƒä¸ä¼šäº§ç”Ÿä»»ä½•æ–‡ä»¶ã€‚å¦‚æœä½ éœ€è¦åœ¨<code>$GOPATH/pkg</code>ä¸‹ç”Ÿæˆç›¸åº”çš„æ–‡ä»¶ï¼Œé‚£å°±å¾—æ‰§è¡Œ<code>go install</code>ã€‚</p>
</li>
<li><p>å¦‚æœæ˜¯<code>main</code>åŒ…ï¼Œå½“ä½ æ‰§è¡Œ<code>go build</code>ä¹‹åï¼Œå®ƒå°±ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚å¦‚æœä½ éœ€è¦åœ¨<code>$GOPATH/bin</code>ä¸‹ç”Ÿæˆç›¸åº”çš„æ–‡ä»¶ï¼Œéœ€è¦æ‰§è¡Œ<code>go install</code>ï¼Œæˆ–è€…ä½¿ç”¨<code>go build -o è·¯å¾„/a.exe</code>ã€‚</p>
</li>
<li><p>å¦‚æœæŸä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æœ‰å¤šä¸ªæ–‡ä»¶ï¼Œè€Œä½ åªæƒ³ç¼–è¯‘æŸä¸ªæ–‡ä»¶ï¼Œå°±å¯åœ¨<code>go build</code>ä¹‹ååŠ ä¸Šæ–‡ä»¶åï¼Œä¾‹å¦‚<code>go build a.go</code>ï¼›<code>go build</code>å‘½ä»¤é»˜è®¤ä¼šç¼–è¯‘å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰goæ–‡ä»¶ã€‚</p>
</li>
<li><p>ä½ ä¹Ÿå¯ä»¥æŒ‡å®šç¼–è¯‘è¾“å‡ºçš„æ–‡ä»¶åã€‚ä¾‹å¦‚1.2èŠ‚ä¸­çš„<code>mathapp</code>åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®š<code>go build -o astaxie.exe</code>ï¼Œé»˜è®¤æƒ…å†µæ˜¯ä½ çš„packageå(émainåŒ…)ï¼Œæˆ–è€…æ˜¯ç¬¬ä¸€ä¸ªæºæ–‡ä»¶çš„æ–‡ä»¶å(mainåŒ…)ã€‚</p>
<p>ï¼ˆæ³¨ï¼šå®é™…ä¸Šï¼Œpackageååœ¨<a href="https://golang.org/ref/spec" target="_blank" rel="noopener">Goè¯­è¨€è§„èŒƒ</a>ä¸­æŒ‡ä»£ç ä¸­â€œpackageâ€åä½¿ç”¨çš„åç§°ï¼Œæ­¤åç§°å¯ä»¥ä¸æ–‡ä»¶å¤¹åä¸åŒã€‚é»˜è®¤ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶åæ˜¯æ–‡ä»¶å¤¹åã€‚ï¼‰</p>
</li>
<li><p>go buildä¼šå¿½ç•¥ç›®å½•ä¸‹ä»¥â€œ_â€æˆ–â€œ.â€å¼€å¤´çš„goæ–‡ä»¶ã€‚</p>
</li>
<li><p>å¦‚æœä½ çš„æºä»£ç é’ˆå¯¹ä¸åŒçš„æ“ä½œç³»ç»Ÿéœ€è¦ä¸åŒçš„å¤„ç†ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿåç¼€æ¥å‘½åæ–‡ä»¶ã€‚ä¾‹å¦‚æœ‰ä¸€ä¸ªè¯»å–æ•°ç»„çš„ç¨‹åºï¼Œå®ƒå¯¹äºä¸åŒçš„æ“ä½œç³»ç»Ÿå¯èƒ½æœ‰å¦‚ä¸‹å‡ ä¸ªæºæ–‡ä»¶ï¼š</p>
<p>array_linux.go<br>array_darwin.go<br>array_windows.go<br>array_freebsd.go</p>
<p><code>go build</code>çš„æ—¶å€™ä¼šé€‰æ‹©æ€§åœ°ç¼–è¯‘ä»¥ç³»ç»Ÿåç»“å°¾çš„æ–‡ä»¶ï¼ˆLinuxã€Darwinã€Windowsã€Freebsdï¼‰ã€‚ä¾‹å¦‚Linuxç³»ç»Ÿä¸‹é¢ç¼–è¯‘åªä¼šé€‰æ‹©array_linux.goæ–‡ä»¶ï¼Œå…¶å®ƒç³»ç»Ÿå‘½ååç¼€æ–‡ä»¶å…¨éƒ¨å¿½ç•¥ã€‚</p>
</li>
</ul>
<p>å‚æ•°çš„ä»‹ç»</p>
<ul>
<li><code>-o</code> æŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶åï¼Œå¯ä»¥å¸¦ä¸Šè·¯å¾„ï¼Œä¾‹å¦‚ <code>go build -o a/b/c</code></li>
<li><code>-i</code> å®‰è£…ç›¸åº”çš„åŒ…ï¼Œç¼–è¯‘+<code>go install</code></li>
<li><code>-a</code> æ›´æ–°å…¨éƒ¨å·²ç»æ˜¯æœ€æ–°çš„åŒ…çš„ï¼Œä½†æ˜¯å¯¹æ ‡å‡†åŒ…ä¸é€‚ç”¨</li>
<li><code>-n</code> æŠŠéœ€è¦æ‰§è¡Œçš„ç¼–è¯‘å‘½ä»¤æ‰“å°å‡ºæ¥ï¼Œä½†æ˜¯ä¸æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆå®¹æ˜“çš„çŸ¥é“åº•å±‚æ˜¯å¦‚ä½•è¿è¡Œçš„</li>
<li><code>-p n</code> æŒ‡å®šå¯ä»¥å¹¶è¡Œå¯è¿è¡Œçš„ç¼–è¯‘æ•°ç›®ï¼Œé»˜è®¤æ˜¯CPUæ•°ç›®</li>
<li><code>-race</code> å¼€å¯ç¼–è¯‘çš„æ—¶å€™è‡ªåŠ¨æ£€æµ‹æ•°æ®ç«äº‰çš„æƒ…å†µï¼Œç›®å‰åªæ”¯æŒ64ä½çš„æœºå™¨</li>
<li><code>-v</code> æ‰“å°å‡ºæ¥æˆ‘ä»¬æ­£åœ¨ç¼–è¯‘çš„åŒ…å</li>
<li><code>-work</code> æ‰“å°å‡ºæ¥ç¼–è¯‘æ—¶å€™çš„ä¸´æ—¶æ–‡ä»¶å¤¹åç§°ï¼Œå¹¶ä¸”å¦‚æœå·²ç»å­˜åœ¨çš„è¯å°±ä¸è¦åˆ é™¤</li>
<li><code>-x</code> æ‰“å°å‡ºæ¥æ‰§è¡Œçš„å‘½ä»¤ï¼Œå…¶å®å°±æ˜¯å’Œ<code>-n</code>çš„ç»“æœç±»ä¼¼ï¼Œåªæ˜¯è¿™ä¸ªä¼šæ‰§è¡Œ</li>
<li><code>-ccflags &#39;arg list&#39;</code> ä¼ é€’å‚æ•°ç»™5c, 6c, 8c è°ƒç”¨</li>
<li><code>-compiler name</code> æŒ‡å®šç›¸åº”çš„ç¼–è¯‘å™¨ï¼Œgccgoè¿˜æ˜¯gc</li>
<li><code>-gccgoflags &#39;arg list&#39;</code> ä¼ é€’å‚æ•°ç»™gccgoç¼–è¯‘è¿æ¥è°ƒç”¨</li>
<li><code>-gcflags &#39;arg list&#39;</code> ä¼ é€’å‚æ•°ç»™5g, 6g, 8g è°ƒç”¨</li>
<li><code>-installsuffix suffix</code> ä¸ºäº†å’Œé»˜è®¤çš„å®‰è£…åŒ…åŒºåˆ«å¼€æ¥ï¼Œé‡‡ç”¨è¿™ä¸ªå‰ç¼€æ¥é‡æ–°å®‰è£…é‚£äº›ä¾èµ–çš„åŒ…ï¼Œ<code>-race</code>çš„æ—¶å€™é»˜è®¤å·²ç»æ˜¯<code>-installsuffix race</code>,å¤§å®¶å¯ä»¥é€šè¿‡<code>-n</code>å‘½ä»¤æ¥éªŒè¯</li>
<li><code>-ldflags &#39;flag list&#39;</code> ä¼ é€’å‚æ•°ç»™5l, 6l, 8l è°ƒç”¨</li>
<li><code>-tags &#39;tag list&#39;</code> è®¾ç½®åœ¨ç¼–è¯‘çš„æ—¶å€™å¯ä»¥é€‚é…çš„é‚£äº›tagï¼Œè¯¦ç»†çš„tagé™åˆ¶å‚è€ƒé‡Œé¢çš„ <a href="http://golang.org/pkg/go/build/" target="_blank" rel="noopener">Build Constraints</a></li>
</ul>
<h2 id="go-clean"><a href="#go-clean" class="headerlink" title="go clean"></a>go clean</h2><p>  è¿™ä¸ªå‘½ä»¤æ˜¯ç”¨æ¥ç§»é™¤å½“å‰æºç åŒ…å’Œå…³è”æºç åŒ…é‡Œé¢ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶åŒ…æ‹¬</p>
<pre><code>_obj/            æ—§çš„objectç›®å½•ï¼Œç”±Makefilesé—ç•™
_test/           æ—§çš„testç›®å½•ï¼Œç”±Makefilesé—ç•™
_testmain.go     æ—§çš„gotestæ–‡ä»¶ï¼Œç”±Makefilesé—ç•™
test.out         æ—§çš„testè®°å½•ï¼Œç”±Makefilesé—ç•™
build.out        æ—§çš„testè®°å½•ï¼Œç”±Makefilesé—ç•™
*.[568ao]        objectæ–‡ä»¶ï¼Œç”±Makefilesé—ç•™

DIR(.exe)        ç”±go buildäº§ç”Ÿ
DIR.test(.exe)   ç”±go test -cäº§ç”Ÿ
MAINFILE(.exe)   ç”±go build MAINFILE.goäº§ç”Ÿ
*.so             ç”± SWIG äº§ç”Ÿ
</code></pre><p>  æˆ‘ä¸€èˆ¬éƒ½æ˜¯åˆ©ç”¨è¿™ä¸ªå‘½ä»¤æ¸…é™¤ç¼–è¯‘æ–‡ä»¶ï¼Œç„¶ågithubé€’äº¤æºç ï¼Œåœ¨æœ¬æœºæµ‹è¯•çš„æ—¶å€™è¿™äº›ç¼–è¯‘æ–‡ä»¶éƒ½æ˜¯å’Œç³»ç»Ÿç›¸å…³çš„ï¼Œä½†æ˜¯å¯¹äºæºç ç®¡ç†æ¥è¯´æ²¡å¿…è¦ã€‚</p>
<pre><code>$ go clean -i -n
cd /Users/astaxie/develop/gopath/src/mathapp
rm -f mathapp mathapp.exe mathapp.test mathapp.test.exe app app.exe
rm -f /Users/astaxie/develop/gopath/bin/mathapp
</code></pre><p>å‚æ•°ä»‹ç»</p>
<ul>
<li><code>-i</code> æ¸…é™¤å…³è”çš„å®‰è£…çš„åŒ…å’Œå¯è¿è¡Œæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡go installå®‰è£…çš„æ–‡ä»¶</li>
<li><code>-n</code> æŠŠéœ€è¦æ‰§è¡Œçš„æ¸…é™¤å‘½ä»¤æ‰“å°å‡ºæ¥ï¼Œä½†æ˜¯ä¸æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆå®¹æ˜“çš„çŸ¥é“åº•å±‚æ˜¯å¦‚ä½•è¿è¡Œçš„</li>
<li><code>-r</code> å¾ªç¯çš„æ¸…é™¤åœ¨importä¸­å¼•å…¥çš„åŒ…</li>
<li><code>-x</code> æ‰“å°å‡ºæ¥æ‰§è¡Œçš„è¯¦ç»†å‘½ä»¤ï¼Œå…¶å®å°±æ˜¯<code>-n</code>æ‰“å°çš„æ‰§è¡Œç‰ˆæœ¬</li>
</ul>
<h2 id="go-fmt"><a href="#go-fmt" class="headerlink" title="go fmt"></a>go fmt</h2><p>  æœ‰è¿‡C/C++ç»éªŒçš„è¯»è€…ä¼šçŸ¥é“,ä¸€äº›äººç»å¸¸ä¸ºä»£ç é‡‡å–K&amp;Ré£æ ¼è¿˜æ˜¯ANSIé£æ ¼è€Œäº‰è®ºä¸ä¼‘ã€‚åœ¨goä¸­ï¼Œä»£ç åˆ™æœ‰æ ‡å‡†çš„é£æ ¼ã€‚ç”±äºä¹‹å‰å·²ç»æœ‰çš„ä¸€äº›ä¹ æƒ¯æˆ–å…¶å®ƒçš„åŸå› æˆ‘ä»¬å¸¸å°†ä»£ç å†™æˆANSIé£æ ¼æˆ–è€…å…¶å®ƒæ›´åˆé€‚è‡ªå·±çš„æ ¼å¼ï¼Œè¿™å°†ä¸ºäººä»¬åœ¨é˜…è¯»åˆ«äººçš„ä»£ç æ—¶æ·»åŠ ä¸å¿…è¦çš„è´Ÿæ‹…ï¼Œæ‰€ä»¥goå¼ºåˆ¶äº†ä»£ç æ ¼å¼ï¼ˆæ¯”å¦‚å·¦å¤§æ‹¬å·å¿…é¡»æ”¾åœ¨è¡Œå°¾ï¼‰ï¼Œä¸æŒ‰ç…§æ­¤æ ¼å¼çš„ä»£ç å°†ä¸èƒ½ç¼–è¯‘é€šè¿‡ï¼Œä¸ºäº†å‡å°‘æµªè´¹åœ¨æ’ç‰ˆä¸Šçš„æ—¶é—´ï¼Œgoå·¥å…·é›†ä¸­æä¾›äº†ä¸€ä¸ª<code>go fmt</code>å‘½ä»¤ å®ƒå¯ä»¥å¸®ä½ æ ¼å¼åŒ–ä½ å†™å¥½çš„ä»£ç æ–‡ä»¶ï¼Œä½¿ä½ å†™ä»£ç çš„æ—¶å€™ä¸éœ€è¦å…³å¿ƒæ ¼å¼ï¼Œä½ åªéœ€è¦åœ¨å†™å®Œä¹‹åæ‰§è¡Œ<code>go fmt &lt;æ–‡ä»¶å&gt;.go</code>ï¼Œä½ çš„ä»£ç å°±è¢«ä¿®æ”¹æˆäº†æ ‡å‡†æ ¼å¼ï¼Œä½†æ˜¯æˆ‘å¹³å¸¸å¾ˆå°‘ç”¨åˆ°è¿™ä¸ªå‘½ä»¤ï¼Œå› ä¸ºå¼€å‘å·¥å…·é‡Œé¢ä¸€èˆ¬éƒ½å¸¦äº†ä¿å­˜æ—¶å€™è‡ªåŠ¨æ ¼å¼åŒ–åŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½å…¶å®åœ¨åº•å±‚å°±æ˜¯è°ƒç”¨äº†<code>go fmt</code>ã€‚æ¥ä¸‹æ¥çš„ä¸€èŠ‚æˆ‘å°†è®²è¿°ä¸¤ä¸ªå·¥å…·ï¼Œè¿™ä¸¤ä¸ªå·¥å…·éƒ½è‡ªå¸¦äº†ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨åŒ–<code>go fmt</code>åŠŸèƒ½ã€‚</p>
<p>ä½¿ç”¨go fmtå‘½ä»¤ï¼Œå…¶å®æ˜¯è°ƒç”¨äº†gofmtï¼Œè€Œä¸”éœ€è¦å‚æ•°-wï¼Œå¦åˆ™æ ¼å¼åŒ–ç»“æœä¸ä¼šå†™å…¥æ–‡ä»¶ã€‚gofmt -w -l srcï¼Œå¯ä»¥æ ¼å¼åŒ–æ•´ä¸ªé¡¹ç›®ã€‚</p>
<p>æ‰€ä»¥go fmtæ˜¯gofmtçš„ä¸Šå±‚ä¸€ä¸ªåŒ…è£…çš„å‘½ä»¤ï¼Œæˆ‘ä»¬æƒ³è¦æ›´å¤šçš„ä¸ªæ€§åŒ–çš„æ ¼å¼åŒ–å¯ä»¥å‚è€ƒ <a href="http://golang.org/cmd/gofmt/" target="_blank" rel="noopener">gofmt</a></p>
<p>gofmtçš„å‚æ•°ä»‹ç»</p>
<ul>
<li><code>-l</code> æ˜¾ç¤ºé‚£äº›éœ€è¦æ ¼å¼åŒ–çš„æ–‡ä»¶</li>
<li><code>-w</code> æŠŠæ”¹å†™åçš„å†…å®¹ç›´æ¥å†™å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ä½œä¸ºç»“æœæ‰“å°åˆ°æ ‡å‡†è¾“å‡ºã€‚</li>
<li><code>-r</code> æ·»åŠ å½¢å¦‚â€œa[b:len(a)] -&gt; a[b:]â€çš„é‡å†™è§„åˆ™ï¼Œæ–¹ä¾¿æˆ‘ä»¬åšæ‰¹é‡æ›¿æ¢</li>
<li><code>-s</code> ç®€åŒ–æ–‡ä»¶ä¸­çš„ä»£ç </li>
<li><code>-d</code> æ˜¾ç¤ºæ ¼å¼åŒ–å‰åçš„diffè€Œä¸æ˜¯å†™å…¥æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯false</li>
<li><code>-e</code> æ‰“å°æ‰€æœ‰çš„è¯­æ³•é”™è¯¯åˆ°æ ‡å‡†è¾“å‡ºã€‚å¦‚æœä¸ä½¿ç”¨æ­¤æ ‡è®°ï¼Œåˆ™åªä¼šæ‰“å°ä¸åŒè¡Œçš„å‰10ä¸ªé”™è¯¯ã€‚</li>
<li><code>-cpuprofile</code> æ”¯æŒè°ƒè¯•æ¨¡å¼ï¼Œå†™å…¥ç›¸åº”çš„cpufileåˆ°æŒ‡å®šçš„æ–‡ä»¶</li>
</ul>
<h2 id="go-get"><a href="#go-get" class="headerlink" title="go get"></a>go get</h2><p>  è¿™ä¸ªå‘½ä»¤æ˜¯ç”¨æ¥åŠ¨æ€è·å–è¿œç¨‹ä»£ç åŒ…çš„ï¼Œç›®å‰æ”¯æŒçš„æœ‰BitBucketã€GitHubã€Google Codeå’ŒLaunchpadã€‚è¿™ä¸ªå‘½ä»¤åœ¨å†…éƒ¨å®é™…ä¸Šåˆ†æˆäº†ä¸¤æ­¥æ“ä½œï¼šç¬¬ä¸€æ­¥æ˜¯ä¸‹è½½æºç åŒ…ï¼Œç¬¬äºŒæ­¥æ˜¯æ‰§è¡Œ<code>go install</code>ã€‚ä¸‹è½½æºç åŒ…çš„goå·¥å…·ä¼šè‡ªåŠ¨æ ¹æ®ä¸åŒçš„åŸŸåè°ƒç”¨ä¸åŒçš„æºç å·¥å…·ï¼Œå¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p>
<pre><code>BitBucket (Mercurial Git)
GitHub (Git)
Google Code Project Hosting (Git, Mercurial, Subversion)
Launchpad (Bazaar)
</code></pre><p>  æ‰€ä»¥ä¸ºäº†<code>go get</code> èƒ½æ­£å¸¸å·¥ä½œï¼Œä½ å¿…é¡»ç¡®ä¿å®‰è£…äº†åˆé€‚çš„æºç ç®¡ç†å·¥å…·ï¼Œå¹¶åŒæ—¶æŠŠè¿™äº›å‘½ä»¤åŠ å…¥ä½ çš„PATHä¸­ã€‚å…¶å®<code>go get</code>æ”¯æŒè‡ªå®šä¹‰åŸŸåçš„åŠŸèƒ½ï¼Œå…·ä½“å‚è§<code>go help remote</code>ã€‚</p>
<p>å‚æ•°ä»‹ç»ï¼š</p>
<ul>
<li><code>-d</code> åªä¸‹è½½ä¸å®‰è£…</li>
<li><code>-f</code> åªæœ‰åœ¨ä½ åŒ…å«äº†<code>-u</code>å‚æ•°çš„æ—¶å€™æ‰æœ‰æ•ˆï¼Œä¸è®©<code>-u</code>å»éªŒè¯importä¸­çš„æ¯ä¸€ä¸ªéƒ½å·²ç»è·å–äº†ï¼Œè¿™å¯¹äºæœ¬åœ°forkçš„åŒ…ç‰¹åˆ«æœ‰ç”¨</li>
<li><code>-fix</code> åœ¨è·å–æºç ä¹‹åå…ˆè¿è¡Œfixï¼Œç„¶åå†å»åšå…¶ä»–çš„äº‹æƒ…</li>
<li><code>-t</code> åŒæ—¶ä¹Ÿä¸‹è½½éœ€è¦ä¸ºè¿è¡Œæµ‹è¯•æ‰€éœ€è¦çš„åŒ…</li>
<li><code>-u</code> å¼ºåˆ¶ä½¿ç”¨ç½‘ç»œå»æ›´æ–°åŒ…å’Œå®ƒçš„ä¾èµ–åŒ…</li>
<li><code>-v</code> æ˜¾ç¤ºæ‰§è¡Œçš„å‘½ä»¤</li>
</ul>
<h2 id="go-install"><a href="#go-install" class="headerlink" title="go install"></a>go install</h2><p>  è¿™ä¸ªå‘½ä»¤åœ¨å†…éƒ¨å®é™…ä¸Šåˆ†æˆäº†ä¸¤æ­¥æ“ä½œï¼šç¬¬ä¸€æ­¥æ˜¯ç”Ÿæˆç»“æœæ–‡ä»¶(å¯æ‰§è¡Œæ–‡ä»¶æˆ–è€….aåŒ…)ï¼Œç¬¬äºŒæ­¥ä¼šæŠŠç¼–è¯‘å¥½çš„ç»“æœç§»åˆ°<code>$GOPATH/pkg</code>æˆ–è€…<code>$GOPATH/bin</code>ã€‚</p>
<p>å‚æ•°æ”¯æŒ<code>go build</code>çš„ç¼–è¯‘å‚æ•°ã€‚å¤§å®¶åªè¦è®°ä½ä¸€ä¸ªå‚æ•°<code>-v</code>å°±å¥½äº†ï¼Œè¿™ä¸ªéšæ—¶éšåœ°çš„å¯ä»¥æŸ¥çœ‹åº•å±‚çš„æ‰§è¡Œä¿¡æ¯ã€‚</p>
<h2 id="go-test"><a href="#go-test" class="headerlink" title="go test"></a>go test</h2><p>  æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œä¼šè‡ªåŠ¨è¯»å–æºç ç›®å½•ä¸‹é¢åä¸º<code>*_test.go</code>çš„æ–‡ä»¶ï¼Œç”Ÿæˆå¹¶è¿è¡Œæµ‹è¯•ç”¨çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¾“å‡ºçš„ä¿¡æ¯ç±»ä¼¼</p>
<pre><code>ok   archive/tar   0.011s
FAIL archive/zip   0.022s
ok   compress/gzip 0.033s
...
</code></pre><p>  é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œä¸éœ€è¦ä»»ä½•çš„å‚æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨æŠŠä½ æºç åŒ…ä¸‹é¢æ‰€æœ‰testæ–‡ä»¶æµ‹è¯•å®Œæ¯•ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å¸¦ä¸Šå‚æ•°ï¼Œè¯¦æƒ…è¯·å‚è€ƒ<code>go help testflag</code></p>
<p>è¿™é‡Œæˆ‘ä»‹ç»å‡ ä¸ªæˆ‘ä»¬å¸¸ç”¨çš„å‚æ•°ï¼š</p>
<ul>
<li><code>-bench regexp</code> æ‰§è¡Œç›¸åº”çš„benchmarksï¼Œä¾‹å¦‚ <code>-bench=.</code></li>
<li><code>-cover</code> å¼€å¯æµ‹è¯•è¦†ç›–ç‡</li>
<li><code>-run regexp</code> åªè¿è¡ŒregexpåŒ¹é…çš„å‡½æ•°ï¼Œä¾‹å¦‚ <code>-run=Array</code> é‚£ä¹ˆå°±æ‰§è¡ŒåŒ…å«æœ‰Arrayå¼€å¤´çš„å‡½æ•°</li>
<li><code>-v</code> æ˜¾ç¤ºæµ‹è¯•çš„è¯¦ç»†å‘½ä»¤</li>
</ul>
<h2 id="go-tool"><a href="#go-tool" class="headerlink" title="go tool"></a>go tool</h2><p><code>go tool</code>ä¸‹é¢ä¸‹è½½èšé›†äº†å¾ˆå¤šå‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬åªä»‹ç»ä¸¤ä¸ªï¼Œfixå’Œvet</p>
<ul>
<li><code>go tool fix .</code> ç”¨æ¥ä¿®å¤ä»¥å‰è€ç‰ˆæœ¬çš„ä»£ç åˆ°æ–°ç‰ˆæœ¬ï¼Œä¾‹å¦‚go1ä¹‹å‰è€ç‰ˆæœ¬çš„ä»£ç è½¬åŒ–åˆ°go1,ä¾‹å¦‚APIçš„å˜åŒ–</li>
<li><code>go tool vet directory|files</code> ç”¨æ¥åˆ†æå½“å‰ç›®å½•çš„ä»£ç æ˜¯å¦éƒ½æ˜¯æ­£ç¡®çš„ä»£ç ,ä¾‹å¦‚æ˜¯ä¸æ˜¯è°ƒç”¨fmt.Printfé‡Œé¢çš„å‚æ•°ä¸æ­£ç¡®ï¼Œä¾‹å¦‚å‡½æ•°é‡Œé¢æå‰returnäº†ç„¶åå‡ºç°äº†æ— ç”¨ä»£ç ä¹‹ç±»çš„ã€‚</li>
</ul>
<h2 id="go-generate"><a href="#go-generate" class="headerlink" title="go generate"></a>go generate</h2><p>è¿™ä¸ªå‘½ä»¤æ˜¯ä»Go1.4å¼€å§‹æ‰è®¾è®¡çš„ï¼Œç”¨äºåœ¨ç¼–è¯‘å‰è‡ªåŠ¨åŒ–ç”ŸæˆæŸç±»ä»£ç ã€‚<code>go generate</code>å’Œ<code>go build</code>æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„å‘½ä»¤ï¼Œé€šè¿‡åˆ†ææºç ä¸­ç‰¹æ®Šçš„æ³¨é‡Šï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„å‘½ä»¤ã€‚è¿™äº›å‘½ä»¤éƒ½æ˜¯å¾ˆæ˜ç¡®çš„ï¼Œæ²¡æœ‰ä»»ä½•çš„ä¾èµ–åœ¨é‡Œé¢ã€‚è€Œä¸”å¤§å®¶åœ¨ç”¨è¿™ä¸ªä¹‹å‰å¿ƒé‡Œé¢ä¸€å®šè¦æœ‰ä¸€ä¸ªç†å¿µï¼Œè¿™ä¸ª<code>go generate</code>æ˜¯ç»™ä½ ç”¨çš„ï¼Œä¸æ˜¯ç»™ä½¿ç”¨ä½ è¿™ä¸ªåŒ…çš„äººç”¨çš„ï¼Œæ˜¯æ–¹ä¾¿ä½ æ¥ç”Ÿæˆä¸€äº›ä»£ç çš„ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä¾‹å¦‚æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨<code>yacc</code>æ¥ç”Ÿæˆä»£ç ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¸¸ç”¨è¿™æ ·çš„å‘½ä»¤ï¼š</p>
<pre><code>go tool yacc -o gopher.go -p parser gopher.y
</code></pre><p>-o æŒ‡å®šäº†è¾“å‡ºçš„æ–‡ä»¶åï¼Œ -pæŒ‡å®šäº†packageçš„åç§°ï¼Œè¿™æ˜¯ä¸€ä¸ªå•ç‹¬çš„å‘½ä»¤ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®©<code>go generate</code>æ¥è§¦å‘è¿™ä¸ªå‘½ä»¤ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨å½“ç„¶ç›®å½•çš„ä»»æ„ä¸€ä¸ª<code>xxx.go</code>æ–‡ä»¶é‡Œé¢çš„ä»»æ„ä½ç½®å¢åŠ ä¸€è¡Œå¦‚ä¸‹çš„æ³¨é‡Šï¼š</p>
<pre><code>//go:generate go tool yacc -o gopher.go -p parser gopher.y
</code></pre><p>è¿™é‡Œæˆ‘ä»¬æ³¨æ„äº†ï¼Œ<code>//go:generate</code>æ˜¯æ²¡æœ‰ä»»ä½•ç©ºæ ¼çš„ï¼Œè¿™å…¶å®å°±æ˜¯ä¸€ä¸ªå›ºå®šçš„æ ¼å¼ï¼Œåœ¨æ‰«ææºç æ–‡ä»¶çš„æ—¶å€™å°±æ˜¯æ ¹æ®è¿™ä¸ªæ¥åˆ¤æ–­çš„ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤æ¥ç”Ÿæˆï¼Œç¼–è¯‘ï¼Œæµ‹è¯•ã€‚å¦‚æœ<code>gopher.y</code>æ–‡ä»¶æœ‰ä¿®æ”¹ï¼Œé‚£ä¹ˆå°±é‡æ–°æ‰§è¡Œ<code>go generate</code>é‡æ–°ç”Ÿæˆæ–‡ä»¶å°±å¥½ã€‚</p>
<pre><code>$ go generate
$ go build
$ go test
</code></pre><h2 id="godoc"><a href="#godoc" class="headerlink" title="godoc"></a>godoc</h2><p>åœ¨Go1.2ç‰ˆæœ¬ä¹‹å‰è¿˜æ”¯æŒ<code>go doc</code>å‘½ä»¤ï¼Œä½†æ˜¯ä¹‹åå…¨éƒ¨ç§»åˆ°äº†godocè¿™ä¸ªå‘½ä»¤ä¸‹ï¼Œéœ€è¦è¿™æ ·å®‰è£…<code>go get golang.org/x/tools/cmd/godoc</code></p>
<p>  å¾ˆå¤šäººè¯´goä¸éœ€è¦ä»»ä½•çš„ç¬¬ä¸‰æ–¹æ–‡æ¡£ï¼Œä¾‹å¦‚chmæ‰‹å†Œä¹‹ç±»çš„ï¼ˆå…¶å®æˆ‘å·²ç»åšäº†ä¸€ä¸ªäº†ï¼Œ<a href="https://github.com/astaxie/godoc" target="_blank" rel="noopener">chmæ‰‹å†Œ</a>ï¼‰ï¼Œå› ä¸ºå®ƒå†…éƒ¨å°±æœ‰ä¸€ä¸ªå¾ˆå¼ºå¤§çš„æ–‡æ¡£å·¥å…·ã€‚</p>
<p>  å¦‚ä½•æŸ¥çœ‹ç›¸åº”packageçš„æ–‡æ¡£å‘¢ï¼Ÿ<br>  ä¾‹å¦‚builtinåŒ…ï¼Œé‚£ä¹ˆæ‰§è¡Œ<code>godoc builtin</code><br>  å¦‚æœæ˜¯httpåŒ…ï¼Œé‚£ä¹ˆæ‰§è¡Œ<code>godoc net/http</code><br>  æŸ¥çœ‹æŸä¸€ä¸ªåŒ…é‡Œé¢çš„å‡½æ•°ï¼Œé‚£ä¹ˆæ‰§è¡Œ<code>godoc fmt Printf</code><br>  ä¹Ÿå¯ä»¥æŸ¥çœ‹ç›¸åº”çš„ä»£ç ï¼Œæ‰§è¡Œ<code>godoc -src fmt Printf</code></p>
<p>  é€šè¿‡å‘½ä»¤åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ godoc -http=:ç«¯å£å· æ¯”å¦‚<code>godoc -http=:8080</code>ã€‚ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€<code>127.0.0.1:8080</code>ï¼Œä½ å°†ä¼šçœ‹åˆ°ä¸€ä¸ªgolang.orgçš„æœ¬åœ°copyç‰ˆæœ¬ï¼Œé€šè¿‡å®ƒä½ å¯ä»¥æŸ¥è¯¢pkgæ–‡æ¡£ç­‰å…¶å®ƒå†…å®¹ã€‚å¦‚æœä½ è®¾ç½®äº†GOPATHï¼Œåœ¨pkgåˆ†ç±»ä¸‹ï¼Œä¸ä½†ä¼šåˆ—å‡ºæ ‡å‡†åŒ…çš„æ–‡æ¡£ï¼Œè¿˜ä¼šåˆ—å‡ºä½ æœ¬åœ°<code>GOPATH</code>ä¸­æ‰€æœ‰é¡¹ç›®çš„ç›¸å…³æ–‡æ¡£ï¼Œè¿™å¯¹äºç»å¸¸è¢«å¢™çš„ç”¨æˆ·æ¥è¯´æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>
<h2 id="å…¶å®ƒå‘½ä»¤"><a href="#å…¶å®ƒå‘½ä»¤" class="headerlink" title="å…¶å®ƒå‘½ä»¤"></a>å…¶å®ƒå‘½ä»¤</h2><p>  goè¿˜æä¾›äº†å…¶å®ƒå¾ˆå¤šçš„å·¥å…·ï¼Œä¾‹å¦‚ä¸‹é¢çš„è¿™äº›å·¥å…·</p>
<pre><code>go version æŸ¥çœ‹goå½“å‰çš„ç‰ˆæœ¬
go env æŸ¥çœ‹å½“å‰goçš„ç¯å¢ƒå˜é‡
go list åˆ—å‡ºå½“å‰å…¨éƒ¨å®‰è£…çš„package
go run ç¼–è¯‘å¹¶è¿è¡ŒGoç¨‹åº
</code></pre><p>ä»¥ä¸Šè¿™äº›å·¥å…·è¿˜æœ‰å¾ˆå¤šå‚æ•°æ²¡æœ‰ä¸€ä¸€ä»‹ç»ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨<code>go help å‘½ä»¤</code>è·å–æ›´è¯¦ç»†çš„å¸®åŠ©ä¿¡æ¯ã€‚</p>
]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>GolangåŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLé”™è¯¯é›†</title>
    <url>/2018/09/13/MySQL%E9%94%99%E8%AF%AF%E9%9B%86/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong> MYSQLé”™è¯¯é›†è®°å½• </strong></p>
<a id="more"></a>
<h1 id="ERROR-1215-Cannot-add-foreign-key-constraint"><a href="#ERROR-1215-Cannot-add-foreign-key-constraint" class="headerlink" title="ERROR 1215-Cannot add foreign key constraint"></a>ERROR 1215-Cannot add foreign key constraint</h1><p>å…ˆçœ‹ä¿©ä¸ªè¡¨ç»“æ„<br><img src="desc_book.png" alt><br><img src="desc_reader.png" alt></p>
<p>å¯¹readerè¡¨è¿›è¡Œæ·»åŠ å¤–é”®çº¦æŸbookè¡¨<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE reader ADD CONSTRAINT fk_book_reader FOREIGN key</span><br><span class="line">    -&gt; reader(book_id) REFERENCES book(book_id);</span><br></pre></td></tr></table></figure></p>
<p>æŠ¥é”™ï¼š1215-Cannot add foreign key constraint<br>é—®é¢˜åˆ†æï¼š</p>
<blockquote>
<p>ä¸»å¤–é”®æ›´å¤šçš„æ˜¯æŸè¡¨çš„ä¸»é”®ä¸å­è¡¨çš„æŸä¸ªåˆ—è¿›è¡Œå…³è”ï¼Œè¦æ±‚æ˜¯å…·å¤‡ç›¸åŒçš„æ•°æ®ç±»å‹å’Œå±æ€§</p>
</blockquote>
<p>è¦æ±‚ï¼šå…·å¤‡ç›¸åŒçš„æ•°æ®ç±»å‹å’Œçº¦æŸ<br>å‘ç°ï¼šunsignedï¼Œæ•°å­—çš„å­—ç¬¦é•¿åº¦ä¸ä¸€è‡´ã€‚<br>ä¿®æ”¹readerè¡¨book_idåˆ—å±æ€§<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE reader MODIFY book_id INT UNSIGNED;</span><br></pre></td></tr></table></figure></p>
<p>å†æ¬¡è¿›è¡Œæ·»åŠ å¤–é”®çº¦æŸï¼Œé—®é¢˜è§£å†³ã€‚</p>
<h1 id="ERROR-1075-42000-Incorrect-table-definition-there-can-be-only-one-auto-column-and-it-must-be-defined-as-a-key"><a href="#ERROR-1075-42000-Incorrect-table-definition-there-can-be-only-one-auto-column-and-it-must-be-defined-as-a-key" class="headerlink" title="ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key"></a>ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key</h1><p>å¼•å‘åŸå› ï¼Œå»ºè¡¨è¯­å¥ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; create table if not exists user(</span><br><span class="line">    -&gt; id int unsigned auto_increment,</span><br><span class="line">    -&gt; uuid varchar(30) not null,</span><br><span class="line">    -&gt; primary key (uuid,id)</span><br><span class="line">    -&gt; ) engine=InnoDB default charset=utf8;</span><br></pre></td></tr></table></figure></p>
<p>è§£å†³æ–¹æ³•ï¼šå½“æœ‰ä¸€ä¸ªè‡ªå¢é”®å’Œå¦å¤–ä¸€ä¸ªå­—æ®µéœ€è¦ä½œä¸ºä¸»é”®æ—¶ï¼Œä¸€å®šè¦åœ¨å®šä¹‰primary keyä¸­å…ˆå®šä¹‰è‡ªå¢é”®ï¼Œå¦åˆ™æŠ¥é”™ã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; create table if not exists user(</span><br><span class="line">    -&gt; id int unsigned auto_increment,</span><br><span class="line">    -&gt; uuid varchar(30) not null,</span><br><span class="line">    -&gt; primary key (id,uuid)</span><br><span class="line">    -&gt; ) engine=InnoDB default charset=utf8;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>DBA</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>Centos7æ­å»ºFTPæœåŠ¡å™¨</title>
    <url>/2018/09/11/Centos7%E6%90%AD%E5%BB%BAFTP%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¹‹å‰éƒ¨ç½²é˜¿é‡Œäº‘æœåŠ¡å™¨éœ€è¦ä¸Šä¼ ä¸€äº›æ–‡ä»¶ï¼Œæ‰€ä»¥æ­å»ºäº†FTPæœåŠ¡å™¨ï¼Œä¾¿è®°å½•ä¸€ä¸‹ã€‚</p>
<h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul>
<li>Centos7</li>
</ul>
<a id="more"></a>
<h1 id="å®‰è£…VSFTPD"><a href="#å®‰è£…VSFTPD" class="headerlink" title="å®‰è£…VSFTPD"></a>å®‰è£…VSFTPD</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yum install vsftpd -y</span><br></pre></td></tr></table></figure>
<h1 id="é…ç½®VSFTPD"><a href="#é…ç½®VSFTPD" class="headerlink" title="é…ç½®VSFTPD"></a>é…ç½®VSFTPD</h1><p>vsftpdçš„é…ç½®æ–‡ä»¶æ˜¯ <strong> /etc/vsftpd/vsftpd.conf </strong> ï¼Œç›´æ¥ç”¨vimæ‰“å¼€ç¼–è¾‘å³å¯ã€‚<br>ä½¿ç”¨vimç¼–è¾‘å™¨æ‰“å¼€vsftpdé…ç½®æ–‡ä»¶ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim /etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure></p>
<p><strong> å…³é”®ä¿®æ”¹ </strong></p>
<ul>
<li>anonymous_enable=YES<br>  æ˜¯å¦å…è®¸åŒ¿åç”¨æˆ·ç™»é™†FTPã€‚<br>  ä¸ºäº†å®‰å…¨èµ·è§å…³é—­è¿™ä¸ªåŠŸèƒ½ï¼ˆå°†ç­‰å·åçš„YESæ”¹æˆNOå³å¯ï¼‰ã€‚</li>
<li>dirmessage_enable=YES<br>  åˆ‡æ¢ç›®å½•æ—¶ï¼Œæ˜¾ç¤ºç›®å½•ä¸‹.messageæ–‡ä»¶ä¸­çš„å†…å®¹<br>  é»˜è®¤æ˜¯å¼€å¯çš„</li>
<li>local_umask=022<br>  FTPä¸Šæœ¬åœ°çš„æ–‡ä»¶æƒé™ï¼Œé»˜è®¤æ˜¯077ï¼Œä¸è¿‡vsftpdå®‰è£…åçš„é…ç½®æ–‡ä»¶é‡Œé»˜è®¤æ˜¯022.<br>  æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šæƒ…å†µä¸ç”¨ä¿®æ”¹ã€‚</li>
<li>xferlog_enable=YES<br>  å¯ç”¨ä¸Šä¼ å’Œä¸‹è½½çš„æ—¥å¿—åŠŸèƒ½ï¼Œé»˜è®¤å¼€å¯ã€‚</li>
<li>ftpd_banner=XXXX<br>  FTPçš„æ¬¢è¿ä¿¡æ¯ã€‚</li>
<li>data_connection_timeout=120<br>  æ•°æ®è¿æ¥è¶…æ—¶æ—¶é—´ã€‚</li>
</ul>
<h1 id="å¯åŠ¨VSFTPD"><a href="#å¯åŠ¨VSFTPD" class="headerlink" title="å¯åŠ¨VSFTPD"></a>å¯åŠ¨VSFTPD</h1><p>å¼€æœºå¯åŠ¨<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl <span class="built_in">enable</span> vsftpd.service</span><br><span class="line">$ systemctl start vsftpd.service</span><br></pre></td></tr></table></figure></p>
<h1 id="åˆ›å»ºFTPç”¨æˆ·"><a href="#åˆ›å»ºFTPç”¨æˆ·" class="headerlink" title="åˆ›å»ºFTPç”¨æˆ·"></a>åˆ›å»ºFTPç”¨æˆ·</h1><p>ä¿®æ”¹å®Œvsftpdçš„é…ç½®æ–‡ä»¶ä¹‹åæˆ‘ä»¬è¿˜æ˜¯ä¸èƒ½ä½¿ç”¨vsftpdï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰è®¾ç½®ftpçš„ç”¨æˆ·ã€‚<br>æ·»åŠ ä¸€ä¸ªåä¸ºftpuserçš„ç”¨æˆ·ï¼Œç”¨æˆ·æ–‡ä»¶å¤¹ä½ç½®ä¸ºï¼š/home/ftpdirï¼Œä¸”ç¦æ­¢æ­¤ç”¨æˆ·ç™»é™†æœåŠ¡å™¨ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ useradd -d /home/ftpdir -s /sbin/nologin ftpuser</span><br><span class="line">$ passwd ftpuser</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ—¶å€™ç³»ç»Ÿä¼šè¦æ±‚æ‚¨è¾“å…¥æ–°çš„å¯†ç å¹¶ä¸”é‡å¤ä¸€éã€‚é¡ºä¾¿ä¸€æåœ¨SSHä¸­ï¼Œå¯†ç ä¸€èˆ¬ä¸ä¼šå›æ˜¾ï¼Œæ‰€ä»¥åˆå­¦è€…å¯èƒ½ä¼šè§‰å¾—è¾“è¿›å»æ²¡ååº”ï¼Œå…¶å®æ˜¯å·²ç»è¾“è¿›å»äº†ã€‚<br>è°ƒæ•´æ–‡ä»¶å¤¹æƒé™<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ chmod 777 /home/ftpdir</span><br><span class="line">$ <span class="built_in">cd</span> /home</span><br><span class="line">$ ls -l</span><br></pre></td></tr></table></figure></p>
<p><img src="chmod_ftpdir.png" alt></p>
<h1 id="è°ƒæ•´é˜²ç«å¢™"><a href="#è°ƒæ•´é˜²ç«å¢™" class="headerlink" title="è°ƒæ•´é˜²ç«å¢™"></a>è°ƒæ•´é˜²ç«å¢™</h1><p>æˆ‘è¿™é‡Œç”¨çš„æ˜¯ä¼ ç»Ÿçš„ç®¡ç†æ–¹å¼<br>åœ¨CentOS 7æˆ–RHEL 7æˆ–Fedoraä¸­é˜²ç«å¢™ç”±firewalldæ¥ç®¡ç†ï¼Œéœ€è¦è¿˜åŸ<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl stop firewalld  </span><br><span class="line">$ systemctl mask firewalld</span><br></pre></td></tr></table></figure></p>
<p>å¹¶ä¸”å®‰è£…iptables-servicesï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yum install iptables-services -y</span><br></pre></td></tr></table></figure></p>
<p>è®¾ç½®å¼€æœºå¯åŠ¨ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl <span class="built_in">enable</span> iptables</span><br><span class="line">$ systemctl start iptables</span><br></pre></td></tr></table></figure></p>
<h2 id="å¼€æ”¾ç«¯å£"><a href="#å¼€æ”¾ç«¯å£" class="headerlink" title="å¼€æ”¾ç«¯å£"></a>å¼€æ”¾ç«¯å£</h2><p><strong> ä¸»åŠ¨æ¨¡å¼ </strong><br>ä½¿ç”¨Vimç¼–è¾‘å™¨æ‰“å¼€iptablesé…ç½®æ–‡ä»¶ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure></p>
<p>æ·»åŠ <br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 21 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>é‡å¯æœåŠ¡<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctlrestart iptables.service</span><br></pre></td></tr></table></figure></p>
<p><strong> è¢«åŠ¨æ¨¡å¼(æœªæµ‹è¯•) </strong></p>
<p>å¦‚æœftpå¤„äºè¢«åŠ¨æ¨¡å¼ä¸‹ï¼Œé™¤äº†éœ€è¦ä¿®æ”¹iptablesçš„é…ç½®æ–‡ä»¶ä»¥å¤–ï¼Œè¿˜éœ€è¦ä¿®æ”¹vsftpdçš„é…ç½®æ–‡ä»¶ã€‚<br>é¦–å…ˆæ˜¯ä¿®æ”¹vsftpdçš„é…ç½®æ–‡ä»¶ï¼š<br>ä½¿ç”¨Vimç¼–è¾‘å™¨æ‰“å¼€vsftpdé…ç½®æ–‡ä»¶ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim /etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure></p>
<p>ç°åœ¨é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ° <strong> â€œconnect_from_port_20=YESâ€ </strong> å¹¶å°†å®ƒä¿®æ”¹ä¸º <strong> â€œconnect_from_port_20=NOâ€ </strong> ï¼Œå…³é—­æ‰vsftpdçš„ä¸»åŠ¨æ¨¡å¼ã€‚</p>
<p>ç„¶ååœ¨é…ç½®æ–‡ä»¶çš„æœ«å°¾è¿½åŠ ï¼š<br><strong> ä½¿vsftpdè¿è¡Œåœ¨è¢«åŠ¨æ¨¡å¼ </strong><br>pasv_enable=YES<br><strong> è¢«åŠ¨æ¨¡å¼æœ€å°ç«¯å£å·30000 </strong><br>pasv_min_port=30000<br><strong> è¢«åŠ¨æ¨¡å¼æœ€å¤§ç«¯å£å·31000 </strong><br>pasv_max_port=31000</p>
<p>ä¿å­˜é…ç½®æ–‡ä»¶å¹¶é€€å‡ºã€‚<br>ç„¶åé‡å¯vsftpdæœåŠ¡ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl restart vsftpd.service</span><br></pre></td></tr></table></figure></p>
<p>ç„¶åå†ä½¿ç”¨Vimç¼–è¾‘å™¨æ‰“å¼€iptablesé…ç½®æ–‡ä»¶ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ vim /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure></p>
<p>æ·»åŠ è¿™ä¸¤å¥è¯ï¼šï¼ˆâ€œ#â€å¼€å¤´çš„æ˜¯æ³¨é‡Šï¼Œå¯ä»¥ä¸æ·»åŠ ï¼‰<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¼€æ”¾ftpåè®®21ç«¯å£ï¼Œå…è®¸æ¥å—æ¥è‡ª21ç«¯å£çš„æ–°å»ºTCPè¿æ¥</span></span><br><span class="line">-A INPUT -p tcp -m state --state NEW -m tcp --dport 21 -j ACCEPT</span><br><span class="line"><span class="comment">#å¼€æ”¾30000-31000å·ç«¯å£ï¼Œå…è®¸æ¥å—æ¥è‡ªæ­¤ç«¯å£å·æ®µçš„æ–°å»ºTCPè¿æ¥ **</span></span><br><span class="line">-A INPUT -p tcp --dport 30000:31000 -j ACCEPT</span><br></pre></td></tr></table></figure></p>
<p>ä¿å­˜å¹¶é€€å‡ºï¼Œç„¶åé‡å¯iptablesæœåŠ¡ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl restart iptables.service</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>FTP</category>
      </categories>
      <tags>
        <tag>Centos7</tag>
        <tag>FTP</tag>
        <tag>æœåŠ¡å™¨è¿ç»´</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µè„‘å°æŠ€å·§</title>
    <url>/2018/09/10/%E7%94%B5%E8%84%91%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong> æ—¥å¸¸ç”µè„‘ä½¿ç”¨å°æŠ€å·§ </strong></p>
<a id="more"></a>
<h1 id="ä¸ç”¨æˆªå›¾å·¥å…·æˆªå–æ•´ä¸ªç½‘é¡µ"><a href="#ä¸ç”¨æˆªå›¾å·¥å…·æˆªå–æ•´ä¸ªç½‘é¡µ" class="headerlink" title="ä¸ç”¨æˆªå›¾å·¥å…·æˆªå–æ•´ä¸ªç½‘é¡µ"></a>ä¸ç”¨æˆªå›¾å·¥å…·æˆªå–æ•´ä¸ªç½‘é¡µ</h1><p>æ‰“å¼€æµè§ˆå™¨(æµ‹è¯•chromeå¯ç”¨)å¹¶è°ƒå‡ºæ§åˆ¶å°ï¼Œå¿«æ·é”® <strong> f12 </strong><br>ç„¶åé€‰æ‹©å¿«æ·é”®<code>ctrl + shift + p</code>è°ƒå‡º,å¦‚å›¾(æˆ‘ä¹Ÿå¿˜è®°å«ä»€ä¹ˆäº†),Macä¸‹æ˜¯<code>shift + command + p</code></p>
<p><img src="html_capt.png" alt></p>
<p>è¾“å…¥captï¼Œå‡ºç°ä¸€ä¸‹é€‰æ‹©ï¼Œé€‰æ‹©å¦‚å›¾</p>
<p><img src="html_capt_guide.png" alt></p>
<p>å³å¯æˆªå–æ•´å¼ ç½‘é¡µï¼Œå¹¶è‡ªåŠ¨ä¸‹è½½è‡³æµè§ˆå™¨é»˜è®¤ä¸‹è½½ç›®å½•<br>æµ‹è¯•å›¾å¤ªé•¿å°±ä¸æ”¾äº†ï¼Œå¯ä»¥è‡ªè¡Œæµ‹è¯•ï¼Œåº”è¯¥æµè§ˆå™¨éƒ½é€šç”¨(å›½å¤–)</p>
]]></content>
      <categories>
        <category>ç¨‹åºäººç”Ÿ</category>
      </categories>
      <tags>
        <tag>chrome</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLå…¥é—¨</title>
    <url>/2018/09/10/MySQL%E5%85%A5%E9%97%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong> MySqlå…¥é—¨æ•™ç¨‹,Sqlè¯­å¥å¤ä¹  </strong></p>
<h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul>
<li>centos7</li>
<li>virtualbox</li>
<li>MySQL 5.7</li>
</ul>
<a id="more"></a>
<p><a href="http://www.runoob.com/mysql" target="_blank" rel="noopener">æ•™ç¨‹</a></p>
<h1 id="SQLè¯­è¨€åˆ†ç±»"><a href="#SQLè¯­è¨€åˆ†ç±»" class="headerlink" title="SQLè¯­è¨€åˆ†ç±»"></a>SQLè¯­è¨€åˆ†ç±»</h1><ul>
<li>DQL(æ•°æ®æŸ¥è¯¢è¯­è¨€)<br>  æ•°æ®æŸ¥è¯¢è¯­è¨€DQLåŸºæœ¬ç»“æ„æ˜¯ç”±SELECTå­å¥ï¼ŒFROMå­å¥ï¼ŒWHERE</li>
<li>DML(æ•°æ®æ“çºµè¯­è¨€)<br>  æ•°æ®æ“çºµè¯­è¨€DMLä¸»è¦æœ‰ä¸‰ç§å½¢å¼ï¼šæ’å…¥ï¼šINSERTï¼Œæ›´æ–°ï¼šUPDATEï¼Œåˆ é™¤ï¼šDELETE</li>
<li>DDL(æ•°æ®å®šä¹‰è¯­è¨€)<br>  æ•°æ®å®šä¹‰è¯­è¨€DDLç”¨æ¥åˆ›å»ºæ•°æ®åº“ä¸­çš„å„ç§å¯¹è±¡â€”â€“è¡¨ã€è§†å›¾ã€ç´¢å¼•ã€åŒä¹‰è¯ã€èšç°‡ç­‰</li>
<li>DCL(æ•°æ®æ§åˆ¶è¯­è¨€)<br>  æ•°æ®æ§åˆ¶è¯­è¨€DCLç”¨æ¥æˆäºˆæˆ–å›æ”¶è®¿é—®æ•°æ®åº“çš„æŸç§ç‰¹æƒï¼Œå¹¶æ§åˆ¶æ•°æ®åº“æ“çºµäº‹åŠ¡å‘ç”Ÿçš„æ—¶é—´åŠæ•ˆæœï¼Œå¯¹æ•°æ®åº“å®è¡Œç›‘è§†</li>
</ul>
<h1 id="Centosä¸‹Mysqæ˜¾ç¤ºæ–¹å¼è®¾ç½®"><a href="#Centosä¸‹Mysqæ˜¾ç¤ºæ–¹å¼è®¾ç½®" class="headerlink" title="Centosä¸‹Mysqæ˜¾ç¤ºæ–¹å¼è®¾ç½®"></a>Centosä¸‹Mysqæ˜¾ç¤ºæ–¹å¼è®¾ç½®</h1><ul>
<li><p>ä½¿ç”¨more</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; pager more</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨less</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; pager less</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>lessæ¨¡å¼ä¸‹æŒ‰ä¸‹é”®ç›˜qé€€å‡º</p>
<ul>
<li><p>è¿˜åŸ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; nopager</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨\GæŒ‰è¡Œå‚ç›´æ˜¾ç¤ºç»“æœ<br>å¦‚æœä¸€è¡Œå¾ˆé•¿ï¼Œéœ€è¦è¿™è¡Œæ˜¾ç¤ºçš„è¯ï¼Œçœ‹èµ·ç»“æœæ¥å°±éå¸¸çš„éš¾å—ã€‚åœ¨SQLè¯­å¥æˆ–è€…å‘½ä»¤åä½¿ç”¨\Gè€Œä¸æ˜¯åˆ†å·ç»“å°¾ï¼Œå¯ä»¥å°†æ¯ä¸€è¡Œçš„å€¼å‚ç›´è¾“å‡ºã€‚è¿™ä¸ªå¯èƒ½ä¹Ÿæ˜¯å¤§å®¶å¯¹äºMySQLæœ€ç†Ÿæ‚‰çš„åŒºåˆ«äºå…¶ä»–æ•°æ®åº“å·¥å…·çš„ä¸€ä¸ªç‰¹æ€§äº†ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from user\G</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="MySQLç”¨æˆ·è®¾ç½®"><a href="#MySQLç”¨æˆ·è®¾ç½®" class="headerlink" title="MySQLç”¨æˆ·è®¾ç½®"></a>MySQLç”¨æˆ·è®¾ç½®</h1><p>å¦‚æœä½ éœ€è¦æ·»åŠ  MySQL ç”¨æˆ·ï¼Œä½ åªéœ€è¦åœ¨ mysql æ•°æ®åº“ä¸­çš„ user è¡¨æ·»åŠ æ–°ç”¨æˆ·å³å¯ã€‚</p>
<p>ä»¥ä¸‹ä¸ºæ·»åŠ ç”¨æˆ·çš„çš„å®ä¾‹ï¼Œç”¨æˆ·åä¸ºguestï¼Œå¯†ç ä¸ºguest123ï¼Œå¹¶æˆæƒç”¨æˆ·å¯è¿›è¡Œ SELECT, INSERT å’Œ UPDATEæ“ä½œæƒé™ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line">mysql&gt; INSERT INTO user </span><br><span class="line">          (host, user, password, </span><br><span class="line">           select_priv, insert_priv, update_priv) </span><br><span class="line">           VALUES (<span class="string">'localhost'</span>, <span class="string">'guest'</span>, </span><br><span class="line">           PASSWORD(<span class="string">'guest123'</span>), <span class="string">'Y'</span>, <span class="string">'Y'</span>, <span class="string">'Y'</span>);</span><br><span class="line">Query OK, 1 row affected (0.20 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT host, user, password FROM user WHERE user = <span class="string">'guest'</span>;</span><br><span class="line">+-----------+---------+------------------+</span><br><span class="line">| host      | user    | password         |</span><br><span class="line">+-----------+---------+------------------+</span><br><span class="line">| localhost | guest | 6f8c114b58f2ce9e |</span><br><span class="line">+-----------+---------+------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure></p>
<p><strong> æ³¨æ„ï¼šåœ¨ MySQL5.7 ä¸­ user è¡¨çš„ password å·²æ¢æˆäº†authentication_stringã€‚ </strong></p>
<p><strong> error </strong><br>è¿™ç§æ–¹å¼å‡ºç°è¿‡mysqlæ’å…¥ç”¨æˆ·çš„æ—¶å€™ï¼Œçªç„¶å‡ºç°äº†<strong> Field â€˜ssl_cipherâ€™ doesnâ€™t have a default value </strong> çš„é”™è¯¯ï¼Œç°å·²è§£å†³ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š<br>åœ¨mysqlçš„userè¡¨ä¸­å¢åŠ è¿æ¥ç”¨æˆ·å¸å·ï¼š<br>è¿™é‡Œä¸è¦ç›´æ¥ä½¿ç”¨INSERTè¯­å¥æ·»åŠ userè®°å½•ï¼Œä½¿ç”¨INSERTå¯èƒ½å‡ºç°ï¼š<br>ERROR 1364 (HY000): Field â€˜ssl_cipherâ€™ doesnâ€™t have a default valueé”™è¯¯ã€‚</p>
<p>ä½ å¯ä»¥åœ¨åˆ›å»ºç”¨æˆ·æ—¶ï¼Œä¸ºç”¨æˆ·æŒ‡å®šæƒé™ï¼Œåœ¨å¯¹åº”çš„æƒé™åˆ—ä¸­ï¼Œåœ¨æ’å…¥è¯­å¥ä¸­è®¾ç½®ä¸º â€˜Yâ€™ å³å¯ï¼Œç”¨æˆ·æƒé™åˆ—è¡¨å¦‚ä¸‹ï¼š</p>
<ul>
<li>Select_priv</li>
<li>Insert_priv</li>
<li>Update_priv</li>
<li>Delete_priv</li>
<li>Create_priv</li>
<li>Drop_priv</li>
<li>Reload_priv</li>
<li>Shutdown_priv</li>
<li>Process_priv</li>
<li>File_priv</li>
<li>Grant_priv</li>
<li>References_priv</li>
<li>Index_priv</li>
<li>Alter_priv</li>
</ul>
<p>å¦å¤–ä¸€ç§æ·»åŠ ç”¨æˆ·çš„æ–¹æ³•ä¸ºé€šè¿‡SQLçš„ <strong> GRANT </strong> å‘½ä»¤ï¼Œä»¥ä¸‹å‘½ä»¤ä¼šæ·»åŠ ç”¨æˆ· zara ï¼Œå¯†ç ä¸º zara123 ã€‚<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt;GRANT SELECT ON *.* TO <span class="string">'zara'</span>@<span class="string">'localhost'</span> IDENTIFIED BY <span class="string">'zara123'</span> </span><br><span class="line">    -&gt;WITH GRANT OPTION;</span><br><span class="line">Query OK</span><br></pre></td></tr></table></figure></p>
<p>ä¸ºæ•°æ®åº“TUTORIALSæ·»åŠ ç”¨æˆ· zara ï¼Œå¯†ç ä¸º zara123<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP</span><br><span class="line">    -&gt; ON TUTORIALS.*</span><br><span class="line">    -&gt; TO <span class="string">'zara'</span>@<span class="string">'localhost'</span></span><br><span class="line">    -&gt; IDENTIFIED BY <span class="string">'zara123'</span>;</span><br></pre></td></tr></table></figure></p>
<h1 id="ç®¡ç†æ•°æ®åº“å‘½ä»¤"><a href="#ç®¡ç†æ•°æ®åº“å‘½ä»¤" class="headerlink" title="ç®¡ç†æ•°æ®åº“å‘½ä»¤"></a>ç®¡ç†æ•°æ®åº“å‘½ä»¤</h1><h2 id="USE-dbname"><a href="#USE-dbname" class="headerlink" title="USE (dbname);"></a>USE (dbname);</h2><p>é€‰æ‹©è¦æ“ä½œçš„æ•°æ®åº“ï¼Œä¹‹åæ‰€æ‰§è¡Œçš„mysqlå‘½ä»¤éƒ½æ˜¯é’ˆå¯¹è¯¥æ•°æ®åº“<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br></pre></td></tr></table></figure></p>
<h2 id="SHOW-DATABASES"><a href="#SHOW-DATABASES" class="headerlink" title="SHOW DATABASES;"></a>SHOW DATABASES;</h2><p>åˆ—å‡ºMysqlæ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„æ•°æ®åº“åˆ—è¡¨<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SHOW DATABASES;</span><br></pre></td></tr></table></figure></p>
<h2 id="SHOW-TABLES"><a href="#SHOW-TABLES" class="headerlink" title="SHOW TABLES;"></a>SHOW TABLES;</h2><p>æ˜¾ç¤ºæŒ‡å®šæ•°æ®åº“çš„æ‰€æœ‰è¡¨ï¼Œä½¿ç”¨è¯¥å‘½ä»¤å‰éœ€è¦ä½¿ç”¨ use å‘½ä»¤æ¥é€‰æ‹©è¦æ“ä½œçš„æ•°æ®åº“ã€‚<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SHOW TABLES;</span><br></pre></td></tr></table></figure></p>
<h2 id="SHOW-COLUMNS-FROM-tablename"><a href="#SHOW-COLUMNS-FROM-tablename" class="headerlink" title="SHOW COLUMNS FROM (tablename):"></a>SHOW COLUMNS FROM (tablename):</h2><p>æ˜¾ç¤ºæ•°æ®è¡¨çš„å±æ€§ï¼Œå±æ€§ç±»å‹ï¼Œä¸»é”®ä¿¡æ¯ ï¼Œæ˜¯å¦ä¸º NULLï¼Œé»˜è®¤å€¼ç­‰å…¶ä»–ä¿¡æ¯ã€‚</p>
<h2 id="SHOW-INDEX-FROM-tablename"><a href="#SHOW-INDEX-FROM-tablename" class="headerlink" title="SHOW INDEX FROM (tablename):"></a>SHOW INDEX FROM (tablename):</h2><p>æ˜¾ç¤ºæ•°æ®è¡¨çš„è¯¦ç»†ç´¢å¼•ä¿¡æ¯ï¼ŒåŒ…æ‹¬PRIMARY KEYï¼ˆä¸»é”®ï¼‰ã€‚<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SHOW INDEX FROM user;</span><br></pre></td></tr></table></figure></p>
<h2 id="SHOW-TABLE-STATUS-LIKE-FROM-db-name-LIKE-â€˜patternâ€™-G"><a href="#SHOW-TABLE-STATUS-LIKE-FROM-db-name-LIKE-â€˜patternâ€™-G" class="headerlink" title="SHOW TABLE STATUS LIKE [FROM db_name] [LIKE â€˜patternâ€™] \G:"></a>SHOW TABLE STATUS LIKE [FROM db_name] [LIKE â€˜patternâ€™] \G:</h2><p>è¯¥å‘½ä»¤å°†è¾“å‡ºMysqlæ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„æ€§èƒ½åŠç»Ÿè®¡ä¿¡æ¯ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SHOW TABLE STATUS FROM mysql;</span><br></pre></td></tr></table></figure>
<h1 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h1><p>ç™»é™† MySQL æœåŠ¡åï¼Œä½¿ç”¨ create å‘½ä»¤åˆ›å»ºæ•°æ®åº“ï¼Œè¯­æ³•å¦‚ä¸‹:<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> booklib;</span><br></pre></td></tr></table></figure></p>
<h1 id="åˆ é™¤æ•°æ®åº“"><a href="#åˆ é™¤æ•°æ®åº“" class="headerlink" title="åˆ é™¤æ•°æ®åº“"></a>åˆ é™¤æ•°æ®åº“</h1><p>å¦‚æœä½¿ç”¨æ™®é€šç”¨æˆ·å¯èƒ½éœ€è¦æƒé™æ¥è¿›è¡Œåˆ é™¤æ•°æ®åº“ï¼Œç™»é™†rootè´¦æˆ·ï¼Œæ‹¥æœ‰æœ€é«˜æƒé™ï¼Œåˆ é™¤æ•°æ®åº“éœ€è¦è°¨æ…ï¼Œä¸€æ—¦åˆ é™¤ï¼Œæ•°æ®å°†ä¼šæ¶ˆå¤±ã€‚è¯­æ³•å¦‚ä¸‹<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> (dbname);</span><br></pre></td></tr></table></figure></p>
<h1 id="MySQLæ•°æ®ç±»å‹"><a href="#MySQLæ•°æ®ç±»å‹" class="headerlink" title="MySQLæ•°æ®ç±»å‹"></a>MySQLæ•°æ®ç±»å‹</h1><ul>
<li>æ•°å­—ç±»å‹<ul>
<li>æ•´æ•°: tinyintã€smallintã€mediumintã€intã€bigint</li>
<li>æµ®ç‚¹æ•°: floatã€doubleã€realã€decimal</li>
</ul>
</li>
<li>æ—¥æœŸå’Œæ—¶é—´: dateã€timeã€datetimeã€timestampã€year</li>
<li>å­—ç¬¦ä¸²ç±»å‹<ul>
<li>å­—ç¬¦ä¸²: charã€varchar</li>
<li>æ–‡æœ¬: tinytextã€textã€mediumtextã€longtext</li>
</ul>
</li>
<li>äºŒè¿›åˆ¶(å¯ç”¨æ¥å­˜å‚¨å›¾ç‰‡ã€éŸ³ä¹ç­‰): tinyblobã€blobã€mediumblobã€longblob</li>
</ul>
<h2 id="å­—ç¬¦ä¸²ç±»å‹"><a href="#å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹"></a>å­—ç¬¦ä¸²ç±»å‹</h2><table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>å•ä½</th>
<th>æœ€å¤§</th>
<th>ç‰¹æ€§</th>
</tr>
</thead>
<tbody>
<tr>
<td>CHAR</td>
<td>å­—ç¬¦</td>
<td>æœ€å¤§ä¸º255å­—ç¬¦</td>
<td>å­˜å‚¨å®šé•¿ï¼Œå®¹æ˜“é€ æˆç©ºé—´çš„æµªè´¹</td>
</tr>
<tr>
<td>VARCHAR</td>
<td>å­—ç¬¦</td>
<td>å¯ä»¥è¶…è¿‡255ä¸ªå­—ç¬¦</td>
<td>å­˜å‚¨å˜é•¿ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´</td>
</tr>
<tr>
<td>TEXT</td>
<td>å­—èŠ‚</td>
<td>æ€»å¤§å°ä¸º65535å­—èŠ‚ï¼Œçº¦ä¸º64KB</td>
<td>-</td>
</tr>
</tbody>
</table>
<ul>
<li>TEXTåœ¨MySQLå†…éƒ¨å¤§å¤šå­˜å‚¨æ ¼å¼ä¸ºæº¢å‡ºé¡µï¼Œæ•ˆç‡ä¸å¦‚CHAR</li>
<li>Mysqlé»˜è®¤ä¸ºutf-8ï¼Œé‚£ä¹ˆåœ¨è‹±æ–‡æ¨¡å¼ä¸‹1ä¸ªå­—ç¬¦=1ä¸ªå­—èŠ‚ï¼Œåœ¨ä¸­æ–‡æ¨¡å¼ä¸‹1ä¸ªå­—ç¬¦=3ä¸ªå­—èŠ‚ã€‚</li>
</ul>
<h2 id="æ•°å­—ç±»å‹"><a href="#æ•°å­—ç±»å‹" class="headerlink" title="æ•°å­—ç±»å‹"></a>æ•°å­—ç±»å‹</h2><h3 id="æ•´å½¢"><a href="#æ•´å½¢" class="headerlink" title="æ•´å½¢"></a>æ•´å½¢</h3><table>
<thead>
<tr>
<th style="text-align:left">type</th>
<th style="text-align:left">Storage</th>
<th style="text-align:left">Minumun Value</th>
<th style="text-align:left">Maximum Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">(Bytes)</td>
<td style="text-align:left">(Signed/Unsigned)</td>
<td style="text-align:left">(Signed/Unsigned)</td>
</tr>
<tr>
<td style="text-align:left">TINYINT</td>
<td style="text-align:left">1</td>
<td style="text-align:left">-128</td>
<td style="text-align:left">127</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">0</td>
<td style="text-align:left">255</td>
</tr>
<tr>
<td style="text-align:left">SMALLINT</td>
<td style="text-align:left">2</td>
<td style="text-align:left">-32768</td>
<td style="text-align:left">32767</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">0</td>
<td style="text-align:left">65535</td>
</tr>
<tr>
<td style="text-align:left">MEDIUMINT</td>
<td style="text-align:left">3</td>
<td style="text-align:left">-8388608</td>
<td style="text-align:left">8388607</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">0</td>
<td style="text-align:left">16777215</td>
</tr>
<tr>
<td style="text-align:left">INT</td>
<td style="text-align:left">4</td>
<td style="text-align:left">-2147483648</td>
<td style="text-align:left">2147483647</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">0</td>
<td style="text-align:left">4294967295</td>
</tr>
<tr>
<td style="text-align:left">BIGINT</td>
<td style="text-align:left">8</td>
<td style="text-align:left">-9223372036854775808</td>
<td style="text-align:left">9223372036854775807</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">0</td>
<td style="text-align:left">18446744073709551615</td>
</tr>
</tbody>
</table>
<h3 id="æµ®ç‚¹å‹"><a href="#æµ®ç‚¹å‹" class="headerlink" title="æµ®ç‚¹å‹"></a>æµ®ç‚¹å‹</h3><table>
<thead>
<tr>
<th>å±æ€§</th>
<th>å­˜å‚¨ç©ºé—´</th>
<th>ç²¾åº¦</th>
<th>ç²¾ç¡®æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>FLOAT(M, D)</td>
<td>4 bytes</td>
<td>å•ç²¾åº¦</td>
<td>éç²¾ç¡®</td>
<td>å•ç²¾åº¦æµ®ç‚¹å‹ï¼Œmæ€»ä¸ªæ•°ï¼Œdå°æ•°ä½</td>
</tr>
<tr>
<td>DOUBLE(M, D)</td>
<td>8 bytes</td>
<td>åŒç²¾åº¦</td>
<td>æ¯”Floatç²¾åº¦é«˜</td>
<td>åŒç²¾åº¦æµ®ç‚¹å‹ï¼Œmæ€»ä¸ªæ•°ï¼Œdå°æ•°ä½</td>
</tr>
</tbody>
</table>
<ul>
<li>FLOATå®¹æ˜“é€ æˆç²¾åº¦ä¸¢å¤±</li>
</ul>
<h3 id="å®šç‚¹æ•°DECIMAL"><a href="#å®šç‚¹æ•°DECIMAL" class="headerlink" title="å®šç‚¹æ•°DECIMAL"></a>å®šç‚¹æ•°DECIMAL</h3><ul>
<li>é«˜ç²¾åº¦çš„æ•°æ®ç±»å‹ï¼Œå¸¸ç”¨æ¥å­˜å‚¨äº¤æ˜“ç›¸å…³çš„æ•°æ®</li>
<li>DECIMAL(M,N).Mä»£è¡¨æ€»ç²¾åº¦ï¼ŒNä»£è¡¨å°æ•°ç‚¹å³ä¾§çš„ä½æ•°ï¼ˆæ ‡åº¦ï¼‰</li>
<li>1 &lt; M &lt; 254, 0 &lt; N &lt; 60;</li>
<li>å­˜å‚¨ç©ºé—´å˜é•¿</li>
</ul>
<h2 id="æ—¶é—´ç±»å‹"><a href="#æ—¶é—´ç±»å‹" class="headerlink" title="æ—¶é—´ç±»å‹"></a>æ—¶é—´ç±»å‹</h2><table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>å­—èŠ‚</th>
<th>ä¾‹</th>
<th>ç²¾ç¡®æ€§</th>
</tr>
</thead>
<tbody>
<tr>
<td>DATE</td>
<td>ä¸‰å­—èŠ‚</td>
<td>2015-05-01</td>
<td>ç²¾ç¡®åˆ°å¹´æœˆæ—¥</td>
</tr>
<tr>
<td>TIME</td>
<td>ä¸‰å­—èŠ‚</td>
<td>11:12:00</td>
<td>ç²¾ç¡®åˆ°æ—¶åˆ†ç§’</td>
</tr>
<tr>
<td>DATETIME</td>
<td>å…«å­—èŠ‚</td>
<td>2015-05-01 11::12:00</td>
<td>ç²¾ç¡®åˆ°å¹´æœˆæ—¥æ—¶åˆ†ç§’</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td></td>
<td>2015-05-01 11::12:00</td>
<td>ç²¾ç¡®åˆ°å¹´æœˆæ—¥æ—¶åˆ†ç§’</td>
</tr>
</tbody>
</table>
<ul>
<li>MySQLåœ¨<code>5.6.4</code>ç‰ˆæœ¬ä¹‹åï¼Œ<code>TIMESTAMP</code>å’Œ<code>DATETIME</code>æ”¯æŒåˆ°å¾®ç§’ã€‚</li>
<li><code>TIMESTAMP</code>ä¼šæ ¹æ®ç³»ç»Ÿæ—¶åŒºè¿›è¡Œè½¬æ¢ï¼Œ<code>DATETIME</code>åˆ™ä¸ä¼š</li>
<li>å­˜å‚¨èŒƒå›´çš„åŒºåˆ«  <ul>
<li><code>TIMESTAMP</code>å­˜å‚¨èŒƒå›´ï¼š1970-01-01 00::00:01 to 2038-01-19 03:14:07</li>
<li><code>DATETIME</code>çš„å­˜å‚¨èŒƒå›´ï¼š1000-01-01 00:00:00 to 9999-12-31 23:59:59</li>
</ul>
</li>
<li>ä¸€èˆ¬ä½¿ç”¨<code>TIMESTAMP</code>å›½é™…åŒ–</li>
<li>å¦‚å­˜æ—¶é—´æˆ³ä½¿ç”¨æ•°å­—ç±»å‹<code>BIGINT</code></li>
</ul>
<h1 id="åˆ›å»ºæ•°æ®è¡¨"><a href="#åˆ›å»ºæ•°æ®è¡¨" class="headerlink" title="åˆ›å»ºæ•°æ®è¡¨"></a>åˆ›å»ºæ•°æ®è¡¨</h1><p>åˆ›å»ºMYSQLæ•°æ®ä»¥ä¸‹ä¿¡æ¯</p>
<ul>
<li>è¡¨å</li>
<li>è¡¨å­—æ®µå</li>
<li>å®šä¹‰è¡¨æ¯ä¸ªå­—æ®µ</li>
</ul>
<p>è¯­æ³•<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> (tablename) (<span class="keyword">column</span> <span class="keyword">name</span> <span class="keyword">column</span> <span class="keyword">type</span>, ...)</span><br></pre></td></tr></table></figure></p>
<p>ä¾‹å­ï¼šåˆ›å»ºä¸€ä¸ªä¹¦æœ¬è¡¨ï¼Œä¹¦æœ¬æœ‰ç¼–å·,åå­—ï¼Œå‡ºç‰ˆç¤¾ï¼Œä½œè€…åç§°ï¼Œä»·æ ¼ï¼Œå‡ºç‰ˆæ—¥æœŸ<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE IF NOT EXISTS book(</span><br><span class="line">     &gt; book_id INT UNSIGNED AUTO_INCREMENT,</span><br><span class="line">     &gt; book_name VARCHAR(50) NOT NULL,</span><br><span class="line">     &gt; author VARCHAR(10) NOT NULL,</span><br><span class="line">     &gt; pub VARCHAR(100),</span><br><span class="line">     &gt; pub_date DATE,</span><br><span class="line">     &gt; PRIMARY KEY (book_id)</span><br><span class="line">     &gt; ) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br></pre></td></tr></table></figure></p>
<p>è§£æï¼š</p>
<ul>
<li>å¦‚æœä¸æƒ³å­—æ®µä¸ºNULLï¼Œå¯ä»¥è®¾ç½®å­—æ®µä¸ºNOT NULLï¼Œä½†æ˜¯ä¸€æ—¦å­—æ®µè¯¥æ•°å€¼ä¸ºnullï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</li>
<li>AUTO_INCREMENTå®šä¹‰åˆ—ä¸ºè‡ªå¢çš„å±æ€§ï¼Œä¸€èˆ¬ç”¨äºä¸»é”®ï¼Œæ•°å€¼ä¼šè‡ªåŠ¨åŠ 1ã€‚</li>
<li>PRIMARY KEYå…³é”®å­—ç”¨äºå®šä¹‰åˆ—ä¸ºä¸»é”®ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å¤šåˆ—æ¥å®šä¹‰ä¸»é”®ï¼Œåˆ—é—´ä»¥é€—å·åˆ†éš”ã€‚</li>
<li>ENGINE è®¾ç½®å­˜å‚¨å¼•æ“ï¼ŒCHARSET è®¾ç½®ç¼–ç ã€‚</li>
</ul>
<p><img src="create_table_engine.png" alt></p>
<h1 id="åˆ é™¤æ•°æ®è¡¨"><a href="#åˆ é™¤æ•°æ®è¡¨" class="headerlink" title="åˆ é™¤æ•°æ®è¡¨"></a>åˆ é™¤æ•°æ®è¡¨</h1><p>MySQLåˆ é™¤æ•°æ®è¡¨ï¼Œè¯­æ³•<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> (tablename);</span><br></pre></td></tr></table></figure></p>
<p>ç¤ºä¾‹:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; DROP TABLE book;</span><br></pre></td></tr></table></figure></p>
<h1 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h1><p>ä½¿ç”¨ <strong> INSERT INTO </strong> è¯­å¥æ¥æ’å…¥æ•°æ®,è¯­æ³•<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name ( field1, field2,...fieldN )</span><br><span class="line">                       <span class="keyword">VALUES</span></span><br><span class="line">                       ( value1, value2,...valueN );</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>å¦‚æœæ•°æ®æ˜¯å­—ç¬¦å‹ï¼Œå¿…é¡»ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·ï¼Œå¦‚ï¼šâ€valueâ€ã€‚</p>
</blockquote>
<p>ç¤ºä¾‹:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; INSERT INTO book(book_name, author, pub, pub_date)</span><br><span class="line">    -&gt; VALUES(<span class="string">'Android Coder'</span>, <span class="string">'bitch'</span>, <span class="string">'english'</span>, NOW())</span><br></pre></td></tr></table></figure></p>
<p>ä¸€æ¬¡æ’å…¥å¤šè¡Œè¯­å¥<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; INSERT INTO book(book_name, author, pub, pub_date)</span><br><span class="line">    -&gt; VALUES</span><br><span class="line">    -&gt; (<span class="string">'python'</span>, <span class="string">'pp'</span>, <span class="string">'english'</span>, DATE(<span class="string">'2010-08-10'</span>)),</span><br><span class="line">    -&gt; (<span class="string">'kotlin'</span>, <span class="string">'kk'</span>, <span class="string">'amearica'</span>, DATE(<span class="string">'2013-07-10'</span>));</span><br></pre></td></tr></table></figure></p>
<p><img src="insert_table_engine.png" alt><br><img src="inserts_table_engine.png" alt></p>
<h1 id="æŸ¥è¯¢æ•°æ®"><a href="#æŸ¥è¯¢æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ•°æ®"></a>æŸ¥è¯¢æ•°æ®</h1><p>ä½¿ç”¨SQL SELECT æŸ¥è¯¢æ•°æ®,è¯­æ³•<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name,column_name</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line">[<span class="keyword">WHERE</span> Clause]</span><br><span class="line">[<span class="keyword">LIMIT</span> N][ <span class="keyword">OFFSET</span> M]</span><br></pre></td></tr></table></figure></p>
<ul>
<li>æŸ¥è¯¢è¯­å¥ä¸­ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¡¨ï¼Œè¡¨ä¹‹é—´ä½¿ç”¨é€—å·(,)åˆ†å‰²ï¼Œå¹¶ä½¿ç”¨WHEREè¯­å¥æ¥è®¾å®šæŸ¥è¯¢æ¡ä»¶ã€‚</li>
<li>SELECT å‘½ä»¤å¯ä»¥è¯»å–ä¸€æ¡æˆ–è€…å¤šæ¡è®°å½•ã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨æ˜Ÿå·ï¼ˆ*ï¼‰æ¥ä»£æ›¿å…¶ä»–å­—æ®µï¼ŒSELECTè¯­å¥ä¼šè¿”å›è¡¨çš„æ‰€æœ‰å­—æ®µæ•°æ®</li>
<li>ä½ å¯ä»¥ä½¿ç”¨ WHERE è¯­å¥æ¥åŒ…å«ä»»ä½•æ¡ä»¶ã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨ LIMIT å±æ€§æ¥è®¾å®šè¿”å›çš„è®°å½•æ•°ã€‚</li>
<li>ä½ å¯ä»¥é€šè¿‡OFFSETæŒ‡å®šSELECTè¯­å¥å¼€å§‹æŸ¥è¯¢çš„æ•°æ®åç§»é‡ã€‚é»˜è®¤æƒ…å†µä¸‹åç§»é‡ä¸º0ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM book;</span><br></pre></td></tr></table></figure>
<h1 id="WHERE-å­—å¥"><a href="#WHERE-å­—å¥" class="headerlink" title="WHERE å­—å¥"></a>WHERE å­—å¥</h1><p>æˆ‘ä»¬çŸ¥é“ä» MySQL è¡¨ä¸­ä½¿ç”¨ SQL SELECT è¯­å¥æ¥è¯»å–æ•°æ®ã€‚<br>å¦‚éœ€æœ‰æ¡ä»¶åœ°ä»è¡¨ä¸­é€‰å–æ•°æ®ï¼Œå¯å°† WHERE å­å¥æ·»åŠ åˆ° SELECT è¯­å¥ä¸­ã€‚<br>è¯­æ³•<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> field1, field2,...fieldN <span class="keyword">FROM</span> table_name1, table_name2...</span><br><span class="line">[<span class="keyword">WHERE</span> condition1 [<span class="keyword">AND</span> [<span class="keyword">OR</span>]] condition2.....</span><br></pre></td></tr></table></figure></p>
<ul>
<li>æŸ¥è¯¢è¯­å¥ä¸­ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¡¨ï¼Œè¡¨ä¹‹é—´ä½¿ç”¨é€—å·,   </li>
<li>åˆ†å‰²ï¼Œå¹¶ä½¿ç”¨WHEREè¯­å¥æ¥è®¾å®šæŸ¥è¯¢æ¡ä»¶ã€‚</li>
<li>ä½ å¯ä»¥åœ¨ WHERE å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶ã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨ AND æˆ–è€… OR æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ã€‚</li>
<li>WHERE å­å¥ä¹Ÿå¯ä»¥è¿ç”¨äº SQL çš„ DELETE æˆ–è€… UPDATE å‘½ä»¤ã€‚</li>
<li>WHERE å­å¥ç±»ä¼¼äºç¨‹åºè¯­è¨€ä¸­çš„ if æ¡ä»¶ï¼Œæ ¹æ® MySQL è¡¨ä¸­çš„å­—æ®µå€¼æ¥è¯»å–æŒ‡å®šçš„æ•°æ®ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>æ“ä½œç¬¦</th>
<th>æè¿°</th>
<th>å®ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>ç­‰å·ï¼Œæ£€æµ‹ä¸¤è¾¹å€¼æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å›true</td>
<td>A = B è¿”å›true</td>
</tr>
<tr>
<td>&lt;&gt;, !=</td>
<td>ä¸ç­‰äºï¼Œæ£€æµ‹ä¸¤è¾¹å€¼æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å›false</td>
<td>A != B è¿”å›false</td>
</tr>
<tr>
<td>&gt;</td>
<td>å¤§äºï¼Œæ£€æµ‹å·¦è¾¹å€¼æ˜¯å¦å¤§äºå³è¾¹å€¼ï¼Œå¤§äºåˆ™è¿”å›true</td>
<td>A &gt; B è¿”å›true</td>
</tr>
<tr>
<td>&lt;</td>
<td>å°äºï¼Œæ£€æµ‹å·¦è¾¹å€¼æ˜¯å¦å°äºå³è¾¹å€¼ï¼Œå°äºåˆ™è¿”å›true</td>
<td>A &lt; B è¿”å›true</td>
</tr>
<tr>
<td>&gt;=</td>
<td>å¤§äºç­‰äºï¼Œæ£€æµ‹å·¦è¾¹å€¼æ˜¯å¦å¤§äºç­‰äºå³è¾¹å€¼ï¼ŒåŒä¸Š</td>
<td>A &gt;= B è¿”å›true</td>
</tr>
<tr>
<td>&lt;=</td>
<td>å¤§äºç­‰äºï¼Œæ£€æµ‹å·¦è¾¹å€¼æ˜¯å¦å¤§äºç­‰äºå³è¾¹å€¼ï¼ŒåŒä¸Š</td>
<td>A &lt;= B è¿”å›true</td>
</tr>
</tbody>
</table>
<blockquote>
<p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨ MySQL æ•°æ®è¡¨ä¸­è¯»å–æŒ‡å®šçš„æ•°æ®ï¼ŒWHERE å­å¥æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚<br>ä½¿ç”¨ä¸»é”®æ¥ä½œä¸º WHERE å­å¥çš„æ¡ä»¶æŸ¥è¯¢æ˜¯éå¸¸å¿«é€Ÿçš„ã€‚<br>å¦‚æœç»™å®šçš„æ¡ä»¶åœ¨è¡¨ä¸­æ²¡æœ‰ä»»ä½•åŒ¹é…çš„è®°å½•ï¼Œé‚£ä¹ˆæŸ¥è¯¢ä¸ä¼šè¿”å›ä»»ä½•æ•°æ®ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM book WHERE author=<span class="string">'bitch'</span></span><br></pre></td></tr></table></figure>
<p><img src="select_table_engine.png" alt></p>
<h1 id="UPDATE-æŸ¥è¯¢"><a href="#UPDATE-æŸ¥è¯¢" class="headerlink" title="UPDATE æŸ¥è¯¢"></a>UPDATE æŸ¥è¯¢</h1><p>ä½¿ç”¨SQL UPDATEè¯­å¥ä¿®æ”¹æˆ–æ›´æ–°æ•°æ®åº“ä¸­æ•°æ®</p>
<p>è¯­æ³•<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> table_name <span class="keyword">SET</span> field1=<span class="keyword">new</span>-value1, field2=<span class="keyword">new</span>-value2</span><br><span class="line">[<span class="keyword">WHERE</span> Clause]</span><br></pre></td></tr></table></figure></p>
<ul>
<li>ä½ å¯ä»¥åŒæ—¶æ›´æ–°ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µã€‚</li>
<li>ä½ å¯ä»¥åœ¨ WHERE å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶ã€‚</li>
<li>ä½ å¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬è¡¨ä¸­åŒæ—¶æ›´æ–°æ•°æ®ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; UPDATE book SET author = <span class="string">'jack'</span> WHERE book_id = 4;</span><br></pre></td></tr></table></figure>
<p><img src="update_table_engine.png" alt></p>
<h1 id="DELETE-åˆ é™¤"><a href="#DELETE-åˆ é™¤" class="headerlink" title="DELETE åˆ é™¤"></a>DELETE åˆ é™¤</h1><p>SQL çš„ DELETE FROM å‘½ä»¤æ¥åˆ é™¤ MySQL æ•°æ®è¡¨ä¸­çš„è®°å½•ã€‚<br>è¯­æ³•<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name [<span class="keyword">WHERE</span> Clause]</span><br></pre></td></tr></table></figure></p>
<ul>
<li>å¦‚æœæ²¡æœ‰æŒ‡å®š WHERE å­å¥ï¼ŒMySQL è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å°†è¢«åˆ é™¤ã€‚</li>
<li>ä½ å¯ä»¥åœ¨ WHERE å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶</li>
<li>æ‚¨å¯ä»¥åœ¨å•ä¸ªè¡¨ä¸­ä¸€æ¬¡æ€§åˆ é™¤è®°å½•ã€‚</li>
</ul>
<p>è¯·è°¨æ…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; DELETE FROM book WHERE book_name = <span class="string">'TEST'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="delete_table_engine.png" alt></p>
<h1 id="LIKE-å­å¥"><a href="#LIKE-å­å¥" class="headerlink" title="LIKE å­å¥"></a>LIKE å­å¥</h1><p>MySQL ä¸­ä½¿ç”¨ SQL SELECT å‘½ä»¤æ¥è¯»å–æ•°æ®ï¼Œ åŒæ—¶æˆ‘ä»¬å¯ä»¥åœ¨ SELECT è¯­å¥ä¸­ä½¿ç”¨ WHERE å­å¥æ¥è·å–æŒ‡å®šçš„è®°å½•ã€‚<br>WHERE å­å¥ä¸­å¯ä»¥ä½¿ç”¨ç­‰å· = æ¥è®¾å®šè·å–æ•°æ®çš„æ¡ä»¶ï¼Œå¦‚ â€œrunoob_author = â€˜RUNOOB.COMâ€™â€ã€‚<br>ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è·å– runoob_author å­—æ®µå«æœ‰ â€œCOMâ€ å­—ç¬¦çš„æ‰€æœ‰è®°å½•ï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦åœ¨ WHERE å­å¥ä¸­ä½¿ç”¨ SQL LIKE å­å¥ã€‚<br>SQL LIKE å­å¥ä¸­ä½¿ç”¨ç™¾åˆ†å· %å­—ç¬¦æ¥è¡¨ç¤ºä»»æ„å­—ç¬¦ï¼Œç±»ä¼¼äºUNIXæˆ–æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æ˜Ÿå· *ã€‚<br>å¦‚æœæ²¡æœ‰ä½¿ç”¨ç™¾åˆ†å· %, LIKE å­å¥ä¸ç­‰å· = çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p>
<p>è¯­æ³•<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> field1, field2,...fieldN </span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> field1 <span class="keyword">LIKE</span> condition1 [<span class="keyword">AND</span> [<span class="keyword">OR</span>]] filed2 = <span class="string">'somevalue'</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>ä½ å¯ä»¥åœ¨ WHERE å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶ã€‚</li>
<li>ä½ å¯ä»¥åœ¨ WHERE å­å¥ä¸­ä½¿ç”¨LIKEå­å¥ã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨LIKEå­å¥ä»£æ›¿ç­‰å· =ã€‚</li>
<li>LIKE é€šå¸¸ä¸ % ä¸€åŒä½¿ç”¨ï¼Œç±»ä¼¼äºä¸€ä¸ªå…ƒå­—ç¬¦çš„æœç´¢ã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨ AND æˆ–è€… OR æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ã€‚</li>
<li>ä½ å¯ä»¥åœ¨ DELETE æˆ– UPDATE å‘½ä»¤ä¸­ä½¿ç”¨ WHEREâ€¦LIKE å­å¥æ¥æŒ‡å®šæ¡ä»¶ã€‚</li>
</ul>
<blockquote>
<p>like åŒ¹é…/æ¨¡ç³ŠåŒ¹é…ï¼Œä¼šä¸ % å’Œ _ ç»“åˆä½¿ç”¨ã€‚<br>â€˜%aâ€™     //ä»¥aç»“å°¾çš„æ•°æ®<br>â€˜a%â€™     //ä»¥aå¼€å¤´çš„æ•°æ®<br>â€˜%a%â€™    //å«æœ‰açš„æ•°æ®<br>â€˜_a_â€™    //ä¸‰ä½ä¸”ä¸­é—´å­—æ¯æ˜¯açš„<br>â€˜<em>aâ€™     //ä¸¤ä½ä¸”ç»“å°¾å­—æ¯æ˜¯açš„<br>â€˜a</em>â€˜     //ä¸¤ä½ä¸”å¼€å¤´å­—æ¯æ˜¯açš„</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM book WHERE pub LIKE <span class="string">'a%'</span>;</span><br></pre></td></tr></table></figure>
<p><img src="like_table_engine.png" alt></p>
<h1 id="UNION-æ“ä½œç¬¦"><a href="#UNION-æ“ä½œç¬¦" class="headerlink" title="UNION æ“ä½œç¬¦"></a>UNION æ“ä½œç¬¦</h1><p>MySQL UNION æ“ä½œç¬¦ç”¨äºè¿æ¥ä¸¤ä¸ªä»¥ä¸Šçš„ SELECT è¯­å¥çš„ç»“æœç»„åˆåˆ°ä¸€ä¸ªç»“æœé›†åˆä¸­ã€‚å¤šä¸ª SELECT è¯­å¥ä¼šåˆ é™¤é‡å¤çš„æ•°æ®ã€‚</p>
<p>è¯­æ³•<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> expression1, expression2, ... expression_n</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">tables</span></span><br><span class="line">[<span class="keyword">WHERE</span> conditions]</span><br><span class="line"><span class="keyword">UNION</span> [<span class="keyword">ALL</span> | <span class="keyword">DISTINCT</span>]</span><br><span class="line"><span class="keyword">SELECT</span> expression1, expression2, ... expression_n</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">tables</span></span><br><span class="line">[<span class="keyword">WHERE</span> conditions];</span><br></pre></td></tr></table></figure></p>
<ul>
<li>expression1, expression2, â€¦ expression_n: è¦æ£€ç´¢çš„åˆ—ã€‚</li>
<li>tables: è¦æ£€ç´¢çš„æ•°æ®è¡¨ã€‚</li>
<li>WHERE conditions: å¯é€‰ï¼Œ æ£€ç´¢æ¡ä»¶ã€‚</li>
<li>DISTINCT: å¯é€‰ï¼Œåˆ é™¤ç»“æœé›†ä¸­é‡å¤çš„æ•°æ®ã€‚é»˜è®¤æƒ…å†µä¸‹ UNION æ“ä½œç¬¦å·²ç»åˆ é™¤äº†é‡å¤æ•°æ®ï¼Œæ‰€ä»¥ DISTINCT ä¿®é¥°ç¬¦å¯¹ç»“æœæ²¡å•¥å½±å“ã€‚</li>
<li>ALL: å¯é€‰ï¼Œè¿”å›æ‰€æœ‰ç»“æœé›†ï¼ŒåŒ…å«é‡å¤æ•°æ®ã€‚</li>
</ul>
<p><a href="http://www.runoob.com/mysql/mysql-union-operation.html" target="_blank" rel="noopener">æ¡ˆä¾‹</a></p>
<h1 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h1><p>è¯»å–çš„æ•°æ®è¿›è¡Œæ’åºï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ MySQL çš„ ORDER BY å­å¥æ¥è®¾å®šä½ æƒ³æŒ‰å“ªä¸ªå­—æ®µå“ªç§æ–¹å¼æ¥è¿›è¡Œæ’åºï¼Œå†è¿”å›æœç´¢ç»“æœã€‚</p>
<p>è¯­æ³•<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> field1, field2,...fieldN table_name1, table_name2...</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> field1, [field2...] [<span class="keyword">ASC</span> [<span class="keyword">DESC</span>]]</span><br></pre></td></tr></table></figure></p>
<ul>
<li>ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•å­—æ®µæ¥ä½œä¸ºæ’åºçš„æ¡ä»¶ï¼Œä»è€Œè¿”å›æ’åºåçš„æŸ¥è¯¢ç»“æœã€‚</li>
<li>ä½ å¯ä»¥è®¾å®šå¤šä¸ªå­—æ®µæ¥æ’åºã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨ ASC æˆ– DESC å…³é”®å­—æ¥è®¾ç½®æŸ¥è¯¢ç»“æœæ˜¯æŒ‰å‡åºæˆ–é™åºæ’åˆ—ã€‚ </li>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯æŒ‰å‡åºæ’åˆ—ã€‚</li>
<li>ä½ å¯ä»¥æ·»åŠ  WHEREâ€¦LIKE å­å¥æ¥è®¾ç½®æ¡ä»¶ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM book ORDER BY pub_date ASC;</span><br></pre></td></tr></table></figure>
<p><img src="orderby_table_engine.png" alt></p>
<h1 id="åˆ†ç»„"><a href="#åˆ†ç»„" class="headerlink" title="åˆ†ç»„"></a>åˆ†ç»„</h1><p>GROUP BY è¯­å¥æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¯¹ç»“æœé›†è¿›è¡Œåˆ†ç»„ã€‚<br>åœ¨åˆ†ç»„çš„åˆ—ä¸Šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ COUNT, SUM, AVG,ç­‰å‡½æ•°ã€‚</p>
<p>è¯­æ³•<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name, <span class="keyword">function</span>(column_name)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name <span class="keyword">operator</span> <span class="keyword">value</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column_name;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SELECT COUNT(*), book_name FROM book GROUP BY book_name;</span><br></pre></td></tr></table></figure>
<p><img src="groupby_table_engine.png" alt></p>
<p><strong> æ³¨æ„ </strong></p>
<ul>
<li>group by è¯­å¥ç”¨æ³•æœ‰ä¸€ä¸ªæ³¨æ„ç‚¹ï¼Œåœ¨ select è¯­å¥ä¸­ï¼Œæ‰€æŸ¥è¯¢çš„å­—æ®µé™¤äº†èšåˆå‡½æ•°ï¼ˆSUM ,AVG,COUNTâ€¦)ä»¥å¤– å¿…é¡»åªèƒ½æ˜¯åˆ†ç»„çš„å­—æ®µï¼Œä¸¾ä¾‹ï¼š<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> book_id,book_name,<span class="keyword">count</span>(*) <span class="keyword">FROM</span> book <span class="keyword">GROUP</span> <span class="keyword">BY</span> book_name;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>ä»¥ä¸Šä¼šæŠ¥é”™,çº æ­£<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> book_id,book_name,<span class="keyword">count</span>(*) <span class="keyword">FROM</span> book <span class="keyword">GROUP</span> <span class="keyword">BY</span> book_id,book_name;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>åˆ†ç»„åçš„æ¡ä»¶ä½¿ç”¨ HAVING æ¥é™å®šï¼ŒWHERE æ˜¯å¯¹åŸå§‹æ•°æ®è¿›è¡Œæ¡ä»¶é™åˆ¶ã€‚å‡ ä¸ªå…³é”®å­—çš„ä½¿ç”¨é¡ºåºä¸º where ã€group by ã€havingã€order by </li>
</ul>
<h1 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h1><p>ä½¿ç”¨ MySQL çš„ JOIN åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚<br>ä½ å¯ä»¥åœ¨ SELECT, UPDATE å’Œ DELETE è¯­å¥ä¸­ä½¿ç”¨ Mysql çš„ JOIN æ¥è”åˆå¤šè¡¨æŸ¥è¯¢ã€‚<br>JOIN æŒ‰ç…§åŠŸèƒ½å¤§è‡´åˆ†ä¸ºå¦‚ä¸‹ä¸‰ç±»ï¼š</p>
<ul>
<li>INNER JOINï¼ˆå†…è¿æ¥,æˆ–ç­‰å€¼è¿æ¥ï¼‰ï¼šè·å–ä¸¤ä¸ªè¡¨ä¸­å­—æ®µåŒ¹é…å…³ç³»çš„è®°å½•ã€‚</li>
<li>LEFT JOINï¼ˆå·¦è¿æ¥ï¼‰ï¼šè·å–å·¦è¡¨æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å³è¡¨æ²¡æœ‰å¯¹åº”åŒ¹é…çš„è®°å½•ã€‚</li>
<li>RIGHT JOINï¼ˆå³è¿æ¥ï¼‰ï¼š ä¸ LEFT JOIN ç›¸åï¼Œç”¨äºè·å–å³è¡¨æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å·¦è¡¨æ²¡æœ‰å¯¹åº”åŒ¹é…çš„è®°å½•ã€‚</li>
</ul>
<p><a href="http://www.runoob.com/mysql/mysql-join.html" target="_blank" rel="noopener">å®ä¾‹</a></p>
<h1 id="NULL-å€¼å¤„ç†"><a href="#NULL-å€¼å¤„ç†" class="headerlink" title="NULL å€¼å¤„ç†"></a>NULL å€¼å¤„ç†</h1><p>æˆ‘ä»¬å·²ç»çŸ¥é“ MySQL ä½¿ç”¨ SQL SELECT å‘½ä»¤åŠ WHERE å­å¥æ¥è¯»å–æ•°æ®è¡¨ä¸­çš„æ•°æ®,ä½†æ˜¯å½“æä¾›çš„æŸ¥è¯¢æ¡ä»¶å­—æ®µä¸º NULL æ—¶ï¼Œè¯¥å‘½ä»¤å¯èƒ½å°±æ— æ³•æ­£å¸¸å·¥ä½œã€‚<br>ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼ŒMySQLæä¾›äº†ä¸‰å¤§è¿ç®—ç¬¦:</p>
<ul>
<li>IS NULL: å½“åˆ—çš„å€¼æ˜¯ NULL,æ­¤è¿ç®—ç¬¦è¿”å› trueã€‚</li>
<li>IS NOT NULL: å½“åˆ—çš„å€¼ä¸ä¸º NULL, è¿ç®—ç¬¦è¿”å› trueã€‚</li>
<li>&lt;=&gt;: æ¯”è¾ƒæ“ä½œç¬¦ï¼ˆä¸åŒäº=è¿ç®—ç¬¦ï¼‰ï¼Œå½“æ¯”è¾ƒçš„çš„ä¸¤ä¸ªå€¼ä¸º NULL æ—¶è¿”å› trueã€‚</li>
</ul>
<p>å…³äº NULL çš„æ¡ä»¶æ¯”è¾ƒè¿ç®—æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ã€‚ä½ ä¸èƒ½ä½¿ç”¨ = NULL æˆ– != NULL åœ¨åˆ—ä¸­æŸ¥æ‰¾ NULL å€¼ ã€‚<br>åœ¨ MySQL ä¸­ï¼ŒNULL å€¼ä¸ä»»ä½•å…¶å®ƒå€¼çš„æ¯”è¾ƒï¼ˆå³ä½¿æ˜¯ NULLï¼‰æ°¸è¿œè¿”å› falseï¼Œå³ NULL = NULL è¿”å›false ã€‚<br>MySQL ä¸­å¤„ç† NULL ä½¿ç”¨ IS NULL å’Œ IS NOT NULL è¿ç®—ç¬¦ã€‚</p>
<p>å®ä¾‹:<br><img src="null_1.png" alt><br>è¡¨ä¸­æœ‰ä¸€è¡Œæœ‰NULLå€¼çš„æ•°æ®ï¼Œå¦‚æœä½¿ç”¨<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM book WHERE pub = NULL;</span><br></pre></td></tr></table></figure></p>
<p>ä¼šå‡ºç°<br><img src="null_2.png" alt><br>åˆ¤æ–­NULLï¼Œ =å’Œï¼=æ˜¯ä¸èµ·ä½œç”¨çš„<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM book WHERE author IS NULL;</span><br><span class="line">mysql&gt; SELECT * FROM book WHERE author IS NOT NULL;</span><br></pre></td></tr></table></figure></p>
<p><img src="null_3.png" alt><br><img src="null_4.png" alt></p>
<h1 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h1><p><a href="http://www.runoob.com/mysql/mysql-regexp.html" target="_blank" rel="noopener">æ¡ˆä¾‹</a></p>
<h1 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h1><p>MySQL äº‹åŠ¡ä¸»è¦ç”¨äºå¤„ç†æ“ä½œé‡å¤§ï¼Œå¤æ‚åº¦é«˜çš„æ•°æ®ã€‚æ¯”å¦‚è¯´ï¼Œåœ¨äººå‘˜ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä½ åˆ é™¤ä¸€ä¸ªäººå‘˜ï¼Œä½ å³éœ€è¦åˆ é™¤äººå‘˜çš„åŸºæœ¬èµ„æ–™ï¼Œä¹Ÿè¦åˆ é™¤å’Œè¯¥äººå‘˜ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚ä¿¡ç®±ï¼Œæ–‡ç« ç­‰ç­‰ï¼Œè¿™æ ·ï¼Œè¿™äº›æ•°æ®åº“æ“ä½œè¯­å¥å°±æ„æˆä¸€ä¸ªäº‹åŠ¡ï¼</p>
<ul>
<li>åœ¨ MySQL ä¸­åªæœ‰ä½¿ç”¨äº† Innodb æ•°æ®åº“å¼•æ“çš„æ•°æ®åº“æˆ–è¡¨æ‰æ”¯æŒäº‹åŠ¡ã€‚</li>
<li>äº‹åŠ¡å¤„ç†å¯ä»¥ç”¨æ¥ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ï¼Œä¿è¯æˆæ‰¹çš„ SQL è¯­å¥è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚</li>
<li>äº‹åŠ¡ç”¨æ¥ç®¡ç† insert,update,delete è¯­å¥</li>
</ul>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œäº‹åŠ¡æ˜¯å¿…é¡»æ»¡è¶³4ä¸ªæ¡ä»¶ï¼ˆACIDï¼‰ï¼šï¼šåŸå­æ€§ï¼ˆAtomicityï¼Œæˆ–ç§°ä¸å¯åˆ†å‰²æ€§ï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼Œåˆç§°ç‹¬ç«‹æ€§ï¼‰ã€æŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚</p>
<ul>
<li>åŸå­æ€§ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚</li>
<li>ä¸€è‡´æ€§ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«èµ„æ–™çš„ç²¾ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘æ€§åœ°å®Œæˆé¢„å®šçš„å·¥ä½œã€‚</li>
<li>éš”ç¦»æ€§ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚</li>
<li>æŒä¹…æ€§ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</li>
</ul>
<blockquote>
<p>åœ¨ MySQL å‘½ä»¤è¡Œçš„é»˜è®¤è®¾ç½®ä¸‹ï¼Œäº‹åŠ¡éƒ½æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œå³æ‰§è¡Œ SQL è¯­å¥åå°±ä¼šé©¬ä¸Šæ‰§è¡Œ<br>COMMIT æ“ä½œã€‚å› æ­¤è¦æ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡åŠ¡é¡»ä½¿ç”¨å‘½ä»¤ BEGIN æˆ– START<br>TRANSACTIONï¼Œæˆ–è€…æ‰§è¡Œå‘½ä»¤ SET AUTOCOMMIT=0ï¼Œç”¨æ¥ç¦æ­¢ä½¿ç”¨å½“å‰ä¼šè¯çš„è‡ªåŠ¨æäº¤ã€‚</p>
</blockquote>
<p>äº‹åŠ¡æ§åˆ¶è¯­å¥ï¼š</p>
<ul>
<li>BEGINæˆ–START TRANSACTIONï¼›æ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼›</li>
<li>COMMITï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨COMMIT WORKï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚COMMITä¼šæäº¤äº‹åŠ¡ï¼Œå¹¶ä½¿å·²å¯¹æ•°æ®åº“è¿›è¡Œçš„æ‰€æœ‰ä¿®æ”¹æˆä¸ºæ°¸ä¹…æ€§çš„ï¼›</li>
<li>ROLLBACKï¼›æœ‰å¯ä»¥ä½¿ç”¨ROLLBACK WORKï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚å›æ»šä¼šç»“æŸç”¨æˆ·çš„äº‹åŠ¡ï¼Œå¹¶æ’¤é”€æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ï¼›</li>
<li>SAVEPOINT identifierï¼›SAVEPOINTå…è®¸åœ¨äº‹åŠ¡ä¸­åˆ›å»ºä¸€ä¸ªä¿å­˜ç‚¹ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­å¯ä»¥æœ‰å¤šä¸ªSAVEPOINTï¼›</li>
<li>RELEASE SAVEPOINT identifierï¼›åˆ é™¤ä¸€ä¸ªäº‹åŠ¡çš„ä¿å­˜ç‚¹ï¼Œå½“æ²¡æœ‰æŒ‡å®šçš„ä¿å­˜ç‚¹æ—¶ï¼Œæ‰§è¡Œè¯¥è¯­å¥ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼›</li>
<li>ROLLBACK TO identifierï¼›æŠŠäº‹åŠ¡å›æ»šåˆ°æ ‡è®°ç‚¹ï¼›</li>
<li>SET TRANSACTIONï¼›ç”¨æ¥è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚InnoDBå­˜å‚¨å¼•æ“æä¾›äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰READ UNCOMMITTEDã€READ COMMITTEDã€REPEATABLE READå’ŒSERIALIZABLEã€‚</li>
</ul>
<p><a href="http://www.runoob.com/mysql/mysql-transaction.html" target="_blank" rel="noopener">æ¡ˆä¾‹</a><br><img src="transition.png" alt></p>
<h1 id="ALTERå‘½ä»¤"><a href="#ALTERå‘½ä»¤" class="headerlink" title="ALTERå‘½ä»¤"></a>ALTERå‘½ä»¤</h1><p>å½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹æ•°æ®è¡¨åæˆ–è€…ä¿®æ”¹æ•°æ®è¡¨å­—æ®µæ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ°MySQL ALTERå‘½ä»¤ã€‚</p>
<p>ALTER TABLEï¼šæ·»åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤è¡¨çš„åˆ—ï¼Œçº¦æŸç­‰è¡¨çš„å®šä¹‰ã€‚</p>
<ul>
<li>æŸ¥çœ‹åˆ—ï¼šdesc è¡¨å;</li>
<li>ä¿®æ”¹è¡¨åï¼šalter table t_book rename to bbb;</li>
<li>æ·»åŠ åˆ—ï¼šalter table è¡¨å add column åˆ—å varchar(30);</li>
<li>åˆ é™¤åˆ—ï¼šalter table è¡¨å drop column åˆ—å;</li>
<li>ä¿®æ”¹åˆ—åMySQLï¼š alter table bbb change nnnnn hh int;</li>
<li>ä¿®æ”¹åˆ—å±æ€§ï¼šalter table t_book modify name varchar(22);</li>
</ul>
<p>sp_renameï¼šSQLServer å†…ç½®çš„å­˜å‚¨è¿‡ç¨‹ï¼Œç”¨ä¸ä¿®æ”¹è¡¨çš„å®šä¹‰ã€‚</p>
<p><a href="http://www.runoob.com/mysql/mysql-alter.html" target="_blank" rel="noopener">æ¡ˆä¾‹</a></p>
<h1 id="çº¦æŸ"><a href="#çº¦æŸ" class="headerlink" title="çº¦æŸ"></a>çº¦æŸ</h1><p>MySQL æŸ¥çœ‹çº¦æŸï¼Œæ·»åŠ çº¦æŸï¼Œåˆ é™¤çº¦æŸ æ·»åŠ åˆ—ï¼Œä¿®æ”¹åˆ—ï¼Œåˆ é™¤åˆ—</p>
<ul>
<li>æŸ¥çœ‹è¡¨çš„å­—æ®µä¿¡æ¯ï¼šdesc è¡¨å;</li>
<li>æŸ¥çœ‹è¡¨çš„æ‰€æœ‰ä¿¡æ¯ï¼šshow create table è¡¨å;</li>
<li>æ·»åŠ ä¸»é”®çº¦æŸï¼šalter table è¡¨å add constraint ä¸»é”® ï¼ˆå½¢å¦‚ï¼šPK_è¡¨åï¼‰ primary key è¡¨å(ä¸»é”®å­—æ®µ);</li>
<li>æ·»åŠ å¤–é”®çº¦æŸï¼šalter table ä»è¡¨ add constraint å¤–é”®ï¼ˆå½¢å¦‚ï¼šFK_ä»è¡¨_ä¸»è¡¨ï¼‰ foreign key ä»è¡¨(å¤–é”®å­—æ®µ) references ä¸»è¡¨(ä¸»é”®å­—æ®µ);</li>
<li>åˆ é™¤ä¸»é”®çº¦æŸï¼šalter table è¡¨å drop primary key;</li>
<li>åˆ é™¤å¤–é”®çº¦æŸï¼šalter table è¡¨å drop foreign key å¤–é”®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰;</li>
<li>ä¿®æ”¹è¡¨åï¼šalter table t_book rename to bbb;</li>
<li>æ·»åŠ åˆ—ï¼šalter table è¡¨å add column åˆ—å varchar(30);</li>
<li>åˆ é™¤åˆ—ï¼šalter table è¡¨å drop column åˆ—å;</li>
<li>ä¿®æ”¹åˆ—åï¼š alter table bbb change nnnnn hh int;</li>
<li>ä¿®æ”¹åˆ—å±æ€§ï¼šalter table t_book modify name varchar(22);</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; desc book;</span><br><span class="line">mysql&gt; desc reader;</span><br></pre></td></tr></table></figure>
<p><img src="desc_table_reader_and_book.png" alt><br>æ·»åŠ book_idåˆ—åˆ°readerè¡¨ï¼Œå¹¶æ·»åŠ å¤–é”®çº¦æŸ(bookè¡¨ä¸­çš„book_id)<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE reader ADD book_id INT UNSIGNED;</span><br><span class="line">mysql&gt; desc reader;</span><br></pre></td></tr></table></figure></p>
<p><img src="alter_reader_add_bid.png" alt><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE reader ADD CONSTRAINT fk_book_reader FOREIGN key</span><br><span class="line">    -&gt; reader(book_id) REFERENCES book(book_id);</span><br></pre></td></tr></table></figure></p>
<p><img src="reader_add_foreign_key.png" alt><br>å‡ºç°1215è¯¦æƒ…è§å¦ä¸€ç¯‡æ–‡ç« [MySQLé”™è¯¯é›†]</p>
<h1 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h1><p>MySQLç´¢å¼•çš„å»ºç«‹å¯¹äºMySQLçš„é«˜æ•ˆè¿è¡Œæ˜¯å¾ˆé‡è¦çš„ï¼Œç´¢å¼•å¯ä»¥å¤§å¤§æé«˜MySQLçš„æ£€ç´¢é€Ÿåº¦ã€‚<br>æ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æœåˆç†çš„è®¾è®¡ä¸”ä½¿ç”¨ç´¢å¼•çš„MySQLæ˜¯ä¸€è¾†å…°åšåŸºå°¼çš„è¯ï¼Œé‚£ä¹ˆæ²¡æœ‰è®¾è®¡å’Œä½¿ç”¨ç´¢å¼•çš„MySQLå°±æ˜¯ä¸€ä¸ªäººåŠ›ä¸‰è½®è½¦ã€‚<br>ç´¢å¼•åˆ†å•åˆ—ç´¢å¼•å’Œç»„åˆç´¢å¼•ã€‚å•åˆ—ç´¢å¼•ï¼Œå³ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—ï¼Œä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå•åˆ—ç´¢å¼•ï¼Œä½†è¿™ä¸æ˜¯ç»„åˆç´¢å¼•ã€‚ç»„åˆç´¢å¼•ï¼Œå³ä¸€ä¸ªç´¢å¼•åŒ…å«å¤šä¸ªåˆ—ã€‚<br>åˆ›å»ºç´¢å¼•æ—¶ï¼Œä½ éœ€è¦ç¡®ä¿è¯¥ç´¢å¼•æ˜¯åº”ç”¨åœ¨  SQL æŸ¥è¯¢è¯­å¥çš„æ¡ä»¶(ä¸€èˆ¬ä½œä¸º WHERE å­å¥çš„æ¡ä»¶)ã€‚<br>å®é™…ä¸Šï¼Œç´¢å¼•ä¹Ÿæ˜¯ä¸€å¼ è¡¨ï¼Œè¯¥è¡¨ä¿å­˜äº†ä¸»é”®ä¸ç´¢å¼•å­—æ®µï¼Œå¹¶æŒ‡å‘å®ä½“è¡¨çš„è®°å½•ã€‚<br>ä¸Šé¢éƒ½åœ¨è¯´ä½¿ç”¨ç´¢å¼•çš„å¥½å¤„ï¼Œä½†è¿‡å¤šçš„ä½¿ç”¨ç´¢å¼•å°†ä¼šé€ æˆæ»¥ç”¨ã€‚å› æ­¤ç´¢å¼•ä¹Ÿä¼šæœ‰å®ƒçš„ç¼ºç‚¹ï¼šè™½ç„¶ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢é€Ÿåº¦ï¼ŒåŒæ—¶å´ä¼šé™ä½æ›´æ–°è¡¨çš„é€Ÿåº¦ï¼Œå¦‚å¯¹è¡¨è¿›è¡ŒINSERTã€UPDATEå’ŒDELETEã€‚å› ä¸ºæ›´æ–°è¡¨æ—¶ï¼ŒMySQLä¸ä»…è¦ä¿å­˜æ•°æ®ï¼Œè¿˜è¦ä¿å­˜ä¸€ä¸‹ç´¢å¼•æ–‡ä»¶ã€‚<br>å»ºç«‹ç´¢å¼•ä¼šå ç”¨ç£ç›˜ç©ºé—´çš„ç´¢å¼•æ–‡ä»¶ã€‚</p>
<h1 id="æ˜¾ç¤ºç´¢å¼•"><a href="#æ˜¾ç¤ºç´¢å¼•" class="headerlink" title="æ˜¾ç¤ºç´¢å¼•"></a>æ˜¾ç¤ºç´¢å¼•</h1><figure class="highlight"><table><tr><td class="code"><pre><span class="line">mysql&gt; SHOW INDEX FROM table_name\G</span><br></pre></td></tr></table></figure>
<h2 id="æ™®é€šç´¢å¼•"><a href="#æ™®é€šç´¢å¼•" class="headerlink" title="æ™®é€šç´¢å¼•"></a>æ™®é€šç´¢å¼•</h2><h3 id="åˆ›å»ºç´¢å¼•"><a href="#åˆ›å»ºç´¢å¼•" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h3><p>è¿™æ˜¯æœ€åŸºæœ¬çš„ç´¢å¼•ï¼Œå®ƒæ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚å®ƒæœ‰ä»¥ä¸‹å‡ ç§åˆ›å»ºæ–¹å¼ï¼š<br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> indexName <span class="keyword">ON</span> mytable(cname(<span class="keyword">length</span>));</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœæ˜¯CHARï¼ŒVARCHARç±»å‹ï¼Œlengthå¯ä»¥å°äºå­—æ®µå®é™…é•¿åº¦ï¼›å¦‚æœæ˜¯BLOBå’ŒTEXTç±»å‹ï¼Œå¿…é¡»æŒ‡å®š lengthã€‚</p>
<h3 id="ä¿®æ”¹è¡¨ç»“æ„-æ·»åŠ ç´¢å¼•"><a href="#ä¿®æ”¹è¡¨ç»“æ„-æ·»åŠ ç´¢å¼•" class="headerlink" title="ä¿®æ”¹è¡¨ç»“æ„(æ·»åŠ ç´¢å¼•)"></a>ä¿®æ”¹è¡¨ç»“æ„(æ·»åŠ ç´¢å¼•)</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> tableName <span class="keyword">ADD</span> <span class="keyword">INDEX</span> indexName(columnName)</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š"><a href="#åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š" class="headerlink" title="åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š"></a>åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </span><br><span class="line">  <span class="keyword">ID</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,   </span><br><span class="line">  username <span class="built_in">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,  </span><br><span class="line">  <span class="keyword">INDEX</span> [indexName] (username(<span class="keyword">length</span>))  </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="åˆ é™¤ç´¢å¼•çš„è¯­æ³•"><a href="#åˆ é™¤ç´¢å¼•çš„è¯­æ³•" class="headerlink" title="åˆ é™¤ç´¢å¼•çš„è¯­æ³•"></a>åˆ é™¤ç´¢å¼•çš„è¯­æ³•</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> [indexName] <span class="keyword">ON</span> mytable;</span><br></pre></td></tr></table></figure>
<p>ä¸ºbookè¡¨ä¸­book_nameå»ºç«‹åŸºæœ¬çš„ç´¢å¼•<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; CREATE INDEX INDEX_BOOKNAME ON book(book_name(50));</span><br></pre></td></tr></table></figure></p>
<p><img src="create_index.png" alt></p>
<h2 id="å”¯ä¸€ç´¢å¼•"><a href="#å”¯ä¸€ç´¢å¼•" class="headerlink" title="å”¯ä¸€ç´¢å¼•"></a>å”¯ä¸€ç´¢å¼•</h2><p>å®ƒä¸å‰é¢çš„æ™®é€šç´¢å¼•ç±»ä¼¼ï¼Œä¸åŒçš„å°±æ˜¯ï¼šç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ã€‚å¦‚æœæ˜¯ç»„åˆç´¢å¼•ï¼Œåˆ™åˆ—å€¼çš„ç»„åˆå¿…é¡»å”¯ä¸€ã€‚å®ƒæœ‰ä»¥ä¸‹å‡ ç§åˆ›å»ºæ–¹å¼ï¼š</p>
<h3 id="åˆ›å»ºç´¢å¼•-1"><a href="#åˆ›å»ºç´¢å¼•-1" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> indexName <span class="keyword">ON</span> mytable(username(<span class="keyword">length</span>))</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹è¡¨ç»“æ„"><a href="#ä¿®æ”¹è¡¨ç»“æ„" class="headerlink" title="ä¿®æ”¹è¡¨ç»“æ„"></a>ä¿®æ”¹è¡¨ç»“æ„</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> mytable <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> [indexName] (username(<span class="keyword">length</span>))</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š-1"><a href="#åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š-1" class="headerlink" title="åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š"></a>åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </span><br><span class="line"><span class="keyword">ID</span> <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,  </span><br><span class="line">username <span class="built_in">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,  </span><br><span class="line"><span class="keyword">UNIQUE</span> [indexName] (username(<span class="keyword">length</span>))  </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨ALTER-å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ç´¢å¼•"><a href="#ä½¿ç”¨ALTER-å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ç´¢å¼•" class="headerlink" title="ä½¿ç”¨ALTER å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ç´¢å¼•"></a>ä½¿ç”¨ALTER å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ç´¢å¼•</h2><p>æœ‰å››ç§æ–¹å¼æ¥æ·»åŠ æ•°æ®è¡¨çš„ç´¢å¼•ï¼š</p>
<ul>
<li>ALTER TABLE tbl_name ADD PRIMARY KEY (column_list): è¯¥è¯­å¥æ·»åŠ ä¸€ä¸ªä¸»é”®ï¼Œè¿™æ„å‘³ç€ç´¢å¼•å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä¸”ä¸èƒ½ä¸ºNULLã€‚</li>
<li>ALTER TABLE tbl_name ADD UNIQUE index_name (column_list): è¿™æ¡è¯­å¥åˆ›å»ºç´¢å¼•çš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼ˆé™¤äº†NULLå¤–ï¼ŒNULLå¯èƒ½ä¼šå‡ºç°å¤šæ¬¡ï¼‰ã€‚</li>
<li>ALTER TABLE tbl_name ADD INDEX index_name (column_list): æ·»åŠ æ™®é€šç´¢å¼•ï¼Œç´¢å¼•å€¼å¯å‡ºç°å¤šæ¬¡ã€‚</li>
<li>ALTER TABLE tbl_name ADD FULLTEXT index_name (column_list):è¯¥è¯­å¥æŒ‡å®šäº†ç´¢å¼•ä¸º FULLTEXT ï¼Œç”¨äºå…¨æ–‡ç´¢å¼•ã€‚</li>
</ul>
<p>ä¾‹å­ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE reader ADD INDEX (reader_name);</span><br></pre></td></tr></table></figure></p>
<p>ä½ è¿˜å¯ä»¥åœ¨ ALTER å‘½ä»¤ä¸­ä½¿ç”¨ DROP å­å¥æ¥åˆ é™¤ç´¢å¼•ã€‚å°è¯•ä»¥ä¸‹å®ä¾‹åˆ é™¤ç´¢å¼•:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE reader DROP INDEX (reader_name);</span><br></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨ ALTER å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ä¸»é”®</p>
<p>ä¸»é”®åªèƒ½ä½œç”¨äºä¸€ä¸ªåˆ—ä¸Šï¼Œæ·»åŠ ä¸»é”®ç´¢å¼•æ—¶ï¼Œä½ éœ€è¦ç¡®ä¿è¯¥ä¸»é”®é»˜è®¤ä¸ä¸ºç©ºï¼ˆNOT NULLï¼‰ã€‚å®ä¾‹å¦‚ä¸‹ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE testalter_tbl MODIFY i INT NOT NULL;</span><br><span class="line">mysql&gt; ALTER TABLE testalter_tbl ADD PRIMARY KEY (i);</span><br></pre></td></tr></table></figure></p>
<p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ ALTER å‘½ä»¤åˆ é™¤ä¸»é”®ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE testalter_tbl DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure></p>
<p>åˆ é™¤ä¸»é”®æ—¶åªéœ€æŒ‡å®šPRIMARY KEYï¼Œä½†åœ¨åˆ é™¤ç´¢å¼•æ—¶ï¼Œä½ å¿…é¡»çŸ¥é“ç´¢å¼•åã€‚</p>
<h1 id="ä¸´æ—¶è¡¨"><a href="#ä¸´æ—¶è¡¨" class="headerlink" title="ä¸´æ—¶è¡¨"></a>ä¸´æ—¶è¡¨</h1><p>MySQL ä¸´æ—¶è¡¨åœ¨æˆ‘ä»¬éœ€è¦ä¿å­˜ä¸€äº›ä¸´æ—¶æ•°æ®æ—¶æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä¸´æ—¶è¡¨åªåœ¨å½“å‰è¿æ¥å¯è§ï¼Œå½“å…³é—­è¿æ¥æ—¶ï¼ŒMysqlä¼šè‡ªåŠ¨åˆ é™¤è¡¨å¹¶é‡Šæ”¾æ‰€æœ‰ç©ºé—´ã€‚<br>ä¸´æ—¶è¡¨åœ¨MySQL 3.23ç‰ˆæœ¬ä¸­æ·»åŠ ï¼Œå¦‚æœä½ çš„MySQLç‰ˆæœ¬ä½äº 3.23ç‰ˆæœ¬å°±æ— æ³•ä½¿ç”¨MySQLçš„ä¸´æ—¶è¡¨ã€‚ä¸è¿‡ç°åœ¨ä¸€èˆ¬å¾ˆå°‘æœ‰å†ä½¿ç”¨è¿™ä¹ˆä½ç‰ˆæœ¬çš„MySQLæ•°æ®åº“æœåŠ¡äº†ã€‚<br>MySQLä¸´æ—¶è¡¨åªåœ¨å½“å‰è¿æ¥å¯è§ï¼Œå¦‚æœä½ ä½¿ç”¨PHPè„šæœ¬æ¥åˆ›å»ºMySQLä¸´æ—¶è¡¨ï¼Œé‚£æ¯å½“PHPè„šæœ¬æ‰§è¡Œå®Œæˆåï¼Œè¯¥ä¸´æ—¶è¡¨ä¹Ÿä¼šè‡ªåŠ¨é”€æ¯ã€‚<br>å¦‚æœä½ ä½¿ç”¨äº†å…¶ä»–MySQLå®¢æˆ·ç«¯ç¨‹åºè¿æ¥MySQLæ•°æ®åº“æœåŠ¡å™¨æ¥åˆ›å»ºä¸´æ—¶è¡¨ï¼Œé‚£ä¹ˆåªæœ‰åœ¨å…³é—­å®¢æˆ·ç«¯ç¨‹åºæ—¶æ‰ä¼šé”€æ¯ä¸´æ—¶è¡¨ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨é”€æ¯ã€‚</p>
<p>è¯­æ³•å’Œå»ºè¡¨å·®ä¸å¤šï¼Œåªä¸è¿‡ <strong> TABLE </strong> å…³é”®å­—æ”¹æˆ <strong> TEMPORARY TABLE </strong> å³å¯ã€‚</p>
<p>åˆ é™¤å’Œæ™®é€šåˆ é™¤è¡¨è¯­æ³•æ²¡åŒºåˆ«ã€‚</p>
<h1 id="å¤åˆ¶è¡¨"><a href="#å¤åˆ¶è¡¨" class="headerlink" title="å¤åˆ¶è¡¨"></a>å¤åˆ¶è¡¨</h1><p>ä½¿ç”¨ <strong> SHOW CREATE TABLE </strong> å‘½ä»¤è·å–åˆ›å»ºæ•°æ®è¡¨(CREATE TABLE) è¯­å¥ï¼Œè¯¥è¯­å¥åŒ…å«äº†åŸæ•°æ®è¡¨çš„ç»“æ„ï¼Œç´¢å¼•ç­‰ã€‚<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SHOW CREATE TABLE book\G</span><br></pre></td></tr></table></figure></p>
<p><img src="show_create_table.png" alt></p>
<p>å¤åˆ¶è¡¨çš„å†…å®¹ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ <strong> INSERT INTO â€¦ SELECT </strong> è¯­å¥æ¥å®ç°<br><a href="http://www.runoob.com/mysql/mysql-clone-tables.html" target="_blank" rel="noopener">æ¡ˆä¾‹</a></p>
<p>note:<br>æ¥ç»™å¤§å®¶åŒºåˆ†ä¸‹mysqlå¤åˆ¶è¡¨çš„ä¸¤ç§æ–¹å¼ã€‚<br>ç¬¬ä¸€ã€åªå¤åˆ¶è¡¨ç»“æ„åˆ°æ–°è¡¨<br>create table æ–°è¡¨ select <em> from æ—§è¡¨ where 1=2<br>æˆ–è€…<br>create table æ–°è¡¨ like æ—§è¡¨<br>ç¬¬äºŒã€å¤åˆ¶è¡¨ç»“æ„åŠæ•°æ®åˆ°æ–°è¡¨<br>create tableæ–°è¡¨ select </em> from æ—§è¡¨ </p>
<h1 id="åºåˆ—ä½¿ç”¨"><a href="#åºåˆ—ä½¿ç”¨" class="headerlink" title="åºåˆ—ä½¿ç”¨"></a>åºåˆ—ä½¿ç”¨</h1><p>MySQL åºåˆ—æ˜¯ä¸€ç»„æ•´æ•°ï¼š1, 2, 3, â€¦ï¼Œç”±äºä¸€å¼ æ•°æ®è¡¨åªèƒ½æœ‰ä¸€ä¸ªå­—æ®µè‡ªå¢ä¸»é”®ï¼Œ å¦‚æœä½ æƒ³å®ç°å…¶ä»–å­—æ®µä¹Ÿå®ç°è‡ªåŠ¨å¢åŠ ï¼Œå°±å¯ä»¥ä½¿ç”¨MySQLåºåˆ—æ¥å®ç°ã€‚</p>
<p>å‰é¢ä¹Ÿæœ‰ç”¨åˆ°è¿‡çš„ <strong> AUTO_INCREMENT </strong> æ¥å®šä¹‰åˆ—æ—¢å¯ä»¥å®ç°åºåˆ—</p>
<h2 id="é‡ç½®åºåˆ—"><a href="#é‡ç½®åºåˆ—" class="headerlink" title="é‡ç½®åºåˆ—"></a>é‡ç½®åºåˆ—</h2><p>å¦‚æœä½ åˆ é™¤äº†æ•°æ®è¡¨ä¸­çš„å¤šæ¡è®°å½•ï¼Œå¹¶å¸Œæœ›å¯¹å‰©ä¸‹æ•°æ®çš„AUTO_INCREMENTåˆ—è¿›è¡Œé‡æ–°æ’åˆ—ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡åˆ é™¤è‡ªå¢çš„åˆ—ï¼Œç„¶åé‡æ–°æ·»åŠ æ¥å®ç°ã€‚ ä¸è¿‡è¯¥æ“ä½œè¦éå¸¸å°å¿ƒï¼Œå¦‚æœåœ¨åˆ é™¤çš„åŒæ—¶åˆæœ‰æ–°è®°å½•æ·»åŠ ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°æ•°æ®æ··ä¹±ã€‚æ“ä½œå¦‚ä¸‹æ‰€ç¤ºï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE insect DROP id;</span><br><span class="line">mysql&gt; ALTER TABLE insect</span><br><span class="line">    -&gt; ADD id INT UNSIGNED NOT NULL AUTO_INCREMENT FIRST,</span><br><span class="line">    -&gt; ADD PRIMARY KEY (id);</span><br></pre></td></tr></table></figure></p>
<h2 id="åºåˆ—çš„å¼€å§‹å€¼"><a href="#åºåˆ—çš„å¼€å§‹å€¼" class="headerlink" title="åºåˆ—çš„å¼€å§‹å€¼"></a>åºåˆ—çš„å¼€å§‹å€¼</h2><h3 id="åˆ›å»ºè¡¨æ—¶"><a href="#åˆ›å»ºè¡¨æ—¶" class="headerlink" title="åˆ›å»ºè¡¨æ—¶"></a>åˆ›å»ºè¡¨æ—¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE insect</span><br><span class="line">    -&gt; (</span><br><span class="line">    -&gt; id INT UNSIGNED NOT NULL AUTO_INCREMENT,</span><br><span class="line">    -&gt; PRIMARY KEY (id),</span><br><span class="line">    -&gt; name VARCHAR(30) NOT NULL, </span><br><span class="line">    -&gt; date DATE NOT NULL,</span><br><span class="line">    -&gt; origin VARCHAR(30) NOT NULL</span><br><span class="line">)engine=innodb auto_increment=100 charset=utf8;</span><br></pre></td></tr></table></figure>
<h3 id="ALTERä¿®æ”¹"><a href="#ALTERä¿®æ”¹" class="headerlink" title="ALTERä¿®æ”¹"></a>ALTERä¿®æ”¹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE t AUTO_INCREMENT = 100;</span><br></pre></td></tr></table></figure>
<h1 id="å¤„ç†é‡å¤æ•°æ®"><a href="#å¤„ç†é‡å¤æ•°æ®" class="headerlink" title="å¤„ç†é‡å¤æ•°æ®"></a>å¤„ç†é‡å¤æ•°æ®</h1><p>é˜²æ­¢è¡¨ä¸­å‡ºç°é‡å¤æ•°æ®<br>ä½ å¯ä»¥åœ¨MySQLæ•°æ®è¡¨ä¸­è®¾ç½®æŒ‡å®šçš„å­—æ®µä¸º <strong> PRIMARY KEYï¼ˆä¸»é”®ï¼‰ </strong> æˆ–è€… <strong> UNIQUEï¼ˆå”¯ä¸€ï¼‰</strong> ç´¢å¼•æ¥ä¿è¯æ•°æ®çš„å”¯ä¸€æ€§ã€‚</p>
<h2 id="ç»Ÿè®¡é‡å¤æ•°æ®"><a href="#ç»Ÿè®¡é‡å¤æ•°æ®" class="headerlink" title="ç»Ÿè®¡é‡å¤æ•°æ®"></a>ç»Ÿè®¡é‡å¤æ•°æ®</h2><p>ä»¥ä¸‹æˆ‘ä»¬å°†ç»Ÿè®¡è¡¨ä¸­ first_name å’Œ last_nameçš„é‡å¤è®°å½•æ•°ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; SELECT COUNT(*) as repetitions, last_name, first_name</span><br><span class="line">    -&gt; FROM person_tbl</span><br><span class="line">    -&gt; GROUP BY last_name, first_name</span><br><span class="line">    -&gt; HAVING repetitions &gt; 1;</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸ŠæŸ¥è¯¢è¯­å¥å°†è¿”å› person_tbl è¡¨ä¸­é‡å¤çš„è®°å½•æ•°ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢é‡å¤çš„å€¼ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>ç¡®å®šå“ªä¸€åˆ—åŒ…å«çš„å€¼å¯èƒ½ä¼šé‡å¤ã€‚</li>
<li>åœ¨åˆ—é€‰æ‹©åˆ—è¡¨ä½¿ç”¨COUNT(*)åˆ—å‡ºçš„é‚£äº›åˆ—ã€‚</li>
<li>åœ¨GROUP BYå­å¥ä¸­åˆ—å‡ºçš„åˆ—ã€‚</li>
<li>HAVINGå­å¥è®¾ç½®é‡å¤æ•°å¤§äº1ã€‚</li>
</ul>
<h2 id="è¿‡æ»¤é‡å¤æ•°æ®"><a href="#è¿‡æ»¤é‡å¤æ•°æ®" class="headerlink" title="è¿‡æ»¤é‡å¤æ•°æ®"></a>è¿‡æ»¤é‡å¤æ•°æ®</h2><p>å¦‚æœä½ éœ€è¦è¯»å–ä¸é‡å¤çš„æ•°æ®å¯ä»¥åœ¨ SELECT è¯­å¥ä¸­ä½¿ç”¨ DISTINCT å…³é”®å­—æ¥è¿‡æ»¤é‡å¤æ•°æ®ã€‚<br>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ GROUP BY æ¥è¯»å–æ•°æ®è¡¨ä¸­ä¸é‡å¤çš„æ•°æ®ï¼š</p>
<h1 id="å¯¼å‡ºæ•°æ®"><a href="#å¯¼å‡ºæ•°æ®" class="headerlink" title="å¯¼å‡ºæ•°æ®"></a>å¯¼å‡ºæ•°æ®</h1><p><a href="http://www.runoob.com/mysql/mysql-database-export.html" target="_blank" rel="noopener">æ›´å¤š</a></p>
<h2 id="å¯¼å‡º-SQL-æ ¼å¼çš„æ•°æ®"><a href="#å¯¼å‡º-SQL-æ ¼å¼çš„æ•°æ®" class="headerlink" title="å¯¼å‡º SQL æ ¼å¼çš„æ•°æ®"></a>å¯¼å‡º SQL æ ¼å¼çš„æ•°æ®</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mysqldump -u root -p (dbName) (tableName) &gt; dump.txt</span><br><span class="line">password ******</span><br></pre></td></tr></table></figure>
<p>è¡¨åå¯ä¸åŠ ï¼Œä¸åŠ åˆ™å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“<br>å®ä¾‹:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mysqldump -u root -p booklib &gt; /tmp/booklib.txt</span><br></pre></td></tr></table></figure></p>
<h1 id="å¯¼å…¥æ•°æ®"><a href="#å¯¼å…¥æ•°æ®" class="headerlink" title="å¯¼å…¥æ•°æ®"></a>å¯¼å…¥æ•°æ®</h1><p><a href="http://www.runoob.com/mysql/mysql-database-import.html" target="_blank" rel="noopener">æ›´å¤š</a></p>
<h2 id="sourceå‘½ä»¤å¯¼å…¥"><a href="#sourceå‘½ä»¤å¯¼å…¥" class="headerlink" title="sourceå‘½ä»¤å¯¼å…¥"></a>sourceå‘½ä»¤å¯¼å…¥</h2><p>å…ˆç™»å½•è¿›æ•°æ®åº“<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; create database booklib;      <span class="comment"># åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line">mysql&gt; use booklib;                  <span class="comment"># ä½¿ç”¨å·²åˆ›å»ºçš„æ•°æ®åº“ </span></span><br><span class="line">mysql&gt; <span class="built_in">set</span> names utf8;           <span class="comment"># è®¾ç½®ç¼–ç </span></span><br><span class="line">mysql&gt; <span class="built_in">source</span> /tmp/booklib.sql  <span class="comment"># å¯¼å…¥å¤‡ä»½æ•°æ®åº“</span></span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>DBA</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>Centos7å®‰è£…Mysql5.7</title>
    <url>/2018/09/07/Centos7%E5%AE%89%E8%A3%85Mysql5-7/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h1><ul>
<li>centos7</li>
<li>virtualbox</li>
</ul>
<a id="more"></a>
<h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><h2 id="centos7éœ€è¦æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…äº†Mariadb"><a href="#centos7éœ€è¦æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…äº†Mariadb" class="headerlink" title="centos7éœ€è¦æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…äº†Mariadb"></a>centos7éœ€è¦æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…äº†Mariadb</h2><p>åœ¨å®‰è£…MySQLä¹‹å‰è¦æ£€æŸ¥å½“å‰ç¯å¢ƒä¸­æ˜¯å¦å·²ç»è£…äº†Mariadbï¼Œå¦‚æœå­˜åœ¨åˆ™éœ€è¦å¸è½½ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´MySQLå®‰è£…å¤±è´¥<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ rpm -qa | grep mariadb</span><br></pre></td></tr></table></figure></p>
<p>å¦‚æœè¾“å‡ºmaraidbç­‰çš„ä¿¡æ¯åˆ™éœ€è¦è¿›è¡Œå¸è½½ï¼Œå¦‚å›¾<br><img src="rpm_qa_grep_mariadb.png" alt><br>éœ€è¦è¿›è¡Œå¼ºåˆ¶å¸è½½<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64</span><br></pre></td></tr></table></figure></p>
<h2 id="Yum-Repo"><a href="#Yum-Repo" class="headerlink" title="Yum Repo"></a>Yum Repo</h2><p>å®˜æ–¹<a href="https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/" target="_blank" rel="noopener">æŒ‡å¯¼</a><br>ç‚¹å‡»<a href="https://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="noopener">é“¾æ¥</a>æŸ¥çœ‹æœ€æ–°çš„Yum Repository<br><img src="mysql_yum_rpm_repo.png" alt><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// è®¾ç½®rpm</span><br><span class="line">$ rpm -Uvh https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm</span><br><span class="line">$ yum repolist all | grep mysql</span><br></pre></td></tr></table></figure></p>
<p>å¦‚å›¾<br><img src="set_rpm.png" alt><br>éœ€è¦å®‰è£…5.7ç‰ˆæœ¬ï¼Œåˆ™éœ€è¦é€‰æ‹©å‘å¸ƒç³»åˆ—,ç¼–è¾‘<code>/etc/yum.repos.d/mysql-community.repo</code> æ–‡ä»¶æ¥é€‰æ‹©ç³»åˆ— ã€‚è¿™æ˜¯æ–‡ä»¶ä¸­å‘å¸ƒç³»åˆ—çš„å­å­˜å‚¨åº“çš„å…¸å‹æ¡ç›®ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[mysql80-community]</span><br><span class="line">name=MySQL 8.0 Community Server</span><br><span class="line">baseurl=http://repo.mysql.com/yum/mysql-8.0-community/el/6/<span class="variable">$basearch</span>/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br></pre></td></tr></table></figure></p>
<p>æ‰¾åˆ°è¦é…ç½®çš„å­å­˜å‚¨åº“çš„æ¡ç›®ï¼Œç„¶åç¼–è¾‘è¯¥enabledé€‰é¡¹ã€‚æŒ‡å®š<code>enabled=0</code>ç¦ç”¨å­å­˜å‚¨åº“ï¼Œæˆ– <code>enabled=1</code>å¯ç”¨å­å­˜å‚¨åº“ã€‚ä¾‹å¦‚ï¼Œè¦å®‰è£…MySQL 5.7ï¼Œè¯·ç¡®ä¿æ‚¨æ‹¥æœ‰<code>enabled=0</code>,MySQL 8.0çš„ä¸Šè¿°å­å­˜å‚¨åº“æ¡ç›®ï¼Œå¹¶ä¸”å…·æœ‰ <code>enabled=1</code>,5.7ç³»åˆ—çš„æ¡ç›®ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Enable to use MySQL 5.7</span></span><br><span class="line">[mysql57-community]</span><br><span class="line">name=MySQL 5.7 Community Server</span><br><span class="line">baseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/6/<span class="variable">$basearch</span>/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</span><br></pre></td></tr></table></figure></p>
<p>æ‚¨åº”è¯¥åªåœ¨ä»»ä½•æ—¶å€™ä¸ºä¸€ä¸ªå‘å¸ƒç³»åˆ—å¯ç”¨å­å­˜å‚¨åº“ã€‚å½“å¯ç”¨å¤šä¸ªç‰ˆæœ¬ç³»åˆ—çš„å­å­˜å‚¨åº“æ—¶ï¼ŒYumå°†ä½¿ç”¨æœ€æ–°çš„ç³»åˆ—ã€‚</p>
<p>é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤å¹¶æ£€æŸ¥å…¶è¾“å‡ºæ¥éªŒè¯æ˜¯å¦å·²å¯ç”¨å’Œç¦ç”¨äº†æ­£ç¡®çš„å­å­˜å‚¨åº“ï¼ˆå¯¹äºå¯ç”¨dnfçš„ç³»ç»Ÿï¼Œè¯·ä½¿ç”¨dnfæ›¿æ¢ å‘½ä»¤ä¸­çš„ yumï¼‰ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yum repolist enabled | grep mysql</span><br></pre></td></tr></table></figure></p>
<p><img src="repolist_enabled_mysql.png" alt></p>
<p>å®‰è£…mysql<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ yum install -y mysql-community-server</span><br></pre></td></tr></table></figure></p>
<h1 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h1><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨MySQLæœåŠ¡å™¨ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl start mysqld.service</span><br></pre></td></tr></table></figure></p>
<p>æ£€æŸ¥MySQLæœåŠ¡å™¨çš„çŠ¶æ€<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ systemctl status mysqld.service</span><br></pre></td></tr></table></figure></p>
<p>MySQLæœåŠ¡å™¨åˆå§‹åŒ–ï¼ˆä»MySQL5.7å¼€å§‹ï¼‰ï¼šåœ¨æœåŠ¡å™¨åˆå§‹å¯åŠ¨æ—¶ï¼Œå¦‚æœæœåŠ¡å™¨çš„æ•°æ®ç›®å½•ä¸ºç©ºï¼Œåˆ™ä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>æœåŠ¡å™¨å·²åˆå§‹åŒ–ã€‚</li>
<li>åœ¨æ•°æ®ç›®å½•ä¸­ç”ŸæˆSSLè¯ä¹¦å’Œå¯†é’¥æ–‡ä»¶ã€‚</li>
<li>è¯¥validate_passwordæ’ä»¶å®‰è£…å¹¶å¯ç”¨ã€‚</li>
<li>å°†â€˜rootâ€˜@â€™localhostâ€™ åˆ›å»ºä¸€ä¸ªè¶…çº§ç”¨æˆ·å¸æˆ·ã€‚è®¾ç½®è¶…çº§ç”¨æˆ·çš„å¯†ç å¹¶å°†å…¶å­˜å‚¨åœ¨é”™è¯¯æ—¥å¿—æ–‡ä»¶ä¸­ã€‚è¦æ˜¾ç¤ºå®ƒï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ grep <span class="string">'temporary password'</span> /var/<span class="built_in">log</span>/mysqld.log</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>é€šè¿‡ä¸Šé¢å‘½ä»¤è·å–ç”Ÿæˆçš„ä¸´æ—¶å¯†ç ç™»å½•å¹¶ä¸ºè¶…çº§ç”¨æˆ·å¸æˆ·è®¾ç½®è‡ªå®šä¹‰å¯†ç ï¼Œå°½å¿«æ›´æ”¹rootå¯†ç ï¼š<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mysql -uroot -p</span><br></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹rootæœ¬åœ°ç™»å½•å¯†ç <br><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">'root'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'MyNewPass4!'</span>;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>æ³¨æ„<br>MySQLçš„ <strong> validate_password </strong><br>æ’ä»¶é»˜è®¤å®‰è£…ã€‚è¿™å°†è¦æ±‚å¯†ç åŒ…å«è‡³å°‘ä¸€ä¸ªå¤§å†™å­—æ¯ï¼Œä¸€ä¸ªå°å†™å­—<br>æ¯ï¼Œä¸€ä¸ªæ•°å­—å’Œä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œå¹¶ä¸”å¯†ç æ€»é•¿åº¦è‡³å°‘ä¸º8ä¸ªå­—ç¬¦ã€‚</p>
</blockquote>
<p><a href="mysql_set_root_pwd.png">å®ä¾‹</a></p>
]]></content>
      <categories>
        <category>DBA</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
        <tag>Centos7</tag>
        <tag>ç¯å¢ƒæ­å»º</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo + github æ­å»ºä¸ªäººåšå®¢</title>
    <url>/2018/09/07/hexo-github-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æˆ‘çš„å†å²ä¸Šç¬¬ä¸€ç¯‡æ•™ç¨‹ï¼ŒHexo+githubæ­å»ºä¸ªäººåšå®¢ã€‚è™½ç„¶ç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œä½†æ˜¯æƒ³ä»è¿™ä¸€ç¯‡å¼€å§‹æˆ‘çš„å†™ä½œä¹‹è·¯ã€‚</p>
<a id="more"></a>
<h1 id="ä¸€äº›å‰æˆ"><a href="#ä¸€äº›å‰æˆ" class="headerlink" title="ä¸€äº›å‰æˆ"></a>ä¸€äº›å‰æˆ</h1><p><strong>æ­å»ºæ­¤åšå®¢æ—¶ï¼Œç™¾åº¦äº†å¾ˆå¤šèµ„æ–™ï¼Œä½†æ˜¯ä¸Šæ‰‹è¿˜æ˜¯ä»å®˜æ–¹èµ„æ–™å¼€å§‹ä¸Šæ‰‹</strong><br>è¿™æ˜¯å®˜æ–¹é“¾æ¥<br><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">Hexo</a><br><a href="https://github.com/iissnan/hexo-theme-next/blob/master/README.cn.md" target="_blank" rel="noopener">Nextä¸»é¢˜</a><br><a href="https://fontawesome.com/icons?from=io" target="_blank" rel="noopener">å›¾æ ‡åº“</a></p>
<h1 id="å¼€å§‹ä½¿ç”¨"><a href="#å¼€å§‹ä½¿ç”¨" class="headerlink" title="å¼€å§‹ä½¿ç”¨"></a>å¼€å§‹ä½¿ç”¨</h1><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><p>Hexoåšå®¢çš„å‰æéœ€è¦åœ¨æœ¬åœ°å…ˆå®‰è£…nodejsä¸git<br>æ¨èä¸€ä¸‹ä½¿ç”¨<a href="https://npm.taobao.org/" target="_blank" rel="noopener">æ·˜å®NPM</a>ï¼Œæœ¬äººæ˜¯windowsç¯å¢ƒä¸‹æ­å»ºï¼Œå»ºè®®ç”¨git-bash</p>
<ul>
<li><a href="https://nodejs.org/en/" target="_blank" rel="noopener">NodeJs</a></li>
<li><a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a><br>ä»¥ä¸Šçš„å®‰è£…å°±ä¸å†™åœ¨æ–‡ç« é‡Œäº†ï¼Œä¸ä¼šå¯è‡ªè¡Œç™¾åº¦</li>
</ul>
<h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><p><strong> å®‰è£…Hexo </strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p>
<h1 id="æ­å»º"><a href="#æ­å»º" class="headerlink" title="æ­å»º"></a>æ­å»º</h1><p>å®‰è£…Hexoå®Œæˆåï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œhexoä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ–‡ä»¶<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> e:/ </span><br><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure></p>
<p>æ–°å»ºå®Œæˆåä¼šç”Ÿæˆhexoæ‰€éœ€è¦çš„ä¸€äº›æ–‡ä»¶<br><strong>_config.yml</strong><br>ç½‘ç«™çš„ä¸€äº›ä¸»è¦é…ç½®ä¿¡æ¯éƒ½åœ¨è¿™æ–‡ä»¶ä¸‹è¿›è¡Œé…ç½®<br>è¯¦ç»†å‚æ•°å¯ç‚¹å‡»é“¾æ¥è¿›è¡ŒæŸ¥çœ‹<br><a href="https://hexo.io/zh-cn/docs/configuration" target="_blank" rel="noopener">config</a></p>
<h1 id="Hexoå‘½ä»¤"><a href="#Hexoå‘½ä»¤" class="headerlink" title="Hexoå‘½ä»¤"></a>Hexoå‘½ä»¤</h1><h2 id="init"><a href="#init" class="headerlink" title="init"></a>init</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo init [folder]</span><br></pre></td></tr></table></figure>
<p>æ–°å»ºä¸€ä¸ªç½‘ç«™ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® folder ï¼ŒHexo é»˜è®¤åœ¨ç›®å‰çš„æ–‡ä»¶å¤¹å»ºç«‹ç½‘ç«™</p>
<h2 id="new"><a href="#new" class="headerlink" title="new"></a>new</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new [post|draft|page] &lt;title&gt;</span><br></pre></td></tr></table></figure>
<p>æ–°å»ºä¸€ç¯‡æ–‡ç« ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® layout çš„è¯ï¼Œé»˜è®¤ä½¿ç”¨ _config.yml ä¸­çš„ default_layout å‚æ•°ä»£æ›¿ã€‚å¦‚æœæ ‡é¢˜åŒ…å«ç©ºæ ¼çš„è¯ï¼Œè¯·ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚</p>
<h2 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo g</span><br></pre></td></tr></table></figure>
<p>ç”Ÿæˆé™æ€æ–‡ä»¶ã€‚</p>
<h2 id="server"><a href="#server" class="headerlink" title="server"></a>server</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo s</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š <a href="http://localhost:4000/ã€‚" target="_blank" rel="noopener">http://localhost:4000/ã€‚</a></p>
<h2 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo d</span><br></pre></td></tr></table></figure>
<p>éƒ¨ç½²ç½‘ç«™ã€‚</p>
<h2 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo clean</span><br></pre></td></tr></table></figure>
<p>æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚</p>
<h1 id="Hexoç¾åŒ–"><a href="#Hexoç¾åŒ–" class="headerlink" title="Hexoç¾åŒ–"></a>Hexoç¾åŒ–</h1><h2 id="ä¸»é¢˜å®‰è£…"><a href="#ä¸»é¢˜å®‰è£…" class="headerlink" title="ä¸»é¢˜å®‰è£…"></a>ä¸»é¢˜å®‰è£…</h2><p>è¿™é‡Œå®‰è£…çš„æ˜¯æ¯”è¾ƒçƒ­é—¨çš„<a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">Next</a>ä¸»é¢˜<br>é‡Œé¢ä¹Ÿæœ‰ä¸­æ–‡æ–‡æ¡£ï¼Œå®‰è£…è¯´æ˜éƒ½å¾ˆè¯¦ç»†ï¼Œå…·ä½“å®‰è£…ä¸åœ¨æœ¬æ•™ç¨‹è¯´æ˜,ä½†æ˜¯å…·ä½“è¯´æ˜ä¸»é¢˜ä¸­çš„ <strong> _config.yml </strong> æ–‡ä»¶å’Œç«™ç‚¹ä¸­çš„<strong> _config.yml </strong>æ–‡ä»¶é…ç½®æ˜¯æœ‰åŒºåˆ«ä¹‹åˆ†çš„ï¼Œè¯·è¯¦ç»†æŸ¥çœ‹æ¸…æ¥šå…·ä½“æ˜¯é…ç½®å“ªä¸ªé…ç½®æ–‡ä»¶ã€‚</p>
<h2 id="å¯ç”¨ä¸»é¢˜"><a href="#å¯ç”¨ä¸»é¢˜" class="headerlink" title="å¯ç”¨ä¸»é¢˜"></a>å¯ç”¨ä¸»é¢˜</h2><p>ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ <strong> _config.yml </strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">## Plugins: https://hexo.io/plugins/</span><br><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line">theme: next</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>è¯¥æ–‡ç« ä¸‹é…ç½®çš„ä¸»é¢˜åŸºäº<strong>2014-2017    <a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next</a></strong>çš„ç‰ˆæœ¬</p>
<p>æ›´å¤šç‰ˆæœ¬è¯·çœ‹ï¼š<a href="https://theme-next.org/" target="_blank" rel="noopener">https://theme-next.org/</a></p>
</blockquote>
<h2 id="ä¸»é¢˜è®¾å®š"><a href="#ä¸»é¢˜è®¾å®š" class="headerlink" title="ä¸»é¢˜è®¾å®š"></a>ä¸»é¢˜è®¾å®š</h2><p>é€‰æ‹© Scheme</p>
<p>Scheme æ˜¯ NexT æä¾›çš„ä¸€ç§ç‰¹æ€§ï¼Œå€ŸåŠ©äº Schemeï¼ŒNexT ä¸ºä½ æä¾›å¤šç§ä¸åŒçš„å¤–è§‚ã€‚åŒæ—¶ï¼Œå‡ ä¹æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥ åœ¨ Scheme ä¹‹é—´å…±ç”¨ã€‚ç›®å‰ NexT æ”¯æŒä¸‰ç§ Schemeï¼Œä»–ä»¬æ˜¯ï¼š</p>
<ul>
<li>Muse - é»˜è®¤ Schemeï¼Œè¿™æ˜¯ NexT æœ€åˆçš„ç‰ˆæœ¬ï¼Œé»‘ç™½ä¸»è°ƒï¼Œå¤§é‡ç•™ç™½</li>
<li>Mist - Muse çš„ç´§å‡‘ç‰ˆæœ¬ï¼Œæ•´æ´æœ‰åºçš„å•æ å¤–è§‚</li>
<li>Gemini - å·¦ä¾§ç½‘ç«™ä¿¡æ¯åŠç›®å½•ï¼Œå—+ç‰‡æ®µç»“æ„å¸ƒå±€ </li>
</ul>
<blockquote>
<p>Scheme çš„åˆ‡æ¢é€šè¿‡æ›´æ”¹ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢ scheme å…³é”®å­—ã€‚ ä½ ä¼šçœ‹åˆ°æœ‰å››è¡Œ scheme çš„é…ç½®ï¼Œå°†ä½ éœ€ç”¨å¯ç”¨çš„ scheme å‰é¢æ³¨é‡Š # å»é™¤å³å¯ã€‚</p>
</blockquote>
<h2 id="åŠ¨æ€èƒŒæ™¯"><a href="#åŠ¨æ€èƒŒæ™¯" class="headerlink" title="åŠ¨æ€èƒŒæ™¯"></a>åŠ¨æ€èƒŒæ™¯</h2><p><img src="bg_program.gif" alt="canvas-nestæ¼”ç¤º"></p>
<p>ç›®å‰NexTä¸»é¢˜æœ€æ–°çš„æ˜¯V6.0ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬ä¸­å¯ä»¥æœ‰4ç§åŠ¨æ€èƒŒæ™¯ï¼š</p>
<ul>
<li>Canvas-nest</li>
<li>three_waves</li>
<li>canvas_lines</li>
<li>canvas_sphere<br>åœ¨ <strong> _config.yml </strong>æ–‡ä»¶ä¸­å³å¯é…ç½®ï¼Œä½†æ˜¯éœ€è¦ä¸‹è½½é…ç½®<br><a href="https://github.com/theme-next/theme-next-canvas-nest" target="_blank" rel="noopener">æ —å­</a></li>
</ul>
<h2 id="ç‚¹å‡»å‡ºç°æ¡ƒå¿ƒæ•ˆæœ"><a href="#ç‚¹å‡»å‡ºç°æ¡ƒå¿ƒæ•ˆæœ" class="headerlink" title="ç‚¹å‡»å‡ºç°æ¡ƒå¿ƒæ•ˆæœ"></a>ç‚¹å‡»å‡ºç°æ¡ƒå¿ƒæ•ˆæœ</h2><p><strong>lover.js</strong>ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">e,t,a</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span>&#123;c(<span class="string">".heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;"</span>),o(),r()&#125;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params"></span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> e=<span class="number">0</span>;e&lt;d.length;e++)d[e].alpha&lt;=<span class="number">0</span>?(t.body.removeChild(d[e].el),d.splice(e,<span class="number">1</span>)):(d[e].y--,d[e].scale+=<span class="number">.004</span>,d[e].alpha-=<span class="number">.013</span>,d[e].el.style.cssText=<span class="string">"left:"</span>+d[e].x+<span class="string">"px;top:"</span>+d[e].y+<span class="string">"px;opacity:"</span>+d[e].alpha+<span class="string">";transform:scale("</span>+d[e].scale+<span class="string">","</span>+d[e].scale+<span class="string">") rotate(45deg);background:"</span>+d[e].color+<span class="string">";z-index:99999"</span>);requestAnimationFrame(r)&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="string">"function"</span>==<span class="keyword">typeof</span> e.onclick&amp;&amp;e.onclick;e.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;t&amp;&amp;t(),i(e)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">"div"</span>);a.className=<span class="string">"heart"</span>,d.push(&#123;<span class="attr">el</span>:a,<span class="attr">x</span>:e.clientX<span class="number">-5</span>,<span class="attr">y</span>:e.clientY<span class="number">-5</span>,<span class="attr">scale</span>:<span class="number">1</span>,<span class="attr">alpha</span>:<span class="number">1</span>,<span class="attr">color</span>:s()&#125;),t.body.appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">"style"</span>);a.type=<span class="string">"text/css"</span>;<span class="keyword">try</span>&#123;a.appendChild(t.createTextNode(e))&#125;<span class="keyword">catch</span>(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>].appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span><span class="string">"rgb("</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">","</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">","</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">")"</span>&#125;<span class="keyword">var</span> d=[];e.requestAnimationFrame=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;setTimeout(e,<span class="number">1e3</span>/<span class="number">60</span>)&#125;&#125;(),n()&#125;(<span class="built_in">window</span>,<span class="built_in">document</span>);</span><br></pre></td></tr></table></figure>
<p>æ‹·è´æ‰€æœ‰ä»£ç ï¼Œåœ¨/themes/next/source/js/srcé‡Œé¢æ–°å»ºlove.jsï¼Œç„¶ååœ¨<code>\themes\next\layout\_layout.swig</code>æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ --&gt; </span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"/js/src/love.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="è®¾ç½®ç½‘ç«™å›¾æ ‡"><a href="#è®¾ç½®ç½‘ç«™å›¾æ ‡" class="headerlink" title="è®¾ç½®ç½‘ç«™å›¾æ ‡"></a>è®¾ç½®ç½‘ç«™å›¾æ ‡</h2><p>é»˜è®¤çš„ç½‘ç«™å›¾æ ‡æ˜¯ä¸€ä¸ªNï¼Œå½“ç„¶æ˜¯éœ€è¦åˆ¶å®šä¸€ä¸ªå›¾äº†ï¼Œåœ¨ç½‘ä¸Šæ‰¾åˆ°å›¾åï¼Œå°†å…¶æ”¾åœ¨ <strong> /themes/next/source/images </strong> é‡Œé¢,æ‰¾åˆ°ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­çš„faviconå…³é”®å­—ï¼Œè¿›è¡Œæ›¿æ¢,å¦‚å›¾<br><img src="favicon_replace.png" alt></p>
<h2 id="æœ¬åœ°æœç´¢"><a href="#æœ¬åœ°æœç´¢" class="headerlink" title="æœ¬åœ°æœç´¢"></a><a href="https://github.com/theme-next/hexo-generator-searchdb" target="_blank" rel="noopener">æœ¬åœ°æœç´¢</a></h2><p>å®‰è£…æ’ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb</span><br></pre></td></tr></table></figure>
<p>é…ç½®<code>__config.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># if auto, trigger search by changing input</span></span><br><span class="line">  <span class="comment"># if manual, trigger search by pressing enter key or search button</span></span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">auto</span></span><br><span class="line">  <span class="comment"># show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># unescape html strings to the readable one</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h2 id="é¡µé¢åŠ è½½è¿›åº¦æ¡"><a href="#é¡µé¢åŠ è½½è¿›åº¦æ¡" class="headerlink" title="é¡µé¢åŠ è½½è¿›åº¦æ¡"></a><a href="https://github.com/theme-next/theme-next-pace" target="_blank" rel="noopener">é¡µé¢åŠ è½½è¿›åº¦æ¡</a></h2><p>Change dir to <strong>NexT</strong> directory. There must be <code>layout</code>, <code>source</code>, <code>languages</code> and other directories:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> themes/next</span><br></pre></td></tr></table></figure>
<p>Install module to <code>source/lib</code> directory:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-pace <span class="built_in">source</span>/lib/pace</span><br></pre></td></tr></table></figure>
<p>Enable module in <strong>NexT</strong> <code>_config.yml</code> file and select your theme:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">pace:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Themes list:</span></span><br><span class="line">  <span class="comment"># big-counter | bounce | barber-shop | center-atom | center-circle | center-radar | center-simple</span></span><br><span class="line">  <span class="comment"># corner-indicator | fill-left | flat-top | flash | loading-bar | mac-osx | material | minimal</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">minimal</span></span><br></pre></td></tr></table></figure>
<p><strong>And, if you wants to use the CDN, then need to set:</strong> (you also need to find your corresponding theme css link in <a href="https://www.jsdelivr.com/package/npm/pace-js?path=themes" target="_blank" rel="noopener">jsdelivr</a>)</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">vendors:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">pace:</span> <span class="string">//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js</span></span><br><span class="line">  <span class="attr">pace_css:</span> <span class="string">//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Themes list:</strong></p>
<ul>
<li>pace-theme-big-counter</li>
<li>pace-theme-bounce</li>
<li>pace-theme-barber-shop</li>
<li>pace-theme-center-atom</li>
<li>pace-theme-center-circle</li>
<li>pace-theme-center-radar</li>
<li>pace-theme-center-simple</li>
<li>pace-theme-corner-indicator</li>
<li>pace-theme-fill-left</li>
<li>pace-theme-flash</li>
<li>pace-theme-loading-bar</li>
<li>pace-theme-mac-osx</li>
<li>pace-theme-minimal</li>
</ul>
<p>å„ç§è¿›åº¦æ¡æ ·å¼çš„é¢„è§ˆæ•ˆæœï¼š<a href="https://github.hubspot.com/pace/docs/welcome/" target="_blank" rel="noopener">https://github.hubspot.com/pace/docs/welcome/</a></p>
</blockquote>
<h2 id="æ–‡ç« æµè§ˆè¿›åº¦æ¡"><a href="#æ–‡ç« æµè§ˆè¿›åº¦æ¡" class="headerlink" title="æ–‡ç« æµè§ˆè¿›åº¦æ¡"></a><a href="https://github.com/theme-next/theme-next-reading-progress" target="_blank" rel="noopener">æ–‡ç« æµè§ˆè¿›åº¦æ¡</a></h2><p>Change dir to <strong>NexT</strong> directory. There must be <code>layout</code>, <code>source</code>, <code>languages</code> and other directories:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> themes/next</span><br></pre></td></tr></table></figure>
<p>Install module to <code>source/lib</code> directory:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-reading-progress <span class="built_in">source</span>/lib/reading_progress</span><br></pre></td></tr></table></figure>
<p>Enable module in <strong>NexT</strong> <code>_config.yml</code> file:</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">reading_progress:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">"#37c6c0"</span></span><br><span class="line">  <span class="attr">height:</span> <span class="string">2px</span></span><br></pre></td></tr></table></figure>
<p><strong>And, if you wants to use the CDN, then need to set:</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">vendors:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">reading_progress:</span> <span class="string">//cdn.jsdelivr.net/gh/theme-next/theme-next-reading-progress@1/reading_progress.min.js</span></span><br></pre></td></tr></table></figure>
<h2 id="å®ç°ç»Ÿè®¡åŠŸèƒ½"><a href="#å®ç°ç»Ÿè®¡åŠŸèƒ½" class="headerlink" title="å®ç°ç»Ÿè®¡åŠŸèƒ½"></a>å®ç°ç»Ÿè®¡åŠŸèƒ½</h2><p><strong> å®ç°æ•ˆæœå›¾ </strong><br><img src="word_count.png" alt></p>
<p>å…·ä½“å®ç°æ–¹æ³•<br>åœ¨åšå®¢æ ¹ç›®å½•ä¸‹,git-bash<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Post wordcount display settings</span><br><span class="line"># Dependencies: https://github.com/willin/hexo-wordcount</span><br><span class="line">word_count: true</span><br></pre></td></tr></table></figure></p>
<p><strong> ä¿®æ”¹ä¸»é¢˜ swig å¸ƒå±€ </strong><br>ä¸ºäº†èƒ½åœ¨æ–‡ç« ä¿¡æ¯å¤„æ˜¾ç¤ºå­—æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ <strong> themes/next/layout/_macro/post.swig </strong> ï¼Œåœ¨ <strong> class </strong> ä¸º <strong> post-meta </strong> çš„ div ä¸­çš„æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.word_count %&#125;</span><br><span class="line">    &lt;span class=&quot;post-letters-count&quot;&gt;</span><br><span class="line">        &amp;nbsp; | &amp;nbsp;</span><br><span class="line">        &lt;i class=&quot;fa fa-align-right&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;span&gt;å­—æ•°ç»Ÿè®¡:&#123;&#123; wordcount(post.content) &#125;&#125;å­—&lt;/span&gt;</span><br><span class="line">        &amp;nbsp; | &amp;nbsp;</span><br><span class="line">        &lt;i class=&quot;fa fa-align-left&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;span&gt;é˜…è¯»æ—¶é•¿:&#123;&#123; min2read(post.content) &#125;&#125;åˆ†&lt;/span&gt;</span><br><span class="line">    &lt;/span&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="ä¿®æ”¹æ–‡ç« å†…é“¾æ¥æ–‡æœ¬æ ·å¼"><a href="#ä¿®æ”¹æ–‡ç« å†…é“¾æ¥æ–‡æœ¬æ ·å¼" class="headerlink" title="ä¿®æ”¹æ–‡ç« å†…é“¾æ¥æ–‡æœ¬æ ·å¼"></a>ä¿®æ”¹æ–‡ç« å†…é“¾æ¥æ–‡æœ¬æ ·å¼</h2><p>ä¿®æ”¹æ–‡ä»¶ <strong> themes\next\source\css_common\components\post\post.styl </strong> ï¼Œåœ¨æœ«å°¾æ·»åŠ å¦‚ä¸‹cssæ ·å¼ï¼Œï¼š<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// æ–‡ç« å†…é“¾æ¥æ–‡æœ¬æ ·å¼</span><br><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#0593d3</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#0593d3</span>;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-id">#fc6423</span>;</span><br><span class="line">    <span class="selector-tag">border-bottom</span>: <span class="selector-tag">none</span>;</span><br><span class="line">    <span class="selector-tag">border-bottom</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#fc6423</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å…¶ä¸­é€‰æ‹© <strong> .post-body </strong> æ˜¯ä¸ºäº†ä¸å½±å“æ ‡é¢˜ï¼Œé€‰æ‹© <strong> p </strong>  æ˜¯ä¸ºäº†ä¸å½±å“é¦–é¡µâ€œé˜…è¯»å…¨æ–‡â€çš„æ˜¾ç¤ºæ ·å¼,é¢œè‰²å¯ä»¥è‡ªå·±å®šä¹‰ã€‚</p>
<h2 id="æ·»åŠ èƒŒæ™¯"><a href="#æ·»åŠ èƒŒæ™¯" class="headerlink" title="æ·»åŠ èƒŒæ™¯"></a>æ·»åŠ èƒŒæ™¯</h2><p>åœ¨ <strong> theme/next/source/css/_custom </strong> æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ <strong> custom.styl </strong> æ–‡ä»¶ï¼Œå¾€é‡Œé¢æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;   </span><br><span class="line">        <span class="attribute">background</span>:<span class="built_in">url</span>(å›¾ç‰‡é“¾æ¥);</span><br><span class="line">        <span class="attribute">background-size</span>:cover;</span><br><span class="line">        <span class="attribute">background-repeat</span>:no-repeat;</span><br><span class="line">        <span class="attribute">background-attachment</span>:fixed;</span><br><span class="line">        <span class="attribute">background-position</span>:center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æœ¬åœ°å›¾ç‰‡å°†å›¾ç‰‡æ”¾è‡³ä¸»é¢˜ç›®å½•ä¸‹ <strong> source\images </strong></p>
<h2 id="æ‰“èµåŠŸèƒ½"><a href="#æ‰“èµåŠŸèƒ½" class="headerlink" title="æ‰“èµåŠŸèƒ½"></a>æ‰“èµåŠŸèƒ½</h2><p>æ‰¾åˆ°Nextä¸»é¢˜ä¸‹çš„é…ç½®æ–‡ä»¶ä¸­çš„ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Reward</span></span><br><span class="line"><span class="attr">reward_comment:</span> <span class="string">åšæŒæŠ€æœ¯åˆ†äº«ï¼Œæ‚¨çš„æ”¯æŒå°†é¼“åŠ±æˆ‘ç»§ç»­åˆ›ä½œï¼</span></span><br><span class="line"><span class="attr">wechatpay:</span> <span class="string">/images/wechatpay.png</span></span><br><span class="line"><span class="attr">alipay:</span> <span class="string">/images/alipay.jpg</span></span><br><span class="line"><span class="comment">#bitcoin: /images/bitcoin.png</span></span><br></pre></td></tr></table></figure>
<p>é…ç½®æ–‡å­—å’Œå¯¹åº”æ”¶æ¬¾ç å³å¯</p>
<p><strong>åˆ é™¤æ‰“èµæ–‡å­—é—ªåŠ¨æ ·å¼</strong></p>
<p>è¿›å…¥<code>themes\next\source\css\_common\components\post\post-reward.styl</code>,æ‰¾åˆ°ä»¥ä¸‹æ ·å¼å¹¶åˆ é™¤</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#wechat</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">animation</span>: roll <span class="number">1s</span> infinite linear;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: roll <span class="number">1s</span> infinite linear;</span><br><span class="line">    <span class="attribute">-moz-animation</span>: roll <span class="number">1s</span> infinite linear;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#alipay</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">animation</span>: roll <span class="number">1s</span> infinite linear;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: roll <span class="number">1s</span> infinite linear;</span><br><span class="line">    <span class="attribute">-moz-animation</span>: roll <span class="number">1s</span> infinite linear;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#bitcoin</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: roll <span class="number">1s</span> infinite linear;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>: roll <span class="number">1s</span> infinite linear;</span><br><span class="line">    <span class="attribute">-moz-animation</span>: roll <span class="number">1s</span> infinite linear;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¿®æ”¹æ–‡ç« åº•éƒ¨çš„é‚£ä¸ªå¸¦-å·çš„æ ‡ç­¾"><a href="#ä¿®æ”¹æ–‡ç« åº•éƒ¨çš„é‚£ä¸ªå¸¦-å·çš„æ ‡ç­¾" class="headerlink" title="ä¿®æ”¹æ–‡ç« åº•éƒ¨çš„é‚£ä¸ªå¸¦#å·çš„æ ‡ç­¾"></a>ä¿®æ”¹æ–‡ç« åº•éƒ¨çš„é‚£ä¸ªå¸¦#å·çš„æ ‡ç­¾</h2><p><strong>å…·ä½“å®ç°æ–¹æ³•</strong></p>
<p>ä¿®æ”¹æ¨¡æ¿ <code>/themes/next/layout/_macro/post.swig</code> ï¼Œæœç´¢ <code>rel=&quot;tag&quot;&gt;#</code>ï¼Œå°†<code>#</code>æ¢æˆ <code>&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</code></p>
<h2 id="åœ¨ç½‘ç«™åº•éƒ¨åŠ ä¸Šè®¿é—®é‡"><a href="#åœ¨ç½‘ç«™åº•éƒ¨åŠ ä¸Šè®¿é—®é‡" class="headerlink" title="åœ¨ç½‘ç«™åº•éƒ¨åŠ ä¸Šè®¿é—®é‡"></a>åœ¨ç½‘ç«™åº•éƒ¨åŠ ä¸Šè®¿é—®é‡</h2><p><strong> å…·ä½“å®ç°æ–¹æ³• </strong><br>æ‰“å¼€ <code>\themes\next\layout\_partials\footer.swig</code> æ–‡ä»¶,åœ¨<code>copyright</code>å‰åŠ ä¸Šç”»çº¢çº¿è¿™å¥è¯ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script <span class="keyword">async</span> src=<span class="string">"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>ç„¶åå†åˆé€‚çš„ä½ç½®æ·»åŠ æ˜¾ç¤ºç»Ÿè®¡çš„ä»£ç ï¼Œå¦‚å›¾ï¼š<br><img src="site_count.png" alt></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"powered-by"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-user-md"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_container_site_uv"</span>&gt;</span></span><br><span class="line">    æœ¬ç«™è®¿å®¢æ•°:<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_value_site_uv"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    &amp;nbsp|&amp;nbsp</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œæœ‰ä¸¤ä¸­ä¸åŒè®¡ç®—æ–¹å¼çš„ç»Ÿè®¡ä»£ç ï¼š</p>
<ul>
<li><p>pvçš„æ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·è¿ç»­ç‚¹å‡»nç¯‡æ–‡ç« ï¼Œè®°å½•næ¬¡è®¿é—®é‡</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_container_site_pv"</span>&gt;</span></span><br><span class="line">    æœ¬ç«™æ€»è®¿é—®é‡<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_value_site_pv"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>æ¬¡</span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>uvçš„æ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·è¿ç»­ç‚¹å‡»nç¯‡æ–‡ç« ï¼Œåªè®°å½•1æ¬¡è®¿å®¢æ•°</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_container_site_uv"</span>&gt;</span></span><br><span class="line">  æœ¬ç«™æ€»è®¿é—®é‡<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_value_site_uv"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>æ¬¡</span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="æ–‡ç« åŠ å¯†è®¿é—®"><a href="#æ–‡ç« åŠ å¯†è®¿é—®" class="headerlink" title="æ–‡ç« åŠ å¯†è®¿é—®"></a>æ–‡ç« åŠ å¯†è®¿é—®</h2><p>æ‰“å¼€ <strong> themes\next\layout_partials\head </strong> æ–‡ä»¶,åœ¨ä»¥ä¸‹ä½ç½®æ’å…¥è¿™æ ·ä¸€æ®µä»£ç ï¼š<br><img src="safe_read.png" alt><br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">'&#123;&#123; page.password &#125;&#125;'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (prompt(<span class="string">'è¯·è¾“å…¥æ–‡ç« å¯†ç '</span>) !== <span class="string">'&#123;&#123; page.password &#125;&#125;'</span>) &#123;</span><br><span class="line">                alert(<span class="string">'å¯†ç é”™è¯¯ï¼'</span>);</span><br><span class="line">                <span class="keyword">if</span> (history.length === <span class="number">1</span>) &#123;</span><br><span class="line">                    location.replace(<span class="string">"http://xxxxxxx.xxx"</span>); <span class="comment">// è¿™é‡Œæ›¿æ¢æˆä½ çš„é¦–é¡µ</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    history.back();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)();</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>ç„¶ååœ¨æ–‡ç« ä¸Šå†™æˆç±»ä¼¼è¿™æ ·ï¼š<br><img src="safe_read_demo.png" alt><br>å°±okå•¦ï¼Œä¸è¿‡å¾ˆå®¹æ˜“è¢«ç ´è§£æ‰å™¢</p>
<p><strong> å½“ç„¶è¿˜æœ‰å¦ä¸€ç§æ–¹å¼ </strong><br><a href="https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md" target="_blank" rel="noopener">guide1</a><br><a href="https://github.com/edolphin-ydf/hexo-encrypt" target="_blank" rel="noopener">guide2</a><br>æŒ‰ç…§æŒ‡å¼•å°±å¯ä»¥å•¦~</p>
<h2 id="Fancybox3å›¾ç‰‡æµè§ˆ"><a href="#Fancybox3å›¾ç‰‡æµè§ˆ" class="headerlink" title="Fancybox3å›¾ç‰‡æµè§ˆ"></a>Fancybox3å›¾ç‰‡æµè§ˆ</h2><p>åšå®¢ä¸Šçš„å›¾ç‰‡ç‚¹å‡»æµè§ˆåŠŸèƒ½æ’ä»¶ã€‚</p>
<p>å¦‚æœå·²ç»å®‰è£…äº†æ—§ç‰ˆï¼Œåˆ™å…ˆåˆ é™¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ rm -rf themes/next/<span class="built_in">source</span>/lib/fancybox</span><br></pre></td></tr></table></figure>
<p>ç„¶åbashå»åˆ°<code>themes/next</code>ç›®å½•</p>
<p>è·å–æ’ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-fancybox3 <span class="built_in">source</span>/lib/fancybox</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹nextä¸»é¢˜ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>å¦‚æœæƒ³è¦é…ç½®CDNï¼Œåˆ™å†åŠ ä¸Š</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">vendors:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">fancybox:</span> <span class="string">//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js</span></span><br><span class="line">  <span class="attr">fancybox_css:</span> <span class="string">//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css</span></span><br></pre></td></tr></table></figure>
<h2 id="ä»£ç å—å¤åˆ¶"><a href="#ä»£ç å—å¤åˆ¶" class="headerlink" title="ä»£ç å—å¤åˆ¶"></a>ä»£ç å—å¤åˆ¶</h2><p>åœ¨Nextä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="comment"># Manual define the border radius in codeblock</span></span><br><span class="line">  <span class="comment"># Leave it empty for the default 1</span></span><br><span class="line">  <span class="attr">border_radius:</span></span><br><span class="line">  <span class="comment"># Add copy button on codeblock</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Show text copy result</span></span><br><span class="line">    <span class="attr">show_result:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>å¼€å¯å³å¯</p>
<h1 id="éƒ¨ç½²-1"><a href="#éƒ¨ç½²-1" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h1><p>é¦–å…ˆéœ€è¦è¿›è¡Œåˆ›å»ºæ‚¨ä¸ªäººçš„githubè´¦æˆ·</p>
<ol start="0">
<li>åˆ›å»ºå…¬é’¥<br>æ‰“å¼€git-bash,æ‰§è¡Œ<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"your_email@youremail.com"</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>githubå®˜æ–¹å‘½ä»¤ <a href="https://help.github.com/en/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" target="_blank" rel="noopener">é“¾æ¥</a></p>
<ol>
<li>ç›´æ¥æŒ‰ä¸‰æ¬¡å›è½¦ï¼Œå¯ä¸ç”¨è¾“å…¥å¯†ç ï¼Œç„¶åæ‰“å¼€Cç›˜æŸ¥æ‰¾Users/å½“å‰ç”¨æˆ·ç›®å½•(Administrator),æ‰¾åˆ°.sshæ–‡ä»¶å¤¹ï¼Œæ‰“å¼€æ–‡ä»¶å¤¹ä¸‹çš„id_rsa.pubæ–‡ä»¶ï¼Œå¯ç”¨è®°äº‹æœ¬æ–‡ä»¶æ‰“å¼€å°†é‡Œé¢æ–‡å­—å…¨éƒ¨å¤åˆ¶</li>
<li>æ‰“å¼€githubä¸ªäººä¸»é¡µ (<a href="https://github.com/settings/ssh" target="_blank" rel="noopener">https://github.com/settings/ssh</a>) ,ç‚¹å‡» Add SSH Key æŒ‰é’®ï¼Œç²˜è´´è¿›å»ä¿å­˜å³å¯</li>
<li><p>å®‰è£… hexo-deployer-gitã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»ºgithubä»“åº“<br><img src="new_repo.png" alt><br>ä»“åº“åä¸­å¡«å†™<code>&lt;githubçš„ç”¨æˆ·å&gt;.github.io</code></p>
</li>
<li>ä¿®æ”¹ <strong> _config.yml </strong> æ–‡ä»¶<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: &lt;repository url&gt; </span><br><span class="line">  branch: [branch]</span><br><span class="line">  message: [message]</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>repository urlä½¿ç”¨ssh urlå³å¯ï¼Œmessageä¸å¡«ä¹Ÿå¯<br>branchç”¨masteråˆ†æ”¯å³å¯</p>
<ol start="6">
<li>æ‰§è¡Œ<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo d</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>æˆ–è€…<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo g -d</span><br></pre></td></tr></table></figure></p>
<ol start="7">
<li>è¿›å…¥åšå®¢çš„githubæ‰€åœ¨ä»“åº“ï¼Œè¿›å…¥ä»“åº“è®¾ç½®,æŸ¥çœ‹GitHub Pages<br><img src="github_page.png" alt><br>å³å¯å®Œæˆéƒ¨ç½²</li>
</ol>
<h1 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h1><p>è¿™é‡Œåªæåˆ°ä¸€äº›ç¼–å†™è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜</p>
<p><a href="https://coding.net/help/doc/project/markdown.html#i-6" target="_blank" rel="noopener">markdownè¯­æ³•</a></p>
<h2 id="æ’å…¥å›¾ç‰‡"><a href="#æ’å…¥å›¾ç‰‡" class="headerlink" title="æ’å…¥å›¾ç‰‡"></a>æ’å…¥å›¾ç‰‡</h2><p>è¿™é‡Œæ¶‰åŠåˆ°<a href="https://hexo.io/zh-cn/docs/asset-folders" target="_blank" rel="noopener">èµ„æºæ–‡ä»¶å¤¹</a></p>
<h3 id="ç»å¯¹è·¯å¾„"><a href="#ç»å¯¹è·¯å¾„" class="headerlink" title="ç»å¯¹è·¯å¾„"></a>ç»å¯¹è·¯å¾„</h3><p>å½“Hexoé¡¹ç›®ä¸­åªç”¨åˆ°å°‘é‡å›¾ç‰‡æ—¶ï¼Œå¯ä»¥å°†å›¾ç‰‡ç»Ÿä¸€æ”¾åœ¨ <strong> source/images </strong> æ–‡ä»¶å¤¹ä¸­ï¼Œé€šè¿‡markdownè¯­æ³•è®¿é—®å®ƒä»¬ã€‚<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">![](/images/image.jpg)</span><br></pre></td></tr></table></figure></p>
<h3 id="ç›¸å¯¹è·¯å¾„"><a href="#ç›¸å¯¹è·¯å¾„" class="headerlink" title="ç›¸å¯¹è·¯å¾„"></a>ç›¸å¯¹è·¯å¾„</h3><p>å›¾ç‰‡é™¤äº†å¯ä»¥æ”¾åœ¨ç»Ÿä¸€çš„ <strong> source/images </strong> æ–‡ä»¶å¤¹ä¸­ï¼Œè¿˜å¯ä»¥æ”¾åœ¨æ–‡ç« è‡ªå·±çš„ç›®å½•ä¸­ã€‚æ–‡ç« çš„ç›®å½•å¯ä»¥é€šè¿‡é…ç½® <strong> config.yml </strong>æ¥ç”Ÿæˆã€‚<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure></p>
<p>æŠŠ <strong> _config.yml </strong> ä¸­é…ç½®post_asset_folderè®¾ç½®ä¸ºtrueåï¼Œé€šè¿‡å‘½ä»¤hexo new &lt;æ–‡ç« åå­—&gt;ï¼Œhexoå°±ä¼šåœ¨æ–‡ç« çš„ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªå’Œæ–‡ç« åŒåçš„æ–‡ä»¶å¤¹ï¼Œç„¶åæŠŠå›¾ç‰‡èµ„æºæ”¾è¿›è¯¥æ–‡ä»¶å¤¹ä¸‹ï¼Œå³å¯é€šè¿‡<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">![](image.jpg)</span><br></pre></td></tr></table></figure></p>
<p>è®°ä½å’Œç¬¬ä¸€ç‚¹ç»å¯¹è·¯å¾„æœ‰åŒºåˆ«ï¼Œåˆ«åœ¨è·¯å¾„å‰é¢åŠ /ï¼Œå¦åˆ™ä¼šå‡ºé”™</p>
<h2 id="æ–‡æ¡£æ ¼å¼"><a href="#æ–‡æ¡£æ ¼å¼" class="headerlink" title="æ–‡æ¡£æ ¼å¼"></a>æ–‡æ¡£æ ¼å¼</h2><p>å‡è®¾æˆ‘ä»¬çš„æ–‡ç« åä¸º â€œhello hexo markdwonâ€ï¼Œåœ¨å‘½ä»¤è¡Œé”®å…¥ä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: hello hexo markdown</span><br><span class="line">date: 2016-11-16 18:11:25</span><br><span class="line">tags:</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>è¿™äº›å†…å®¹æ˜¯å¹²å˜›çš„å‘¢ï¼Ÿäº‹å®ä¸Šï¼Œä»–ä»¬å°±æ˜¯ç”¨äºè®¾ç½® MarkDown æ–‡æ¡£åœ¨è¢«è§£æä¸ºé™æ€ç½‘é¡µæ–‡ä»¶æ—¶çš„ç›¸å…³é…ç½®ï¼Œè¿™äº›é…ç½®å‚æ•°ä¸€èˆ¬ä½äºæ–‡ä»¶ä¸­æœ€ä¸Šæ–¹ä»¥ â€” åˆ†éš”çš„åŒºåŸŸã€‚</p>
<p>å…¶ä¸­ï¼Œtitle çš„å€¼æ˜¯å½“å‰æ–‡æ¡£åï¼Œä¹Ÿæ˜¯å°†æ¥åœ¨ç½‘é¡µä¸­æ˜¾ç¤ºçš„æ–‡ç« æ ‡é¢˜ã€‚</p>
<p>date å€¼æ˜¯æˆ‘ä»¬æ–°å»ºæ–‡æ¡£æ—¶çš„å½“åœ°æ—¶åŒºæ—¶é—´ã€‚</p>
<p>tags å€¼æ˜¯æ–‡æ¡£çš„æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥éšæ„èµ‹å€¼ä¸ºæ–‡æ¡£è´´æ ‡ç­¾ã€‚å…¶ç”¨æ³•å¦‚ä¸‹ï¼š<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: hello hexo markdown</span><br><span class="line">date: 2016-11-16 18:11:25</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">- </span>hello</span><br><span class="line"><span class="bullet">- </span>hexo</span><br><span class="line"><span class="bullet">- </span>markdown</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p>
<h2 id="æ–‡ç« åˆ†ç±»"><a href="#æ–‡ç« åˆ†ç±»" class="headerlink" title="æ–‡ç« åˆ†ç±»"></a>æ–‡ç« åˆ†ç±»</h2><p>categories æ˜¯ç”¨æ¥ç»™æ–‡ç« åˆ†ç±»çš„ï¼Œå®ƒè·Ÿ tags ä¸åŒçš„æ˜¯å…¶å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§ã€‚</p>
<p>categories çš„ç”¨æ³•åŒ tags ä¸€æ ·ï¼Œåªä¸è¿‡æ–—ä¸ª categories å€¼æ˜¯åˆ†å…ˆåé¡ºåºçš„ã€‚</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">categories:</span><br><span class="line"><span class="bullet">- </span>hexo</span><br></pre></td></tr></table></figure>
<h2 id="æ–‡ç« æ‘˜è¦"><a href="#æ–‡ç« æ‘˜è¦" class="headerlink" title="æ–‡ç« æ‘˜è¦"></a>æ–‡ç« æ‘˜è¦</h2><p>æœ‰çš„æ—¶å€™ï¼Œä¸»é¢˜æ¨¡æ¿é…ç½®çš„ä¸å¤Ÿå¥½çš„è¯ï¼ŒHexo æœ€ç»ˆç”Ÿæˆçš„é™æ€ç«™ç‚¹æ˜¯ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆæ–‡ç« æ‘˜è¦çš„ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸ºäº†ä¿é™©èµ·è§ï¼Œæˆ‘ä»¬ä¹Ÿè‡ªå·±æ‰‹åŠ¨è®¾ç½®æ–‡ç« æ‘˜è¦ï¼Œè¿™æ ·ä¹Ÿæ–¹ä¾¿é¿å…è‡ªåŠ¨ç”Ÿæˆçš„æ‘˜è¦ä¸ä¼˜é›…çš„æƒ…å†µã€‚</p>
<p>è®¾ç½®æ–‡ç« æ‘˜è¦ï¼Œæˆ‘ä»¬åªéœ€åœ¨æƒ³æ˜¾ç¤ºä¸ºæ‘˜è¦çš„å†…å®¹ä¹‹åæ·» <code>&lt;!-- more --&gt;</code> å³å¯ã€‚åƒä¸‹é¢è¿™æ ·ï¼š<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: hello hexo markdown</span><br><span class="line">date: 2016-11-16 18:11:25</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">- </span>hello</span><br><span class="line"><span class="bullet">- </span>hexo</span><br><span class="line"><span class="bullet">- </span>markdown</span><br><span class="line">---</span><br><span class="line">æˆ‘æ˜¯çŸ­å°ç²¾æ‚çš„æ–‡ç« æ‘˜è¦(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§</span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- more --&gt;</span></span></span><br><span class="line">ç´§æ¥ç€æ–‡ç« æ‘˜è¦çš„æ­£æ–‡å†…å®¹</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·ï¼Œ <code>&lt;!-- more --&gt;</code>  ä¹‹å‰ã€æ–‡æ¡£é…ç½®å‚æ•°ä¹‹åä¸­çš„å†…å®¹ä¾¿ä¼šè¢«æ¸²æŸ“ä¸ºç«™ç‚¹ä¸­çš„æ–‡ç« æ‘˜è¦ã€‚</p>
<p>æ³¨æ„ï¼æ–‡ç« æ‘˜è¦åœ¨æ–‡ç« è¯¦æƒ…é¡µæ˜¯æ­£æ–‡ä¸­æœ€å‰é¢çš„å†…å®¹ã€‚</p>
<h1 id="Hexoå†…ç½®æ ‡ç­¾"><a href="#Hexoå†…ç½®æ ‡ç­¾" class="headerlink" title="Hexoå†…ç½®æ ‡ç­¾"></a>Hexoå†…ç½®æ ‡ç­¾</h1><h2 id="Noteæç¤ºå—"><a href="#Noteæç¤ºå—" class="headerlink" title="Noteæç¤ºå—"></a>Noteæç¤ºå—</h2><div class="note default"><p>default æç¤ºå—æ ‡ç­¾</p></div>
<div class="note primary"><p>primary æç¤ºå—æ ‡ç­¾</p></div>
<div class="note success"><p>success æç¤ºå—æ ‡ç­¾</p></div>
<div class="note info"><p>info æç¤ºå—æ ‡ç­¾</p></div>
<div class="note warning"><p>warning æç¤ºå—æ ‡ç­¾</p></div>
<div class="note danger"><p>danger æç¤ºå—æ ‡ç­¾</p></div>
<p>ä½¿ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% note default %&#125;</span><br><span class="line">default æç¤ºå—æ ‡ç­¾</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary %&#125;</span><br><span class="line">primary æç¤ºå—æ ‡ç­¾</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success %&#125;</span><br><span class="line">success æç¤ºå—æ ‡ç­¾</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info %&#125;</span><br><span class="line">info æç¤ºå—æ ‡ç­¾</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning %&#125;</span><br><span class="line">warning æç¤ºå—æ ‡ç­¾</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger %&#125;</span><br><span class="line">danger æç¤ºå—æ ‡ç­¾</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<p>Nextä¸»é¢˜é…ç½®æ–‡ä»¶å¯ä»¥ä¿®æ”¹é£æ ¼ï¼š</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Note tag (bs-callout).</span></span><br><span class="line"><span class="attr">note:</span></span><br><span class="line">  <span class="comment"># Note tag style values:</span></span><br><span class="line">  <span class="comment">#  - simple    bs-callout old alert style. Default.</span></span><br><span class="line">  <span class="comment">#  - modern    bs-callout new (v2-v3) alert style.</span></span><br><span class="line">  <span class="comment">#  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span></span><br><span class="line">  <span class="comment">#  - disabled  disable all CSS styles import of note tag.</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">flat</span></span><br><span class="line">  <span class="attr">icons:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">3</span></span><br><span class="line">  <span class="comment"># Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line">  <span class="comment"># Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line">  <span class="attr">light_bg_offset:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h2 id="Tabæ ‡ç­¾"><a href="#Tabæ ‡ç­¾" class="headerlink" title="Tabæ ‡ç­¾"></a>Tabæ ‡ç­¾</h2><p>tab æ ‡ç­¾ç”¨äºå¿«é€Ÿåˆ›å»º tab é€‰é¡¹å¡ï¼Œè¯­æ³•å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% tabs [Unique name], [index] %&#125;</span><br><span class="line">  &lt;!-- tab [Tab caption]@[icon] --&gt;</span><br><span class="line">  æ ‡ç­¾é¡µå†…å®¹ï¼ˆæ”¯æŒè¡Œå†…æ ‡ç­¾ï¼‰</span><br><span class="line">  &lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œå„å‚æ•°æ„ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>Unique name: å…¨å±€å”¯ä¸€çš„ Tab åç§°ï¼Œå°†ä½œä¸ºå„ä¸ªæ ‡ç­¾é¡µçš„ id å±æ€§å‰ç¼€</li>
<li>index: å½“å‰æ¿€æ´»çš„æ ‡ç­¾é¡µç´¢å¼•ï¼Œå¦‚æœæœªå®šä¹‰åˆ™é»˜è®¤é€‰ä¸­æ˜¾ç¤ºç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µï¼Œå¦‚æœè®¾ä¸º - 1 åˆ™é»˜è®¤éšè—æ‰€æœ‰æ ‡ç­¾é¡µ</li>
<li>Tab caption: å½“å‰æ ‡ç­¾é¡µçš„æ ‡é¢˜ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™ä¼šä»¥ Unique name åŠ ä¸Šç´¢å¼•ä½œä¸ºæ ‡é¢˜</li>
<li>icon: åœ¨æ ‡ç­¾é¡µæ ‡é¢˜ä¸­æ·»åŠ  Font awesome å›¾æ ‡</li>
</ul>
<p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% tabs Tabæ ‡ç­¾åˆ—è¡¨ %&#125;</span><br><span class="line">  &lt;!-- tab æ ‡ç­¾é¡µ1 --&gt;</span><br><span class="line">    æ ‡ç­¾é¡µ1æ–‡æœ¬å†…å®¹</span><br><span class="line">  &lt;!-- endtab --&gt;</span><br><span class="line">  &lt;!-- tab æ ‡ç­¾é¡µ2 --&gt;</span><br><span class="line">    æ ‡ç­¾é¡µ2æ–‡æœ¬å†…å®¹</span><br><span class="line">  &lt;!-- endtab --&gt;</span><br><span class="line">  &lt;!-- tab æ ‡ç­¾é¡µ3 --&gt;</span><br><span class="line">    æ ‡ç­¾é¡µ3æ–‡æœ¬å†…å®¹</span><br><span class="line">  &lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<div class="tabs" id="tabæ ‡ç­¾åˆ—è¡¨"><ul class="nav-tabs"><li class="tab active"><a href="#tabæ ‡ç­¾åˆ—è¡¨-1">æ ‡ç­¾é¡µ1</a></li><li class="tab"><a href="#tabæ ‡ç­¾åˆ—è¡¨-2">æ ‡ç­¾é¡µ2</a></li><li class="tab"><a href="#tabæ ‡ç­¾åˆ—è¡¨-3">æ ‡ç­¾é¡µ3</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tabæ ‡ç­¾åˆ—è¡¨-1"><p>  æ ‡ç­¾é¡µ1æ–‡æœ¬å†…å®¹</p></div><div class="tab-pane" id="tabæ ‡ç­¾åˆ—è¡¨-2"><p>  æ ‡ç­¾é¡µ2æ–‡æœ¬å†…å®¹</p></div><div class="tab-pane" id="tabæ ‡ç­¾åˆ—è¡¨-3"><p>  æ ‡ç­¾é¡µ3æ–‡æœ¬å†…å®¹</p></div></div></div>
<p>Nextä¸»é¢˜é…ç½®æŸ¥çœ‹</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Tabs tag.</span></span><br><span class="line"><span class="attr">tabs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">transition:</span></span><br><span class="line">    <span class="attr">tabs:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">labels:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">border_radius:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h2 id="Labelæ ‡ç­¾"><a href="#Labelæ ‡ç­¾" class="headerlink" title="Labelæ ‡ç­¾"></a>Labelæ ‡ç­¾</h2><p>é€šè¿‡ label æ ‡ç­¾å¯ä»¥ä¸ºæ–‡å­—æ·»åŠ èƒŒæ™¯è‰²ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% label [class]@text  %&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¯æŒçš„ class ç§ç±»åŒ…æ‹¬ <code>default</code> <code>primary</code> <code>success</code> <code>info</code> <code>warning</code> <code>danger</code>ï¼Œé»˜è®¤ä½¿ç”¨ <code>default</code> ä½œä¸ºç¼ºçœã€‚</p>
<p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">I heard the echo, &#123;% label default@from the valleys and the heart %&#125;</span><br><span class="line">Open to the lonely soul of &#123;% label info@sickle harvesting %&#125;</span><br><span class="line">Repeat outrightly, but also repeat the well-being of</span><br><span class="line">Eventually &#123;% label warning@swaying in the desert oasis %&#125;</span><br><span class="line">&#123;% label success@I believe %&#125; I am</span><br><span class="line">&#123;% label primary@Born as the bright summer flowers %&#125;</span><br><span class="line">Do not withered undefeated fiery demon rule</span><br><span class="line">Heart rate and breathing to bear &#123;% label danger@the load of the cumbersome %&#125;</span><br><span class="line">Bored</span><br></pre></td></tr></table></figure>
<blockquote>
<p>I heard the echo, <span class="label default">from the valleys and the heart</span><br>Open to the lonely soul of <span class="label info">sickle harvesting</span><br>Repeat outrightly, but also repeat the well-being of<br>Eventually <span class="label warning">swaying in the desert oasis</span><br><span class="label success">I believe</span> I am<br><span class="label primary">Born as the bright summer flowers</span><br>Do not withered undefeated fiery demon rule<br>Heart rate and breathing to bear <span class="label danger">the load of the cumbersome</span><br>Bored</p>
</blockquote>
<p>å¯åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­è®¾ç½® <code>label: false</code> æ¥å–æ¶ˆ label æ ‡ç­¾é»˜è®¤ CSS æ ·å¼ã€‚</p>
<h2 id="ButtonæŒ‰é’®"><a href="#ButtonæŒ‰é’®" class="headerlink" title="ButtonæŒ‰é’®"></a>ButtonæŒ‰é’®</h2><p>é€šè¿‡ button æ ‡ç­¾å¯ä»¥å¿«é€Ÿæ·»åŠ å¸¦æœ‰ä¸»é¢˜æ ·å¼çš„æŒ‰é’®ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% button /path/to/url/, text, icon [class], title %&#125;</span><br></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ç®€å†™ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% btn /path/to/url/, text, icon [class], title %&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ å›¾æ ‡ ID æ¥æºäº <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank" rel="noopener">FontAwesome</a> ã€‚</p>
<p>ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% btn #, æ–‡æœ¬ %&#125;</span><br><span class="line">&#123;% btn #, æ–‡æœ¬ &amp; æ ‡é¢˜,, æ ‡é¢˜ %&#125;</span><br><span class="line">&#123;% btn #, æ–‡æœ¬ &amp; å›¾æ ‡, home %&#125;</span><br><span class="line">&#123;% btn #, æ–‡æœ¬ &amp; å¤§å›¾æ ‡ (å›ºå®šå®½åº¦), home fa-fw fa-lg %&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<a class="btn" href="#">æ–‡æœ¬</a>
<a class="btn" href="#" title="æ ‡é¢˜">æ–‡æœ¬ & æ ‡é¢˜</a>
<a class="btn" href="#"><i class="fa fa-home"></i>æ–‡æœ¬ & å›¾æ ‡</a>
<a class="btn" href="#"><i class="fa fa-home fa-fw fa-lg"></i>æ–‡æœ¬ & å¤§å›¾æ ‡ (å›ºå®šå®½åº¦)</a>
</blockquote>
<h2 id="å¼•ç”¨ç«™å†…é“¾æ¥"><a href="#å¼•ç”¨ç«™å†…é“¾æ¥" class="headerlink" title="å¼•ç”¨ç«™å†…é“¾æ¥"></a>å¼•ç”¨ç«™å†…é“¾æ¥</h2><p>å¯ä»¥é€šè¿‡å¦‚ä¸‹è¯­æ³•å¼•å…¥ç«™å†…æ–‡ç« çš„åœ°å€æˆ–é“¾æ¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% post_path slug %&#125;</span><br><span class="line">&#123;% post_link slug [title] %&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ<code>slug</code> è¡¨ç¤º <code>_post</code> ç›®å½•ä¸‹çš„ Markdown æ–‡ä»¶åã€‚</p>
<p><code>post_path</code> æ ‡ç­¾å°†ä¼šæ¸²æŸ“ä¸ºæ–‡ç« çš„åœ°å€ï¼Œå³ <code>permalink</code>ï¼›è€Œ <code>post_link</code> æ ‡ç­¾å°†ä¼šæ¸²æŸ“ä¸ºé“¾æ¥ï¼Œå¯ä»¥é€šè¿‡ <code>title</code> æŒ‡å®šé“¾æ¥æ ‡é¢˜ã€‚</p>
<p>å¦‚ä»¥ä¸‹æ ‡ç­¾å°†ä¼šç”Ÿæˆ <code>/posts/hexo-github-æ­å»ºä¸ªäººåšå®¢.html</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% post_path hexo-github-æ­å»ºä¸ªäººåšå®¢ %&#125;</span><br></pre></td></tr></table></figure>
<p>è€Œä»¥ä¸‹æ ‡ç­¾åˆ™ä¼šç”Ÿæˆ/2018/09/07/hexo-github-æ­å»ºä¸ªäººåšå®¢/</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% post_link hexo-github-æ­å»ºä¸ªäººåšå®¢ é“¾æ¥æ ‡é¢˜ %&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§ç«™å†…å¼•ç”¨æ–¹å¼æ¯”ç›´æ¥ä½¿ç”¨ url å¼•ç”¨çš„å½¢å¼æ›´ä¸ºå¯é ï¼Œå› ä¸ºå³ä½¿ä¿®æ”¹äº† <code>permalink</code> æ ¼å¼ï¼Œæˆ–è€…ä¿®æ”¹äº†æ–‡ç« çš„è·¯ç”±åœ°å€ï¼Œåªè¦ Markdown æ–‡ä»¶åæ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå¼•ç”¨é“¾æ¥éƒ½ä¸ä¼šå¤±æ•ˆã€‚</p>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="http://yearito.cn/posts/hexo-writing-skills.html" target="_blank" rel="noopener">http://yearito.cn/posts/hexo-writing-skills.html</a></p>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
